# [49. ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„è·¯å¾„æ•°å­—ä¹‹å’Œ](https://leetcode.cn/problems/3Etpl5)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.cn/problems/3Etpl5)

## é¢˜ç›®

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½å­˜æ”¾æœ‰ä¸€ä¸ª `0` åˆ° `9` ä¹‹é—´çš„æ•°å­—ã€‚

æ¯æ¡ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„è·¯å¾„éƒ½ä»£è¡¨ä¸€ä¸ªæ•°å­—ï¼š

- ä¾‹å¦‚ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„è·¯å¾„ `1 -> 2 -> 3` è¡¨ç¤ºæ•°å­— `123` ã€‚

è®¡ç®—ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹ç”Ÿæˆçš„ **æ‰€æœ‰æ•°å­—ä¹‹å’Œ** ã€‚

**å¶èŠ‚ç‚¹** æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/02/19/num1tree.jpg)

> **è¾“å…¥ï¼š** root = [1,2,3]
>
> **è¾“å‡ºï¼š** 25
>
> **è§£é‡Šï¼š**
>
> ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ 1->2 ä»£è¡¨æ•°å­— 12
>
> ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ 1->3 ä»£è¡¨æ•°å­— 13
>
> å› æ­¤ï¼Œæ•°å­—æ€»å’Œ = 12 + 13 = 25

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/02/19/num2tree.jpg)

> **è¾“å…¥ï¼š** root = [4,9,0,5,1]
>
> **è¾“å‡ºï¼š** 1026
>
> **è§£é‡Šï¼š**
>
> ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ 4->9->5 ä»£è¡¨æ•°å­— 495
>
> ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ 4->9->1 ä»£è¡¨æ•°å­— 491
>
> ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ 4->0 ä»£è¡¨æ•°å­— 40
>
> å› æ­¤ï¼Œæ•°å­—æ€»å’Œ = 495 + 491 + 40 = 1026

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´ `[1, 1000]` å†…
- `0 <= Node.val <= 9`
- æ ‘çš„æ·±åº¦ä¸è¶…è¿‡ `10`

::: warning
æœ¬é¢˜ä¸ LeetCode [ç¬¬ 129 é¢˜](../problem/0129.md) ç›¸åŒã€‚
:::

## è§£é¢˜æ€è·¯

è¿™ä¸€é¢˜æ˜¯ [ç¬¬ 257 é¢˜](../problem/0257.md) çš„å˜å½¢é¢˜ï¼Œç¬¬ 257 é¢˜è¦æ±‚è¾“å‡ºæ¯æ¡ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼Œè¿™ä¸€é¢˜å˜æˆäº†æŠŠæ¯ä¸€ä¸ªä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„æ•°å­—éƒ½ä¸²è”èµ·æ¥ï¼Œå†ç´¯åŠ æ¯æ¡è·¯å¾„ï¼Œæ±‚å‡ºæœ€åçš„æ€»å’Œã€‚å®é™…åšé¢˜æ€è·¯åŸºæœ¬æ²¡å˜ã€‚

### æ€è·¯ä¸€ï¼šDFS

- ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰æ¥éå†äºŒå‰æ ‘ï¼Œè®¡ç®—ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ç”Ÿæˆçš„æ•°å­—ä¹‹å’Œã€‚
- å‡½æ•° `sumNumbers` æ˜¯å…¥å£å‡½æ•°ï¼Œè°ƒç”¨ `dfs` å‡½æ•°è¿›è¡Œé€’å½’ã€‚
- åœ¨ `dfs` å‡½æ•°ä¸­ï¼Œé€šè¿‡å‚æ•° `currentSum` è®°å½•å½“å‰è·¯å¾„ä¸Šçš„æ•°å­—ä¹‹å’Œã€‚
- å½“åˆ°è¾¾å¶å­èŠ‚ç‚¹æ—¶ï¼Œè¿”å›å½“å‰è·¯å¾„çš„æ•°å­—ä¹‹å’Œã€‚
- æ•´ä¸ªé€’å½’è¿‡ç¨‹è®¡ç®—äº†æ‰€æœ‰ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ç”Ÿæˆçš„æ•°å­—ä¹‹å’Œã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ï¼Œé€’å½’å‡½æ•°å¯¹æ¯ä¸ªèŠ‚ç‚¹è®¿é—®ä¸€æ¬¡ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(log n)`ï¼Œé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦å–å†³äºæ ‘çš„é«˜åº¦ã€‚åœ¨æœ€å¥½çš„æƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘æ˜¯å®Œå…¨å¹³è¡¡çš„ï¼Œæ ‘çš„é«˜åº¦ä¸º `O(log n)`ï¼›æœ€åæƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘æ˜¯é“¾çŠ¶çš„ï¼Œæ ‘çš„é«˜åº¦ä¸º `n`ï¼ˆå³èŠ‚ç‚¹æ•°ï¼‰ã€‚

---

### æ€è·¯äºŒï¼šå›æº¯

1. å®šä¹‰ä¸€ä¸ªç»“æœå˜é‡ `sum` å’Œä¸€ä¸ªè·¯å¾„å˜é‡ `num`ã€‚
2. ä½¿ç”¨å›æº¯ç®—æ³•ï¼Œé€šè¿‡é€’å½’å‡½æ•° `backtrack` éå†ç»„åˆçš„æ‰€æœ‰å¯èƒ½æ€§ã€‚
3. åœ¨ `backtrack` å‡½æ•°ä¸­ï¼Œå½“åˆ°è¾¾å¶å­èŠ‚ç‚¹æ—¶ï¼Œå°†å½“å‰è·¯å¾„çš„æ•°å­— `num` åŠ å…¥åˆ°ç»“æœå˜é‡ `sum` ä¸­ã€‚
4. åœ¨æ¯ä¸€å±‚é€’å½’ä¸­ï¼Œå°†å½“å‰æ•°å­—åŠ å…¥è·¯å¾„å˜é‡ï¼Œç„¶åé€’å½’è°ƒç”¨ä¸‹ä¸€å±‚ï¼Œæœ€åå»æ‰å½“å‰æ•°å­—ï¼Œå›æº¯åˆ°ä¸Šä¸€å±‚ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ï¼Œä½¿ç”¨å›æº¯æ–¹æ³•éå†äºŒå‰æ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹å¤„ï¼Œè¿›è¡Œå¸¸æ•°çº§çš„æ“ä½œã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(log n)`ï¼Œé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦å–å†³äºæ ‘çš„é«˜åº¦ã€‚åœ¨æœ€å¥½çš„æƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘æ˜¯å®Œå…¨å¹³è¡¡çš„ï¼Œæ ‘çš„é«˜åº¦ä¸º `O(log n)`ï¼›æœ€åæƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘æ˜¯é“¾çŠ¶çš„ï¼Œæ ‘çš„é«˜åº¦ä¸º `n`ï¼ˆå³èŠ‚ç‚¹æ•°ï¼‰ã€‚

## ä»£ç 

::: code-tabs

@tab DFS

```javascript
/**
 * @param {TreeNode} root
 * @return {number}
 */
var sumNumbers = function (root) {
	const dfs = (root, currentSum) => {
		if (!root) return 0;
		currentSum = currentSum * 10 + root.val;
		if (!root.left && !root.right) return currentSum;
		let left = dfs(root.left, currentSum);
		let right = dfs(root.right, currentSum);
		return left + right;
	};
	return dfs(root, 0);
};
```

@tab å›æº¯

```javascript
/**
 * @param {TreeNode} root
 * @return {number}
 */
var sumNumbers = function (root) {
	let sum = 0,
		num = 0;

	const backtrack = (root) => {
		if (!root) return;

		// å°†å½“å‰æ•°å­—åŠ å…¥è·¯å¾„å˜é‡
		num = root.val + 10 * num;

		// åˆ°è¾¾å¶å­èŠ‚ç‚¹ï¼Œå°†å½“å‰è·¯å¾„çš„æ•°å­— num åŠ å…¥åˆ°ç»“æœå˜é‡ sum ä¸­
		if (!root.left && !root.right) {
			sum += num;
			num = (num - root.val) / 10;
			return;
		}

		backtrack(root.left);
		backtrack(root.right);

		// ä»è·¯å¾„å˜é‡ä¸­å»æ‰å½“å‰æ•°å­—
		num = (num - root.val) / 10;
	};

	backtrack(root);

	return sum;
};
```

:::
