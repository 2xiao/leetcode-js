# [14. å­—ç¬¦ä¸²ä¸­çš„å˜ä½è¯](https://leetcode.cn/problems/MPnaiL)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.cn/problems/MPnaiL)

## é¢˜ç›®

ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² `s1` å’Œ `s2`ï¼Œå†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ `s2` æ˜¯å¦åŒ…å« `s1` çš„æŸä¸ªå˜ä½è¯ã€‚

æ¢å¥è¯è¯´ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ’åˆ—ä¹‹ä¸€æ˜¯ç¬¬äºŒä¸ªå­—ç¬¦ä¸²çš„ **å­ä¸²** ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥:** s1 = "ab" s2 = "eidbaooo"
>
> **è¾“å‡º:** True
>
> **è§£é‡Š:** s2 åŒ…å« s1 çš„æ’åˆ—ä¹‹ä¸€ ("ba").

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥:** s1= "ab" s2 = "eidboaoo"
>
> **è¾“å‡º:** False

**æç¤ºï¼š**

- `1 <= s1.length, s2.length <= 10^4`
- `s1` å’Œ `s2` ä»…åŒ…å«å°å†™å­—æ¯

::: warning
æœ¬é¢˜ä¸ LeetCode [ç¬¬ 567 é¢˜](../problem/0567.md) ç›¸åŒã€‚
:::

## è§£é¢˜æ€è·¯

è¿™ç§é¢˜ç›®æ˜¯æ˜æ˜¾çš„æ»‘åŠ¨çª—å£ç®—æ³•ï¼Œç›¸å½“ç»™ä½ ä¸€ä¸ª `s1` å’Œä¸€ä¸ª `s2`ï¼Œè¯·é—®ä½  `s2` ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå­ä¸²ï¼ŒåŒ…å« `s1` ä¸­æ‰€æœ‰å­—ç¬¦ä¸”ä¸åŒ…å«å…¶ä»–å­—ç¬¦ã€‚

æ»‘åŠ¨çª—å£ç®—æ³•çš„æ€è·¯æ˜¯è¿™æ ·ï¼š

1. ä½¿ç”¨åŒæŒ‡é’ˆä¸­çš„å·¦å³æŒ‡é’ˆï¼Œåˆå§‹åŒ– `left = right = 0`ï¼ŒæŠŠç´¢å¼•å·¦é—­å³å¼€åŒºé—´ `[left, right)` ç§°ä¸ºä¸€ä¸ªã€Œçª—å£ã€ï¼›
2. ä¸æ–­åœ°å¢åŠ  `right` æŒ‡é’ˆæ‰©å¤§çª—å£ `[left, right)`ï¼Œç›´åˆ°çª—å£ä¸­çš„å­—ç¬¦ä¸²ç¬¦åˆè¦æ±‚ï¼ˆåŒ…å«äº† `s1.length` ä¸ªå­—ç¬¦ï¼‰ï¼›
3. åœæ­¢å¢åŠ  `right`ï¼Œè½¬è€Œä¸æ–­å¢åŠ  `left` æŒ‡é’ˆç¼©å°çª—å£ `[left, right)`ï¼Œç›´åˆ°çª—å£ä¸­çš„å­—ç¬¦ä¸²ä¸å†ç¬¦åˆè¦æ±‚ï¼ˆä¸åŒ…å« `s1.length` ä¸ªå­—ç¬¦äº†ï¼‰ï¼›åŒæ—¶ï¼Œæ¯æ¬¡å¢åŠ  `left`ï¼Œéƒ½è¦æ›´æ–°ä¸€è½®ç»“æœï¼›
4. é‡å¤ç¬¬ 2 å’Œç¬¬ 3 æ­¥ï¼Œç›´åˆ° `right` åˆ°è¾¾å­—ç¬¦ä¸² `s2` çš„å°½å¤´ï¼›

è¯¦ç»†çš„æ»‘åŠ¨çª—å£ç­”é¢˜æ¡†æ¶è®²è§£ï¼Œå¯é˜…è¯» [ã€Š3.11 æ»‘åŠ¨çª—å£ã€‹](../book/slide_window.md)ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š `O(n + m)`ï¼Œå…¶ä¸­ `n` æ˜¯ `s2` çš„é•¿åº¦ï¼Œ`m` æ˜¯ `s1` çš„é•¿åº¦ã€‚
  - åˆå§‹åŒ– `need` å­—å…¸éœ€è¦éå†å­—ç¬¦ä¸² `s1`ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ `O(m)`ï¼›
  - æ»‘åŠ¨çª—å£éå† `s2`ï¼Œå¤–å±‚çš„ `while` å¾ªç¯éå†å­—ç¬¦ä¸² `s2`ï¼Œä¸”æ¯æ¬¡è¿­ä»£ç§»åŠ¨å³è¾¹ç•Œ `right`ï¼Œæœ€å¤šéå† `n` æ¬¡ï¼›
  - å†…å±‚ `while` å¾ªç¯åœ¨çª—å£å¤§å°è¾¾åˆ° `s1.length` æ—¶æ‰ä¼šè§¦å‘ï¼Œä½†å®ƒæ€»å…±åªç§»åŠ¨ `left` æŒ‡é’ˆ `n` æ¬¡ï¼Œå› æ­¤æ€»çš„ç§»åŠ¨æ“ä½œæ˜¯çº¿æ€§çš„ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š `O(1)`ï¼Œ`need` å’Œ `window` å­—å…¸çš„å¤§å°æœ€å¤šæ˜¯è‹±æ–‡å­—æ¯çš„æ•°é‡ï¼ˆ26 ä¸ªå­—æ¯ï¼‰ï¼Œæ‰€ä»¥å®ƒä»¬çš„ç©ºé—´å¤æ‚åº¦æ˜¯ `O(1)`ï¼Œå…¶ä»–å˜é‡çš„å­˜å‚¨æ˜¯å¸¸æ•°ç©ºé—´ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s1
 * @param {string} s2
 * @return {boolean}
 */
var checkInclusion = function (s1, s2) {
	let window = {},
		need = {};
	for (let i of s1) {
		need[i] = (need[i] || 0) + 1;
	}

	let left = 0,
		right = 0,
		valid = 0;

	while (right < s2.length) {
		let c = s2[right];
		right++;

		// è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°
		if (need[c]) {
			window[c] = (window[c] || 0) + 1;
			if (window[c] == need[c]) {
				valid += 1;
			}
		}

		// åˆ¤æ–­å·¦ä¾§çª—å£æ˜¯å¦è¦æ”¶ç¼©
		while (right - left >= s1.length) {
			// åœ¨è¿™é‡Œåˆ¤æ–­æ˜¯å¦æ‰¾åˆ°äº†åˆæ³•çš„å­ä¸²
			if (valid == Object.keys(need).length) {
				return true;
			}

			let d = s2[left];
			left++;

			// è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–°
			if (need[d]) {
				if (window[d] == need[d]) {
					valid--;
				}
				window[d]--;
			}
		}
	}

	// æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å­ä¸²
	return false;
};
```
