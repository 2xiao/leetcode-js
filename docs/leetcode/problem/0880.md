# [880. Decoded String at Index](https://leetcode.com/problems/decoded-string-at-index/)

ðŸŸ  <font color=#ffb800>Medium</font>&emsp; ðŸ”–&ensp; [`æ ˆ`](../solution/stack.md) [`å­—ç¬¦ä¸²`](../solution/string.md)

## é¢˜ç›®

You are given an encoded string `s`. To decode the string to a tape, the encoded string is read one character at a time and the following steps are taken:

- If the character read is a letter, that letter is written onto the tape.
- If the character read is a digit `d`, the entire current tape is repeatedly written `d - 1` more times in total.

Given an integer `k`, return the `kth` letter (`1-indexed`) in the decoded string.

**Example 1**:

::: tip

Input: `S = "leet2code3", K = 10`

Output: `"o"`

:::

Explanation:
The decoded string is `"leetleetcodeleetleetcodeleetleetcode"`.
The` 10th` letter in the string is `"o"`.

**Example 2**:

::: tip

Input: `S = "ha22", K = 5`

Output: `"h"`

:::

Explanation:
The decoded string is `"hahahaha"`. The `5th` letter is `"h"`.

**Example 3**:

::: tip

Input: `S = "a2345678999999999999999", K = 1`

Output: `"a"`

:::

Explanation:
The decoded string is `"a"` repeated `8301530446056247680` times. The 1st letter is `"a"`.

**Note**:

1. `2 <= S.length <= 100`
2. `S` will only contain lowercase letters and digits `2` through `9`.
3. `S` starts with a letter.
4. `1 <= K <= 10^9`
5. It is guaranteed that `k` is less than or equal to the length of the decoded string.
6. The decoded string is guaranteed to have less than `2^63` letters.

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªç¼–ç å­—ç¬¦ä¸² `S`ã€‚ä¸ºäº†æ‰¾å‡ºè§£ç å­—ç¬¦ä¸²å¹¶å°†å…¶å†™å…¥ç£å¸¦ï¼Œä»Žç¼–ç å­—ç¬¦ä¸²ä¸­æ¯æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶é‡‡å–ä»¥ä¸‹æ­¥éª¤ï¼š

- å¦‚æžœæ‰€è¯»çš„å­—ç¬¦æ˜¯å­—æ¯ï¼Œåˆ™å°†è¯¥å­—æ¯å†™åœ¨ç£å¸¦ä¸Šã€‚
- å¦‚æžœæ‰€è¯»çš„å­—ç¬¦æ˜¯æ•°å­—ï¼ˆä¾‹å¦‚ `d`ï¼‰ï¼Œåˆ™æ•´ä¸ªå½“å‰ç£å¸¦æ€»å…±ä¼šè¢«é‡å¤å†™ `d-1` æ¬¡ã€‚

çŽ°åœ¨ï¼Œå¯¹äºŽç»™å®šçš„ç¼–ç å­—ç¬¦ä¸² `S` å’Œç´¢å¼• `K`ï¼ŒæŸ¥æ‰¾å¹¶è¿”å›žè§£ç å­—ç¬¦ä¸²ä¸­çš„ç¬¬ `K` ä¸ªå­—æ¯ã€‚

## è§£é¢˜æ€è·¯

ç”±äºŽè§£ç åŽçš„å­—ç¬¦ä¸²æœ‰å¯èƒ½è¶…å¤§ï¼Œä¸ä»…ä¼šè¶…æ—¶ï¼Œå†…å­˜ä¹Ÿä¼šæº¢å‡ºï¼Œæ‰€ä»¥ä¸èƒ½ç›´æŽ¥æš´åŠ›æ‰«æè§£ç ã€‚

ä»”ç»†è§‚å¯Ÿä¼šå‘çŽ°ï¼Œå¦‚æžœæœ‰ä¸€ä¸ªåƒ `abcdeabcdeabcdeabcdeabcdeabcde` è¿™æ ·çš„è§£ç å­—ç¬¦ä¸²ï¼Œå’Œä¸€ä¸ªåƒ `K=23` è¿™æ ·çš„ç´¢å¼•ï¼Œé‚£ä¹ˆå¦‚æžœ `K=3`ï¼Œç­”æ¡ˆæ˜¯ç›¸åŒçš„ã€‚

æ‰€ä»¥å¯ä»¥ä»ŽåŽå‘å‰é€†å‘å¯»æ‰¾ï¼Œè·Ÿè¸ªè§£ç å­—ç¬¦ä¸²çš„å¤§å°æ¥æ‰¾å‡ºç­”æ¡ˆã€‚æ¯å½“è§£ç çš„å­—ç¬¦ä¸²ç­‰äºŽæŸäº›å•è¯ï¼ˆå¦‚ `abcde`ï¼‰é‡å¤ `n` æ¬¡æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°† `k` å‡å°‘åˆ° `K % (abcde.length)`ã€‚

å…·ä½“ç®—æ³•æ˜¯ï¼š

- é¦–å…ˆé¡ºåºéåŽ†å­—ç¬¦ä¸²ï¼Œè®¡ç®—è§£ç å­—ç¬¦ä¸²çš„æ€»é•¿åº¦ `size`ï¼›
- å†ä»Žå½“å‰å­—ç¬¦ä¸²æœ€åŽä¸€ä½å¼€å§‹éåŽ†ï¼Œç”¨ `K` å¯¹æ€»é•¿åº¦æ±‚ä½™ï¼š `K %= size`ï¼›
- å¦‚æžœæ²¡æ•´é™¤ï¼Œåˆ™çœ‹å½“å‰æ˜¯å¦æ˜¯æ•°å­—ï¼š
  - æ˜¯æ•°å­—ï¼Œåˆ™å°†æ€»é•¿åº¦ç¼©å°ç­‰é‡å€ `size = size / S[i]` ï¼›
  - ä¸æ˜¯æ•°å­—ï¼Œåˆ™æ€»é•¿åº¦å‡ä¸€ `size = size - 1` ï¼›
- å¦‚æžœæ•´é™¤äº†ï¼Œè§‚å¯Ÿæ˜¯å¦æ˜¯æ•°å­—ï¼š
  - æ˜¯æ•°å­—ï¼Œåˆ™å°†æ€»é•¿åº¦ç¼©å°ç­‰é‡å€ `size = size / S[i]` ï¼›
  - ä¸æ˜¯æ•°å­—ï¼Œåˆ™æ‰¾åˆ°ç­”æ¡ˆã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @param {number} k
 * @return {string}
 */
var decodeAtIndex = function (s, k) {
  let size = 0;

  const isDigit = (str) => str >= "0" && str <= "9";

  for (let item of s) {
    if (isDigit(item)) size *= Number(item);
    else size++;
  }

  for (let i = s.length - 1; i >= 0; i--) {
    k %= size;
    if (k != 0) {
      if (isDigit(s[i])) {
        size = size / Number(s[i]);
      } else {
        size--;
      }
    } else {
      if (isDigit(s[i])) {
        size = size / Number(s[i]);
      } else {
        return s[i];
      }
    }
  }
};
```
