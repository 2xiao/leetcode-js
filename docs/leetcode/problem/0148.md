# [148. Sort List](https://leetcode.com/problems/sort-list/)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`é“¾è¡¨`](../solution/linked-list.md) [`åŒæŒ‡é’ˆ`](../solution/two-pointers.md) [`åˆ†æ²»`](../solution/divide-and-conquer.md) [`æ’åº`](../solution/sorting.md) [`å½’å¹¶æ’åº`](../solution/merge-sort.md)

### é¢˜ç›®

Sort a linked list in O(n log n) time using constant space complexity.

**Example 1**:

::: tip

Input: 4->2->1->3

Output: 1->2->3->4

:::

**Example 2**:

::: tip

Input: -1->5->3->4->0

Output: -1->0->3->4->5

:::

### é¢˜ç›®å¤§æ„

é“¾è¡¨çš„æ’åºï¼Œè¦æ±‚æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯ `O(n log n)`ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ `O(1)`ã€‚

### è§£é¢˜æ€è·¯

è¿™é“é¢˜åªèƒ½ç”¨å½’å¹¶æ’åºæ‰èƒ½ç¬¦åˆè¦æ±‚ã€‚[ç¬¬ 876 é¢˜](./0876.md) å–é“¾è¡¨çš„ä¸­é—´ç‚¹ï¼Œ[ç¬¬ 21 é¢˜](./0021.md) åˆå¹¶ 2 ä¸ªæœ‰åºé“¾è¡¨ï¼Œä¹Ÿç”¨åˆ°äº†å½’å¹¶æ’åºã€‚

### ä»£ç 

```go

package leetcode

/**
 * Definition for singly-linked list.
 * type ListNode struct {
 *     Val int
 *     Next *ListNode
 * }
 */
func sortList(head *ListNode) *ListNode {
	length := 0
	cur := head
	for cur != nil {
		length++
		cur = cur.Next
	}
	if length <= 1 {
		return head
	}

	middleNode := middleNode(head)
	cur = middleNode.Next
	middleNode.Next = nil
	middleNode = cur

	left := sortList(head)
	right := sortList(middleNode)
	return mergeTwoLists(left, right)
}

func middleNode(head *ListNode) *ListNode {
	if head == nil || head.Next == nil {
		return head
	}
	p1 := head
	p2 := head
	for p2.Next != nil && p2.Next.Next != nil {
		p1 = p1.Next
		p2 = p2.Next.Next
	}
	return p1
}

func mergeTwoLists(l1 *ListNode, l2 *ListNode) *ListNode {
	if l1 == nil {
		return l2
	}
	if l2 == nil {
		return l1
	}
	if l1.Val < l2.Val {
		l1.Next = mergeTwoLists(l1.Next, l2)
		return l1
	}
	l2.Next = mergeTwoLists(l1, l2.Next)
	return l2
}


```
