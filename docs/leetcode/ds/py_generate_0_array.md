# 2.1 数组

数组（Array）是一种线性表数据结构。它用一组连续的内存空间，来存储一组具有相同类型的数据。

#### 线性表（Linear List）
线性表就是数据排成像一条线一样的结构。每个线性表上的数据最多只有前和后两个方向。数组、链表、队列、栈都是是线性表结构。

与它相对立的是非线性表，比如二叉树、堆、图等。在非线性表中，数据之间并不是简单的前后关系。

#### 连续的内存空间和相同类型的数据
因为数组有连续的内存空间和相同类型的数据，所以数组支持**“随机访问”**。但这两个限制也让数组的很多操作变得非常低效，比如在数组中删除、插入一个数据，为了保证连续性，就需要做大量的数据搬移工作。

在面试的时候，面试官常常会问数组和链表的区别，很多人都回答说，“链表适合插入、删除，时间复杂度O(1)；数组适合查找，查找时间复杂度为O(1)”。实际上，这种表述是不准确的。数组适合查找操作，但是查找的时间复杂度并不为O(1)。即便是排好序的数组，用二分查找，时间复杂度也是O(logn)。所以，正确的表述应该是，数组支持随机访问，根据下标随机访问的时间复杂度为O(1)。

### 低效的“插入”和“删除”
数组为了保持内存数据的连续性，会导致插入、删除这两个操作比较低效。为什么会低效？有哪些改进方法？

#### 插入操作

假设数组的长度为n，将一个数据插入到数组中的第k个位置。为了把第k个位置腾给新来的数据，要将第k～n这部分的元素都顺序地往后挪一位。

如果在数组的末尾插入元素，不需要移动数据，时间复杂度为O(1)。但如果在数组的开头插入元素，那所有的数据都要依次往后移动一位，所以最坏时间复杂度是O(n)。 因为每个位置插入元素的概率一样，所以平均情况时间复杂度为(1+2+…n)/n=O(n)。

如果数组中的数据是有序的，在插入新元素时就必须搬移k之后的数据。但是，如果数组中存储的数据并没有任何规律，将某个新元素插入到第k个位置时，为了避免大规模的数据搬移，有一个简单的办法就是，直接将第k位的数据搬移到数组元素的最后，把新的元素直接放入第k个位置。

例如：数组a中存储了如下5个元素：a，b，c，d，e。要将元素x插入到第3个位置。只需将c放入到a[5]，将a[2]赋值为x即可。最后数组中的元素如下： a，b，x，d，e，c。

利用这种处理技巧，在特定场景下，在第k个位置插入一个元素的时间复杂度就会降为O(1)。这个处理思想在**快排**中也会用到。

#### 删除操作

跟插入数据类似，如果我们要删除第k个位置的数据，为了内存的连续性，也需要搬移数据，不然中间就会出现空洞，内存就不连续了。

和插入类似，如果删除数组末尾的数据，则最好情况时间复杂度为O(1)；如果删除开头的数据，则最坏情况时间复杂度为O(n)；平均情况时间复杂度也为O(n)。

实际上，在某些特殊场景下，并不一定非得追求数组中数据的连续性。如果每次的删除操作并不是真正地搬移数据，只是记录数据已经被删除。当数组没有更多空间存储数据时，再触发执行一次真正的删除操作，就可以大大减少了删除操作导致的数据搬移。这也是**JVM标记清除垃圾回收算法**的核心思想。



## 相关题目

### 数组操作

| 题号 | 标题 | 题解 | 标签 | 难度 |
| :------ | :------ | :------ | :------ | :------ |
| 0189 | [轮转数组](https://leetcode.com/problems/rotate-array/) | [JS](https://2xiao.github.io/fe/leetcode/problem/0189) | 数组、数学、双指针 | 中等 |
| 0066 | [加一](https://leetcode.com/problems/plus-one/) | [JS](https://2xiao.github.io/fe/leetcode/problem/0066) | 数组、数学 | 简单 |
| 0724 | [寻找数组的中心下标](https://leetcode.com/problems/find-pivot-index/) | [JS](https://2xiao.github.io/fe/leetcode/problem/0724) | 数组、前缀和 | 简单 |
| 0485 | [最大连续 1 的个数](https://leetcode.com/problems/max-consecutive-ones/) | [JS](https://2xiao.github.io/fe/leetcode/problem/0485) | 数组 | 简单 |
| 0238 | [除自身以外数组的乘积](https://leetcode.com/problems/product-of-array-except-self/) | [JS](https://2xiao.github.io/fe/leetcode/problem/0238) | 数组、前缀和 | 中等 |

### 二维数组

| 题号 | 标题 | 题解 | 标签 | 难度 |
| :------ | :------ | :------ | :------ | :------ |
| 0498 | [对角线遍历](https://leetcode.com/problems/diagonal-traverse/) |  | 数组、矩阵、模拟 | 中等 |
| 0048 | [旋转图像](https://leetcode.com/problems/rotate-image/) |  | 数组、数学、矩阵 | 中等 |
| 0073 | [矩阵置零](https://leetcode.com/problems/set-matrix-zeroes/) |  | 数组、哈希表、矩阵 | 中等 |
| 0054 | [螺旋矩阵](https://leetcode.com/problems/spiral-matrix/) |  | 数组、矩阵、模拟 | 中等 |
| 0059 | [螺旋矩阵 II](https://leetcode.com/problems/spiral-matrix-ii/) |  | 数组、矩阵、模拟 | 中等 |
| 0289 | [生命游戏](https://leetcode.com/problems/game-of-life/) |  | 数组、矩阵、模拟 | 中等 |

