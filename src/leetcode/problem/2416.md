# [2416. Sum of Prefix Scores of Strings](https://leetcode.com/problems/sum-of-prefix-scores-of-strings/)

ðŸ”´ <font color=#ff334b>Hard</font>&emsp; ðŸ”–&ensp; [`å­—å…¸æ ‘`](/leetcode/outline/tag/trie.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å­—ç¬¦ä¸²`](/leetcode/outline/tag/string.md) [`è®¡æ•°`](/leetcode/outline/tag/counting.md)&emsp; ðŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/sum-of-prefix-scores-of-strings/)

## é¢˜ç›®

You are given an array `words` of size `n` consisting of **non-empty**
strings.

We define the **score** of a string `word` as the **number** of strings
`words[i]` such that `word` is a **prefix** of `words[i]`.

- For example, if `words = ["a", "ab", "abc", "cab"]`, then the score of `"ab"` is `2`, since `"ab"` is a prefix of both `"ab"` and `"abc"`.

Return _an array_`answer` _of size_`n` _where_`answer[i]` _is the **sum** of
scores of every **non-empty** prefix of _`words[i]`.

**Note** that a string is considered as a prefix of itself.

**Example 1:**

> Input: words = ["abc","ab","bc","b"]
>
> Output: [5,4,3,2]
>
> Explanation: The answer for each string is the following:
>
> - "abc" has 3 prefixes: "a", "ab", and "abc".
> - There are 2 strings with the prefix "a", 2 strings with the prefix "ab", and 1 string with the prefix "abc".
>
> The total is answer[0] = 2 + 2 + 1 = 5.
>
> - "ab" has 2 prefixes: "a" and "ab".
> - There are 2 strings with the prefix "a", and 2 strings with the prefix "ab".
>
> The total is answer[1] = 2 + 2 = 4.
>
> - "bc" has 2 prefixes: "b" and "bc".
> - There are 2 strings with the prefix "b", and 1 string with the prefix "bc".
>
> The total is answer[2] = 2 + 1 = 3.
>
> - "b" has 1 prefix: "b".
> - There are 2 strings with the prefix "b".
>
> The total is answer[3] = 2.

**Example 2:**

> Input: words = ["abcd"]
>
> Output: [4]
>
> Explanation:
>
> "abcd" has 4 prefixes: "a", "ab", "abc", and "abcd".
>
> Each prefix has a score of one, so the total is answer[0] = 1 + 1 + 1 + 1 = 4.

**Constraints:**

- `1 <= words.length <= 1000`
- `1 <= words[i].length <= 1000`
- `words[i]` consists of lowercase English letters.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ `words` ï¼Œè¯¥æ•°ç»„ç”± **éžç©º** å­—ç¬¦ä¸²ç»„æˆã€‚

å®šä¹‰å­—ç¬¦ä¸² `word` çš„ **åˆ†æ•°** ç­‰äºŽä»¥ `word` ä½œä¸º **å‰ç¼€** çš„ `words[i]` çš„æ•°ç›®ã€‚

- ä¾‹å¦‚ï¼Œå¦‚æžœ `words = ["a", "ab", "abc", "cab"]` ï¼Œé‚£ä¹ˆ `"ab"` çš„åˆ†æ•°æ˜¯ `2` ï¼Œå› ä¸º `"ab"` æ˜¯ `"ab"` å’Œ `"abc"` çš„ä¸€ä¸ªå‰ç¼€ã€‚

è¿”å›žä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ `answer` ï¼Œå…¶ä¸­ `answer[i]` æ˜¯ `words[i]` çš„æ¯ä¸ªéžç©ºå‰ç¼€çš„åˆ†æ•° **æ€»å’Œ** ã€‚

**æ³¨æ„**ï¼šå­—ç¬¦ä¸²è§†ä½œå®ƒè‡ªèº«çš„ä¸€ä¸ªå‰ç¼€ã€‚

## è§£é¢˜æ€è·¯

å¯ä»¥ç”¨å­—å…¸æ ‘å­˜å‚¨æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œç”±äºŽæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å…¶å­æ ‘èŠ‚ç‚¹çš„å‰ç¼€ï¼Œé¢˜å¹²ä¸­çš„åˆ†æ•°å°±æ˜¯åœ¨å­—ç¬¦ä¸²æ’å…¥å­—å…¸æ ‘çš„è¿‡ç¨‹ä¸­ï¼Œç»è¿‡è¯¥èŠ‚ç‚¹çš„å­—ç¬¦ä¸²ä¸ªæ•°ï¼Œå³ä»¥è¯¥èŠ‚ç‚¹ä¸ºå‰ç¼€çš„å­—ç¬¦ä¸²çš„ä¸ªæ•°ã€‚

æ’å…¥åŽï¼Œå†æ¬¡éåŽ†æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œåœ¨å­—å…¸æ ‘ä¸ŠæŸ¥æ‰¾ï¼Œç´¯åŠ è·¯å¾„ä¸Šçš„åˆ†æ•°ä¹‹å’Œå°±æ˜¯ç­”æ¡ˆã€‚

## ä»£ç 

```javascript
/**
 * @param {string[]} words
 * @return {number[]}
 */
var sumPrefixScores = function (words) {
	let map = {};
	for (let word of words) {
		let obj = map;
		for (let char of word) {
			if (!obj[char]) {
				obj[char] = {};
				obj[char].count = 0;
			}
			obj[char].count++;
			obj = obj[char];
		}
	}
	let res = [];
	for (let word of words) {
		let sum = 0,
			obj = map;
		for (let char of word) {
			sum += obj[char].count;
			obj = obj[char];
		}
		res.push(sum);
	}
	return res;
};
```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®

- [211. æ·»åŠ ä¸Žæœç´¢å•è¯ - æ•°æ®ç»“æž„è®¾è®¡](https://leetcode.com/problems/design-add-and-search-words-data-structure)
- [421. æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼](https://leetcode.com/problems/maximum-xor-of-two-numbers-in-an-array)
- [677. é”®å€¼æ˜ å°„](https://leetcode.com/problems/map-sum-pairs)

::::
