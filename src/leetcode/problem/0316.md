# [316. å»é™¤é‡å¤å­—æ¯](https://leetcode.com/problems/remove-duplicate-letters)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/leetcode/outline/tag/stack.md) [`è´ªå¿ƒ`](/leetcode/outline/tag/greedy.md) [`å­—ç¬¦ä¸²`](/leetcode/outline/tag/string.md) [`å•è°ƒæ ˆ`](/leetcode/outline/tag/monotonic-stack.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/remove-duplicate-letters/)

## é¢˜ç›®

Given a string `s`, remove duplicate letters so that every letter appears once and only once. You must make sure your result is **the smallest in lexicographical order** among all possible results.

**Example 1:**

> Input: s = "bcabc"
>
> Output: "abc"

**Example 2:**

> Input: s = "cbacdcbc"
>
> Output: "acdb"

**Constraints:**

- `1 <= s.length <= 10^4`
- `s` consists of lowercase English letters.

**æ³¨æ„ï¼š** æœ¬é¢˜ä¸ LeetCode [ç¬¬ 1081 é¢˜](./1081.md) ç›¸åŒã€‚

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ å»é™¤å­—ç¬¦ä¸²ä¸­é‡å¤çš„å­—æ¯ï¼Œä½¿å¾—æ¯ä¸ªå­—æ¯åªå‡ºç°ä¸€æ¬¡ã€‚éœ€ä¿è¯ **è¿”å›ç»“æœçš„å­—å…¸åºæœ€å°**ï¼ˆè¦æ±‚ä¸èƒ½æ‰“ä¹±å…¶ä»–å­—ç¬¦çš„ç›¸å¯¹ä½ç½®ï¼‰ã€‚

æ¯”å¦‚è¯´è¾“å…¥å­—ç¬¦ä¸² `s = "babc"`ï¼Œå»é‡ä¸”ç¬¦åˆç›¸å¯¹ä½ç½®çš„å­—ç¬¦ä¸²æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ `"bac"` å’Œ `"abc"`ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ç®—æ³•å¾—è¿”å› `"abc"`ï¼Œå› ä¸ºå®ƒçš„å­—å…¸åºæ›´å°ã€‚

## è§£é¢˜æ€è·¯

å“ˆå¸Œè¡¨ + å•è°ƒæ ˆ

é¢˜ç›®æœ‰ä¸‰ä¸ªè¦æ±‚ï¼šå»é‡ã€ä¸èƒ½æ‰“ä¹±å…¶ä»–å­—ç¬¦é¡ºåºã€å­—å…¸åºæœ€å°ã€‚

1. **å»é‡**ï¼šå¯ä»¥é€šè¿‡ **ã€Œä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨å­—æ¯å‡ºç°æ¬¡æ•°ã€** çš„æ–¹å¼ï¼Œå°†æ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°ç»Ÿè®¡èµ·æ¥ï¼Œå†éå†ä¸€éï¼Œå»é™¤é‡å¤çš„å­—æ¯ã€‚
2. **ä¸èƒ½æ‰“ä¹±å…¶ä»–å­—ç¬¦é¡ºåº**ï¼šæŒ‰é¡ºåºéå†ï¼Œå°†éé‡å¤çš„å­—æ¯å­˜å‚¨åˆ°ç­”æ¡ˆæ•°ç»„æˆ–è€…æ ˆä¸­ï¼Œæœ€åå†æ‹¼æ¥èµ·æ¥ï¼Œå°±èƒ½ä¿è¯ä¸æ‰“ä¹±å…¶ä»–å­—ç¬¦é¡ºåºã€‚
3. **å­—å…¸åºæœ€å°**ï¼šæ„å‘³ç€å­—å…¸åºå°çš„å­—æ¯åº”è¯¥å°½å¯èƒ½æ”¾åœ¨å‰é¢ã€‚
   1. å¯¹äºç¬¬ `i` ä¸ªå­—ç¬¦ `s[i]` è€Œè¨€ï¼Œå¦‚æœç¬¬ `0` ~ `i - 1` ä¹‹é—´çš„æŸä¸ªå­—ç¬¦ `s[j]` åœ¨ `s[i]` ä¹‹åä¸å†å‡ºç°äº†ï¼Œé‚£ä¹ˆ `s[j]` å¿…é¡»æ”¾åˆ° `s[i]` ä¹‹å‰ã€‚
   2. è€Œå¦‚æœ `s[j]` åœ¨ä¹‹åè¿˜ä¼šå‡ºç°ï¼Œå¹¶ä¸” `s[j]` çš„å­—å…¸åºå¤§äº `s[i]`ï¼Œæˆ‘ä»¬åˆ™å¯ä»¥å…ˆèˆå¼ƒ `s[j]`ï¼ŒæŠŠ `s[i]` å°½å¯èƒ½çš„æ”¾åˆ°å‰é¢ã€‚åè¾¹å†è€ƒè™‘ä½¿ç”¨ `s[j]` æ‰€å¯¹åº”çš„å­—ç¬¦ã€‚

è¦æ»¡è¶³ç¬¬ 3 æ¡éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ **ã€Œå•è°ƒæ ˆã€** æ¥è§£å†³ã€‚æˆ‘ä»¬ä½¿ç”¨å•è°ƒæ ˆå­˜å‚¨ `s[i]` ä¹‹å‰å‡ºç°çš„éé‡å¤ã€å¹¶ä¸”å­—å…¸åºæœ€å°çš„å­—ç¬¦åºåˆ—ã€‚æ•´ä¸ªç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼š

1. å…ˆéå†ä¸€éå­—ç¬¦ä¸²ï¼Œç”¨å“ˆå¸Œè¡¨ `count` ç»Ÿè®¡å‡ºæ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°ã€‚
2. ç„¶åä½¿ç”¨å•è°ƒé€’å‡æ ˆä¿å­˜å½“å‰å­—ç¬¦ä¹‹å‰å‡ºç°çš„éé‡å¤ã€å¹¶ä¸”å­—å…¸åºæœ€å°çš„å­—ç¬¦åºåˆ—ã€‚
3. å½“éå†åˆ° `s[i]` æ—¶ï¼Œå¦‚æœ `s[i]` æ²¡æœ‰åœ¨æ ˆä¸­å‡ºç°è¿‡(ä½¿ç”¨å“ˆå¸Œè¡¨ `inStack` æ ‡è®°)ï¼š
   1. æ¯”è¾ƒ `s[i]` å’Œæ ˆé¡¶å…ƒç´ çš„å­—å…¸åºã€‚å¦‚æœ `s[i]` çš„å­—å…¸åºå°äºæ ˆé¡¶å…ƒç´ ï¼Œå¹¶ä¸”æ ˆé¡¶å…ƒç´ ä¹‹åçš„å‡ºç°æ¬¡æ•°å¤§äº `0`ï¼Œåˆ™å°†æ ˆé¡¶å…ƒç´ å¼¹å‡ºã€‚
   2. ç„¶åç»§ç»­åˆ¤æ–­ `s[i]` å’Œæ ˆé¡¶å…ƒç´ ï¼Œç›´åˆ°æ ˆé¡¶å…ƒç´ å‡ºç°æ¬¡æ•°ä¸º `0` æ—¶åœæ­¢å¼¹å‡ºã€‚æ­¤æ—¶å°† `s[i]` æ·»åŠ åˆ°å•è°ƒæ ˆä¸­ã€‚
4. ä»å“ˆå¸Œè¡¨ `count` ä¸­å‡å» `s[i]` å‡ºç°çš„æ¬¡æ•°ï¼Œç»§ç»­éå†ã€‚
5. æœ€åå°†å•è°ƒæ ˆä¸­çš„å­—ç¬¦ä¾æ¬¡æ‹¼æ¥ä¸ºç­”æ¡ˆå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {string}
 */
var removeDuplicateLetters = function (s) {
  let count = new Map();
  let inStack = new Map();
  let stack = [];
  for (let i of s) {
    let val = count.get(i) || 0;
    count.set(i, val + 1);
  }
  for (let i of s) {
    count.set(i, count.get(i) - 1);
    if (!inStack.get(i)) {
      let top = stack[stack.length - 1];
      while (top && i < top && count.has(top) && count.get(top) > 0) {
        stack.pop();
        inStack.set(top, false);
        top = stack[stack.length - 1];
      }
      stack.push(i);
      inStack.set(i, true);
    }
  }
  return stack.join("");
};
```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®
- [2030. å«ç‰¹å®šå­—æ¯çš„æœ€å°å­åºåˆ—](https://leetcode.com/problems/smallest-k-length-subsequence-with-occurrences-of-a-letter)

::::
