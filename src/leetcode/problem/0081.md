# [81. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II](https://leetcode.com/problems/search-in-rotated-sorted-array-ii)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/leetcode/outline/tag/binary-search.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/search-in-rotated-sorted-array-ii/)

## é¢˜ç›®

There is an integer array `nums` sorted in non-decreasing order (not
necessarily with **distinct** values).

Before being passed to your function, `nums` is **rotated** at an unknown
pivot index `k` (`0 <= k < nums.length`) such that the resulting array is
`[nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]` (
**0-indexed** ). For example, `[0,1,2,4,4,4,5,6,6,7]` might be rotated at
pivot index `5` and become `[4,5,6,6,7,0,1,2,4,4]`.

Given the array `nums` **after** the rotation and an integer `target`, return
`true` _if_`target` _is in_`nums` _, or_`false` _if it is not in_`nums` _._

You must decrease the overall operation steps as much as possible.

**Example 1:**

> Input: nums = [2,5,6,0,0,1,2], target = 0
>
> Output: true

**Example 2:**

> Input: nums = [2,5,6,0,0,1,2], target = 3
>
> Output: false

**Constraints:**

- `1 <= nums.length <= 5000`
- `-10^4 <= nums[i] <= 10^4`
- `nums` is guaranteed to be rotated at some pivot.
- `-10^4 <= target <= 10^4`

**Follow up:** This problem is similar to [Search in Rotated Sorted
Array](/problems/search-in-rotated-sorted-array/description/), but `nums` may
contain **duplicates**. Would this affect the runtime complexity? How and why?

## é¢˜ç›®å¤§æ„

å·²çŸ¥å­˜åœ¨ä¸€ä¸ªæŒ‰éé™åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ `nums` ï¼Œæ•°ç»„ä¸­çš„å€¼ä¸å¿…äº’ä¸ç›¸åŒã€‚

åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œ`nums` åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ `k`ï¼ˆ`0 <= k < nums.length`ï¼‰ä¸Šè¿›è¡Œäº† æ—‹è½¬ ï¼Œä½¿æ•°ç»„å˜ä¸º `[nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]`ï¼ˆä¸‹æ ‡ ä» `0` å¼€å§‹ è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ `[0,1,2,4,4,4,5,6,6,7]` åœ¨ä¸‹æ ‡ `5` å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º `[4,5,6,6,7,0,1,2,4,4]` ã€‚

ç»™ä½  æ—‹è½¬å çš„æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `target` ï¼Œè¯·ä½ ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ç»™å®šçš„ç›®æ ‡å€¼æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¸­ã€‚å¦‚æœ `nums` ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ `target` ï¼Œåˆ™è¿”å› `true` ï¼Œå¦åˆ™è¿”å› `false` ã€‚

ä½ å¿…é¡»å°½å¯èƒ½å‡å°‘æ•´ä¸ªæ“ä½œæ­¥éª¤ã€‚

## è§£é¢˜æ€è·¯

å¯ä»¥ä½¿ç”¨ä¿®æ”¹ç‰ˆçš„äºŒåˆ†æŸ¥æ‰¾ç®—æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

å¯ä»¥å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ `left` å’Œ `right`ï¼Œåˆ†åˆ«æŒ‡å‘æ•°ç»„çš„èµ·å§‹å’Œç»“æŸä½ç½®ã€‚åœ¨æ¯ä¸€æ­¥æŸ¥æ‰¾ä¸­ï¼Œè®¡ç®—ä¸­é—´ä½ç½® `mid`ã€‚å¦‚æœ `nums[mid]` ç­‰äºç›®æ ‡å€¼ï¼Œé‚£ä¹ˆç›´æ¥è¿”å› `true`ã€‚

ç„¶åï¼Œéœ€è¦å¤„ç†æ•°ç»„è¢«æ—‹è½¬çš„æƒ…å†µã€‚åœ¨æ­£å¸¸çš„æœ‰åºæ•°ç»„ä¸­ï¼Œå·¦åŠéƒ¨åˆ†çš„å…ƒç´ æ€»æ˜¯å°äºç­‰äºå³åŠéƒ¨åˆ†çš„å…ƒç´ ã€‚å¦‚æœ `nums[left] <= nums[mid]`ï¼Œè¯´æ˜å·¦åŠéƒ¨åˆ†æ˜¯æœ‰åºçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥åˆ¤æ–­ç›®æ ‡å€¼æ˜¯å¦åœ¨å·¦åŠéƒ¨åˆ†ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°† `right` æŒ‡é’ˆç§»åˆ° `mid - 1` å¤„ï¼›å¦åˆ™ï¼Œå°† `left` æŒ‡é’ˆç§»åˆ° `mid + 1` å¤„ã€‚

åä¹‹ï¼Œå¦‚æœ `nums[left] > nums[mid]`ï¼Œè¯´æ˜å³åŠéƒ¨åˆ†æ˜¯æœ‰åºçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥åˆ¤æ–­ç›®æ ‡å€¼æ˜¯å¦åœ¨å³åŠéƒ¨åˆ†ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°† `left` æŒ‡é’ˆç§»åˆ° `mid + 1` å¤„ï¼›å¦åˆ™ï¼Œå°† `right` æŒ‡é’ˆç§»åˆ° `mid - 1` å¤„ã€‚

é€šè¿‡ä¸æ–­ç¼©å°æœç´¢èŒƒå›´ï¼Œæœ€ç»ˆå¯ä»¥æ‰¾åˆ°ç›®æ ‡å€¼æˆ–è€…ç¡®å®šä¸å­˜åœ¨ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {boolean}
 */
var search = function (nums, target) {
  let left = 0;
  let right = nums.length - 1;
  while (left <= right) {
    const mid = Math.floor((right - left) / 2) + left;
    if (nums[left] <= nums[mid]) {
      if (nums[mid] > target) {
        right = mid - 1;
      } else if (nums[mid] < target) {
        left = mid + 1;
      } else if (nums[mid] == target) {
        return true;
      }
    } else {
      if (nums[mid] > target) {
        right = mid - 1;
      } else if (nums[mid] < target) {
        left = mid + 1;
      } else if (nums[mid] == target) {
        return true;
      }
    }
  }
  return false;
};
```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®

- [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](./0033.md)

::::
