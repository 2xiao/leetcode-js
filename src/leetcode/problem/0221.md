# [221. Maximal Square](https://leetcode.com/problems/maximal-square/)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) [`çŸ©é˜µ`](/leetcode/outline/tag/matrix.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/maximal-square/)

## é¢˜ç›®

Given an `m x n` binary `matrix` filled with `0`'s and `1`'s, _find the
largest square containing only_ `1`'s _and return its area_.

**Example 1:**

![](https://assets.leetcode.com/uploads/2020/11/26/max1grid.jpg)

> Input: matrix = [["1","0","1","0","0"],["1","0","1","1","1"],["1","1","1","1","1"],["1","0","0","1","0"]]
>
> Output: 4

**Example 2:**

![](https://assets.leetcode.com/uploads/2020/11/26/max2grid.jpg)

> Input: matrix = [["0","1"],["1","0"]]
>
> Output: 1

**Example 3:**

> Input: matrix = [["0"]]
>
> Output: 0

**Constraints:**

- `m == matrix.length`
- `n == matrix[i].length`
- `1 <= m, n <= 300`
- `matrix[i][j]` is `'0'` or `'1'`.

## é¢˜ç›®å¤§æ„

åœ¨ä¸€ä¸ªç”± `'0'` å’Œ `'1'` ç»„æˆçš„äºŒç»´çŸ©é˜µå†…ï¼Œæ‰¾åˆ°åªåŒ…å« `'1'` çš„æœ€å¤§æ­£æ–¹å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šåŠ¨æ€è§„åˆ’

1. **åŠ¨æ€è§„åˆ’**ï¼šå®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„ `dp`ï¼Œå…¶ä¸­ `dp[i][j]` è¡¨ç¤ºä»¥çŸ©é˜µä¸­ç¬¬ `i` è¡Œã€ç¬¬ `j` åˆ—ä¸ºå³ä¸‹è§’çš„æ­£æ–¹å½¢çš„æœ€å¤§è¾¹é•¿ã€‚

2. **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ï¼šå¯¹äºæ¯ä¸ªä½ç½® `(i, j)`ï¼Œå¦‚æœå½“å‰ä½ç½®ä¸º '1'ï¼Œåˆ™ `dp[i][j]` çš„å€¼å–å†³äºå…¶å·¦ã€ä¸Šå’Œå·¦ä¸Šä¸‰ä¸ªç›¸é‚»ä½ç½®çš„æœ€å°å€¼ï¼Œå› ä¸ºåªæœ‰è¿™ä¸‰ä¸ªä½ç½®éƒ½ä¸º '1'ï¼Œå½“å‰ä½ç½®æ‰èƒ½æ„æˆæ­£æ–¹å½¢ã€‚çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š`dp[i][j] = min(dp[i - 1][j - 1], dp[i - 1][j], dp[i][j - 1]) + 1`

3. **åˆå§‹åŒ–**ï¼šåˆå§‹åŒ–ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ï¼Œå› ä¸ºè¿™äº›ä½ç½®æ²¡æœ‰å·¦ã€ä¸Šå’Œå·¦ä¸Šç›¸é‚»ä½ç½®ã€‚

4. **éå†è®¡ç®—**ï¼šä»çŸ©é˜µçš„ç¬¬äºŒè¡Œå’Œç¬¬äºŒåˆ—å¼€å§‹éå†ï¼Œæ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹è®¡ç®—æ¯ä¸ªä½ç½®çš„ `dp` å€¼ã€‚

5. **ç»“æœ**ï¼š`dp` æ•°ç»„ä¸­çš„æœ€å¤§å€¼å³ä¸ºæœ€å¤§æ­£æ–¹å½¢çš„è¾¹é•¿ï¼Œè¿”å›å…¶é¢ç§¯ã€‚

- **æ—¶é—´å¤æ‚åº¦**: `O(m * n)` - éå†æ•´ä¸ªçŸ©é˜µã€‚
- **ç©ºé—´å¤æ‚åº¦**: `O(m * n)` - ä½¿ç”¨äº†ä¸€ä¸ªäºŒç»´æ•°ç»„æ¥å­˜å‚¨ä¸­é—´çŠ¶æ€ã€‚å¯ä»¥ä¼˜åŒ–ä¸º `O(n)`ã€‚

### æ€è·¯äºŒï¼šåŠ¨æ€è§„åˆ’-çŠ¶æ€å‹ç¼©

å¯ä»¥è¿›è¡Œç©ºé—´ä¼˜åŒ–ï¼Œå°†äºŒç»´çš„ dp æ•°ç»„ä¼˜åŒ–ä¸ºä¸€ç»´ã€‚å› ä¸ºåœ¨è®¡ç®— `dp[i][j]` çš„æ—¶å€™ï¼Œåªç”¨åˆ°äº† `dp[i-1][j]`ï¼Œ`dp[i][j-1]`ï¼Œå’Œ `dp[i-1][j-1]` è¿™ä¸‰ä¸ªä½ç½®çš„å€¼ï¼Œæ‰€ä»¥åªéœ€è¦ç»´æŠ¤å½“å‰è¡Œå’Œä¸Šä¸€è¡Œçš„çŠ¶æ€å³å¯ã€‚

åŠ¨æ€è§„åˆ’çŠ¶æ€è½¬ç§»æ–¹ç¨‹å˜ä¸ºï¼š`dp[j] = min(dp[j], dp[j-1], prev) + 1` ï¼Œå…¶ä¸­ï¼š

- `dp[j]` å¯¹åº” `dp[i - 1][j]`ï¼Œè¡¨ç¤ºä¸Šè¾¹çš„æ ¼å­çš„æœ€å¤§è¾¹é•¿ï¼ˆæ­¤æ—¶ `dp[j]` è¿˜æœªæ›´æ–°ï¼Œä»ä¿ç•™ç€ä¸Šä¸€è¡Œçš„æ•°æ®ï¼‰ï¼›
- `dp[j-1]` å¯¹åº” `dp[i][j - 1]`ï¼Œè¡¨ç¤ºå·¦è¾¹çš„æ ¼å­çš„æœ€å¤§è¾¹é•¿ï¼ˆæ­¤æ—¶ `dp[j - 1]` å·²ç»è¢«æ›´æ–°ï¼Œå‚¨å­˜ç€æœ¬è¡Œæœ€æ–°çš„æ•°æ®ï¼‰ï¼›
- `prev` å¯¹åº” `dp[i - 1][j - 1]`ï¼Œè¡¨ç¤ºå·¦ä¸Šè¾¹çš„æ ¼å­çš„æœ€å¤§è¾¹é•¿ï¼ˆåœ¨æ¯æ¬¡æ›´æ–° `dp[j]` ä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šä¿å­˜ `dp[j]` çš„åŸå§‹å€¼åˆ° `temp`ï¼Œç„¶ååœ¨ä¸‹ä¸€è½®è¿­ä»£ä¸­ä½œä¸º `prev` ä½¿ç”¨ï¼‰ï¼›

## ä»£ç 

::: code-tabs

@tab åŠ¨æ€è§„åˆ’

```javascript
/**
 * @param {character[][]} matrix
 * @return {number}
 */
var maximalSquare = function (matrix) {
	let res = 0;
	const m = matrix.length;
	const n = matrix[0].length;
	const dp = new Array(m).fill(0).map(() => new Array(n).fill(0));

	// åŠ¨æ€è§„åˆ’éå†
	for (let i = 0; i < m; i++) {
		for (let j = 0; j < n; j++) {
			if (matrix[i][j] == 1) {
				if (i == 0 || j == 0) {
					// base case
					dp[i][j] = 1;
				} else {
					dp[i][j] = Math.min(dp[i - 1][j - 1], dp[i - 1][j], dp[i][j - 1]) + 1;
				}
			}
			// æ›´æ–°æœ€å¤§æ­£æ–¹å½¢çš„è¾¹é•¿
			res = Math.max(res, dp[i][j]);
		}
	}

	// è¿”å›æœ€å¤§æ­£æ–¹å½¢çš„é¢ç§¯
	return res * res;
};
```

@tab åŠ¨æ€è§„åˆ’-çŠ¶æ€å‹ç¼©

```javascript
/**
 * @param {character[][]} matrix
 * @return {number}
 */
var maximalSquare = function (matrix) {
	let res = 0;
	const m = matrix.length;
	const n = matrix[0].length;
	const dp = new Array(n).fill(0);
	let prev = 0;

	// åŠ¨æ€è§„åˆ’éå†
	for (let i = 0; i < m; i++) {
		for (let j = 0; j < n; j++) {
			// ä¿ç•™å·¦ä¸Šè§’çš„åŸå§‹å€¼ï¼Œç•™åˆ°ä¸‹ä¸€è½®ä½œä¸º prev ä½¿ç”¨
			let temp = dp[j];
			if (matrix[i][j] == 1) {
				if (i == 0 || j == 0) {
					// base case
					dp[j] = 1;
				} else {
					dp[j] = Math.min(dp[j - 1], dp[j], prev) + 1;
				}
			} else {
				dp[j] = 0;
			}
			// prev åœ¨ä¸‹ä¸€è½®è¿­ä»£ä¸­ä½¿ç”¨ï¼Œç›¸å½“äº dp[i - 1][j - 1]
			prev = temp;
			// æ›´æ–°æœ€å¤§æ­£æ–¹å½¢çš„è¾¹é•¿
			res = Math.max(res, dp[j]);
		}
	}

	// è¿”å›æœ€å¤§æ­£æ–¹å½¢çš„é¢ç§¯
	return res * res;
};
```

:::

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®

- [85. æœ€å¤§çŸ©å½¢](https://leetcode.com/problems/maximal-rectangle)
- [764. æœ€å¤§åŠ å·æ ‡å¿—](https://leetcode.com/problems/largest-plus-sign)
- [2201. ç»Ÿè®¡å¯ä»¥æå–çš„å·¥ä»¶](https://leetcode.com/problems/count-artifacts-that-can-be-extracted)
- [2132. ç”¨é‚®ç¥¨è´´æ»¡ç½‘æ ¼å›¾](https://leetcode.com/problems/stamping-the-grid)
- [2943. Maximize Area of Square Hole in Grid](https://leetcode.com/problems/maximize-area-of-square-hole-in-grid)

::::
