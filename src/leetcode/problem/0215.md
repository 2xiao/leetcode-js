# [215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ](https://leetcode.com/problems/kth-largest-element-in-an-array)

ðŸŸ  <font color=#ffb800>Medium</font>&emsp; ðŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`åˆ†æ²»`](/leetcode/outline/tag/divide-and-conquer.md) [`å¿«é€Ÿé€‰æ‹©`](/leetcode/outline/tag/quick-select.md) [`æŽ’åº`](/leetcode/outline/tag/sorting.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/leetcode/outline/tag/heap-priority-queue.md)&emsp; ðŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/kth-largest-element-in-an-array/)

## é¢˜ç›®

Given an integer array `nums` and an integer `k`, return _the_ `kth` _largest
element in the array_.

Note that it is the `kth` largest element in the sorted order, not the `kth`
distinct element.

Can you solve it without sorting?

**Example 1:**

> Input: nums = [3,2,1,5,6,4], k = 2
>
> Output: 5

**Example 2:**

> Input: nums = [3,2,3,1,2,4,5,5,6], k = 4
>
> Output: 4

**Constraints:**

- `1 <= k <= nums.length <= 10^5`
- `-10^4 <= nums[i] <= 10^4`

## é¢˜ç›®å¤§æ„

ç»™å®šæ•´æ•°æ•°ç»„ `nums` å’Œæ•´æ•° `k`ï¼Œè¯·è¿”å›žæ•°ç»„ä¸­ç¬¬ `k` ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚

è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æŽ’åºåŽçš„ç¬¬ `k` ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ `k` ä¸ªä¸åŒçš„å…ƒç´ ã€‚

ä½ å¿…é¡»è®¾è®¡å¹¶å®žçŽ°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šå¿«é€Ÿé€‰æ‹©ç®—æ³•

æ¯æ¬¡é€‰å–ä¸€ä¸ªåŸºå‡†å…ƒç´ ï¼ˆç±»ä¼¼äºŽå¿«é€ŸæŽ’åºä¸­çš„åˆ’åˆ†æ“ä½œï¼‰ï¼Œå°†æ•°ç»„åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç„¶åŽæ ¹æ®åŸºå‡†å…ƒç´ çš„ä½ç½®æ¥ç¡®å®šä¸‹ä¸€æ­¥æ˜¯åœ¨å·¦ä¾§è¿˜æ˜¯å³ä¾§è¿›è¡ŒæŸ¥æ‰¾ã€‚è¿™æ ·ï¼Œæ¯æ¬¡åˆ’åˆ†éƒ½èƒ½å°†é—®é¢˜è§„æ¨¡ç¼©å°ä¸€åŠã€‚

1. é€‰æ‹©æ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å…ƒç´ ï¼ˆå¯ä»¥éšæœºé€‰æ‹©ï¼‰ã€‚
2. æ ¹æ®åŸºå‡†å…ƒç´ å°†æ•°ç»„åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå·¦ä¾§éƒ¨åˆ†çš„å…ƒç´ å¤§äºŽç­‰äºŽåŸºå‡†å…ƒç´ ï¼Œå³ä¾§éƒ¨åˆ†çš„å…ƒç´ å°äºŽåŸºå‡†å…ƒç´ ã€‚
3. å¦‚æžœåŸºå‡†å…ƒç´ çš„ä½ç½®ç­‰äºŽ `k`ï¼Œåˆ™æ‰¾åˆ°äº†ç¬¬ `k` ä¸ªæœ€å¤§çš„å…ƒç´ ï¼›
4. å¦‚æžœåŸºå‡†å…ƒç´ çš„ä½ç½®å°äºŽ `k`ï¼Œåˆ™åœ¨å³ä¾§éƒ¨åˆ†é€’å½’æŸ¥æ‰¾ï¼›
5. å¦‚æžœåŸºå‡†å…ƒç´ çš„ä½ç½®å¤§äºŽ `k`ï¼Œåˆ™åœ¨å·¦ä¾§éƒ¨åˆ†é€’å½’æŸ¥æ‰¾ï¼›

#### å¤æ‚åº¦åˆ†æž

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`
  - å¿«é€Ÿé€‰æ‹©çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€‚è¿™æ˜¯å› ä¸ºåœ¨æ¯æ¬¡åˆ’åˆ†è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä¼šå°†æ•°ç»„åˆ†æˆä¸¤ä¸ªå¤§è‡´ç›¸ç­‰çš„éƒ¨åˆ†ï¼Œä»Žè€Œåœ¨æ¯ä¸€æ­¥å¤§çº¦åªéœ€è¦å¤„ç†ä¸€åŠçš„å…ƒç´ ã€‚
  - åœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(nÂ²)`ï¼Œä¾‹å¦‚å½“æ•°ç»„å·²ç»æ˜¯æœ‰åºçš„æƒ…å†µä¸‹ï¼ˆå¦‚é€’å¢žæˆ–é€’å‡ï¼‰ï¼Œæ¯æ¬¡åˆ’åˆ†éƒ½åªå°†ä¸€ä¸ªå…ƒç´ æ”¾åˆ°æ­£ç¡®çš„ä½ç½®ï¼Œå¯¼è‡´é€’å½’çš„æ·±åº¦è¾¾åˆ° `n`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œå› ä¸ºåœ¨å¿«é€Ÿé€‰æ‹©ä¸­åªä½¿ç”¨äº†å¸¸é‡çº§åˆ«çš„é¢å¤–ç©ºé—´ï¼ˆåªå­˜å‚¨äº†ä¸€äº›å˜é‡ï¼Œæ²¡æœ‰ä½¿ç”¨é¢å¤–çš„æ•°æ®ç»“æž„ï¼‰ï¼Œä½†é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½è¾¾åˆ° `O(n)`ã€‚

---

### æ€è·¯äºŒï¼šå°é¡¶å †

é’ˆå¯¹é™æ€æ•°æ®ï¼Œæƒ³è¦åœ¨ä¸€ä¸ªåŒ…å« `n` ä¸ªæ•°æ®çš„æ•°ç»„ä¸­ï¼ŒæŸ¥æ‰¾å‰ `K` å¤§çš„æ•°æ®ï¼Œå¯ä»¥ç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸º `K` çš„å°é¡¶å †ï¼š

- é¡ºåºéåŽ†æ•°ç»„ï¼Œä»Žæ•°ç»„ä¸­å–å‡ºå–æ•°æ®ä¸Žå †é¡¶å…ƒç´ æ¯”è¾ƒï¼›
- å¦‚æžœæ¯”å †é¡¶å…ƒç´ å¤§ï¼Œå°±æŠŠå †é¡¶å…ƒç´ åˆ é™¤ï¼Œå¹¶ä¸”å°†è¿™ä¸ªå…ƒç´ æ’å…¥åˆ°å †ä¸­ï¼›
- å¦‚æžœæ¯”å †é¡¶å…ƒç´ å°ï¼Œåˆ™ä¸åšå¤„ç†ï¼Œç»§ç»­éåŽ†æ•°ç»„ï¼›
- éåŽ†å®Œæ•°ç»„ä¸­çš„æ•°æ®ä¹‹åŽï¼Œå †é¡¶å…ƒç´ å°±æ˜¯ç¬¬ `K` å¤§çš„æ•°

#### å¤æ‚åº¦åˆ†æž

- **æ—¶é—´å¤æ‚åº¦**: `(nlogK)`ï¼ŒéåŽ†æ•°ç»„éœ€è¦ `O(n)` çš„æ—¶é—´å¤æ‚åº¦ï¼Œä¸€æ¬¡å †åŒ–æ“ä½œéœ€è¦ `O(logK)` çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ‰€ä»¥æœ€åæƒ…å†µä¸‹ï¼Œ`n` ä¸ªå…ƒç´ éƒ½å…¥å †ä¸€æ¬¡ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦å°±æ˜¯ `O(nlogK)` ã€‚
- **ç©ºé—´å¤æ‚åº¦**: `O(K)`ï¼Œä½¿ç”¨äº†ä¸€ä¸ªé•¿åº¦ä¸º `K` çš„æ•°ç»„æ¥å­˜å‚¨å †ä¸­çš„å…ƒç´ ã€‚

## ä»£ç 

::: code-tabs
@tab å¿«é€Ÿé€‰æ‹©ç®—æ³•

```javascript
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
var findKthLargest = function (nums, k) {
	const quickSelect = (left, right) => {
		const index = partition(left, right);
		if (index == k - 1) {
			return nums[index];
		} else if (index > k - 1) {
			return quickSelect(left, index - 1);
		} else {
			return quickSelect(index + 1, right);
		}
	};
	const partition = (left, right) => {
		const pivot = nums[right];
		let i = left;
		for (let j = left; j < right; j++) {
			if (nums[j] > pivot) {
				[nums[i], nums[j]] = [nums[j], nums[i]];
				i++;
			}
		}
		[nums[i], nums[right]] = [nums[right], nums[i]];
		return i;
	};
	return quickSelect(0, nums.length - 1);
};
```

@tab å°é¡¶å †

```javascript
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
var findKthLargest = function (nums, k) {
	let heap = [];
	const add = (val) => {
		if (heap.length < k) {
			heap.push(val);
			heapifyUp(heap.length - 1);
		} else if (val > heap[0]) {
			heap[0] = val;
			heapifyDown(0);
		}
	};
	const heapifyUp = (i) => {
		while (i > 0) {
			const parent = Math.floor((i - 1) / 2);
			if (heap[parent] > heap[i]) {
				[heap[parent], heap[i]] = [heap[i], heap[parent]];
				i = parent;
			} else {
				break;
			}
		}
	};
	const heapifyDown = (i) => {
		const left = i * 2 + 1;
		const right = i * 2 + 2;
		let min = i;
		if (left < heap.length && heap[left] < heap[min]) {
			min = left;
		}
		if (right < heap.length && heap[right] < heap[min]) {
			min = right;
		}
		if (min !== i) {
			[heap[min], heap[i]] = [heap[i], heap[min]];
			heapifyDown(min);
		}
	};
	for (let i of nums) {
		add(i);
	}
	return heap[0];
};
```

:::

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®

- [324. æ‘†åŠ¨æŽ’åº II](https://leetcode.com/problems/wiggle-sort-ii)
- [347. å‰ K ä¸ªé«˜é¢‘å…ƒç´ ](https://leetcode.com/problems/top-k-frequent-elements)
- [414. ç¬¬ä¸‰å¤§çš„æ•°](https://leetcode.com/problems/third-maximum-number)
- [703. æ•°æ®æµä¸­çš„ç¬¬ K å¤§å…ƒç´ ](https://leetcode.com/problems/kth-largest-element-in-a-stream)
- [973. æœ€æŽ¥è¿‘åŽŸç‚¹çš„ K ä¸ªç‚¹](https://leetcode.com/problems/k-closest-points-to-origin)
- [1985. æ‰¾å‡ºæ•°ç»„ä¸­çš„ç¬¬ K å¤§æ•´æ•°](https://leetcode.com/problems/find-the-kth-largest-integer-in-the-array)
- [2099. æ‰¾åˆ°å’Œæœ€å¤§çš„é•¿åº¦ä¸º K çš„å­åºåˆ—](https://leetcode.com/problems/find-subsequence-of-length-k-with-the-largest-sum)
- [2146. ä»·æ ¼èŒƒå›´å†…æœ€é«˜æŽ’åçš„ K æ ·ç‰©å“](https://leetcode.com/problems/k-highest-ranked-items-within-a-price-range)

::::
