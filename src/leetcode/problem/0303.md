# [303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜](https://leetcode.com/problems/range-sum-query-immutable)

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å‰ç¼€å’Œ`](/leetcode/outline/tag/prefix-sum.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/range-sum-query-immutable/)

## é¢˜ç›®

Given an integer array `nums`, handle multiple queries of the following type:

1. Calculate the **sum** of the elements of `nums` between indices `left` and `right` **inclusive** where `left <= right`.

Implement the `NumArray` class:

- `NumArray(int[] nums)` Initializes the object with the integer array `nums`.
- `int sumRange(int left, int right)` Returns the **sum** of the elements of `nums` between indices `left` and `right` **inclusive** (i.e. `nums[left] + nums[left + 1] + ... + nums[right]`).

**Example 1:**

> **Input**
>
> ["NumArray", "sumRange", "sumRange", "sumRange"]
>
> [[[-2, 0, 3, -5, 2, -1]], [0, 2], [2, 5], [0, 5]]
>
> **Output**
>
> [null, 1, -1, -3]
>
> **Explanation**
>
> NumArray numArray = new NumArray([-2, 0, 3, -5, 2, -1]);
>
> numArray.sumRange(0, 2); // return (-2) + 0 + 3 = 1
>
> numArray.sumRange(2, 5); // return 3 + (-5) + 2 + (-1) = -1
>
> numArray.sumRange(0, 5); // return (-2) + 0 + 3 + (-5) + 2 + (-1) = -3

**Constraints:**

- `1 <= nums.length <= 10^4`
- `-10^5 <= nums[i] <= 10^5`
- `0 <= left <= right < nums.length`
- At most `104` calls will be made to `sumRange`.

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œè¯·ä½ å®ŒæˆæŸ¥è¯¢ï¼š

è¿”å›æ•°ç»„ `nums` ä¸­ç´¢å¼• `left` å’Œ `right` ï¼ˆåŒ…å« `left` å’Œ `right`ï¼‰ä¹‹é—´çš„ `nums` å…ƒç´ çš„ **å’Œ** ï¼Œå…¶ä¸­ `left <= right`

å®ç° `NumArray` ç±»ï¼š

- `NumArray(int[] nums)` ä½¿ç”¨æ•°ç»„ `nums` åˆå§‹åŒ–å¯¹è±¡
- `int sumRange(int i, int j)` è¿”å›æ•°ç»„ `nums` ä¸­ç´¢å¼• `left` å’Œ `right` ä¹‹é—´çš„å…ƒç´ çš„ æ€»å’Œ ï¼ŒåŒ…å« `left` å’Œ `right` ä¸¤ç‚¹ï¼ˆä¹Ÿå°±æ˜¯ `nums[left] + nums[left + 1] + ... + nums[right]` ï¼‰

## è§£é¢˜æ€è·¯

æ ‡å‡†çš„å‰ç¼€å’Œé—®é¢˜ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯ç”¨ä¸€ä¸ªæ–°çš„æ•°ç»„ `preSum` è®°å½• `nums` çš„ç´¯åŠ å’Œï¼Œè¿™æ ·ï¼Œ`sumRange` å‡½æ•°ä»…ä»…éœ€è¦åšä¸€æ¬¡å‡æ³•è¿ç®—ï¼Œé¿å…äº†æ¯æ¬¡è¿›è¡Œ `for` å¾ªç¯è°ƒç”¨ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ä¸ºå¸¸æ•° `O(1)`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**: `sumRange` å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(1)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**: `O(n)`ï¼Œå…¶ä¸­ `n` ä¸º `nums` æ•°ç»„çš„é•¿åº¦ï¼Œä½¿ç”¨äº†ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„æ¥å­˜å‚¨ä¸­é—´çŠ¶æ€ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 */
class NumArray {
	constructor(nums) {
		this.preSum = [0];
		for (let i = 1; i <= nums.length; i++) {
			this.preSum[i] = this.preSum[i - 1] + nums[i - 1];
		}
	}

	/**
	 * @param {number} left
	 * @param {number} right
	 * @return {number}
	 */
	sumRange(left, right) {
		return this.preSum[right + 1] - this.preSum[left];
	}
}
```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®
- [äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜](https://leetcode.com/problems/range-sum-query-2d-immutable)
- [åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„å¯ä¿®æ”¹](https://leetcode.com/problems/range-sum-query-mutable)
- [å’Œç­‰äº k çš„æœ€é•¿å­æ•°ç»„é•¿åº¦](https://leetcode.com/problems/maximum-size-subarray-sum-equals-k)

::::
