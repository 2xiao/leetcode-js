# [33. Search in Rotated Sorted Array](https://leetcode.com/problems/search-in-rotated-sorted-array/)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/leetcode/outline/tag/binary-search.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/search-in-rotated-sorted-array/)

## é¢˜ç›®

There is an integer array `nums` sorted in ascending order (with **distinct** values).

Prior to being passed to your function, `nums` is **possibly rotated** at an unknown pivot index `k` (`1 <= k < nums.length`) such that the resulting array is `[nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]` ( **0-indexed** ). For example, `[0,1,2,4,5,6,7]` might be rotated at pivot index `3` and become `[4,5,6,7,0,1,2]`.

Given the array `nums` **after** the possible rotation and an integer
`target`, return _the index of_`target` _if it is in_`nums` _, or_`-1` _if it is not in_`nums`.

You must write an algorithm with `O(log n)` runtime complexity.

**Example 1:**

> Input: nums = [4,5,6,7,0,1,2], target = 0
>
> Output: 4

**Example 2:**

> Input: nums = [4,5,6,7,0,1,2], target = 3
>
> Output: -1

**Example 3:**

> Input: nums = [1], target = 0
>
> Output: -1

**Constraints:**

- `1 <= nums.length <= 5000`
- `-104 <= nums[i] <= 104`
- All values of `nums` are **unique**.
- `nums` is an ascending array that is possibly rotated.
- `-104 <= target <= 104`

## é¢˜ç›®å¤§æ„

å‡è®¾æŒ‰ç…§å‡åºæ’åºçš„æ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚( ä¾‹å¦‚ï¼Œæ•°ç»„ Â [0,1,2,4,5,6,7]Â  å¯èƒ½å˜ä¸º Â [4,5,6,7,0,1,2]Â )ã€‚æœç´¢ä¸€ä¸ªç»™å®šçš„ç›®æ ‡å€¼ï¼Œå¦‚æœæ•°ç»„ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ï¼Œåˆ™è¿”å›å®ƒçš„ç´¢å¼•ï¼Œå¦åˆ™è¿”å› Â -1Â ã€‚ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­ä¸å­˜åœ¨é‡å¤çš„å…ƒç´ ã€‚

ä½ çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯ Â O(logÂ n) çº§åˆ«ã€‚

## è§£é¢˜æ€è·¯

- ç»™å‡ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æœ¬æ¥æ˜¯ä»å°åˆ°å¤§æ’åˆ—çš„ï¼Œå¹¶ä¸”æ•°ç»„ä¸­æ²¡æœ‰é‡å¤æ•°å­—ã€‚ä½†æ˜¯ç°åœ¨æŠŠåé¢éšæœºä¸€æ®µæœ‰åºçš„æ”¾åˆ°æ•°ç»„å‰é¢ï¼Œè¿™æ ·å½¢æˆäº†å‰åä¸¤ç«¯æœ‰åºçš„å­åºåˆ—ã€‚åœ¨è¿™æ ·çš„ä¸€ä¸ªæ•°ç»„é‡Œé¢æŸ¥æ‰¾ä¸€ä¸ªæ•°ï¼Œè®¾è®¡ä¸€ä¸ª O(log n) çš„ç®—æ³•ã€‚å¦‚æœæ‰¾åˆ°å°±è¾“å‡ºæ•°ç»„çš„å°æ ‡ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±è¾“å‡º -1 ã€‚
- ç”±äºæ•°ç»„åŸºæœ¬æœ‰åºï¼Œè™½ç„¶ä¸­é—´æœ‰ä¸€ä¸ªâ€œæ–­å¼€ç‚¹â€ï¼Œè¿˜æ˜¯å¯ä»¥ä½¿ç”¨äºŒåˆ†æœç´¢çš„ç®—æ³•æ¥å®ç°ã€‚ç°åœ¨æ•°ç»„å‰é¢ä¸€æ®µæ˜¯æ•°å€¼æ¯”è¾ƒå¤§çš„æ•°ï¼Œåé¢ä¸€æ®µæ˜¯æ•°å€¼åå°çš„æ•°ã€‚å¦‚æœ mid è½åœ¨äº†å‰ä¸€æ®µæ•°å€¼æ¯”è¾ƒå¤§çš„åŒºé—´å†…äº†ï¼Œé‚£ä¹ˆä¸€å®šæœ‰ `nums[mid] > nums[low]`ï¼Œå¦‚æœæ˜¯è½åœ¨åé¢ä¸€æ®µæ•°å€¼æ¯”è¾ƒå°çš„åŒºé—´å†…ï¼Œ`nums[mid] â‰¤ nums[low]` ã€‚å¦‚æœ mid è½åœ¨äº†åä¸€æ®µæ•°å€¼æ¯”è¾ƒå°çš„åŒºé—´å†…äº†ï¼Œé‚£ä¹ˆä¸€å®šæœ‰ `nums[mid] < nums[high]`ï¼Œå¦‚æœæ˜¯è½åœ¨å‰é¢ä¸€æ®µæ•°å€¼æ¯”è¾ƒå¤§çš„åŒºé—´å†…ï¼Œ`nums[mid] â‰¤ nums[high]` ã€‚è¿˜æœ‰ `nums[low] == nums[mid]` å’Œ `nums[high] == nums[mid]` çš„æƒ…å†µï¼Œå•ç‹¬å¤„ç†å³å¯ã€‚æœ€åæ‰¾åˆ°åˆ™è¾“å‡º midï¼Œæ²¡æœ‰æ‰¾åˆ°åˆ™è¾“å‡º -1 ã€‚

## ä»£ç 

```javascript

func search33(nums []int, target int) int {
	if len(nums) == 0 {
		return -1
	}
	low, high := 0, len(nums)-1
	for low <= high {
		mid := low + (high-low)>>1
		if nums[mid] == target {
			return mid
		} else if nums[mid] > nums[low] { // åœ¨æ•°å€¼å¤§çš„ä¸€éƒ¨åˆ†åŒºé—´é‡Œ
			if nums[low] <= target && target < nums[mid] {
				high = mid - 1
			} else {
				low = mid + 1
			}
		} else if nums[mid] < nums[high] { // åœ¨æ•°å€¼å°çš„ä¸€éƒ¨åˆ†åŒºé—´é‡Œ
			if nums[mid] < target && target <= nums[high] {
				low = mid + 1
			} else {
				high = mid - 1
			}
		} else {
			if nums[low] == nums[mid] {
				low++
			}
			if nums[high] == nums[mid] {
				high--
			}
		}
	}
	return -1
}


```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®

- [81. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II](https://leetcode.com/problems/search-in-rotated-sorted-array-ii)
- [153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼](./0153.md)
- [ğŸ”’ Pour Water Between Buckets to Make Water Levels Equal](https://leetcode.com/problems/pour-water-between-buckets-to-make-water-levels-equal)

::::
