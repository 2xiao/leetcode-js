# [611. æœ‰æ•ˆä¸‰è§’å½¢çš„ä¸ªæ•°](https://leetcode.com/problems/valid-triangle-number)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è´ªå¿ƒ`](/leetcode/outline/tag/greedy.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`åŒæŒ‡é’ˆ`](/leetcode/outline/tag/two-pointers.md) [`äºŒåˆ†æŸ¥æ‰¾`](/leetcode/outline/tag/binary-search.md) [`æ’åº`](/leetcode/outline/tag/sorting.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/valid-triangle-number/)

## é¢˜ç›®

Given an integer array `nums`, return _the number of triplets chosen from the
array that can make triangles if we take them as side lengths of a triangle_.

**Example 1:**

> Input: nums = [2,2,3,4]
>
> Output: 3
>
> Explanation: Valid combinations are:
>
> 2,3,4 (using the first 2)
>
> 2,3,4 (using the second 2)
>
> 2,2,3

**Example 2:**

> Input: nums = [4,2,3,4]
>
> Output: 4

**Constraints:**

- `1 <= nums.length <= 1000`
- `0 <= nums[i] <= 1000`

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªåŒ…å«éè´Ÿæ•´æ•°çš„æ•°ç»„ï¼Œä½ çš„ä»»åŠ¡æ˜¯ç»Ÿè®¡å…¶ä¸­å¯ä»¥ç»„æˆä¸‰è§’å½¢ä¸‰æ¡è¾¹çš„ä¸‰å…ƒç»„ä¸ªæ•°ã€‚

## è§£é¢˜æ€è·¯

æ„æˆä¸‰è§’å½¢çš„æ¡ä»¶ä¸ºï¼šä»»æ„ä¸¤è¾¹å’Œå¤§äºç¬¬ä¸‰è¾¹ï¼Œæˆ–è€…ä»»æ„ä¸¤è¾¹å·®å°äºç¬¬ä¸‰è¾¹ã€‚åªè¦æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€å°±å¯ä»¥æ„æˆä¸‰è§’å½¢ã€‚ä»¥ä»»æ„ä¸¤è¾¹å’Œå¤§äºç¬¬ä¸‰è¾¹ä¸ºä¾‹ï¼Œå¦‚æœç”¨ `a`ã€`b`ã€`c` æ¥è¡¨ç¤ºçš„è¯ï¼Œåº”è¯¥åŒæ—¶æ»¡è¶³ `a + b > c`ã€`a + c > b`ã€`b + c > a`ã€‚å¦‚æœæˆ‘ä»¬å°†ä¸‰æ¡è¾¹å‡åºæ’åºï¼Œå‡è®¾ `a <= b <= c`ï¼Œåˆ™å¦‚æœæ»¡è¶³ `a + b > c`ï¼Œåˆ™ `a + c > b` å’Œ `b + c > a` ä¸€å®šæˆç«‹ã€‚

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆå¯¹ `nums` è¿›è¡Œæ’åºã€‚ç„¶åå›ºå®šæœ€å¤§è¾¹ `i`ï¼Œåˆ©ç”¨å¯¹æ’æŒ‡é’ˆ `left`ã€`right` æŸ¥æ‰¾è¾ƒå°çš„ä¸¤æ¡è¾¹ã€‚ç„¶ååˆ¤æ–­æ˜¯å¦æ„æˆä¸‰è§’å½¢å¹¶ç»Ÿè®¡ä¸‰å…ƒç»„ä¸ªæ•°ã€‚

ä¸ºäº†é¿å…é‡å¤è®¡ç®—å’Œæ¼è§£ï¼Œè¦ä¸¥æ ¼ä¿è¯ä¸‰æ¡è¾¹çš„åºå·å…³ç³»ä¸ºï¼š`left < right < i`ã€‚å…·ä½“åšæ³•å¦‚ä¸‹ï¼š

- å¯¹æ•°ç»„ä»å°åˆ°å¤§æ’åºï¼Œä½¿ç”¨ `res` è®°å½•ä¸‰å…ƒç»„ä¸ªæ•°ã€‚
- ä» `i = 2` å¼€å§‹éå†æ•°ç»„çš„æ¯ä¸€æ¡è¾¹ï¼Œ`i` ä½œä¸ºæœ€å¤§è¾¹ã€‚
- ä½¿ç”¨åŒæŒ‡é’ˆ `left`ã€`right`ã€‚`left` æŒ‡å‘ `0`ï¼Œ`right` æŒ‡å‘ `i - 1`ã€‚
  - å¦‚æœ `nums[left] + nums[right] <= nums[i]`ï¼Œè¯´æ˜ç¬¬ä¸€æ¡è¾¹å¤ªçŸ­äº†ï¼Œå¯ä»¥å¢åŠ ç¬¬ä¸€æ¡è¾¹é•¿åº¦ï¼Œæ‰€ä»¥å°† `left` å³ç§»ï¼Œå³ `left += 1`ã€‚
  - å¦‚æœ `nums[left] + nums[right] > nums[i]`ï¼Œè¯´æ˜å¯ä»¥æ„æˆä¸‰è§’å½¢ï¼Œå¹¶ä¸”ç¬¬äºŒæ¡è¾¹å›ºå®šä¸º `right` è¾¹çš„è¯ï¼Œç¬¬ä¸€æ¡è¾¹å¯ä»¥åœ¨ `[left, right - 1]` ä¸­ä»»æ„é€‰æ‹©ã€‚æ‰€ä»¥ä¸‰å…ƒç»„ä¸ªæ•°è¦åŠ ä¸Š `right - left`ã€‚å³ `res += (right - left)`ã€‚
- ç›´åˆ° `left == right` è·³å‡ºå¾ªç¯ï¼Œè¾“å‡ºä¸‰å…ƒç»„ä¸ªæ•° `res`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var triangleNumber = function (nums) {
  nums = nums.sort((a, b) => a - b);
  let res = 0;
  for (let i = nums.length - 1; i > 1; i--) {
    let left = 0;
    let right = i - 1;
    while (left < right) {
      if (nums[left] + nums[right] <= nums[i]) {
        left++;
      } else {
        res += right - left;
        right--;
      }
    }
  }
  return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 259 | [è¾ƒå°çš„ä¸‰æ•°ä¹‹å’Œ](https://leetcode.com/problems/3sum-smaller) | [[âœ“]](https://2xiao.github.io/leetcode-js/leetcode/problem/0259) |  [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`åŒæŒ‡é’ˆ`](/leetcode/outline/tag/two-pointers.md) [`äºŒåˆ†æŸ¥æ‰¾`](/leetcode/outline/tag/binary-search.md) `1+` | <font color=#ffb800>Medium</font> |
| 2971 | [æ‰¾åˆ°æœ€å¤§å‘¨é•¿çš„å¤šè¾¹å½¢](https://leetcode.com/problems/find-polygon-with-the-largest-perimeter) |  |  [`è´ªå¿ƒ`](/leetcode/outline/tag/greedy.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å‰ç¼€å’Œ`](/leetcode/outline/tag/prefix-sum.md) `1+` | <font color=#ffb800>Medium</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
