# [705. Design HashSet](https://leetcode.com/problems/design-hashset/)

ðŸŸ¢ <font color=#15bd66>Esay</font>&emsp; ðŸ”–&ensp; [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`é“¾è¡¨`](/leetcode/outline/tag/linked-list.md) [`å“ˆå¸Œå‡½æ•°`](/leetcode/outline/tag/hash-function.md)

## é¢˜ç›®

Design a HashSet without using any built-in hash table libraries.

Implement `MyHashSet` class:

- `void add(key)` Inserts the value `key` into the HashSet.
- `bool contains(key)` Returns whether the value `key` exists in the HashSet or not.
- `void remove(key)` Removes the value `key` in the HashSet. If `key` does not exist in the HashSet, do nothing.

**Example**:

```javascript
MyHashSet myHashSet = new MyHashSet();
myHashSet.add(1);      // set = [1]
myHashSet.add(2);      // set = [1, 2]
myHashSet.contains(1); // return True
myHashSet.contains(3); // return False, (not found)
myHashSet.add(2);      // set = [1, 2]
myHashSet.contains(2); // return True
myHashSet.remove(2);   // set = [1]
myHashSet.contains(2); // return False, (already removed)
```

**Note**:

- `0 <= key <= 10^6`
- æœ€å¤šè°ƒç”¨ `10^4` æ¬¡ `add`ã€`remove` å’Œ `contains`
- Please do not use the built-in HashSet library.

## é¢˜ç›®å¤§æ„

ä¸ä½¿ç”¨ä»»ä½•å†…å»ºçš„å“ˆå¸Œè¡¨åº“è®¾è®¡ä¸€ä¸ªå“ˆå¸Œé›†åˆï¼ˆHashSetï¼‰ã€‚

å®žçŽ° `MyHashSet` ç±»ï¼š

- `void add(key)` å‘å“ˆå¸Œé›†åˆä¸­æ’å…¥å€¼ `key` ã€‚
- `bool contains(key)` è¿”å›žå“ˆå¸Œé›†åˆä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªå€¼ `key` ã€‚
- `void remove(key)` å°†ç»™å®šå€¼ `key` ä»Žå“ˆå¸Œé›†åˆä¸­åˆ é™¤ã€‚å¦‚æžœå“ˆå¸Œé›†åˆä¸­æ²¡æœ‰è¿™ä¸ªå€¼ï¼Œä»€ä¹ˆä¹Ÿä¸åšã€‚

## è§£é¢˜æ€è·¯

é“¾åœ°å€æ³•ï¼š

- è®¾å“ˆå¸Œè¡¨çš„å¤§å°ä¸º `base`ï¼Œåˆ™å¯ä»¥è®¾è®¡ä¸€ä¸ªç®€å•çš„å“ˆå¸Œå‡½æ•°ï¼š`hash(x) = xâ€Šmodâ€Šbase`ï¼›
- å¼€è¾Ÿä¸€ä¸ªå¤§å°ä¸º `base` çš„æ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸ªä½ç½®æ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚å½“è®¡ç®—å‡ºå“ˆå¸Œå€¼ä¹‹åŽï¼Œå°±æ’å…¥åˆ°å¯¹åº”ä½ç½®çš„é“¾è¡¨å½“ä¸­ï¼›
- ç”±äºŽä½¿ç”¨æ•´æ•°é™¤æ³•ä½œä¸ºå“ˆå¸Œå‡½æ•°ï¼Œä¸ºäº†å°½å¯èƒ½é¿å…å†²çªï¼Œåº”å½“å°† `base` å–ä¸ºä¸€ä¸ªè´¨æ•°ï¼Œå¦‚ `base = 769`ï¼›

![](/assets/image/705.png)

- æ—¶é—´å¤æ‚åº¦ï¼š`O(n / b)`ã€‚å…¶ä¸­ `n` ä¸ºå“ˆå¸Œè¡¨ä¸­çš„å…ƒç´ æ•°é‡ï¼Œ`b` ä¸ºé“¾è¡¨çš„æ•°é‡ï¼Œå‡è®¾å“ˆå¸Œå€¼æ˜¯å‡åŒ€åˆ†å¸ƒçš„ï¼Œåˆ™æ¯ä¸ªé“¾è¡¨å¤§æ¦‚é•¿åº¦ä¸º `n / b`ï¼›
- ç©ºé—´å¤æ‚åº¦ï¼š`O(n+b)`ã€‚

## ä»£ç 

```javascript
class MyHashSet {
  constructor() {
    this.base = 769;
    this.data = new Array(this.base).fill(0).map(() => new Array());
  }

  // @param {number} key
  // @return {number}
  hash(key) {
    return key % this.base;
  }

  // @param {number} key
  // @return {void}
  add(key) {
    const h = this.hash(key);
    for (let item of this.data[h]) {
      if (item === key) return;
    }
    this.data[h].push(key);
  }

  // @param {number} key
  // @return {void}
  remove(key) {
    const h = this.hash(key);
    const hList = this.data[h];
    for (let i = 0; i < hList.length; i++) {
      if (hList[i] === key) {
        hList.splice(i, 1);
        return;
      }
    }
  }

  // @param {number} key
  // @return {boolean}
  contains(key) {
    const h = this.hash(key);
    for (let item of this.data[h]) {
      if (item === key) return true;
    }
    return false;
  }
}

/**
 * Your MyHashSet object will be instantiated and called as such:
 * var obj = new MyHashSet()
 * obj.add(key)
 * obj.remove(key)
 * var param_3 = obj.contains(key)
 */
```
