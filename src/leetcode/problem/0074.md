# [74. Search a 2D Matrix](https://leetcode.com/problems/search-a-2d-matrix/)

ðŸŸ  <font color=#ffb800>Medium</font>&emsp; ðŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/leetcode/outline/tag/binary-search.md) [`çŸ©é˜µ`](/leetcode/outline/tag/matrix.md)&emsp; ðŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/search-a-2d-matrix/)

## é¢˜ç›®

You are given an `m x n` integer matrix `matrix` with the following two
properties:

- Each row is sorted in non-decreasing order.
- The first integer of each row is greater than the last integer of the previous row.

Given an integer `target`, return `true` _if_ `target` _is in_ `matrix` _or_
`false` _otherwise_.

You must write a solution in `O(log(m * n))` time complexity.

**Example 1:**

![](https://assets.leetcode.com/uploads/2020/10/05/mat.jpg)

> Input: matrix = [[1,3,5,7],[10,11,16,20],[23,30,34,60]], target = 3
>
> Output: true

**Example 2:**

![](https://assets.leetcode.com/uploads/2020/10/05/mat2.jpg)

> Input: matrix = [[1,3,5,7],[10,11,16,20],[23,30,34,60]], target = 13
>
> Output: false

**Constraints:**

- `m == matrix.length`
- `n == matrix[i].length`
- `1 <= m, n <= 100`
- `-10^4 <= matrix[i][j], target <= 10^4`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ»¡è¶³ä¸‹è¿°ä¸¤æ¡å±žæ€§çš„ `m x n` æ•´æ•°çŸ©é˜µï¼š

- æ¯è¡Œä¸­çš„æ•´æ•°ä»Žå·¦åˆ°å³æŒ‰éžä¸¥æ ¼é€’å¢žé¡ºåºæŽ’åˆ—ã€‚
- æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•´æ•°å¤§äºŽå‰ä¸€è¡Œçš„æœ€åŽä¸€ä¸ªæ•´æ•°ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `target` ï¼Œå¦‚æžœ `target` åœ¨çŸ©é˜µä¸­ï¼Œè¿”å›ž `true` ï¼›å¦åˆ™ï¼Œè¿”å›ž `false` ã€‚

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šä»Žå³ä¸Šè§’éåŽ†

è¿™é“é¢˜è¯´ `matrix` ä»Žä¸Šåˆ°ä¸‹é€’å¢žï¼Œä»Žå·¦åˆ°å³é€’å¢žï¼Œæ˜¾ç„¶å·¦ä¸Šè§’æ˜¯æœ€å°å…ƒç´ ï¼Œå³ä¸‹è§’æ˜¯æœ€å¤§å…ƒç´ ã€‚æˆ‘ä»¬å¦‚æžœæƒ³é«˜æ•ˆåœ¨ `matrix` ä¸­æœç´¢ä¸€ä¸ªå…ƒç´ ï¼Œè‚¯å®šéœ€è¦ä»ŽæŸä¸ªè§’å¼€å§‹ï¼Œæ¯”å¦‚è¯´ä»Žå·¦ä¸Šè§’å¼€å§‹ï¼Œç„¶åŽæ¯æ¬¡åªèƒ½å‘å³æˆ–å‘ä¸‹ç§»åŠ¨ï¼Œä¸è¦èµ°å›žå¤´è·¯ã€‚

å¦‚æžœçœŸä»Žå·¦ä¸Šè§’å¼€å§‹çš„è¯ï¼Œå°±ä¼šå‘çŽ°æ— è®ºå‘å³è¿˜æ˜¯å‘ä¸‹èµ°ï¼Œå…ƒç´ å¤§å°éƒ½ä¼šå¢žåŠ ï¼Œé‚£ä¹ˆåˆ°åº•å‘å³è¿˜æ˜¯å‘ä¸‹ï¼Ÿä¸ç¡®å®šï¼Œé‚£åªå¥½ç”¨ç±»ä¼¼ **åŠ¨æ€è§„åˆ’ç®—æ³•** çš„æ€è·¯ç©·ä¸¾äº†ã€‚

ä½†å®žé™…ä¸Šä¸ç”¨è¿™ä¹ˆéº»çƒ¦ï¼Œæˆ‘ä»¬ä¸è¦ä»Žå·¦ä¸Šè§’å¼€å§‹ï¼Œè€Œæ˜¯ä»Žå³ä¸Šè§’å¼€å§‹ï¼Œè§„å®šåªèƒ½å‘å·¦æˆ–å‘ä¸‹ç§»åŠ¨ã€‚

ä½ æ³¨æ„ï¼Œå¦‚æžœå‘å·¦ç§»åŠ¨ï¼Œå…ƒç´ åœ¨å‡å°ï¼Œå¦‚æžœå‘ä¸‹ç§»åŠ¨ï¼Œå…ƒç´ åœ¨å¢žå¤§ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®å½“å‰ä½ç½®çš„å…ƒç´ å’Œ `target` çš„ç›¸å¯¹å¤§å°æ¥åˆ¤æ–­åº”è¯¥å¾€å“ªç§»åŠ¨ï¼Œä¸æ–­æŽ¥è¿‘ä»Žè€Œæ‰¾åˆ° `target` çš„ä½ç½®ã€‚

#### å¤æ‚åº¦åˆ†æž

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(m + n)`ï¼Œå› ä¸ºä»Žå³ä¸Šè§’å‘ä¸‹ã€å‘å·¦éåŽ†ï¼Œæœ€åæƒ…å†µä¸‹éœ€è¦åˆ¤æ–­ `m+n` æ¬¡ï¼›
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªä½¿ç”¨äº†å¸¸æ•°çš„é¢å¤–ç©ºé—´ã€‚

### æ€è·¯äºŒï¼šäºŒåˆ†æŸ¥æ‰¾

å¯ä»¥å°†è¿™ä¸ªé—®é¢˜çœ‹ä½œåœ¨ä¸€ä¸ªæŽ’åºçš„ä¸€ç»´æ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼çš„äºŒåˆ†æŸ¥æ‰¾é—®é¢˜ã€‚è™½ç„¶çŸ©é˜µæ˜¯äºŒç»´çš„ï¼Œä½†ç”±äºŽçŸ©é˜µæ¯è¡Œå’Œæ¯åˆ—éƒ½ä¸¥æ ¼é€’å¢žï¼Œå¯ä»¥å°†äºŒç»´çŸ©é˜µâ€œå±•å¼€â€ä¸ºä¸€ç»´æ•°ç»„æ¥è¿›è¡Œå¤„ç†ã€‚

1. **äºŒç»´çŸ©é˜µè½¬ä¸ºä¸€ç»´æ•°ç»„çš„æ€æƒ³**ï¼š
   - å‡è®¾çŸ©é˜µæœ‰ `m` è¡Œ `n` åˆ—ï¼ŒçŸ©é˜µçš„ç¬¬ `i` è¡Œç¬¬ `j` åˆ—çš„å…ƒç´ ï¼Œå¯ä»¥æ˜ å°„åˆ°ä¸€ç»´æ•°ç»„ä¸­çš„ä¸‹æ ‡ `index = i * n + j`ã€‚
   - åè¿‡æ¥ï¼Œä¸€ç»´æ•°ç»„çš„ç´¢å¼• `index` å¯¹åº”åˆ°äºŒç»´çŸ©é˜µä¸­çš„è¡Œåˆ—ä½ç½®åˆ™ä¸ºï¼š`row = index / n | 0`, `col = index % n`ã€‚
2. **äºŒåˆ†æŸ¥æ‰¾**ï¼š
   - å¯ä»¥æŠŠæ•´ä¸ªçŸ©é˜µçœ‹ä½œæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º `m * n` çš„æŽ’åºæ•°ç»„ï¼Œç„¶åŽç›´æŽ¥å¯¹è¿™ä¸ªæ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚
   - è®¡ç®—ä¸­é—´ä½ç½® `mid`ï¼Œå°†å…¶æ˜ å°„å›žäºŒç»´çŸ©é˜µä¸­çš„ `row` å’Œ `col`ã€‚
   - å¦‚æžœä¸­é—´å€¼ç­‰äºŽç›®æ ‡å€¼ï¼Œè¿”å›ž `true`ã€‚
   - å¦‚æžœä¸­é—´å€¼å°äºŽç›®æ ‡å€¼ï¼Œè¯´æ˜Žç›®æ ‡å€¼åœ¨å³åŠéƒ¨åˆ†ï¼Œç§»åŠ¨å·¦è¾¹ç•Œã€‚
   - å¦‚æžœä¸­é—´å€¼å¤§äºŽç›®æ ‡å€¼ï¼Œè¯´æ˜Žç›®æ ‡å€¼åœ¨å·¦åŠéƒ¨åˆ†ï¼Œç§»åŠ¨å³è¾¹ç•Œã€‚
   - å½“å·¦è¾¹ç•Œè¶…è¿‡å³è¾¹ç•Œæ—¶ï¼Œè¯´æ˜Žæ²¡æœ‰æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œè¿”å›ž `false`ã€‚

#### å¤æ‚åº¦åˆ†æž

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(log(m * n))`ï¼Œè¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„äºŒåˆ†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ï¼Œå…¶ä¸­ `m` æ˜¯è¡Œæ•°ï¼Œ`n` æ˜¯åˆ—æ•°ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªä½¿ç”¨äº†å¸¸æ•°çš„é¢å¤–ç©ºé—´ã€‚

## ä»£ç 

:::: code-tabs
@tab ä»Žå³ä¸Šè§’éåŽ†

```javascript
/**
 * @param {number[][]} matrix
 * @param {number} target
 * @return {boolean}
 */
var searchMatrix = function (matrix, target) {
	const h = matrix.length;
	const w = matrix[0].length;
	// ä»Žå³ä¸Šè§’å¼€å§‹éåŽ†çŸ©é˜µ
	let i = 0;
	let j = w - 1;
	while (i < h && j >= 0) {
		if (matrix[i][j] == target) return true; // æ‰¾åˆ°ç›®æ ‡å€¼
		if (matrix[i][j] < target) {
			i++; // å‘ä¸‹ç§»åŠ¨
		} else {
			j--; // å‘å·¦ç§»åŠ¨
		}
	}
	return false;
};
```

@tab äºŒåˆ†æŸ¥æ‰¾

```javascript
/**
 * @param {number[][]} matrix
 * @param {number} target
 * @return {boolean}
 */
var searchMatrix = function (matrix, target) {
	const m = matrix.length,
		n = matrix[0].length;
	let left = 0,
		right = m * n - 1;
	while (left <= right) {
		const mid = ((left + right) / 2) | 0;
		const i = (mid / n) | 0, // æ˜ å°„å›žäºŒç»´çŸ©é˜µä¸­çš„è¡Œ
			j = mid % n; // æ˜ å°„å›žäºŒç»´çŸ©é˜µä¸­çš„åˆ—
		if (matrix[i][j] == target) {
			return true; // æ‰¾åˆ°ç›®æ ‡å€¼
		} else if (matrix[i][j] > target) {
			right = mid - 1; // ç§»åŠ¨å·¦è¾¹ç•Œ
		} else if (matrix[i][j] < target) {
			left = mid + 1; // ç§»åŠ¨å³è¾¹ç•Œ
		}
	}

	return false;
};
```

::::

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®

- [240. æœç´¢äºŒç»´çŸ©é˜µ II](./0240.md)
- [2468. æ ¹æ®é™åˆ¶åˆ†å‰²æ¶ˆæ¯](https://leetcode.cn/problems/split-message-based-on-limit)

::::
