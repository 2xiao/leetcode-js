# [34. Find First and Last Position of Element in Sorted Array](https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array/)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/leetcode/outline/tag/binary-search.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array/)

## é¢˜ç›®

Given an array of integers `nums` sorted in non-decreasing order, find the
starting and ending position of a given `target` value.

If `target` is not found in the array, return `[-1, -1]`.

You must write an algorithm with `O(log n)` runtime complexity.

**Example 1:**

> Input: nums = [5,7,7,8,8,10], target = 8
>
> Output: [3,4]

**Example 2:**

> Input: nums = [5,7,7,8,8,10], target = 6
>
> Output: [-1,-1]

**Example 3:**

> Input: nums = [], target = 0
>
> Output: [-1,-1]

**Constraints:**

- `0 <= nums.length <= 10^5`
- `-10^9 <= nums[i] <= 10^9`
- `nums` is a non-decreasing array.
- `-10^9 <= target <= 10^9`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæŒ‰ç…§éé€’å‡é¡ºåºæ’åˆ—çš„æ•´æ•°æ•°ç»„ `nums`ï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ `target`ã€‚è¯·ä½ æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚

å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ `target`ï¼Œè¿”å› `[-1, -1]`ã€‚

ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(log n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

## è§£é¢˜æ€è·¯

å¯ä»¥é€šè¿‡ä¸¤æ¬¡äºŒåˆ†æŸ¥æ‰¾æ¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚

é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªè¾…åŠ©å‡½æ•° `findFirst`ï¼Œç”¨äºæ‰¾åˆ°ç›®æ ‡å€¼çš„èµ·å§‹ä½ç½®ã€‚è¿™ä¸ªå‡½æ•°ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•ï¼Œåœ¨æ¯ä¸€æ­¥æŸ¥æ‰¾ä¸­ï¼Œå¦‚æœä¸­é—´å…ƒç´ å¤§äºç­‰äºç›®æ ‡å€¼ï¼Œå°†`right`æŒ‡é’ˆç§»åŠ¨åˆ°ä¸­é—´ä½ç½®çš„å·¦è¾¹ï¼Œå¹¶æ›´æ–°ç»“æœä¸ºå½“å‰ä¸­é—´ä½ç½®ã€‚å¦‚æœä¸­é—´å…ƒç´ å°äºç›®æ ‡å€¼ï¼Œå°†`left`æŒ‡é’ˆç§»åŠ¨åˆ°ä¸­é—´ä½ç½®çš„å³è¾¹ã€‚

ç±»ä¼¼åœ°ï¼Œå®šä¹‰å¦ä¸€ä¸ªè¾…åŠ©å‡½æ•° `findLast`ï¼Œç”¨äºæ‰¾åˆ°ç›®æ ‡å€¼çš„ç»“æŸä½ç½®ã€‚è¿™ä¸ªå‡½æ•°ä¹Ÿä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨æ¯ä¸€æ­¥æŸ¥æ‰¾ä¸­ï¼Œå¦‚æœä¸­é—´å…ƒç´ å°äºç­‰äºç›®æ ‡å€¼ï¼Œå°†`left`æŒ‡é’ˆç§»åŠ¨åˆ°ä¸­é—´ä½ç½®çš„å³è¾¹ï¼Œå¹¶æ›´æ–°ç»“æœä¸ºå½“å‰ä¸­é—´ä½ç½®ã€‚å¦‚æœä¸­é—´å…ƒç´ å¤§äºç›®æ ‡å€¼ï¼Œå°†`right`æŒ‡é’ˆç§»åŠ¨åˆ°ä¸­é—´ä½ç½®çš„å·¦è¾¹ã€‚

æœ€ç»ˆï¼Œè°ƒç”¨è¿™ä¸¤ä¸ªè¾…åŠ©å‡½æ•°å¾—åˆ°ç›®æ ‡å€¼çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼Œè¿”å›ç»“æœæ•°ç»„ `[start, end]`ã€‚

è¿™æ ·ï¼Œå°±èƒ½å¤Ÿé€šè¿‡ä¸¤æ¬¡äºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç›®æ ‡å€¼åœ¨æœ‰åºæ•°ç»„ä¸­çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number[]}
 */
var searchRange = function (nums, target) {
	const getFirst = (nums, target) => {
		let left = 0;
		let right = nums.length - 1;
		while (left <= right) {
			const mid = Math.floor((left + right) / 2);
			if (nums[mid] >= target) {
				right = mid - 1;
			} else if (nums[mid] < target) {
				left = mid + 1;
			}
		}
		if (left >= nums.length || nums[left] !== target) {
			return -1;
		}
		return left;
	};
	const getLast = (nums, target) => {
		let left = 0;
		let right = nums.length - 1;
		while (left <= right) {
			const mid = Math.floor((left + right) / 2);
			if (nums[mid] > target) {
				right = mid - 1;
			} else if (nums[mid] <= target) {
				left = mid + 1;
			}
		}
		if (right >= nums.length || nums[right] !== target) {
			return -1;
		}
		return right;
	};
	return [getFirst(nums, target), getLast(nums, target)];
};
```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®

- [278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬](./0278.md)
- [2055. èœ¡çƒ›ä¹‹é—´çš„ç›˜å­](https://leetcode.com/problems/plates-between-candles)
- [2089. æ‰¾å‡ºæ•°ç»„æ’åºåçš„ç›®æ ‡ä¸‹æ ‡](https://leetcode.com/problems/find-target-indices-after-sorting-array)

::::
