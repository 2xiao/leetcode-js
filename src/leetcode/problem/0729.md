# [729. æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ I](https://leetcode.com/problems/my-calendar-i)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`çº¿æ®µæ ‘`](/leetcode/outline/tag/segment-tree.md) [`äºŒåˆ†æŸ¥æ‰¾`](/leetcode/outline/tag/binary-search.md) [`æœ‰åºé›†åˆ`](/leetcode/outline/tag/ordered-set.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/my-calendar-i/)

## é¢˜ç›®

You are implementing a program to use as your calendar. We can add a new event
if adding the event will not cause a **double booking**.

A **double booking** happens when two events have some non-empty intersection
(i.e., some moment is common to both events.).

The event can be represented as a pair of integers `start` and `end` that
represents a booking on the half-open interval `[start, end)`, the range of
real numbers `x` such that `start <= x < end`.

Implement the `MyCalendar` class:

- `MyCalendar()` Initializes the calendar object.
- `boolean book(int start, int end)` Returns `true` if the event can be added to the calendar successfully without causing a **double booking**. Otherwise, return `false` and do not add the event to the calendar.

**Example 1:**

> **Input**
>
> ["MyCalendar", "book", "book", "book"]
>
> [[], [10, 20], [15, 25], [20, 30]]
>
> **Output**
>
> [null, true, false, true]
>
> **Explanation**
>
> MyCalendar myCalendar = new MyCalendar();
>
> myCalendar.book(10, 20); // return True
>
> myCalendar.book(15, 25); // return False, It can not be booked because time 15 is already booked by another event.
>
> myCalendar.book(20, 30); // return True, The event can be booked, as the first event takes every time less than 20, but not including 20.

**Constraints:**

- `0 <= start < end <= 10^9`
- At most `1000` calls will be made to `book`.

## é¢˜ç›®å¤§æ„

å®ç°ä¸€ä¸ª `MyCalendar` ç±»æ¥å­˜æ”¾ä½ çš„æ—¥ç¨‹å®‰æ’ã€‚å¦‚æœè¦æ·»åŠ çš„æ—¥ç¨‹å®‰æ’ä¸ä¼šé€ æˆ **é‡å¤é¢„è®¢** ï¼Œåˆ™å¯ä»¥å­˜å‚¨è¿™ä¸ªæ–°çš„æ—¥ç¨‹å®‰æ’ã€‚

å½“ä¸¤ä¸ªæ—¥ç¨‹å®‰æ’æœ‰ä¸€äº›æ—¶é—´ä¸Šçš„äº¤å‰æ—¶ï¼ˆä¾‹å¦‚ä¸¤ä¸ªæ—¥ç¨‹å®‰æ’éƒ½åœ¨åŒä¸€æ—¶é—´å†…ï¼‰ï¼Œå°±ä¼šäº§ç”Ÿ **é‡å¤é¢„è®¢** ã€‚

æ—¥ç¨‹å¯ä»¥ç”¨ä¸€å¯¹æ•´æ•° `start` å’Œ `end` è¡¨ç¤ºï¼Œè¿™é‡Œçš„æ—¶é—´æ˜¯åŠå¼€åŒºé—´ï¼Œå³ `[start, end)`, å®æ•° `x` çš„èŒƒå›´ä¸ºï¼Œ `start <= x < end` ã€‚

å®ç° `MyCalendar` ç±»ï¼š

- `MyCalendar()` åˆå§‹åŒ–æ—¥å†å¯¹è±¡ã€‚
- `boolean book(int start, int end)` å¦‚æœå¯ä»¥å°†æ—¥ç¨‹å®‰æ’æˆåŠŸæ·»åŠ åˆ°æ—¥å†ä¸­è€Œä¸ä¼šå¯¼è‡´é‡å¤é¢„è®¢ï¼Œè¿”å› `true` ã€‚å¦åˆ™ï¼Œè¿”å› `false` å¹¶ä¸”ä¸è¦å°†è¯¥æ—¥ç¨‹å®‰æ’æ·»åŠ åˆ°æ—¥å†ä¸­ã€‚

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šéå†

- éå†å·²æ·»åŠ çš„æ—¥å†ï¼Œé€ä¸€åˆ¤æ–­æ–°çš„æ—¥ç¨‹å®‰æ’ `[start, end)` å’Œå·²æœ‰çš„æ—¥ç¨‹å®‰æ’ `[s, e)` æ˜¯å¦é‡å¤
- å½“ `start < e && end > s` æ—¶ï¼Œä»£è¡¨ä¸¤ä¸ªåŒºé—´é‡å¤äº†ï¼›
- ä¸€æ—¦å‘ç°é‡å¤ï¼Œåˆ™è¿”å› `false`ï¼›
- å…¨éƒ¨éå†å®Œéƒ½æ²¡æœ‰é‡å¤ï¼Œåˆ™å°†æ–°æ—¥ç¨‹åŠ å…¥åˆ°æ—¥ç¨‹æ•°ç»„ä¸­ï¼Œå¹¶è¿”å› `true`ï¼›

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` ä¸ºå·²æœ‰çš„æ—¥ç¨‹æ•°é‡
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`

---

### æ€è·¯äºŒï¼šäºŒåˆ†æŸ¥æ‰¾

å¦‚æœæ¯æ¬¡æ·»åŠ æ–°çš„æ—¥ç¨‹ `[start, end)` æ—¶ï¼ŒæŒ‰ç…§ `start` çš„å¤§å°é¡ºåºæ’å…¥ï¼ŒæŸ¥æ‰¾çš„æ—¶å€™å°±å¯ä»¥ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œå°†æ—¶é—´å¤æ‚åº¦é™ä½åˆ° `O(log n)`ã€‚

æ›´æ–°äºŒåˆ†æŸ¥æ‰¾èŒƒå›´çš„æ—¶å€™è¦æ³¨æ„ï¼Œå¯¹äºå·²æœ‰çš„æ—¥ç¨‹å®‰æ’ `[s, e)`ï¼Œè¦æ ¹æ® `e` å’Œ `start`çš„å…³ç³»æ¥åˆ¤æ–­æŸ¥æ‰¾èŒƒå›´ï¼š

- è‹¥ `e < start`ï¼Œåˆ™ä¸¤ä¸ªæ—¥ç¨‹æ— äº¤é›†ï¼Œå¯ä»¥ç›´æ¥ç¼©å°èŒƒå›´ï¼›
- è‹¥ `e > start`ï¼Œåˆ™ä¸¤ä¸ªæ—¥ç¨‹æœ‰é‡åˆçš„å¯èƒ½ï¼›

## ä»£ç 

:::: code-tabs

@tab éå†

```javascript
var MyCalendar = function () {
	this.calendar = [];
};

/**
 * @param {number} start
 * @param {number} end
 * @return {boolean}
 */
MyCalendar.prototype.book = function (start, end) {
	for (let [s, e] of this.calendar) {
		if (start < e && end > s) return false;
	}
	this.calendar.push([start, end]);
	return true;
};

/**
 * Your MyCalendar object will be instantiated and called as such:
 * var obj = new MyCalendar()
 * var param_1 = obj.book(start,end)
 */
```

@tab äºŒåˆ†æŸ¥æ‰¾

```javascript
var MyCalendar = function () {
	this.calendar = [];
};

/**
 * @param {number} start
 * @param {number} end
 * @return {boolean}
 */
MyCalendar.prototype.book = function (start, end) {
	let left = 0,
		right = this.calendar.length - 1;

	// äºŒåˆ†æŸ¥æ‰¾
	while (left <= right) {
		let mid = ((left + right) / 2) | 0;
		const [s, e] = this.calendar[mid];

		// æ—¶é—´é‡åˆï¼Œç›´æ¥è¿”å› false
		if (start < e && end > s) return false;

		// æ›´æ–°äºŒåˆ†æŸ¥æ‰¾èŒƒå›´
		if (start >= e) {
			left = mid + 1;
		} else {
			right = mid - 1;
		}
	}
	this.calendar.splice(left, 0, [start, end]);
	return true;
};

/**
 * Your MyCalendar object will be instantiated and called as such:
 * var obj = new MyCalendar()
 * var param_1 = obj.book(start,end)
 */
```

::::

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®
- [731. æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ II](./0731.md)
- [732. æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ III](https://leetcode.com/problems/my-calendar-iii)
- [2446. åˆ¤æ–­ä¸¤ä¸ªäº‹ä»¶æ˜¯å¦å­˜åœ¨å†²çª](https://leetcode.com/problems/determine-if-two-events-have-conflict)

::::
