# [90. å­é›† II](https://leetcode.com/problems/subsets-ii)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/leetcode/outline/tag/bit-manipulation.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å›æº¯`](/leetcode/outline/tag/backtracking.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/subsets-ii/)

## é¢˜ç›®

Given an integer array `nums` that may contain duplicates, return _all
possible_ _subsets_ _(the power set)_.

The solution set **must not** contain duplicate subsets. Return the solution
in **any order**.

**Example 1:**

> Input: nums = [1,2,2]
>
> Output: [[],[1],[1,2],[1,2,2],[2],[2,2]]

**Example 2:**

> Input: nums = [0]
>
> Output: [[],[0]]

**Constraints:**

- `1 <= nums.length <= 10`
- `-10 <= nums[i] <= 10`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ï¼Œè¯·ä½ è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚

è§£é›† **ä¸èƒ½** åŒ…å«é‡å¤çš„å­é›†ã€‚è¿”å›çš„è§£é›†ä¸­ï¼Œå­é›†å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** æ’åˆ—ã€‚

## è§£é¢˜æ€è·¯

å¯ä»¥ä½¿ç”¨å›æº¯ç®—æ³•æ¥ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å­é›†ï¼Œå¹¶åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­è¿›è¡Œå»é‡ï¼š

1. é¦–å…ˆå¯¹è¾“å…¥çš„æ•°ç»„ `nums` è¿›è¡Œæ’åºï¼Œä»¥ä¾¿åœ¨åç»­çš„å»é‡æ­¥éª¤ä¸­æ–¹ä¾¿æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚
2. å®šä¹‰ä¸€ä¸ªç©ºæ•°ç»„ `res` ç”¨äºå­˜å‚¨æœ€ç»ˆçš„ç»“æœï¼Œä»¥åŠä¸€ä¸ªç©ºæ•°ç»„ `track` ç”¨äºå›æº¯è¿‡ç¨‹ä¸­è®°å½•å½“å‰çš„è·¯å¾„ã€‚
3. åˆ›å»ºä¸€ä¸ªåä¸º `backtrack` çš„é€’å½’å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° `start` è¡¨ç¤ºå½“å‰éå†çš„èµ·å§‹ä½ç½®ã€‚
4. åœ¨ `backtrack` å‡½æ•°ä¸­ï¼Œé¦–å…ˆå°†å½“å‰çš„è·¯å¾„ `track` åŠ å…¥åˆ°ç»“æœæ•°ç»„ `res` ä¸­ï¼Œè¡¨ç¤ºæ‰¾åˆ°äº†ä¸€ä¸ªæ–°çš„å­é›†ã€‚
5. ç„¶åä» `start` å¼€å§‹éå†æ•°ç»„ `nums`ï¼Œå¯¹äºæ¯ä¸ªå…ƒç´ ï¼š
   - å¦‚æœå½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼ˆå³å‡ºç°äº†é‡å¤å…ƒç´ ï¼‰ï¼Œå¹¶ä¸”å½“å‰å…ƒç´ ä¸æ˜¯èµ·å§‹ä½ç½®çš„å…ƒç´ ï¼Œåˆ™è·³è¿‡å½“å‰å…ƒç´ ï¼Œä»¥é¿å…é‡å¤ç”Ÿæˆç›¸åŒçš„å­é›†ã€‚
   - å¦åˆ™ï¼Œå°†å½“å‰å…ƒç´ åŠ å…¥åˆ°è·¯å¾„ `track` ä¸­ï¼Œé€’å½’è°ƒç”¨ `backtrack` å‡½æ•°ï¼Œå¹¶ä¼ å…¥ä¸‹ä¸€ä¸ªä½ç½® `i + 1` ä½œä¸ºå‚æ•°ï¼Œä»¥ç»§ç»­ç”Ÿæˆä¸‹ä¸€ä¸ªå…ƒç´ çš„å­é›†ã€‚
   - åœ¨é€’å½’è°ƒç”¨ç»“æŸåï¼Œéœ€è¦å°†å½“å‰å…ƒç´ ä»è·¯å¾„ `track` ä¸­å¼¹å‡ºï¼Œä»¥ä¾¿å›æº¯åˆ°ä¸Šä¸€å±‚ç»§ç»­éå†å…¶ä»–å…ƒç´ ã€‚
6. æœ€åè¿”å›ç»“æœæ•°ç»„ `res`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var subsetsWithDup = function (nums) {
	let res = [];
	let track = [];

	// æ’åºï¼Œä»¥ä¾¿åœ¨åç»­çš„æ­¥éª¤ä¸­å»é‡
	nums.sort((a, b) => a - b);

	const backtrack = (start) => {
		res.push([...track]);

		for (let i = start; i < nums.length; i++) {
			// å‡ºç°äº†é‡å¤å…ƒç´ ï¼Œè·³è¿‡
			if (i > start && nums[i] == nums[i - 1]) {
				continue;
			}
			track.push(nums[i]);
			backtrack(i + 1);
			track.pop();
		}
	};

	backtrack(0);
	return res;
};
```

## ç›¸å…³é¢˜ç›®

| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 78 | [å­é›†](https://leetcode.com/problems/subsets) | [[âœ“]](https://2xiao.github.io/leetcode-js/leetcode/problem/0078) |  [`ä½è¿ç®—`](/leetcode/outline/tag/bit-manipulation.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å›æº¯`](/leetcode/outline/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 1982 | [ä»å­é›†çš„å’Œè¿˜åŸæ•°ç»„](https://leetcode.com/problems/find-array-given-subset-sums) |  |  [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`åˆ†æ²»`](/leetcode/outline/tag/divide-and-conquer.md) | <font color=#ff334b>Hard</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
