# [516. Longest Palindromic Subsequence](https://leetcode.com/problems/longest-palindromic-subsequence/)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/leetcode/outline/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/longest-palindromic-subsequence/)

## é¢˜ç›®

Given a string `s`, find _the longest palindromic **subsequence** 's length
in_ `s`.

A **subsequence** is a sequence that can be derived from another sequence by
deleting some or no elements without changing the order of the remaining
elements.

**Example 1:**

> Input: s = "bbbab"
>
> Output: 4
>
> Explanation: One possible longest palindromic subsequence is "bbbb".

**Example 2:**

> Input: s = "cbbd"
>
> Output: 2
>
> Explanation: One possible longest palindromic subsequence is "bb".

**Constraints:**

- `1 <= s.length <= 1000`
- `s` consists only of lowercase English letters.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€é•¿çš„å›æ–‡å­åºåˆ—ï¼Œå¹¶è¿”å›è¯¥åºåˆ—çš„é•¿åº¦ã€‚

å­åºåˆ—å®šä¹‰ä¸ºï¼šä¸æ”¹å˜å‰©ä½™å­—ç¬¦é¡ºåºçš„æƒ…å†µä¸‹ï¼Œåˆ é™¤æŸäº›å­—ç¬¦æˆ–è€…ä¸åˆ é™¤ä»»ä½•å­—ç¬¦å½¢æˆçš„ä¸€ä¸ªåºåˆ—ã€‚

`s` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆã€‚

## è§£é¢˜æ€è·¯

è¿™ä¸ªé—®é¢˜å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³ã€‚ä»¬å®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„ `dp`ï¼Œå…¶ä¸­ `dp[i][j]` è¡¨ç¤ºå­—ç¬¦ä¸² `s` åœ¨åŒºé—´ `[i, j]` å†…çš„æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ã€‚ä½¿ç”¨åŠ¨æ€è§„åˆ’çš„æ–¹æ³•æ¥å¡«å……è¿™ä¸ªäºŒç»´æ•°ç»„ã€‚

1. **åˆå§‹åŒ–åŠ¨æ€è§„åˆ’æ•°ç»„ï¼š**

   - å¯¹è§’çº¿ä¸Šçš„å…ƒç´  `dp[i][i]` å‡ä¸º `1`ï¼Œå› ä¸ºä»»ä½•ä¸€ä¸ªå•ä¸ªå­—ç¬¦éƒ½æ˜¯å›æ–‡å­åºåˆ—ã€‚

2. **çŠ¶æ€è½¬ç§»ï¼š**

   - å½“ `s[i] === s[j]` æ—¶ï¼Œè¡¨ç¤ºä¸¤ä¸ªå­—ç¬¦ç›¸åŒï¼Œå¯ä»¥å°†ä¸¤ä¸ªå­—ç¬¦åŠ å…¥åˆ°å·²ç»æ‰¾åˆ°çš„å›æ–‡å­åºåˆ—ä¸­ï¼Œå› æ­¤ `dp[i][j] = dp[i+1][j-1] + 2`ã€‚
   - å½“ `s[i] !== s[j]` æ—¶ï¼Œè¡¨ç¤ºä¸¤ä¸ªå­—ç¬¦ä¸åŒï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å»æ‰å…¶ä¸­ä¸€ä¸ªå­—ç¬¦ï¼Œç„¶åå–å¦ä¸€ä¸ªåŒºé—´çš„æœ€é•¿å›æ–‡å­åºåˆ—ï¼Œå³ `dp[i][j] = Math.max(dp[i+1][j], dp[i][j-1])`ã€‚

3. **éå†é¡ºåºï¼š**

   - ç”±äºçŠ¶æ€è½¬ç§»æ–¹ç¨‹éœ€è¦ä¾èµ–åŒºé—´ `[i+1, j-1], [i+1, j], [i, j-1]` çš„ç»“æœï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æŒ‰ç…§åŒºé—´é•¿åº¦ä»å°åˆ°å¤§çš„é¡ºåºéå†åŒºé—´ï¼Œå³å…ˆéå†è¾ƒçŸ­çš„åŒºé—´ï¼Œå†æ ¹æ®è¾ƒçŸ­åŒºé—´çš„ç»“æœè®¡ç®—è¾ƒé•¿åŒºé—´çš„ç»“æœã€‚

4. **è¿”å›ç»“æœï¼š**
   - æœ€ç»ˆç»“æœå­˜å‚¨åœ¨ `dp[0][n-1]` ä¸­ï¼Œå³æ•´ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å›æ–‡å­åºåˆ—é•¿åº¦ã€‚

- æ—¶é—´å¤æ‚åº¦ï¼š`O(n^2)`ï¼Œå…¶ä¸­ n æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ŒåŠ¨æ€è§„åˆ’æ•°ç»„çš„å¤§å°ä¸º n^2ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼š`O(n^2)`ï¼Œä½¿ç”¨äº†ä¸€ä¸ªäºŒç»´åŠ¨æ€è§„åˆ’æ•°ç»„ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var longestPalindromeSubseq = function (s) {
	const n = s.length;
	let dp = new Array(n).fill(0).map((i) => new Array(n).fill(0));

	// åˆå§‹åŒ–åŠ¨æ€è§„åˆ’æ•°ç»„
	for (let i = 0; i < n; i++) {
		dp[i][i] = 1;
	}

	// éå†åŒºé—´é•¿åº¦
	for (let i = n - 2; i >= 0; i--) {
		for (let j = i + 1; j < n; j++) {
			if (s[i] == s[j]) {
				dp[i][j] = dp[i + 1][j - 1] + 2;
			} else {
				dp[i][j] = Math.max(dp[i + 1][j], dp[i][j - 1]);
			}
		}
	}
	return dp[0][n - 1];
};
```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®

- [5. æœ€é•¿å›æ–‡å­ä¸²](https://leetcode.com/problems/longest-palindromic-substring)
- [647. å›æ–‡å­ä¸²](https://leetcode.com/problems/palindromic-substrings)
- [730. ç»Ÿè®¡ä¸åŒå›æ–‡å­åºåˆ—](https://leetcode.com/problems/count-different-palindromic-subsequences)
- [1143. æœ€é•¿å…¬å…±å­åºåˆ—](https://leetcode.com/problems/longest-common-subsequence)
- [ğŸ”’ Longest Palindromic Subsequence II](https://leetcode.com/problems/longest-palindromic-subsequence-ii)
- [1771. ç”±å­åºåˆ—æ„é€ çš„æœ€é•¿å›æ–‡ä¸²çš„é•¿åº¦](https://leetcode.com/problems/maximize-palindrome-length-from-subsequences)
- [2002. ä¸¤ä¸ªå›æ–‡å­åºåˆ—é•¿åº¦çš„æœ€å¤§ä¹˜ç§¯](https://leetcode.com/problems/maximum-product-of-the-length-of-two-palindromic-subsequences)

::::
