# [20. è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²](https://leetcode.cn/problems/biao-shi-shu-zhi-de-zi-fu-chuan-lcof)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.cn/problems/biao-shi-shu-zhi-de-zi-fu-chuan-lcof)

## é¢˜ç›®

**æœ‰æ•ˆæ•°å­—** ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

1. è‹¥å¹²ç©ºæ ¼
2. ä¸€ä¸ª **å°æ•°** æˆ–è€… **æ•´æ•°**
3. ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ª `'e'` æˆ– `'E'` ï¼Œåé¢è·Ÿç€ä¸€ä¸ª **æ•´æ•°**
4. è‹¥å¹²ç©ºæ ¼

**å°æ•°** ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

1. ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ªç¬¦å·å­—ç¬¦ï¼ˆ`'+'` æˆ– `'-'`ï¼‰
2. ä¸‹è¿°æ ¼å¼ä¹‹ä¸€ï¼š
   1. è‡³å°‘ä¸€ä½æ•°å­—ï¼Œåé¢è·Ÿç€ä¸€ä¸ªç‚¹ `'.'`
   2. è‡³å°‘ä¸€ä½æ•°å­—ï¼Œåé¢è·Ÿç€ä¸€ä¸ªç‚¹ `'.'` ï¼Œåé¢å†è·Ÿç€è‡³å°‘ä¸€ä½æ•°å­—
   3. ä¸€ä¸ªç‚¹ `'.'` ï¼Œåé¢è·Ÿç€è‡³å°‘ä¸€ä½æ•°å­—

**æ•´æ•°** ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

1. ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ªç¬¦å·å­—ç¬¦ï¼ˆ`'+'` æˆ– `'-'`ï¼‰
2. è‡³å°‘ä¸€ä½æ•°å­—

éƒ¨åˆ†æœ‰æ•ˆæ•°å­—åˆ—ä¸¾å¦‚ä¸‹ï¼š`["2", "0089", "-0.1", "+3.14", "4.", "-.9", "2e10", "-90E3",
"3e+7", "+6e-1", "53.5e93", "-123.456e789"]`

éƒ¨åˆ†æ— æ•ˆæ•°å­—åˆ—ä¸¾å¦‚ä¸‹ï¼š`["abc", "1a", "1e", "e3", "99e2.5", "--6", "-+3", "95a54e53"]`

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œå¦‚æœ `s` æ˜¯ä¸€ä¸ª **æœ‰æ•ˆæ•°å­—** ï¼Œè¯·è¿”å› `true` ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** s = "0"
>
> **è¾“å‡ºï¼š** true

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = "e"
>
> **è¾“å‡ºï¼š** false

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** s = "."
>
> **è¾“å‡ºï¼š** false

**æç¤ºï¼š**

- `1 <= s.length <= 20`
- `s` ä»…å«è‹±æ–‡å­—æ¯ï¼ˆå¤§å†™å’Œå°å†™ï¼‰ï¼Œæ•°å­—ï¼ˆ`0-9`ï¼‰ï¼ŒåŠ å· `'+'` ï¼Œå‡å· `'-'` ï¼Œç©ºæ ¼ `' '` æˆ–è€…ç‚¹ `'.'` ã€‚

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ æ­£åˆ™è¡¨è¾¾å¼

ä¸ºäº†åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯æœ‰æ•ˆæ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…å…¶æ ¼å¼ã€‚æ ¹æ®é¢˜ç›®çš„æè¿°ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¥éªŒè¯å­—ç¬¦ä¸²çš„æœ‰æ•ˆæ€§ã€‚

### æ­£åˆ™è¡¨è¾¾å¼æ„å»º

æ ¹æ®é¢˜ç›®è¦æ±‚ï¼Œæœ‰æ•ˆæ•°å­—çš„æ ¼å¼å¯ä»¥ç”¨ä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼è¡¨ç¤ºï¼š

1. **å¯é€‰çš„ç©ºæ ¼**ï¼šä½¿ç”¨ `^\s*` å’Œ `\s*$`ã€‚
2. **æœ‰æ•ˆæ•°å­—éƒ¨åˆ†**ï¼š
   - å¯ä»¥æ˜¯ä¸€ä¸ªæ•´æ•°æˆ–å°æ•°ï¼Œåé¢å¯ä»¥è·Ÿå¯é€‰çš„ç§‘å­¦è®¡æ•°æ³•éƒ¨åˆ†ï¼ˆ'e' æˆ– 'E' åè·Ÿæ•´æ•°ï¼‰ã€‚
   - å°æ•°å’Œæ•´æ•°çš„è¯¦ç»†ç»“æ„åœ¨æè¿°ä¸­å·²ç»™å‡ºã€‚

### æ­£åˆ™è¡¨è¾¾å¼ç¤ºä¾‹

ä»¥ä¸‹æ˜¯æ„å»ºçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š

`^\s*[+-]?((\d+(\.\d*)?)|(\.\d+))([eE][+-]?\d+)?\s*$`

- `^\s*` å’Œ `\s*$` ç”¨äºåŒ¹é…å‰åçš„ç©ºæ ¼ã€‚
- `[+-]?` è¡¨ç¤ºå¯é€‰çš„ç¬¦å·ã€‚
- `(\d+(\.\d*)?)|(\.\d+)` ç”¨äºåŒ¹é…å°æ•°å’Œæ•´æ•°ï¼š
  - `\d+(\.\d*)?` åŒ¹é…æ•´æ•°å’Œå¯é€‰çš„å°æ•°éƒ¨åˆ†ã€‚
  - `\.\d+` åŒ¹é…ä»¥ç‚¹å¼€å§‹çš„æ•°ï¼ˆå¦‚ `.5`ï¼‰ã€‚
- `([eE][+-]?\d+)?` åŒ¹é…ç§‘å­¦è®¡æ•°æ³•éƒ¨åˆ†ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…è¿‡ç¨‹ä¼šéå†æ•´ä¸ªå­—ç¬¦ä¸²ä¸€æ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºçº¿æ€§ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä¸ä½¿ç”¨é¢å¤–çš„ç©ºé—´ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ç»“æœé€šå¸¸åœ¨å¸¸é‡ç©ºé—´å†…å®Œæˆï¼Œä¸ä¼šé¢å¤–ä½¿ç”¨ä¸è¾“å…¥è§„æ¨¡ç›¸å…³çš„ç©ºé—´ã€‚

### æ€è·¯äºŒ æ‰‹åŠ¨è§£æå­—ç¬¦ä¸²

1. **å»é™¤ç©ºæ ¼**ï¼šä½¿ç”¨ `trim()` å‡½æ•°å»æ‰å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼ã€‚
2. **æ ‡å¿—ä½**ï¼šä½¿ç”¨ `hasNum`ã€`hasDot`ã€`hasExp` æ ‡å¿—æ•°å­—ã€å°æ•°ç‚¹å’ŒæŒ‡æ•°çš„å‡ºç°ã€‚
3. **éå†å­—ç¬¦ä¸²**ï¼š
   - å…è®¸å­—ç¬¦ä¸²ä»¥ `'+'` æˆ– `'-'` å¼€å¤´ã€‚
   - é€å­—ç¬¦éå†å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­æ¯ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯æ•°å­—ã€å°æ•°ç‚¹æˆ–ç§‘å­¦è®¡æ•°æ³•çš„ç¬¦å·ã€‚
4. **æ£€æŸ¥æœ‰æ•ˆæ€§**ï¼š

   - ç¡®ä¿å°æ•°ç‚¹å’ŒæŒ‡æ•°ç¬¦å·åªå‡ºç°ä¸€æ¬¡ã€‚
   - ç¡®ä¿æ•°å­—éƒ¨åˆ†åœ¨å°æ•°ç‚¹å‰åéƒ½æœ‰æ•°å­—ï¼ˆå¦‚é€‚ç”¨ï¼‰ã€‚
   - ç¡®ä¿æŒ‡æ•°ç¬¦å·åæœ‰æ•°å­—ã€‚

5. **è¿”å›ç»“æœ**ï¼šæœ€åæ ¹æ® `hasNum` åˆ¤æ–­æ˜¯å¦å­˜åœ¨æœ‰æ•ˆçš„æ•°å­—éƒ¨åˆ†ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œéœ€è¦éå†æ•´ä¸ªå­—ç¬¦ä¸²ä¸€æ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºçº¿æ€§ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä½¿ç”¨å¸¸é‡ç©ºé—´æ¥å­˜å‚¨æ ‡å¿—ä½ï¼Œä¸ä¼šæ ¹æ®è¾“å…¥è§„æ¨¡å¢åŠ ç©ºé—´ä½¿ç”¨ã€‚

## ä»£ç 

:::: code-tabs

@tab æ­£åˆ™è¡¨è¾¾å¼

```javascript
/**
 * @param {string} s
 * @return {boolean}
 */
var validNumber = function (s) {
	const regex = /^\s*[+-]?((\d+(\.\d*)?)|(\.\d+))([eE][+-]?\d+)?\s*$/;
	return regex.test(s);
};
```

@tab æ‰‹åŠ¨è§£æå­—ç¬¦ä¸²

```javascript
/**
 * @param {string} s
 * @return {boolean}
 */
var validNumber = function (s) {
	s = s.trim(); // å»é™¤ç©ºæ ¼
	let n = s.length;
	let hasNum = false,
		hasDot = false,
		hasExp = false;

	for (let i = 0; i < n; i++) {
		let char = s[i];

		// å¤„ç†ç¬¦å·
		if (char === '+' || char === '-') {
			if (i > 0 && s[i - 1] !== 'e' && s[i - 1] !== 'E') return false;
		}
		// å¤„ç†å°æ•°ç‚¹
		else if (char === '.') {
			if (hasDot || hasExp) return false; // ä¸èƒ½æœ‰å¤šä¸ªå°æ•°ç‚¹æˆ–åœ¨ç§‘å­¦è®¡æ•°æ³•å
			hasDot = true;
		}
		// å¤„ç†æŒ‡æ•°ç¬¦å·
		else if (char === 'e' || char === 'E') {
			if (hasExp || !hasNum) return false; // ä¸èƒ½æœ‰å¤šä¸ªæŒ‡æ•°ï¼Œä¸”å¿…é¡»æœ‰æ•°å­—åœ¨å‰
			hasExp = true;
			hasNum = false; // é‡ç½®æ•°å­—æ ‡å¿—ï¼Œå‡†å¤‡å¤„ç†æŒ‡æ•°éƒ¨åˆ†
		}
		// å¤„ç†æ•°å­—
		else if (char >= '0' && char <= '9') {
			hasNum = true; // è‡³å°‘æœ‰ä¸€ä¸ªæ•°å­—
		} else {
			return false; // å…¶ä»–å­—ç¬¦æ— æ•ˆ
		}
	}

	return hasNum; // æœ€ç»ˆå¿…é¡»æœ‰æ•°å­—
};
```

::::
