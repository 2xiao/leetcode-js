# 3.4 å›æº¯ç®—æ³•

## å›æº¯çš„å®šä¹‰

::: info å®šä¹‰
**å›æº¯ï¼ˆBacktrackingï¼‰** åˆç§°ä¸ºè¯•æ¢æ³•ï¼Œæ˜¯ä¸€ç§é€šè¿‡ä¸æ–­åœ°å°è¯•ï¼Œæœç´¢é—®é¢˜çš„è§£çš„ç®—æ³•ã€‚å®ƒæ˜¯ä¸€ç§æ·±åº¦ä¼˜å…ˆæœç´¢çš„è¿‡ç¨‹ï¼Œé€šå¸¸é€šè¿‡é€’å½’å®ç°ã€‚å›æº¯ç®—æ³•ä¸»è¦ç”¨äºè§£å†³ç»„åˆé—®é¢˜ã€æ’åˆ—é—®é¢˜å’Œæœç´¢é—®é¢˜ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ç©·å°½æ‰€æœ‰å¯èƒ½æ€§ï¼Œæ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„è§£ã€‚
:::

é€šè¿‡å°è¯•ä¸åŒçš„å¯èƒ½æ€§ï¼Œé€æ­¥æ„å»ºé—®é¢˜çš„è§£ï¼Œå½“è¾¾åˆ°æŸä¸ªæ¡ä»¶æˆ–æ— æ³•ç»§ç»­æ‰©å±•æ—¶ï¼Œå°±è¿›è¡Œå›é€€ï¼Œå°è¯•å…¶ä»–çš„å¯èƒ½æ€§ã€‚

å›æº¯ç®—æ³•å’Œæˆ‘ä»¬å¸¸è¯´çš„ DFS ç®—æ³•éå¸¸ç±»ä¼¼ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§æš´åŠ›ç©·ä¸¾ç®—æ³•ã€‚å›æº¯ç®—æ³•å’Œ DFS ç®—æ³•çš„ç»†å¾®å·®åˆ«æ˜¯ï¼šå›æº¯ç®—æ³•æ˜¯åœ¨éå†ã€Œæ ‘æã€ï¼ŒDFS ç®—æ³•æ˜¯åœ¨éå†ã€ŒèŠ‚ç‚¹ã€ã€‚

## å›æº¯çš„åŸç†

æŠ½è±¡åœ°è¯´ï¼Œè§£å†³ä¸€ä¸ªå›æº¯é—®é¢˜ï¼Œå®é™…ä¸Šå°±æ˜¯éå†ä¸€æ£µå†³ç­–æ ‘çš„è¿‡ç¨‹ï¼Œæ ‘çš„æ¯ä¸ªå¶å­èŠ‚ç‚¹å­˜æ”¾ç€ä¸€ä¸ªåˆæ³•ç­”æ¡ˆã€‚æŠŠæ•´æ£µæ ‘éå†ä¸€éï¼ŒæŠŠå¶å­èŠ‚ç‚¹ä¸Šçš„ç­”æ¡ˆéƒ½æ”¶é›†èµ·æ¥ï¼Œå°±èƒ½å¾—åˆ°æ‰€æœ‰çš„åˆæ³•ç­”æ¡ˆã€‚ç«™åœ¨å›æº¯æ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œåªéœ€è¦æ€è€ƒ 3 ä¸ªé—®é¢˜ï¼š

1. è·¯å¾„ï¼šä¹Ÿå°±æ˜¯å·²ç»åšå‡ºçš„é€‰æ‹©ã€‚
2. é€‰æ‹©åˆ—è¡¨ï¼šä¹Ÿå°±æ˜¯ä½ å½“å‰å¯ä»¥åšçš„é€‰æ‹©ã€‚
3. ç»“æŸæ¡ä»¶ï¼šä¹Ÿå°±æ˜¯åˆ°è¾¾å†³ç­–æ ‘åº•å±‚ï¼Œæ— æ³•å†åšé€‰æ‹©çš„æ¡ä»¶ã€‚

ä»£ç æ–¹é¢ï¼Œå›æº¯ç®—æ³•çš„æ¡†æ¶ï¼š

```javascript
let result = [];
let track = []; // è·¯å¾„
const backtrack = (é€‰æ‹©åˆ—è¡¨) => {
	if (æ»¡è¶³ç»“æŸæ¡ä»¶) {
		result.add(track);
		return;
	}

	for (é€‰æ‹© in é€‰æ‹©åˆ—è¡¨) {
		// åšé€‰æ‹©
		track.push(é€‰æ‹©);
		// é€’å½’è°ƒç”¨
		backtrack(é€‰æ‹©åˆ—è¡¨);
		// æ’¤é”€é€‰æ‹©
		track.pop();
	}
};
```

å…¶æ ¸å¿ƒå°±æ˜¯ for å¾ªç¯é‡Œé¢çš„é€’å½’ï¼Œåœ¨é€’å½’è°ƒç”¨ä¹‹å‰ã€Œåšé€‰æ‹©ã€ï¼Œåœ¨é€’å½’è°ƒç”¨ä¹‹åã€Œæ’¤é”€é€‰æ‹©ã€ã€‚

ä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡[LeetCode ç¬¬ 46 é¢˜ å…¨æ’åˆ—](https://leetcode.com/problems/permutations/) æ¥äº†è§£ä»€ä¹ˆå«åšé€‰æ‹©å’Œæ’¤é”€é€‰æ‹©ï¼Œä»¥åŠè¿™ä¸ªæ¡†æ¶çš„åº•å±‚åŸç†ã€‚

::: info é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ `nums` ï¼Œè¿”å›å…¶ **æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—** ã€‚ä½ å¯ä»¥ **æŒ‰ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚`nums` ä¸­çš„æ‰€æœ‰æ•´æ•° **äº’ä¸ç›¸åŒ**ã€‚

:::

é«˜ä¸­çš„æ—¶å€™åšè¿‡æ’åˆ—ç»„åˆçš„æ•°å­¦é¢˜ï¼Œ `n` ä¸ªä¸é‡å¤çš„æ•°ï¼Œå…¨æ’åˆ—å…±æœ‰ `n!` ä¸ªã€‚é‚£ä¹ˆæ˜¯æ€ä¹ˆç©·ä¸¾å…¨æ’åˆ—çš„å‘¢ï¼Ÿæ¯”æ–¹è¯´ç»™ä¸‰ä¸ªæ•° `[1,2,3]`ï¼Œä¸€èˆ¬æ˜¯è¿™æ ·ï¼š

å…ˆå›ºå®šç¬¬ä¸€ä½ä¸º `1`ï¼Œç„¶åç¬¬äºŒä½å¯ä»¥æ˜¯ `2`ï¼Œé‚£ä¹ˆç¬¬ä¸‰ä½åªèƒ½æ˜¯ `3`ï¼›ç„¶åå¯ä»¥æŠŠç¬¬äºŒä½å˜æˆ `3`ï¼Œç¬¬ä¸‰ä½å°±åªèƒ½æ˜¯ `2` äº†ï¼›ç„¶åå°±åªèƒ½å˜åŒ–ç¬¬ä¸€ä½ï¼Œå˜æˆ `2`ï¼Œç„¶åå†ç©·ä¸¾åä¸¤ä½â€¦â€¦

å…¶å®è¿™å°±æ˜¯å›æº¯ç®—æ³•ï¼Œå¯ä»¥ç›´æ¥ç”»å‡ºå¦‚ä¸‹è¿™æ£µå›æº¯æ ‘ï¼š

![](../image/3-4-1.png)

åªè¦ä»æ ¹éå†è¿™æ£µæ ‘ï¼Œè®°å½•è·¯å¾„ä¸Šçš„æ•°å­—ï¼Œå…¶å®å°±æ˜¯æ‰€æœ‰çš„å…¨æ’åˆ—ã€‚ **ä¸å¦¨æŠŠè¿™æ£µæ ‘ç§°ä¸ºå›æº¯ç®—æ³•çš„ã€Œå†³ç­–æ ‘ã€ï¼Œå› ä¸ºä½ åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šå…¶å®éƒ½åœ¨åšå†³ç­–ã€‚** æ¯”å¦‚è¯´ç«™åœ¨ä¸‹å›¾çš„çº¢è‰²èŠ‚ç‚¹ä¸Šï¼Œå°±åœ¨åšå†³ç­–ï¼Œå¯ä»¥é€‰æ‹© `1` é‚£æ¡æ ‘æï¼Œä¹Ÿå¯ä»¥é€‰æ‹© `3` é‚£æ¡æ ‘æã€‚ä¸ºå•¥åªèƒ½åœ¨ `1` å’Œ `3` ä¹‹ä¸­é€‰æ‹©å‘¢ï¼Ÿå› ä¸º `2` è¿™ä¸ªæ ‘æåœ¨èº«åï¼Œè¿™ä¸ªé€‰æ‹©ä¹‹å‰åšè¿‡äº†ï¼Œè€Œå…¨æ’åˆ—æ˜¯ä¸å…è®¸é‡å¤ä½¿ç”¨æ•°å­—çš„ã€‚

![](../image/3-4-2.png)

ç°åœ¨å¯ä»¥è§£ç­”ä¸Šé¢çš„å‡ ä¸ªåè¯ï¼š**`[2]` å°±æ˜¯ã€Œè·¯å¾„ã€ï¼Œè®°å½•å·²ç»åšè¿‡çš„é€‰æ‹©ï¼›`[1,3]` å°±æ˜¯ã€Œé€‰æ‹©åˆ—è¡¨ã€ï¼Œè¡¨ç¤ºå½“å‰å¯ä»¥åšå‡ºçš„é€‰æ‹©ï¼›ã€Œç»“æŸæ¡ä»¶ã€å°±æ˜¯éå†åˆ°æ ‘çš„åº•å±‚å¶å­èŠ‚ç‚¹ï¼Œè¿™é‡Œä¹Ÿå°±æ˜¯é€‰æ‹©åˆ—è¡¨ä¸ºç©ºçš„æ—¶å€™ã€‚å®šä¹‰çš„ `backtrack` å‡½æ•°å…¶å®å°±åƒä¸€ä¸ªæŒ‡é’ˆï¼Œåœ¨è¿™æ£µæ ‘ä¸Šæ¸¸èµ°ï¼ŒåŒæ—¶è¦æ­£ç¡®ç»´æŠ¤æ¯ä¸ªèŠ‚ç‚¹çš„å±æ€§ï¼Œæ¯å½“èµ°åˆ°æ ‘çš„åº•å±‚å¶å­èŠ‚ç‚¹ï¼Œå…¶ã€Œè·¯å¾„ã€å°±æ˜¯ä¸€ä¸ªå…¨æ’åˆ—ã€‚**

å…¨æ’åˆ—çš„ä»£ç å¦‚ä¸‹ï¼š

```javascript
var permute = function (nums) {
	const n = nums.length;
	let res = [];
	let used = new Array(n).fill(false);

	const backtrack = (track) => {
		if (track.length == n) {
			res.push([...track]);
			return;
		}

		for (let i = 0; i < n; i++) {
			if (used[i]) {
				continue;
			}

			// åšé€‰æ‹©
			track.push(nums[i]);
			used[i] = true;

			// é€’å½’
			backtrack(track);

			// æ’¤é”€é€‰æ‹©ï¼Œå›æº¯
			track.pop();
			used[i] = false;
		}
	};

	backtrack([]);
	return res;
};
```

è¿™é‡Œç¨å¾®åšäº†äº›å˜é€šï¼Œæ²¡æœ‰æ˜¾å¼è®°å½•ã€Œé€‰æ‹©åˆ—è¡¨ã€ï¼Œè€Œæ˜¯é€šè¿‡ `used` æ•°ç»„æ’é™¤å·²ç»å­˜åœ¨ `track` ä¸­çš„å…ƒç´ ï¼Œä»è€Œæ¨å¯¼å‡ºå½“å‰çš„é€‰æ‹©åˆ—è¡¨ã€‚

è‡³æ­¤ï¼Œæˆ‘ä»¬å°±é€šè¿‡å…¨æ’åˆ—é—®é¢˜è¯¦è§£äº†å›æº¯ç®—æ³•çš„åº•å±‚åŸç†ã€‚

## å›æº¯çš„æ¡†æ¶å¥—è·¯

è™½ç„¶æ’åˆ—ã€ç»„åˆã€å­é›†ç³»åˆ—é—®é¢˜æ˜¯é«˜ä¸­å°±å­¦è¿‡çš„ï¼Œä½†å¦‚æœæƒ³ç¼–å†™ç®—æ³•è§£å†³å®ƒä»¬ï¼Œè¿˜æ˜¯éå¸¸è€ƒéªŒè®¡ç®—æœºæ€ç»´çš„ï¼Œä¸‹é¢å°±è®²è®²ç¼–ç¨‹è§£å†³è¿™å‡ ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ€è·¯ï¼Œä»¥åå†æœ‰ä»€ä¹ˆå˜ä½“ï¼Œä¹Ÿèƒ½æ‰‹åˆ°æ“’æ¥ï¼Œä»¥ä¸å˜åº”ä¸‡å˜ã€‚

æ— è®ºæ˜¯æ’åˆ—ã€ç»„åˆè¿˜æ˜¯å­é›†é—®é¢˜ï¼Œç®€å•è¯´æ— éå°±æ˜¯è®©ä½ ä»åºåˆ— `nums` ä¸­ä»¥ç»™å®šè§„åˆ™å–è‹¥å¹²å…ƒç´ ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§å˜ä½“ï¼š

- å˜ä½“ä¸€ï¼šå…ƒç´ æ— é‡ä¸å¯å¤é€‰
  - å³ `nums` ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡ï¼Œè¿™ä¹Ÿæ˜¯æœ€åŸºæœ¬çš„æƒ…å†µã€‚
  - ä»¥ç»„åˆä¸ºä¾‹ï¼Œå¦‚æœè¾“å…¥ `nums = [2,3,6,7]`ï¼Œå’Œä¸º `7` çš„ç»„åˆåº”è¯¥åªæœ‰ `[7]`ã€‚
- å˜ä½“äºŒï¼šå…ƒç´ å¯é‡ä¸å¯å¤é€‰
  - å³ `nums` ä¸­çš„å…ƒç´ å¯ä»¥å­˜åœ¨é‡å¤ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡ã€‚
  - ä»¥ç»„åˆä¸ºä¾‹ï¼Œå¦‚æœè¾“å…¥ `nums = [2,5,2,1,2]`ï¼Œå’Œä¸º `7` çš„ç»„åˆåº”è¯¥æœ‰ä¸¤ç§ `[2,2,2,1]` å’Œ `[5,2]`ã€‚
- å˜ä½“ä¸‰ï¼šå…ƒç´ æ— é‡å¯å¤é€‰
  - å³ `nums` ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ å¯ä»¥è¢«ä½¿ç”¨è‹¥å¹²æ¬¡ã€‚
  - ä»¥ç»„åˆä¸ºä¾‹ï¼Œå¦‚æœè¾“å…¥ `nums = [2,3,6,7]`ï¼Œå’Œä¸º `7` çš„ç»„åˆåº”è¯¥æœ‰ä¸¤ç§ `[2,2,3]` å’Œ `[7]`ã€‚

å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è¯´æœ‰ç¬¬å››ç§å˜ä½“ï¼Œå³å…ƒç´ å¯é‡å¯å¤é€‰ã€‚ä½†æ—¢ç„¶å…ƒç´ å¯å¤é€‰ï¼Œé‚£åˆä½•å¿…å­˜åœ¨é‡å¤å…ƒç´ å‘¢ï¼Ÿå…ƒç´ å»é‡ä¹‹åå°±ç­‰åŒäºå½¢å¼ä¸‰ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸ç”¨è€ƒè™‘ã€‚

ä¸Šé¢ç”¨ç»„åˆé—®é¢˜ä¸¾çš„ä¾‹å­ï¼Œä½† **æ’åˆ—**ã€**ç»„åˆ**ã€**å­é›†** é—®é¢˜éƒ½å¯ä»¥æœ‰è¿™ä¸‰ç§åŸºæœ¬å½¢å¼ï¼Œæ‰€ä»¥å…±æœ‰ `9` ç§å˜åŒ–ã€‚

### å…ƒç´ æ— é‡ä¸å¯å¤é€‰ - å­é›†

:::: md-demo ç›¸å…³é¢˜ç›®

#### ğŸ“Œ [78. å­é›† - LeetCode](https://leetcode.com/problems/subsets/)

#### ğŸ’» **é¢˜ç›®å¤§æ„**

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ•°ç»„ä¸­çš„å…ƒç´  **äº’ä¸ç›¸åŒ** ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚

è§£é›† **ä¸èƒ½** åŒ…å«é‡å¤çš„å­é›†ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›è§£é›†ã€‚

#### ğŸ’¡ **è§£é¢˜æ€è·¯**

æ¯”å¦‚è¾“å…¥ `nums = [1,2,3]`ï¼Œç®—æ³•åº”è¯¥è¿”å›å¦‚ä¸‹å­é›†ï¼š`[ [],[1],[2],[3],[1,2],[1,3],[2,3],[1,2,3] ]`ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š

- é¦–å…ˆï¼Œç”Ÿæˆå…ƒç´ ä¸ªæ•°ä¸º `0` çš„å­é›†ï¼Œå³ç©ºé›† `[]`ï¼Œä¸ºäº†æ–¹ä¾¿è¡¨ç¤ºï¼Œç§°ä¹‹ä¸º `S_0`;
- ç„¶åï¼Œåœ¨ `S_0` çš„åŸºç¡€ä¸Šç”Ÿæˆå…ƒç´ ä¸ªæ•°ä¸º `1` çš„æ‰€æœ‰å­é›†: `[1], [2], [3]`ï¼Œç§°ä¸º `S_1`;
- æ¥ç€ï¼Œå¯ä»¥åœ¨ `S_1` çš„åŸºç¡€ä¸Šæ¨å¯¼å‡º `S_2`ï¼Œå³å…ƒç´ ä¸ªæ•°ä¸º `2` çš„æ‰€æœ‰å­é›†ï¼š`[1, 2], [1, 3], [2, 3]`ã€‚
  - å› ä¸ºé›†åˆä¸­çš„å…ƒç´ ä¸ç”¨è€ƒè™‘é¡ºåºï¼Œ`[1,2,3]` ä¸­ `2` åé¢åªæœ‰ `3`ï¼Œå¦‚æœæ·»åŠ äº†å‰é¢çš„ `1`ï¼Œé‚£ä¹ˆ `[2,1]` ä¼šå’Œä¹‹å‰å·²ç»ç”Ÿæˆçš„å­é›† `[1,2]` é‡å¤ã€‚
  - æ¢å¥è¯è¯´ï¼Œé€šè¿‡ä¿è¯å…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåºä¸å˜æ¥é˜²æ­¢å‡ºç°é‡å¤çš„å­é›†ã€‚
- æ¥ç€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ `S_2` æ¨å‡º `S_3`ï¼Œå®é™…ä¸Š `S_3` ä¸­åªæœ‰ä¸€ä¸ªé›†åˆ `[1,2,3]`ï¼Œå®ƒæ˜¯é€šè¿‡ `[1,2]` æ¨å‡ºçš„;

![](../image/3-4-3.png)

æ‰€ä»¥å¦‚æœæƒ³è®¡ç®—æ‰€æœ‰å­é›†ï¼Œåªè¦éå†è¿™æ£µå¤šå‰æ ‘ï¼ŒæŠŠæ‰€æœ‰èŠ‚ç‚¹çš„å€¼æ”¶é›†èµ·æ¥å°±è¡Œäº†ã€‚ä»£ç å¦‚ä¸‹ï¼š

#### ğŸ’ **ä»£ç **

```javascript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var subsets = function (nums) {
	// ç”¨äºå­˜å‚¨ç»“æœ
	const res = [];
	// ç”¨äºè®°å½•å›æº¯è·¯å¾„
	const track = [];

	const backtrack = (start) => {
		// å‰åºéå†ä½ç½®ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯ä¸€ä¸ªå­é›†
		res.push([...track]);

		// å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
		for (let i = start; i < nums.length; i++) {
			// åšé€‰æ‹©
			track.push(nums[i]);
			// å›æº¯éå†ä¸‹ä¸€å±‚èŠ‚ç‚¹
			backtrack(i + 1);
			// æ’¤é”€é€‰æ‹©
			track.pop();
		}
	};

	backtrack(0);
	return res;
};
```

ä½¿ç”¨ `start` å‚æ•°æ§åˆ¶æ ‘æçš„ç”Ÿé•¿é¿å…äº§ç”Ÿé‡å¤çš„å­é›†ï¼Œç”¨ `track` è®°å½•æ ¹èŠ‚ç‚¹åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„è·¯å¾„çš„å€¼ï¼ŒåŒæ—¶åœ¨å‰åºä½ç½®æŠŠæ¯ä¸ªèŠ‚ç‚¹çš„è·¯å¾„å€¼æ”¶é›†èµ·æ¥ï¼Œå®Œæˆå›æº¯æ ‘çš„éå†å°±æ”¶é›†äº†æ‰€æœ‰å­é›†ã€‚

`backtrack` å‡½æ•°å¼€å¤´çœ‹ä¼¼æ²¡æœ‰ base caseï¼Œä¼šä¸ä¼šè¿›å…¥æ— é™é€’å½’ï¼Ÿå…¶å®ä¸ä¼šçš„ï¼Œå½“ `start == nums.length` æ—¶ï¼Œå¶å­èŠ‚ç‚¹çš„å€¼ä¼šè¢«è£…å…¥ `res`ï¼Œä½† `for` å¾ªç¯ä¸ä¼šæ‰§è¡Œï¼Œä¹Ÿå°±ç»“æŸäº†é€’å½’ã€‚

::::

### å…ƒç´ æ— é‡ä¸å¯å¤é€‰ - ç»„åˆ

:::: md-demo ç›¸å…³é¢˜ç›®

#### ğŸ“Œ [77. ç»„åˆ - LeetCode](https://leetcode.com/problems/combinations/)

#### ğŸ’» **é¢˜ç›®å¤§æ„**

ç»™å®šä¸¤ä¸ªæ•´æ•° `n` å’Œ `k`ï¼Œè¿”å›èŒƒå›´ `[1, n]` ä¸­æ‰€æœ‰å¯èƒ½çš„ `k` ä¸ªæ•°çš„ç»„åˆã€‚

ä½ å¯ä»¥æŒ‰ **ä»»ä½•é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

#### ğŸ’¡ **è§£é¢˜æ€è·¯**

è¿˜æ˜¯ä»¥ `nums = [1,2,3]` ä¸ºä¾‹ï¼ˆ `n = 3, k = 2` ï¼‰ï¼Œåˆšæ‰è®©ä½ æ±‚æ‰€æœ‰å­é›†ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½æ”¶é›†èµ·æ¥ï¼›ç°åœ¨ä½ åªéœ€è¦æŠŠç¬¬ `2` å±‚ï¼ˆæ ¹èŠ‚ç‚¹è§†ä¸ºç¬¬ `0` å±‚ï¼‰çš„èŠ‚ç‚¹æ”¶é›†èµ·æ¥ï¼Œå°±æ˜¯å¤§å°ä¸º `2` çš„æ‰€æœ‰ç»„åˆï¼š`[ [1,2],[1,3],[2,3] ]`ã€‚

![](../image/3-4-4.png)

åæ˜ åˆ°ä»£ç ä¸Šï¼Œåªéœ€è¦ç¨æ”¹ base caseï¼Œæ§åˆ¶ç®—æ³•ä»…æ”¶é›†ç¬¬ `k` å±‚èŠ‚ç‚¹çš„å€¼å³å¯ã€‚

#### ğŸ’ **ä»£ç **

```javascript
/**
 * @param {number} n
 * @param {number} k
 * @return {number[][]}
 */
var combine = function (n, k) {
	let res = [];
	let track = [];
	const backtrack = (start) => {
		// ä»…æ”¶é›†ç¬¬ k å±‚èŠ‚ç‚¹
		if (track.length == k) {
			res.push([...track]);
			return;
		}
		for (let i = start; i <= n; i++) {
			track.push(i);
			backtrack(i + 1);
			track.pop();
		}
	};
	backtrack(1);
	return res;
};
```

::::

### å…ƒç´ æ— é‡ä¸å¯å¤é€‰ - æ’åˆ—

:::: md-demo ç›¸å…³é¢˜ç›®

#### ğŸ“Œ [46. å…¨æ’åˆ— - LeetCode](https://leetcode.com/problems/permutations/)

#### ğŸ’» **é¢˜ç›®å¤§æ„**

ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ `nums` ï¼Œè¿”å›å…¶ **æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—** ã€‚ä½ å¯ä»¥ **æŒ‰ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚`nums` ä¸­çš„æ‰€æœ‰æ•´æ•° **äº’ä¸ç›¸åŒ**ã€‚

#### ğŸ’¡ **è§£é¢˜æ€è·¯**

æ¯”å¦‚è¾“å…¥ `nums = [1,2,3]`ï¼Œå‡½æ•°çš„è¿”å›å€¼åº”è¯¥æ˜¯ï¼š

```
[
    [1,2,3],[1,3,2],
    [2,1,3],[2,3,1],
    [3,1,2],[3,2,1]
]
```

åˆšæ‰è®²çš„ç»„åˆ/å­é›†é—®é¢˜ä½¿ç”¨ `start` å˜é‡ä¿è¯å…ƒç´  `nums[start]` ä¹‹ååªä¼šå‡ºç° `nums[start+1..]` ä¸­çš„å…ƒç´ ï¼Œé€šè¿‡å›ºå®šå…ƒç´ çš„ç›¸å¯¹ä½ç½®ä¿è¯ä¸å‡ºç°é‡å¤çš„å­é›†ã€‚

ä½†æ’åˆ—é—®é¢˜æœ¬èº«å°±æ˜¯è®©ä½ ç©·ä¸¾å…ƒç´ çš„ä½ç½®ï¼Œ`nums[i]` ä¹‹åä¹Ÿå¯ä»¥å‡ºç° `nums[i]` å·¦è¾¹çš„å…ƒç´ ï¼Œæ‰€ä»¥ä¹‹å‰çš„é‚£ä¸€å¥—ä¸è¡Œäº†ï¼Œéœ€è¦é¢å¤–ä½¿ç”¨ `used` æ•°ç»„æ¥æ ‡è®°å“ªäº›å…ƒç´ è¿˜å¯ä»¥è¢«é€‰æ‹©ã€‚æ ‡å‡†å…¨æ’åˆ—å¯ä»¥æŠ½è±¡æˆå¦‚ä¸‹è¿™æ£µå¤šå‰æ ‘ï¼š

![](../image/3-4-5.png)

æˆ‘ä»¬ç”¨ used æ•°ç»„æ ‡è®°å·²ç»åœ¨è·¯å¾„ä¸Šçš„å…ƒç´ é¿å…é‡å¤é€‰æ‹©ï¼Œç„¶åæ”¶é›†æ‰€æœ‰å¶å­èŠ‚ç‚¹ä¸Šçš„å€¼ï¼Œå°±æ˜¯æ‰€æœ‰å…¨æ’åˆ—çš„ç»“æœã€‚

#### ğŸ’ **ä»£ç **

```javascript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var permute = function (nums) {
	const n = nums.length;
	let res = [];
	let track = [];
	let used = new Array(n).fill(false);

	const backtrack = () => {
		if (track.length == n) {
			res.push([...track]);
			return;
		}

		for (let i = 0; i < n; i++) {
			if (used[i]) {
				continue;
			}
			// åšé€‰æ‹©
			track.push(nums[i]);
			used[i] = true;

			// é€’å½’
			backtrack();

			// æ’¤é”€é€‰æ‹©ï¼Œå›æº¯
			track.pop();
			used[i] = false;
		}
	};

	backtrack();
	return res;
};
```

å¦‚æœé¢˜ç›®ä¸è®©ä½ ç®—å…¨æ’åˆ—ï¼Œè€Œæ˜¯è®©ä½ ç®—å…ƒç´ ä¸ªæ•°ä¸º k çš„æ’åˆ—ï¼Œæ€ä¹ˆç®—ï¼Ÿä¹Ÿå¾ˆç®€å•ï¼Œæ”¹ä¸‹ `backtrack` å‡½æ•°çš„ base caseï¼Œä»…æ”¶é›†ç¬¬ `k` å±‚çš„èŠ‚ç‚¹å€¼å³å¯ã€‚

```javascript
const backtrack = () => {
	if (track.length == k) {
		res.push([...track]);
		return;
	}
	// ...
};
```

::::

### å…ƒç´ å¯é‡ä¸å¯å¤é€‰ - å­é›†

:::: md-demo ç›¸å…³é¢˜ç›®

#### ğŸ“Œ [90. å­é›† II - LeetCode](https://leetcode.com/problems/subsets-ii/)

#### ğŸ’» **é¢˜ç›®å¤§æ„**

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ï¼Œè¯·ä½ è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚

è§£é›† **ä¸èƒ½** åŒ…å«é‡å¤çš„å­é›†ã€‚è¿”å›çš„è§£é›†ä¸­ï¼Œå­é›†å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** æ’åˆ—ã€‚

#### ğŸ’¡ **è§£é¢˜æ€è·¯**

æ¯”å¦‚è¾“å…¥ `nums = [1,2,2]`ï¼Œå‡½æ•°çš„è¿”å›å€¼åº”è¯¥æ˜¯ï¼š`[ [],[1],[2],[1,2],[2,2],[1,2,2] ]`

å°±ä»¥ nums = [1,2,2] ä¸ºä¾‹ï¼Œä¸ºäº†åŒºåˆ«ä¸¤ä¸ª 2 æ˜¯ä¸åŒå…ƒç´ ï¼Œåé¢æˆ‘ä»¬å†™ä½œ nums = [1,2,2']ã€‚

æŒ‰ç…§ä¹‹å‰çš„æ€è·¯ç”»å‡ºå­é›†çš„æ ‘å½¢ç»“æ„ï¼Œæ˜¾ç„¶ï¼Œä¸¤æ¡å€¼ç›¸åŒçš„ç›¸é‚»æ ‘æä¼šäº§ç”Ÿé‡å¤ï¼š

```
[
    [],
    [1],[2],[2'],
    [1,2],[1,2'],[2,2'],
    [1,2,2']
]
```

å¯ä»¥çœ‹åˆ°ï¼Œ`[2] ä¸ [2']`ã€`[1,2] ä¸ [1,2']` è¿™ä¸¤ä¸ªç»“æœå‡ºç°äº†é‡å¤ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œå‰ªæï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æœ‰å¤šæ¡å€¼ç›¸åŒçš„æ ‘æç›¸é‚»ï¼Œåˆ™åªéå†ç¬¬ä¸€æ¡ï¼Œå‰©ä¸‹çš„éƒ½å‰ªæ‰ï¼Œä¸è¦å»éå†ï¼š

![](../image/3-4-6.png)

ä½“ç°åœ¨ä»£ç ä¸Šï¼Œéœ€è¦å…ˆè¿›è¡Œæ’åºï¼Œè®©ç›¸åŒçš„å…ƒç´ é åœ¨ä¸€èµ·ï¼Œå¦‚æœå‘ç° `nums[i] == nums[i-1]`ï¼Œåˆ™è·³è¿‡ã€‚

ä»£ç å’Œä¹‹å‰æ ‡å‡†çš„å­é›†é—®é¢˜çš„ä»£ç å‡ ä¹ç›¸åŒï¼Œå°±æ˜¯æ·»åŠ äº†æ’åºå’Œå‰ªæçš„é€»è¾‘ã€‚

#### ğŸ’ **ä»£ç **

```javascript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var subsetsWithDup = function (nums) {
	let res = [];
	let track = [];

	// æ’åºï¼Œä»¥ä¾¿åœ¨åç»­çš„æ­¥éª¤ä¸­å»é‡
	nums.sort((a, b) => a - b);

	const backtrack = (start) => {
		res.push([...track]);

		for (let i = start; i < nums.length; i++) {
			// å‡ºç°äº†é‡å¤å…ƒç´ ï¼Œè·³è¿‡
			if (i > start && nums[i] == nums[i - 1]) {
				continue;
			}
			track.push(nums[i]);
			backtrack(i + 1);
			track.pop();
		}
	};

	backtrack(0);
	return res;
};
```

::::

### å…ƒç´ å¯é‡ä¸å¯å¤é€‰ - ç»„åˆ

:::: md-demo ç›¸å…³é¢˜ç›®

#### ğŸ“Œ [40. ç»„åˆæ€»å’Œ II - LeetCode](https://leetcode.com/problems/combination-sum-ii/)

#### ğŸ’» **é¢˜ç›®å¤§æ„**

ç»™å®šä¸€ä¸ªå€™é€‰äººç¼–å·çš„é›†åˆ `candidates` å’Œä¸€ä¸ªç›®æ ‡æ•° `target` ï¼Œæ‰¾å‡º `candidates` ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º `target` çš„ç»„åˆã€‚`candidates` ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ **ä¸€æ¬¡** ã€‚è§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚

#### ğŸ’¡ **è§£é¢˜æ€è·¯**

ç»„åˆé—®é¢˜å’Œå­é›†é—®é¢˜æ˜¯ç­‰ä»·çš„ï¼Œè¯´è¿™æ˜¯ä¸€ä¸ªç»„åˆé—®é¢˜ï¼Œå…¶å®æ¢ä¸ªé—®æ³•å°±å˜æˆå­é›†é—®é¢˜ï¼šè¯·ä½ è®¡ç®— `candidates` ä¸­æ‰€æœ‰å’Œä¸º `target` çš„å­é›†ã€‚

å¯¹æ¯”å­é›†é—®é¢˜çš„è§£æ³•ï¼Œåªè¦é¢å¤–ç”¨ä¸€ä¸ª `sum` å˜é‡è®°å½•å›æº¯è·¯å¾„ä¸Šçš„å…ƒç´ å’Œï¼Œç„¶åå°† base case æ”¹ä¸€æ”¹å³å¯è§£å†³è¿™é“é¢˜ï¼š

#### ğŸ’ **ä»£ç **

```javascript
/**
 * @param {number[]} candidates
 * @param {number} target
 * @return {number[][]}
 */
var combinationSum2 = function (candidates, target) {
	let res = [];
	let track = [];
	let sum = 0;
	candidates.sort((a, b) => a - b);

	const backtrack = (start) => {
		if (sum == target) {
			res.push([...track]);
		}
		for (let i = start; i < candidates.length; i++) {
			// è‹¥å­é›†å’Œè¶…è¿‡ target ï¼Œåˆ™ç›´æ¥ç»“æŸå¾ªç¯
			// è¿™æ˜¯å› ä¸ºæ•°ç»„å·²æ’åºï¼Œåè¾¹å…ƒç´ æ›´å¤§ï¼Œå­é›†å’Œä¸€å®šè¶…è¿‡ target
			if (target - sum - candidates[i] < 0) {
				break;
			}
			if (i > start && candidates[i] == candidates[i - 1]) {
				continue;
			}
			track.push(candidates[i]);
			sum += candidates[i];
			backtrack(i + 1);
			track.pop();
			sum -= candidates[i];
		}
	};

	backtrack(0);
	return res;
};
```

::::

### å…ƒç´ å¯é‡ä¸å¯å¤é€‰ - æ’åˆ—

:::: md-demo ç›¸å…³é¢˜ç›®

#### ğŸ“Œ [47. å…¨æ’åˆ— II - LeetCode](https://leetcode.com/problems/permutations-ii/)

#### ğŸ’» **é¢˜ç›®å¤§æ„**

ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ— `nums` ï¼Œ**æŒ‰ä»»æ„é¡ºåº** è¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚

#### ğŸ’¡ **è§£é¢˜æ€è·¯**

æ’åˆ—é—®é¢˜çš„è¾“å…¥å¦‚æœå­˜åœ¨é‡å¤ï¼Œæ¯”å­é›†/ç»„åˆé—®é¢˜ç¨å¾®å¤æ‚ä¸€ç‚¹ã€‚å¯¹æ¯”ä¹‹å‰çš„æ ‡å‡†å…¨æ’åˆ—è§£æ³•ï¼Œéœ€è¦å¢åŠ ä¸¤ä¸ªç‚¹ï¼š

1. å¯¹ `nums` è¿›è¡Œæ’åºï¼›
2. æ·»åŠ ä¸€å¥é¢å¤–çš„å‰ªæé€»è¾‘ï¼š`i > 0 && nums[i] == nums[i - 1] && !used[i - 1]`ï¼›

è¿™ä¸ªåœ°æ–¹ç†è§£èµ·æ¥éœ€è¦ä¸€äº›æŠ€å·§ï¼Œä¸ºäº†æ–¹ä¾¿ç ”ç©¶ï¼Œä¾ç„¶æŠŠç›¸åŒçš„å…ƒç´ ç”¨ä¸Šæ ‡ ' ä»¥ç¤ºåŒºåˆ«ã€‚

å‡è®¾è¾“å…¥ä¸º `nums = [1,2,2']`ï¼Œæ ‡å‡†çš„å…¨æ’åˆ—ç®—æ³•ä¼šå¾—å‡ºå¦‚ä¸‹ç­”æ¡ˆï¼š

```
[
    [1,2,2'],[1,2',2],
    [2,1,2'],[2,2',1],
    [2',1,2],[2',2,1]
]
```

æ˜¾ç„¶è¿™ä¸ªç»“æœå­˜åœ¨é‡å¤ï¼Œæ¯”å¦‚ `[1,2,2']` å’Œ `[1,2',2]` åº”è¯¥åªè¢«ç®—ä½œåŒä¸€ä¸ªæ’åˆ—ï¼Œä½†è¢«ç®—ä½œäº†ä¸¤ä¸ªä¸åŒçš„æ’åˆ—ã€‚æ‰€ä»¥ç°åœ¨çš„å…³é”®åœ¨äºï¼Œå¦‚ä½•è®¾è®¡å‰ªæé€»è¾‘ï¼ŒæŠŠè¿™ç§é‡å¤å»é™¤æ‰ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œ**ä¿è¯ç›¸åŒå…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜ã€‚**

æ¯”å¦‚è¯´ `nums = [1,2,2']` è¿™ä¸ªä¾‹å­ï¼Œä¿æŒæ’åˆ—ä¸­ `2` ä¸€ç›´åœ¨ `2'` å‰é¢ã€‚è¿™æ ·çš„è¯ï¼Œä»ä¸Šé¢ `6` ä¸ªæ’åˆ—ä¸­åªèƒ½æŒ‘å‡º `3` ä¸ªæ’åˆ—ç¬¦åˆè¿™ä¸ªæ¡ä»¶ï¼š`[ [1,2,2'],[2,1,2'],[2,2',1] ]`ï¼Œä¹Ÿå°±æ˜¯æ­£ç¡®ç­”æ¡ˆã€‚

è¿›ä¸€æ­¥ï¼Œå¦‚æœ `nums = [1,2,2',2'']`ï¼Œåªè¦ä¿è¯é‡å¤å…ƒç´  `2` çš„ç›¸å¯¹ä½ç½®å›ºå®šï¼Œæ¯”å¦‚è¯´ `2 -> 2' -> 2''`ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°æ— é‡å¤çš„å…¨æ’åˆ—ç»“æœã€‚

**æ ‡å‡†å…¨æ’åˆ—ç®—æ³•ä¹‹æ‰€ä»¥å‡ºç°é‡å¤ï¼Œæ˜¯å› ä¸ºæŠŠç›¸åŒå…ƒç´ å½¢æˆçš„æ’åˆ—åºåˆ—è§†ä¸ºä¸åŒçš„åºåˆ—ï¼Œä½†å®é™…ä¸Šå®ƒä»¬åº”è¯¥æ˜¯ç›¸åŒçš„ï¼›è€Œå¦‚æœå›ºå®šç›¸åŒå…ƒç´ å½¢æˆçš„åºåˆ—é¡ºåºï¼Œå½“ç„¶å°±é¿å…äº†é‡å¤**ã€‚åæ˜ åˆ°ä»£ç ä¸Šï¼Œå°±æ˜¯è¿™ä¸ªå‰ªæé€»è¾‘ï¼š

```javascript
// æ–°æ·»åŠ çš„å‰ªæé€»è¾‘ï¼Œå›ºå®šç›¸åŒçš„å…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®
if (i > 0 && nums[i] == nums[i - 1] && !used[i - 1]) {
    // å¦‚æœå‰é¢çš„ç›¸é‚»ç›¸ç­‰å…ƒç´ æ²¡æœ‰ç”¨è¿‡ï¼Œåˆ™è·³è¿‡
    continue;
}
// é€‰æ‹© nums[i]
```

**å½“å‡ºç°é‡å¤å…ƒç´ æ—¶ï¼Œæ¯”å¦‚è¾“å…¥ `nums = [1,2,2',2'']`ï¼Œ`2'` åªæœ‰åœ¨ `2` å·²ç»è¢«ä½¿ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šè¢«é€‰æ‹©ï¼ŒåŒç†ï¼Œ`2''` åªæœ‰åœ¨ `2'` å·²ç»è¢«ä½¿ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šè¢«é€‰æ‹©ï¼Œè¿™å°±ä¿è¯äº†ç›¸åŒå…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®ä¿è¯å›ºå®šã€‚**

#### ğŸ’ **ä»£ç **

```javascript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var permuteUnique = function (nums) {
	let res = [];
	let track = [];
	let used = new Array(nums.length).fill(false);

	// å…ˆæ’åºï¼Œè®©ç›¸åŒçš„å…ƒç´ é åœ¨ä¸€èµ·
	nums.sort((a, b) => a - b);

	const backtrack = () => {
		if (track.length == nums.length) {
			res.push([...track]);
			return;
		}
		for (let i = 0; i < nums.length; i++) {
			// æ–°æ·»åŠ çš„å‰ªæé€»è¾‘ï¼Œå›ºå®šç›¸åŒçš„å…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®
			if (used[i] || (i > 0 && nums[i] == nums[i - 1] && !used[i - 1])) {
				continue;
			}
			track.push(nums[i]);
			used[i] = true;
			backtrack();
			track.pop();
			used[i] = false;
		}
	};

	backtrack();
	return res;
};
```

::::

### å…ƒç´ æ— é‡å¯å¤é€‰ - å­é›† / ç»„åˆ

:::: md-demo ç›¸å…³é¢˜ç›®

#### ğŸ“Œ [39. ç»„åˆæ€»å’Œ - LeetCode](https://leetcode.com/problems/combination-sum/)

#### ğŸ’» **é¢˜ç›®å¤§æ„**

ç»™ä½ ä¸€ä¸ª **æ— é‡å¤å…ƒç´ ** çš„æ•´æ•°æ•°ç»„ `candidates` å’Œä¸€ä¸ªç›®æ ‡æ•´æ•° `target` ï¼Œæ‰¾å‡º `candidates` ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•° `target` çš„ **æ‰€æœ‰** ä¸åŒç»„åˆ ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›è¿™äº›ç»„åˆã€‚

`candidates` ä¸­çš„ **åŒä¸€ä¸ª** æ•°å­—å¯ä»¥ **æ— é™åˆ¶é‡å¤è¢«é€‰å–** ã€‚å¦‚æœè‡³å°‘ä¸€ä¸ªæ•°å­—çš„è¢«é€‰æ•°é‡ä¸åŒï¼Œåˆ™ä¸¤ç§ç»„åˆæ˜¯ä¸åŒçš„ã€‚

æ¯”å¦‚è¾“å…¥ `candidates = [1,2,3], target = 3`ï¼Œç®—æ³•åº”è¯¥è¿”å›ï¼š`[ [1,1,1],[1,2],[3] ]`

#### ğŸ’¡ **è§£é¢˜æ€è·¯**

è¿™é“é¢˜è¯´æ˜¯ç»„åˆé—®é¢˜ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯å­é›†é—®é¢˜ï¼š`candidates` çš„å“ªäº›å­é›†çš„å’Œä¸º `target`ï¼Ÿ

æƒ³è§£å†³è¿™ç§ç±»å‹çš„é—®é¢˜ï¼Œä¹Ÿå¾—å›åˆ°å›æº¯æ ‘ä¸Šã€‚

å…ˆæ€è€ƒï¼Œæ ‡å‡†çš„å­é›†/ç»„åˆé—®é¢˜æ˜¯å¦‚ä½•ä¿è¯ä¸é‡å¤ä½¿ç”¨å…ƒç´ çš„ï¼Ÿç­”æ¡ˆåœ¨äº `backtrack` é€’å½’æ—¶è¾“å…¥çš„å‚æ•° `start`ï¼š

```javascript
const backtrack = (start) => {
	for (let i = start; i < nums.length; i++) {
		// ...

		// é€’å½’éå†ä¸‹ä¸€å±‚å›æº¯æ ‘ï¼Œæ³¨æ„å‚æ•°
		backtrack(i + 1);

		// ...
	}
};
```

è¿™ä¸ª `i` ä» `start` å¼€å§‹ï¼Œé‚£ä¹ˆä¸‹ä¸€å±‚å›æº¯æ ‘å°±æ˜¯ä» `start + 1` å¼€å§‹ï¼Œä»è€Œä¿è¯ `nums[start]` è¿™ä¸ªå…ƒç´ ä¸ä¼šè¢«é‡å¤ä½¿ç”¨ã€‚é‚£ä¹ˆåè¿‡æ¥ï¼Œå¦‚æœæˆ‘æƒ³è®©æ¯ä¸ªå…ƒç´ è¢«é‡å¤ä½¿ç”¨ï¼Œæˆ‘åªè¦æŠŠ `i + 1` æ”¹æˆ `i` å³å¯ï¼š

```javascript
const backtrack = (start) => {
	for (let i = start; i < nums.length; i++) {
		// ...

		// é€’å½’éå†ä¸‹ä¸€å±‚å›æº¯æ ‘ï¼Œæ³¨æ„å‚æ•°
		backtrack(i);

		// ...
	}
};
```

è¿™ç›¸å½“äºç»™ä¹‹å‰çš„å›æº¯æ ‘æ·»åŠ äº†ä¸€æ¡æ ‘æï¼Œåœ¨éå†è¿™æ£µæ ‘çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå…ƒç´ å¯ä»¥è¢«æ— é™æ¬¡ä½¿ç”¨ï¼š

![](../image/3-4-7.png)

å½“ç„¶ï¼Œè¿™æ ·è¿™æ£µå›æº¯æ ‘ä¼šæ°¸è¿œç”Ÿé•¿ä¸‹å»ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„é€’å½’å‡½æ•°éœ€è¦è®¾ç½®åˆé€‚çš„ base case ä»¥ç»“æŸç®—æ³•ï¼Œå³è·¯å¾„å’Œå¤§äº `target` æ—¶å°±æ²¡å¿…è¦å†éå†ä¸‹å»äº†ã€‚

#### ğŸ’ **ä»£ç **

```javascript
/**
 * @param {number[]} candidates
 * @param {number} target
 * @return {number[][]}
 */
var combinationSum = function (candidates, target) {
	const len = candidates.length;
	let res = [];
	let track = [];
	let sum = 0;

	const backtrack = (start) => {
		// æ»¡è¶³æ¡ä»¶
		if (sum == target) {
			res.push([...track]);
			return;
		}
		// å‰ªæ
		if (sum > target) {
			return;
		}
		for (let i = start; i < len; i++) {
			track.push(candidates[i]);
			sum += candidates[i];

			// æ³¨æ„è¿™é‡Œä¼ å…¥çš„å‚æ•°æ˜¯ i è€Œä¸æ˜¯ i + 1ï¼Œè¡¨ç¤ºå¯ä»¥é‡å¤ä½¿ç”¨å½“å‰çš„æ•°å­—
			backtrack(i);

			track.pop();
			sum -= candidates[i];
		}
	};
	backtrack(0);
	return res;
};
```

::::

### å…ƒç´ æ— é‡å¯å¤é€‰ - æ’åˆ—

åŠ›æ‰£ä¸Šæ²¡æœ‰ç±»ä¼¼çš„é¢˜ç›®ï¼Œä¸å¦¨è‡ªå·±ç®—ä¸€ä¸‹ï¼Œ`nums` æ•°ç»„ä¸­çš„å…ƒç´ æ— é‡å¤ä¸”å¯å¤é€‰çš„æƒ…å†µä¸‹ï¼Œæœ‰å“ªäº›æ’åˆ—ï¼Ÿ

æ¯”å¦‚è¾“å…¥ `nums = [1,2,3]`ï¼Œé‚£ä¹ˆè¿™ç§æ¡ä»¶ä¸‹çš„å…¨æ’åˆ—å…±æœ‰ `3^3 = 27` ç§ï¼š

```
[
  [1,1,1],[1,1,2],[1,1,3],[1,2,1],[1,2,2],[1,2,3],[1,3,1],[1,3,2],[1,3,3],
  [2,1,1],[2,1,2],[2,1,3],[2,2,1],[2,2,2],[2,2,3],[2,3,1],[2,3,2],[2,3,3],
  [3,1,1],[3,1,2],[3,1,3],[3,2,1],[3,2,2],[3,2,3],[3,3,1],[3,3,2],[3,3,3]
]
```

æ ‡å‡†çš„å…¨æ’åˆ—ç®—æ³•åˆ©ç”¨ `used` æ•°ç»„è¿›è¡Œå‰ªæï¼Œé¿å…é‡å¤ä½¿ç”¨åŒä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœå…è®¸é‡å¤ä½¿ç”¨å…ƒç´ çš„è¯ï¼Œç›´æ¥æ”¾é£è‡ªæˆ‘ï¼Œå»é™¤æ‰€æœ‰ `used` æ•°ç»„çš„å‰ªæé€»è¾‘å°±è¡Œäº†ã€‚ä»£ç å¦‚ä¸‹ï¼š

```javascript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var permuteRepeat = function (nums) {
	let res = [];
	let track = [];

	const backtrack = () => {
		// base caseï¼Œåˆ°è¾¾å¶å­èŠ‚ç‚¹
		if (track.length === nums.length) {
			res.push([...track]);
			return;
		}

		for (let i = 0; i < nums.length; i++) {
			track.push(nums[i]);
			backtrack();
			track.pop();
		}
	};

	backtrack();
	return res;
};
```

è‡³æ­¤ï¼Œæ’åˆ—ã€ç»„åˆã€å­é›†é—®é¢˜çš„ä¹ç§å˜åŒ–å°±éƒ½è®²å®Œäº†ã€‚

<!-- START TABLE -->
<!-- Please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN `npm run lc` TO UPDATE -->


## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 46 | [å…¨æ’åˆ—](https://leetcode.com/problems/permutations) | [[âœ“]](/problem/0046.md) |  [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 47 | [å…¨æ’åˆ— II](https://leetcode.com/problems/permutations-ii) | [[âœ“]](/problem/0047.md) |  [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 37 | [è§£æ•°ç‹¬](https://leetcode.com/problems/sudoku-solver) | [[âœ“]](/problem/0037.md) |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å›æº¯`](/tag/backtracking.md) `1+` | <font color=#ff334b>Hard</font> |
| 22 | [æ‹¬å·ç”Ÿæˆ](https://leetcode.com/problems/generate-parentheses) | [[âœ“]](/problem/0022.md) |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 17 | [ç”µè¯å·ç çš„å­—æ¯ç»„åˆ](https://leetcode.com/problems/letter-combinations-of-a-phone-number) | [[âœ“]](/problem/0017.md) |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 784 | [å­—æ¯å¤§å°å†™å…¨æ’åˆ—](https://leetcode.com/problems/letter-case-permutation) |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 39 | [ç»„åˆæ€»å’Œ](https://leetcode.com/problems/combination-sum) | [[âœ“]](/problem/0039.md) |  [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 40 | [ç»„åˆæ€»å’Œ II](https://leetcode.com/problems/combination-sum-ii) | [[âœ“]](/problem/0040.md) |  [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 78 | [å­é›†](https://leetcode.com/problems/subsets) | [[âœ“]](/problem/0078.md) |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 90 | [å­é›† II](https://leetcode.com/problems/subsets-ii) | [[âœ“]](/problem/0090.md) |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 473 | [ç«æŸ´æ‹¼æ­£æ–¹å½¢](https://leetcode.com/problems/matchsticks-to-square) |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) `2+` | <font color=#ffb800>Medium</font> |
| 1593 | [æ‹†åˆ†å­—ç¬¦ä¸²ä½¿å”¯ä¸€å­å­—ç¬¦ä¸²çš„æ•°ç›®æœ€å¤§](https://leetcode.com/problems/split-a-string-into-the-max-number-of-unique-substrings) | [[âœ“]](/problem/1593.md) |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 1079 | [æ´»å­—å°åˆ·](https://leetcode.com/problems/letter-tile-possibilities) |  |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md) `1+` | <font color=#ffb800>Medium</font> |
| 93 | [å¤åŸ IP åœ°å€](https://leetcode.com/problems/restore-ip-addresses) | [[âœ“]](/problem/0093.md) |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 79 | [å•è¯æœç´¢](https://leetcode.com/problems/word-search) | [[âœ“]](/problem/0079.md) |  [`æ•°ç»„`](/tag/array.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md) `1+` | <font color=#ffb800>Medium</font> |
| 679 | [24 ç‚¹æ¸¸æˆ](https://leetcode.com/problems/24-game) |  |  [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ff334b>Hard</font> |

