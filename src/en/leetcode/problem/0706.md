# [706. Design HashMap](https://leetcode.com/problems/design-hashmap/)

ðŸŸ¢ <font color=#15bd66>Esay</font>&emsp; ðŸ”–&ensp; [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`é“¾è¡¨`](/leetcode/outline/tag/linked-list.md) [`å“ˆå¸Œå‡½æ•°`](/leetcode/outline/tag/hash-function.md)&emsp; ðŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/design-hashmap/)

## é¢˜ç›®

Design a HashMap without using any built-in hash table libraries.

Implement the `MyHashMap` class:

- `MyHashMap()` initializes the object with an empty map.
- `void put(int key, int value)` inserts a `(key, value)` pair into the HashMap. If the `key` already exists in the map, update the corresponding `value`.
- `int get(int key)` returns the `value` to which the specified `key` is mapped, or `-1` if this map contains no mapping for the `key`.
- `void remove(key)` removes the `key` and its corresponding `value` if the map contains the mapping for the `key`.

**Example**:

```javascript
MyHashMap myHashMap = new MyHashMap();
myHashMap.put(1, 1); // The map is now [[1,1]]
myHashMap.put(2, 2); // The map is now [[1,1], [2,2]]
myHashMap.get(1);    // return 1, The map is now [[1,1], [2,2]]
myHashMap.get(3);    // return -1 (i.e., not found), The map is now [[1,1], [2,2]]
myHashMap.put(2, 1); // The map is now [[1,1], [2,1]] (i.e., update the existing value)
myHashMap.get(2);    // return 1, The map is now [[1,1], [2,1]]
myHashMap.remove(2); // remove the mapping for 2, The map is now [[1,1]]
myHashMap.get(2);    // return -1 (i.e., not found), The map is now [[1,1]]
```

**Note**:

- `0 <= key, value <= 10^6`
- At most `10^4` calls will be made to `put`, `get`, and `remove`.
- Please do not use the built-in HashMap library.

## é¢˜ç›®å¤§æ„

ä¸ä½¿ç”¨ä»»ä½•å†…å»ºçš„å“ˆå¸Œè¡¨åº“è®¾è®¡ä¸€ä¸ªå“ˆå¸Œæ˜ å°„ï¼ˆHashMapï¼‰ã€‚

å®žçŽ° `MyHashMap` ç±»ï¼š

- `MyHashMap()` ç”¨ç©ºæ˜ å°„åˆå§‹åŒ–å¯¹è±¡
- `void put(int key, int value)` å‘ `HashMap` æ’å…¥ä¸€ä¸ªé”®å€¼å¯¹ `(key, value)` ã€‚å¦‚æžœ `key` å·²ç»å­˜åœ¨äºŽæ˜ å°„ä¸­ï¼Œåˆ™æ›´æ–°å…¶å¯¹åº”çš„å€¼ `value` ã€‚
- `int get(int key)` è¿”å›žç‰¹å®šçš„ `key` æ‰€æ˜ å°„çš„ `value` ï¼›å¦‚æžœæ˜ å°„ä¸­ä¸åŒ…å« `key` çš„æ˜ å°„ï¼Œè¿”å›ž `-1` ã€‚
- `void remove(key)` å¦‚æžœæ˜ å°„ä¸­å­˜åœ¨ `key` çš„æ˜ å°„ï¼Œåˆ™ç§»é™¤ `key` å’Œå®ƒæ‰€å¯¹åº”çš„ `value` ã€‚

## è§£é¢˜æ€è·¯

æœ¬é¢˜ä¸Ž [ç¬¬ 705 é¢˜](./0705.md) è§£æ³•æŽ¥è¿‘ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºŽå­˜å‚¨çš„ä¸æ˜¯ `key` æœ¬èº«ï¼Œè€Œæ˜¯ `(key,value)` å¯¹ï¼Œå…¶ä»–ä»£ç éƒ½ä¸€æ ·ã€‚

é“¾åœ°å€æ³•ï¼š

- è®¾å“ˆå¸Œè¡¨çš„å¤§å°ä¸º `base`ï¼Œåˆ™å¯ä»¥è®¾è®¡ä¸€ä¸ªç®€å•çš„å“ˆå¸Œå‡½æ•°ï¼š`hash(x) = xâ€Šmodâ€Šbase`ï¼›
- å¼€è¾Ÿä¸€ä¸ªå¤§å°ä¸º `base` çš„æ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸ªä½ç½®æ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚å½“è®¡ç®—å‡ºå“ˆå¸Œå€¼ä¹‹åŽï¼Œå°±æ’å…¥åˆ°å¯¹åº”ä½ç½®çš„é“¾è¡¨å½“ä¸­ï¼›
- ç”±äºŽä½¿ç”¨æ•´æ•°é™¤æ³•ä½œä¸ºå“ˆå¸Œå‡½æ•°ï¼Œä¸ºäº†å°½å¯èƒ½é¿å…å†²çªï¼Œåº”å½“å°† `base` å–ä¸ºä¸€ä¸ªè´¨æ•°ï¼Œå¦‚ `base = 769`ï¼›

![](../../../../assets/image/705.png)

- æ—¶é—´å¤æ‚åº¦ï¼š`O(n / b)`ã€‚å…¶ä¸­ `n` ä¸ºå“ˆå¸Œè¡¨ä¸­çš„å…ƒç´ æ•°é‡ï¼Œ`b` ä¸ºé“¾è¡¨çš„æ•°é‡ï¼Œå‡è®¾å“ˆå¸Œå€¼æ˜¯å‡åŒ€åˆ†å¸ƒçš„ï¼Œåˆ™æ¯ä¸ªé“¾è¡¨å¤§æ¦‚é•¿åº¦ä¸º `n / b`ï¼›
- ç©ºé—´å¤æ‚åº¦ï¼š`O(n+b)`ã€‚

## ä»£ç 

```javascript
class MyHashMap {
  constructor() {
    this.base = 769;
    this.data = new Array(this.base).fill(0).map(() => new Array());
  }

  // @param {number} key
  // @return {number}
  hash(key) {
    return key % this.base;
  }

  // @param {number} key
  // @param {number} value
  // @return {void}
  put(key, value) {
    const h = this.hash(key);
    for (let item of this.data[h]) {
      if (item[0] === key) {
        item[1] = value;
        return;
      }
    }
    this.data[h].push([key, value]);
  }

  // @param {number} key
  // @return {number}
  get(key) {
    const h = this.hash(key);
    for (let item of this.data[h]) {
      if (item[0] === key) return item[1];
    }
    return -1;
  }

  // @param {number} key
  // @return {void}
  remove(key) {
    const h = this.hash(key);
    const hList = this.data[h];
    for (let i = 0; i < hList.length; i++) {
      if (hList[i][0] === key) {
        hList.splice(i, 1);
        return;
      }
    }
  }
}
/**
 * Your MyHashMap object will be instantiated and called as such:
 * var obj = new MyHashMap()
 * obj.put(key,value)
 * var param_2 = obj.get(key)
 * obj.remove(key)
 */
```
