---
title: 229. å¤šæ•°å…ƒç´  II
description: LeetCode 229. å¤šæ•°å…ƒç´  IIé¢˜è§£ï¼ŒMajority Element IIï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 229. å¤šæ•°å…ƒç´  II
  - å¤šæ•°å…ƒç´  II
  - Majority Element II
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
  - è®¡æ•°
  - æ’åº
---

# 229. å¤šæ•°å…ƒç´  II

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`è®¡æ•°`](/tag/counting.md) [`æ’åº`](/tag/sorting.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/majority-element-ii) [`LeetCode`](https://leetcode.com/problems/majority-element-ii)

## é¢˜ç›®

Given an integer array of size `n`, find all elements that appear more than `âŒŠn/3âŒ‹` times.

**Example 1:**

> Input: nums = [3,2,3]
>
> Output: [3]

**Example 2:**

> Input: nums = [1]
>
> Output: [1]

**Example 3:**

> Input: nums = [1,2]
>
> Output: [1,2]

**Constraints:**

- `1 <= nums.length <= 5 * 10^4`
- `-10^9 <= nums[i] <= 10^9`

**Follow up:** Could you solve the problem in linear time and in `O(1)` space?

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªå¤§å°ä¸º _n_ çš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾å‡ºå…¶ä¸­æ‰€æœ‰å‡ºç°è¶…è¿‡ `âŒŠ n/3 âŒ‹` æ¬¡çš„å…ƒç´ ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** nums = [3,2,3]
>
> **è¾“å‡ºï¼š**[3]

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** nums = [1]
>
> **è¾“å‡ºï¼š**[1]

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** nums = [1,2]
>
> **è¾“å‡ºï¼š**[1,2]

**æç¤ºï¼š**

- `1 <= nums.length <= 5 * 10^4`
- `-10^9 <= nums[i] <= 10^9`

**è¿›é˜¶ï¼š** å°è¯•è®¾è®¡æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€ç©ºé—´å¤æ‚åº¦ä¸º `O(1)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

## è§£é¢˜æ€è·¯

ç”±äºå‡ºç°æ¬¡æ•°å¤§äº `n/3` æ¬¡çš„å…ƒç´ æœ€å¤šåªæœ‰ä¸¤ä¸ªï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨æ‘©å°”æŠ•ç¥¨æ³•å°†é—®é¢˜ç®€åŒ–ä¸ºå¯»æ‰¾æœ€å¤šä¸¤ä¸ªå€™é€‰äººã€‚

- **ç¬¬ä¸€è½®**ï¼šæ‰¾åˆ°å¯èƒ½çš„å€™é€‰å…ƒç´ ã€‚
  **æ ¸å¿ƒé€»è¾‘**ï¼šå¯¹äºå‡ºç°æ¬¡æ•°è¶…è¿‡ `n/3` çš„å…ƒç´ ï¼Œå…¶åœ¨æ•°ç»„ä¸­çš„é¢‘æ¬¡ä¸€å®šæ¯”å…¶ä»–å…ƒç´ æ›´é«˜ã€‚å½“é‡åˆ°ä¸å±äºç°æœ‰å€™é€‰äººçš„æ•°å­—æ—¶ï¼Œå‡å°‘å€™é€‰äººçš„è®¡æ•°ï¼Œæœ€ç»ˆå‰©ä¸‹çš„å€™é€‰äººæ˜¯å¯èƒ½è¶…è¿‡ `n/3` æ¬¡çš„å…ƒç´ ã€‚

1. ä½¿ç”¨ä¸¤ä¸ªå˜é‡ `candidate1` å’Œ `candidate2` åˆ†åˆ«è®°å½•ä¸¤ä¸ªå¯èƒ½çš„å€™é€‰äººã€‚
2. ä½¿ç”¨ä¸¤ä¸ªè®¡æ•°å™¨ `count1` å’Œ `count2` åˆ†åˆ«è®°å½•è¿™ä¸¤ä¸ªå€™é€‰äººçš„ç¥¨æ•°ã€‚
3. éå†æ•°ç»„ï¼š
   - å¦‚æœå½“å‰æ•°å­—ç­‰äº `candidate1`ï¼Œå¢åŠ  `count1`ã€‚
   - å¦‚æœå½“å‰æ•°å­—ç­‰äº `candidate2`ï¼Œå¢åŠ  `count2`ã€‚
   - å¦‚æœ `count1` ä¸º 0ï¼Œè®¾ç½®å½“å‰æ•°å­—ä¸º `candidate1`ï¼Œå¹¶å°† `count1` ç½®ä¸º 1ã€‚
   - å¦‚æœ `count2` ä¸º 0ï¼Œè®¾ç½®å½“å‰æ•°å­—ä¸º `candidate2`ï¼Œå¹¶å°† `count2` ç½®ä¸º 1ã€‚
   - å¦‚æœå½“å‰æ•°å­—ä¸ `candidate1` å’Œ `candidate2` éƒ½ä¸ç›¸åŒï¼Œåˆ™ `count1` å’Œ `count2` åŒæ—¶å‡ 1ã€‚

- **ç¬¬äºŒè½®**ï¼šéªŒè¯å€™é€‰å…ƒç´ æ˜¯å¦æ»¡è¶³æ¡ä»¶ã€‚

1. åˆå§‹åŒ–ä¸¤ä¸ªè®¡æ•°å™¨ `count1` å’Œ `count2` ä¸º 0ã€‚
2. éå†æ•°ç»„ï¼š
   - å¦‚æœå½“å‰æ•°å­—ç­‰äº `candidate1`ï¼Œå¢åŠ  `count1`ã€‚
   - å¦‚æœå½“å‰æ•°å­—ç­‰äº `candidate2`ï¼Œå¢åŠ  `count2`ã€‚
3. æ£€æŸ¥ `count1` å’Œ `count2` æ˜¯å¦è¶…è¿‡ `n/3`ï¼š

   - å¦‚æœ `count1 > n/3`ï¼Œå°† `candidate1` åŠ å…¥ç»“æœã€‚
   - å¦‚æœ `count2 > n/3`ï¼Œå°† `candidate2` åŠ å…¥ç»“æœã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œä¸¤æ¬¡éå†æ•°ç»„ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä½¿ç”¨äº†å¸¸æ•°ä¸ªå˜é‡ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @return {number[]}
 */
var majorityElement = function (nums) {
	const n = nums.length;
	let candidate1 = null,
		candidate2 = null;
	let count1 = 0,
		count2 = 0;

	// ç¬¬ä¸€éï¼šæ‘©å°”æŠ•ç¥¨æ³•ï¼Œæ‰¾å‡ºä¸¤ä¸ªå€™é€‰è€…
	for (let num of nums) {
		if (candidate1 === num) {
			count1++;
		} else if (candidate2 === num) {
			count2++;
		} else if (count1 === 0) {
			candidate1 = num;
			count1 = 1;
		} else if (count2 === 0) {
			candidate2 = num;
			count2 = 1;
		} else {
			count1--;
			count2--;
		}
	}

	// ç¬¬äºŒéï¼šéªŒè¯å€™é€‰è€…
	count1 = 0;
	count2 = 0;
	for (let num of nums) {
		if (num === candidate1) count1++;
		else if (num === candidate2) count2++;
	}

	const result = [];
	if (count1 > Math.floor(n / 3)) result.push(candidate1);
	if (count2 > Math.floor(n / 3)) result.push(candidate2);

	return result;
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 169 | å¤šæ•°å…ƒç´  | [[âœ“]](/problem/0169.md) |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`åˆ†æ²»`](/tag/divide-and-conquer.md) `2+` | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/majority-element) [ğŸ”—](https://leetcode.com/problems/majority-element) |
| 1150 | æ£€æŸ¥ä¸€ä¸ªæ•°æ˜¯å¦åœ¨æ•°ç»„ä¸­å ç»å¤§å¤šæ•° ğŸ”’ |  |  [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/check-if-a-number-is-majority-element-in-a-sorted-array) [ğŸ”—](https://leetcode.com/problems/check-if-a-number-is-majority-element-in-a-sorted-array) |
| 2404 | å‡ºç°æœ€é¢‘ç¹çš„å¶æ•°å…ƒç´  |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`è®¡æ•°`](/tag/counting.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/most-frequent-even-element) [ğŸ”—](https://leetcode.com/problems/most-frequent-even-element) |