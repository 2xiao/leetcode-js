---
title: 2965. æ‰¾å‡ºç¼ºå¤±å’Œé‡å¤çš„æ•°å­—
description: LeetCode 2965. æ‰¾å‡ºç¼ºå¤±å’Œé‡å¤çš„æ•°å­—é¢˜è§£ï¼ŒFind Missing and Repeated Valuesï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2965. æ‰¾å‡ºç¼ºå¤±å’Œé‡å¤çš„æ•°å­—
  - æ‰¾å‡ºç¼ºå¤±å’Œé‡å¤çš„æ•°å­—
  - Find Missing and Repeated Values
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
  - æ•°å­¦
  - çŸ©é˜µ
---

# 2965. æ‰¾å‡ºç¼ºå¤±å’Œé‡å¤çš„æ•°å­—

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ•°å­¦`](/tag/math.md) [`çŸ©é˜µ`](/tag/matrix.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/find-missing-and-repeated-values) [`LeetCode`](https://leetcode.com/problems/find-missing-and-repeated-values)

## é¢˜ç›®

You are given a **0-indexed** 2D integer matrix `grid` of size `n * n` with
values in the range `[1, n2]`. Each integer appears **exactly once** except
`a` which appears **twice** and `b` which is **missing**. The task is to find
the repeating and missing numbers `a` and `b`.

Return _a **0-indexed** integer array _`ans` _of size_`2`
_where_`ans[0]`_equals to_`a` _and_`ans[1]`_equals to_`b` _._

**Example 1:**

> Input: grid = [[1,3],[2,2]]
>
> Output: [2,4]
>
> Explanation: Number 2 is repeated and number 4 is missing so the answer is [2,4].

**Example 2:**

> Input: grid = [[9,1,7],[8,9,2],[3,4,6]]
>
> Output: [9,5]
>
> Explanation: Number 9 is repeated and number 5 is missing so the answer is [9,5].

**Constraints:**

- `2 <= n == grid.length == grid[i].length <= 50`
- `1 <= grid[i][j] <= n * n`
- For all `x` that `1 <= x <= n * n` there is exactly one `x` that is not equal to any of the grid members.
- For all `x` that `1 <= x <= n * n` there is exactly one `x` that is equal to exactly two of the grid members.
- For all `x` that `1 <= x <= n * n` except two of them there is exatly one pair of `i, j` that `0 <= i, j <= n - 1` and `grid[i][j] == x`.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä»**0** å¼€å§‹çš„äºŒç»´æ•´æ•°çŸ©é˜µ `grid`ï¼Œå¤§å°ä¸º `n * n` ï¼Œå…¶ä¸­çš„å€¼åœ¨ `[1, n2]` èŒƒå›´å†…ã€‚é™¤äº† `a` å‡ºç°
**ä¸¤æ¬¡** ï¼Œ`b` **ç¼ºå¤±** ä¹‹å¤–ï¼Œæ¯ä¸ªæ•´æ•°éƒ½**æ°å¥½å‡ºç°ä¸€æ¬¡** ã€‚

ä»»åŠ¡æ˜¯æ‰¾å‡ºé‡å¤çš„æ•°å­—`a` å’Œç¼ºå¤±çš„æ•°å­— `b` ã€‚

è¿”å›ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹ã€é•¿åº¦ä¸º `2` çš„æ•´æ•°æ•°ç»„ `ans` ï¼Œå…¶ä¸­ `ans[0]` ç­‰äº `a` ï¼Œ`ans[1]` ç­‰äº `b` ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** grid = [[1,3],[2,2]]
>
> **è¾“å‡ºï¼š**[2,4]
>
> **è§£é‡Šï¼š** æ•°å­— 2 é‡å¤ï¼Œæ•°å­— 4 ç¼ºå¤±ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ [2,4] ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** grid = [[9,1,7],[8,9,2],[3,4,6]]
>
> **è¾“å‡ºï¼š**[9,5]
>
> **è§£é‡Šï¼š** æ•°å­— 9 é‡å¤ï¼Œæ•°å­— 5 ç¼ºå¤±ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ [9,5] ã€‚

**æç¤ºï¼š**

- `2 <= n == grid.length == grid[i].length <= 50`
- `1 <= grid[i][j] <= n * n`
- å¯¹äºæ‰€æœ‰æ»¡è¶³`1 <= x <= n * n` çš„ `x` ï¼Œæ°å¥½å­˜åœ¨ä¸€ä¸ª `x` ä¸çŸ©é˜µä¸­çš„ä»»ä½•æˆå‘˜éƒ½ä¸ç›¸ç­‰ã€‚
- å¯¹äºæ‰€æœ‰æ»¡è¶³`1 <= x <= n * n` çš„ `x` ï¼Œæ°å¥½å­˜åœ¨ä¸€ä¸ª `x` ä¸çŸ©é˜µä¸­çš„ä¸¤ä¸ªæˆå‘˜ç›¸ç­‰ã€‚
- é™¤ä¸Šè¿°çš„ä¸¤ä¸ªä¹‹å¤–ï¼Œå¯¹äºæ‰€æœ‰æ»¡è¶³`1 <= x <= n * n` çš„ `x` ï¼Œéƒ½æ°å¥½å­˜åœ¨ä¸€å¯¹ `i, j` æ»¡è¶³ `0 <= i, j <= n - 1` ä¸” `grid[i][j] == x` ã€‚

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šæ•°å­¦æ³•

è®¾ï¼š**ç¼ºå¤±çš„æ•° `y`**ï¼Œ**é‡å¤çš„æ•° `x`**ï¼Œå¯ä»¥åˆ—å‡º **ä¸¤æ¡æ•°å­¦å…¬å¼**ï¼š

1. **å’Œçš„å…¬å¼**ï¼š

   - è®° `expectSum` ä¸º `[1, 2, ..., n^2]` çš„æ€»å’Œï¼Œ`actualSum` ä¸º `grid` ä¸­æ‰€æœ‰æ•°çš„å’Œï¼š
   - `y - x = expectSum - actualSum`
   - è®°ä¸ºï¼š`diffSum`ã€‚

2. **å¹³æ–¹å’Œçš„å…¬å¼**ï¼š

   - è®° `expectSquareSum` ä¸º `[1, 2, ..., n^2]` çš„å¹³æ–¹å’Œï¼Œ`actualSquareSum` ä¸º `grid` ä¸­æ‰€æœ‰æ•°çš„å¹³æ–¹å’Œï¼š
   - `y^2 - x^2 = expectSquareSum - actualSquareSum`
   - è®°ä¸ºï¼š`diffSquareSum`ã€‚

3. **è§£å‡º `y` å’Œ `x`**

   - `y^2 - x^2` å¯è½¬æ¢ä¸ºï¼š`(y-x)(y+x)`
   - ä»£å…¥ `y - x`ï¼Œå¯å¾—ï¼š`y + x = diffSquareSum / diffSum`
   - è”ç«‹ä¸¤ä¸ªç­‰å¼ï¼š
     - `y = (diffSquareSum / diffSum + diffSum) / 2`
     - `x = (diffSquareSum / diffSum - diffSum) / 2`

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n^2)`

  - è®¡ç®— `expectSquareSum` éœ€è¦ `O(n^2)`
  - éå† `grid` è®¡ç®— `actualSum` å’Œ `actualSquareSum` éœ€è¦ `O(n^2)`
  - è®¡ç®— `x` å’Œ `y` ä»…éœ€ `O(1)`

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä»…ä½¿ç”¨å¸¸æ•°çº§å˜é‡å­˜å‚¨ `expectSum`, `actualSum`ï¼Œæ‰€ä»¥æ˜¯ `O(1)`

---

### æ€è·¯äºŒï¼šæ•°ç»„æ ‡è®°æ³•

**1. ä½¿ç”¨æ•°ç»„ `exists` æ ‡è®°å‡ºç°çš„æ•°å­—**

- åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º `n^2` çš„å¸ƒå°”æ•°ç»„ `exists`ï¼Œç”¨äºæ ‡è®°æ¯ä¸ªæ•°æ˜¯å¦å‡ºç°è¿‡ã€‚
- éå† `grid`ï¼š
  - å¦‚æœå½“å‰æ•° `num` å·²ç»åœ¨ `exists` æ•°ç»„ä¸­è¢«æ ‡è®°ï¼Œåˆ™è¯´æ˜ **å®ƒæ˜¯é‡å¤çš„æ•° `x`**ã€‚
  - å¦åˆ™ï¼Œæ ‡è®° `exists[num - 1] = true`ã€‚

**2. æ‰¾åˆ° `exists` ä¸­ `false` çš„ç´¢å¼•**

- å†æ¬¡éå† `exists`ï¼Œæ‰¾åˆ° **ç¬¬ä¸€ä¸ª `false` çš„ä½ç½® `i`**ï¼Œè¯´æ˜ **`i+1` æ˜¯ç¼ºå¤±çš„æ•° `y`**ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n^2)`

  - éå† `grid` éœ€è¦ `O(n^2)`
  - éå† `exists` æ•°ç»„éœ€è¦ `O(n^2)`
  - æ€»ä½“ `O(n^2)`

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n^2)`ï¼Œé¢å¤–ä½¿ç”¨äº† `exists` æ•°ç»„ï¼Œå¤§å° `O(n^2)`

## ä»£ç 

::: code-tabs
@tab æ•°å­¦æ³•

```js
/**
 * @param {number[][]} grid
 * @return {number[]}
 */
var findMissingAndRepeatedValues = function (grid) {
	const n = grid.length;
	const expectSum = ((1 + n * n) * n * n) / 2; // æœŸæœ›çš„æ€»å’Œ
	let expectSquareSum = 0; // æœŸæœ›çš„å¹³æ–¹å’Œ

	for (let i = 1; i <= n * n; i++) {
		expectSquareSum += i * i;
	}

	let actualSum = 0,
		actualSquareSum = 0;

	for (let row of grid) {
		for (let num of row) {
			actualSum += num;
			actualSquareSum += num * num;
		}
	}

	const diffSum = expectSum - actualSum; // y - x
	const diffSquareSum = expectSquareSum - actualSquareSum; // y^2 - x^2

	const missing = (diffSquareSum / diffSum + diffSum) / 2;
	const repeated = (diffSquareSum / diffSum - diffSum) / 2;

	return [repeated, missing];
};
```

@tab æ•°ç»„æ ‡è®°æ³•

```javascript
/**
 * @param {number[][]} grid
 * @return {number[]}
 */
var findMissingAndRepeatedValues = function (grid) {
	const n = grid.length;
	let repeated, missing;
	let exists = new Array(n * n).fill(false);

	// 1. æ‰¾åˆ°é‡å¤çš„æ•°å­—ï¼Œå¹¶æ ‡è®°å‡ºç°çš„æ•°å­—
	for (let row of grid) {
		for (let num of row) {
			if (exists[num - 1] == true) {
				repeated = num;
			}
			exists[num - 1] = true;
		}
	}

	// 2. æ‰¾åˆ°ç¼ºå¤±çš„æ•°å­—
	for (let i = 0; i < n * n; i++) {
		if (exists[i] == false) {
			missing = i + 1;
			break;
		}
	}

	return [repeated, missing];
};
```

:::
