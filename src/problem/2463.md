# [2463. æœ€å°ç§»åŠ¨æ€»è·ç¦»](https://2xiao.github.io/leetcode-js/problem/2463.html)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`æ’åº`](/tag/sorting.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/minimum-total-distance-traveled) [`LeetCode`](https://leetcode.com/problems/minimum-total-distance-traveled)

## é¢˜ç›®

There are some robots and factories on the X-axis. You are given an integer
array `robot` where `robot[i]` is the position of the `ith` robot. You are
also given a 2D integer array `factory` where `factory[j] = [positionj,
limitj]` indicates that `positionj` is the position of the `jth` factory and
that the `jth` factory can repair at most `limitj` robots.

The positions of each robot are **unique**. The positions of each factory are
also **unique**. Note that a robot can be **in the same position** as a
factory initially.

All the robots are initially broken; they keep moving in one direction. The
direction could be the negative or the positive direction of the X-axis. When
a robot reaches a factory that did not reach its limit, the factory repairs
the robot, and it stops moving.

**At any moment** , you can set the initial direction of moving for **some**
robot. Your target is to minimize the total distance traveled by all the
robots.

Return _the minimum total distance traveled by all the robots_. The test cases
are generated such that all the robots can be repaired.

**Note that**

- All robots move at the same speed.
- If two robots move in the same direction, they will never collide.
- If two robots move in opposite directions and they meet at some point, they do not collide. They cross each other.
- If a robot passes by a factory that reached its limits, it crosses it as if it does not exist.
- If the robot moved from a position `x` to a position `y`, the distance it moved is `|y - x|`.

**Example 1:**

![](https://assets.leetcode.com/uploads/2022/09/15/example1.jpg)

> Input: robot = [0,4,6], factory = [[2,2],[6,2]]
>
> Output: 4
>
> Explanation: As shown in the figure:
>
> - The first robot at position 0 moves in the positive direction. It will be repaired at the first factory.
> - The second robot at position 4 moves in the negative direction. It will be repaired at the first factory.
> - The third robot at position 6 will be repaired at the second factory. It does not need to move.
>
> The limit of the first factory is 2, and it fixed 2 robots.
>
> The limit of the second factory is 2, and it fixed 1 robot.
>
> The total distance is |2 - 0| + |2 - 4| + |6 - 6| = 4. It can be shown that we cannot achieve a better total distance than 4.

**Example 2:**

![](https://assets.leetcode.com/uploads/2022/09/15/example-2.jpg)

> Input: robot = [1,-1], factory = [[-2,1],[2,1]]
>
> Output: 2
>
> Explanation: As shown in the figure:
>
> - The first robot at position 1 moves in the positive direction. It will be repaired at the second factory.
> - The second robot at position -1 moves in the negative direction. It will be repaired at the first factory.
>
> The limit of the first factory is 1, and it fixed 1 robot.
>
> The limit of the second factory is 1, and it fixed 1 robot.
>
> The total distance is |2 - 1| + |(-2) - (-1)| = 2. It can be shown that we cannot achieve a better total distance than 2.

**Constraints:**

- `1 <= robot.length, factory.length <= 100`
- `factory[j].length == 2`
- `-10^9 <= robot[i], positionj <= 10^9`
- `0 <= limitj <= robot.length`
- The input will be generated such that it is always possible to repair every robot.

## é¢˜ç›®å¤§æ„

X è½´ä¸Šæœ‰ä¸€äº›æœºå™¨äººå’Œå·¥å‚ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `robot` ï¼Œå…¶ä¸­ `robot[i]` æ˜¯ç¬¬ `i` ä¸ªæœºå™¨äººçš„ä½ç½®ã€‚å†ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„
`factory` ï¼Œå…¶ä¸­ `factory[j] = [positionj, limitj]` ï¼Œè¡¨ç¤ºç¬¬ `j` ä¸ªå·¥å‚çš„ä½ç½®åœ¨ `positionj`
ï¼Œä¸”ç¬¬ `j` ä¸ªå·¥å‚æœ€å¤šå¯ä»¥ä¿®ç† `limitj` ä¸ªæœºå™¨äººã€‚

æ¯ä¸ªæœºå™¨äººæ‰€åœ¨çš„ä½ç½® **äº’ä¸ç›¸åŒ** ã€‚æ¯ä¸ªå·¥å‚æ‰€åœ¨çš„ä½ç½®ä¹Ÿ **äº’ä¸ç›¸åŒ** ã€‚æ³¨æ„ä¸€ä¸ªæœºå™¨äººå¯èƒ½ä¸€å¼€å§‹è·Ÿä¸€ä¸ªå·¥å‚åœ¨ **ç›¸åŒçš„ä½ç½®** ã€‚

æ‰€æœ‰æœºå™¨äººä¸€å¼€å§‹éƒ½æ˜¯åçš„ï¼Œä»–ä»¬ä¼šæ²¿ç€è®¾å®šçš„æ–¹å‘ä¸€ç›´ç§»åŠ¨ã€‚è®¾å®šçš„æ–¹å‘è¦ä¹ˆæ˜¯ X è½´çš„æ­£æ–¹å‘ï¼Œè¦ä¹ˆæ˜¯ X
è½´çš„è´Ÿæ–¹å‘ã€‚å½“ä¸€ä¸ªæœºå™¨äººç»è¿‡ä¸€ä¸ªæ²¡è¾¾åˆ°ä¸Šé™çš„å·¥å‚æ—¶ï¼Œè¿™ä¸ªå·¥å‚ä¼šç»´ä¿®è¿™ä¸ªæœºå™¨äººï¼Œä¸”æœºå™¨äººåœæ­¢ç§»åŠ¨ã€‚

**ä»»ä½•æ—¶åˆ»** ï¼Œä½ éƒ½å¯ä»¥è®¾ç½® **éƒ¨åˆ†** æœºå™¨äººçš„ç§»åŠ¨æ–¹å‘ã€‚ä½ çš„ç›®æ ‡æ˜¯æœ€å°åŒ–æ‰€æœ‰æœºå™¨äººæ€»çš„ç§»åŠ¨è·ç¦»ã€‚

è¯·ä½ è¿”å›æ‰€æœ‰æœºå™¨äººç§»åŠ¨çš„æœ€å°æ€»è·ç¦»ã€‚æµ‹è¯•æ•°æ®ä¿è¯æ‰€æœ‰æœºå™¨äººéƒ½å¯ä»¥è¢«ç»´ä¿®ã€‚

**æ³¨æ„ï¼š**

- æ‰€æœ‰æœºå™¨äººç§»åŠ¨é€Ÿåº¦ç›¸åŒã€‚
- å¦‚æœä¸¤ä¸ªæœºå™¨äººç§»åŠ¨æ–¹å‘ç›¸åŒï¼Œå®ƒä»¬æ°¸è¿œä¸ä¼šç¢°æ’ã€‚
- å¦‚æœä¸¤ä¸ªæœºå™¨äººè¿é¢ç›¸é‡ï¼Œå®ƒä»¬ä¹Ÿä¸ä¼šç¢°æ’ï¼Œå®ƒä»¬å½¼æ­¤ä¹‹é—´ä¼šæ“¦è‚©è€Œè¿‡ã€‚
- å¦‚æœä¸€ä¸ªæœºå™¨äººç»è¿‡äº†ä¸€ä¸ªå·²ç»è¾¾åˆ°ä¸Šé™çš„å·¥å‚ï¼Œæœºå™¨äººä¼šå½“ä½œå·¥å‚ä¸å­˜åœ¨ï¼Œç»§ç»­ç§»åŠ¨ã€‚
- æœºå™¨äººä»ä½ç½® `x` åˆ°ä½ç½® `y` çš„ç§»åŠ¨è·ç¦»ä¸º `|y - x|` ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://pic.leetcode-cn.com/1667542978-utuiPv-image.png)

> **è¾“å…¥ï¼š** robot = [0,4,6], factory = [[2,2],[6,2]]
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š
>
> - ç¬¬ä¸€ä¸ªæœºå™¨äººä»ä½ç½® 0 æ²¿ç€æ­£æ–¹å‘ç§»åŠ¨ï¼Œåœ¨ç¬¬ä¸€ä¸ªå·¥å‚å¤„ç»´ä¿®ã€‚
> - ç¬¬äºŒä¸ªæœºå™¨äººä»ä½ç½® 4 æ²¿ç€è´Ÿæ–¹å‘ç§»åŠ¨ï¼Œåœ¨ç¬¬ä¸€ä¸ªå·¥å‚å¤„ç»´ä¿®ã€‚
> - ç¬¬ä¸‰ä¸ªæœºå™¨äººåœ¨ä½ç½® 6 è¢«ç¬¬äºŒä¸ªå·¥å‚ç»´ä¿®ï¼Œå®ƒä¸éœ€è¦ç§»åŠ¨ã€‚
>
> ç¬¬ä¸€ä¸ªå·¥å‚çš„ç»´ä¿®ä¸Šé™æ˜¯ 2 ï¼Œå®ƒç»´ä¿®äº† 2 ä¸ªæœºå™¨äººã€‚
>
> ç¬¬äºŒä¸ªå·¥å‚çš„ç»´ä¿®ä¸Šé™æ˜¯ 2 ï¼Œå®ƒç»´ä¿®äº† 1 ä¸ªæœºå™¨äººã€‚
>
> æ€»ç§»åŠ¨è·ç¦»æ˜¯ |2 - 0| + |2 - 4| + |6 - 6| = 4 ã€‚æ²¡æœ‰åŠæ³•å¾—åˆ°æ¯” 4 æ›´å°‘çš„æ€»ç§»åŠ¨è·ç¦»ã€‚

**ç¤ºä¾‹ 2ï¼š**

![](https://pic.leetcode-cn.com/1667542984-OAIRFN-image.png)

> **è¾“å…¥ï¼š** robot = [1,-1], factory = [[-2,1],[2,1]]
>
> **è¾“å‡ºï¼š** 2
>
> **è§£é‡Šï¼š** å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š
>
> - ç¬¬ä¸€ä¸ªæœºå™¨äººä»ä½ç½® 1 æ²¿ç€æ­£æ–¹å‘ç§»åŠ¨ï¼Œåœ¨ç¬¬äºŒä¸ªå·¥å‚å¤„ç»´ä¿®ã€‚
> - ç¬¬äºŒä¸ªæœºå™¨äººåœ¨ä½ç½® -1 æ²¿ç€è´Ÿæ–¹å‘ç§»åŠ¨ï¼Œåœ¨ç¬¬ä¸€ä¸ªå·¥å‚å¤„ç»´ä¿®ã€‚
>
> ç¬¬ä¸€ä¸ªå·¥å‚çš„ç»´ä¿®ä¸Šé™æ˜¯ 1 ï¼Œå®ƒç»´ä¿®äº† 1 ä¸ªæœºå™¨äººã€‚
>
> ç¬¬äºŒä¸ªå·¥å‚çš„ç»´ä¿®ä¸Šé™æ˜¯ 1 ï¼Œå®ƒç»´ä¿®äº† 1 ä¸ªæœºå™¨äººã€‚
>
> æ€»ç§»åŠ¨è·ç¦»æ˜¯ |2 - 1| + |(-2) - (-1)| = 2 ã€‚æ²¡æœ‰åŠæ³•å¾—åˆ°æ¯” 2 æ›´å°‘çš„æ€»ç§»åŠ¨è·ç¦»ã€‚

**æç¤ºï¼š**

- `1 <= robot.length, factory.length <= 100`
- `factory[j].length == 2`
- `-10^9 <= robot[i], positionj <= 10^9`
- `0 <= limitj <= robot.length`
- æµ‹è¯•æ•°æ®ä¿è¯æ‰€æœ‰æœºå™¨äººéƒ½å¯ä»¥è¢«ç»´ä¿®ã€‚

## è§£é¢˜æ€è·¯

å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

1. **æ’åº**ï¼šé¦–å…ˆå¯¹æœºå™¨äººå’Œå·¥å‚çš„ä½ç½®è¿›è¡Œæ’åºï¼Œä»¥ä¾¿äºåç»­çš„è®¡ç®—ã€‚
2. **åŠ¨æ€è§„åˆ’è¡¨**ï¼šåˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„ `dp`ï¼Œå…¶ä¸­ `dp[i][j]` è¡¨ç¤ºå‰ `i` ä¸ªæœºå™¨äººä½¿ç”¨å‰ `j` ä¸ªå·¥å‚çš„æœ€å°ç§»åŠ¨è·ç¦»ã€‚
3. **åˆå§‹åŒ–**ï¼š
   - åˆå§‹åŒ– `dp[0][0] = 0`ï¼Œè¡¨ç¤ºæ²¡æœ‰æœºå™¨äººå’Œå·¥å‚çš„æƒ…å†µï¼Œæ€»ç§»åŠ¨è·ç¦»ä¸º 0ã€‚
   - å¯¹äºå…¶ä»–çŠ¶æ€ï¼Œå¯ä»¥åˆå§‹åŒ–ä¸ºæ— ç©·å¤§ï¼ˆè¡¨ç¤ºä¸å¯èƒ½çš„çŠ¶æ€ï¼‰ã€‚
4. **çŠ¶æ€è½¬ç§»**ï¼š

   - ä½¿ç”¨å†…å±‚å¾ªç¯æ¥å°è¯•å½“å‰å·¥å‚ä¿®ç† `k` ä¸ªæœºå™¨äººï¼Œ`k` çš„èŒƒå›´æ˜¯ä» `0` åˆ°å½“å‰å·¥å‚çš„é™åˆ¶ï¼ˆå³ `limit[j]`ï¼‰ï¼Œå¹¶ä¸”ä¸èƒ½è¶…è¿‡å½“å‰æœºå™¨äººçš„æ•°é‡ `i`ã€‚
   - è‹¥ä¸ä½¿ç”¨å½“å‰å·¥å‚ï¼Œå³ï¼š`k = 0` æ—¶ï¼Œ`dp[i][j] = dp[i][j - 1]`ï¼›
   - è‹¥ä½¿ç”¨å½“å‰å·¥å‚ä¿®ç† 1 ä¸ªæœºå™¨äººï¼Œå³ k = 1 æ—¶ï¼Œ`dp[i][j] = dp[i - 1][j - 1] + distance`ï¼›

     - å…¶ä¸­ `distance` æ˜¯ç¬¬ `i` ä¸ªæœºå™¨äººåˆ°ç¬¬ `j` ä¸ªå·¥å‚çš„è·ç¦»ï¼Œå³ `distance = Math.abs(robot[i - 1] -  factory[j - 1][0])`ï¼›

   - ä¾æ­¤ç±»æ¨ï¼Œéå†æ‰€æœ‰å¯èƒ½çš„ `k` ç§æƒ…å†µï¼Œæ‰¾å‡º `dp[i][j]` çš„æœ€å°å€¼ã€‚

5. **ç»“æœè¿”å›**ï¼šè¿”å› `dp[n][m]`ï¼Œå³æ‰€æœ‰æœºå™¨äººä½¿ç”¨æ‰€æœ‰å·¥å‚çš„æœ€å°æ€»è·ç¦»ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n * m * limit)`ï¼Œå…¶ä¸­ `n` æ˜¯æœºå™¨äººçš„æ•°é‡ï¼Œ`m` æ˜¯å·¥å‚çš„æ•°é‡ï¼Œ`limit` æ˜¯æ‰€æœ‰å·¥å‚çš„æœ€å¤§ä¿®ç†èƒ½åŠ›ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n * m)`ï¼Œç”¨äºå­˜å‚¨ dp è¡¨ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} robot
 * @param {number[][]} factory
 * @return {number}
 */
var minimumTotalDistance = function (robot, factory) {
	// å°†å·¥å‚å’Œæœºå™¨äººæŒ‰ä½ç½®æ’åº
	robot.sort((a, b) => a - b);
	factory.sort((a, b) => a[0] - b[0]);

	const n = robot.length,
		m = factory.length;

	// dp[i][j] è¡¨ç¤ºå‰ i ä¸ªæœºå™¨äººç”¨å‰ j ä¸ªå·¥å‚çš„æœ€å°æ€»è·ç¦»
	let dp = new Array(n + 1).fill(0).map((i) => new Array(m + 1).fill(Infinity));

	// åˆå§‹çŠ¶æ€ï¼Œ0 ä¸ªæœºå™¨äººå’Œ 0 ä¸ªå·¥å‚çš„æ€»è·ç¦»ä¸º 0
	dp[0][0] = 0;

	for (let j = 1; j <= m; j++) {
		const [position, limit] = factory[j - 1];
		for (let i = 0; i <= n; i++) {
			// ä¸ä½¿ç”¨è¿™ä¸ªå·¥å‚çš„æƒ…å†µ
			dp[i][j] = dp[i][j - 1];
			let distance = 0;
			// å°è¯•ç”¨å½“å‰å·¥å‚ä¿®ç† k ä¸ªæœºå™¨äºº
			for (let k = 1; k <= limit && i >= k; k++) {
				distance += Math.abs(robot[i - k] - position);
				dp[i][j] = Math.min(dp[i][j], dp[i - k][j - 1] + distance);
			}
		}
	}

	return dp[n][m];
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 1011 | [åœ¨ D å¤©å†…é€è¾¾åŒ…è£¹çš„èƒ½åŠ›](https://leetcode.com/problems/capacity-to-ship-packages-within-d-days) |  |  [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) | <font color=#ffb800>Medium</font> |
| 2585 | [è·å¾—åˆ†æ•°çš„æ–¹æ³•æ•°](https://leetcode.com/problems/number-of-ways-to-earn-points) |  |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ff334b>Hard</font> |
