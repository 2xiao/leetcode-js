---
title: 1760. è¢‹å­é‡Œæœ€å°‘æ•°ç›®çš„çƒ
description: LeetCode 1760. è¢‹å­é‡Œæœ€å°‘æ•°ç›®çš„çƒé¢˜è§£ï¼ŒMinimum Limit of Balls in a Bagï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1760. è¢‹å­é‡Œæœ€å°‘æ•°ç›®çš„çƒ
  - è¢‹å­é‡Œæœ€å°‘æ•°ç›®çš„çƒ
  - Minimum Limit of Balls in a Bag
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - äºŒåˆ†æŸ¥æ‰¾
---

# 1760. è¢‹å­é‡Œæœ€å°‘æ•°ç›®çš„çƒ

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/minimum-limit-of-balls-in-a-bag) [`LeetCode`](https://leetcode.com/problems/minimum-limit-of-balls-in-a-bag)

## é¢˜ç›®

You are given an integer array `nums` where the `ith` bag contains `nums[i]`
balls. You are also given an integer `maxOperations`.

You can perform the following operation at most `maxOperations` times:

- Take any bag of balls and divide it into two new bags with a **positive** number of balls.
  > - For example, a bag of `5` balls can become two new bags of `1` and `4` balls, or two new bags of `2` and `3` balls.

Your penalty is the **maximum** number of balls in a bag. You want to
**minimize** your penalty after the operations.

Return _the minimum possible penalty after performing the operations_.

**Example 1:**

> Input: nums = [9], maxOperations = 2
>
> Output: 3
>
> Explanation:
>
> - Divide the bag with 9 balls into two bags of sizes 6 and 3. [**_9_**] -> [6,3].
> - Divide the bag with 6 balls into two bags of sizes 3 and 3. [**_6_** ,3] -> [3,3,3].
>
> The bag with the most number of balls has 3 balls, so your penalty is 3 and you should return 3.

**Example 2:**

> Input: nums = [2,4,8,2], maxOperations = 4
>
> Output: 2
>
> Explanation:
>
> - Divide the bag with 8 balls into two bags of sizes 4 and 4. [2,4,**_8_** ,2] -> [2,4,4,4,2].
> - Divide the bag with 4 balls into two bags of sizes 2 and 2. [2,**_4_** ,4,4,2] -> [2,2,2,4,4,2].
> - Divide the bag with 4 balls into two bags of sizes 2 and 2. [2,2,2,**_4_** ,4,2] -> [2,2,2,2,2,4,2].
> - Divide the bag with 4 balls into two bags of sizes 2 and 2. [2,2,2,2,2,**_4_** ,2] -> [2,2,2,2,2,2,2,2].
>
> The bag with the most number of balls has 2 balls, so your penalty is 2, and you should return 2.

**Constraints:**

- `1 <= nums.length <= 10^5`
- `1 <= maxOperations, nums[i] <= 10^9`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œå…¶ä¸­ `nums[i]` è¡¨ç¤ºç¬¬ `i` ä¸ªè¢‹å­é‡Œçƒçš„æ•°ç›®ã€‚åŒæ—¶ç»™ä½ ä¸€ä¸ªæ•´æ•° `maxOperations` ã€‚

ä½ å¯ä»¥è¿›è¡Œå¦‚ä¸‹æ“ä½œè‡³å¤š `maxOperations` æ¬¡ï¼š

- é€‰æ‹©ä»»æ„ä¸€ä¸ªè¢‹å­ï¼Œå¹¶å°†è¢‹å­é‡Œçš„çƒåˆ†åˆ° 2 ä¸ªæ–°çš„è¢‹å­ä¸­ï¼Œæ¯ä¸ªè¢‹å­é‡Œéƒ½æœ‰ **æ­£æ•´æ•°** ä¸ªçƒã€‚
  > - æ¯”æ–¹è¯´ï¼Œä¸€ä¸ªè¢‹å­é‡Œæœ‰ `5` ä¸ªçƒï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬åˆ†åˆ°ä¸¤ä¸ªæ–°è¢‹å­é‡Œï¼Œåˆ†åˆ«æœ‰ `1` ä¸ªå’Œ `4` ä¸ªçƒï¼Œæˆ–è€…åˆ†åˆ«æœ‰ `2` ä¸ªå’Œ `3` ä¸ªçƒã€‚

ä½ çš„å¼€é”€æ˜¯å•ä¸ªè¢‹å­é‡Œçƒæ•°ç›®çš„ **æœ€å¤§å€¼** ï¼Œä½ æƒ³è¦ **æœ€å°åŒ–** å¼€é”€ã€‚

è¯·ä½ è¿”å›è¿›è¡Œä¸Šè¿°æ“ä½œåçš„æœ€å°å¼€é”€ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** nums = [9], maxOperations = 2
>
> **è¾“å‡ºï¼š** 3
>
> **è§£é‡Šï¼š**
>
> - å°†è£…æœ‰ 9 ä¸ªçƒçš„è¢‹å­åˆ†æˆè£…æœ‰ 6 ä¸ªå’Œ 3 ä¸ªçƒçš„è¢‹å­ã€‚[**9**] -> [6,3] ã€‚
> - å°†è£…æœ‰ 6 ä¸ªçƒçš„è¢‹å­åˆ†æˆè£…æœ‰ 3 ä¸ªå’Œ 3 ä¸ªçƒçš„è¢‹å­ã€‚[**6** ,3] -> [3,3,3] ã€‚
>
> è£…æœ‰æœ€å¤šçƒçš„è¢‹å­é‡Œè£…æœ‰ 3 ä¸ªçƒï¼Œæ‰€ä»¥å¼€é”€ä¸º 3 å¹¶è¿”å› 3 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** nums = [2,4,8,2], maxOperations = 4
>
> **è¾“å‡ºï¼š** 2
>
> **è§£é‡Šï¼š**
>
> - å°†è£…æœ‰ 8 ä¸ªçƒçš„è¢‹å­åˆ†æˆè£…æœ‰ 4 ä¸ªå’Œ 4 ä¸ªçƒçš„è¢‹å­ã€‚[2,4,**8** ,2] -> [2,4,4,4,2] ã€‚
> - å°†è£…æœ‰ 4 ä¸ªçƒçš„è¢‹å­åˆ†æˆè£…æœ‰ 2 ä¸ªå’Œ 2 ä¸ªçƒçš„è¢‹å­ã€‚[2,**4** ,4,4,2] -> [2,2,2,4,4,2] ã€‚
> - å°†è£…æœ‰ 4 ä¸ªçƒçš„è¢‹å­åˆ†æˆè£…æœ‰ 2 ä¸ªå’Œ 2 ä¸ªçƒçš„è¢‹å­ã€‚[2,2,2,**4** ,4,2] -> [2,2,2,2,2,4,2] ã€‚
> - å°†è£…æœ‰ 4 ä¸ªçƒçš„è¢‹å­åˆ†æˆè£…æœ‰ 2 ä¸ªå’Œ 2 ä¸ªçƒçš„è¢‹å­ã€‚[2,2,2,2,2,**4** ,2] -> [2,2,2,2,2,2,2,2] ã€‚
>
> è£…æœ‰æœ€å¤šçƒçš„è¢‹å­é‡Œè£…æœ‰ 2 ä¸ªçƒï¼Œæ‰€ä»¥å¼€é”€ä¸º 2 å¹¶è¿”å› 2 ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** nums = [7,17], maxOperations = 2
>
> **è¾“å‡ºï¼š** 7

**æç¤ºï¼š**

- `1 <= nums.length <= 10^5`
- `1 <= maxOperations, nums[i] <= 10^9`

## è§£é¢˜æ€è·¯

**æ ¸å¿ƒç›®æ ‡**æ˜¯é€šè¿‡æœ€å¤š `maxOperations` æ¬¡æ‹†åˆ†ï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ€å°çš„ã€Œè¢‹ä¸­æœ€å¤§çƒæ•°ã€`size`ï¼Œå¯ä»¥é€šè¿‡äºŒåˆ†æŸ¥æ‰¾æ¥å®ç°ã€‚

1. **å®šä¹‰äºŒåˆ†èŒƒå›´**ï¼š

   - æœ€å°å€¼ï¼š`left = 1`ï¼ˆè¢‹å­é‡Œè‡³å°‘æœ‰ 1 ä¸ªçƒï¼‰ã€‚
   - æœ€å¤§å€¼ï¼š`right = max(nums)`ï¼ˆåˆå§‹æ—¶çš„æœ€å¤§çƒæ•°å¯èƒ½æ˜¯æœ€ç»ˆç»“æœï¼‰ã€‚

2. **äºŒåˆ†æŸ¥æ‰¾**ï¼š

   - å°è¯•å°† `size` å®šä¸ºäºŒåˆ†ä¸­ç‚¹ `mid`ï¼Œåˆ¤æ–­è¿™ä¸ª `size` æ˜¯å¦å¯è¡Œã€‚
   - å¦‚æœ `mid` å¯è¡Œï¼Œå°è¯•æ›´å°çš„ `size`ï¼ˆ`right = mid - 1`ï¼‰ã€‚
   - å¦‚æœ `mid` ä¸å¯è¡Œï¼Œå°è¯•æ›´å¤§çš„ `size`ï¼ˆ`left = mid + 1`ï¼‰ã€‚

3. **å¯è¡Œæ€§éªŒè¯å‡½æ•°**ï¼š

   - å‡è®¾æ¯ä¸ªè¢‹å­èƒ½å®¹çº³çš„æœ€å¤§çƒæ•°æ˜¯ `size`ã€‚
   - å¯¹äºæ¯ä¸ªè¢‹å­çš„çƒæ•° `num`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°† `num` åˆ†æˆ `ceil(num / size)` ä¸ªè¢‹å­æ¥å®ç°ï¼Œéœ€è¦çš„æ“ä½œæ•°ä¸º `ceil(num / size) - 1`ã€‚
   - éå†æ‰€æœ‰è¢‹å­ï¼Œè®¡ç®—ä¸ºäº†ä½¿æ‰€æœ‰è¢‹å­çš„æœ€å¤§çƒæ•°ä¸è¶…è¿‡ `size`ï¼Œæ‰€éœ€çš„æœ€å°æ“ä½œæ•°æ˜¯å¦å°äºç­‰äº `maxOperations`ã€‚
   - å¦‚æœæ“ä½œæ•°æ€»å’Œå°äºç­‰äº `maxOperations`ï¼Œè¯´æ˜è¿™ä¸ª `size` æ˜¯å¯è¡Œçš„ã€‚

4. **ç»“æœ**ï¼š
   - äºŒåˆ†å®Œæˆåï¼Œ`left` å³ä¸ºæ»¡è¶³æ¡ä»¶çš„æœ€å° `size`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n * log(max(nums)))`ï¼ŒäºŒåˆ†æŸ¥æ‰¾éœ€è¦ `O(log(max(nums)))` æ¬¡è¿­ä»£ï¼Œæ¯æ¬¡è¿­ä»£ä¸­ï¼Œå¯¹ `nums` è¿›è¡Œéå†ï¼Œè®¡ç®—å¯è¡Œæ€§ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä»…ä½¿ç”¨äº†å¸¸æ•°ç©ºé—´ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @param {number} maxOperations
 * @return {number}
 */
var minimumSize = function (nums, maxOperations) {
	// å®šä¹‰æœ€å¤§è¢‹å­æ•°é‡ï¼ˆåŸå§‹è¢‹å­æ•°é‡ + æœ€å¤§æ“ä½œæ•°ï¼‰
	const totalBags = nums.length + maxOperations;

	// åˆ¤æ–­ç»™å®šçš„ size æ˜¯å¦å¯è¡Œ
	const isVaild = (size) => {
		let bagsCount = 0; // è¢‹å­æ€»æ•°
		for (let num of nums) {
			bagsCount += Math.ceil(num / size); // æ¯ä¸ªè¢‹å­é‡Œçš„çƒéœ€è¦çš„è¢‹å­æ•°é‡
		}
		return bagsCount <= totalBags;
	};

	// äºŒåˆ†èŒƒå›´
	let left = 1,
		right = Math.max(...nums);

	// äºŒåˆ†æŸ¥æ‰¾æœ€å°å¯è¡Œçš„ size
	while (left <= right) {
		const mid = ((left + right) / 2) | 0; // ä¸­ç‚¹
		if (isVaild(mid)) {
			right = mid - 1; // å°è¯•æ›´å°çš„ size
		} else {
			left = mid + 1; // å°è¯•æ›´å¤§çš„ size
		}
	}
	return left;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 2064 | åˆ†é…ç»™å•†åº—çš„æœ€å¤šå•†å“çš„æœ€å°å€¼ | [[âœ“]](/problem/2064.md) |  [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/minimized-maximum-of-products-distributed-to-any-store) [ğŸ”—](https://leetcode.com/problems/minimized-maximum-of-products-distributed-to-any-store) |
| 2226 | æ¯ä¸ªå°å­©æœ€å¤šèƒ½åˆ†åˆ°å¤šå°‘ç³–æœ | [[âœ“]](/problem/2226.md) |  [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-candies-allocated-to-k-children) [ğŸ”—](https://leetcode.com/problems/maximum-candies-allocated-to-k-children) |