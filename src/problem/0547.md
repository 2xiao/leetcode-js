---
title: 547. çœä»½æ•°é‡
description: LeetCode 547. çœä»½æ•°é‡é¢˜è§£ï¼ŒNumber of Provincesï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 547. çœä»½æ•°é‡
  - çœä»½æ•°é‡
  - Number of Provinces
  - è§£é¢˜æ€è·¯
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - å¹¶æŸ¥é›†
  - å›¾
---

# 547. çœä»½æ•°é‡

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å¹¶æŸ¥é›†`](/tag/union-find.md) [`å›¾`](/tag/graph.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/number-of-provinces) [`LeetCode`](https://leetcode.com/problems/number-of-provinces)

## é¢˜ç›®

There are `n` cities. Some of them are connected, while some are not. If city
`a` is connected directly with city `b`, and city `b` is connected directly
with city `c`, then city `a` is connected indirectly with city `c`.

A **province** is a group of directly or indirectly connected cities and no
other cities outside of the group.

You are given an `n x n` matrix `isConnected` where `isConnected[i][j] = 1` if
the `ith` city and the `jth` city are directly connected, and
`isConnected[i][j] = 0` otherwise.

Return _the total number of **provinces**_.

**Example 1:**

![](https://assets.leetcode.com/uploads/2020/12/24/graph1.jpg)

> Input: isConnected = [[1,1,0],[1,1,0],[0,0,1]]
>
> Output: 2

**Example 2:**

![](https://assets.leetcode.com/uploads/2020/12/24/graph2.jpg)

> Input: isConnected = [[1,0,0],[0,1,0],[0,0,1]]
>
> Output: 3

**Constraints:**

- `1 <= n <= 200`
- `n == isConnected.length`
- `n == isConnected[i].length`
- `isConnected[i][j]` is `1` or `0`.
- `isConnected[i][i] == 1`
- `isConnected[i][j] == isConnected[j][i]`

## é¢˜ç›®å¤§æ„

æœ‰ `n` ä¸ªåŸå¸‚ï¼Œå…¶ä¸­ä¸€äº›å½¼æ­¤ç›¸è¿ï¼Œå¦ä¸€äº›æ²¡æœ‰ç›¸è¿ã€‚å¦‚æœåŸå¸‚ `a` ä¸åŸå¸‚ `b` ç›´æ¥ç›¸è¿ï¼Œä¸”åŸå¸‚ `b` ä¸åŸå¸‚ `c` ç›´æ¥ç›¸è¿ï¼Œé‚£ä¹ˆåŸå¸‚ `a`
ä¸åŸå¸‚ `c` é—´æ¥ç›¸è¿ã€‚

**çœä»½** æ˜¯ä¸€ç»„ç›´æ¥æˆ–é—´æ¥ç›¸è¿çš„åŸå¸‚ï¼Œç»„å†…ä¸å«å…¶ä»–æ²¡æœ‰ç›¸è¿çš„åŸå¸‚ã€‚

ç»™ä½ ä¸€ä¸ª `n x n` çš„çŸ©é˜µ `isConnected` ï¼Œå…¶ä¸­ `isConnected[i][j] = 1` è¡¨ç¤ºç¬¬ `i` ä¸ªåŸå¸‚å’Œç¬¬ `j`
ä¸ªåŸå¸‚ç›´æ¥ç›¸è¿ï¼Œè€Œ `isConnected[i][j] = 0` è¡¨ç¤ºäºŒè€…ä¸ç›´æ¥ç›¸è¿ã€‚

è¿”å›çŸ©é˜µä¸­ **çœä»½** çš„æ•°é‡ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/12/24/graph1.jpg)

> **è¾“å…¥ï¼š** isConnected = [[1,1,0],[1,1,0],[0,0,1]]
>
> **è¾“å‡ºï¼š** 2

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2020/12/24/graph2.jpg)

> **è¾“å…¥ï¼š** isConnected = [[1,0,0],[0,1,0],[0,0,1]]
>
> **è¾“å‡ºï¼š** 3

**æç¤ºï¼š**

- `1 <= n <= 200`
- `n == isConnected.length`
- `n == isConnected[i].length`
- `isConnected[i][j]` ä¸º `1` æˆ– `0`
- `isConnected[i][i] == 1`
- `isConnected[i][j] == isConnected[j][i]`

## è§£é¢˜æ€è·¯

è¿™æ˜¯ä¸€ä¸ª **æ— å‘å›¾** çš„è¿é€šåˆ†é‡é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ªåŸå¸‚çœ‹ä½œå›¾çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œ `isConnected` æ˜¯å›¾çš„é‚»æ¥çŸ©é˜µï¼š

1. åˆå§‹åŒ–ä¸€ä¸ªå¸ƒå°”æ•°ç»„ `visited`ï¼Œè®°å½•æ¯ä¸ªèŠ‚ç‚¹æ˜¯å¦å·²ç»è®¿é—®è¿‡ã€‚
2. ä½¿ç”¨ **æ·±åº¦ä¼˜å…ˆæœç´¢ (DFS)** æˆ– **å¹¿åº¦ä¼˜å…ˆæœç´¢ (BFS)** éå†å›¾çš„æ¯ä¸ªèŠ‚ç‚¹ `i`ï¼š
   - å¦‚æœèŠ‚ç‚¹ `i` æœªè®¿é—®ï¼Œå¯åŠ¨ä¸€æ¬¡ DFS/BFS éå†ã€‚
   - éå†è¿‡ç¨‹ä¸­å°†æ‰€æœ‰ä¸ `i` ç›¸è¿çš„èŠ‚ç‚¹æ ‡è®°ä¸ºå·²è®¿é—®ã€‚
   - æ¯æ¬¡å¯åŠ¨ä¸€ä¸ªæ–°çš„éå†ï¼Œè¡¨ç¤ºå‘ç°ä¸€ä¸ªæ–°çš„çœä»½ï¼Œçœä»½è®¡æ•°åŠ  1ã€‚
3. è¿”å›çœä»½è®¡æ•°ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦ï¼š** `O(n^2)`ï¼Œé‚»æ¥çŸ©é˜µä¸­å…±æœ‰ `n^2` ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šè®¿é—®ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦ï¼š** `O(n)`ã€‚
  - DFSï¼š`O(n)`ï¼Œæ ˆçš„é€’å½’æ·±åº¦ã€‚
  - BFSï¼š`O(n)`ï¼Œé˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ã€‚

## ä»£ç 

::: code-tabs

@tab æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰

```javascript
/**
 * @param {number[][]} isConnected
 * @return {number}
 */
var findCircleNum = function (isConnected) {
	const n = isConnected.length;
	const visited = new Array(n).fill(false);
	let provinces = 0;

	const dfs = (i) => {
		visited[i] = true;
		for (let j = 0; j < n; j++) {
			if (isConnected[i][j] === 1 && !visited[j]) {
				dfs(j);
			}
		}
	};

	for (let i = 0; i < n; i++) {
		if (!visited[i]) {
			provinces++;
			dfs(i);
		}
	}

	return provinces;
};
```

@tab å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰

```javascript
/**
 * @param {number[][]} isConnected
 * @return {number}
 */
var findCircleNum = function (isConnected) {
	const n = isConnected.length;
	const visited = new Array(n).fill(false);
	let provinces = 0;

	const bfs = (i) => {
		const queue = [i];
		while (queue.length) {
			const node = queue.shift();
			for (let j = 0; j < n; j++) {
				if (isConnected[node][j] === 1 && !visited[j]) {
					visited[j] = true;
					queue.push(j);
				}
			}
		}
	};

	for (let i = 0; i < n; i++) {
		if (!visited[i]) {
			provinces++;
			visited[i] = true;
			bfs(i);
		}
	}

	return provinces;
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 323 | æ— å‘å›¾ä¸­è¿é€šåˆ†é‡çš„æ•°ç›® ğŸ”’ |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å¹¶æŸ¥é›†`](/tag/union-find.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/number-of-connected-components-in-an-undirected-graph) [ğŸ”—](https://leetcode.com/problems/number-of-connected-components-in-an-undirected-graph) |
| 657 | æœºå™¨äººèƒ½å¦è¿”å›åŸç‚¹ | [[âœ“]](/problem/0657.md) |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/robot-return-to-origin) [ğŸ”—](https://leetcode.com/problems/robot-return-to-origin) |
| 734 | å¥å­ç›¸ä¼¼æ€§ ğŸ”’ |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/sentence-similarity) [ğŸ”—](https://leetcode.com/problems/sentence-similarity) |
| 737 | å¥å­ç›¸ä¼¼æ€§ II ğŸ”’ |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å¹¶æŸ¥é›†`](/tag/union-find.md) `3+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/sentence-similarity-ii) [ğŸ”—](https://leetcode.com/problems/sentence-similarity-ii) |
| 1101 | å½¼æ­¤ç†Ÿè¯†çš„æœ€æ—©æ—¶é—´ ğŸ”’ |  |  [`å¹¶æŸ¥é›†`](/tag/union-find.md) [`æ•°ç»„`](/tag/array.md) [`æ’åº`](/tag/sorting.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/the-earliest-moment-when-everyone-become-friends) [ğŸ”—](https://leetcode.com/problems/the-earliest-moment-when-everyone-become-friends) |
| 2101 | å¼•çˆ†æœ€å¤šçš„ç‚¸å¼¹ |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å›¾`](/tag/graph.md) `3+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/detonate-the-maximum-bombs) [ğŸ”—](https://leetcode.com/problems/detonate-the-maximum-bombs) |