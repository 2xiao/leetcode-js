---
title: 233. æ•°å­— 1 çš„ä¸ªæ•°
description: LeetCode,233. æ•°å­— 1 çš„ä¸ªæ•°,æ•°å­— 1 çš„ä¸ªæ•°,Number of Digit One,è§£é¢˜æ€è·¯,é€’å½’,æ•°å­¦,åŠ¨æ€è§„åˆ’
keywords:
  - LeetCode
  - 233. æ•°å­— 1 çš„ä¸ªæ•°
  - æ•°å­— 1 çš„ä¸ªæ•°
  - Number of Digit One
  - è§£é¢˜æ€è·¯
  - é€’å½’
  - æ•°å­¦
  - åŠ¨æ€è§„åˆ’
---

# 233. æ•°å­— 1 çš„ä¸ªæ•°

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`é€’å½’`](/tag/recursion.md) [`æ•°å­¦`](/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/number-of-digit-one) [`LeetCode`](https://leetcode.com/problems/number-of-digit-one)

## é¢˜ç›®

Given an integer `n`, count _the total number of digit_`1` _appearing in all
non-negative integers less than or equal to_ `n`.

**Example 1:**

> Input: n = 13
>
> Output: 6

**Example 2:**

> Input: n = 0
>
> Output: 0

**Constraints:**

- `0 <= n <= 10^9`

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªæ•´æ•° `n`ï¼Œè®¡ç®—æ‰€æœ‰å°äºç­‰äº `n` çš„éè´Ÿæ•´æ•°ä¸­æ•°å­— `1` å‡ºç°çš„ä¸ªæ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** n = 13
>
> **è¾“å‡ºï¼š** 6

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** n = 0
>
> **è¾“å‡ºï¼š** 0

**æç¤ºï¼š**

- `0 <= n <= 10^9`

## è§£é¢˜æ€è·¯

æ¯ä¸ªä½ç½®ä¸Š `1` çš„ä¸ªæ•°å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ä¸ªè§„å¾‹æ¥è®¡ç®—ï¼š

1. **åˆ†ä½è®¡ç®—**ï¼šå¯¹äºä¸€ä¸ªæ•°å­—çš„æ¯ä¸€ä½ï¼ˆä¸ªä½ã€åä½ã€ç™¾ä½ç­‰ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªæ•°å­—åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š

   - å½“å‰ä½çš„æ•°å­—ã€‚
   - å½“å‰ä½å·¦è¾¹çš„æ‰€æœ‰æ•°å­—ï¼ˆé«˜ä½ï¼‰ã€‚
   - å½“å‰ä½å³è¾¹çš„æ‰€æœ‰æ•°å­—ï¼ˆä½ä½ï¼‰ã€‚

2. **å½“å‰ä½çš„è´¡çŒ®**ï¼š

   - å¦‚æœå½“å‰ä½æ˜¯ `0`ï¼Œé‚£ä¹ˆ `1` çš„ä¸ªæ•°åªæ¥è‡ªäºé«˜ä½çš„éƒ¨åˆ†ã€‚
   - å¦‚æœå½“å‰ä½æ˜¯ `1`ï¼Œé‚£ä¹ˆé™¤äº†é«˜ä½çš„éƒ¨åˆ†å¤–ï¼Œè¿˜è¦åŠ ä¸Š`ä½ä½çš„æ•°å­— + 1`ï¼ˆå› ä¸ºå½“å‰ä½çš„ `1` æœ¬èº«ä¹Ÿç®—ï¼‰ã€‚
   - å¦‚æœå½“å‰ä½å¤§äº `1`ï¼Œé‚£ä¹ˆå¯ä»¥è®¤ä¸ºé«˜ä½çš„æ‰€æœ‰ç»„åˆéƒ½ä¼šæœ‰ `1` å‡ºç°åœ¨å½“å‰ä½ã€‚

3. **é«˜ä½å’Œä½ä½çš„å½±å“**ï¼š
   - é«˜ä½çš„ç»„åˆæ•°é‡ç›´æ¥å½±å“åˆ°å½“å‰ä½çš„ `1` çš„æ€»æ•°ã€‚
   - ä½ä½çš„æ•°å­—æ•°é‡å†³å®šäº†å½“å‰ä½ä¸º `1` æ—¶çš„å…·ä½“è®¡æ•°ã€‚

ä¸¾ä¸ªä¾‹å­ï¼šè€ƒè™‘æ•°å­— `2345` çš„åƒä½ã€ç™¾ä½ã€åä½å’Œä¸ªä½ä¸Š `1` çš„ä¸ªæ•°ï¼š

- **åƒä½**ï¼ˆ2ï¼‰ï¼š`1` å‡ºç°çš„æ¬¡æ•°æ˜¯ `1000`ï¼Œ`1000~1999`ï¼Œå…±è®¡ `1000` ä¸ªæ•°ã€‚
- **ç™¾ä½**ï¼ˆ3ï¼‰ï¼š`1` å‡ºç°çš„æ¬¡æ•°æ˜¯ `300`ï¼Œ`2100~2199`ã€`1100~1199`ã€`100~199`ï¼Œå…±è®¡ `300` ä¸ªæ•°ã€‚
- **åä½**ï¼ˆ4ï¼‰ï¼š`1` å‡ºç°çš„æ¬¡æ•°æ˜¯ `240`ï¼Œ`2x10~2x19(x=0~3)`ã€`1x10~1x19(x=0~9)`ã€`x10~x19(x=1~9)`ã€`10~19`ï¼Œå…±è®¡ `240` ä¸ªæ•°ã€‚
- **ä¸ªä½**ï¼ˆ5ï¼‰ï¼š`1` å‡ºç°çš„æ¬¡æ•°æ˜¯ `235`ï¼Œ`1`ã€`11`ã€`21`â€¦â€¦`2341`ï¼Œå…±è®¡ `235` ä¸ªæ•°ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(log n)`ï¼Œå› ä¸ºæ¯æ¬¡å¾ªç¯å¤„ç†ä¸€ä½æ•°å­—ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªä½¿ç”¨äº†å¸¸æ•°ç©ºé—´ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} n
 * @return {number}
 */
var countDigitOne = function (n) {
	let res = 0,
		factor = 1, // ç”¨äºå¤„ç†æ¯ä¸€ä½
		curDigit = 0, // å½“å‰ä½ç½®çš„æ•°å­—
		remainder = 0; // å½“å‰ä½ç½®å³è¾¹çš„æ‰€æœ‰æ•°å­—

	while (n >= factor) {
		curDigit = Math.floor((n / factor) % 10);
		remainder = n - Math.floor(n / factor) * factor;

		// è®¡ç®—å½“å‰ä½å¯¹1çš„è´¡çŒ®
		if (curDigit == 0) {
			res += Math.floor(n / (factor * 10)) * factor;
		} else if (curDigit == 1) {
			res += Math.floor(n / (factor * 10)) * factor + remainder + 1;
		} else {
			res += (Math.floor(n / (factor * 10)) + 1) * factor;
		}

		// å¤„ç†ä¸‹ä¸€ä½
		factor *= 10;
	}
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------ | :------: |
| 172 | é˜¶ä¹˜åçš„é›¶ | [[âœ“]](/problem/0172.md) |  [`æ•°å­¦`](/tag/math.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/factorial-trailing-zeroes) [ğŸ”—](https://leetcode.com/problems/factorial-trailing-zeroes) |
| 1067 | èŒƒå›´å†…çš„æ•°å­—è®¡æ•° ğŸ”’ |  |  [`æ•°å­¦`](/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/digit-count-in-range) [ğŸ”—](https://leetcode.com/problems/digit-count-in-range) |