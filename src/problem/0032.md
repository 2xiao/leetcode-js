---
title: 32. æœ€é•¿æœ‰æ•ˆæ‹¬å·
description: LeetCode,32. æœ€é•¿æœ‰æ•ˆæ‹¬å·,æœ€é•¿æœ‰æ•ˆæ‹¬å·,Longest Valid Parentheses,è§£é¢˜æ€è·¯,æ ˆ,å­—ç¬¦ä¸²,åŠ¨æ€è§„åˆ’
keywords:
  - LeetCode
  - 32. æœ€é•¿æœ‰æ•ˆæ‹¬å·
  - æœ€é•¿æœ‰æ•ˆæ‹¬å·
  - Longest Valid Parentheses
  - è§£é¢˜æ€è·¯
  - æ ˆ
  - å­—ç¬¦ä¸²
  - åŠ¨æ€è§„åˆ’
---

# 32. æœ€é•¿æœ‰æ•ˆæ‹¬å·

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/longest-valid-parentheses) [`LeetCode`](https://leetcode.com/problems/longest-valid-parentheses)

## é¢˜ç›®

Given a string containing just the characters `'('` and `')'`, return _the
length of the longest valid (well-formed) parentheses_ _substring_.

**Example 1:**

> Input: s = "(()"
>
> Output: 2
>
> Explanation: The longest valid parentheses substring is "()".

**Example 2:**

> Input: s = ")()())"
>
> Output: 4
>
> Explanation: The longest valid parentheses substring is "()()".

**Example 3:**

> Input: s = ""
>
> Output: 0

**Constraints:**

- `0 <= s.length <= 3 * 10^4`
- `s[i]` is `'('`, or `')'`.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªåªåŒ…å« `'('` å’Œ `')'` çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å· **å­ä¸²** çš„é•¿åº¦ã€‚

## è§£é¢˜æ€è·¯

ä½¿ç”¨æ ˆæ¥è§£å†³è¿™é“é¢˜ã€‚

- ä¿æŒæ ˆåº•å…ƒç´ ä¸ºå½“å‰å·²ç»éå†è¿‡çš„å…ƒç´ ä¸­ã€Œæœ€åä¸€ä¸ªæ²¡æœ‰è¢«åŒ¹é…çš„å³æ‹¬å·çš„ä¸‹æ ‡ã€ï¼Œåˆå§‹åŒ–ä¸º `-1`ï¼›
- æ ˆé‡Œå…¶ä»–å…ƒç´ ç»´æŠ¤å·¦æ‹¬å·çš„ä¸‹æ ‡ã€‚
- ä»å‰å¾€åéå†å­—ç¬¦ä¸²:

  - å¯¹äºé‡åˆ°çš„æ¯ä¸ª `'('` ï¼Œå°†å®ƒçš„ä¸‹æ ‡æ”¾å…¥æ ˆä¸­ï¼›
  - å¯¹äºé‡åˆ°çš„æ¯ä¸ª `')'` ï¼Œå…ˆå¼¹å‡ºæ ˆé¡¶å…ƒç´ è¡¨ç¤ºåŒ¹é…äº†å½“å‰å³æ‹¬å·ï¼›
  - å¦‚æœæ ˆä¸ºç©ºï¼Œè¯´æ˜å½“å‰çš„å³æ‹¬å·ä¸ºæ²¡æœ‰è¢«åŒ¹é…çš„å³æ‹¬å·ï¼Œå°†å…¶ä¸‹æ ‡æ”¾å…¥æ ˆä¸­æ¥æ›´æ–°ä¹‹å‰æåˆ°çš„ã€Œæœ€åä¸€ä¸ªæ²¡æœ‰è¢«åŒ¹é…çš„å³æ‹¬å·çš„ä¸‹æ ‡ã€ï¼›
  - å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œå½“å‰å³æ‹¬å·çš„ä¸‹æ ‡å‡å»æ ˆé¡¶å…ƒç´ å³ä¸ºã€Œä»¥è¯¥å³æ‹¬å·ä¸ºç»“å°¾çš„æœ€é•¿æœ‰æ•ˆæ‹¬å·çš„é•¿åº¦ã€ï¼›

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œéœ€è¦éå†æ•´ä¸ªå­—ç¬¦ä¸²ï¼›
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œæ ˆçš„å¤§å°åœ¨æœ€åæƒ…å†µä¸‹ä¼šè¾¾åˆ° `n`ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var longestValidParentheses = function (s) {
	let stack = [-1],
		res = 0;
	for (let i = 0; i < s.length; i++) {
		const char = s[i];
		if (char == '(') {
			stack.push(i);
		} else {
			stack.pop();
			if (stack.length == 0) {
				stack.push(i);
			} else {
				res = Math.max(res, i - stack[stack.length - 1]);
			}
		}
	}
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------ | :------: |
| 20 | æœ‰æ•ˆçš„æ‹¬å· | [[âœ“]](/problem/0020.md) |  [`æ ˆ`](/tag/stack.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/valid-parentheses) [ğŸ”—](https://leetcode.com/problems/valid-parentheses) |