---
title: 3097. æˆ–å€¼è‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„ II
description: LeetCode,3097. æˆ–å€¼è‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„ II,æˆ–å€¼è‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„ II,Shortest Subarray With OR at Least K II,è§£é¢˜æ€è·¯,ä½è¿ç®—,æ•°ç»„,æ»‘åŠ¨çª—å£
keywords:
  - LeetCode
  - 3097. æˆ–å€¼è‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„ II
  - æˆ–å€¼è‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„ II
  - Shortest Subarray With OR at Least K II
  - è§£é¢˜æ€è·¯
  - ä½è¿ç®—
  - æ•°ç»„
  - æ»‘åŠ¨çª—å£
---

# 3097. æˆ–å€¼è‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„ II

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/shortest-subarray-with-or-at-least-k-ii) [`LeetCode`](https://leetcode.com/problems/shortest-subarray-with-or-at-least-k-ii)

## é¢˜ç›®

You are given an array `nums` of **non-negative** integers and an integer `k`.

An array is called **special** if the bitwise `OR` of all of its elements is
**at least** `k`.

Return _the length of the**shortest** **special** **non-empty** subarray of_
`nums`, _or return_ `-1` _if no special subarray exists_.

**Example 1:**

**Input:** nums = [1,2,3], k = 2

**Output:** 1

**Explanation:**

The subarray `[3]` has `OR` value of `3`. Hence, we return `1`.

**Example 2:**

**Input:** nums = [2,1,8], k = 10

**Output:** 3

**Explanation:**

The subarray `[2,1,8]` has `OR` value of `11`. Hence, we return `3`.

**Example 3:**

**Input:** nums = [1,2], k = 0

**Output:** 1

**Explanation:**

The subarray `[1]` has `OR` value of `1`. Hence, we return `1`.

**Constraints:**

- `1 <= nums.length <= 2 * 10^5`
- `0 <= nums[i] <= 10^9`
- `0 <= k <= 10^9`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ª **éè´Ÿ** æ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ã€‚

å¦‚æœä¸€ä¸ªæ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„æŒ‰ä½æˆ–è¿ç®— `OR` çš„å€¼ **è‡³å°‘** ä¸º `k` ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°è¿™ä¸ªæ•°ç»„æ˜¯ **ç‰¹åˆ«çš„** ã€‚

è¯·ä½ è¿”å› `nums` ä¸­ **æœ€çŸ­ç‰¹åˆ«éç©º** å­æ•°ç»„çš„é•¿åº¦ï¼Œå¦‚æœç‰¹åˆ«å­æ•°ç»„ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè¿”å› `-1` ã€‚

**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** nums = [1,2,3], k = 2

**è¾“å‡ºï¼š** 1

**è§£é‡Šï¼š**

å­æ•°ç»„ `[3]` çš„æŒ‰ä½ `OR` å€¼ä¸º `3` ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› `1` ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** nums = [2,1,8], k = 10

**è¾“å‡ºï¼š** 3

**è§£é‡Šï¼š**

å­æ•°ç»„ `[2,1,8]` çš„æŒ‰ä½ `OR` å€¼ä¸º `11` ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› `3` ã€‚

**ç¤ºä¾‹ 3ï¼š**

**è¾“å…¥ï¼š** nums = [1,2], k = 0

**è¾“å‡ºï¼š** 1

**è§£é‡Šï¼š**

å­æ•°ç»„ `[1]` çš„æŒ‰ä½ `OR` å€¼ä¸º `1` ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› `1` ã€‚

**æç¤ºï¼š**

- `1 <= nums.length <= 2 * 10^5`
- `0 <= nums[i] <= 10^9`
- `0 <= k <= 10^9`

## è§£é¢˜æ€è·¯

å¯ä»¥ä½¿ç”¨**æ»‘åŠ¨çª—å£**å’Œ**ä½è®¡æ•°æ•°ç»„**æ¥æœ‰æ•ˆè®¡ç®—çª—å£ä¸­æ‰€æœ‰æ•°çš„æŒ‰ä½ OR å€¼ã€‚

1. **æ»‘åŠ¨çª—å£**ï¼šç”¨ä¸¤ä¸ªæŒ‡é’ˆ `start` å’Œ `end` å½¢æˆä¸€ä¸ªçª—å£ `[start, end]`ã€‚`end` å‘å³æ‰©å±•çª—å£ï¼Œ`start` å‘å³æ”¶ç¼©çª—å£ã€‚

2. **ä½è®¡æ•°æ•°ç»„** `count`ï¼š

   - `count[i]` è¡¨ç¤ºå½“å‰çª—å£ä¸­æœ‰å¤šå°‘ä¸ªæ•°åœ¨äºŒè¿›åˆ¶çš„ç¬¬ `i` ä½ä¸Šæ˜¯ `1`ã€‚
   - ä½¿ç”¨ `updateBits` å‡½æ•°æ¥æ›´æ–° `count` æ•°ç»„ã€‚å¯¹çª—å£å³è¾¹ç•Œ `nums[end]` è°ƒç”¨ `updateBits` ä½¿çª—å£æ‰©å±•ï¼Œå¯¹çª—å£å·¦è¾¹ç•Œ `nums[start]` è°ƒç”¨ `updateBits` ä½¿çª—å£æ”¶ç¼©ã€‚

3. **å¿«é€Ÿè®¡ç®— OR å€¼**ï¼š

   - åœ¨ `getVal` å‡½æ•°ä¸­ï¼Œå°† `count` æ•°ç»„è½¬åŒ–ä¸º OR å€¼ã€‚åªè¦ `count[i] > 0`ï¼Œå°±è¯´æ˜è¯¥ä½ä¸Šè‡³å°‘æœ‰ä¸€ä¸ª `1`ï¼Œåœ¨ OR è¿ç®—ä¸­è¯¥ä½ä¹Ÿåº”ä¸º `1`ã€‚
   - å½“ `getVal(count) >= k` æ—¶ï¼Œçª—å£æ»¡è¶³æ¡ä»¶ï¼Œæ›´æ–° `minLength`ã€‚

4. **æ›´æ–°æœ€å°é•¿åº¦**ï¼š
   - å½“çª—å£çš„ OR å€¼æ»¡è¶³ `>= k` æ—¶ï¼Œè®¡ç®—å½“å‰çª—å£çš„é•¿åº¦å¹¶æ›´æ–°æœ€å°é•¿åº¦ `minLength`ã€‚
   - ç„¶åå³ç§» `start` æ”¶ç¼©çª—å£ï¼Œç›´åˆ°ä¸å†æ»¡è¶³ `getVal(count) >= k` ä¸ºæ­¢ã€‚

### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n * 32)`ï¼Œå› ä¸ºéå†æ¯ä¸ªå…ƒç´ ï¼ŒåŒæ—¶æ¯æ¬¡æ›´æ–°çª—å£çš„ä½è®¡æ•°æ•°ç»„éœ€è¦ `O(32)` æ“ä½œã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(32)`ï¼Œç”¨äºå­˜å‚¨ä½è®¡æ•°æ•°ç»„ `count`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
function minimumSubarrayLength(nums, k) {
	const count = Array(32).fill(0); // ä½è®¡æ•°æ•°ç»„
	let start = 0,
		minLength = nums.length + 1;

	for (let end = 0; end < nums.length; end++) {
		// æ›´æ–°çª—å£çš„ OR ç»“æœ
		updateBits(count, nums[end], 1);

		// ç¬¦åˆæ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œå°è¯•ç¼©å°çª—å£
		while (start <= end && getVal(count) >= k) {
			minLength = Math.min(minLength, end - start + 1);
			updateBits(count, nums[start], -1);
			start++;
		}
	}
	return minLength === nums.length + 1 ? -1 : minLength;
}

// æ›´æ–°ä½è®¡æ•°æ•°ç»„
function updateBits(count, num, val) {
	for (let i = 0; i < 32; i++) {
		if ((num & (1 << i)) !== 0) {
			count[i] += val;
		}
	}
}

// æ ¹æ®ä½è®¡æ•°æ•°ç»„ç”Ÿæˆå½“å‰çª—å£çš„ OR å€¼
function getVal(count) {
	let ans = 0;
	for (let i = 0; i < 32; i++) {
		if (count[i] > 0) {
			ans |= 1 << i;
		}
	}
	return ans;
}
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 325 | [å’Œç­‰äº k çš„æœ€é•¿å­æ•°ç»„é•¿åº¦ ğŸ”’](https://leetcode.com/problems/maximum-size-subarray-sum-equals-k) |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) | <font color=#ffb800>Medium</font> |
| 862 | [å’Œè‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„](https://leetcode.com/problems/shortest-subarray-with-sum-at-least-k) |  |  [`é˜Ÿåˆ—`](/tag/queue.md) [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) `4+` | <font color=#ff334b>Hard</font> |
