---
title: 284. çª¥è§†è¿­ä»£å™¨
description: LeetCode 284. çª¥è§†è¿­ä»£å™¨é¢˜è§£ï¼ŒPeeking Iteratorï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 284. çª¥è§†è¿­ä»£å™¨
  - çª¥è§†è¿­ä»£å™¨
  - Peeking Iterator
  - è§£é¢˜æ€è·¯
  - è®¾è®¡
  - æ•°ç»„
  - è¿­ä»£å™¨
---

# 284. çª¥è§†è¿­ä»£å™¨

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/tag/design.md) [`æ•°ç»„`](/tag/array.md) [`è¿­ä»£å™¨`](/tag/iterator.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/peeking-iterator) [`LeetCode`](https://leetcode.com/problems/peeking-iterator)

## é¢˜ç›®

Design an iterator that supports the `peek` operation on an existing iterator
in addition to the `hasNext` and the `next` operations.

Implement the `PeekingIterator` class:

- `PeekingIterator(Iterator<int> nums)` Initializes the object with the given integer iterator `iterator`.
- `int next()` Returns the next element in the array and moves the pointer to the next element.
- `boolean hasNext()` Returns `true` if there are still elements in the array.
- `int peek()` Returns the next element in the array **without** moving the pointer.

**Note:** Each language may have a different implementation of the constructor
and `Iterator`, but they all support the `int next()` and `boolean hasNext()`
functions.

**Example 1:**

> **Input**
>
> ["PeekingIterator", "next", "peek", "next", "next", "hasNext"]
>
> [[[1, 2, 3]], [], [], [], [], []]
>
> **Output**
>
> [null, 1, 2, 2, 3, false]
>
> **Explanation**
>
> PeekingIterator peekingIterator = new PeekingIterator([1, 2, 3]); // [_**1**_ ,2,3]
>
> peekingIterator.next(); // return 1, the pointer moves to the next element [1,_**2**_ ,3].
>
> peekingIterator.peek(); // return 2, the pointer does not move [1,_**2**_ ,3].
>
> peekingIterator.next(); // return 2, the pointer moves to the next element [1,2,_**3**_]
>
> peekingIterator.next(); // return 3, the pointer moves to the next element [1,2,3]
>
> peekingIterator.hasNext(); // return False

**Constraints:**

- `1 <= nums.length <= 1000`
- `1 <= nums[i] <= 1000`
- All the calls to `next` and `peek` are valid.
- At most `1000` calls will be made to `next`, `hasNext`, and `peek`.

**Follow up:** How would you extend your design to be generic and work with
all types, not just integer?

## é¢˜ç›®å¤§æ„

è¯·ä½ åœ¨è®¾è®¡ä¸€ä¸ªè¿­ä»£å™¨ï¼Œåœ¨é›†æˆç°æœ‰è¿­ä»£å™¨æ‹¥æœ‰çš„ `hasNext` å’Œ `next` æ“ä½œçš„åŸºç¡€ä¸Šï¼Œè¿˜é¢å¤–æ”¯æŒ `peek` æ“ä½œã€‚

å®ç° `PeekingIterator` ç±»ï¼š

- `PeekingIterator(Iterator<int> nums)` ä½¿ç”¨æŒ‡å®šæ•´æ•°è¿­ä»£å™¨ `nums` åˆå§‹åŒ–è¿­ä»£å™¨ã€‚
- `int next()` è¿”å›æ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸ªå…ƒç´ å¤„ã€‚
- `bool hasNext()` å¦‚æœæ•°ç»„ä¸­å­˜åœ¨ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
- `int peek()` è¿”å›æ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œä½† **ä¸** ç§»åŠ¨æŒ‡é’ˆã€‚

**æ³¨æ„ï¼š** æ¯ç§è¯­è¨€å¯èƒ½æœ‰ä¸åŒçš„æ„é€ å‡½æ•°å’Œè¿­ä»£å™¨ `Iterator`ï¼Œä½†å‡æ”¯æŒ `int next()` å’Œ `boolean hasNext()`
å‡½æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š**
>
> ["PeekingIterator", "next", "peek", "next", "next", "hasNext"]
>
> [[[1, 2, 3]], [], [], [], [], []]
>
> **è¾“å‡ºï¼š**
>
> [null, 1, 2, 2, 3, false]
>
> **è§£é‡Šï¼š**
>
> PeekingIterator peekingIterator = new PeekingIterator([1, 2, 3]); // [_**1**_ ,2,3]
>
> peekingIterator.next(); // è¿”å› 1 ï¼ŒæŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´  [1,_**2**_ ,3]
>
> peekingIterator.peek(); // è¿”å› 2 ï¼ŒæŒ‡é’ˆæœªå‘ç”Ÿç§»åŠ¨ [1,_**2**_ ,3]
>
> peekingIterator.next(); // è¿”å› 2 ï¼ŒæŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´  [1,2,_**3**_]
>
> peekingIterator.next(); // è¿”å› 3 ï¼ŒæŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´  [1,2,3]
>
> peekingIterator.hasNext(); // è¿”å› False

**æç¤ºï¼š**

- `1 <= nums.length <= 1000`
- `1 <= nums[i] <= 1000`
- å¯¹ `next` å’Œ `peek` çš„è°ƒç”¨å‡æœ‰æ•ˆ
- `next`ã€`hasNext` å’Œ `peek `æœ€å¤šè°ƒç”¨ `1000` æ¬¡

**è¿›é˜¶ï¼š** ä½ å°†å¦‚ä½•æ‹“å±•ä½ çš„è®¾è®¡ï¼Ÿä½¿ä¹‹å˜å¾—é€šç”¨åŒ–ï¼Œä»è€Œé€‚åº”æ‰€æœ‰çš„ç±»å‹ï¼Œè€Œä¸åªæ˜¯æ•´æ•°å‹ï¼Ÿ

## è§£é¢˜æ€è·¯

`PeekingIterator` æ˜¯å¯¹ä¸€ä¸ªè¿­ä»£å™¨è¿›è¡ŒåŒ…è£…ï¼Œæä¾›é¢å¤–çš„ `peek()` åŠŸèƒ½ï¼Œç”¨äºé¢„è§ˆä¸‹ä¸€ä¸ªå…ƒç´ è€Œä¸ç§»åŠ¨è¿­ä»£å™¨çš„å½“å‰ä½ç½®ã€‚å®ç°è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç»´æŠ¤ä¸€ä¸ªç¼“å­˜å˜é‡æ¥å­˜å‚¨â€œé¢„è§ˆçš„å€¼â€ï¼Œä»¥ä¾¿åœ¨è°ƒç”¨ `peek()` åï¼Œå®é™…è°ƒç”¨ `next()` æ—¶è¿”å›æ­£ç¡®çš„ç»“æœã€‚

1. **ç¼“å­˜æœºåˆ¶**

   - å¼•å…¥ä¸€ä¸ªç§æœ‰å˜é‡ `peeked` ç”¨äºå­˜å‚¨è°ƒç”¨ `peek()` æ—¶é¢„è§ˆçš„å€¼ã€‚
   - å¦‚æœ `peeked` ä¸­æœ‰å€¼ï¼Œè¯´æ˜ä¸Šä¸€æ¬¡è°ƒç”¨äº† `peek()` è€Œæœªè°ƒç”¨ `next()`ï¼Œè¿™æ—¶åº”ç›´æ¥è¿”å›ç¼“å­˜å€¼ã€‚

2. **ä¸‰ä¸ªæ–¹æ³•çš„é€»è¾‘**

   - **`peek()`**
     - å¦‚æœ `peeked` ä¸­æœ‰å€¼ï¼Œç›´æ¥è¿”å›è¯¥å€¼ã€‚
     - å¦‚æœ `peeked` ä¸­ä¸ºç©ºï¼Œè°ƒç”¨ `iterator.next()` è·å–ä¸‹ä¸€ä¸ªå€¼å¹¶å­˜å…¥ `peeked`ï¼Œç„¶åè¿”å›è¯¥å€¼ã€‚
   - **`next()`**
     - å¦‚æœ `peeked` ä¸­æœ‰å€¼ï¼Œè¯´æ˜è°ƒç”¨è¿‡ `peek()`ï¼Œè¿”å›ç¼“å­˜å€¼å¹¶æ¸…ç©º `peeked`ã€‚
     - å¦‚æœ `peeked` ä¸ºç©ºï¼Œç›´æ¥è°ƒç”¨ `iterator.next()` è¿”å›ä¸‹ä¸€ä¸ªå€¼ã€‚
   - **`hasNext()`**
     - å¦‚æœ `peeked` ä¸­æœ‰å€¼ï¼Œè¯´æ˜è¿˜æœ‰é¢„è§ˆçš„å…ƒç´ ï¼Œè¿”å› `true`ã€‚
     - å¦‚æœ `peeked` ä¸ºç©ºï¼Œåˆ™è°ƒç”¨ `iterator.hasNext()` åˆ¤æ–­åº•å±‚è¿­ä»£å™¨æ˜¯å¦æœ‰æ›´å¤šå…ƒç´ ã€‚

3. **è¾¹ç•Œæ¡ä»¶**
   - `peeked` çš„åˆå§‹å€¼ä¸º `null`ï¼Œä»¥ä¾¿åŒºåˆ†ç¼“å­˜çŠ¶æ€ã€‚
   - å¤„ç† `iterator` åœ¨è¾¹ç•Œæ¡ä»¶ï¼ˆå¦‚æ²¡æœ‰æ›´å¤šå…ƒç´ æ—¶ï¼‰çš„è¡Œä¸ºã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œ`peek()`ã€`next()` å’Œ `hasNext()` çš„æ—¶é—´å¤æ‚åº¦å‡ä¸º `O(1)`ï¼Œå› ä¸ºæ¯æ¬¡æ“ä½œæœ€å¤šæ¶‰åŠç¼“å­˜æˆ–åº•å±‚è¿­ä»£å™¨çš„è°ƒç”¨ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œé¢å¤–çš„ç¼“å­˜å˜é‡ `peeked` å ç”¨å¸¸æ•°ç©ºé—´ã€‚

## ä»£ç 

```javascript
class PeekingIterator {
	constructor(iterator) {
		this.iterator = iterator; // åº•å±‚è¿­ä»£å™¨
		this.peeked = null; // ç¼“å­˜çš„é¢„è§ˆå€¼
	}

	peek() {
		// å¦‚æœæ²¡æœ‰ç¼“å­˜å€¼ï¼Œè·å–ä¸‹ä¸€ä¸ªå€¼å¹¶ç¼“å­˜
		if (this.peeked === null) {
			this.peeked = this.iterator.next();
		}
		return this.peeked;
	}

	next() {
		// å¦‚æœç¼“å­˜ä¸­æœ‰å€¼ï¼Œè¿”å›ç¼“å­˜å€¼å¹¶æ¸…ç©ºç¼“å­˜
		if (this.peeked !== null) {
			const temp = this.peeked;
			this.peeked = null;
			return temp;
		}
		// å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œç›´æ¥ä»åº•å±‚è¿­ä»£å™¨è·å–ä¸‹ä¸€ä¸ªå€¼
		return this.iterator.next();
	}

	hasNext() {
		// å¦‚æœç¼“å­˜ä¸­æœ‰å€¼ï¼Œåˆ™ä¸€å®šæœ‰ä¸‹ä¸€ä¸ªå…ƒç´ 
		if (this.peeked !== null) {
			return true;
		}
		// å¦åˆ™æ£€æŸ¥åº•å±‚è¿­ä»£å™¨æ˜¯å¦æœ‰æ›´å¤šå…ƒç´ 
		return this.iterator.hasNext();
	}
}
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 173 | äºŒå‰æœç´¢æ ‘è¿­ä»£å™¨ | [[âœ“]](/problem/0173.md) |  [`æ ˆ`](/tag/stack.md) [`æ ‘`](/tag/tree.md) [`è®¾è®¡`](/tag/design.md) `3+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/binary-search-tree-iterator) [ğŸ”—](https://leetcode.com/problems/binary-search-tree-iterator) |
| 251 | å±•å¼€äºŒç»´å‘é‡ ğŸ”’ |  |  [`è®¾è®¡`](/tag/design.md) [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/flatten-2d-vector) [ğŸ”—](https://leetcode.com/problems/flatten-2d-vector) |
| 281 | é”¯é½¿è¿­ä»£å™¨ ğŸ”’ |  |  [`è®¾è®¡`](/tag/design.md) [`é˜Ÿåˆ—`](/tag/queue.md) [`æ•°ç»„`](/tag/array.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/zigzag-iterator) [ğŸ”—](https://leetcode.com/problems/zigzag-iterator) |