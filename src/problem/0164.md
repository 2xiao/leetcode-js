---
title: 164. æœ€å¤§é—´è·
description: LeetCode 164. æœ€å¤§é—´è·é¢˜è§£ï¼ŒMaximum Gapï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 164. æœ€å¤§é—´è·
  - æœ€å¤§é—´è·
  - Maximum Gap
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - æ¡¶æ’åº
  - åŸºæ•°æ’åº
  - æ’åº
---

# 164. æœ€å¤§é—´è·

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`æ¡¶æ’åº`](/tag/bucket-sort.md) [`åŸºæ•°æ’åº`](/tag/radix-sort.md) [`æ’åº`](/tag/sorting.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/maximum-gap) [`LeetCode`](https://leetcode.com/problems/maximum-gap)

## é¢˜ç›®

Given an integer array `nums`, return _the maximum difference between two
successive elements in its sorted form_. If the array contains less than two
elements, return `0`.

You must write an algorithm that runs in linear time and uses linear extra
space.

**Example 1:**

> Input: nums = [3,6,9,1]
>
> Output: 3
>
> Explanation: The sorted form of the array is [1,3,6,9], either (3,6) or (6,9) has the maximum difference 3.

**Example 2:**

> Input: nums = [10]
>
> Output: 0
>
> Explanation: The array contains less than 2 elements, therefore return 0.

**Constraints:**

- `1 <= nums.length <= 10^5`
- `0 <= nums[i] <= 10^9`

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªæ— åºçš„æ•°ç»„ `nums`ï¼Œè¿”å› _æ•°ç»„åœ¨æ’åºä¹‹åï¼Œç›¸é‚»å…ƒç´ ä¹‹é—´æœ€å¤§çš„å·®å€¼_ ã€‚å¦‚æœæ•°ç»„å…ƒç´ ä¸ªæ•°å°äº 2ï¼Œåˆ™è¿”å› `0` ã€‚

æ‚¨å¿…é¡»ç¼–å†™ä¸€ä¸ªåœ¨ã€Œçº¿æ€§æ—¶é—´ã€å†…è¿è¡Œå¹¶ä½¿ç”¨ã€Œçº¿æ€§é¢å¤–ç©ºé—´ã€çš„ç®—æ³•ã€‚

**ç¤ºä¾‹ 1:**

> **è¾“å…¥:** nums = [3,6,9,1]
>
> **è¾“å‡º:** 3
>
> **è§£é‡Š:** æ’åºåçš„æ•°ç»„æ˜¯ [1,3,6,9]**_,_** å…¶ä¸­ç›¸é‚»å…ƒç´  (3,6) å’Œ (6,9) ä¹‹é—´éƒ½å­˜åœ¨æœ€å¤§å·®å€¼ 3ã€‚

**ç¤ºä¾‹ 2:**

> **è¾“å…¥:** nums = [10]
>
> **è¾“å‡º:** 0
>
> **è§£é‡Š:** æ•°ç»„å…ƒç´ ä¸ªæ•°å°äº 2ï¼Œå› æ­¤è¿”å› 0ã€‚

**æç¤º:**

- `1 <= nums.length <= 10^5`
- `0 <= nums[i] <= 10^9`

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€: åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰

åŸºæ•°æ’åºæ˜¯ä¸€ç§çº¿æ€§æ—¶é—´çš„æ’åºç®—æ³•ï¼Œé€‚åˆç”¨æ¥æ’åºæ­£æ•´æ•°ã€‚åˆ©ç”¨åŸºæ•°æ’åºï¼Œå¯ä»¥å…ˆå¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œç„¶åç›´æ¥éå†æ’åºåçš„æ•°ç»„è®¡ç®—æœ€å¤§å·®å€¼ã€‚

1. ä½¿ç”¨åŸºæ•°æ’åºå¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚
2. éå†æ’åºåçš„æ•°ç»„ï¼Œè®¡ç®—ç›¸é‚»å…ƒç´ ä¹‹é—´çš„å·®å€¼ï¼Œè®°å½•æœ€å¤§å·®å€¼ã€‚
3. è¿”å›æœ€å¤§å·®å€¼ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**: `O(n)`

  - åŸºæ•°æ’åºï¼š`O(n)`ã€‚
  - è®¡ç®—æœ€å¤§å·®å€¼ï¼š`O(n)`ã€‚
  - æ€»æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€‚

- **ç©ºé—´å¤æ‚åº¦**: `O(n)`ï¼Œéœ€è¦é¢å¤–çš„ç¼“å†²åŒºå­˜å‚¨æ’åºç»“æœã€‚

---

### æ€è·¯äºŒ: æ¡¶æ’åºï¼ˆBucket Sortï¼‰

1. æ‰¾åˆ°æ•°ç»„çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ `min` å’Œ `max`ã€‚
2. è®¡ç®—æ¡¶çš„å¤§å° `bucketSize` å’Œæ•°é‡ `bucketCount`ã€‚
3. å°†æ¯ä¸ªæ•°å­—åˆ†é…åˆ°æ¡¶ä¸­ï¼Œå¹¶è®°å½•æ¯ä¸ªæ¡¶çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚
4. éå†æ‰€æœ‰æ¡¶ï¼Œè®¡ç®—ç›¸é‚»æ¡¶ä¹‹é—´çš„å·®å€¼ï¼Œè®°å½•æœ€å¤§å·®å€¼ã€‚
5. è¿”å›æœ€å¤§å·®å€¼ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**: `O(n)`

  - éå†æ•°ç»„åˆ†é…åˆ°æ¡¶ï¼š`O(n)`ã€‚
  - éå†æ¡¶è®¡ç®—å·®å€¼ï¼š`O(k)`ï¼Œå…¶ä¸­ `k` æ˜¯æ¡¶çš„æ•°é‡ï¼Œæœ€åæƒ…å†µä¸‹ `k <= n`ã€‚
  - æ€»æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€‚

- **ç©ºé—´å¤æ‚åº¦**: `O(n)`
  - ä½¿ç”¨äº† `O(k)` çš„æ¡¶å­˜å‚¨ï¼Œæœ€åæƒ…å†µä¸‹ `k <= n`ã€‚

---

### æ€è·¯ä¸‰: åˆ©ç”¨å¯¹è±¡çš„é”®æ’åº

1. ç‰¹æ®Šæƒ…å†µå¤„ç†ï¼šå¦‚æœæ•°ç»„é•¿åº¦å°äº 2ï¼Œåˆ™æ— æ³•è®¡ç®—å·®å€¼ï¼Œç›´æ¥è¿”å› `0`ã€‚

2. ä½¿ç”¨å¯¹è±¡ `obj` å»é‡

- éå†æ•°ç»„ï¼Œå°†æ¯ä¸ªæ•°å­—ä½œä¸ºå¯¹è±¡ `obj` çš„é”®ï¼Œä»¥å®ç°æ•°å­—å»é‡ã€‚
- ç”±äºå¯¹è±¡çš„é”®åœ¨ JavaScript ä¸­é»˜è®¤ä¼šæŒ‰ç…§æ•°å€¼é¡ºåºæ’åºï¼ˆå¯¹äºçº¯æ•°å€¼é”®ï¼‰ï¼Œå› æ­¤æ— éœ€æ˜¾å¼æ’åºã€‚
- è™½ç„¶ä»£ç åˆ©ç”¨äº† JavaScript å¯¹è±¡é”®çš„ç‰¹æ€§ï¼Œä½†åœ¨å®ç°è¿‡ç¨‹ä¸­ï¼Œé”®å€¼çš„è‡ªåŠ¨æ’åºå¹¶ä¸ä¸€å®šå…·æœ‰çº¿æ€§æ—¶é—´å¤æ‚åº¦ï¼Œå› æ­¤æ— æ³•å®Œå…¨ä¿è¯æ»¡è¶³é¢˜ç›®å¯¹çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„è¦æ±‚ã€‚

3. éå†å¯¹è±¡çš„é”®ï¼Œè®¡ç®—æœ€å¤§å·®å€¼

- åˆå§‹åŒ– `prev` å˜é‡ç”¨äºè®°å½•å‰ä¸€ä¸ªé”®å€¼ï¼Œåˆå§‹å€¼ä¸º `-1`ï¼ˆè¡¨ç¤ºå°šæœªéå†ä»»ä½•é”®ï¼‰ã€‚
- éå†å¯¹è±¡ä¸­çš„é”®ï¼ˆæŒ‰æ•°å€¼é¡ºåºè‡ªåŠ¨æ’åºï¼‰ï¼Œå¦‚æœ `prev` ä¸ä¸º `-1`ï¼Œè®¡ç®—å½“å‰é”®ä¸ `prev` çš„å·®å€¼å¹¶æ›´æ–° `maxDiff`ã€‚
- éå†å®Œæˆåï¼Œ`maxDiff` å³ä¸ºç›¸é‚»æ•°ä¹‹é—´çš„æœ€å¤§å·®å€¼ã€‚

4. è¿”å›è®¡ç®—å‡ºçš„ `maxDiff`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**: `O(n)`

  - éå†æ•°ç»„åˆ›å»ºå¯¹è±¡çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€‚
  - éå†å¯¹è±¡çš„é”®è®¡ç®—æœ€å¤§å·®å€¼çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(k)`ï¼Œå…¶ä¸­ `k` æ˜¯å¯¹è±¡é”®çš„æ•°é‡ã€‚
  - æœ€åæƒ…å†µä¸‹ï¼Œé”®çš„æ•°é‡ä¸æ•°ç»„é•¿åº¦ç›¸åŒï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€‚

- **ç©ºé—´å¤æ‚åº¦**: `O(n)`ï¼Œéœ€è¦é¢å¤–çš„å¯¹è±¡ `obj` æ¥å­˜å‚¨æ•°ç»„ä¸­çš„å”¯ä¸€å…ƒç´ ã€‚

## ä»£ç 

::: code-tabs
@tab åŸºæ•°æ’åº

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var maximumGap = function (nums) {
	if (nums.length < 2) return 0;

	// åŸºæ•°æ’åº
	let max = Math.max(...nums),
		exp = 1;
	const n = nums.length,
		buffer = new Array(n);
	while (Math.floor(max / exp) > 0) {
		let count = new Array(10).fill(0);

		for (let num of nums) count[Math.floor(num / exp) % 10]++;
		for (let i = 1; i < 10; i++) count[i] += count[i - 1];
		for (let i = n - 1; i >= 0; i--) {
			const digit = Math.floor(nums[i] / exp) % 10;
			buffer[--count[digit]] = nums[i];
		}
		nums = [...buffer];
		exp *= 10;
	}

	// è®¡ç®—æœ€å¤§é—´è·
	let maxGap = 0;
	for (let i = 1; i < nums.length; i++) {
		maxGap = Math.max(maxGap, nums[i] - nums[i - 1]);
	}
	return maxGap;
};
```

@tab æ¡¶æ’åº

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var maximumGap = function (nums) {
	if (nums.length < 2) return 0;

	let min = Math.min(...nums),
		max = Math.max(...nums);
	if (min === max) return 0;

	let n = nums.length;
	let bucketSize = Math.max(1, Math.floor((max - min) / (n - 1)));
	let bucketCount = Math.floor((max - min) / bucketSize) + 1;
	let buckets = Array.from({ length: bucketCount }, () => ({
		min: Infinity,
		max: -Infinity
	}));

	// å°†æ•°å­—æ”¾å…¥æ¡¶ä¸­
	for (let num of nums) {
		let idx = Math.floor((num - min) / bucketSize);
		buckets[idx].min = Math.min(buckets[idx].min, num);
		buckets[idx].max = Math.max(buckets[idx].max, num);
	}

	// è®¡ç®—æœ€å¤§é—´è·
	let maxGap = 0,
		prevMax = min;
	for (let bucket of buckets) {
		if (bucket.min === Infinity) continue; // Skip empty buckets
		maxGap = Math.max(maxGap, bucket.min - prevMax);
		prevMax = bucket.max;
	}

	return maxGap;
};
```

@tab åˆ©ç”¨å¯¹è±¡çš„é”®æ’åº

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var maximumGap = function (nums) {
	if (nums.length < 2) return 0;
	let obj = {};
	for (let num of nums) {
		obj[num] = num;
	}

	let maxDiff = 0,
		prev = -1;

	// è®¡ç®—æœ€å¤§é—´è·
	for (let key in obj) {
		if (prev == -1) {
			prev = key;
		} else {
			maxDiff = Math.max(maxDiff, key - prev);
			prev = key;
		}
	}
	return maxDiff;
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1637 | ä¸¤ç‚¹ä¹‹é—´ä¸åŒ…å«ä»»ä½•ç‚¹çš„æœ€å®½å‚ç›´åŒºåŸŸ | [[âœ“]](/problem/1637.md) |  [`æ•°ç»„`](/tag/array.md) [`æ’åº`](/tag/sorting.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/widest-vertical-area-between-two-points-containing-no-points) [ğŸ”—](https://leetcode.com/problems/widest-vertical-area-between-two-points-containing-no-points) |
| 2274 | ä¸å«ç‰¹æ®Šæ¥¼å±‚çš„æœ€å¤§è¿ç»­æ¥¼å±‚æ•° |  |  [`æ•°ç»„`](/tag/array.md) [`æ’åº`](/tag/sorting.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-consecutive-floors-without-special-floors) [ğŸ”—](https://leetcode.com/problems/maximum-consecutive-floors-without-special-floors) |