---
title: 421. æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼
description: LeetCode 421. æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼é¢˜è§£ï¼ŒMaximum XOR of Two Numbers in an Arrayï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 421. æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼
  - æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼
  - Maximum XOR of Two Numbers in an Array
  - è§£é¢˜æ€è·¯
  - ä½è¿ç®—
  - å­—å…¸æ ‘
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
---

# 421. æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/maximum-xor-of-two-numbers-in-an-array) [`LeetCode`](https://leetcode.com/problems/maximum-xor-of-two-numbers-in-an-array)

## é¢˜ç›®

Given an integer array `nums`, return _the maximum result of_ `nums[i] XOR nums[j]`, where `0 <= i <= j < n`.

**Example 1:**

> Input: nums = [3,10,5,25,2,8]
>
> Output: 28
>
> Explanation: The maximum result is 5 XOR 25 = 28.

**Example 2:**

> Input: nums = [14,70,53,83,49,91,36,80,92,51,66,70]
>
> Output: 127

**Constraints:**

- `1 <= nums.length <= 2 * 10^5`
- `0 <= nums[i] <= 2^31 - 1`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œè¿”å› `nums[i] XOR nums[j]` çš„æœ€å¤§è¿ç®—ç»“æœï¼Œå…¶ä¸­ `0 â‰¤ i â‰¤ j < n` ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** nums = [3,10,5,25,2,8]
>
> **è¾“å‡ºï¼š** 28
>
> **è§£é‡Šï¼š** æœ€å¤§è¿ç®—ç»“æœæ˜¯ 5 XOR 25 = 28.

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** nums = [14,70,53,83,49,91,36,80,92,51,66,70]
>
> **è¾“å‡ºï¼š** 127

**æç¤ºï¼š**

- `1 <= nums.length <= 2 * 10^5`
- `0 <= nums[i] <= 2^31 - 1`

## è§£é¢˜æ€è·¯

1. **è§‚å¯Ÿå¼‚æˆ–çš„æ€§è´¨**
   å¼‚æˆ–ï¼ˆXORï¼‰çš„é‡è¦ç‰¹æ€§ï¼š

   - `a ^ a = 0`
   - `a ^ 0 = a`
   - å¼‚æˆ–è¿ç®—çš„ç»“æœè¶Šå¤§ï¼Œæ„å‘³ç€ä¸¤ä¸ªæ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºè¶Šä¸åŒã€‚

   é¢˜ç›®è¦æ±‚åœ¨ `nums` æ•°ç»„ä¸­æ‰¾åˆ°ä¸¤ä¸ªæ•° `a` å’Œ `b`ï¼Œä½¿ `a ^ b` çš„å€¼æœ€å¤§ï¼Œå³ï¼š`max(a ^ b)`

2. **é€ä½æ„é€ æœ€å¤§å¼‚æˆ–å€¼**

   - **ä»æœ€é«˜ä½åˆ°æœ€ä½ä½** é€æ­¥ç¡®å®š `max` çš„æ¯ä¸€ä½æ˜¯å¦å¯ä»¥ä¸º `1`ã€‚
   - ç»´æŠ¤ä¸€ä¸ª**æ©ç  `mask`**ï¼Œç”¨äºä¿ç•™å½“å‰è€ƒè™‘çš„é«˜ä½éƒ¨åˆ†ã€‚
   - ç”¨**å“ˆå¸Œé›†åˆ `set` è®°å½•æ‰€æœ‰æ•°çš„å‰ç¼€**ï¼ˆä¿ç•™ `mask` ä½ï¼‰ã€‚

3. **è´ªå¿ƒæ¨å¯¼æœ€å¤§å€¼**
   å‡è®¾ `max` ç›®å‰çš„å€¼æ˜¯ `X`ï¼Œå¸Œæœ›æ–°çš„ä¸€ä½ä¹Ÿèƒ½æ˜¯ `1`ï¼š

   - è®¡ç®— `temp = max | (1 << i)`ï¼Œå³å°è¯•å°† `i` ä½ç½®ä¸º `1`ã€‚
   - éå†å“ˆå¸Œé›†åˆ `set`ï¼ŒæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ `prefix1` å’Œ `prefix2` ä½¿ï¼š
     `prefix1 ^ prefix2 = temp`
   - å¦‚æœæ‰¾åˆ°äº†ï¼Œè¯´æ˜ `max` å¯ä»¥å– `temp`ï¼Œå¦åˆ™ `max` ä¿æŒä¸å˜ã€‚

4. **åˆå§‹åŒ–**

   - `max = 0`ï¼šå­˜å‚¨æœ€å¤§å¼‚æˆ–å€¼ã€‚
   - `mask = 0`ï¼šç”¨äºä¿ç•™é«˜ `i` ä½ã€‚
   - `i` ä» `31` åˆ° `0` éå†ï¼ˆå› ä¸º `nums[i]` åœ¨ JavaScript ä¸­æ˜¯ 32 ä½æ•´æ•°ï¼‰ã€‚

5. **éå†æ„é€ æœ€å¤§å€¼**

   - **æ›´æ–° `mask`**ï¼Œä¿ç•™å½“å‰é«˜ `i` ä½ã€‚
   - **éå† `nums`**ï¼Œç”¨ `mask` æå–æ‰€æœ‰å‰ç¼€å­˜å…¥ `set`ã€‚
   - **å°è¯•æ›´æ–° `max`**ï¼š
     - å‡è®¾æ–° `max` å€¼ `temp = max | (1 << i)`ã€‚
     - æ£€æŸ¥ `set` æ˜¯å¦å­˜åœ¨ `prefix1` å’Œ `prefix2` ä½¿ `prefix1 ^ prefix2 == temp`ã€‚
     - å¦‚æœå­˜åœ¨ï¼Œåˆ™æ›´æ–° `max = temp`ã€‚

6. **è¿”å›æœ€å¤§å¼‚æˆ–å€¼**
   æœ€ç»ˆ `max` å­˜å‚¨äº†æœ€å¤§çš„ `a ^ b` ç»“æœã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(32 * n) = O(n)`ï¼Œå¤–å±‚å¾ªç¯è¿è¡Œ 32 æ¬¡ï¼Œå†…å±‚å¾ªç¯éå† `nums` è®¡ç®—å“ˆå¸Œé›†åˆ `set`ï¼Œæ—¶é—´å¤æ‚åº¦ `O(n)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå“ˆå¸Œé›†åˆ `set` æœ€å¤šå­˜å‚¨ n ä¸ªä¸åŒçš„å‰ç¼€å€¼ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var findMaximumXOR = function (nums) {
	let max = 0;
	let mask = 0;

	for (let i = 31; i >= 0; i--) {
		mask |= 1 << i; // ä¿ç•™å½“å‰æœ€é«˜çš„ i ä½
		let set = new Set();

		for (let num of nums) {
			set.add(num & mask); // ä»…ä¿ç•™å‰ i ä½
		}

		let temp = max | (1 << i); // æœŸæœ› i ä½ç½®ä¸º 1
		for (let prefix of set) {
			if (set.has(temp ^ prefix)) {
				// æ˜¯å¦å­˜åœ¨ prefix1 å’Œ prefix2 ä½¿ prefix1 ^ prefix2 = temp
				max = temp;
				break;
			}
		}
	}

	return max;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1707 | ä¸æ•°ç»„ä¸­å…ƒç´ çš„æœ€å¤§å¼‚æˆ–å€¼ |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-xor-with-an-element-from-array) [ğŸ”—](https://leetcode.com/problems/maximum-xor-with-an-element-from-array) |
| 2317 | æ“ä½œåçš„æœ€å¤§å¼‚æˆ–å’Œ |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-xor-after-operations) [ğŸ”—](https://leetcode.com/problems/maximum-xor-after-operations) |
| 2416 | å­—ç¬¦ä¸²çš„å‰ç¼€åˆ†æ•°å’Œ | [[âœ“]](/problem/2416.md) |  [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `1+` | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/sum-of-prefix-scores-of-strings) [ğŸ”—](https://leetcode.com/problems/sum-of-prefix-scores-of-strings) |
| 2429 | æœ€å°å¼‚æˆ– | [[âœ“]](/problem/2429.md) |  [`è´ªå¿ƒ`](/tag/greedy.md) [`ä½è¿ç®—`](/tag/bit-manipulation.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/minimize-xor) [ğŸ”—](https://leetcode.com/problems/minimize-xor) |
| 2932 | æ‰¾å‡ºå¼ºæ•°å¯¹çš„æœ€å¤§å¼‚æˆ–å€¼ I |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) `2+` | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-strong-pair-xor-i) [ğŸ”—](https://leetcode.com/problems/maximum-strong-pair-xor-i) |
| 2935 | æ‰¾å‡ºå¼ºæ•°å¯¹çš„æœ€å¤§å¼‚æˆ–å€¼ II |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) `2+` | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-strong-pair-xor-ii) [ğŸ”—](https://leetcode.com/problems/maximum-strong-pair-xor-ii) |