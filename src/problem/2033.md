---
title: 2033. è·å–å•å€¼ç½‘æ ¼çš„æœ€å°æ“ä½œæ•°
description: LeetCode 2033. è·å–å•å€¼ç½‘æ ¼çš„æœ€å°æ“ä½œæ•°é¢˜è§£ï¼ŒMinimum Operations to Make a Uni-Value Gridï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2033. è·å–å•å€¼ç½‘æ ¼çš„æœ€å°æ“ä½œæ•°
  - è·å–å•å€¼ç½‘æ ¼çš„æœ€å°æ“ä½œæ•°
  - Minimum Operations to Make a Uni-Value Grid
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - æ•°å­¦
  - çŸ©é˜µ
  - æ’åº
---

# 2033. è·å–å•å€¼ç½‘æ ¼çš„æœ€å°æ“ä½œæ•°

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`çŸ©é˜µ`](/tag/matrix.md) [`æ’åº`](/tag/sorting.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/minimum-operations-to-make-a-uni-value-grid) [`LeetCode`](https://leetcode.com/problems/minimum-operations-to-make-a-uni-value-grid)

## é¢˜ç›®

You are given a 2D integer `grid` of size `m x n` and an integer `x`. In one
operation, you can **add** `x` to or **subtract** `x` from any element in the
`grid`.

A **uni-value grid** is a grid where all the elements of it are equal.

Return _the **minimum** number of operations to make the grid **uni-value**_.
If it is not possible, return `-1`.

**Example 1:**

![](https://assets.leetcode.com/uploads/2021/09/21/gridtxt.png)

> Input: grid = [[2,4],[6,8]], x = 2
>
> Output: 4
>
> Explanation: We can make every element equal to 4 by doing the following:
>
> - Add x to 2 once.
> - Subtract x from 6 once.
> - Subtract x from 8 twice.
>
> A total of 4 operations were used.

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/09/21/gridtxt-1.png)

> Input: grid = [[1,5],[2,3]], x = 1
>
> Output: 5
>
> Explanation: We can make every element equal to 3.

**Example 3:**

![](https://assets.leetcode.com/uploads/2021/09/21/gridtxt-2.png)

> Input: grid = [[1,2],[3,4]], x = 2
>
> Output: -1
>
> Explanation: It is impossible to make every element equal.

**Constraints:**

- `m == grid.length`
- `n == grid[i].length`
- `1 <= m, n <= 10^5`
- `1 <= m * n <= 10^5`
- `1 <= x, grid[i][j] <= 10^4`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º `m x n` çš„äºŒç»´æ•´æ•°ç½‘æ ¼ `grid` å’Œä¸€ä¸ªæ•´æ•° `x` ã€‚æ¯ä¸€æ¬¡æ“ä½œï¼Œä½ å¯ä»¥å¯¹ `grid` ä¸­çš„ä»»ä¸€å…ƒç´  **åŠ ** `x` æˆ– **å‡** `x` ã€‚

**å•å€¼ç½‘æ ¼** æ˜¯å…¨éƒ¨å…ƒç´ éƒ½ç›¸ç­‰çš„ç½‘æ ¼ã€‚

è¿”å›ä½¿ç½‘æ ¼åŒ–ä¸ºå•å€¼ç½‘æ ¼æ‰€éœ€çš„ **æœ€å°** æ“ä½œæ•°ã€‚å¦‚æœä¸èƒ½ï¼Œè¿”å› `-1` ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/09/21/gridtxt.png)

> **è¾“å…¥ï¼š** grid = [[2,4],[6,8]], x = 2
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** å¯ä»¥æ‰§è¡Œä¸‹è¿°æ“ä½œä½¿æ‰€æœ‰å…ƒç´ éƒ½ç­‰äº 4 ï¼š
>
> - 2 åŠ  x ä¸€æ¬¡ã€‚
> - 6 å‡ x ä¸€æ¬¡ã€‚
> - 8 å‡ x ä¸¤æ¬¡ã€‚
>
> å…±è®¡ 4 æ¬¡æ“ä½œã€‚

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/09/21/gridtxt-1.png)

> **è¾“å…¥ï¼š** grid = [[1,5],[2,3]], x = 1
>
> **è¾“å‡ºï¼š** 5
>
> **è§£é‡Šï¼š** å¯ä»¥ä½¿æ‰€æœ‰å…ƒç´ éƒ½ç­‰äº 3 ã€‚

**ç¤ºä¾‹ 3ï¼š**

![](https://assets.leetcode.com/uploads/2021/09/21/gridtxt-2.png)

> **è¾“å…¥ï¼š** grid = [[1,2],[3,4]], x = 2
>
> **è¾“å‡ºï¼š** -1
>
> **è§£é‡Šï¼š** æ— æ³•ä½¿æ‰€æœ‰å…ƒç´ ç›¸ç­‰ã€‚

**æç¤ºï¼š**

- `m == grid.length`
- `n == grid[i].length`
- `1 <= m, n <= 10^5`
- `1 <= m * n <= 10^5`
- `1 <= x, grid[i][j] <= 10^4`

## è§£é¢˜æ€è·¯

1. **åŒä½™æ€§æ£€æŸ¥**ï¼š

   - è‹¥å­˜åœ¨ä¸¤ä¸ªå…ƒç´  `a` å’Œ `b`ï¼Œä½¿å¾— `(a - b) % x !== 0`ï¼Œåˆ™æ— æ³•é€šè¿‡åŠ å‡ `x` çš„å€æ•°å°†å®ƒä»¬å˜æˆç›¸åŒçš„æ•°ï¼Œè¿”å› `-1`ã€‚

2. **é€‰æ‹©ç›®æ ‡æ•°**

   - ä¸ºäº†ä½¿æ€»æ“ä½œæ¬¡æ•°æœ€å°‘ï¼Œåº”å°†æ‰€æœ‰æ•°å­—è°ƒæ•´åˆ°**ä¸­ä½æ•°**ï¼Œå› ä¸ºä¸­ä½æ•°èƒ½æœ€å°åŒ–ç»å¯¹å·®ä¹‹å’Œã€‚
   - **ä¸ºä»€ä¹ˆæ˜¯ä¸­ä½æ•°ï¼Ÿ** åœ¨ä¸€ç»„æ•°ä¸­ï¼Œå°†æ‰€æœ‰æ•°è°ƒæ•´ä¸ºä¸­ä½æ•°å¯æœ€å°åŒ– `|nums[i] - target|` çš„æ€»å’Œã€‚

3. **è®¡ç®—æ€»æ“ä½œæ¬¡æ•°**

   - éå†æ‰€æœ‰å…ƒç´  `num`ï¼š
     - è®¡ç®—ä¸ä¸­ä½æ•° `mid` çš„å·®å€¼ `diff = |num - mid|`ã€‚
     - å¦‚æœ `diff % x !== 0`ï¼Œåˆ™è¯´æ˜æ— æ³•é€šè¿‡ `x` çš„åŠ å‡ä½¿å…¶ç­‰äº `mid`ï¼Œè¿”å› `-1`ã€‚
     - å¦åˆ™ï¼Œæ“ä½œæ¬¡æ•°ä¸º `diff / x`ï¼Œç´¯åŠ åˆ° `res`ã€‚

4. **è¿”å›ç»“æœ**
   - å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³å¯è¡Œæ€§æ¡ä»¶ï¼Œè¿”å›æœ€å°‘çš„æ€»æ“ä½œæ¬¡æ•° `res`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(m * n log (m * n))`

  - å°† `grid` å±•å¹³æˆä¸€ç»´æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(m * n)`ã€‚
  - å¯¹æ•°ç»„æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º `O(m * n log (m * n))`ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œéœ€è¦é¢å¤–å­˜å‚¨ä¸€ç»´æ•°ç»„ `nums`ï¼Œå¤§å°ä¸º `m * n`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[][]} grid
 * @param {number} x
 * @return {number}
 */
var minOperations = function (grid, x) {
	const nums = grid.flat(); // å°†äºŒç»´æ•°ç»„å±•å¹³æˆä¸€ç»´æ•°ç»„
	nums.sort((a, b) => a - b); // å¯¹æ•°ç»„æ’åº

	const mid = nums[Math.floor(nums.length / 2)]; // å–ä¸­ä½æ•°

	let res = 0;
	for (const num of nums) {
		const diff = Math.abs(num - mid);
		if (diff % x !== 0) return -1; // æ— æ³•é€šè¿‡åŠ å‡xå¾—åˆ°ä¸­ä½æ•°
		res += diff / x;
	}
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 462 | æœ€å°æ“ä½œæ¬¡æ•°ä½¿æ•°ç»„å…ƒç´ ç›¸ç­‰ II | [[âœ“]](/problem/0462.md) |  [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`æ’åº`](/tag/sorting.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/minimum-moves-to-equal-array-elements-ii) [ğŸ”—](https://leetcode.com/problems/minimum-moves-to-equal-array-elements-ii) |