---
title: 921. ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ 
description: LeetCode,921. ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ ,ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ ,Minimum Add to Make Parentheses Valid,è§£é¢˜æ€è·¯,æ ˆ,è´ªå¿ƒ,å­—ç¬¦ä¸²
keywords:
  - LeetCode
  - 921. ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ 
  - ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ 
  - Minimum Add to Make Parentheses Valid
  - è§£é¢˜æ€è·¯
  - æ ˆ
  - è´ªå¿ƒ
  - å­—ç¬¦ä¸²
---

# 921. ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ 

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`è´ªå¿ƒ`](/tag/greedy.md) [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/minimum-add-to-make-parentheses-valid) [`LeetCode`](https://leetcode.com/problems/minimum-add-to-make-parentheses-valid)

## é¢˜ç›®

A parentheses string is valid if and only if:

- It is the empty string,
- It can be written as `AB` (`A` concatenated with `B`), where `A` and `B` are valid strings, or
- It can be written as `(A)`, where `A` is a valid string.

You are given a parentheses string `s`. In one move, you can insert a
parenthesis at any position of the string.

- For example, if `s = "()))"`, you can insert an opening parenthesis to be `"(**(**)))"` or a closing parenthesis to be `"())**)**)"`.

Return _the minimum number of moves required to make_`s` _valid_.

**Example 1:**

> Input: s = `"())"`
>
> Output: 1

**Example 2:**

> Input: s = `"((("`
>
> Output: 3

**Constraints:**

- `1 <= s.length <= 1000`
- `s[i]` is either `'('` or `')'`.

## é¢˜ç›®å¤§æ„

åªæœ‰æ»¡è¶³ä¸‹é¢å‡ ç‚¹ä¹‹ä¸€ï¼Œæ‹¬å·å­—ç¬¦ä¸²æ‰æ˜¯æœ‰æ•ˆçš„ï¼š

- å®ƒæ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œæˆ–è€…
- å®ƒå¯ä»¥è¢«å†™æˆ `AB` ï¼ˆ`A` ä¸ `B` è¿æ¥ï¼‰, å…¶ä¸­ `A` å’Œ `B` éƒ½æ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ï¼Œæˆ–è€…
- å®ƒå¯ä»¥è¢«å†™ä½œ `(A)`ï¼Œå…¶ä¸­ `A` æ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ã€‚

ç»™å®šä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸² `s` ï¼Œåœ¨æ¯ä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ éƒ½å¯ä»¥åœ¨å­—ç¬¦ä¸²çš„ä»»ä½•ä½ç½®æ’å…¥ä¸€ä¸ªæ‹¬å·

- ä¾‹å¦‚ï¼Œå¦‚æœ `s = "()))"` ï¼Œä½ å¯ä»¥æ’å…¥ä¸€ä¸ªå¼€å§‹æ‹¬å·ä¸º `"(()))"` æˆ–ç»“æŸæ‹¬å·ä¸º `"())))"` ã€‚

è¿”å› _ä¸ºä½¿ç»“æœå­—ç¬¦ä¸²`s` æœ‰æ•ˆè€Œå¿…é¡»æ·»åŠ çš„æœ€å°‘æ‹¬å·æ•°_ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** s = `"())"`
>
> **è¾“å‡ºï¼š** 1

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = `"((("`
>
> **è¾“å‡ºï¼š** 3

**æç¤ºï¼š**

- `1 <= s.length <= 1000`
- `s` åªåŒ…å« `'('` å’Œ `')'` å­—ç¬¦ã€‚

## è§£é¢˜æ€è·¯

1. **åˆå§‹åŒ–ä¸¤ä¸ªå˜é‡**ï¼š

   - `needLeft`ï¼šæœªåŒ¹é…çš„å·¦æ‹¬å·æ•°ï¼Œåˆå§‹å€¼ä¸º 0ã€‚
   - `needRight`ï¼šéœ€è¦çš„å³æ‹¬å·æ•°ï¼Œåˆå§‹å€¼ä¸º 0ã€‚

2. **éå†å­—ç¬¦ä¸²**ï¼š

   - å¯¹äºæ¯ä¸ªå­—ç¬¦ï¼š
     - å¦‚æœæ˜¯å·¦æ‹¬å· `'('`ï¼Œå°† `needLeft` å˜é‡åŠ  1ã€‚
     - å¦‚æœæ˜¯å³æ‹¬å· `')'`ï¼š
       - å¦‚æœå­˜åœ¨æœªåŒ¹é…çš„å·¦æ‹¬å·ï¼ˆå³ `needLeft > 0`ï¼‰ï¼Œåˆ™å‡å°‘ `needLeft`ï¼Œå› ä¸ºæ‰¾åˆ°äº†ä¸€ä¸ªå³æ‹¬å·å¯ä»¥ä¸ä¹‹åŒ¹é…ã€‚
       - å¦åˆ™ï¼Œå¢åŠ  `needRight`ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªæœªåŒ¹é…çš„å³æ‹¬å·ã€‚

3. **æœ€ç»ˆç»“æœ**ï¼š
   - éå†å®Œæˆåï¼Œå‰©ä½™çš„ `needLeft` è¡¨ç¤ºæœªåŒ¹é…çš„å·¦æ‹¬å·ï¼Œ`needRight` è¡¨ç¤ºæœªåŒ¹é…çš„å³æ‹¬å·ã€‚ä¸¤è€…ä¹‹å’Œå°±æ˜¯éœ€è¦æ·»åŠ çš„æ‹¬å·æ•°é‡ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**:` O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸² `s` çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéœ€è¦éå†å­—ç¬¦ä¸²ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**:` O(1)`ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨äº†ä¸¤ä¸ªè®¡æ•°å™¨å˜é‡ `needLeft` å’Œ `needRight`ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var minAddToMakeValid = function (s) {
	let needLeft = 0, // è®°å½•å·¦æ‹¬å·çš„éœ€æ±‚é‡
		needRight = 0; // è®°å½•å³æ‹¬å·çš„éœ€æ±‚é‡
	for (let char of s) {
		if (char == '(') {
			// å¯¹å³æ‹¬å·çš„éœ€æ±‚ + 1
			needRight++;
		} else {
			if (needRight > 0) {
				// å¯¹å³æ‹¬å·çš„éœ€æ±‚ - 1
				needRight--;
			} else {
				// éœ€æ’å…¥ä¸€ä¸ªå·¦æ‹¬å·
				needLeft++;
			}
		}
	}
	return needLeft + needRight;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1963 | ä½¿å­—ç¬¦ä¸²å¹³è¡¡çš„æœ€å°äº¤æ¢æ¬¡æ•° | [[âœ“]](/problem/1963.md) |  [`æ ˆ`](/tag/stack.md) [`è´ªå¿ƒ`](/tag/greedy.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/minimum-number-of-swaps-to-make-the-string-balanced) [ğŸ”—](https://leetcode.com/problems/minimum-number-of-swaps-to-make-the-string-balanced) |