---
title: 1652. æ‹†ç‚¸å¼¹
description: LeetCode 1652. æ‹†ç‚¸å¼¹é¢˜è§£ï¼ŒDefuse the Bombï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1652. æ‹†ç‚¸å¼¹
  - æ‹†ç‚¸å¼¹
  - Defuse the Bomb
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - æ»‘åŠ¨çª—å£
---

# 1652. æ‹†ç‚¸å¼¹

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/defuse-the-bomb) [`LeetCode`](https://leetcode.com/problems/defuse-the-bomb)

## é¢˜ç›®

You have a bomb to defuse, and your time is running out! Your informer will
provide you with a **circular** array `code` of length of `n` and a key `k`.

To decrypt the code, you must replace every number. All the numbers are
replaced **simultaneously**.

- If `k > 0`, replace the `ith` number with the sum of the **next** `k` numbers.
- If `k < 0`, replace the `ith` number with the sum of the **previous** `k` numbers.
- If `k == 0`, replace the `ith` number with `0`.

As `code` is circular, the next element of `code[n-1]` is `code[0]`, and the
previous element of `code[0]` is `code[n-1]`.

Given the **circular** array `code` and an integer key `k`, return _the
decrypted code to defuse the bomb_!

**Example 1:**

> Input: code = [5,7,1,4], k = 3
>
> Output: [12,10,16,13]
>
> Explanation: Each number is replaced by the sum of the next 3 numbers. The decrypted code is [7+1+4, 1+4+5, 4+5+7, 5+7+1]. Notice that the numbers wrap around.

**Example 2:**

> Input: code = [1,2,3,4], k = 0
>
> Output: [0,0,0,0]
>
> Explanation: When k is zero, the numbers are replaced by 0.

**Example 3:**

> Input: code = [2,4,9,3], k = -2
>
> Output: [12,5,6,13]
>
> Explanation: The decrypted code is [3+9, 2+3, 4+2, 9+4]. Notice that the numbers wrap around again. If k is negative, the sum is of the **previous** numbers.

**Constraints:**

- `n == code.length`
- `1 <= n <= 100`
- `1 <= code[i] <= 100`
- `-(n - 1) <= k <= n - 1`

## é¢˜ç›®å¤§æ„

ä½ æœ‰ä¸€ä¸ªç‚¸å¼¹éœ€è¦æ‹†é™¤ï¼Œæ—¶é—´ç´§è¿«ï¼ä½ çš„æƒ…æŠ¥å‘˜ä¼šç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„ **å¾ªç¯** æ•°ç»„ `code` ä»¥åŠä¸€ä¸ªå¯†é’¥ `k` ã€‚

ä¸ºäº†è·å¾—æ­£ç¡®çš„å¯†ç ï¼Œä½ éœ€è¦æ›¿æ¢æ‰æ¯ä¸€ä¸ªæ•°å­—ã€‚æ‰€æœ‰æ•°å­—ä¼š **åŒæ—¶** è¢«æ›¿æ¢ã€‚

- å¦‚æœ `k > 0` ï¼Œå°†ç¬¬ `i` ä¸ªæ•°å­—ç”¨ **æ¥ä¸‹æ¥** `k` ä¸ªæ•°å­—ä¹‹å’Œæ›¿æ¢ã€‚
- å¦‚æœ `k < 0` ï¼Œå°†ç¬¬ `i` ä¸ªæ•°å­—ç”¨ **ä¹‹å‰** `k` ä¸ªæ•°å­—ä¹‹å’Œæ›¿æ¢ã€‚
- å¦‚æœ `k == 0` ï¼Œå°†ç¬¬ `i` ä¸ªæ•°å­—ç”¨ `0` æ›¿æ¢ã€‚

ç”±äº `code` æ˜¯å¾ªç¯çš„ï¼Œ `code[n-1]` ä¸‹ä¸€ä¸ªå…ƒç´ æ˜¯ `code[0]` ï¼Œä¸” `code[0]` å‰ä¸€ä¸ªå…ƒç´ æ˜¯ `code[n-1]` ã€‚

ç»™ä½  **å¾ªç¯** æ•°ç»„ `code` å’Œæ•´æ•°å¯†é’¥ `k` ï¼Œè¯·ä½ è¿”å›è§£å¯†åçš„ç»“æœæ¥æ‹†é™¤ç‚¸å¼¹ï¼

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** code = [5,7,1,4], k = 3
>
> **è¾“å‡ºï¼š**[12,10,16,13]
>
> **è§£é‡Šï¼š** æ¯ä¸ªæ•°å­—éƒ½è¢«æ¥ä¸‹æ¥ 3 ä¸ªæ•°å­—ä¹‹å’Œæ›¿æ¢ã€‚è§£å¯†åçš„å¯†ç ä¸º [7+1+4, 1+4+5, 4+5+7, 5+7+1]ã€‚æ³¨æ„åˆ°æ•°ç»„æ˜¯å¾ªç¯è¿æ¥çš„ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** code = [1,2,3,4], k = 0
>
> **è¾“å‡ºï¼š**[0,0,0,0]
>
> **è§£é‡Šï¼š** å½“ k ä¸º 0 æ—¶ï¼Œæ‰€æœ‰æ•°å­—éƒ½è¢« 0 æ›¿æ¢ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** code = [2,4,9,3], k = -2
>
> **è¾“å‡ºï¼š**[12,5,6,13]
>
> **è§£é‡Šï¼š** è§£å¯†åçš„å¯†ç ä¸º [3+9, 2+3, 4+2, 9+4] ã€‚æ³¨æ„åˆ°æ•°ç»„æ˜¯å¾ªç¯è¿æ¥çš„ã€‚å¦‚æœ k æ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆå’Œä¸º **ä¹‹å‰** çš„æ•°å­—ã€‚

**æç¤ºï¼š**

- `n == code.length`
- `1 <= n <= 100`
- `1 <= code[i] <= 100`
- `-(n - 1) <= k <= n - 1`

## è§£é¢˜æ€è·¯

1. åˆå§‹æ»‘åŠ¨çª—å£

- ä½¿ç”¨å˜é‡ `sum` æ¥è®°å½•ç¬¬ä¸€ä¸ªçª—å£çš„å’Œã€‚
- å¯¹äº `k > 0`ï¼Œåˆå§‹çª—å£èŒƒå›´æ˜¯æ•°ç»„ç¬¬ 1 åˆ°ç¬¬ `k` ä¸ªå…ƒç´ ã€‚
- å¯¹äº `k < 0`ï¼Œåˆå§‹çª—å£èŒƒå›´æ˜¯æ•°ç»„å€’æ•°ç¬¬ 1 åˆ°å€’æ•°ç¬¬ `|k|` ä¸ªå…ƒç´ ã€‚
- é€šè¿‡å¾ªç¯è®¡ç®—åˆå§‹çª—å£çš„å’Œ `sum`ã€‚

2. æ»‘åŠ¨çª—å£éå†æ•°ç»„

- ä»ç´¢å¼• `i = 1` å¼€å§‹ï¼Œé€æ­¥æ›´æ–° `sum` å’Œç»“æœæ•°ç»„ `res`ï¼š
  - **å½“ `k > 0` æ—¶**ï¼š
    - å°†çª—å£çš„å³ç«¯æ‰©å±•åˆ° `(i + k) % n`ã€‚
    - ä»çª—å£ä¸­ç§»é™¤çš„å…ƒç´ æ˜¯å½“å‰ç´¢å¼• `i` çš„å…ƒç´ ã€‚
  - **å½“ `k < 0` æ—¶**ï¼š
    - ä»çª—å£ä¸­ç§»é™¤çš„å…ƒç´ æ˜¯çª—å£å·¦ç«¯ `(i + k - 1 + n) % n`ã€‚
    - å°†çª—å£çš„å·¦ç«¯æ‰©å±•åˆ° `(i - 1 + n) % n`ã€‚
- å°†æ›´æ–°åçš„ `sum` è¿½åŠ åˆ°ç»“æœæ•°ç»„ `res`ã€‚

3. æœ€ç»ˆè¿”å›ç»“æœæ•°ç»„ `res`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n + |k|)`ï¼Œåˆå§‹çª—å£å’Œè®¡ç®—éœ€è¦ `O(|k|)`ï¼Œæ•°ç»„éå†å’Œæ»‘åŠ¨çª—å£æ›´æ–°éœ€è¦ `O(n)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œç»“æœæ•°ç»„ `res` å ç”¨ `O(n)` ç©ºé—´ï¼Œå…¶ä½™å˜é‡ä¸ºå¸¸æ•°çº§ç©ºé—´ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} code
 * @param {number} k
 * @return {number[]}
 */
var decrypt = function (code, k) {
	const n = code.length;

	// å¦‚æœ k == 0ï¼Œè¿”å›ä¸€ä¸ªå…¨ä¸º 0 çš„æ•°ç»„
	if (k == 0) return new Array(n).fill(0);

	const direction = k > 0 ? 1 : -1; // ç¡®å®šæ–¹å‘
	let sum = 0;
	for (let i = 1; i <= Math.abs(k); i++) {
		const idx = (0 + i * direction + n) % n;
		sum += code[idx];
	}

	// åˆå§‹åŒ–ç»“æœæ•°ç»„å¹¶åŠ å…¥ç¬¬ä¸€ä¸ªçª—å£çš„å’Œ
	let res = [sum];

	// éå†æ•°ç»„æ›´æ–°çª—å£å’Œç»“æœ
	for (let i = 1; i < n; i++) {
		if (k > 0) {
			// k > 0 æ—¶ï¼Œæ‰©å±•çª—å£å³ç«¯ (i + k) % nï¼Œç§»é™¤çª—å£å·¦ç«¯ i
			sum = sum + code[(i + k) % n] - code[i];
		} else {
			// k < 0 æ—¶ï¼Œç§»é™¤çª—å£å·¦ç«¯ (i + k - 1 + n) % nï¼Œæ‰©å±•çª—å£å·¦ç«¯ (i - 1 + n) % n
			sum = sum - code[(i + k - 1 + n) % n] + code[(i - 1 + n) % n];
		}
		res.push(sum);
	}

	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 2490 | å›ç¯å¥ | [[âœ“]](/problem/2490.md) |  [`å­—ç¬¦ä¸²`](/tag/string.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/circular-sentence) [ğŸ”—](https://leetcode.com/problems/circular-sentence) |
| 2515 | åˆ°ç›®æ ‡å­—ç¬¦ä¸²çš„æœ€çŸ­è·ç¦» |  |  [`æ•°ç»„`](/tag/array.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/shortest-distance-to-target-string-in-a-circular-array) [ğŸ”—](https://leetcode.com/problems/shortest-distance-to-target-string-in-a-circular-array) |
| 2516 | æ¯ç§å­—ç¬¦è‡³å°‘å– K ä¸ª | [[âœ“]](/problem/2516.md) |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/take-k-of-each-character-from-left-and-right) [ğŸ”—](https://leetcode.com/problems/take-k-of-each-character-from-left-and-right) |