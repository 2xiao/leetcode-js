---
title: 2116. åˆ¤æ–­ä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆ
description: LeetCode 2116. åˆ¤æ–­ä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆé¢˜è§£ï¼ŒCheck if a Parentheses String Can Be Validï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2116. åˆ¤æ–­ä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆ
  - åˆ¤æ–­ä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆ
  - Check if a Parentheses String Can Be Valid
  - è§£é¢˜æ€è·¯
  - æ ˆ
  - è´ªå¿ƒ
  - å­—ç¬¦ä¸²
---

# 2116. åˆ¤æ–­ä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆ

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`è´ªå¿ƒ`](/tag/greedy.md) [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/check-if-a-parentheses-string-can-be-valid) [`LeetCode`](https://leetcode.com/problems/check-if-a-parentheses-string-can-be-valid)

## é¢˜ç›®

A parentheses string is a **non-empty** string consisting only of `'('` and
`')'`. It is valid if **any** of the following conditions is **true** :

- It is `()`.
- It can be written as `AB` (`A` concatenated with `B`), where `A` and `B` are valid parentheses strings.
- It can be written as `(A)`, where `A` is a valid parentheses string.

You are given a parentheses string `s` and a string `locked`, both of length
`n`. `locked` is a binary string consisting only of `'0'`s and `'1'`s. For
**each** index `i` of `locked`,

- If `locked[i]` is `'1'`, you **cannot** change `s[i]`.
- But if `locked[i]` is `'0'`, you **can** change `s[i]` to either `'('` or `')'`.

Return `true` _if you can make`s` a valid parentheses string_. Otherwise,
return `false`.

**Example 1:**

![](https://assets.leetcode.com/uploads/2021/11/06/eg1.png)

> Input: s = "))()))", locked = "010100"
>
> Output: true
>
> Explanation: locked[1] == '1' and locked[3] == '1', so we cannot change s[1] or s[3].
>
> We change s[0] and s[4] to '(' while leaving s[2] and s[5] unchanged to make s valid.

**Example 2:**

> Input: s = "()()", locked = "0000"
>
> Output: true
>
> Explanation: We do not need to make any changes because s is already valid.

**Example 3:**

> Input: s = ")", locked = "0"
>
> Output: false
>
> Explanation: locked permits us to change s[0].
>
> Changing s[0] to either '(' or ')' will not make s valid.

**Constraints:**

- `n == s.length == locked.length`
- `1 <= n <= 10^5`
- `s[i]` is either `'('` or `')'`.
- `locked[i]` is either `'0'` or `'1'`.

## é¢˜ç›®å¤§æ„

ä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸²æ˜¯åªç”± `'('` å’Œ `')'` ç»„æˆçš„ **éç©º** å­—ç¬¦ä¸²ã€‚å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²æ»¡è¶³ä¸‹é¢ **ä»»æ„** ä¸€ä¸ªæ¡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯æœ‰æ•ˆçš„ï¼š

- å­—ç¬¦ä¸²ä¸º `()`.
- å®ƒå¯ä»¥è¡¨ç¤ºä¸º `AB`ï¼ˆ`A` ä¸ `B` è¿æ¥ï¼‰ï¼Œå…¶ä¸­`A` å’Œ `B` éƒ½æ˜¯æœ‰æ•ˆæ‹¬å·å­—ç¬¦ä¸²ã€‚
- å®ƒå¯ä»¥è¡¨ç¤ºä¸º `(A)` ï¼Œå…¶ä¸­ `A` æ˜¯ä¸€ä¸ªæœ‰æ•ˆæ‹¬å·å­—ç¬¦ä¸²ã€‚

ç»™ä½ ä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªå­—ç¬¦ä¸² `locked` ï¼Œä¸¤è€…é•¿åº¦éƒ½ä¸º `n` ã€‚`locked` æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼ŒåªåŒ…å« `'0'` å’Œ
`'1'` ã€‚å¯¹äº `locked` ä¸­ **æ¯ä¸€ä¸ª** ä¸‹æ ‡ `i` ï¼š

- å¦‚æœ `locked[i]` æ˜¯ `'1'` ï¼Œä½  **ä¸èƒ½** æ”¹å˜ `s[i]` ã€‚
- å¦‚æœ `locked[i]` æ˜¯ `'0'` ï¼Œä½  **å¯ä»¥** å°† `s[i]` å˜ä¸º `'('` æˆ–è€… `')'` ã€‚

å¦‚æœä½ å¯ä»¥å°† `s` å˜ä¸ºæœ‰æ•ˆæ‹¬å·å­—ç¬¦ä¸²ï¼Œè¯·ä½ è¿”å› `true` ï¼Œå¦åˆ™è¿”å› `false` ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/11/06/eg1.png)

> **è¾“å…¥ï¼š** s = "))()))", locked = "010100"
>
> **è¾“å‡ºï¼š** true
>
> **è§£é‡Šï¼š** locked[1] == '1' å’Œ locked[3] == '1' ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•æ”¹å˜ s[1] æˆ–è€… s[3] ã€‚
>
> æˆ‘ä»¬å¯ä»¥å°† s[0] å’Œ s[4] å˜ä¸º '(' ï¼Œä¸æ”¹å˜ s[2] å’Œ s[5] ï¼Œä½¿ s å˜ä¸ºæœ‰æ•ˆå­—ç¬¦ä¸²ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = "()()", locked = "0000"
>
> **è¾“å‡ºï¼š** true
>
> **è§£é‡Šï¼š** æˆ‘ä»¬ä¸éœ€è¦åšä»»ä½•æ”¹å˜ï¼Œå› ä¸º s å·²ç»æ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²äº†ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** s = ")", locked = "0"
>
> **è¾“å‡ºï¼š** false
>
> **è§£é‡Šï¼š** locked å…è®¸æ”¹å˜ s[0] ã€‚
>
> ä½†æ— è®ºå°† s[0] å˜ä¸º '(' æˆ–è€… ')' éƒ½æ— æ³•ä½¿ s å˜ä¸ºæœ‰æ•ˆå­—ç¬¦ä¸²ã€‚

**æç¤ºï¼š**

- `n == s.length == locked.length`
- `1 <= n <= 10^5`
- `s[i]` è¦ä¹ˆæ˜¯ `'('` è¦ä¹ˆæ˜¯ `')'` ã€‚
- `locked[i]` è¦ä¹ˆæ˜¯ `'0'` è¦ä¹ˆæ˜¯ `'1'` ã€‚

## è§£é¢˜æ€è·¯

1. **é•¿åº¦çº¦æŸ**

   - å¦‚æœå­—ç¬¦ä¸²é•¿åº¦ `s.length` æ˜¯å¥‡æ•°ï¼Œåˆ™ç›´æ¥è¿”å› `false`ï¼Œå› ä¸ºæœ‰æ•ˆæ‹¬å·å­—ç¬¦ä¸²é•¿åº¦å¿…ä¸ºå¶æ•°ã€‚

2. **è´ªå¿ƒéªŒè¯**
   - ä»å·¦å‘å³éå†ï¼š
     - ç”¨ä¸€ä¸ªè®¡æ•°å™¨ `openCount` è¡¨ç¤ºâ€œå¯ç”¨çš„å·¦æ‹¬å·æ•°é‡â€ï¼ŒåŒ…æ‹¬æœªé”å®šçš„å­—ç¬¦ã€‚
     - å¦‚æœé‡åˆ° `'('` æˆ–æœªé”å®šçš„å­—ç¬¦ `locked[i] == '0'`ï¼Œåˆ™ `openCount++`ã€‚
     - å¦‚æœé‡åˆ° `')'` å¹¶ä¸” `locked[i] == '1'`ï¼Œåˆ™ `openCount--`ã€‚
     - å¦‚æœ `openCount` å°äº 0ï¼Œè¯´æ˜å³æ‹¬å·å¤šäºå¯ç”¨çš„å·¦æ‹¬å·ï¼Œç›´æ¥è¿”å› `false`ã€‚
   - ä»å³å‘å·¦éå†ï¼š
     - ç”¨ä¸€ä¸ªè®¡æ•°å™¨ `closeCount` è¡¨ç¤ºâ€œå¯ç”¨çš„å³æ‹¬å·æ•°é‡â€ã€‚
     - åŒç†ï¼Œæ›´æ–° `closeCount`ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦æ»¡è¶³æ¡ä»¶ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œä¸¤æ¬¡éå†å­—ç¬¦ä¸²ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä½¿ç”¨äº†å¸¸æ•°ç©ºé—´æ¥å­˜å‚¨è®¡æ•°å™¨ `openCount` å’Œ `closeCount`ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @param {string} locked
 * @return {boolean}
 */
var canBeValid = function (s, locked) {
	if (s.length % 2 == 1) return false;

	let openCount = 0;
	for (let i = 0; i < s.length; i++) {
		if (s[i] == '(' || locked[i] == '0') {
			openCount++;
		} else {
			openCount--;
		}
		if (openCount < 0) return false; // å³æ‹¬å·è¿‡å¤š
	}

	let closeCount = 0;
	for (let i = s.length - 1; i >= 0; i--) {
		if (s[i] == ')' || locked[i] == '0') {
			closeCount++;
		} else {
			closeCount--;
		}
		if (closeCount < 0) return false; // å·¦æ‹¬å·è¿‡å¤š
	}

	return true;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 20 | æœ‰æ•ˆçš„æ‹¬å· | [[âœ“]](/problem/0020.md) |  [`æ ˆ`](/tag/stack.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/valid-parentheses) [ğŸ”—](https://leetcode.com/problems/valid-parentheses) |
| 22 | æ‹¬å·ç”Ÿæˆ | [[âœ“]](/problem/0022.md) |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`å›æº¯`](/tag/backtracking.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/generate-parentheses) [ğŸ”—](https://leetcode.com/problems/generate-parentheses) |
| 678 | æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸² | [[âœ“]](/problem/0678.md) |  [`æ ˆ`](/tag/stack.md) [`è´ªå¿ƒ`](/tag/greedy.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/valid-parenthesis-string) [ğŸ”—](https://leetcode.com/problems/valid-parenthesis-string) |
| 1249 | ç§»é™¤æ— æ•ˆçš„æ‹¬å· |  |  [`æ ˆ`](/tag/stack.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/minimum-remove-to-make-valid-parentheses) [ğŸ”—](https://leetcode.com/problems/minimum-remove-to-make-valid-parentheses) |
| 2267 | æ£€æŸ¥æ˜¯å¦æœ‰åˆæ³•æ‹¬å·å­—ç¬¦ä¸²è·¯å¾„ |  |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`çŸ©é˜µ`](/tag/matrix.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/check-if-there-is-a-valid-parentheses-string-path) [ğŸ”—](https://leetcode.com/problems/check-if-there-is-a-valid-parentheses-string-path) |