---
title: 89. æ ¼é›·ç¼–ç 
description: LeetCode 89. æ ¼é›·ç¼–ç é¢˜è§£ï¼ŒGray Codeï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 89. æ ¼é›·ç¼–ç 
  - æ ¼é›·ç¼–ç 
  - Gray Code
  - è§£é¢˜æ€è·¯
  - ä½è¿ç®—
  - æ•°å­¦
  - å›æº¯
---

# 89. æ ¼é›·ç¼–ç 

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°å­¦`](/tag/math.md) [`å›æº¯`](/tag/backtracking.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/gray-code) [`LeetCode`](https://leetcode.com/problems/gray-code)

## é¢˜ç›®

An **n-bit gray code sequence** is a sequence of `2n` integers where:

- Every integer is in the **inclusive** range `[0, 2n - 1]`,
- The first integer is `0`,
- An integer appears **no more than once** in the sequence,
- The binary representation of every pair of **adjacent** integers differs by **exactly one bit** , and
- The binary representation of the **first** and **last** integers differs by **exactly one bit**.

Given an integer `n`, return _any valid**n-bit gray code sequence**_.

**Example 1:**

> Input: n = 2
>
> Output: [0,1,3,2]
>
> Explanation:
>
> The binary representation of [0,1,3,2] is [00,01,11,10].
>
> - 0 _0_ and 0 _1_ differ by one bit
> - _0_ 1 and _1_ 1 differ by one bit
> - 1 _1_ and 1 _0_ differ by one bit
> - _1_ 0 and _0_ 0 differ by one bit
>
> [0,2,3,1] is also a valid gray code sequence, whose binary representation is [00,10,11,01].
>
> - _0_ 0 and _1_ 0 differ by one bit
> - 1 _0_ and 1 _1_ differ by one bit
> - _1_ 1 and _0_ 1 differ by one bit
> - 0 _1_ and 0 _0_ differ by one bit

**Example 2:**

> Input: n = 1
>
> Output: [0,1]

**Constraints:**

- `1 <= n <= 16`

## é¢˜ç›®å¤§æ„

**n ä½æ ¼é›·ç åºåˆ—** æ˜¯ä¸€ä¸ªç”± `2n` ä¸ªæ•´æ•°ç»„æˆçš„åºåˆ—ï¼Œå…¶ä¸­ï¼š

- æ¯ä¸ªæ•´æ•°éƒ½åœ¨èŒƒå›´ `[0, 2n - 1]` å†…ï¼ˆå« `0` å’Œ `2n - 1`ï¼‰
- ç¬¬ä¸€ä¸ªæ•´æ•°æ˜¯ `0`
- ä¸€ä¸ªæ•´æ•°åœ¨åºåˆ—ä¸­å‡ºç° **ä¸è¶…è¿‡ä¸€æ¬¡**
- æ¯å¯¹ **ç›¸é‚»** æ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤º **æ°å¥½ä¸€ä½ä¸åŒ** ï¼Œä¸”
- **ç¬¬ä¸€ä¸ª** å’Œ **æœ€åä¸€ä¸ª** æ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤º **æ°å¥½ä¸€ä½ä¸åŒ**

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¿”å›ä»»ä¸€æœ‰æ•ˆçš„ **n ä½æ ¼é›·ç åºåˆ—** ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** n = 2
>
> **è¾“å‡ºï¼š**[0,1,3,2]
>
> **è§£é‡Šï¼š**
>
> [0,1,3,2] çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯ [00,01,11,10] ã€‚
>
> - 0** _0_** å’Œ 0 _**1**_ æœ‰ä¸€ä½ä¸åŒ
> - _**0**_ 1 å’Œ _**1**_ 1 æœ‰ä¸€ä½ä¸åŒ
> - 1 _**1**_ å’Œ 1 _**0**_ æœ‰ä¸€ä½ä¸åŒ
> - _**1**_ 0 å’Œ _**0**_ 0 æœ‰ä¸€ä½ä¸åŒ
>
> [0,2,3,1] ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ ¼é›·ç åºåˆ—ï¼Œå…¶äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯ [00,10,11,01] ã€‚
>
> - _**0**_ 0 å’Œ _**1**_ 0 æœ‰ä¸€ä½ä¸åŒ
> - 1 _**0**_ å’Œ 1 _**1**_ æœ‰ä¸€ä½ä¸åŒ
> - _**1**_ 1 å’Œ _**0**_ 1 æœ‰ä¸€ä½ä¸åŒ
> - 0 _**1**_ å’Œ 0 _**0**_ æœ‰ä¸€ä½ä¸åŒ

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** n = 1
>
> **è¾“å‡ºï¼š**[0,1]

**æç¤ºï¼š**

- `1 <= n <= 16`

## è§£é¢˜æ€è·¯

1. **çŠ¶æ€è®°å½•**ï¼š

   - ä½¿ç”¨ä¸€ä¸ªæ•°ç»„ `res` ä¿å­˜å½“å‰çš„ç»“æœåºåˆ—ã€‚
   - ä½¿ç”¨ä¸€ä¸ªé›†åˆ `used` è®°å½•å·²ç»åŠ å…¥åºåˆ—çš„æ•°å­—ï¼Œé¿å…é‡å¤ã€‚
   - åˆå§‹åŒ–ç»“æœæ•°ç»„ `res` å’Œé›†åˆ `used`ï¼Œå°†èµ·ç‚¹ `0` åŠ å…¥å…¶ä¸­ã€‚

2. **é€’å½’è¿‡ç¨‹**ï¼š

   - ä½¿ç”¨å›æº¯æ³•ï¼Œé€’å½’å°è¯•å°†ä¸‹ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°å­—åŠ å…¥åˆ°ç»“æœåºåˆ—ä¸­ã€‚
   - æ¯æ¬¡å°è¯•ä»å½“å‰æ•°å­—å¼€å§‹ï¼Œç¿»è½¬å…¶äºŒè¿›åˆ¶è¡¨ç¤ºçš„æŸä¸€ä½ä»¥ç”Ÿæˆä¸€ä¸ªæ–°æ•°å­—ã€‚
   - ç¿»è½¬ç¬¬ `i` ä½å¯ä»¥é€šè¿‡å…¬å¼ `num ^ (1 << i)` å®ç°ã€‚
   - å¦‚æœæ–°æ•°å­—æœªè¢«ä½¿ç”¨ï¼Œå°†å…¶åŠ å…¥åºåˆ—ï¼Œå¹¶ç»§ç»­é€’å½’ã€‚
   - å¦‚æœæ— æ³•ç»§ç»­ï¼ˆå½“å‰è·¯å¾„æ— æ³•è¦†ç›–æ‰€æœ‰æ•°å­—ï¼‰ï¼Œå›æº¯å¹¶å°è¯•å…¶ä»–å¯èƒ½çš„è·¯å¾„ã€‚

3. **é€’å½’é€€å‡ºæ¡ä»¶**ï¼š
   - å½“ç»“æœåºåˆ—é•¿åº¦è¾¾åˆ° `2^n`ï¼Œè¯´æ˜æ‰€æœ‰æ•°å­—å‡å·²è®¿é—®ï¼Œè¿”å›åºåˆ—ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(2^n * n)`ï¼Œå›æº¯ä¼šå°è¯•æ‰€æœ‰å¯èƒ½çš„æ•°å­—ç»„åˆï¼Œæœ€å¤šå°è¯• `2^n` ä¸ªæ•°å­—ï¼Œæ¯æ¬¡éœ€è¦éå† `n` ä½ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(2^n)`
  - é€’å½’æ ˆæ·±åº¦æœ€å¤šä¸º `O(2^n)`ã€‚
  - `used` é›†åˆå­˜å‚¨æœ€å¤š `2^n` ä¸ªæ•°å­—ï¼Œç©ºé—´å¤æ‚åº¦ä¸º `O(2^n)`ã€‚
  - æ•´ä½“ç©ºé—´å¤æ‚åº¦ä¸º `O(2^n)`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} n
 * @return {number[]}
 */
var grayCode = function (n) {
	let res = [0]; // åˆå§‹åºåˆ—
	let used = new Set([0]); // è®°å½•å·²ä½¿ç”¨çš„æ•°å­—

	const backtrack = (num) => {
		// å¦‚æœåºåˆ—é•¿åº¦è¾¾åˆ° 2^nï¼Œè¿”å› true
		if (res.length === Math.pow(2, n)) {
			return true;
		}

		// éå†æ¯ä¸€ä½ï¼Œå°è¯•ç¿»è½¬
		for (let i = 0; i < n; i++) {
			const next = num ^ (1 << i); // ç¿»è½¬ç¬¬ i ä½
			if (used.has(next)) continue; // å¦‚æœå·²ç»ä½¿ç”¨è¿‡ï¼Œè·³è¿‡

			res.push(next); // å°†æ•°å­—åŠ å…¥åºåˆ—
			used.add(next); // æ ‡è®°ä¸ºå·²ä½¿ç”¨

			if (backtrack(next)) return true; // é€’å½’ï¼Œå¦‚æœæˆåŠŸï¼Œç›´æ¥è¿”å›

			// å›æº¯
			res.pop();
			used.delete(next);
		}

		return false; // æ— æ³•ç»§ç»­æ‰©å±•ï¼Œè¿”å› false
	};

	backtrack(0); // ä» 0 å¼€å§‹ç”Ÿæˆåºåˆ—
	return res; // è¿”å›ç»“æœ
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 717 | 1 æ¯”ç‰¹ä¸ 2 æ¯”ç‰¹å­—ç¬¦ | [[âœ“]](/problem/0717.md) |  [`æ•°ç»„`](/tag/array.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/1-bit-and-2-bit-characters) [ğŸ”—](https://leetcode.com/problems/1-bit-and-2-bit-characters) |