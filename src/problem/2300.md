---
title: 2300. å’’è¯­å’Œè¯æ°´çš„æˆåŠŸå¯¹æ•°
description: LeetCode 2300. å’’è¯­å’Œè¯æ°´çš„æˆåŠŸå¯¹æ•°é¢˜è§£ï¼ŒSuccessful Pairs of Spells and Potionsï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2300. å’’è¯­å’Œè¯æ°´çš„æˆåŠŸå¯¹æ•°
  - å’’è¯­å’Œè¯æ°´çš„æˆåŠŸå¯¹æ•°
  - Successful Pairs of Spells and Potions
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - åŒæŒ‡é’ˆ
  - äºŒåˆ†æŸ¥æ‰¾
  - æ’åº
---

# 2300. å’’è¯­å’Œè¯æ°´çš„æˆåŠŸå¯¹æ•°

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`æ’åº`](/tag/sorting.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/successful-pairs-of-spells-and-potions) [`LeetCode`](https://leetcode.com/problems/successful-pairs-of-spells-and-potions)

## é¢˜ç›®

You are given two positive integer arrays `spells` and `potions`, of length
`n` and `m` respectively, where `spells[i]` represents the strength of the
`ith` spell and `potions[j]` represents the strength of the `jth` potion.

You are also given an integer `success`. A spell and potion pair is considered
**successful** if the **product** of their strengths is **at least**
`success`.

Return _an integer array_`pairs` _of length_`n` _where_`pairs[i]`_is the
number of**potions** that will form a successful pair with the _`ith` _spell._

**Example 1:**

> Input: spells = [5,1,3], potions = [1,2,3,4,5], success = 7
>
> Output: [4,0,3]
>
> Explanation:
>
> - 0th spell: 5 \* [1,2,3,4,5] = [5,**10** ,**15** ,**20** ,**25**]. 4 pairs are successful.
> - 1st spell: 1 \* [1,2,3,4,5] = [1,2,3,4,5]. 0 pairs are successful.
> - 2nd spell: 3 \* [1,2,3,4,5] = [3,6,**9** ,**12** ,**15**]. 3 pairs are successful.
>
> Thus, [4,0,3] is returned.

**Example 2:**

> Input: spells = [3,1,2], potions = [8,5,8], success = 16
>
> Output: [2,0,2]
>
> Explanation:
>
> - 0th spell: 3 \* [8,5,8] = [**24** ,15,**24**]. 2 pairs are successful.
> - 1st spell: 1 \* [8,5,8] = [8,5,8]. 0 pairs are successful.
> - 2nd spell: 2 \* [8,5,8] = [**16** ,10,**16**]. 2 pairs are successful.
>
> Thus, [2,0,2] is returned.

**Constraints:**

- `n == spells.length`
- `m == potions.length`
- `1 <= n, m <= 10^5`
- `1 <= spells[i], potions[i] <= 10^5`
- `1 <= success <= 1010`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸¤ä¸ªæ­£æ•´æ•°æ•°ç»„ `spells` å’Œ `potions` ï¼Œé•¿åº¦åˆ†åˆ«ä¸º `n` å’Œ `m` ï¼Œå…¶ä¸­ `spells[i]` è¡¨ç¤ºç¬¬ `i`
ä¸ªå’’è¯­çš„èƒ½é‡å¼ºåº¦ï¼Œ`potions[j]` è¡¨ç¤ºç¬¬ `j` ç“¶è¯æ°´çš„èƒ½é‡å¼ºåº¦ã€‚

åŒæ—¶ç»™ä½ ä¸€ä¸ªæ•´æ•° `success` ã€‚ä¸€ä¸ªå’’è¯­å’Œè¯æ°´çš„èƒ½é‡å¼ºåº¦ **ç›¸ä¹˜** å¦‚æœ **å¤§äºç­‰äº** `success` ï¼Œé‚£ä¹ˆå®ƒä»¬è§†ä¸ºä¸€å¯¹
**æˆåŠŸ** çš„ç»„åˆã€‚

è¯·ä½ è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•´æ•°æ•°ç»„ `pairs`ï¼Œå…¶ä¸­ `pairs[i]` æ˜¯èƒ½è·Ÿç¬¬ `i` ä¸ªå’’è¯­æˆåŠŸç»„åˆçš„ **è¯æ°´** æ•°ç›®ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** spells = [5,1,3], potions = [1,2,3,4,5], success = 7
>
> **è¾“å‡ºï¼š**[4,0,3]
>
> **è§£é‡Šï¼š**
>
> - ç¬¬ 0 ä¸ªå’’è¯­ï¼š5 \* [1,2,3,4,5] = [5,**10** ,**15** ,**20** ,**25**] ã€‚æ€»å…± 4 ä¸ªæˆåŠŸç»„åˆã€‚
> - ç¬¬ 1 ä¸ªå’’è¯­ï¼š1 \* [1,2,3,4,5] = [1,2,3,4,5] ã€‚æ€»å…± 0 ä¸ªæˆåŠŸç»„åˆã€‚
> - ç¬¬ 2 ä¸ªå’’è¯­ï¼š3 \* [1,2,3,4,5] = [3,6,**9** ,**12** ,**15**] ã€‚æ€»å…± 3 ä¸ªæˆåŠŸç»„åˆã€‚
>
> æ‰€ä»¥è¿”å› [4,0,3] ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** spells = [3,1,2], potions = [8,5,8], success = 16
>
> **è¾“å‡ºï¼š**[2,0,2]
>
> **è§£é‡Šï¼š**
>
> - ç¬¬ 0 ä¸ªå’’è¯­ï¼š3 \* [8,5,8] = [**24** ,15,**24**] ã€‚æ€»å…± 2 ä¸ªæˆåŠŸç»„åˆã€‚
> - ç¬¬ 1 ä¸ªå’’è¯­ï¼š1 \* [8,5,8] = [8,5,8] ã€‚æ€»å…± 0 ä¸ªæˆåŠŸç»„åˆã€‚
> - ç¬¬ 2 ä¸ªå’’è¯­ï¼š2 \* [8,5,8] = [**16** ,10,**16**] ã€‚æ€»å…± 2 ä¸ªæˆåŠŸç»„åˆã€‚
>
> æ‰€ä»¥è¿”å› [2,0,2] ã€‚

**æç¤ºï¼š**

- `n == spells.length`
- `m == potions.length`
- `1 <= n, m <= 10^5`
- `1 <= spells[i], potions[i] <= 10^5`
- `1 <= success <= 1010`

## è§£é¢˜æ€è·¯

å¯¹äºæ¯ä¸ªå’’è¯­ `spells[i]`ï¼Œéœ€è¦æ‰¾åˆ°æ»¡è¶³ `spells[i] * potions[j] >= success` çš„æ‰€æœ‰ `potions[j]`ã€‚

å¯ä»¥å°†é—®é¢˜è½¬åŒ–ä¸ºï¼šå¯¹äºæ¯ä¸ª `spells[i]`ï¼Œéœ€è¦æ‰¾åˆ° `potions[j] >= success / spells[i]` çš„è¯æ°´æ•°é‡ã€‚

`potions` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœå°†å®ƒæ’åºï¼Œå¯ä»¥é€šè¿‡äºŒåˆ†æŸ¥æ‰¾å¿«é€Ÿæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„è¯æ°´ç´¢å¼•ï¼Œè¿›è€Œè®¡ç®—æˆåŠŸçš„è¯æ°´æ•°é‡ã€‚

1. é¦–å…ˆå¯¹ `potions` æ•°ç»„è¿›è¡Œå‡åºæ’åºã€‚
2. å¯¹äºæ¯ä¸ªå’’è¯­ `spells[i]`ï¼š

- åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾è®¡ç®—æˆåŠŸæ‰€éœ€çš„æœ€ä½è¯æ°´å€¼ `success / spells[i]`ã€‚
- åœ¨ `potions` ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äºæœ€ä½è¯æ°´å€¼çš„è¯æ°´ç´¢å¼•ã€‚
- æˆåŠŸé…å¯¹è¯æ°´æ•°é‡ä¸ºä»è¯¥ç´¢å¼•å¼€å§‹åˆ°æ•°ç»„æœ«å°¾çš„è¯æ°´æ•°é‡ã€‚

3. å¯¹æ¯ä¸ªå’’è¯­é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œå¾—åˆ°æ¯ä¸ªå’’è¯­çš„æˆåŠŸé…å¯¹è¯æ°´æ•°é‡ï¼Œè¿”å›ç»“æœæ•°ç»„ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O((m + n) * log m)`ï¼Œå…¶ä¸­ `n` æ˜¯ `spells.length, m` æ˜¯ `potions.length`ï¼š
  - å¯¹ `potions` æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(m log m)`ï¼›
  - å¯¹æ¯ä¸ªå’’è¯­æ‰§è¡ŒäºŒåˆ†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n log m)`ï¼›
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œæ’åºå’ŒäºŒåˆ†æŸ¥æ‰¾å‡ä¸ºåŸåœ°æ“ä½œï¼Œä½¿ç”¨äº†å¸¸æ•°çº§çš„ç©ºé—´ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} spells
 * @param {number[]} potions
 * @param {number} success
 * @return {number[]}
 */
var successfulPairs = function (spells, potions, success) {
	// é¢„å…ˆè®¡ç®—å¥½ success / spells[i]ï¼Œé¿å…é‡å¤è®¡ç®—
	const arr = spells.map((i) => success / i);
	const n = potions.length;

	// å¯¹ potions è¿›è¡Œå‡åºæ’åº
	potions.sort((a, b) => a - b);

	// äºŒåˆ†æŸ¥æ‰¾å‡½æ•°
	const getPairs = (idx) => {
		let left = 0,
			right = n - 1;
		while (left <= right) {
			const mid = ((left + right) / 2) | 0;
			if (potions[mid] >= arr[idx]) {
				right = mid - 1;
			} else {
				left = mid + 1;
			}
		}
		// left æ˜¯ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„ç´¢å¼•
		// è¿”å›æˆåŠŸé…å¯¹æ•°é‡
		return left == n ? 0 : n - left;
	};

	// éå† spellsï¼Œè®¡ç®—æ¯ä¸ªå’’è¯­çš„æˆåŠŸé…å¯¹æ•°é‡
	return spells.map((_, idx) => getPairs(idx));
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 826 | å®‰æ’å·¥ä½œä»¥è¾¾åˆ°æœ€å¤§æ”¶ç›Š |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) `2+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/most-profit-assigning-work) [ğŸ”—](https://leetcode.com/problems/most-profit-assigning-work) |
| 2389 | å’Œæœ‰é™çš„æœ€é•¿å­åºåˆ— |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) `2+` | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/longest-subsequence-with-limited-sum) [ğŸ”—](https://leetcode.com/problems/longest-subsequence-with-limited-sum) |
| 2410 | è¿åŠ¨å‘˜å’Œè®­ç»ƒå¸ˆçš„æœ€å¤§åŒ¹é…æ•° | [[âœ“]](/problem/2410.md) |  [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-matching-of-players-with-trainers) [ğŸ”—](https://leetcode.com/problems/maximum-matching-of-players-with-trainers) |