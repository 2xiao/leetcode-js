---
title: 773. æ»‘åŠ¨è°œé¢˜
description: LeetCode 773. æ»‘åŠ¨è°œé¢˜é¢˜è§£ï¼ŒSliding Puzzleï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 773. æ»‘åŠ¨è°œé¢˜
  - æ»‘åŠ¨è°œé¢˜
  - Sliding Puzzle
  - è§£é¢˜æ€è·¯
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - æ•°ç»„
  - çŸ©é˜µ
---

# 773. æ»‘åŠ¨è°œé¢˜

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`æ•°ç»„`](/tag/array.md) [`çŸ©é˜µ`](/tag/matrix.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/sliding-puzzle) [`LeetCode`](https://leetcode.com/problems/sliding-puzzle)

## é¢˜ç›®

On an `2 x 3` board, there are five tiles labeled from `1` to `5`, and an
empty square represented by `0`. A **move** consists of choosing `0` and a
4-directionally adjacent number and swapping it.

The state of the board is solved if and only if the board is
`[[1,2,3],[4,5,0]]`.

Given the puzzle board `board`, return _the least number of moves required so
that the state of the board is solved_. If it is impossible for the state of
the board to be solved, return `-1`.

**Example 1:**

![](https://assets.leetcode.com/uploads/2021/06/29/slide1-grid.jpg)

> Input: board = [[1,2,3],[4,0,5]]
>
> Output: 1
>
> Explanation: Swap the 0 and the 5 in one move.

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/06/29/slide2-grid.jpg)

> Input: board = [[1,2,3],[5,4,0]]
>
> Output: -1
>
> Explanation: No number of moves will make the board solved.

**Example 3:**

![](https://assets.leetcode.com/uploads/2021/06/29/slide3-grid.jpg)

> Input: board = [[4,1,2],[5,0,3]]
>
> Output: 5
>
> Explanation: 5 is the smallest number of moves that solves the board.
>
> An example path:
>
> After move 0: [[4,1,2],[5,0,3]]
>
> After move 1: [[4,1,2],[0,5,3]]
>
> After move 2: [[0,1,2],[4,5,3]]
>
> After move 3: [[1,0,2],[4,5,3]]
>
> After move 4: [[1,2,0],[4,5,3]]
>
> After move 5: [[1,2,3],[4,5,0]]

**Constraints:**

- `board.length == 2`
- `board[i].length == 3`
- `0 <= board[i][j] <= 5`
- Each value `board[i][j]` is **unique**.

## é¢˜ç›®å¤§æ„

åœ¨ä¸€ä¸ª `2 x 3` çš„æ¿ä¸Šï¼ˆ`board`ï¼‰æœ‰ 5 å—ç –ç“¦ï¼Œç”¨æ•°å­— `1~5` æ¥è¡¨ç¤º, ä»¥åŠä¸€å—ç©ºç¼ºç”¨ `0` æ¥è¡¨ç¤ºã€‚ä¸€æ¬¡ **ç§»åŠ¨** å®šä¹‰ä¸ºé€‰æ‹©
`0` ä¸ä¸€ä¸ªç›¸é‚»çš„æ•°å­—ï¼ˆä¸Šä¸‹å·¦å³ï¼‰è¿›è¡Œäº¤æ¢.

æœ€ç»ˆå½“æ¿ `board` çš„ç»“æœæ˜¯ `[[1,2,3],[4,5,0]]` è°œæ¿è¢«è§£å¼€ã€‚

ç»™å‡ºä¸€ä¸ªè°œæ¿çš„åˆå§‹çŠ¶æ€ `board` ï¼Œè¿”å›æœ€å°‘å¯ä»¥é€šè¿‡å¤šå°‘æ¬¡ç§»åŠ¨è§£å¼€è°œæ¿ï¼Œå¦‚æœä¸èƒ½è§£å¼€è°œæ¿ï¼Œåˆ™è¿”å› `-1` ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/06/29/slide1-grid.jpg)

> **è¾“å…¥ï¼š** board = [[1,2,3],[4,0,5]]
>
> **è¾“å‡ºï¼š** 1
>
> **è§£é‡Šï¼š** äº¤æ¢ 0 å’Œ 5 ï¼Œ1 æ­¥å®Œæˆ

**ç¤ºä¾‹ 2:**

![](https://assets.leetcode.com/uploads/2021/06/29/slide2-grid.jpg)

> **è¾“å…¥ï¼š** board = [[1,2,3],[5,4,0]]
>
> **è¾“å‡ºï¼š** -1
>
> **è§£é‡Šï¼š** æ²¡æœ‰åŠæ³•å®Œæˆè°œæ¿

**ç¤ºä¾‹ 3:**

![](https://assets.leetcode.com/uploads/2021/06/29/slide3-grid.jpg)

> **è¾“å…¥ï¼š** board = [[4,1,2],[5,0,3]]
>
> **è¾“å‡ºï¼š** 5
>
> **è§£é‡Šï¼š**
>
> æœ€å°‘å®Œæˆè°œæ¿çš„æœ€å°‘ç§»åŠ¨æ¬¡æ•°æ˜¯ 5 ï¼Œ
>
> ä¸€ç§ç§»åŠ¨è·¯å¾„:
>
> å°šæœªç§»åŠ¨: [[4,1,2],[5,0,3]]
>
> ç§»åŠ¨ 1 æ¬¡: [[4,1,2],[0,5,3]]
>
> ç§»åŠ¨ 2 æ¬¡: [[0,1,2],[4,5,3]]
>
> ç§»åŠ¨ 3 æ¬¡: [[1,0,2],[4,5,3]]
>
> ç§»åŠ¨ 4 æ¬¡: [[1,2,0],[4,5,3]]
>
> ç§»åŠ¨ 5 æ¬¡: [[1,2,3],[4,5,0]]

**æç¤ºï¼š**

- `board.length == 2`
- `board[i].length == 3`
- `0 <= board[i][j] <= 5`
- `board[i][j]` ä¸­æ¯ä¸ªå€¼éƒ½ **ä¸åŒ**

## è§£é¢˜æ€è·¯

è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ **çŠ¶æ€ç©ºé—´æœç´¢é—®é¢˜**ï¼Œå¯ä»¥é€šè¿‡ **å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰** å¯»æ‰¾ä»åˆå§‹çŠ¶æ€åˆ°ç›®æ ‡çŠ¶æ€çš„æœ€çŸ­è·¯å¾„ã€‚

1. **çŠ¶æ€è¡¨ç¤ºï¼š**

   - å°† `2 * 3` çš„æ‹¼å›¾è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¡¨ç¤ºï¼ˆå¦‚ `"123450"`ï¼‰ï¼Œä»¥ä¾¿è¡¨ç¤ºçŠ¶æ€ã€‚
   - ç©ºæ ¼ `0` çš„ä½ç½®å†³å®šäº†å¯ä»¥è¿›è¡Œçš„ç§»åŠ¨ã€‚

2. **çŠ¶æ€è½¬ç§»ï¼š**

   - å®šä¹‰æ¯ä¸ªä½ç½®ï¼ˆç´¢å¼•ï¼‰çš„åˆæ³•ç§»åŠ¨æ–¹å‘ã€‚ä¾‹å¦‚ï¼š
     - ç´¢å¼• `0` çš„åˆæ³•ç§»åŠ¨ä½ç½®ä¸º `[1,3]`ï¼ˆå³ã€ä¸‹ï¼‰ã€‚
     - ç´¢å¼• `4` çš„åˆæ³•ç§»åŠ¨ä½ç½®ä¸º `[1,3,5]`ï¼ˆä¸Šã€å·¦ã€å³ï¼‰ã€‚
   - é¢„å®šä¹‰ä¸€ä¸ªæ–¹å‘æ•°ç»„è¡¨ç¤ºç´¢å¼•é—´çš„ç›¸é‚»å…³ç³»ã€‚

3. **BFS æœç´¢ï¼š**

   - å°†åˆå§‹çŠ¶æ€åŠ å…¥é˜Ÿåˆ—ï¼Œä½¿ç”¨ BFS æœç´¢æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€ã€‚
   - æ¯æ¬¡å¼¹å‡ºé˜Ÿåˆ—ä¸­çš„çŠ¶æ€ï¼Œå°†ç©ºæ ¼ `0` å’Œå…¶ç›¸é‚»ä½ç½®çš„æ•°å­—äº¤æ¢ï¼Œç”Ÿæˆæ–°çš„çŠ¶æ€ã€‚
   - å¦‚æœæ–°çŠ¶æ€æ˜¯ç›®æ ‡çŠ¶æ€ï¼Œåˆ™è¿”å›å½“å‰æ­¥æ•°ã€‚
   - ä½¿ç”¨é›†åˆè®°å½•å·²è®¿é—®çŠ¶æ€ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚
   - è‹¥é˜Ÿåˆ—ä¸ºç©ºä¸”æœªæ‰¾åˆ°ç›®æ ‡çŠ¶æ€ï¼Œè¿”å› `-1`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦ï¼š** `O((m * n)!)`ï¼Œæœ€å¤šéœ€è¦éå†æ‰€æœ‰çŠ¶æ€ï¼ŒçŠ¶æ€æ€»æ•°ä¸º `(m * n)!`ï¼ˆè¿™é‡Œ `m * n = 6`ï¼‰ï¼Œæ¯ä¸ªçŠ¶æ€éœ€è¦ `O(m * n)` çš„å­—ç¬¦ä¸²æ“ä½œã€‚

- **ç©ºé—´å¤æ‚åº¦ï¼š** `O((m * n)!)`ï¼Œé˜Ÿåˆ—ä¸é›†åˆçš„ç©ºé—´å¤æ‚åº¦ç”±çŠ¶æ€æ•°é‡å†³å®šã€‚

## ä»£ç 

```javascript
/**
 * @param {number[][]} board
 * @return {number}
 */
var slidingPuzzle = function (board) {
	const target = '123450'; // ç›®æ ‡çŠ¶æ€
	const start = board.flat().join(''); // åˆå§‹çŠ¶æ€

	// æ¯ä¸ªç´¢å¼•çš„åˆæ³•ç§»åŠ¨ä½ç½®
	const neighbors = [
		[1, 3], // 0
		[0, 2, 4], // 1
		[1, 5], // 2
		[0, 4], // 3
		[1, 3, 5], // 4
		[2, 4] // 5
	];

	// BFS åˆå§‹åŒ–
	const queue = [[start, 0]]; // [çŠ¶æ€, æ­¥æ•°]
	const visited = new Set();
	visited.add(start);

	while (queue.length) {
		const [state, steps] = queue.shift();
		if (state === target) return steps; // æ‰¾åˆ°ç›®æ ‡çŠ¶æ€

		const zeroIndex = state.indexOf('0'); // æ‰¾åˆ°ç©ºæ ¼ä½ç½®
		for (let neighbor of neighbors[zeroIndex]) {
			// äº¤æ¢ç©ºæ ¼ä¸é‚»å±…ä½ç½®
			const newState = swap(state, zeroIndex, neighbor);
			if (!visited.has(newState)) {
				visited.add(newState);
				queue.push([newState, steps + 1]);
			}
		}
	}
	return -1; // æ— æ³•åˆ°è¾¾ç›®æ ‡çŠ¶æ€
};

// è¾…åŠ©å‡½æ•°ï¼šäº¤æ¢å­—ç¬¦ä¸²ä¸­ä¸¤ä¸ªç´¢å¼•ä½ç½®çš„å­—ç¬¦
function swap(str, i, j) {
	const arr = str.split('');
	[arr[i], arr[j]] = [arr[j], arr[i]];
	return arr.join('');
}
```
