---
title: 2115. ä»ç»™å®šåŸææ–™ä¸­æ‰¾åˆ°æ‰€æœ‰å¯ä»¥åšå‡ºçš„èœ
description: LeetCode 2115. ä»ç»™å®šåŸææ–™ä¸­æ‰¾åˆ°æ‰€æœ‰å¯ä»¥åšå‡ºçš„èœé¢˜è§£ï¼ŒFind All Possible Recipes from Given Suppliesï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2115. ä»ç»™å®šåŸææ–™ä¸­æ‰¾åˆ°æ‰€æœ‰å¯ä»¥åšå‡ºçš„èœ
  - ä»ç»™å®šåŸææ–™ä¸­æ‰¾åˆ°æ‰€æœ‰å¯ä»¥åšå‡ºçš„èœ
  - Find All Possible Recipes from Given Supplies
  - è§£é¢˜æ€è·¯
  - å›¾
  - æ‹“æ‰‘æ’åº
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
  - å­—ç¬¦ä¸²
---

# 2115. ä»ç»™å®šåŸææ–™ä¸­æ‰¾åˆ°æ‰€æœ‰å¯ä»¥åšå‡ºçš„èœ

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å›¾`](/tag/graph.md) [`æ‹“æ‰‘æ’åº`](/tag/topological-sort.md) [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/find-all-possible-recipes-from-given-supplies) [`LeetCode`](https://leetcode.com/problems/find-all-possible-recipes-from-given-supplies)

## é¢˜ç›®

You have information about `n` different recipes. You are given a string array
`recipes` and a 2D string array `ingredients`. The `ith` recipe has the name
`recipes[i]`, and you can **create** it if you have **all** the needed
ingredients from `ingredients[i]`. Ingredients to a recipe may need to be
created from **other** recipes, i.e., `ingredients[i]` may contain a string
that is in `recipes`.

You are also given a string array `supplies` containing all the ingredients
that you initially have, and you have an infinite supply of all of them.

Return _a list of all the recipes that you can create._ You may return the
answer in **any order**.

Note that two recipes may contain each other in their ingredients.

**Example 1:**

> Input: recipes = ["bread"], ingredients = [["yeast","flour"]], supplies = ["yeast","flour","corn"]
>
> Output: ["bread"]
>
> Explanation:
>
> We can create "bread" since we have the ingredients "yeast" and "flour".

**Example 2:**

> Input: recipes = ["bread","sandwich"], ingredients = [["yeast","flour"],["bread","meat"]], supplies = ["yeast","flour","meat"]
>
> Output: ["bread","sandwich"]
>
> Explanation:
>
> We can create "bread" since we have the ingredients "yeast" and "flour".
>
> We can create "sandwich" since we have the ingredient "meat" and can create the ingredient "bread".

**Example 3:**

> Input: recipes = ["bread","sandwich","burger"], ingredients = [["yeast","flour"],["bread","meat"],["sandwich","meat","bread"]], supplies = ["yeast","flour","meat"]
>
> Output: ["bread","sandwich","burger"]
>
> Explanation:
>
> We can create "bread" since we have the ingredients "yeast" and "flour".
>
> We can create "sandwich" since we have the ingredient "meat" and can create the ingredient "bread".
>
> We can create "burger" since we have the ingredient "meat" and can create the ingredients "bread" and "sandwich".

**Constraints:**

- `n == recipes.length == ingredients.length`
- `1 <= n <= 100`
- `1 <= ingredients[i].length, supplies.length <= 100`
- `1 <= recipes[i].length, ingredients[i][j].length, supplies[k].length <= 10`
- `recipes[i], ingredients[i][j]`, and `supplies[k]` consist only of lowercase English letters.
- All the values of `recipes` and `supplies` combined are unique.
- Each `ingredients[i]` does not contain any duplicate values.

## é¢˜ç›®å¤§æ„

ä½ æœ‰ `n` é“ä¸åŒèœçš„ä¿¡æ¯ã€‚ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ `recipes` å’Œä¸€ä¸ªäºŒç»´å­—ç¬¦ä¸²æ•°ç»„ `ingredients` ã€‚ç¬¬ `i` é“èœçš„åå­—ä¸º
`recipes[i]` ï¼Œå¦‚æœä½ æœ‰å®ƒ **æ‰€æœ‰** çš„åŸææ–™ `ingredients[i]` ï¼Œé‚£ä¹ˆä½ å¯ä»¥ **åšå‡º**
è¿™é“èœã€‚ä¸€é“èœçš„åŸææ–™å¯èƒ½æ˜¯ **å¦ä¸€é“** èœï¼Œä¹Ÿå°±æ˜¯è¯´ `ingredients[i]` å¯èƒ½åŒ…å« `recipes` ä¸­å¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

åŒæ—¶ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ `supplies` ï¼Œå®ƒåŒ…å«ä½ åˆå§‹æ—¶æ‹¥æœ‰çš„æ‰€æœ‰åŸææ–™ï¼Œæ¯ä¸€ç§åŸææ–™ä½ éƒ½æœ‰æ— é™å¤šã€‚

è¯·ä½ è¿”å›ä½ å¯ä»¥åšå‡ºçš„æ‰€æœ‰èœã€‚ä½ å¯ä»¥ä»¥ **ä»»æ„é¡ºåº** è¿”å›å®ƒä»¬ã€‚

æ³¨æ„ä¸¤é“èœåœ¨å®ƒä»¬çš„åŸææ–™ä¸­å¯èƒ½äº’ç›¸åŒ…å«ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** recipes = ["bread"], ingredients = [["yeast","flour"]], supplies = ["yeast","flour","corn"]
>
> **è¾“å‡ºï¼š**["bread"]
>
> **è§£é‡Šï¼š**
>
> æˆ‘ä»¬å¯ä»¥åšå‡º "bread" ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰åŸææ–™ "yeast" å’Œ "flour" ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** recipes = ["bread","sandwich"], ingredients = [["yeast","flour"],["bread","meat"]], supplies = ["yeast","flour","meat"]
>
> **è¾“å‡ºï¼š**["bread","sandwich"]
>
> **è§£é‡Šï¼š**
>
> æˆ‘ä»¬å¯ä»¥åšå‡º "bread" ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰åŸææ–™ "yeast" å’Œ "flour" ã€‚
>
> æˆ‘ä»¬å¯ä»¥åšå‡º "sandwich" ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰åŸææ–™ "meat" ä¸”å¯ä»¥åšå‡ºåŸææ–™ "bread" ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** recipes = ["bread","sandwich","burger"], ingredients = [["yeast","flour"],["bread","meat"],["sandwich","meat","bread"]], supplies = ["yeast","flour","meat"]
>
> **è¾“å‡ºï¼š**["bread","sandwich","burger"]
>
> **è§£é‡Šï¼š**
>
> æˆ‘ä»¬å¯ä»¥åšå‡º "bread" ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰åŸææ–™ "yeast" å’Œ "flour" ã€‚
>
> æˆ‘ä»¬å¯ä»¥åšå‡º "sandwich" ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰åŸææ–™ "meat" ä¸”å¯ä»¥åšå‡ºåŸææ–™ "bread" ã€‚
>
> æˆ‘ä»¬å¯ä»¥åšå‡º "burger" ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰åŸææ–™ "meat" ä¸”å¯ä»¥åšå‡ºåŸææ–™ "bread" å’Œ "sandwich" ã€‚

**ç¤ºä¾‹ 4ï¼š**

> **è¾“å…¥ï¼š** recipes = ["bread"], ingredients = [["yeast","flour"]], supplies = ["yeast"]
>
> **è¾“å‡ºï¼š**[]
>
> **è§£é‡Šï¼š**
>
> æˆ‘ä»¬æ²¡æ³•åšå‡ºä»»ä½•èœï¼Œå› ä¸ºæˆ‘ä»¬åªæœ‰åŸææ–™ "yeast" ã€‚

**æç¤ºï¼š**

- `n == recipes.length == ingredients.length`
- `1 <= n <= 100`
- `1 <= ingredients[i].length, supplies.length <= 100`
- `1 <= recipes[i].length, ingredients[i][j].length, supplies[k].length <= 10`
- `recipes[i], ingredients[i][j]` å’Œ `supplies[k]` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚
- æ‰€æœ‰ `recipes` å’Œ `supplies` ä¸­çš„å€¼äº’ä¸ç›¸åŒã€‚
- `ingredients[i]` ä¸­çš„å­—ç¬¦ä¸²äº’ä¸ç›¸åŒã€‚

## è§£é¢˜æ€è·¯

æœ¬é¢˜æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª **æœ‰å‘å›¾çš„å¯è¾¾æ€§é—®é¢˜**ï¼Œå…¶ä¸­ï¼š

- **èŠ‚ç‚¹**ï¼šæ‰€æœ‰ `recipes` å’Œ `supplies`ã€‚
- **æœ‰å‘è¾¹**ï¼šä¸€ä¸ª `recipe` æŒ‡å‘å®ƒçš„ `ingredients`ã€‚

å¯ä»¥ç”¨ **DFS + è®°å¿†åŒ–æœç´¢** è§£å†³ï¼š

1. **å»ºå›¾**ï¼š
   - ç»´æŠ¤ä¸€ä¸ª `Set(supplies)` è®°å½•å½“å‰å¯ç”¨é£Ÿæã€‚
   - ç»´æŠ¤ä¸€ä¸ª `Map(recipeIndex)` è®°å½• `recipes` çš„ç´¢å¼•ï¼Œç”¨äºæŸ¥æ‰¾ `ingredients`ã€‚
2. **DFS æœç´¢ï¼šæ£€æŸ¥æŸä¸ªé£Ÿè°±æ˜¯å¦å¯åˆ¶ä½œ**

   - **ç»ˆæ­¢æ¡ä»¶**ï¼š
     - è‹¥ `recipe` ç›´æ¥åœ¨ `suppliesSet` ä¸­ï¼Œè¯´æ˜å·²ç»æ˜¯å¯ç”¨é£Ÿæã€‚
     - è‹¥ `recipe` ä¸åœ¨ `recipes` é‡Œï¼Œè¯´æ˜å®ƒæ— æ³•åˆ¶ä½œï¼Œè¿”å› `false`ã€‚
   - **è®¿é—®æ ‡è®°**ï¼š
     - ç”¨ `visited` è®°å½•å½“å‰é€’å½’è·¯å¾„ï¼Œé¿å…å¾ªç¯ä¾èµ–ã€‚
   - **é€’å½’æ£€æŸ¥**ï¼š
     - å¯¹ `recipe` çš„ `ingredients` è¿›è¡Œé€’å½’ `canMake` åˆ¤æ–­ã€‚
   - **è®°å¿†åŒ–**ï¼š
     - è‹¥ `recipe` å¯åˆ¶ä½œï¼Œåˆ™åŠ å…¥ `suppliesSet` ä»¥é¿å…é‡å¤è®¡ç®—ã€‚

3. **éå†æ‰€æœ‰é£Ÿè°±ï¼Œè°ƒç”¨ `canMake` åˆ¤æ–­å“ªäº›å¯ä»¥åˆ¶ä½œã€‚**

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n + m)`ï¼Œæ¯ä¸ª `recipe` å’Œ `ingredient` åªéå†ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n + m)`ï¼Œç”¨äº `Set` å’Œ `Map` å­˜å‚¨ä¾èµ–å…³ç³»ã€‚

## ä»£ç 

```javascript
/**
 * @param {string[]} recipes
 * @param {string[][]} ingredients
 * @param {string[]} supplies
 * @return {string[]}
 */
var findAllRecipes = function (recipes, ingredients, supplies) {
	const n = recipes.length;
	const suppliesSet = new Set(supplies);
	const recipeIndex = new Map();
	const visited = new Set();
	const result = [];

	// è®°å½• recipe çš„ç´¢å¼•
	for (let i = 0; i < n; i++) {
		recipeIndex.set(recipes[i], i);
	}

	// åˆ¤æ–­æ˜¯å¦èƒ½åˆ¶ä½œæŸä¸ªé£Ÿè°±
	const canMake = (recipe) => {
		if (suppliesSet.has(recipe)) return true; // å·²ç»æ˜¯åŸææ–™
		if (!recipeIndex.has(recipe) || visited.has(recipe)) return false; // ä¸æ˜¯é£Ÿè°± æˆ–è€… æ£€æµ‹è¿‡æ— æ³•åˆ¶ä½œ

		visited.add(recipe); // æ ‡è®°ä¸ºæ­£åœ¨è®¿é—®ï¼Œé˜²æ­¢å¾ªç¯ä¾èµ–
		for (const item of ingredients[recipeIndex.get(recipe)]) {
			if (!canMake(item)) return false;
		}
		visited.delete(recipe); // è§£é™¤è®¿é—®æ ‡è®°

		suppliesSet.add(recipe); // ç°åœ¨å¯ä»¥åˆ¶ä½œäº†ï¼ŒåŠ å…¥ suppliesSet
		result.push(recipe);
		return true;
	};

	// éå†æ‰€æœ‰é£Ÿè°±ï¼Œæ£€æŸ¥èƒ½å¦åˆ¶ä½œ
	for (const recipe of recipes) {
		canMake(recipe);
	}

	return result;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 210 | è¯¾ç¨‹è¡¨ II | [[âœ“]](/problem/0210.md) |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å›¾`](/tag/graph.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/course-schedule-ii) [ğŸ”—](https://leetcode.com/problems/course-schedule-ii) |
| 1711 | å¤§é¤è®¡æ•° |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/count-good-meals) [ğŸ”—](https://leetcode.com/problems/count-good-meals) |