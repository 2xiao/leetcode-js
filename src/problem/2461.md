---
title: 2461. é•¿åº¦ä¸º K å­æ•°ç»„ä¸­çš„æœ€å¤§å’Œ
description: LeetCode 2461. é•¿åº¦ä¸º K å­æ•°ç»„ä¸­çš„æœ€å¤§å’Œé¢˜è§£ï¼ŒMaximum Sum of Distinct Subarrays With Length Kï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2461. é•¿åº¦ä¸º K å­æ•°ç»„ä¸­çš„æœ€å¤§å’Œ
  - é•¿åº¦ä¸º K å­æ•°ç»„ä¸­çš„æœ€å¤§å’Œ
  - Maximum Sum of Distinct Subarrays With Length K
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
  - æ»‘åŠ¨çª—å£
---

# 2461. é•¿åº¦ä¸º K å­æ•°ç»„ä¸­çš„æœ€å¤§å’Œ

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/maximum-sum-of-distinct-subarrays-with-length-k) [`LeetCode`](https://leetcode.com/problems/maximum-sum-of-distinct-subarrays-with-length-k)

## é¢˜ç›®

You are given an integer array `nums` and an integer `k`. Find the maximum
subarray sum of all the subarrays of `nums` that meet the following
conditions:

- The length of the subarray is `k`, and
- All the elements of the subarray are **distinct**.

Return _the maximum subarray sum of all the subarrays that meet the
conditions_ _._ If no subarray meets the conditions, return `0`.

_A**subarray** is a contiguous non-empty sequence of elements within an
array._

**Example 1:**

> Input: nums = [1,5,4,2,9,9,9], k = 3
>
> Output: 15
>
> Explanation: The subarrays of nums with length 3 are:
>
> - [1,5,4] which meets the requirements and has a sum of 10.
> - [5,4,2] which meets the requirements and has a sum of 11.
> - [4,2,9] which meets the requirements and has a sum of 15.
> - [2,9,9] which does not meet the requirements because the element 9 is repeated.
> - [9,9,9] which does not meet the requirements because the element 9 is repeated.
>
> We return 15 because it is the maximum subarray sum of all the subarrays that meet the conditions

**Example 2:**

> Input: nums = [4,4,4], k = 3
>
> Output: 0
>
> Explanation: The subarrays of nums with length 3 are:
>
> - [4,4,4] which does not meet the requirements because the element 4 is repeated.
>
> We return 0 because no subarrays meet the conditions.

**Constraints:**

- `1 <= k <= nums.length <= 10^5`
- `1 <= nums[i] <= 10^5`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ã€‚è¯·ä½ ä» `nums` ä¸­æ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„å…¨éƒ¨å­æ•°ç»„ä¸­æ‰¾å‡ºæœ€å¤§å­æ•°ç»„å’Œï¼š

- å­æ•°ç»„çš„é•¿åº¦æ˜¯ `k`ï¼Œä¸”
- å­æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´  **å„ä¸ç›¸åŒ ã€‚**

è¿”å›æ»¡è¶³é¢˜é¢è¦æ±‚çš„æœ€å¤§å­æ•°ç»„å’Œã€‚å¦‚æœä¸å­˜åœ¨å­æ•°ç»„æ»¡è¶³è¿™äº›æ¡ä»¶ï¼Œè¿”å› `0` ã€‚

**å­æ•°ç»„** æ˜¯æ•°ç»„ä¸­ä¸€æ®µè¿ç»­éç©ºçš„å…ƒç´ åºåˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** nums = [1,5,4,2,9,9,9], k = 3
>
> **è¾“å‡ºï¼š** 15
>
> **è§£é‡Šï¼š** nums ä¸­é•¿åº¦ä¸º 3 çš„å­æ•°ç»„æ˜¯ï¼š
>
> - [1,5,4] æ»¡è¶³å…¨éƒ¨æ¡ä»¶ï¼Œå’Œä¸º 10 ã€‚
> - [5,4,2] æ»¡è¶³å…¨éƒ¨æ¡ä»¶ï¼Œå’Œä¸º 11 ã€‚
> - [4,2,9] æ»¡è¶³å…¨éƒ¨æ¡ä»¶ï¼Œå’Œä¸º 15 ã€‚
> - [2,9,9] ä¸æ»¡è¶³å…¨éƒ¨æ¡ä»¶ï¼Œå› ä¸ºå…ƒç´  9 å‡ºç°é‡å¤ã€‚
> - [9,9,9] ä¸æ»¡è¶³å…¨éƒ¨æ¡ä»¶ï¼Œå› ä¸ºå…ƒç´  9 å‡ºç°é‡å¤ã€‚
>
> å› ä¸º 15 æ˜¯æ»¡è¶³å…¨éƒ¨æ¡ä»¶çš„æ‰€æœ‰å­æ•°ç»„ä¸­çš„æœ€å¤§å­æ•°ç»„å’Œï¼Œæ‰€ä»¥è¿”å› 15 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** nums = [4,4,4], k = 3
>
> **è¾“å‡ºï¼š** 0
>
> **è§£é‡Šï¼š** nums ä¸­é•¿åº¦ä¸º 3 çš„å­æ•°ç»„æ˜¯ï¼š
>
> - [4,4,4] ä¸æ»¡è¶³å…¨éƒ¨æ¡ä»¶ï¼Œå› ä¸ºå…ƒç´  4 å‡ºç°é‡å¤ã€‚
>
> å› ä¸ºä¸å­˜åœ¨æ»¡è¶³å…¨éƒ¨æ¡ä»¶çš„å­æ•°ç»„ï¼Œæ‰€ä»¥è¿”å› 0 ã€‚

**æç¤ºï¼š**

- `1 <= k <= nums.length <= 10^5`
- `1 <= nums[i] <= 10^5`

## è§£é¢˜æ€è·¯

å¯ä»¥ä½¿ç”¨æ»‘åŠ¨çª—å£å’Œå“ˆå¸Œé›†åˆæ¥é«˜æ•ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼š

1. **ç»´æŠ¤ä¸€ä¸ªæ»‘åŠ¨çª—å£**ï¼šçª—å£é•¿åº¦ä¸º `k`ï¼Œå¹¶ä¸”ä¿è¯çª—å£ä¸­çš„å…ƒç´ éƒ½ä¸é‡å¤ã€‚
2. **ä½¿ç”¨å“ˆå¸Œé›†åˆè®°å½•çª—å£å†…çš„å…ƒç´ **ï¼šç¡®ä¿å…ƒç´ çš„å”¯ä¸€æ€§ï¼ŒåŒæ—¶å¿«é€Ÿæ£€æŸ¥æ˜¯å¦å­˜åœ¨é‡å¤ã€‚
3. **åŠ¨æ€æ›´æ–°çª—å£å’Œ**ï¼š
   - å¦‚æœçª—å£ä¸­å­˜åœ¨é‡å¤å…ƒç´ ï¼Œç§»åŠ¨å·¦è¾¹ç•Œç›´åˆ°æ²¡æœ‰é‡å¤å…ƒç´ ã€‚
   - å½“çª—å£å¤§å°ä¸º `k` æ—¶ï¼Œæ›´æ–°å½“å‰çš„æœ€å¤§å’Œã€‚
4. **è¾¹ç•Œå¤„ç†**ï¼šå¦‚æœæ»‘åŠ¨çª—å£æ— æ³•æ»¡è¶³é•¿åº¦ä¸º `k`ï¼Œæœ€ç»ˆè¿”å› `0`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œæ¯æ¬¡ç§»åŠ¨å·¦è¾¹ç•Œæœ€å¤šéå†ä¸€æ¬¡æ•´ä¸ªæ•°ç»„ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(k)`ï¼Œä½¿ç”¨äº†ä¸€ä¸ªå“ˆå¸Œé›†åˆå­˜å‚¨çª—å£ä¸­çš„å…ƒç´ ï¼Œæœ€å¤šå­˜å‚¨ `k` ä¸ªå…ƒç´ ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
var maximumSubarraySum = function (nums, k) {
	let maxSum = 0;
	let currentSum = 0;
	let left = 0;
	const seen = new Set();

	for (let right = 0; right < nums.length; right++) {
		// å¦‚æœå‡ºç°é‡å¤å…ƒç´ ï¼Œç§»åŠ¨å·¦è¾¹ç•Œç›´åˆ°çª—å£å†…æ— é‡å¤
		while (seen.has(nums[right])) {
			seen.delete(nums[left]);
			currentSum -= nums[left];
			left++;
		}

		// å°†å½“å‰å…ƒç´ åŠ å…¥çª—å£
		seen.add(nums[right]);
		currentSum += nums[right];

		// æ£€æŸ¥çª—å£å¤§å°æ˜¯å¦æ»¡è¶³ k
		if (right - left + 1 === k) {
			maxSum = Math.max(maxSum, currentSum);
			// ç¼©å°çª—å£å¤§å°ï¼Œå‡†å¤‡æ£€æŸ¥ä¸‹ä¸€ä¸ªçª—å£
			seen.delete(nums[left]);
			currentSum -= nums[left];
			left++;
		}
	}

	return maxSum;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1004 | æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III | [[âœ“]](/problem/1004.md) |  [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/max-consecutive-ones-iii) [ğŸ”—](https://leetcode.com/problems/max-consecutive-ones-iii) |
| 2401 | æœ€é•¿ä¼˜é›…å­æ•°ç»„ |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/longest-nice-subarray) [ğŸ”—](https://leetcode.com/problems/longest-nice-subarray) |
| 2405 | å­å­—ç¬¦ä¸²çš„æœ€ä¼˜åˆ’åˆ† | [[âœ“]](/problem/2405.md) |  [`è´ªå¿ƒ`](/tag/greedy.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/optimal-partition-of-string) [ğŸ”—](https://leetcode.com/problems/optimal-partition-of-string) |
| 2537 | ç»Ÿè®¡å¥½å­æ•°ç»„çš„æ•°ç›® |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/count-the-number-of-good-subarrays) [ğŸ”—](https://leetcode.com/problems/count-the-number-of-good-subarrays) |
| 3026 | æœ€å¤§å¥½å­æ•°ç»„å’Œ |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-good-subarray-sum) [ğŸ”—](https://leetcode.com/problems/maximum-good-subarray-sum) |
| 3254 | é•¿åº¦ä¸º K çš„å­æ•°ç»„çš„èƒ½é‡å€¼ I |  |  [`æ•°ç»„`](/tag/array.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/find-the-power-of-k-size-subarrays-i) [ğŸ”—](https://leetcode.com/problems/find-the-power-of-k-size-subarrays-i) |
| 3255 | é•¿åº¦ä¸º K çš„å­æ•°ç»„çš„èƒ½é‡å€¼ II |  |  [`æ•°ç»„`](/tag/array.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/find-the-power-of-k-size-subarrays-ii) [ğŸ”—](https://leetcode.com/problems/find-the-power-of-k-size-subarrays-ii) |