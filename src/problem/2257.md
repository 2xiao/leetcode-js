---
title: 2257. ç»Ÿè®¡ç½‘æ ¼å›¾ä¸­æ²¡æœ‰è¢«ä¿å«çš„æ ¼å­æ•°
description: LeetCode 2257. ç»Ÿè®¡ç½‘æ ¼å›¾ä¸­æ²¡æœ‰è¢«ä¿å«çš„æ ¼å­æ•°é¢˜è§£ï¼ŒCount Unguarded Cells in the Gridï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2257. ç»Ÿè®¡ç½‘æ ¼å›¾ä¸­æ²¡æœ‰è¢«ä¿å«çš„æ ¼å­æ•°
  - ç»Ÿè®¡ç½‘æ ¼å›¾ä¸­æ²¡æœ‰è¢«ä¿å«çš„æ ¼å­æ•°
  - Count Unguarded Cells in the Grid
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - çŸ©é˜µ
  - æ¨¡æ‹Ÿ
---

# 2257. ç»Ÿè®¡ç½‘æ ¼å›¾ä¸­æ²¡æœ‰è¢«ä¿å«çš„æ ¼å­æ•°

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`çŸ©é˜µ`](/tag/matrix.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/count-unguarded-cells-in-the-grid) [`LeetCode`](https://leetcode.com/problems/count-unguarded-cells-in-the-grid)

## é¢˜ç›®

You are given two integers `m` and `n` representing a **0-indexed** `m x n`
grid. You are also given two 2D integer arrays `guards` and `walls` where
`guards[i] = [rowi, coli]` and `walls[j] = [rowj, colj]` represent the
positions of the `ith` guard and `jth` wall respectively.

A guard can see **every** cell in the four cardinal directions (north, east,
south, or west) starting from their position unless **obstructed** by a wall
or another guard. A cell is **guarded** if there is **at least** one guard
that can see it.

Return _the number of unoccupied cells that are **not** **guarded**._

**Example 1:**

![](https://assets.leetcode.com/uploads/2022/03/10/example1drawio2.png)

> Input: m = 4, n = 6, guards = [[0,0],[1,1],[2,3]], walls = [[0,1],[2,2],[1,4]]
>
> Output: 7
>
> Explanation: The guarded and unguarded cells are shown in red and green respectively in the above diagram.
>
> There are a total of 7 unguarded cells, so we return 7.

**Example 2:**

![](https://assets.leetcode.com/uploads/2022/03/10/example2drawio.png)

> Input: m = 3, n = 3, guards = [[1,1]], walls = [[0,1],[1,0],[2,1],[1,2]]
>
> Output: 4
>
> Explanation: The unguarded cells are shown in green in the above diagram.
>
> There are a total of 4 unguarded cells, so we return 4.

**Constraints:**

- `1 <= m, n <= 10^5`
- `2 <= m * n <= 10^5`
- `1 <= guards.length, walls.length <= 5 * 10^4`
- `2 <= guards.length + walls.length <= m * n`
- `guards[i].length == walls[j].length == 2`
- `0 <= rowi, rowj < m`
- `0 <= coli, colj < n`
- All the positions in `guards` and `walls` are **unique**.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸¤ä¸ªæ•´æ•° `m` å’Œ `n` è¡¨ç¤ºä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹çš„ `m x n` ç½‘æ ¼å›¾ã€‚åŒæ—¶ç»™ä½ ä¸¤ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `guards` å’Œ
`walls` ï¼Œå…¶ä¸­ `guards[i] = [rowi, coli]` ä¸” `walls[j] = [rowj, colj]` ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ `i`
ä¸ªè­¦å«å’Œç¬¬ `j` åº§å¢™æ‰€åœ¨çš„ä½ç½®ã€‚

ä¸€ä¸ªè­¦å«èƒ½çœ‹åˆ° 4 ä¸ªåæ ‡è½´æ–¹å‘ï¼ˆå³ä¸œã€å—ã€è¥¿ã€åŒ—ï¼‰çš„ **æ‰€æœ‰** æ ¼å­ï¼Œé™¤éä»–ä»¬è¢«ä¸€åº§å¢™æˆ–è€…å¦å¤–ä¸€ä¸ªè­¦å« **æŒ¡ä½** äº†è§†çº¿ã€‚å¦‚æœä¸€ä¸ªæ ¼å­èƒ½è¢«
**è‡³å°‘** ä¸€ä¸ªè­¦å«çœ‹åˆ°ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯´è¿™ä¸ªæ ¼å­è¢« **ä¿å«** äº†ã€‚

è¯·ä½ è¿”å›ç©ºæ ¼å­ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªæ ¼å­æ˜¯ **æ²¡è¢«ä¿å«** çš„ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2022/03/10/example1drawio2.png)

> **è¾“å…¥ï¼š** m = 4, n = 6, guards = [[0,0],[1,1],[2,3]], walls = [[0,1],[2,2],[1,4]]
>
> **è¾“å‡ºï¼š** 7
>
> **è§£é‡Šï¼š** ä¸Šå›¾ä¸­ï¼Œè¢«ä¿å«å’Œæ²¡æœ‰è¢«ä¿å«çš„æ ¼å­åˆ†åˆ«ç”¨çº¢è‰²å’Œç»¿è‰²è¡¨ç¤ºã€‚
>
> æ€»å…±æœ‰ 7 ä¸ªæ²¡æœ‰è¢«ä¿å«çš„æ ¼å­ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› 7 ã€‚

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2022/03/10/example2drawio.png)

> **è¾“å…¥ï¼š** m = 3, n = 3, guards = [[1,1]], walls = [[0,1],[1,0],[2,1],[1,2]]
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** ä¸Šå›¾ä¸­ï¼Œæ²¡æœ‰è¢«ä¿å«çš„æ ¼å­ç”¨ç»¿è‰²è¡¨ç¤ºã€‚
>
> æ€»å…±æœ‰ 4 ä¸ªæ²¡æœ‰è¢«ä¿å«çš„æ ¼å­ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› 4 ã€‚

**æç¤ºï¼š**

- `1 <= m, n <= 10^5`
- `2 <= m * n <= 10^5`
- `1 <= guards.length, walls.length <= 5 * 10^4`
- `2 <= guards.length + walls.length <= m * n`
- `guards[i].length == walls[j].length == 2`
- `0 <= rowi, rowj < m`
- `0 <= coli, colj < n`
- `guards` å’Œ `walls` ä¸­æ‰€æœ‰ä½ç½® **äº’ä¸ç›¸åŒ** ã€‚

## è§£é¢˜æ€è·¯

1. æ•°æ®åˆå§‹åŒ–

- ä½¿ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„ `g` è¡¨ç¤ºç½‘æ ¼çŠ¶æ€ï¼š
  - **0**ï¼šå½“å‰æ ¼å­æœªè¢«ä¿å«ï¼›
  - **1**ï¼šå½“å‰æ ¼å­è¢«å®ˆå«ä¿å«ï¼›
  - **2**ï¼šå½“å‰æ ¼å­æ˜¯å®ˆå«æˆ–å¢™ã€‚
- å°† `guards` å’Œ `walls` çš„ä½ç½®åˆå§‹åŒ–ä¸º **2**ã€‚

2. æ¨¡æ‹Ÿå®ˆå«çš„è§†çº¿

- éå†æ¯ä¸ªå®ˆå« `(gx, gy)`ï¼Œä»å…¶ä½ç½®å‘å››ä¸ªæ–¹å‘ï¼ˆä¸Šä¸‹å·¦å³ï¼‰æ‰©å±•ï¼Œç›´åˆ°ï¼š
  - è¶…å‡ºè¾¹ç•Œï¼›
  - é‡åˆ°å¢™æˆ–å…¶ä»–å®ˆå«ï¼ˆå€¼ä¸º **2**ï¼‰ã€‚
- å¯¹æ¯ä¸ªå¯ä»¥æ‰©å±•çš„æ ¼å­ï¼Œæ ‡è®°ä¸º **1**ï¼ˆè¢«ä¿å«ï¼‰ã€‚

3. ç»Ÿè®¡æœªè¢«ä¿å«çš„æ ¼å­

- éå†æ•´ä¸ªç½‘æ ¼ï¼Œç»Ÿè®¡å€¼ä¸º **0** çš„æ ¼å­æ•°ï¼Œå³æœªè¢«ä¿å«çš„æ ¼å­ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(k * max(m, n) + m * n)`ã€‚
  - éå† `guards` å’Œå…¶å››ä¸ªæ–¹å‘æ‰©å±•çš„æ“ä½œï¼Œå¤æ‚åº¦çº¦ä¸º `O(k * max(m, n))`ï¼Œå…¶ä¸­ `k` æ˜¯å®ˆå«çš„æ•°é‡ï¼›
  - ç»Ÿè®¡æœªè¢«ä¿å«çš„æ ¼å­éœ€è¦éå†ä¸€æ¬¡çŸ©é˜µï¼Œå¤æ‚åº¦ä¸º `O(m * n)`ï¼›
  - æ€»å¤æ‚åº¦ä¸º `O(k * max(m, n) + m * n)`
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œéœ€è¦ä¸€ä¸ªäºŒç»´æ•°ç»„ `g`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} m
 * @param {number} n
 * @param {number[][]} guards
 * @param {number[][]} walls
 * @return {number}
 */
var countUnguarded = function (m, n, guards, walls) {
	// åˆå§‹åŒ–ç½‘æ ¼
	const g = new Array(m).fill().map(() => new Array(n).fill(0));

	// è®¾ç½®å®ˆå«å’Œå¢™çš„ä½ç½®ä¸º 2
	for (let [x, y] of guards) {
		g[x][y] = 2;
	}
	for (let [x, y] of walls) {
		g[x][y] = 2;
	}

	// å®šä¹‰å››ä¸ªæ–¹å‘
	const dirs = [
		[-1, 0],
		[1, 0],
		[0, -1],
		[0, 1]
	];

	// éå†æ¯ä¸ªå®ˆå«ï¼Œæ¨¡æ‹Ÿå…¶è§†çº¿
	for (let [gx, gy] of guards) {
		for (let [dx, dy] of dirs) {
			let x = gx,
				y = gy;
			while (true) {
				x += dx;
				y += dy;
				// è¶…å‡ºè¾¹ç•Œæˆ–é‡åˆ°éšœç¢ç‰©
				if (x < 0 || y < 0 || x >= m || y >= n || g[x][y] == 2) {
					break;
				}
				// æ ‡è®°å½“å‰æ ¼å­ä¸ºè¢«ä¿å«
				g[x][y] = 1;
			}
		}
	}

	// ç»Ÿè®¡æœªè¢«ä¿å«çš„æ ¼å­æ•°
	return g.reduce((sum, row) => sum + row.filter((i) => i == 0).length, 0);
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 361 | è½°ç‚¸æ•Œäºº ğŸ”’ |  |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`çŸ©é˜µ`](/tag/matrix.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/bomb-enemy) [ğŸ”—](https://leetcode.com/problems/bomb-enemy) |
| 999 | å¯ä»¥è¢«ä¸€æ­¥æ•è·çš„æ£‹å­æ•° | [[âœ“]](/problem/0999.md) |  [`æ•°ç»„`](/tag/array.md) [`çŸ©é˜µ`](/tag/matrix.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/available-captures-for-rook) [ğŸ”—](https://leetcode.com/problems/available-captures-for-rook) |