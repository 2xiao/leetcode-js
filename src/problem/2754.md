# [2754. å°†å‡½æ•°ç»‘å®šåˆ°ä¸Šä¸‹æ–‡ ðŸ”’](https://2xiao.github.io/leetcode-js/problem/2754.html)

ðŸŸ  <font color=#ffb800>Medium</font>&emsp; ðŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/bind-function-to-context) [`LeetCode`](https://leetcode.com/problems/bind-function-to-context)

## é¢˜ç›®

Enhance all functions to have the `bindPolyfill` method. When `bindPolyfill`
is called with a passed object `obj`, that object becomes the `this` context
for the function.

For example, if you had the code:

```js
function f() {
	console.log('My context is ' + this.ctx);
}
f();
```

The output would be `"My context is undefined"`. However, if you bound the
function:

```js
function f() {
	console.log('My context is ' + this.ctx);
}
const boundFunc = f.boundPolyfill({ ctx: 'My Object' });
boundFunc();
```

The output should be `"My context is My Object"`.

You may assume that a single non-null object will be passed to the
`bindPolyfill` method.

Please solve it without the built-in `Function.bind` method.

**Example 1:**

> Input:
>
> ```js
> fn = function f(multiplier) {
> 	return this.x * multiplier;
> };
> obj = { x: 10 };
> ```
>
> inputs = [5]
>
> Output: 50
>
> Explanation:
>
> ```js
> const boundFunc = f.bindPolyfill({ x: 10 });
> boundFunc(5); // 50
> ```
>
> A multiplier of 5 is passed as a parameter.
>
> The context is set to {"x": 10}.
>
> Multiplying those two numbers yields 50.

**Example 2:**

> Input:
>
> ```js
> fn = function speak() {
> 	return 'My name is ' + this.name;
> };
> obj = { name: 'Kathy' };
> ```
>
> inputs = []
>
> Output: "My name is Kathy"
>
> Explanation:
>
> ```js
> const boundFunc = f.bindPolyfill({ name: 'Kathy' });
> boundFunc(); // "My name is Kathy"
> ```

**Constraints:**

- `obj` is a non-null object
- `0 <= inputs.length <= 100`

**Can you solve it without using any built-in methods?**

## é¢˜ç›®å¤§æ„

ç¼–å†™ä¸€ä¸ªæ‰€æœ‰å‡½æ•°éƒ½æ”¯æŒçš„æ–¹æ³• `bindPolyfill` ã€‚å½“ `bindPolyfill` æ–¹æ³•è¢«è°ƒç”¨å¹¶ä¼ é€’äº†ä¸€ä¸ªå¯¹è±¡ `obj`
æ—¶ï¼Œè¯¥å¯¹è±¡å°†æˆä¸ºå‡½æ•°çš„ `this` ä¸Šä¸‹æ–‡ã€‚

ä¾‹å¦‚ï¼Œå¦‚æžœä½ æœ‰ä»¥ä¸‹ä»£ç ï¼š

```js
function f() {
	console.log('My context is ' + this.ctx);
}
f();
```

å®ƒçš„è¾“å‡ºæ˜¯ `"My context is undefined"` ã€‚ç„¶è€Œï¼Œå¦‚æžœä½ ç»‘å®šäº†è¯¥å‡½æ•°ï¼š

```js
function f() {
	console.log('My context is ' + this.ctx);
}
const boundFunc = f.boundPolyfill({ ctx: 'My Object' });
boundFunc();
```

å®ƒçš„è¾“å‡ºåº”ä¸º `"My context is My Object"` ã€‚

ä½ å¯ä»¥å‡è®¾ä¼ é€’ç»™ `bindPolyfill` æ–¹æ³•çš„æ˜¯ä¸€ä¸ªéžç©ºå¯¹è±¡ã€‚

è¯·åœ¨ä¸ä½¿ç”¨å†…ç½®çš„ `Function.bind` æ–¹æ³•çš„æƒ…å†µä¸‹è§£å†³è¯¥é—®é¢˜ã€‚

**æç¤ºï¼š**

- `obj` æ˜¯ä¸€ä¸ªéžç©ºå¯¹è±¡
- `0 <= inputs.length <= 100`

**ä½ èƒ½åœ¨ä¸ä½¿ç”¨ä»»ä½•å†…ç½®æ–¹æ³•çš„æƒ…å†µä¸‹è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ**

## è§£é¢˜æ€è·¯

è¦å®žçŽ°ä¸€ä¸ª `bindPolyfill` æ–¹æ³•ï¼Œéœ€è¦æ¨¡ä»¿ JavaScript ä¸­çš„ `Function.prototype.bind` æ–¹æ³•çš„è¡Œä¸ºã€‚

åŸºæœ¬æ€è·¯æ˜¯ï¼š

1. åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°èƒ½å¤Ÿä½¿ç”¨ä¼ å…¥çš„å¯¹è±¡ `obj` ä½œä¸º `this` ä¸Šä¸‹æ–‡ï¼Œè¯¥å‡½æ•°ä¹Ÿåº”å½“æ”¯æŒæŽ¥å—å‚æ•°ã€‚
2. å½“ç»‘å®šå‡½æ•°æ—¶ï¼Œå¯èƒ½ä¼šä¼ å…¥ä¸€äº›å‚æ•°ï¼Œè¿™äº›å‚æ•°åœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶åº”è¯¥è¢«ä¼ é€’ç»™åŽŸå‡½æ•°ã€‚å› æ­¤ï¼Œéœ€è¦å¤„ç†è¿™ç§æƒ…å†µï¼Œç¡®ä¿ `bindPolyfill` æ”¯æŒä¼ é€’å‚æ•°ï¼Œç±»ä¼¼äºŽ `bind` æ–¹æ³•é‚£æ ·ã€‚
3. æ”¯æŒåŽŸå‡½æ•°çš„è°ƒç”¨ï¼Œè¿™æ„å‘³ç€æ–°å‡½æ•°åœ¨è°ƒç”¨æ—¶åº”è¯¥è°ƒç”¨åŽŸå‡½æ•°ï¼Œå¹¶ç¡®ä¿ `this` æŒ‡å‘æ­£ç¡®çš„ä¸Šä¸‹æ–‡ã€‚

å…·ä½“æ¥è¯´ï¼š

- åœ¨ `bindPolyfill` ä¸­ï¼Œå°† `this` æŒ‡å‘çš„æ˜¯è¢«ç»‘å®šçš„å‡½æ•°ï¼Œå³è°ƒç”¨ `boundPolyfill` çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœ `f` è°ƒç”¨ `boundPolyfill`ï¼Œåˆ™ `this` å°±æ˜¯ `f`ã€‚
- ä¿å­˜åŽŸå§‹å‡½æ•° `fn = this`ï¼Œè¿™ç¡®ä¿èƒ½å¤Ÿåœ¨æ–°çš„å‡½æ•°ä¸­è°ƒç”¨å®ƒã€‚
- `boundPolyfill` è¿”å›žä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªæ–°å‡½æ•°ä¼šæŠŠ `this` ä¸Šä¸‹æ–‡è®¾ç½®ä¸ºä¼ å…¥çš„ `obj`ï¼Œå¹¶å°†å‚æ•° `args` ä¼ é€’ç»™åŽŸå‡½æ•° `fn`ï¼Œè¿™å°±ç¡®ä¿äº†åŽŸå‡½æ•°èƒ½å¤Ÿä»¥æ­£ç¡®çš„ä¸Šä¸‹æ–‡å’Œå‚æ•°è°ƒç”¨ã€‚

#### å¤æ‚åº¦åˆ†æž

- **æ—¶é—´å¤æ‚åº¦**ï¼š`boundPolyfill` æœ¬èº«çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(1)`ï¼Œå› ä¸ºå®ƒåªæ˜¯åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°å¹¶è¿”å›žï¼Œæ²¡æœ‰å¤æ‚çš„è®¡ç®—ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªæ˜¯ä¸ºæ–°å‡½æ•°åˆ†é…äº†ä¸€å®šçš„å†…å­˜ã€‚

## ä»£ç 

```javascript
/**
 * @param {Object} obj
 * @return {Function}
 */
Function.prototype.boundPolyfill = function (obj) {
	// ä¿å­˜å½“å‰å‡½æ•° (å³è°ƒç”¨ boundPolyfill çš„å‡½æ•°)
	const fn = this;

	// è¿”å›žä¸€ä¸ªæ–°çš„å‡½æ•°
	return function (...args) {
		// ä½¿ç”¨ apply è°ƒç”¨åŽŸå‡½æ•°ï¼Œè®¾ç½® this ä¸ºä¼ å…¥çš„ obj å¹¶ä¼ é€’ args å‚æ•°
		return fn.apply(obj, args);
	};
};
```
