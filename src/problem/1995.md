---
title: 1995. ç»Ÿè®¡ç‰¹æ®Šå››å…ƒç»„
description: LeetCode 1995. ç»Ÿè®¡ç‰¹æ®Šå››å…ƒç»„é¢˜è§£ï¼ŒCount Special Quadrupletsï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1995. ç»Ÿè®¡ç‰¹æ®Šå››å…ƒç»„
  - ç»Ÿè®¡ç‰¹æ®Šå››å…ƒç»„
  - Count Special Quadruplets
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
  - æšä¸¾
---

# 1995. ç»Ÿè®¡ç‰¹æ®Šå››å…ƒç»„

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æšä¸¾`](/tag/enumeration.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/count-special-quadruplets) [`LeetCode`](https://leetcode.com/problems/count-special-quadruplets)

## é¢˜ç›®

Given a **0-indexed** integer array `nums`, return _the number of **distinct**
quadruplets_ `(a, b, c, d)` _such that:_

- `nums[a] + nums[b] + nums[c] == nums[d]`, and
- `a < b < c < d`

**Example 1:**

> Input: nums = [1,2,3,6]
>
> Output: 1
>
> Explanation: The only quadruplet that satisfies the requirement is (0, 1, 2, 3) because 1 + 2 + 3 == 6.

**Example 2:**

> Input: nums = [3,3,6,4,5]
>
> Output: 0
>
> Explanation: There are no such quadruplets in [3,3,6,4,5].

**Example 3:**

> Input: nums = [1,1,1,3,5]
>
> Output: 4
>
> Explanation: The 4 quadruplets that satisfy the requirement are:
>
> - (0, 1, 2, 3): 1 + 1 + 1 == 3
> - (0, 1, 3, 4): 1 + 1 + 3 == 5
> - (0, 2, 3, 4): 1 + 1 + 3 == 5
> - (1, 2, 3, 4): 1 + 1 + 3 == 5

**Constraints:**

- `4 <= nums.length <= 50`
- `1 <= nums[i] <= 100`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ª **ä¸‹æ ‡ä» 0 å¼€å§‹** çš„æ•´æ•°æ•°ç»„ `nums` ï¼Œè¿”å›æ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„ **ä¸åŒ** å››å…ƒç»„ `(a, b, c, d)` çš„ **æ•°ç›®** ï¼š

- `nums[a] + nums[b] + nums[c] == nums[d]` ï¼Œä¸”
- `a < b < c < d`

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** nums = [1,2,3,6]
>
> **è¾“å‡ºï¼š** 1
>
> **è§£é‡Šï¼š** æ»¡è¶³è¦æ±‚çš„å”¯ä¸€ä¸€ä¸ªå››å…ƒç»„æ˜¯ (0, 1, 2, 3) å› ä¸º 1 + 2 + 3 == 6 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** nums = [3,3,6,4,5]
>
> **è¾“å‡ºï¼š** 0
>
> **è§£é‡Šï¼š**[3,3,6,4,5] ä¸­ä¸å­˜åœ¨æ»¡è¶³è¦æ±‚çš„å››å…ƒç»„ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** nums = [1,1,1,3,5]
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** æ»¡è¶³è¦æ±‚çš„ 4 ä¸ªå››å…ƒç»„å¦‚ä¸‹ï¼š
>
> - (0, 1, 2, 3): 1 + 1 + 1 == 3
> - (0, 1, 3, 4): 1 + 1 + 3 == 5
> - (0, 2, 3, 4): 1 + 1 + 3 == 5
> - (1, 2, 3, 4): 1 + 1 + 3 == 5

**æç¤ºï¼š**

- `4 <= nums.length <= 50`
- `1 <= nums[i] <= 100`

## è§£é¢˜æ€è·¯

æœ¬é¢˜ç›®è¦æ±‚åœ¨æ•°ç»„ä¸­æ‰¾åˆ°å››ä¸ªä¸åŒçš„ç´¢å¼• `a, b, c, d`ï¼Œæ»¡è¶³ `nums[a] + nums[b] + nums[c] = nums[d]`ã€‚æˆ‘ä»¬é€šè¿‡ä¼˜åŒ–æš´åŠ›`O(n^4)` çš„æ–¹æ³•ï¼Œä½¿ç”¨ **å“ˆå¸Œè¡¨** ä¼˜åŒ–ä¸º `O(n^2)`ï¼Œåœ¨å¤§è§„æ¨¡è¾“å…¥ä¸‹è¡¨ç°æ›´ä¼˜ã€‚ã€‚

1. åˆå§‹åŒ–ç»“æœ `res` ä¸º 0ã€‚

2. **è½¬æ¢ä¸ºç­‰å¼å½¢å¼**ï¼š

   - é‡æ–°æ•´ç†æ¡ä»¶ä¸º `nums[a] + nums[b] = nums[d] - nums[c]`ã€‚

3. **å€’åºéå†**ï¼š

   - é¦–å…ˆå¤„ç† `c, d`ï¼šè®¡ç®— `nums[d] - nums[c]`ï¼Œå¹¶å°†å…¶å­˜å…¥å“ˆå¸Œè¡¨ `count` ä¸­ï¼Œç”¨äºå¿«é€ŸæŸ¥è¯¢ã€‚
   - å†å¤„ç† `a, b`ï¼šå¯¹äºæ¯ä¸ª `b`ï¼Œæšä¸¾æ‰€æœ‰ `a`ï¼Œç›´æ¥ä»å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾ `nums[a] + nums[b]` çš„æ•°é‡å¹¶ç´¯åŠ åˆ°ç»“æœ `res`ã€‚

4. **åŠ¨æ€æ›´æ–°å“ˆå¸Œè¡¨**ï¼š

   - æ¯æ¬¡éå†åˆ°æ–°çš„ `b`ï¼Œå°†ä¸ `c, d` çš„å¯èƒ½å·®å€¼ `nums[d] - nums[c]` æ›´æ–°åˆ°å“ˆå¸Œè¡¨ä¸­ã€‚

5. æœ€åè¿”å›ç»“æœ `res`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n^2)`ï¼Œä¸¤å±‚å¾ªç¯ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨ `count` å­˜å‚¨ `O(n)` ä¸ªé”®å€¼å¯¹ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var countQuadruplets = function (nums) {
	let res = 0; // ç»“æœè®¡æ•°å™¨
	const n = nums.length;

	let count = new Map(); // å“ˆå¸Œè¡¨è®°å½• nums[d] - nums[c]
	count.set(nums[n - 1] - nums[n - 2], 1); // åˆå§‹åŒ–æœ€åä¸¤ä¸ªå…ƒç´ çš„å·®å€¼

	// ä»å€’æ•°ç¬¬ä¸‰ä¸ªå…ƒç´ å¼€å§‹æšä¸¾ b
	for (let b = n - 3; b >= 1; b--) {
		// æšä¸¾ a
		for (let a = b - 1; a >= 0; a--) {
			// æŸ¥æ‰¾æ˜¯å¦æœ‰åŒ¹é…çš„ nums[a] + nums[b] åœ¨å“ˆå¸Œè¡¨ä¸­
			res += count.get(nums[a] + nums[b]) || 0;
		}

		// æ›´æ–°å“ˆå¸Œè¡¨ï¼šè®¡ç®— nums[d] - nums[b] å¹¶å­˜å…¥
		for (let d = n - 1; d > b; d--) {
			count.set(nums[d] - nums[b], (count.get(nums[d] - nums[b]) || 0) + 1);
		}
	}
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 18 | å››æ•°ä¹‹å’Œ | [[âœ“]](/problem/0018.md) |  [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`æ’åº`](/tag/sorting.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/4sum) [ğŸ”—](https://leetcode.com/problems/4sum) |
| 334 | é€’å¢çš„ä¸‰å…ƒå­åºåˆ— | [[âœ“]](/problem/0334.md) |  [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/increasing-triplet-subsequence) [ğŸ”—](https://leetcode.com/problems/increasing-triplet-subsequence) |
| 1534 | ç»Ÿè®¡å¥½ä¸‰å…ƒç»„ | [[âœ“]](/problem/1534.md) |  [`æ•°ç»„`](/tag/array.md) [`æšä¸¾`](/tag/enumeration.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/count-good-triplets) [ğŸ”—](https://leetcode.com/problems/count-good-triplets) |
| 2552 | ç»Ÿè®¡ä¸Šå‡å››å…ƒç»„ |  |  [`æ ‘çŠ¶æ•°ç»„`](/tag/binary-indexed-tree.md) [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) `2+` | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/count-increasing-quadruplets) [ğŸ”—](https://leetcode.com/problems/count-increasing-quadruplets) |