---
title: 1945. å­—ç¬¦ä¸²è½¬åŒ–åçš„å„ä½æ•°å­—ä¹‹å’Œ
description: LeetCode 1945. å­—ç¬¦ä¸²è½¬åŒ–åçš„å„ä½æ•°å­—ä¹‹å’Œé¢˜è§£ï¼ŒSum of Digits of String After Convertï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1945. å­—ç¬¦ä¸²è½¬åŒ–åçš„å„ä½æ•°å­—ä¹‹å’Œ
  - å­—ç¬¦ä¸²è½¬åŒ–åçš„å„ä½æ•°å­—ä¹‹å’Œ
  - Sum of Digits of String After Convert
  - è§£é¢˜æ€è·¯
  - å­—ç¬¦ä¸²
  - æ¨¡æ‹Ÿ
---

# 1945. å­—ç¬¦ä¸²è½¬åŒ–åçš„å„ä½æ•°å­—ä¹‹å’Œ

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/sum-of-digits-of-string-after-convert) [`LeetCode`](https://leetcode.com/problems/sum-of-digits-of-string-after-convert)

## é¢˜ç›®

You are given a string `s` consisting of lowercase English letters, and an
integer `k`. Your task is to _convert_ the string into an integer by a special
process, and then _transform_ it by summing its digits repeatedly `k` times.
More specifically, perform the following steps:

1. **Convert** `s` into an integer by replacing each letter with its position in the alphabet (i.e. replace `'a'` with `1`, `'b'` with `2`, ..., `'z'` with `26`).
2. **Transform** the integer by replacing it with the sum of its digits.
3. Repeat the **transform** operation (step 2) `k` **times** in total.

For example, if `s = "zbax"` and `k = 2`, then the resulting integer would be
`8` by the following operations:

1. **Convert** : `"zbax" â "(26)(2)(1)(24)" â "262124" â 262124`
2. **Transform #1** : `262124 â 2 + 6 + 2 + 1 + 2 + 4 â 17`
3. **Transform #2** : `17 â 1 + 7 â 8`

Return the **resulting** **integer** after performing the **operations**
described above.

**Example 1:**

> **Input:** s = "iiii", k = 1
>
> **Output:** 36
>
> **Explanation:**
>
> The operations are as follows:
>
> - Convert: "iiii" â "(9)(9)(9)(9)" â "9999" â 9999
> - Transform #1: 9999 â 9 + 9 + 9 + 9 â 36
>
> Thus the resulting integer is 36.

**Example 2:**

> **Input:** s = "leetcode", k = 2
>
> **Output:** 6
>
> **Explanation:**
>
> The operations are as follows:
>
> - Convert: "leetcode" â "(12)(5)(5)(20)(3)(15)(4)(5)" â "12552031545" â
>   12552031545
> - Transform #1: 12552031545 â 1 + 2 + 5 + 5 + 2 + 0 + 3 + 1 + 5 + 4 + 5 â 33
> - Transform #2: 33 â 3 + 3 â 6
>
> Thus the resulting integer is 6.

**Example 3:**

> **Input:** s = "zbax", k = 2
>
> **Output:** 8

**Constraints:**

- `1 <= s.length <= 100`
- `1 <= k <= 10`
- `s` consists of lowercase English letters.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªç”±å°å†™å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² `s` ï¼Œä»¥åŠä¸€ä¸ªæ•´æ•° `k` ã€‚ä½ çš„ä»»åŠ¡æ˜¯é€šè¿‡ä¸€ç§ç‰¹æ®Šå¤„ç†å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•´æ•°ï¼Œç„¶åé€šè¿‡é‡å¤å¯¹å®ƒçš„æ•°ä½æ±‚å’Œ `k` æ¬¡æ¥è¿›è¡Œè½¬æ¢ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. ç”¨å­—æ¯åœ¨å­—æ¯è¡¨ä¸­çš„ä½ç½® **æ›¿æ¢** è¯¥å­—æ¯ï¼Œå°† `s` **è½¬åŒ–** ä¸ºä¸€ä¸ªæ•´æ•°ï¼ˆä¹Ÿå°±æ˜¯ï¼Œ`'a'` ç”¨ `1` æ›¿æ¢ï¼Œ`'b'` ç”¨ `2` æ›¿æ¢ï¼Œ... `'z'` ç”¨ `26` æ›¿æ¢ï¼‰ã€‚
2. æ¥ç€ï¼Œå°†æ•´æ•° **è½¬æ¢** ä¸ºå…¶ **å„ä½æ•°å­—ä¹‹å’Œ** ã€‚
3. å…±é‡å¤ **è½¬æ¢** æ“ä½œï¼ˆç¬¬ 2 æ­¥ï¼‰ `k` **æ¬¡** ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœ `s = "zbax"` ä¸” `k = 2` ï¼Œé‚£ä¹ˆæ‰§è¡Œä¸‹è¿°æ­¥éª¤åå¾—åˆ°çš„ç»“æœæ˜¯æ•´æ•° `8` ï¼š

- **è½¬åŒ–ï¼š**`"zbax" â "(26)(2)(1)(24)" â "262124" â 262124`
- **è½¬æ¢ #1** ï¼š`262124 â 2 + 6 + 2 + 1 + 2 + 4 â 17`
- **è½¬æ¢ #2** ï¼š`17 â 1 + 7 â 8`

è¿”å›æ‰§è¡Œä¸Šè¿° **æ“ä½œ** åå¾—åˆ°çš„ **ç»“æœæ•´æ•°** ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** s = "iiii", k = 1
>
> **è¾“å‡ºï¼š** 36
>
> **è§£é‡Šï¼š**
>
> æ“ä½œå¦‚ä¸‹ï¼š
>
> - è½¬åŒ–ï¼š"iiii" â "(9)(9)(9)(9)" â "9999" â 9999
> - è½¬æ¢ #1ï¼š9999 â 9 + 9 + 9 + 9 â 36
>
> å› æ­¤ï¼Œç»“æœæ•´æ•°ä¸º 36 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = "leetcode", k = 2
>
> **è¾“å‡ºï¼š** 6
>
> **è§£é‡Šï¼š**
>
> æ“ä½œå¦‚ä¸‹ï¼š
>
> - è½¬åŒ–ï¼š"leetcode" â "(12)(5)(5)(20)(3)(15)(4)(5)" â "12552031545" â 12552031545
> - è½¬æ¢ #1ï¼š12552031545 â 1 + 2 + 5 + 5 + 2 + 0 + 3 + 1 + 5 + 4 + 5 â 33
> - è½¬æ¢ #2ï¼š33 â 3 + 3 â 6
>
> å› æ­¤ï¼Œç»“æœæ•´æ•°ä¸º 6 ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** s = "zbax", k = 2
>
> **è¾“å‡ºï¼š** 8

**æç¤ºï¼š**

- `1 <= s.length <= 100`
- `1 <= k <= 10`
- `s` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

## è§£é¢˜æ€è·¯

1. **å®šä¹‰ `transform` å‡½æ•°**

   - `transform` å‡½æ•°ç”¨æ¥å°†ä¸€ä¸ªæ•´æ•°çš„æ‰€æœ‰æ•°ä½ç›¸åŠ å¹¶è¿”å›ç´¯åŠ å’Œã€‚
   - ä½¿ç”¨å¾ªç¯é€ä½æå–æ•°ä½ï¼ˆåˆ©ç”¨å–ä½™å’Œæ•´é™¤æ“ä½œï¼‰å¹¶ç´¯åŠ ã€‚
   - ä¾‹å¦‚ï¼šè¾“å…¥ `123` æ—¶ï¼Œè¾“å‡º `1 + 2 + 3 = 6`ã€‚

2. **å­—ç¬¦è½¬æ¢ä¸ºæ•°å€¼å¹¶æ±‚å’Œ**

   - æ¯ä¸ªå­—ç¬¦ä» `'a'` åˆ° `'z'` å¯¹åº”æ•°å€¼ `1` åˆ° `26`ã€‚
   - é€šè¿‡ `char.charCodeAt() - 96` è®¡ç®—å­—æ¯çš„æ•°å€¼ã€‚
   - å¦‚æœå­—æ¯æ•°å€¼è¶…è¿‡ `9`ï¼Œé€šè¿‡ `transform` å‡½æ•°è¿›ä¸€æ­¥æ‹†è§£å¹¶æ±‚å’Œï¼Œå°†å…¶è½¬åŒ–ä¸ºæ•°ä½ä¹‹å’Œã€‚

3. **é‡å¤æ•°ä½æ±‚å’Œ `k` æ¬¡**

   - åˆæ¬¡æ±‚å’Œå¾—åˆ°çš„ç»“æœå­˜å‚¨åœ¨å˜é‡ `sum` ä¸­ã€‚
   - æ¯æ¬¡è°ƒç”¨ `transform` å‡½æ•°å¯¹å½“å‰çš„æ•°å€¼è¿›è¡Œæ•°ä½æ±‚å’Œï¼Œå¹¶æ›´æ–° `sum`ã€‚
   - å¦‚æœåœ¨å¾ªç¯ä¸­æŸä¸€æ¬¡ç»“æœå·²ç»å°äº 10ï¼Œåˆ™æå‰ç»ˆæ­¢ï¼Œé¿å…æ— æ„ä¹‰çš„é‡å¤è®¡ç®—ã€‚

4. **è¿”å›ç»“æœ**

   - åœ¨ `k` æ¬¡è¿­ä»£ç»“æŸåï¼Œ`sum` ä¸­å­˜å‚¨çš„å³ä¸ºæœ€ç»ˆç»“æœã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n + k * log_10(m))`

  - åˆæ¬¡å­—ç¬¦æ˜ å°„ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸² `s` çš„é•¿åº¦ã€‚
  - æ¯æ¬¡æ•°ä½æ±‚å’Œï¼šè¿‘ä¼¼ `O(log_10(m))`ï¼Œå…¶ä¸­ `m` æ˜¯å½“å‰æ•°å€¼çš„å¤§å°ã€‚
  - æ€»ä½“å¤æ‚åº¦ä¸º `O(n + k * log_10(m))`ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä»…ä½¿ç”¨å¸¸æ•°ç©ºé—´ï¼Œæ— éœ€é¢å¤–æ•°ç»„å­˜å‚¨ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @param {number} k
 * @return {number}
 */
var getLucky = function (s, k) {
	// æ•°ä½æ±‚å’Œå‡½æ•°
	const transform = (n) => {
		if (n < 10) return n;
		let res = 0;
		while (n > 0) {
			res += n % 10; // ç´¯åŠ å½“å‰æ•°ä½
			n = Math.floor(n / 10); // å»æ‰æœ€ä½ä½
		}
		return res;
	};

	// åˆå§‹åŒ–ï¼Œå°†å­—ç¬¦æ˜ å°„ä¸ºå­—æ¯é¡ºåºå€¼å¹¶æ±‚å’Œ
	let sum = 0;
	for (let char of s) {
		sum += transform(char.charCodeAt() - 96);
	}

	// æ‰§è¡Œæ•°ä½æ±‚å’Œ k - 1 æ¬¡ï¼Œå› ä¸ºåœ¨ä¸Šé¢å·²ç»æ‰§è¡Œè¿‡ä¸€æ¬¡äº†
	while (k-- > 1) {
		sum = transform(sum);
		if (sum < 10) break; // å¦‚æœæ•°å€¼ç¨³å®šä¸ºä¸ªä½æ•°ï¼Œæå‰ç»“æŸ
	}

	return sum;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 202 | å¿«ä¹æ•° | [[âœ“]](/problem/0202.md) |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ•°å­¦`](/tag/math.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/happy-number) [ğŸ”—](https://leetcode.com/problems/happy-number) |
| 258 | å„ä½ç›¸åŠ  | [[âœ“]](/problem/0258.md) |  [`æ•°å­¦`](/tag/math.md) [`æ•°è®º`](/tag/number-theory.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/add-digits) [ğŸ”—](https://leetcode.com/problems/add-digits) |
| 2180 | ç»Ÿè®¡å„ä½æ•°å­—ä¹‹å’Œä¸ºå¶æ•°çš„æ•´æ•°ä¸ªæ•° |  |  [`æ•°å­¦`](/tag/math.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/count-integers-with-even-digit-sum) [ğŸ”—](https://leetcode.com/problems/count-integers-with-even-digit-sum) |
| 3300 | æ›¿æ¢ä¸ºæ•°ä½å’Œä»¥åçš„æœ€å°å…ƒç´  |  |  [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/minimum-element-after-replacement-with-digit-sum) [ğŸ”—](https://leetcode.com/problems/minimum-element-after-replacement-with-digit-sum) |