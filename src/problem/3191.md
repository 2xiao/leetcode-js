---
title: 3191. ä½¿äºŒè¿›åˆ¶æ•°ç»„å…¨éƒ¨ç­‰äº 1 çš„æœ€å°‘æ“ä½œæ¬¡æ•° I
description: LeetCode 3191. ä½¿äºŒè¿›åˆ¶æ•°ç»„å…¨éƒ¨ç­‰äº 1 çš„æœ€å°‘æ“ä½œæ¬¡æ•° Ié¢˜è§£ï¼ŒMinimum Operations to Make Binary Array Elements Equal to One Iï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 3191. ä½¿äºŒè¿›åˆ¶æ•°ç»„å…¨éƒ¨ç­‰äº 1 çš„æœ€å°‘æ“ä½œæ¬¡æ•° I
  - ä½¿äºŒè¿›åˆ¶æ•°ç»„å…¨éƒ¨ç­‰äº 1 çš„æœ€å°‘æ“ä½œæ¬¡æ•° I
  - Minimum Operations to Make Binary Array Elements Equal to One I
  - è§£é¢˜æ€è·¯
  - ä½è¿ç®—
  - é˜Ÿåˆ—
  - æ•°ç»„
  - å‰ç¼€å’Œ
  - æ»‘åŠ¨çª—å£
---

# 3191. ä½¿äºŒè¿›åˆ¶æ•°ç»„å…¨éƒ¨ç­‰äº 1 çš„æœ€å°‘æ“ä½œæ¬¡æ•° I

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`é˜Ÿåˆ—`](/tag/queue.md) [`æ•°ç»„`](/tag/array.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/minimum-operations-to-make-binary-array-elements-equal-to-one-i) [`LeetCode`](https://leetcode.com/problems/minimum-operations-to-make-binary-array-elements-equal-to-one-i)

## é¢˜ç›®

You are given a binary array `nums`.

You can do the following operation on the array **any** number of times
(possibly zero):

- Choose **any** 3 **consecutive** elements from the array and **flip** **all** of them.

**Flipping** an element means changing its value from 0 to 1, and from 1 to 0.

Return the **minimum** number of operations required to make all elements in
`nums` equal to 1. If it is impossible, return -1.

**Example 1:**

**Input:** nums = [0,1,1,1,0,0]

**Output:** 3

**Explanation:**  
We can do the following operations:

- Choose the elements at indices 0, 1 and 2. The resulting array is `nums = [1, 0, 0, 1, 0, 0]`.
- Choose the elements at indices 1, 2 and 3. The resulting array is `nums = [1, 1, 1, 0, 0, 0]`.
- Choose the elements at indices 3, 4 and 5. The resulting array is `nums = [1, 1, 1, 1, 1, 1]`.

**Example 2:**

**Input:** nums = [0,1,1,1]

**Output:** -1

**Explanation:**  
It is impossible to make all elements equal to 1.

**Constraints:**

- `3 <= nums.length <= 10^5`
- `0 <= nums[i] <= 1`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„ `nums` ã€‚

ä½ å¯ä»¥å¯¹æ•°ç»„æ‰§è¡Œä»¥ä¸‹æ“ä½œ **ä»»æ„** æ¬¡ï¼ˆä¹Ÿå¯ä»¥ 0 æ¬¡ï¼‰ï¼š

- é€‰æ‹©æ•°ç»„ä¸­ **ä»»æ„è¿ç»­** 3 ä¸ªå…ƒç´ ï¼Œå¹¶å°†å®ƒä»¬ **å…¨éƒ¨åè½¬** ã€‚

**åè½¬** ä¸€ä¸ªå…ƒç´ æŒ‡çš„æ˜¯å°†å®ƒçš„å€¼ä» 0 å˜ 1 ï¼Œæˆ–è€…ä» 1 å˜ 0 ã€‚

è¯·ä½ è¿”å›å°† `nums` ä¸­æ‰€æœ‰å…ƒç´ å˜ä¸º 1 çš„ **æœ€å°‘** æ“ä½œæ¬¡æ•°ã€‚å¦‚æœæ— æ³•å…¨éƒ¨å˜æˆ 1 ï¼Œè¿”å› -1 ã€‚

**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** nums = [0,1,1,1,0,0]

**è¾“å‡ºï¼š** 3

**è§£é‡Šï¼š**  
æˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

- é€‰æ‹©ä¸‹æ ‡ä¸º 0 ï¼Œ1 å’Œ 2 çš„å…ƒç´ å¹¶åè½¬ï¼Œå¾—åˆ° `nums = [1, 0, 0, 1, 0, 0]` ã€‚
- é€‰æ‹©ä¸‹æ ‡ä¸º 1 ï¼Œ2 å’Œ 3 çš„å…ƒç´ å¹¶åè½¬ï¼Œå¾—åˆ° `nums = [1, 1, 1, 0, 0, 0]` ã€‚
- é€‰æ‹©ä¸‹æ ‡ä¸º 3 ï¼Œ4 å’Œ 5 çš„å…ƒç´ å¹¶åè½¬ï¼Œå¾—åˆ° `nums = [1, 1, 1, 1, 1, 1]` ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** nums = [0,1,1,1]

**è¾“å‡ºï¼š** -1

**è§£é‡Šï¼š**  
æ— æ³•å°†æ‰€æœ‰å…ƒç´ éƒ½å˜ä¸º 1 ã€‚

**æç¤ºï¼š**

- `3 <= nums.length <= 10^5`
- `0 <= nums[i] <= 1`

## è§£é¢˜æ€è·¯

æˆ‘ä»¬ä½¿ç”¨**è´ªå¿ƒ**ç®—æ³•ï¼Œä»å·¦åˆ°å³éå†æ•°ç»„ï¼š

1. **ç»´æŠ¤ä¸€ä¸ª `flip` æ•°ç»„**ï¼š`flip[i]` è¡¨ç¤ºç´¢å¼• `i` å¤„æ˜¯å¦ç»å†äº†å¥‡æ•°æ¬¡ç¿»è½¬ã€‚
2. **åˆ¤æ–­å½“å‰ä½ç½®æ˜¯å¦ä¸º `0`**ï¼š
   - è‹¥ `nums[i]` åœ¨å½“å‰ç¿»è½¬çŠ¶æ€ä¸‹æ˜¯ `0`ï¼Œåˆ™å¿…é¡»ç¿»è½¬ `nums[i]ã€nums[i+1]ã€nums[i+2]` è¿™ä¸‰ä¸ªå…ƒç´ ï¼Œä½¿ `nums[i]` å˜ `1`ã€‚
   - è®°å½•ç¿»è½¬æ¬¡æ•° `flipCount`ã€‚
3. **éå†åˆ° `n-2` åæ£€æŸ¥æœ€åä¸¤ä¸ªå…ƒç´ **ï¼š
   - è‹¥ `nums[n-2]` æˆ– `nums[n-1]` ä»ç„¶æ˜¯ `0`ï¼Œåˆ™æ— æ³•è½¬åŒ–ä¸ºå…¨ `1`ï¼Œè¿”å› `-1`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œéå†æ•°ç»„ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œ`flip` æ•°ç»„å  `O(n)` é¢å¤–ç©ºé—´ã€‚
  - ç›®å‰çš„è§£æ³•ä½¿ç”¨äº† `flip` æ•°ç»„æ¥è®°å½•æ˜¯å¦è¢«ç¿»è½¬ï¼Œå®é™…ä¸Šæˆ‘ä»¬å¯ä»¥**ä½¿ç”¨ä¸¤ä¸ªå¸ƒå°”å˜é‡** `flip_0, flip_1` ä»£æ›¿ `flip` æ•°ç»„ï¼Œä»è€Œä¼˜åŒ–ç©ºé—´å¤æ‚åº¦è‡³ `O(1)`ã€‚

## ä»£ç 

::: code-tabs
@tab è´ªå¿ƒç®—æ³•

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var minOperations = function (nums) {
	const n = nums.length;
	let flipCount = 0;
	let flip = new Array(n).fill(false);
	const isZero = (i) => (nums[i] == 0 && !flip[i]) || (nums[i] == 1 && flip[i]);
	for (let i = 0; i < n - 2; i++) {
		if (isZero(i)) {
			flip[i] = !flip[i];
			flip[i + 1] = !flip[i + 1];
			flip[i + 2] = !flip[i + 2];
			flipCount += 1;
		}
	}
	if (n - 2 >= 0 && (isZero(n - 2) || isZero(n - 1))) return -1;
	return flipCount;
};
```

@tab å‹ç¼©çŠ¶æ€çš„è´ªå¿ƒç®—æ³•

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var minOperations = function (nums) {
	const n = nums.length;
	let flipCount = 0;
	let flip_0 = false;
	let flip_1 = false;

	for (let i = 0; i < n - 2; i++) {
		if ((nums[i] === 0) !== flip_0) {
			flipCount++;
			flip_0 = !flip_1;
			flip_1 = true;
		} else {
			flip_0 = flip_1;
			flip_1 = false;
		}
	}

	// æœ€åä¸¤ä¸ªå…ƒç´ æ£€æŸ¥æ˜¯å¦èƒ½å…¨éƒ¨å˜ä¸º 1
	if ((nums[n - 2] === 0) !== flip_0 || (nums[n - 1] === 0) !== flip_1) {
		return -1;
	}

	return flipCount;
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 995 | K è¿ç»­ä½çš„æœ€å°ç¿»è½¬æ¬¡æ•° |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`é˜Ÿåˆ—`](/tag/queue.md) [`æ•°ç»„`](/tag/array.md) `2+` | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/minimum-number-of-k-consecutive-bit-flips) [ğŸ”—](https://leetcode.com/problems/minimum-number-of-k-consecutive-bit-flips) |