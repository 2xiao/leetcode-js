---
title: 166. åˆ†æ•°åˆ°å°æ•°
description: LeetCode 166. åˆ†æ•°åˆ°å°æ•°é¢˜è§£ï¼ŒFraction to Recurring Decimalï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 166. åˆ†æ•°åˆ°å°æ•°
  - åˆ†æ•°åˆ°å°æ•°
  - Fraction to Recurring Decimal
  - è§£é¢˜æ€è·¯
  - å“ˆå¸Œè¡¨
  - æ•°å­¦
  - å­—ç¬¦ä¸²
---

# 166. åˆ†æ•°åˆ°å°æ•°

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ•°å­¦`](/tag/math.md) [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/fraction-to-recurring-decimal) [`LeetCode`](https://leetcode.com/problems/fraction-to-recurring-decimal)

## é¢˜ç›®

Given two integers representing the `numerator` and `denominator` of a
fraction, return _the fraction in string format_.

If the fractional part is repeating, enclose the repeating part in
parentheses.

If multiple answers are possible, return **any of them**.

It is **guaranteed** that the length of the answer string is less than `10^4`
for all the given inputs.

**Example 1:**

> Input: numerator = 1, denominator = 2
>
> Output: "0.5"

**Example 2:**

> Input: numerator = 2, denominator = 1
>
> Output: "2"

**Example 3:**

> Input: numerator = 4, denominator = 333
>
> Output: "0.(012)"

**Constraints:**

- `-231 <= numerator, denominator <= 231 - 1`
- `denominator != 0`

## é¢˜ç›®å¤§æ„

ç»™å®šä¸¤ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºåˆ†æ•°çš„åˆ†å­ `numerator` å’Œåˆ†æ¯ `denominator`ï¼Œä»¥ **å­—ç¬¦ä¸²å½¢å¼è¿”å›å°æ•°** ã€‚

å¦‚æœå°æ•°éƒ¨åˆ†ä¸ºå¾ªç¯å°æ•°ï¼Œåˆ™å°†å¾ªç¯çš„éƒ¨åˆ†æ‹¬åœ¨æ‹¬å·å†…ã€‚

å¦‚æœå­˜åœ¨å¤šä¸ªç­”æ¡ˆï¼Œåªéœ€è¿”å› **ä»»æ„ä¸€ä¸ª** ã€‚

å¯¹äºæ‰€æœ‰ç»™å®šçš„è¾“å…¥ï¼Œ**ä¿è¯** ç­”æ¡ˆå­—ç¬¦ä¸²çš„é•¿åº¦å°äº `10^4` ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** numerator = 1, denominator = 2
>
> **è¾“å‡ºï¼š** "0.5"

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** numerator = 2, denominator = 1
>
> **è¾“å‡ºï¼š** "2"

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** numerator = 4, denominator = 333
>
> **è¾“å‡ºï¼š** "0.(012)"

**æç¤ºï¼š**

- `-231 <= numerator, denominator <= 231 - 1`
- `denominator != 0`

## è§£é¢˜æ€è·¯

1. **å¤„ç†æ­£è´Ÿå·**ï¼š

   - å¦‚æœåˆ†å­å’Œåˆ†æ¯çš„ç¬¦å·ä¸åŒï¼Œç»“æœåº”åŠ ä¸Š `-` å·ã€‚
   - å–åˆ†å­å’Œåˆ†æ¯çš„ç»å¯¹å€¼ï¼Œæ–¹ä¾¿åç»­è®¡ç®—ã€‚

2. **è®¡ç®—æ•´æ•°éƒ¨åˆ†**ï¼š

   - ä½¿ç”¨ `Math.floor(numerator / denominator)` å¾—åˆ°æ•´æ•°éƒ¨åˆ†ã€‚
   - å°†ä½™æ•° `remainder` åˆå§‹åŒ–ä¸º `numerator % denominator`ã€‚

3. **å¤„ç†å°æ•°éƒ¨åˆ†**ï¼š

   - å¦‚æœä½™æ•°ä¸º `0`ï¼Œç›´æ¥è¿”å›ç»“æœã€‚
   - å¦åˆ™ï¼Œåœ¨ç»“æœä¸­æ·»åŠ å°æ•°ç‚¹ï¼Œå¹¶å¼€å§‹è®¡ç®—å°æ•°éƒ¨åˆ†ã€‚

4. **æ£€æµ‹å¾ªç¯èŠ‚**ï¼š

   - ä½¿ç”¨ `Map` æ¥å­˜å‚¨æ¯ä¸ªä½™æ•°å¯¹åº”çš„ç»“æœå­—ç¬¦ä¸²çš„ç´¢å¼•ä½ç½®ã€‚
   - å¦‚æœæŸä¸ªä½™æ•°é‡å¤å‡ºç°ï¼Œè¯´æ˜å¼€å§‹è¿›å…¥å¾ªç¯èŠ‚ï¼š
     - å–å‡ºç¬¬ä¸€æ¬¡å‡ºç°è¯¥ä½™æ•°çš„ä½ç½®ã€‚
     - å°†å¾ªç¯èŠ‚ç”¨æ‹¬å·æ‹¬èµ·æ¥ã€‚
   - å¦‚æœä½™æ•°å˜ä¸º `0`ï¼Œè¯´æ˜è®¡ç®—ç»“æŸï¼Œæ²¡æœ‰å¾ªç¯ã€‚

5. **æ‹¼æ¥ç»“æœå¹¶è¿”å›**ï¼š
   - è¿”å›å®Œæ•´çš„ç»“æœå­—ç¬¦ä¸²ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯åˆ†æ¯çš„å€¼ã€‚æ¯æ¬¡å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬å°†ä½™æ•°ä¹˜ä»¥ 10 å¹¶è®¡ç®—æ–°çš„å•†ã€‚æ¯ä¸ªä½™æ•°åªä¼šå‡ºç°ä¸€æ¬¡ï¼Œï¼Œå› æ­¤å¾ªç¯æœ€å¤šè¿›è¡Œ `O(n)` æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œä½¿ç”¨ `Map` æ¥è®°å½•ä½™æ•°çš„ä½ç½®ï¼Œæœ€åæƒ…å†µä¸‹å­˜å‚¨çš„é”®å€¼å¯¹æ•°é‡ç­‰äºåˆ†æ¯çš„å€¼ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} numerator
 * @param {number} denominator
 * @return {string}
 */
var fractionToDecimal = function (numerator, denominator) {
	let res = '';
	let map = new Map();

	// å¤„ç†æ­£è´Ÿå·
	if (
		(numerator > 0 && denominator < 0) ||
		(numerator < 0 && denominator > 0)
	) {
		res += '-';
	}

	// å–åˆ†å­å’Œåˆ†æ¯çš„ç»å¯¹å€¼
	const num = Math.abs(numerator);
	const den = Math.abs(denominator);

	// æ•´æ•°éƒ¨åˆ†
	res += Math.floor(num / den);
	// ä½™æ•°éƒ¨åˆ†
	let remiander = num % den;
	if (remiander == 0) return res;

	// å¤„ç†å°æ•°éƒ¨åˆ†
	res += '.';

	while (remiander !== 0) {
		// è¿›å…¥å¾ªç¯èŠ‚
		if (map.has(remiander)) {
			const index = map.get(remiander);
			res = res.slice(0, index) + '(' + res.slice(index) + ')';
			break;
		}

		map.set(remiander, res.length);

		remiander *= 10;
		res += Math.floor(remiander / den);
		remiander %= den;
	}
	return res;
};
```
