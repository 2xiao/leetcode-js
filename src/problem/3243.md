---
title: 3243. æ–°å¢é“è·¯æŸ¥è¯¢åçš„æœ€çŸ­è·ç¦» I
description: LeetCode 3243. æ–°å¢é“è·¯æŸ¥è¯¢åçš„æœ€çŸ­è·ç¦» Ié¢˜è§£ï¼ŒShortest Distance After Road Addition Queries Iï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 3243. æ–°å¢é“è·¯æŸ¥è¯¢åçš„æœ€çŸ­è·ç¦» I
  - æ–°å¢é“è·¯æŸ¥è¯¢åçš„æœ€çŸ­è·ç¦» I
  - Shortest Distance After Road Addition Queries I
  - è§£é¢˜æ€è·¯
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - å›¾
  - æ•°ç»„
---

# 3243. æ–°å¢é“è·¯æŸ¥è¯¢åçš„æœ€çŸ­è·ç¦» I

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å›¾`](/tag/graph.md) [`æ•°ç»„`](/tag/array.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/shortest-distance-after-road-addition-queries-i) [`LeetCode`](https://leetcode.com/problems/shortest-distance-after-road-addition-queries-i)

## é¢˜ç›®

You are given an integer `n` and a 2D integer array `queries`.

There are `n` cities numbered from `0` to `n - 1`. Initially, there is a
**unidirectional** road from city `i` to city `i + 1` for all `0 <= i < n -
1`.

`queries[i] = [ui, vi]` represents the addition of a new **unidirectional**
road from city `ui` to city `vi`. After each query, you need to find the
**length** of the **shortest path** from city `0` to city `n - 1`.

Return an array `answer` where for each `i` in the range `[0, queries.length -
1]`, `answer[i]` is the _length of the shortest path_ from city `0` to city `n

- 1` after processing the **first**`i + 1` queries.

**Example 1:**

**Input:** n = 5, queries = [[2,4],[0,2],[0,4]]

**Output:** [3,2,1]

**Explanation:**

![](https://assets.leetcode.com/uploads/2024/06/28/image8.jpg)

After the addition of the road from 2 to 4, the length of the shortest path
from 0 to 4 is 3.

![](https://assets.leetcode.com/uploads/2024/06/28/image9.jpg)

After the addition of the road from 0 to 2, the length of the shortest path
from 0 to 4 is 2.

![](https://assets.leetcode.com/uploads/2024/06/28/image10.jpg)

After the addition of the road from 0 to 4, the length of the shortest path
from 0 to 4 is 1.

**Example 2:**

**Input:** n = 4, queries = [[0,3],[0,2]]

**Output:** [1,1]

**Explanation:**

![](https://assets.leetcode.com/uploads/2024/06/28/image11.jpg)

After the addition of the road from 0 to 3, the length of the shortest path
from 0 to 3 is 1.

![](https://assets.leetcode.com/uploads/2024/06/28/image12.jpg)

After the addition of the road from 0 to 2, the length of the shortest path
remains 1.

**Constraints:**

- `3 <= n <= 500`
- `1 <= queries.length <= 500`
- `queries[i].length == 2`
- `0 <= queries[i][0] < queries[i][1] < n`
- `1 < queries[i][1] - queries[i][0]`
- There are no repeated roads among the queries.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` å’Œä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `queries`ã€‚

æœ‰ `n` ä¸ªåŸå¸‚ï¼Œç¼–å·ä» `0` åˆ° `n - 1`ã€‚åˆå§‹æ—¶ï¼Œæ¯ä¸ªåŸå¸‚ `i` éƒ½æœ‰ä¸€æ¡**å•å‘** é“è·¯é€šå¾€åŸå¸‚ `i + 1`ï¼ˆ `0 <= i <
n - 1`ï¼‰ã€‚

`queries[i] = [ui, vi]` è¡¨ç¤ºæ–°å»ºä¸€æ¡ä»åŸå¸‚ `ui` åˆ°åŸå¸‚ `vi` çš„**å•å‘** é“è·¯ã€‚æ¯æ¬¡æŸ¥è¯¢åï¼Œä½ éœ€è¦æ‰¾åˆ°ä»åŸå¸‚ `0`
åˆ°åŸå¸‚ `n - 1` çš„**æœ€çŸ­è·¯å¾„** çš„**é•¿åº¦** ã€‚

è¿”å›ä¸€ä¸ªæ•°ç»„ `answer`ï¼Œå¯¹äºèŒƒå›´ `[0, queries.length - 1]` ä¸­çš„æ¯ä¸ª `i`ï¼Œ`answer[i]` æ˜¯å¤„ç†å®Œ**å‰**
`i + 1` ä¸ªæŸ¥è¯¢åï¼Œä»åŸå¸‚ `0` åˆ°åŸå¸‚ `n - 1` çš„æœ€çŸ­è·¯å¾„çš„ _é•¿åº¦_ ã€‚

**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** n = 5, queries = [[2, 4], [0, 2], [0, 4]]

**è¾“å‡ºï¼š** [3, 2, 1]

**è§£é‡Šï¼š**

![](https://assets.leetcode.com/uploads/2024/06/28/image8.jpg)

æ–°å¢ä¸€æ¡ä» 2 åˆ° 4 çš„é“è·¯åï¼Œä» 0 åˆ° 4 çš„æœ€çŸ­è·¯å¾„é•¿åº¦ä¸º 3ã€‚

![](https://assets.leetcode.com/uploads/2024/06/28/image9.jpg)

æ–°å¢ä¸€æ¡ä» 0 åˆ° 2 çš„é“è·¯åï¼Œä» 0 åˆ° 4 çš„æœ€çŸ­è·¯å¾„é•¿åº¦ä¸º 2ã€‚

![](https://assets.leetcode.com/uploads/2024/06/28/image10.jpg)

æ–°å¢ä¸€æ¡ä» 0 åˆ° 4 çš„é“è·¯åï¼Œä» 0 åˆ° 4 çš„æœ€çŸ­è·¯å¾„é•¿åº¦ä¸º 1ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** n = 4, queries = [[0, 3], [0, 2]]

**è¾“å‡ºï¼š** [1, 1]

**è§£é‡Šï¼š**

![](https://assets.leetcode.com/uploads/2024/06/28/image11.jpg)

æ–°å¢ä¸€æ¡ä» 0 åˆ° 3 çš„é“è·¯åï¼Œä» 0 åˆ° 3 çš„æœ€çŸ­è·¯å¾„é•¿åº¦ä¸º 1ã€‚

![](https://assets.leetcode.com/uploads/2024/06/28/image12.jpg)

æ–°å¢ä¸€æ¡ä» 0 åˆ° 2 çš„é“è·¯åï¼Œä» 0 åˆ° 3 çš„æœ€çŸ­è·¯å¾„é•¿åº¦ä»ä¸º 1ã€‚

**æç¤ºï¼š**

- `3 <= n <= 500`
- `1 <= queries.length <= 500`
- `queries[i].length == 2`
- `0 <= queries[i][0] < queries[i][1] < n`
- `1 < queries[i][1] - queries[i][0]`
- æŸ¥è¯¢ä¸­æ²¡æœ‰é‡å¤çš„é“è·¯ã€‚

## è§£é¢˜æ€è·¯

è¿™æ˜¯ä¸€é“è€ƒå¯Ÿå›¾éå†çš„é¢˜ç›®ï¼Œå¯ä»¥æŠŠæ¯ä¸ªåŸå¸‚çœ‹æˆå›¾çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯æ¡é€šè·¯çœ‹æˆä¸€æ¡è¾¹ã€‚

1. **åˆå§‹åŒ–å›¾çš„è¡¨ç¤ºæ–¹å¼**ï¼š

   - ä½¿ç”¨ **é‚»æ¥è¡¨** å­˜å‚¨å›¾ï¼Œé‚»æ¥è¡¨ç”¨ä¸€ä¸ªæ•°ç»„ `road` è¡¨ç¤ºï¼Œå…¶ä¸­ `road[i]` æ˜¯èŠ‚ç‚¹ `i` çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ã€‚
   - åˆå§‹å›¾ä¸­åªæœ‰é“¾çŠ¶è·¯å¾„ `0 -> 1 -> 2 -> ... -> n-1`ã€‚

2. **BFS å¯»æ‰¾æœ€çŸ­è·¯å¾„**ï¼š

   - ä»èŠ‚ç‚¹ `0` å¼€å§‹ï¼Œç”¨ **é˜Ÿåˆ—** å®ç°å¹¿åº¦ä¼˜å…ˆæœç´¢ã€‚
   - æ¯æ¬¡ä»é˜Ÿåˆ—ä¸­å–å‡ºå½“å‰èŠ‚ç‚¹åŠå…¶è·¯å¾„é•¿åº¦ï¼Œè®¿é—®å…¶æ‰€æœ‰æœªè®¿é—®çš„é‚»å±…èŠ‚ç‚¹ã€‚
   - ä¸€æ—¦è®¿é—®åˆ°ç»ˆç‚¹ `n-1`ï¼Œå³å¯è¿”å›å½“å‰è·¯å¾„é•¿åº¦ï¼Œä¿è¯æ˜¯æœ€çŸ­çš„ã€‚

3. **å¤„ç†æŸ¥è¯¢**ï¼š

   - éå†æ¯ä¸ªæŸ¥è¯¢ `(from, to)`ï¼Œå°†è¾¹ `(from, to)` æ·»åŠ åˆ°é‚»æ¥è¡¨ä¸­ã€‚
   - è°ƒç”¨ BFS è®¡ç®—å½“å‰å›¾ä¸­ä»èŠ‚ç‚¹ `0` åˆ°èŠ‚ç‚¹ `n-1` çš„æœ€çŸ­è·¯å¾„ï¼Œå°†ç»“æœå­˜å‚¨åˆ° `res` æ•°ç»„ä¸­ã€‚

4. **è¿”å›ç»“æœ**ï¼š
   - éå†æ‰€æœ‰æŸ¥è¯¢åï¼Œè¿”å›ç»“æœæ•°ç»„ `res`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(q * (V + E))`ï¼Œæ¯æ¬¡æŸ¥è¯¢æ‰§è¡Œ BFSï¼ŒBFS çš„å¤æ‚åº¦ä¸º `O(V + E)`ï¼Œå…¶ä¸­ `V = n`ï¼Œ`E` æ˜¯å›¾ä¸­è¾¹æ•°ï¼Œ`q` æ˜¯ `queries` çš„é•¿åº¦ï¼Œä»£è¡¨è¦æŸ¥è¯¢ `q` æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(V + E)`ï¼Œé‚»æ¥è¡¨å ç”¨ `O(V + E)` çš„ç©ºé—´ï¼ŒBFS çš„é˜Ÿåˆ—å’Œ `visited` é›†åˆå ç”¨ `O(V)` çš„ç©ºé—´ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} n
 * @param {number[][]} queries
 * @return {number[]}
 */
var shortestDistanceAfterQueries = function (n, queries) {
	// åˆå§‹åŒ–å›¾ï¼Œä½¿ç”¨é‚»æ¥è¡¨è¡¨ç¤º
	let road = new Array(n).fill().map((_, i) => [i + 1]);
	let res = [];

	// è®¡ç®—æœ€çŸ­è·¯å¾„çš„å‡½æ•°ï¼Œä½¿ç”¨ BFS
	const bfsShortestPath = () => {
		let queue = [[0, 0]]; // [èŠ‚ç‚¹, è·ç¦»]
		let visited = new Set();
		visited.add(0);

		while (queue.length) {
			let [node, dist] = queue.shift();

			// å¦‚æœæ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œè¿”å›è·ç¦»
			if (node === n - 1) return dist;

			// éå†é‚»æ¥èŠ‚ç‚¹
			for (let neighbor of road[node]) {
				if (!visited.has(neighbor)) {
					visited.add(neighbor);
					queue.push([neighbor, dist + 1]);
				}
			}
		}
	};

	// å¤„ç†æ¯æ¬¡æŸ¥è¯¢
	for (let [from, to] of queries) {
		// æ·»åŠ æ–°è¾¹
		road[from].push(to);
		// è®¡ç®—å½“å‰æœ€çŸ­è·¯å¾„
		res.push(bfsShortestPath());
	}

	return res;
};
```
