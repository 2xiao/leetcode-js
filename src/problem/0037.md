# [37. è§£æ•°ç‹¬](https://leetcode.com/problems/sudoku-solver)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/outline/tag/hash-table.md) [`å›æº¯`](/outline/tag/backtracking.md) [`çŸ©é˜µ`](/outline/tag/matrix.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/sudoku-solver)

## é¢˜ç›®

Write a program to solve a Sudoku puzzle by filling the empty cells.

A sudoku solution must satisfy **all of the following rules** :

1. Each of the digits `1-9` must occur exactly once in each row.
2. Each of the digits `1-9` must occur exactly once in each column.
3. Each of the digits `1-9` must occur exactly once in each of the 9 `3x3` sub-boxes of the grid.

The `'.'` character indicates empty cells.

**Example 1:**

![](https://upload.wikimedia.org/wikipedia/commons/thumb/f/ff/Sudoku-
by-L2G-20050714.svg/250px-Sudoku-by-L2G-20050714.svg.png)

> Input: board = [["5","3",".",".","7",".",".",".","."],["6",".",".","1","9","5",".",".","."],[".","9","8",".",".",".",".","6","."],["8",".",".",".","6",".",".",".","3"],["4",".",".","8",".","3",".",".","1"],["7",".",".",".","2",".",".",".","6"],[".","6",".",".",".",".","2","8","."],[".",".",".","4","1","9",".",".","5"],[".",".",".",".","8",".",".","7","9"]]
>
> Output: [["5","3","4","6","7","8","9","1","2"],["6","7","2","1","9","5","3","4","8"],["1","9","8","3","4","2","5","6","7"],["8","5","9","7","6","1","4","2","3"],["4","2","6","8","5","3","7","9","1"],["7","1","3","9","2","4","8","5","6"],["9","6","1","5","3","7","2","8","4"],["2","8","7","4","1","9","6","3","5"],["3","4","5","2","8","6","1","7","9"]]
>
> Explanation: The input board is shown above and the only valid solution is shown below:
>
> ![](https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Sudoku-by-L2G-20050714_solution.svg/250px-Sudoku-by-L2G-20050714_solution.svg.png)

**Constraints:**

- `board.length == 9`
- `board[i].length == 9`
- `board[i][j]` is a digit or `'.'`.
- It is **guaranteed** that the input board has only one solution.

## é¢˜ç›®å¤§æ„

ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œé€šè¿‡å¡«å……ç©ºæ ¼æ¥è§£å†³æ•°ç‹¬é—®é¢˜ã€‚

æ•°ç‹¬çš„è§£æ³•éœ€ **éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š**

1. æ•°å­— `1-9` åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
2. æ•°å­— `1-9` åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
3. æ•°å­— `1-9` åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ `3x3` å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰

æ•°ç‹¬éƒ¨åˆ†ç©ºæ ¼å†…å·²å¡«å…¥äº†æ•°å­—ï¼Œç©ºç™½æ ¼ç”¨ `'.'` è¡¨ç¤ºã€‚

## è§£é¢˜æ€è·¯

è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨ **å›æº¯æ³•**ï¼ˆBacktrackingï¼‰ï¼Œé€æ­¥å°è¯•å°†æ¯ä¸ªç©ºæ ¼å¡«å……æ•°å­—ï¼Œå¹¶æ£€æŸ¥å½“å‰çš„å¡«å……æ˜¯å¦ç¬¦åˆæ•°ç‹¬è§„åˆ™ã€‚å¦‚æœä¸ç¬¦åˆè§„åˆ™ï¼Œåˆ™å›é€€åˆ°ä¹‹å‰çš„çŠ¶æ€ç»§ç»­å°è¯•å…¶ä»–å¯èƒ½æ€§ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå¯è¡Œè§£ã€‚

1. **å¯»æ‰¾ç©ºæ ¼**ï¼š

   - éå†æ•´ä¸ªæ•°ç‹¬ï¼Œæ‰¾åˆ°å°šæœªå¡«å……æ•°å­—çš„ä½ç½®ï¼ˆå³ç©ºæ ¼ `' . '`ï¼‰ï¼Œç„¶åå¼€å§‹å°è¯•å¡«å…¥æ•°å­—ã€‚

2. **é€’å½’å¡«å……æ•°å­—**ï¼š

   - å°è¯•å°†æ•°å­— `1-9` ä¾æ¬¡å¡«å…¥ç©ºæ ¼ä¸­ï¼Œå¹¶åœ¨æ¯æ¬¡å¡«å…¥åï¼Œæ£€æŸ¥è¡Œã€åˆ—ã€3x3 çš„å°æ–¹æ ¼æ˜¯å¦ä»æ»¡è¶³æ•°ç‹¬çš„è§„åˆ™ã€‚

3. **æ£€æŸ¥æœ‰æ•ˆæ€§**ï¼š

   - æ¯æ¬¡å¡«å…¥ä¸€ä¸ªæ•°å­—åï¼Œæ£€æŸ¥å½“å‰æ•°ç‹¬çš„æœ‰æ•ˆæ€§ï¼ˆå³æ¯è¡Œã€æ¯åˆ—ã€æ¯ä¸ª 3x3 å°æ–¹æ ¼ä¸­æ˜¯å¦åŒ…å«é‡å¤çš„æ•°å­—ï¼‰ã€‚

4. **å›æº¯**ï¼š

   - å¦‚æœå½“å‰æ•°å­—ä¸æ»¡è¶³è§„åˆ™ï¼Œåˆ™å›é€€åˆ°ä¸Šä¸€æ­¥ï¼Œå°è¯•å¡«å…¥ä¸‹ä¸€ä¸ªå¯èƒ½çš„æ•°å­—ã€‚
   - å¦‚æœæ‰€æœ‰å¯èƒ½çš„æ•°å­—éƒ½ä¸ç¬¦åˆè§„åˆ™ï¼Œåˆ™è¿”å›åˆ°ä¸Šä¸€ä¸ªç©ºæ ¼çš„ä½ç½®ï¼Œç»§ç»­å°è¯•å…¶ä»–å¯èƒ½çš„æ•°å­—ã€‚

5. **ç»ˆæ­¢æ¡ä»¶**ï¼š

   - å½“æ‰€æœ‰ç©ºæ ¼éƒ½å¡«å®Œï¼Œå¹¶ä¸”æ•´ä¸ªæ•°ç‹¬ç¬¦åˆè§„åˆ™æ—¶ï¼Œé€’å½’ç»ˆæ­¢ï¼Œæ•°ç‹¬è¢«è§£å‡ºã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šå›æº¯æ³•çš„æ—¶é—´å¤æ‚åº¦éå¸¸éš¾ä»¥ç²¾ç¡®ä¼°è®¡ï¼Œå› ä¸ºå®ƒå–å†³äºè¾“å…¥æ•°ç‹¬çš„å¤æ‚ç¨‹åº¦ã€‚åœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦å¯èƒ½ä¼šæ¥è¿‘ `O(9^m)`ï¼Œå…¶ä¸­ `m` æ˜¯ç©ºæ ¼çš„æ•°é‡ã€‚å› ä¸ºæ¯ä¸ªç©ºæ ¼æœ€å¤šå¯ä»¥å¡«å…¥ `9` ä¸ªæ•°å­—ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œå› ä¸ºæ•°ç‹¬æ˜¯åœ¨åŸæ•°ç»„ä¸Šä¿®æ”¹çš„ï¼Œä¸”åªä½¿ç”¨äº†å°‘é‡é¢å¤–ç©ºé—´ç”¨äºé€’å½’æ ˆã€‚

## ä»£ç 

```javascript
/**
 * @param {character[][]} board
 * @return {void} Do not return anything, modify board in-place instead.
 */
var solveSudoku = function (board) {
	const solve = (board) => {
		for (let i = 0; i < 9; i++) {
			for (let j = 0; j < 9; j++) {
				if (board[i][j] == '.') {
					// å°è¯•å¡«å…¥ 1-9
					for (let num = 1; num <= 9; num++) {
						if (isValid(board, i, j, num + '')) {
							board[i][j] = num + '';
							// é€’å½’æ±‚è§£
							if (solve(board)) {
								return true;
							}
							// å›æº¯
							board[i][j] = '.';
						}
					}
					// è‹¥æ— æ³•å¡«å…¥ä»»ä½•æ•°å­—ï¼Œè¿”å› false
					return false;
				}
			}
		}
		// æ•°ç‹¬å·²è§£å†³
		return true;
	};
	solve(board);
};

// æ£€æŸ¥åœ¨ board[row][col] æ”¾ç½® num æ˜¯å¦æœ‰æ•ˆ
var isValid = function (board, row, col, num) {
	for (let i = 0; i < 9; i++) {
		// æ£€æŸ¥è¡Œå’Œåˆ—
		if (board[i][col] == num || board[row][i] == num) {
			return false;
		}
		// æ£€æŸ¥ 3x3 å°æ–¹æ ¼
		const boxRow = 3 * ((row / 3) | 0) + ((i / 3) | 0);
		const boxCol = 3 * ((col / 3) | 0) + (i % 3);
		if (board[boxRow][boxCol] == num) {
			return false;
		}
	}
	return true;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 36 | [æœ‰æ•ˆçš„æ•°ç‹¬](https://leetcode.com/problems/valid-sudoku) | [[âœ“]](/problem/0036) |  [`æ•°ç»„`](/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/outline/tag/hash-table.md) [`çŸ©é˜µ`](/outline/tag/matrix.md) | <font color=#ffb800>Medium</font> |
| 980 | [ä¸åŒè·¯å¾„ III](https://leetcode.com/problems/unique-paths-iii) |  |  [`ä½è¿ç®—`](/outline/tag/bit-manipulation.md) [`æ•°ç»„`](/outline/tag/array.md) [`å›æº¯`](/outline/tag/backtracking.md) `1+` | <font color=#ff334b>Hard</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
