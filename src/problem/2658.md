---
title: 2658. ç½‘æ ¼å›¾ä¸­é±¼çš„æœ€å¤§æ•°ç›®
description: LeetCode 2658. ç½‘æ ¼å›¾ä¸­é±¼çš„æœ€å¤§æ•°ç›®é¢˜è§£ï¼ŒMaximum Number of Fish in a Gridï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2658. ç½‘æ ¼å›¾ä¸­é±¼çš„æœ€å¤§æ•°ç›®
  - ç½‘æ ¼å›¾ä¸­é±¼çš„æœ€å¤§æ•°ç›®
  - Maximum Number of Fish in a Grid
  - è§£é¢˜æ€è·¯
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - å¹¶æŸ¥é›†
  - æ•°ç»„
  - çŸ©é˜µ
---

# 2658. ç½‘æ ¼å›¾ä¸­é±¼çš„æœ€å¤§æ•°ç›®

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å¹¶æŸ¥é›†`](/tag/union-find.md) [`æ•°ç»„`](/tag/array.md) [`çŸ©é˜µ`](/tag/matrix.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/maximum-number-of-fish-in-a-grid) [`LeetCode`](https://leetcode.com/problems/maximum-number-of-fish-in-a-grid)

## é¢˜ç›®

You are given a **0-indexed** 2D matrix `grid` of size `m x n`, where `(r, c)`
represents:

- A **land** cell if `grid[r][c] = 0`, or
- A **water** cell containing `grid[r][c]` fish, if `grid[r][c] > 0`.

A fisher can start at any **water** cell `(r, c)` and can do the following
operations any number of times:

- Catch all the fish at cell `(r, c)`, or
- Move to any adjacent **water** cell.

Return _the**maximum** number of fish the fisher can catch if he chooses his
starting cell optimally, or _`0` if no water cell exists.

An **adjacent** cell of the cell `(r, c)`, is one of the cells `(r, c + 1)`,
`(r, c - 1)`, `(r + 1, c)` or `(r - 1, c)` if it exists.

**Example 1:**

![](https://assets.leetcode.com/uploads/2023/03/29/example.png)

> Input: grid = [[0,2,1,0],[4,0,0,3],[1,0,0,4],[0,3,2,0]]
>
> Output: 7
>
> Explanation: The fisher can start at cell (1,3) and collect 3 fish, then move to cell (2,3) and collect 4 fish.

**Example 2:**

![](https://assets.leetcode.com/uploads/2023/03/29/example2.png)

> Input: grid = [[1,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,1]]
>
> Output: 1
>
> Explanation: The fisher can start at cells (0,0) or (3,3) and collect a single fish.

**Constraints:**

- `m == grid.length`
- `n == grid[i].length`
- `1 <= m, n <= 10`
- `0 <= grid[i][j] <= 10`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹å¤§å°ä¸º `m x n` çš„äºŒç»´æ•´æ•°æ•°ç»„ `grid` ï¼Œå…¶ä¸­ä¸‹æ ‡åœ¨ `(r, c)` å¤„çš„æ•´æ•°è¡¨ç¤ºï¼š

- å¦‚æœ `grid[r][c] = 0` ï¼Œé‚£ä¹ˆå®ƒæ˜¯ä¸€å— **é™†åœ°** ã€‚
- å¦‚æœ `grid[r][c] > 0` ï¼Œé‚£ä¹ˆå®ƒæ˜¯ä¸€å— **æ°´åŸŸ** ï¼Œä¸”åŒ…å« `grid[r][c]` æ¡é±¼ã€‚

ä¸€ä½æ¸”å¤«å¯ä»¥ä»ä»»æ„ **æ°´åŸŸ** æ ¼å­ `(r, c)` å‡ºå‘ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹æ“ä½œä»»æ„æ¬¡ï¼š

- æ•ææ ¼å­ `(r, c)` å¤„æ‰€æœ‰çš„é±¼ï¼Œæˆ–è€…
- ç§»åŠ¨åˆ°ç›¸é‚»çš„ **æ°´åŸŸ** æ ¼å­ã€‚

è¯·ä½ è¿”å›æ¸”å¤«æœ€ä¼˜ç­–ç•¥ä¸‹ï¼Œ **æœ€å¤š** å¯ä»¥æ•æå¤šå°‘æ¡é±¼ã€‚å¦‚æœæ²¡æœ‰æ°´åŸŸæ ¼å­ï¼Œè¯·ä½ è¿”å› `0` ã€‚

æ ¼å­ `(r, c)` **ç›¸é‚»** çš„æ ¼å­ä¸º `(r, c + 1)` ï¼Œ`(r, c - 1)` ï¼Œ`(r + 1, c)` å’Œ `(r - 1,
c)` ï¼Œå‰ææ˜¯ç›¸é‚»æ ¼å­åœ¨ç½‘æ ¼å›¾å†…ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2023/03/29/example.png)

> **è¾“å…¥ï¼š** grid = [[0,2,1,0],[4,0,0,3],[1,0,0,4],[0,3,2,0]]
>
> **è¾“å‡ºï¼š** 7
>
> **è§£é‡Šï¼š** æ¸”å¤«å¯ä»¥ä»æ ¼å­ (1,3) å‡ºå‘ï¼Œæ•æ 3 æ¡é±¼ï¼Œç„¶åç§»åŠ¨åˆ°æ ¼å­ (2,3) ï¼Œæ•æ 4 æ¡é±¼ã€‚

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2023/03/29/example2.png)

> **è¾“å…¥ï¼š** grid = [[1,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,1]]
>
> **è¾“å‡ºï¼š** 1
>
> **è§£é‡Šï¼š** æ¸”å¤«å¯ä»¥ä»æ ¼å­ (0,0) æˆ–è€… (3,3) ï¼Œæ•æ 1 æ¡é±¼ã€‚

**æç¤ºï¼š**

- `m == grid.length`
- `n == grid[i].length`
- `1 <= m, n <= 10`
- `0 <= grid[i][j] <= 10`

## è§£é¢˜æ€è·¯

åˆ©ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰æ¢ç´¢è¿é€šå—ï¼Œè®°å½•æ¯ä¸ªè¿é€šå—çš„é±¼æ•°é‡ï¼š

1. éå†ç½‘æ ¼ä¸­çš„æ‰€æœ‰æ ¼å­ï¼›
2. å½“å‘ç°æœªè®¿é—®ä¸”éé›¶çš„æ ¼å­æ—¶ï¼Œä»¥è¯¥æ ¼å­ä¸ºèµ·ç‚¹æ‰§è¡Œ DFSï¼›

   - é‡åˆ°è¶Šç•Œæˆ–å€¼ä¸º `0` çš„æ ¼å­ç›´æ¥è¿”å›ï¼›
   - å°†å½“å‰æ ¼å­ç½®é›¶ä»¥èŠ‚çœç©ºé—´ï¼ˆæ ‡è®°ä¸ºå·²è®¿é—®ï¼‰ï¼Œä¸ä½¿ç”¨é¢å¤–çš„ `visited` æ•°ç»„ï¼›
   - å‘ä¸Šä¸‹å·¦å³é€’å½’æœç´¢ï¼Œå°†ç»“æœç´¯åŠ ã€‚

3. ç´¯è®¡è¿é€šå—ä¸­çš„é±¼æ•°é‡ï¼Œå¹¶ä¸å½“å‰æœ€å¤§å€¼æ¯”è¾ƒï¼Œæ›´æ–°ç»“æœï¼›
4. è¿”å›æœ€å¤§å€¼ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œæ¯ä¸ªæ ¼å­æœ€å¤šè®¿é—®ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œé€’å½’è°ƒç”¨æ ˆçš„ç©ºé—´æ¶ˆè€—ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[][]} grid
 * @return {number}
 */
var findMaxFish = function (grid) {
	const m = grid.length;
	const n = grid[0].length;
	const directions = [
		[1, 0],
		[-1, 0],
		[0, 1],
		[0, -1]
	];

	const dfs = (i, j) => {
		if (i < 0 || i >= m || j < 0 || j >= n || grid[i][j] === 0) {
			return 0;
		}
		let fish = grid[i][j];
		grid[i][j] = 0; // æ ‡è®°å·²è®¿é—®
		for (let [dx, dy] of directions) {
			fish += dfs(i + dx, j + dy);
		}
		return fish;
	};

	let maxFish = 0;
	for (let i = 0; i < m; i++) {
		for (let j = 0; j < n; j++) {
			if (grid[i][j] > 0) {
				maxFish = Math.max(maxFish, dfs(i, j));
			}
		}
	}
	return maxFish;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 200 | å²›å±¿æ•°é‡ | [[âœ“]](/problem/0200.md) |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å¹¶æŸ¥é›†`](/tag/union-find.md) `2+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/number-of-islands) [ğŸ”—](https://leetcode.com/problems/number-of-islands) |