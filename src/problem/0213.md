---
title: 213. æ‰“å®¶åŠ«èˆ II
description: LeetCode 213. æ‰“å®¶åŠ«èˆ IIé¢˜è§£ï¼ŒHouse Robber IIï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 213. æ‰“å®¶åŠ«èˆ II
  - æ‰“å®¶åŠ«èˆ II
  - House Robber II
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - åŠ¨æ€è§„åˆ’
---

# 213. æ‰“å®¶åŠ«èˆ II

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/house-robber-ii) [`LeetCode`](https://leetcode.com/problems/house-robber-ii)

## é¢˜ç›®

You are a professional robber planning to rob houses along a street. Each
house has a certain amount of money stashed. All houses at this place are
**arranged in a circle.** That means the first house is the neighbor of the
last one. Meanwhile, adjacent houses have a security system connected, and
**it will automatically contact the police if two adjacent houses were broken
into on the same night**.

Given an integer array `nums` representing the amount of money of each house,
return _the maximum amount of money you can rob tonight**without alerting the
police**_.

**Example 1:**

> Input: nums = [2,3,2]
>
> Output: 3
>
> Explanation: You cannot rob house 1 (money = 2) and then rob house 3 (money = 2), because they are adjacent houses.

**Example 2:**

> Input: nums = [1,2,3,1]
>
> Output: 4
>
> Explanation: Rob house 1 (money = 1) and then rob house 3 (money = 3).
>
> Total amount you can rob = 1 + 3 = 4.

**Example 3:**

> Input: nums = [1,2,3]
>
> Output: 3

**Constraints:**

- `1 <= nums.length <= 100`
- `0 <= nums[i] <= 1000`

## é¢˜ç›®å¤§æ„

ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ï¼Œæ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ã€‚è¿™ä¸ªåœ°æ–¹æ‰€æœ‰çš„æˆ¿å±‹éƒ½ **å›´æˆä¸€åœˆ**
ï¼Œè¿™æ„å‘³ç€ç¬¬ä¸€ä¸ªæˆ¿å±‹å’Œæœ€åä¸€ä¸ªæˆ¿å±‹æ˜¯ç´§æŒ¨ç€çš„ã€‚åŒæ—¶ï¼Œç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œ**å¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦** ã€‚

ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  **åœ¨ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹** ï¼Œä»Šæ™šèƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** nums = [2,3,2]
>
> **è¾“å‡ºï¼š** 3
>
> **è§£é‡Šï¼š** ä½ ä¸èƒ½å…ˆå·çªƒ 1 å·æˆ¿å±‹ï¼ˆé‡‘é¢ = 2ï¼‰ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ï¼ˆé‡‘é¢ = 2ï¼‰, å› ä¸ºä»–ä»¬æ˜¯ç›¸é‚»çš„ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** nums = [1,2,3,1]
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** ä½ å¯ä»¥å…ˆå·çªƒ 1 å·æˆ¿å±‹ï¼ˆé‡‘é¢ = 1ï¼‰ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ï¼ˆé‡‘é¢ = 3ï¼‰ã€‚
>
> > å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 1 + 3 = 4 ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** nums = [1,2,3]
>
> **è¾“å‡ºï¼š** 3

**æç¤ºï¼š**

- `1 <= nums.length <= 100`
- `0 <= nums[i] <= 1000`

## è§£é¢˜æ€è·¯

è¿™é“é¢˜ç›®æ˜¯ç»å…¸çš„â€œæ‰“å®¶åŠ«èˆâ€é—®é¢˜çš„ç¯å½¢å˜ç§ï¼šåœ¨ä¸€ä¸ªç¯å½¢è¡—åŒºï¼Œæˆ¿å­æ’åˆ—æˆä¸€ä¸ªç¯ï¼Œè¦æ±‚è®¡ç®—èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚ç”±äºæˆ¿å±‹æ˜¯ç¯å½¢æ’åˆ—ï¼Œä¸èƒ½åŒæ—¶å·ç¬¬ä¸€ä¸ªæˆ¿å­å’Œæœ€åä¸€ä¸ªæˆ¿å­ã€‚

1. **ç¯å½¢é—®é¢˜æ‹†è§£**ï¼š

   - å¦‚æœå·äº†ç¬¬ä¸€ä¸ªæˆ¿å­ï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ªæˆ¿å­ä¸èƒ½å·ï¼Œé—®é¢˜å˜ä¸ºä»ç¬¬ä¸€ä¸ªæˆ¿å­åˆ°å€’æ•°ç¬¬äºŒä¸ªæˆ¿å­çš„çº¿æ€§â€œæ‰“å®¶åŠ«èˆâ€é—®é¢˜ã€‚
   - å¦‚æœä¸å·ç¬¬ä¸€ä¸ªæˆ¿å­ï¼Œé‚£ä¹ˆå¯ä»¥ä»ç¬¬äºŒä¸ªæˆ¿å­åˆ°æœ€åä¸€ä¸ªæˆ¿å­è¿›è¡Œçº¿æ€§â€œæ‰“å®¶åŠ«èˆâ€ã€‚

2. **åŠ¨æ€è§„åˆ’**ï¼š

   - è®¾ `dp[i]` è¡¨ç¤ºå·çªƒåˆ°ç¬¬ `i` ä¸ªæˆ¿å­æ—¶çš„æœ€é«˜é‡‘é¢ã€‚
   - è½¬ç§»æ–¹ç¨‹ä¸ºï¼š

     `dp[i] = max(dp[i-1], dp[i-2] + nums[i])`

     - `dp[i-1]`ï¼šä¸å·ç¬¬ `i` ä¸ªæˆ¿å­ï¼Œå–å‰ä¸€ä¸ªæˆ¿å­çš„æœ€å¤§é‡‘é¢ã€‚
     - `dp[i-2] + nums[i]`ï¼šå·ç¬¬ `i` ä¸ªæˆ¿å­ï¼Œåˆ™å‰ `i-1` ä¸ªæˆ¿å­ä¸èƒ½å·ï¼Œå–å‰ `i-2` ä¸ªæˆ¿å­çš„æœ€å¤§é‡‘é¢åŠ ä¸Šç¬¬ `i` ä¸ªæˆ¿å­çš„é‡‘é¢ã€‚

   - åˆå§‹åŒ–ï¼š
     - `dp[0] = nums[0]`
     - `dp[1] = max(nums[0], nums[1])`

3. **ä¸¤ä¸ªç‹¬ç«‹çš„å­é—®é¢˜**ï¼š

   - å­é—®é¢˜ 1ï¼šæ±‚è§£ä»ç¬¬ä¸€ä¸ªæˆ¿å­åˆ°å€’æ•°ç¬¬äºŒä¸ªæˆ¿å­çš„æœ€é«˜é‡‘é¢ã€‚
   - å­é—®é¢˜ 2ï¼šæ±‚è§£ä»ç¬¬äºŒä¸ªæˆ¿å­åˆ°æœ€åä¸€ä¸ªæˆ¿å­çš„æœ€é«˜é‡‘é¢ã€‚

4. **æœ€ç»ˆç»“æœ**ï¼š

   - è¿”å›ä¸¤ä¸ªå­é—®é¢˜çš„æœ€å¤§å€¼ï¼š`result = max(subproblem1, subproblem2)`

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œæ¯ä¸ªå­é—®é¢˜éå†ä¸€æ¬¡æ•°ç»„ï¼Œæ€»å…±ä¸¤æ¬¡éå†ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä½¿ç”¨å¸¸æ•°çº§å˜é‡å­˜å‚¨ä¸­é—´ç»“æœã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var rob = function (nums) {
	const n = nums.length;
	if (n === 1) return nums[0];

	// åŠ¨æ€è§„åˆ’ï¼Œè§£å†³çº¿æ€§é—®é¢˜
	const robLinear = (nums, start, end) => {
		let prev2 = 0,
			prev1 = 0;
		for (let i = start; i <= end; i++) {
			const cur = Math.max(prev1, prev2 + nums[i]);
			prev2 = prev1;
			prev1 = cur;
		}
		return prev1;
	};

	// åˆ†åˆ«è®¡ç®—ä¸¤ä¸ªå­é—®é¢˜
	const case1 = robLinear(nums, 0, n - 2); // å·ç¬¬ä¸€ä¸ªæˆ¿å­
	const case2 = robLinear(nums, 1, n - 1); // ä¸å·ç¬¬ä¸€ä¸ªæˆ¿å­

	return Math.max(case1, case2);
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 198 | æ‰“å®¶åŠ«èˆ | [[âœ“]](/problem/0198.md) |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/house-robber) [ğŸ”—](https://leetcode.com/problems/house-robber) |
| 256 | ç²‰åˆ·æˆ¿å­ ğŸ”’ |  |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/paint-house) [ğŸ”—](https://leetcode.com/problems/paint-house) |
| 276 | æ …æ æ¶‚è‰² ğŸ”’ |  |  [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/paint-fence) [ğŸ”—](https://leetcode.com/problems/paint-fence) |
| 337 | æ‰“å®¶åŠ«èˆ III | [[âœ“]](/problem/0337.md) |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/house-robber-iii) [ğŸ”—](https://leetcode.com/problems/house-robber-iii) |
| 600 | ä¸å«è¿ç»­1çš„éè´Ÿæ•´æ•° |  |  [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/non-negative-integers-without-consecutive-ones) [ğŸ”—](https://leetcode.com/problems/non-negative-integers-without-consecutive-ones) |
| 656 | æˆæœ¬æœ€å°è·¯å¾„ ğŸ”’ |  |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/coin-path) [ğŸ”—](https://leetcode.com/problems/coin-path) |