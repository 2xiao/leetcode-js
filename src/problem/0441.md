---
title: 441. æ’åˆ—ç¡¬å¸
description: LeetCode 441. æ’åˆ—ç¡¬å¸é¢˜è§£ï¼ŒArranging Coinsï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 441. æ’åˆ—ç¡¬å¸
  - æ’åˆ—ç¡¬å¸
  - Arranging Coins
  - è§£é¢˜æ€è·¯
  - æ•°å­¦
  - äºŒåˆ†æŸ¥æ‰¾
---

# 441. æ’åˆ—ç¡¬å¸

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ•°å­¦`](/tag/math.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/arranging-coins) [`LeetCode`](https://leetcode.com/problems/arranging-coins)

## é¢˜ç›®

You have `n` coins and you want to build a staircase with these coins. The
staircase consists of `k` rows where the `ith` row has exactly `i` coins. The
last row of the staircase **may be** incomplete.

Given the integer `n`, return _the number of**complete rows** of the staircase
you will build_.

**Example 1:**

![](https://assets.leetcode.com/uploads/2021/04/09/arrangecoins1-grid.jpg)

> Input: n = 5
>
> Output: 2
>
> Explanation: Because the 3rd row is incomplete, we return 2.

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/04/09/arrangecoins2-grid.jpg)

> Input: n = 8
>
> Output: 3
>
> Explanation: Because the 4th row is incomplete, we return 3.

**Constraints:**

- `1 <= n <= 2^31 - 1`

## é¢˜ç›®å¤§æ„

ä½ æ€»å…±æœ‰ `n` æšç¡¬å¸ï¼Œå¹¶è®¡åˆ’å°†å®ƒä»¬æŒ‰é˜¶æ¢¯çŠ¶æ’åˆ—ã€‚å¯¹äºä¸€ä¸ªç”± `k` è¡Œç»„æˆçš„é˜¶æ¢¯ï¼Œå…¶ç¬¬ `i` ** è¡Œå¿…é¡»æ­£å¥½æœ‰ `i` **
æšç¡¬å¸ã€‚é˜¶æ¢¯çš„æœ€åä¸€è¡Œ **å¯èƒ½** æ˜¯ä¸å®Œæ•´çš„ã€‚

ç»™ä½ ä¸€ä¸ªæ•°å­— `n` ï¼Œè®¡ç®—å¹¶è¿”å›å¯å½¢æˆ **å®Œæ•´é˜¶æ¢¯è¡Œ** çš„æ€»è¡Œæ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/04/09/arrangecoins1-grid.jpg)

> **è¾“å…¥ï¼š** n = 5
>
> **è¾“å‡ºï¼š** 2
>
> **è§£é‡Šï¼š** å› ä¸ºç¬¬ä¸‰è¡Œä¸å®Œæ•´ï¼Œæ‰€ä»¥è¿”å› 2 ã€‚

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/04/09/arrangecoins2-grid.jpg)

> **è¾“å…¥ï¼š** n = 8
>
> **è¾“å‡ºï¼š** 3
>
> **è§£é‡Šï¼š** å› ä¸ºç¬¬å››è¡Œä¸å®Œæ•´ï¼Œæ‰€ä»¥è¿”å› 3 ã€‚

**æç¤ºï¼š**

- `1 <= n <= 2^31 - 1`

## è§£é¢˜æ€è·¯

è¿™é“é¢˜çš„æœ¬è´¨æ˜¯å¯»æ‰¾ä¸€ä¸ªæœ€å¤§çš„æ•´æ•° `k`ï¼Œæ»¡è¶³é˜¶æ¢¯æ€»ç¡¬å¸æ•°å…¬å¼ï¼š`(k * (k + 1)) / 2 <= n`ï¼Œå³æ‰¾åˆ° `k` ä½¿å¾—ä»ç¬¬ 1 è¡Œåˆ°ç¬¬ `k` è¡Œçš„ç¡¬å¸æ€»æ•°å°äºç­‰äº `n`ã€‚

å› ä¸ºé˜¶æ¢¯è¡Œæ•° `k` å’Œç¡¬å¸æ€»æ•° `n` çš„å…³ç³»æ˜¯å•è°ƒé€’å¢çš„ï¼Œä½¿ç”¨ **äºŒåˆ†æŸ¥æ‰¾** æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„è§£å†³æ–¹æ³•ã€‚

1. åˆå§‹åŒ– `left = 1` å’Œ `right = n`ï¼Œå®šä¹‰æœç´¢èŒƒå›´ã€‚
2. åœ¨äºŒåˆ†æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ï¼Œè®¡ç®—ä¸­ç‚¹ `mid`ï¼Œæ£€æŸ¥æ˜¯å¦æ»¡è¶³å…¬å¼ `(mid * (mid + 1)) / 2 <= n`ã€‚
3. æ ¹æ®å…¬å¼çš„ç»“æœè°ƒæ•´æœç´¢èŒƒå›´ï¼š
   - å¦‚æœè¶…å‡ºç¡¬å¸æ€»æ•°ï¼Œå‡å°æœç´¢èŒƒå›´ï¼Œè°ƒæ•´ `right = mid - 1`ã€‚
   - å¦‚æœå¯ä»¥æ»¡è¶³ï¼Œåˆ™è®°å½•ç»“æœï¼Œå¹¶å°è¯•æ‰©å¤§èŒƒå›´ `left = mid + 1`ã€‚
4. å½“å¾ªç¯ç»“æŸæ—¶ï¼Œ`res` ä¿å­˜çš„å°±æ˜¯å¯ä»¥æ„æˆå®Œæ•´é˜¶æ¢¯è¡Œçš„æœ€å¤§è¡Œæ•°ï¼Œè¿”å›è®°å½•çš„æœ€å¤§è¡Œæ•° `res`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(log n)`ï¼Œæ¯æ¬¡äºŒåˆ†æŸ¥æ‰¾å°†èŒƒå›´ç¼©å°ä¸€åŠï¼Œæ€»å…±è¿›è¡Œ `O(log n)` æ¬¡è®¡ç®—ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªä½¿ç”¨äº†å¸¸æ•°ä¸ªå˜é‡ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} n
 * @return {number}
 */
var arrangeCoins = function (n) {
	let left = 1,
		right = n,
		res = 0; // åˆå§‹åŒ–æœç´¢èŒƒå›´å’Œç»“æœ
	while (left <= right) {
		const mid = Math.floor((left + right) / 2); // è®¡ç®—ä¸­é—´å€¼
		const total = (mid * (mid + 1)) / 2; // è®¡ç®—å½“å‰é˜¶æ¢¯çš„ç¡¬å¸æ€»æ•°
		if (total > n) {
			right = mid - 1; // è¶…å‡ºç¡¬å¸æ€»æ•°ï¼Œç¼©å°èŒƒå›´
		} else {
			res = mid; // è®°å½•å½“å‰ç»“æœ
			left = mid + 1; // å°è¯•æ£€æŸ¥æ›´å¤§çš„é˜¶æ¢¯è¡Œæ•°
		}
	}
	return res; // è¿”å›æœ€ç»ˆç»“æœ
};
```
