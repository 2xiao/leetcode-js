---
title: 2070. æ¯ä¸€ä¸ªæŸ¥è¯¢çš„æœ€å¤§ç¾ä¸½å€¼
description: LeetCode 2070. æ¯ä¸€ä¸ªæŸ¥è¯¢çš„æœ€å¤§ç¾ä¸½å€¼é¢˜è§£ï¼ŒMost Beautiful Item for Each Queryï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2070. æ¯ä¸€ä¸ªæŸ¥è¯¢çš„æœ€å¤§ç¾ä¸½å€¼
  - æ¯ä¸€ä¸ªæŸ¥è¯¢çš„æœ€å¤§ç¾ä¸½å€¼
  - Most Beautiful Item for Each Query
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - äºŒåˆ†æŸ¥æ‰¾
  - æ’åº
---

# 2070. æ¯ä¸€ä¸ªæŸ¥è¯¢çš„æœ€å¤§ç¾ä¸½å€¼

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`æ’åº`](/tag/sorting.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/most-beautiful-item-for-each-query) [`LeetCode`](https://leetcode.com/problems/most-beautiful-item-for-each-query)

## é¢˜ç›®

You are given a 2D integer array `items` where `items[i] = [pricei, beautyi]`
denotes the **price** and **beauty** of an item respectively.

You are also given a **0-indexed** integer array `queries`. For each
`queries[j]`, you want to determine the **maximum beauty** of an item whose
**price** is **less than or equal** to `queries[j]`. If no such item exists,
then the answer to this query is `0`.

Return _an array_`answer` _of the same length as_`queries`
_where_`answer[j]`_is the answer to the_`jth` _query_.

**Example 1:**

> Input: items = [[1,2],[3,2],[2,4],[5,6],[3,5]], queries = [1,2,3,4,5,6]
>
> Output: [2,4,5,5,6,6]
>
> Explanation:
>
> - For queries[0]=1, [1,2] is the only item which has price <= 1. Hence, the answer for this query is 2.
> - For queries[1]=2, the items which can be considered are [1,2] and [2,4].
>
>   The maximum beauty among them is 4.
>
> - For queries[2]=3 and queries[3]=4, the items which can be considered are [1,2], [3,2], [2,4], and [3,5].
>
>   The maximum beauty among them is 5.
>
> - For queries[4]=5 and queries[5]=6, all items can be considered.
>
>   Hence, the answer for them is the maximum beauty of all items, i.e., 6.

**Example 2:**

> Input: items = [[1,2],[1,2],[1,3],[1,4]], queries = [1]
>
> Output: [4]
>
> Explanation:
>
> The price of every item is equal to 1, so we choose the item with the maximum beauty 4.
>
> Note that multiple items can have the same price and/or beauty.

**Example 3:**

> Input: items = [[10,1000]], queries = [5]
>
> Output: [0]
>
> Explanation:
>
> No item has a price less than or equal to 5, so no item can be chosen.
>
> Hence, the answer to the query is 0.

**Constraints:**

- `1 <= items.length, queries.length <= 10^5`
- `items[i].length == 2`
- `1 <= pricei, beautyi, queries[j] <= 10^9`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `items` ï¼Œå…¶ä¸­ `items[i] = [pricei, beautyi]` åˆ†åˆ«è¡¨ç¤ºæ¯ä¸€ä¸ªç‰©å“çš„ **ä»·æ ¼** å’Œ
**ç¾ä¸½å€¼** ã€‚

åŒæ—¶ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹çš„æ•´æ•°æ•°ç»„ `queries` ã€‚å¯¹äºæ¯ä¸ªæŸ¥è¯¢ `queries[j]` ï¼Œä½ æƒ³æ±‚å‡ºä»·æ ¼å°äºç­‰äº
`queries[j]` çš„ç‰©å“ä¸­ï¼Œ**æœ€å¤§çš„ç¾ä¸½å€¼** æ˜¯å¤šå°‘ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„ç‰©å“ï¼Œé‚£ä¹ˆæŸ¥è¯¢çš„ç»“æœä¸º `0` ã€‚

è¯·ä½ è¿”å›ä¸€ä¸ªé•¿åº¦ä¸ `queries` ç›¸åŒçš„æ•°ç»„ `answer`ï¼Œå…¶ä¸­ `answer[j]`æ˜¯ç¬¬ `j` ä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** items = [[1,2],[3,2],[2,4],[5,6],[3,5]], queries = [1,2,3,4,5,6]
>
> **è¾“å‡ºï¼š**[2,4,5,5,6,6]
>
> **è§£é‡Šï¼š**
>
> - queries[0]=1 ï¼Œ[1,2] æ˜¯å”¯ä¸€ä»·æ ¼ <= 1 çš„ç‰©å“ã€‚æ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆä¸º 2 ã€‚
> - queries[1]=2 ï¼Œç¬¦åˆæ¡ä»¶çš„ç‰©å“æœ‰ [1,2] å’Œ [2,4] ã€‚
>
>   å®ƒä»¬ä¸­çš„æœ€å¤§ç¾ä¸½å€¼ä¸º 4 ã€‚
>
> - queries[2]=3 å’Œ queries[3]=4 ï¼Œç¬¦åˆæ¡ä»¶çš„ç‰©å“éƒ½ä¸º [1,2] ï¼Œ[3,2] ï¼Œ[2,4] å’Œ [3,5] ã€‚
>
>   å®ƒä»¬ä¸­çš„æœ€å¤§ç¾ä¸½å€¼ä¸º 5 ã€‚
>
> - queries[4]=5 å’Œ queries[5]=6 ï¼Œæ‰€æœ‰ç‰©å“éƒ½ç¬¦åˆæ¡ä»¶ã€‚
>
>   æ‰€ä»¥ï¼Œç­”æ¡ˆä¸ºæ‰€æœ‰ç‰©å“ä¸­çš„æœ€å¤§ç¾ä¸½å€¼ï¼Œä¸º 6 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** items = [[1,2],[1,2],[1,3],[1,4]], queries = [1]
>
> **è¾“å‡ºï¼š**[4]
>
> **è§£é‡Šï¼š**
>
> æ¯ä¸ªç‰©å“çš„ä»·æ ¼å‡ä¸º 1 ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©æœ€å¤§ç¾ä¸½å€¼ 4 ã€‚
>
> æ³¨æ„ï¼Œå¤šä¸ªç‰©å“å¯èƒ½æœ‰ç›¸åŒçš„ä»·æ ¼å’Œç¾ä¸½å€¼ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** items = [[10,1000]], queries = [5]
>
> **è¾“å‡ºï¼š**[0]
>
> **è§£é‡Šï¼š**
>
> æ²¡æœ‰ç‰©å“çš„ä»·æ ¼å°äºç­‰äº 5 ï¼Œæ‰€ä»¥æ²¡æœ‰ç‰©å“å¯ä»¥é€‰æ‹©ã€‚
>
> å› æ­¤ï¼ŒæŸ¥è¯¢çš„ç»“æœä¸º 0 ã€‚

**æç¤ºï¼š**

- `1 <= items.length, queries.length <= 10^5`
- `items[i].length == 2`
- `1 <= pricei, beautyi, queries[j] <= 10^9`

## è§£é¢˜æ€è·¯

1. **æ’åºå¹¶é¢„å¤„ç† `items`**:
   - é¦–å…ˆå°† `items` æŒ‰ `price` ä»å°åˆ°å¤§æ’åºã€‚å¦‚æœ `price` ç›¸åŒï¼ŒæŒ‰ `beauty` ä»å¤§åˆ°å°æ’åºï¼Œè¿™æ ·å¯ä»¥ä¿è¯åŒä¸€ `price` åªè®°å½•æœ€å¤§ `beauty` çš„ç‰©å“ã€‚
2. **æ„å»ºæœ€å¤§ç¾ä¸½å€¼å‰ç¼€æ•°ç»„**:
   - åˆ›å»ºä¸€ä¸ªæ•°ç»„ `maxBeautyArr`ï¼Œç”¨æ¥è®°å½•ä» `items[0]` å¼€å§‹åˆ°å½“å‰ä»·æ ¼çš„æœ€å¤§ç¾ä¸½å€¼ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥é«˜æ•ˆåœ°è·å–æ‰€æœ‰ä»·æ ¼å°äºç­‰äºæŸä¸€ä»·æ ¼çš„æœ€å¤§ç¾ä¸½å€¼ã€‚
   - éå†æ’åºåçš„ `items`ï¼Œå°†æœ€å¤§ç¾ä¸½å€¼ä¸æ–­æ›´æ–°å­˜å‚¨åœ¨è¿™ä¸ªæ•°ç»„ä¸­ã€‚
3. **å¯¹ `queries` è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾**:
   - å°† `queries` å’Œå…¶ä¸‹æ ‡ç»„åˆæˆå…ƒç»„å¹¶æŒ‰ `queries` å‡åºæ’åºã€‚ç„¶åå¯¹æ¯ä¸ªæŸ¥è¯¢ `query`ï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾åœ¨ `maxBeautyArr` ä¸­æ‰¾åˆ°ä¸è¶…è¿‡ `query` çš„æœ€å¤§ä»·æ ¼çš„ç´¢å¼•ã€‚
   - æ ¹æ®æ‰¾åˆ°çš„ç´¢å¼•ç›´æ¥è·å¾—å¯¹åº”çš„æœ€å¤§ç¾ä¸½å€¼ã€‚
4. **è¿˜åŸç»“æœ**:
   - å°†æŒ‰é¡ºåºå¾—åˆ°çš„ç­”æ¡ˆæ”¾å›åŸå§‹ `queries` çš„é¡ºåºä¸­ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O((m + n) log m)`ã€‚

  - æ’åº `items` éœ€è¦ `O(m log m)` æ—¶é—´å¤æ‚åº¦ï¼Œå…¶ä¸­ `m` æ˜¯ `items` çš„é•¿åº¦ã€‚
  - é¢„å¤„ç† `maxBeautyArr` æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(m)`ã€‚
  - `queries` æ’åºæ—¶é—´å¤æ‚åº¦ä¸º `O(n log n)`ï¼Œå…¶ä¸­ `n` æ˜¯ `queries` çš„é•¿åº¦ã€‚
  - å¯¹æ¯ä¸ªæŸ¥è¯¢ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œéå† `queries` æ‰€éœ€æ€»æ—¶é—´å¤æ‚åº¦ä¸º `O(n log m)`ã€‚
  - æ‰€ä»¥æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º `O((m + n) log m)`ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m + n)`ï¼Œæ’åºæ‰€éœ€çš„ç©ºé—´å¤æ‚åº¦ä¸º `O(m + n)`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[][]} items
 * @param {number[]} queries
 * @return {number[]}
 */
var maximumBeauty = function (items, queries) {
	// å¯¹ items æ’åº
	items.sort((a, b) => (a[0] == b[0] ? a[1] - b[1] : a[0] - b[0]));

	// æ‰¾åˆ°æ¯ä¸ª price å¯¹åº”çš„æœ€å¤§ beauty
	let maxBeauty = 0,
		maxBeautyArr = [];

	for (let [price, beauty] of items) {
		maxBeauty = Math.max(maxBeauty, beauty);
		maxBeautyArr.push([price, maxBeauty]);
	}

	// å¯¹ queries è¿›è¡Œæ’åº
	const sortedQueries = queries
		.map((q, i) => [q, i])
		.sort((a, b) => a[0] - b[0]);
	let res = new Array(queries.length);
	let i = 0;
	for (let [query, idx] of sortedQueries) {
		// ç§»åŠ¨ i åˆ°å°äºç­‰äº query çš„æœ€å¤§ price
		while (i < maxBeautyArr.length && maxBeautyArr[i][0] <= query) {
			i++;
		}
		// å¦‚æœ i ä¸º 0ï¼Œ è¯´æ˜æ²¡æœ‰å°äºç­‰äº query çš„ priceï¼Œè¿”å› 0
		res[idx] = i == 0 ? 0 : maxBeautyArr[i - 1][1];
	}
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1847 | æœ€è¿‘çš„æˆ¿é—´ |  |  [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`æœ‰åºé›†åˆ`](/tag/ordered-set.md) `1+` | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/closest-room) [ğŸ”—](https://leetcode.com/problems/closest-room) |
| 2640 | ä¸€ä¸ªæ•°ç»„æ‰€æœ‰å‰ç¼€çš„åˆ†æ•° |  |  [`æ•°ç»„`](/tag/array.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/find-the-score-of-all-prefixes-of-an-array) [ğŸ”—](https://leetcode.com/problems/find-the-score-of-all-prefixes-of-an-array) |
| 2736 | æœ€å¤§å’ŒæŸ¥è¯¢ |  |  [`æ ˆ`](/tag/stack.md) [`æ ‘çŠ¶æ•°ç»„`](/tag/binary-indexed-tree.md) [`çº¿æ®µæ ‘`](/tag/segment-tree.md) `4+` | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-sum-queries) [ğŸ”—](https://leetcode.com/problems/maximum-sum-queries) |