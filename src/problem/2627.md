---
title: 2627. å‡½æ•°é˜²æŠ–
description: LeetCode,2627. å‡½æ•°é˜²æŠ–,å‡½æ•°é˜²æŠ–,Debounce,è§£é¢˜æ€è·¯
keywords:
  - LeetCode
  - 2627. å‡½æ•°é˜²æŠ–
  - å‡½æ•°é˜²æŠ–
  - Debounce
  - è§£é¢˜æ€è·¯
---

# 2627. å‡½æ•°é˜²æŠ–

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/debounce) [`LeetCode`](https://leetcode.com/problems/debounce)

## é¢˜ç›®

Given a function `fn` and a time in milliseconds `t`, return a **debounced**
version of that function.

A **debounced** function is a function whose execution is delayed by `t`
milliseconds and whose execution is cancelled if it is called again within
that window of time. The debounced function should also receive the passed
parameters.

For example, let's say `t = 50ms`, and the function was called at `30ms`,
`60ms`, and `100ms`.

The first 2 function calls would be cancelled, and the 3rd function call would
be executed at `150ms`.

If instead `t = 35ms`, The 1st call would be cancelled, the 2nd would be
executed at `95ms`, and the 3rd would be executed at `135ms`.

![Debounce Schematic](https://assets.leetcode.com/uploads/2023/04/08/screen-
shot-2023-04-08-at-11048-pm.png)

The above diagram shows how debounce will transform events. Each rectangle
represents 100ms and the debounce time is 400ms. Each color represents a
different set of inputs.

Please solve it without using lodash's `_.debounce()` function.

**Example 1:**

> Input:
>
> t = 50
>
> calls = [
>
> {"t": 50, inputs: [1]},
>
> {"t": 75, inputs: [2]}
>
> ]
>
> Output: [{"t": 125, inputs: [2]}]
>
> Explanation:
>
> let start = Date.now();
>
> function log(...inputs) {
>
> console.log([Date.now() - start, inputs ])
>
> }
>
> const dlog = debounce(log, 50);
>
> setTimeout(() => dlog(1), 50);
>
> setTimeout(() => dlog(2), 75);
>
> The 1st call is cancelled by the 2nd call because the 2nd call occurred before 100ms
>
> The 2nd call is delayed by 50ms and executed at 125ms. The inputs were (2).

**Example 2:**

> Input:
>
> t = 20
>
> calls = [
>
> {"t": 50, inputs: [1]},
>
> {"t": 100, inputs: [2]}
>
> ]
>
> Output: [{"t": 70, inputs: [1]}, {"t": 120, inputs: [2]}]
>
> Explanation:
>
> The 1st call is delayed until 70ms. The inputs were (1).
>
> The 2nd call is delayed until 120ms. The inputs were (2).

**Example 3:**

> Input:
>
> t = 150
>
> calls = [
>
> {"t": 50, inputs: [1, 2]},
>
> {"t": 300, inputs: [3, 4]},
>
> {"t": 300, inputs: [5, 6]}
>
> ]
>
> Output: [{"t": 200, inputs: [1,2]}, {"t": 450, inputs: [5, 6]}]
>
> Explanation:
>
> The 1st call is delayed by 150ms and ran at 200ms. The inputs were (1, 2).
>
> The 2nd call is cancelled by the 3rd call
>
> The 3rd call is delayed by 150ms and ran at 450ms. The inputs were (5, 6).

**Constraints:**

- `0 <= t <= 1000`
- `1 <= calls.length <= 10`
- `0 <= calls[i].t <= 1000`
- `0 <= calls[i].inputs.length <= 10`

## é¢˜ç›®å¤§æ„

è¯·ä½ ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶å‚æ•°ä¸ºå¦ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªä»¥æ¯«ç§’ä¸ºå•ä½çš„æ—¶é—´ `t` ï¼Œå¹¶è¿”å›è¯¥å‡½æ•°çš„ **å‡½æ•°é˜²æŠ–** åçš„ç»“æœã€‚

**å‡½æ•°é˜²æŠ–** æ–¹æ³•æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„æ‰§è¡Œè¢«å»¶è¿Ÿäº† `t` æ¯«ç§’ï¼Œå¦‚æœåœ¨è¿™ä¸ªæ—¶é—´çª—å£å†…å†æ¬¡è°ƒç”¨å®ƒï¼Œå®ƒçš„æ‰§è¡Œå°†è¢«å–æ¶ˆã€‚ä½ ç¼–å†™çš„é˜²æŠ–å‡½æ•°ä¹Ÿåº”è¯¥æ¥æ”¶ä¼ é€’çš„å‚æ•°ã€‚

ä¾‹å¦‚ï¼Œå‡è®¾ `t = 50ms` ï¼Œå‡½æ•°åˆ†åˆ«åœ¨ `30ms` ã€ `60ms` å’Œ `100ms` æ—¶è°ƒç”¨ã€‚å‰ä¸¤ä¸ªå‡½æ•°è°ƒç”¨å°†è¢«å–æ¶ˆï¼Œç¬¬ä¸‰ä¸ªå‡½æ•°è°ƒç”¨å°†åœ¨ `150ms` æ‰§è¡Œã€‚å¦‚æœæ”¹ä¸º `t = 35ms` ï¼Œåˆ™ç¬¬ä¸€ä¸ªè°ƒç”¨å°†è¢«å–æ¶ˆï¼Œç¬¬äºŒä¸ªè°ƒç”¨å°†åœ¨ `95ms` æ‰§è¡Œï¼Œç¬¬ä¸‰ä¸ªè°ƒç”¨å°†åœ¨ `135ms` æ‰§è¡Œã€‚

![Debounce Schematic](https://assets.leetcode.com/uploads/2023/04/08/screen-
shot-2023-04-08-at-11048-pm.png)

ä¸Šå›¾å±•ç¤ºäº†é˜²æŠ–å‡½æ•°æ˜¯å¦‚ä½•è½¬æ¢äº‹ä»¶çš„ã€‚å…¶ä¸­ï¼Œæ¯ä¸ªçŸ©å½¢è¡¨ç¤º 100msï¼Œåå¼¹æ—¶é—´ä¸º 400msã€‚æ¯ç§é¢œè‰²ä»£è¡¨ä¸€ç»„ä¸åŒçš„è¾“å…¥ã€‚

è¯·åœ¨ä¸ä½¿ç”¨ lodash çš„ `_.debounce()` å‡½æ•°çš„å‰æä¸‹è§£å†³è¯¥é—®é¢˜ã€‚

**æç¤ºï¼š**

- `0 <= t <= 1000`
- `1 <= calls.length <= 10`
- `0 <= calls[i].t <= 1000`
- `0 <= calls[i].inputs.length <= 10`

## è§£é¢˜æ€è·¯

**é˜²æŠ–** çš„ä½œç”¨æ˜¯å°†çŸ­æ—¶é—´å†…è§¦å‘çš„å¤šæ¬¡è°ƒç”¨ï¼Œå»¶è¿Ÿåˆ°æŒ‡å®šæ—¶é—´åæ‰§è¡Œã€‚å¦‚æœåœ¨ç­‰å¾…æ—¶é—´å†…å‡½æ•°è¢«å†æ¬¡è°ƒç”¨ï¼Œåˆ™é‡æ–°è®¡æ—¶ï¼Œåªæœ‰åœ¨æ²¡æœ‰æ–°è°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œç­‰åˆ°è®¡æ—¶å™¨åˆ°è¾¾ `t` æ¯«ç§’åï¼Œæ‰ä¼šçœŸæ­£æ‰§è¡Œ `fn`ã€‚è¿™åœ¨å¤„ç†é«˜é¢‘è§¦å‘äº‹ä»¶ï¼ˆå¦‚çª—å£è°ƒæ•´å¤§å°ã€ç”¨æˆ·è¾“å…¥ç­‰ï¼‰æ—¶éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥é¿å…å¤§é‡ä¸å¿…è¦çš„æ“ä½œã€‚

1. å®šä¹‰ä¸€ä¸ªå˜é‡ `timer` æ¥å­˜å‚¨å½“å‰çš„è®¡æ—¶å™¨ IDã€‚
2. è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œæ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨å¹¶é‡æ–°å¯åŠ¨ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ã€‚
3. å¦‚æœè®¡æ—¶å™¨è§¦å‘ï¼Œåˆ™è°ƒç”¨åŸå§‹å‡½æ•° `fn`ï¼Œå¹¶ä¼ å…¥å…¶å‚æ•°ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œå› ä¸ºæ¸…é™¤å’Œè®¾ç½®å®šæ—¶å™¨éƒ½æ˜¯å¸¸æ•°æ—¶é—´æ“ä½œã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªéœ€è¦ä¸€ä¸ªå˜é‡ `timer` æ¥å­˜å‚¨è®¡æ—¶å™¨ IDã€‚

## ä»£ç 

```javascript
/**
 * @param {Function} fn
 * @param {number} t milliseconds
 * @return {Function}
 */
var debounce = function (fn, t) {
	let timer;
	return function (...args) {
		// æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œæ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
		clearTimeout(timer);

		// å¯åŠ¨æ–°çš„å®šæ—¶å™¨
		timer = setTimeout(() => fn(...args), t);
	};
};

/**
 * const log = debounce(console.log, 100);
 * log('Hello'); // cancelled
 * log('Hello'); // cancelled
 * log('Hello'); // Logged at t=100ms
 */
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 2622 | æœ‰æ—¶é—´é™åˆ¶çš„ç¼“å­˜ | [[âœ“]](/problem/2622.md) |  | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/cache-with-time-limit) [ğŸ”—](https://leetcode.com/problems/cache-with-time-limit) |
| 2637 | æœ‰æ—¶é—´é™åˆ¶çš„ Promise å¯¹è±¡ | [[âœ“]](/problem/2637.md) |  | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/promise-time-limit) [ğŸ”—](https://leetcode.com/problems/promise-time-limit) |
| 2676 | èŠ‚æµ ğŸ”’ | [[âœ“]](/problem/2676.md) |  | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/throttle) [ğŸ”—](https://leetcode.com/problems/throttle) |