---
title: 2757. ç”Ÿæˆå¾ªç¯æ•°ç»„çš„å€¼ ğŸ”’
description: LeetCode,2757. ç”Ÿæˆå¾ªç¯æ•°ç»„çš„å€¼ ğŸ”’,ç”Ÿæˆå¾ªç¯æ•°ç»„çš„å€¼,Generate Circular Array Values,è§£é¢˜æ€è·¯
keywords:
  - LeetCode
  - 2757. ç”Ÿæˆå¾ªç¯æ•°ç»„çš„å€¼ ğŸ”’
  - ç”Ÿæˆå¾ªç¯æ•°ç»„çš„å€¼
  - Generate Circular Array Values
  - è§£é¢˜æ€è·¯
---

# 2757. ç”Ÿæˆå¾ªç¯æ•°ç»„çš„å€¼ ğŸ”’

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/generate-circular-array-values) [`LeetCode`](https://leetcode.com/problems/generate-circular-array-values)

## é¢˜ç›®

Given a **circular** array `arr` and an integer `startIndex`, return a
generator object `gen` that yields values from `arr`.

The first time `gen.next()` is called on the generator, it should should yield
`arr[startIndex]`.

Each subsequent time `gen.next()` is called, an integer `jump` will be passed
into the function (Ex: `gen.next(-3)`).

- If `jump` is positive, the index should increase by that value, however if the current index is the last index, it should instead jump to the first index.
- If `jump` is negative, the index should decrease by the magnitude of that value, however if the current index is the first index, it should instead jump to the last index.

**Example 1:**

> Input: arr = [1,2,3,4,5], steps = [1,2,6], startIndex = 0
>
> Output: [1,2,4,5]
>
> Explanation:
>
> ```js
> const gen = cycleGenerator(arr, startIndex);
> gen.next().value; // 1, index = startIndex = 0
> gen.next(1).value; // 2, index = 1, 0 -> 1
> gen.next(2).value; // 4, index = 3, 1 -> 2 -> 3
> gen.next(6).value; // 5, index = 4, 3 -> 4 -> 0 -> 1 -> 2 -> 3 -> 4
> ```

**Example 2:**

> Input: arr = [10,11,12,13,14,15], steps = [1,4,0,-1,-3], startIndex = 1
>
> Output: [11,12,10,10,15,12]
>
> Explanation:
>
> ```js
> const gen = cycleGenerator(arr, startIndex);
> gen.next().value; // 11, index = 1
> gen.next(1).value; // 12, index = 2
> gen.next(4).value; // 10, index = 0
> gen.next(0).value; // 10, index = 0
> gen.next(-1).value; // 15, index = 5
> gen.next(-3).value; // 12, index = 2
> ```

**Example 3:**

> Input: arr = [2,4,6,7,8,10], steps = [-4,5,-3,10], startIndex = 3
>
> Output: [7,10,8,4,10]
>
> Explanation:
>
> ```js
> const gen = cycleGenerator(arr, startIndex);
> gen.next().value; // 7, index = 3
> gen.next(-4).value; // 10, index = 5
> gen.next(5).value; // 8, index = 4
> gen.next(-3).value; // 4, index = 1
> gen.next(10).value; // 10, index = 5
> ```

**Constraints:**

- `1 <= arr.length <= 10^4`
- `1 <= steps.length <= 100`
- `-10^4 <= steps[i], arr[i] <= 10^4`
- `0 <= startIndex < arr.length`

## é¢˜ç›®å¤§æ„

ç»™å®šä½ ä¸€ä¸ª **å¾ªç¯** æ•°ç»„ `arr` å’Œä¸€ä¸ªæ•´æ•° `startIndex` ï¼Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ `gen` ï¼Œå®ƒä» `arr` ä¸­ç”Ÿæˆå€¼ã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨
`gen.next()` æ—¶ï¼Œå®ƒåº”è¯¥ç”Ÿæˆ `arr[startIndex]` ã€‚æ¯æ¬¡è°ƒç”¨ `gen.next()` æ—¶ï¼Œéƒ½ä¼šä¼ å…¥ä¸€ä¸ªæ•´æ•°å‚æ•°
`jump`ï¼ˆä¾‹å¦‚ï¼š`gen.next(-3)` ï¼‰ã€‚

- å¦‚æœ `jump` æ˜¯æ­£æ•°ï¼Œåˆ™ç´¢å¼•åº”è¯¥å¢åŠ è¯¥å€¼ï¼Œä½†å¦‚æœå½“å‰ç´¢å¼•æ˜¯æœ€åä¸€ä¸ªç´¢å¼•ï¼Œåˆ™åº”è·³è½¬åˆ°ç¬¬ä¸€ä¸ªç´¢å¼•ã€‚
- å¦‚æœ `jump` æ˜¯è´Ÿæ•°ï¼Œåˆ™ç´¢å¼•åº”å‡å»è¯¥å€¼çš„ç»å¯¹å€¼ï¼Œä½†å¦‚æœå½“å‰ç´¢å¼•æ˜¯ç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œåˆ™åº”è·³è½¬åˆ°æœ€åä¸€ä¸ªç´¢å¼•ã€‚

**æç¤ºï¼š**

- `1 <= arr.length <= 10^4`
- `1 <= steps.length <= 100`
- `-10^4 <= steps[i], arr[i] <= 10^4`
- `0 <= startIndex < arr.length`

## è§£é¢˜æ€è·¯

éœ€è¦ç¼–å†™ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•° `cycleGenerator`ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ•°ç»„ `arr` å’Œä¸€ä¸ªåˆå§‹ç´¢å¼• `startIndex`ï¼Œå¹¶è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œè¿™ä¸ªç”Ÿæˆå™¨ä¼šæ ¹æ®ä¼ å…¥çš„ `jump` å‚æ•°ï¼ˆæ¯æ¬¡é€šè¿‡ `next(jump)` è°ƒç”¨ï¼‰æ¥è¿”å›æ–°çš„æ•°ç»„å€¼ã€‚

- é€šè¿‡ `while (true)` ä½¿å¾—ç”Ÿæˆå™¨æ— é™å¾ªç¯ï¼Œå› ä¸ºæ•°ç»„æ˜¯å¾ªç¯çš„ï¼Œä¸”æ²¡æœ‰æ˜ç¡®çš„ç»ˆæ­¢æ¡ä»¶ã€‚
- ç”Ÿæˆå™¨é€šè¿‡ `yield` æ¥è¿”å›å½“å‰ç´¢å¼•çš„å…ƒç´  `arr[startIndex]`ã€‚
- æ¯æ¬¡è°ƒç”¨ `next(jump)` æ—¶ï¼Œç”Ÿæˆå™¨ä¼šæ ¹æ® `jump` å€¼æ¥ä¿®æ”¹å½“å‰ç´¢å¼•ï¼Œå¹¶è¿”å›æ•°ç»„ä¸­å¯¹åº”çš„æ–°å€¼ã€‚
- å½“ `startIndex` è¶…å‡ºæ•°ç»„èŒƒå›´æ—¶ï¼Œå¯ä»¥åˆ©ç”¨æ¨¡è¿ç®—æ¥ç¡®ä¿ç´¢å¼•å§‹ç»ˆåœ¨æœ‰æ•ˆèŒƒå›´å†…ï¼š
  - `startIndex + jump`ï¼šè®¡ç®—æ–°çš„ç´¢å¼•ã€‚
  - `(startIndex + jump) % n`ï¼šæ¨¡è¿ç®—ç¡®ä¿ç´¢å¼•ä¸ä¼šè¶…å‡ºæ•°ç»„è¾¹ç•Œã€‚
  - `((startIndex + jump) % n + n) % n`ï¼šå¦‚æœæ¨¡è¿ç®—ç»“æœä¸ºè´Ÿæ•°ï¼ˆä¾‹å¦‚ `-1`ï¼‰ï¼Œåˆ™åŠ ä¸Š `n` åå†å–æ¨¡ï¼Œç¡®ä¿ç´¢å¼•éè´Ÿã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦ï¼š** æ¯æ¬¡è°ƒç”¨ `next(jump)` çš„æ“ä½œæ˜¯ `O(1)`ï¼Œå› ä¸ºåªæ˜¯åšäº†ç®€å•çš„ç´¢å¼•è®¡ç®—å’Œæ¨¡è¿ç®—ã€‚
- **ç©ºé—´å¤æ‚åº¦ï¼š** `O(1)`ï¼Œç”Ÿæˆå™¨åªç»´æŠ¤ä¸€ä¸ªç´¢å¼•ï¼Œæ²¡æœ‰é¢å¤–çš„ç©ºé—´å¼€é”€ã€‚

## ä»£ç 

```javascript
/**
 * @param {Array} arr
 * @param {number} startIndex
 * @return {Generator<number>}
 */
var cycleGenerator = function* (arr, startIndex) {
	const n = arr.length;
	while (true) {
		// è¿”å›å½“å‰ç´¢å¼•çš„å…ƒç´ 
		const jump = yield arr[startIndex];
		// æ ¹æ® jump æ›´æ–°ç´¢å¼•ï¼Œå¹¶ä½¿ç”¨æ¨¡è¿ç®—ç¡®ä¿å…¶åœ¨åˆæ³•èŒƒå›´å†…
		startIndex = (((startIndex + jump) % n) + n) % n;
	}
};
```
