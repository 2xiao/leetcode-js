# [93. å¤åŸ IP åœ°å€](https://leetcode.com/problems/restore-ip-addresses)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/restore-ip-addresses)

## é¢˜ç›®

A **valid IP address** consists of exactly four integers separated by single
dots. Each integer is between `0` and `255` ( **inclusive** ) and cannot have
leading zeros.

- For example, `"0.1.2.201"` and `"192.168.1.1"` are **valid** IP addresses, but `"0.011.255.245"`, `"192.168.1.312"` and `"192.168@1.1"` are **invalid** IP addresses.

Given a string `s` containing only digits, return _all possible valid IP
addresses that can be formed by inserting dots into_`s`. You are **not**
allowed to reorder or remove any digits in `s`. You may return the valid IP
addresses in **any** order.

**Example 1:**

> Input: s = "25525511135"
>
> Output: ["255.255.11.135","255.255.111.35"]

**Example 2:**

> Input: s = "0000"
>
> Output: ["0.0.0.0"]

**Example 3:**

> Input: s = "101023"
>
> Output: ["1.0.10.23","1.0.102.3","10.1.0.23","10.10.2.3","101.0.2.3"]

**Constraints:**

- `1 <= s.length <= 20`
- `s` consists of digits only.

## é¢˜ç›®å¤§æ„

**æœ‰æ•ˆ IP åœ°å€** æ­£å¥½ç”±å››ä¸ªæ•´æ•°ï¼ˆæ¯ä¸ªæ•´æ•°ä½äº `0` åˆ° `255` ä¹‹é—´ç»„æˆï¼Œä¸”ä¸èƒ½å«æœ‰å‰å¯¼ `0`ï¼‰ï¼Œæ•´æ•°ä¹‹é—´ç”¨ `'.'` åˆ†éš”ã€‚

- ä¾‹å¦‚ï¼š`"0.1.2.201"` å’Œ `"192.168.1.1"` æ˜¯ **æœ‰æ•ˆ** IP åœ°å€ï¼Œä½†æ˜¯ `"0.011.255.245"`ã€`"192.168.1.312"` å’Œ `"192.168@1.1"` æ˜¯ **æ— æ•ˆ** IP åœ°å€ã€‚

ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸² `s` ï¼Œç”¨ä»¥è¡¨ç¤ºä¸€ä¸ª IP åœ°å€ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„ **æœ‰æ•ˆ IP åœ°å€**ï¼Œè¿™äº›åœ°å€å¯ä»¥é€šè¿‡åœ¨ `s` ä¸­æ’å…¥ `'.'` æ¥å½¢æˆã€‚ä½  **ä¸èƒ½** é‡æ–°æ’åºæˆ–åˆ é™¤ `s` ä¸­çš„ä»»ä½•æ•°å­—ã€‚ä½ å¯ä»¥æŒ‰ **ä»»ä½•** é¡ºåºè¿”å›ç­”æ¡ˆã€‚

## è§£é¢˜æ€è·¯

è¿™é“é¢˜å¯ä»¥ä½¿ç”¨å›æº¯æ³•æ¥è§£å†³ã€‚IP åœ°å€ç”± 4 ä¸ªæ•°å­—ç»„æˆï¼Œæ¯ä¸ªæ•°å­—çš„èŒƒå›´æ˜¯ 0 åˆ° 255ã€‚å›æº¯æ³•çš„åŸºæœ¬æ€è·¯æ˜¯å°è¯•æ¯ä¸€ç§å¯èƒ½æ€§ï¼Œå½“å¾—åˆ°ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„ç»„åˆæ—¶ï¼Œç»§ç»­æœç´¢ä¸‹ä¸€ä¸ªå¯èƒ½çš„æ•°å­—ã€‚

1. ä½¿ç”¨ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œæ¯æ¬¡ä»å­—ç¬¦ä¸²ä¸­æˆªå–ä¸€ä¸ªæ•°å­—ï¼ˆå¯ä»¥æ˜¯ 1ã€2ã€3 ä½æ•°å­—ï¼‰ï¼Œå°†è¯¥æ•°å­—åŠ å…¥å½“å‰çš„ IP åœ°å€ç»„åˆä¸­ï¼Œç„¶åé€’å½’å¤„ç†å‰©ä½™çš„éƒ¨åˆ†ã€‚

2. åœ¨é€’å½’å‡½æ•°ä¸­ï¼Œéœ€è¦æ³¨æ„ä¸€äº›å‰ªæçš„æ¡ä»¶ï¼Œæ¯”å¦‚ï¼š

   - å¦‚æœå½“å‰æˆªå–çš„æ•°å­—è¶…è¿‡äº†å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç»“æŸé€’å½’ã€‚
   - å¦‚æœå½“å‰æˆªå–çš„æ•°å­—æ˜¯ä»¥ 0 å¼€å¤´çš„å¤šä½æ•°ï¼Œåº”è¯¥è·³è¿‡ï¼Œå› ä¸º IP åœ°å€ä¸­ä¸å…è®¸æœ‰å‰å¯¼é›¶ã€‚
   - å¦‚æœå½“å‰æˆªå–çš„æ•°å­—å¤§äº 255ï¼Œä¹Ÿåº”è¯¥è·³è¿‡ã€‚

3. å¦‚æœå¾—åˆ°çš„ IP åœ°å€ç»„åˆæ­£å¥½æœ‰ 4 ä¸ªæ•°å­—ï¼Œå¹¶ä¸”å­—ç¬¦ä¸²è¢«å®Œå…¨æˆªå–å®Œæ¯•ï¼Œå°±å°†å½“å‰çš„ç»„åˆåŠ å…¥ç»“æœé›†ã€‚

**å…·ä½“æ­¥éª¤ï¼š**

1. åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„ `res` ç”¨äºå­˜æ”¾ç»“æœã€‚
2. å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•° `backtrack`ï¼Œæ¥å—å‚æ•° `start` è¡¨ç¤ºå½“å‰æˆªå–çš„ä½ç½®ï¼Œ`track` è¡¨ç¤ºå½“å‰å·²ç»å¾—åˆ°çš„ IP åœ°å€ç»„åˆã€‚
3. åœ¨ `backtrack` å‡½æ•°ä¸­ï¼Œåˆ¤æ–­ç»ˆæ­¢æ¡ä»¶ï¼š
   - å¦‚æœ `track` ä¸­è¶…è¿‡äº† 4 ä¸ªæ•°å­—ï¼Œç›´æ¥è¿”å›ã€‚
   - å¦‚æœ `track` ä¸­å·²ç»æœ‰ 4 ä¸ªæ•°å­—ï¼Œä¸” `start` åˆšå¥½ç­‰äºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå°†å½“å‰ `track` åŠ å…¥ `res`ã€‚
4. åœ¨å¾ªç¯ä¸­ï¼Œæ¯æ¬¡æˆªå– 1ã€2ã€3 ä½æ•°å­—ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼ˆä¸è¶…è¿‡å­—ç¬¦ä¸²é•¿åº¦ï¼Œä¸ä»¥ 0 å¼€å¤´çš„å¤šä½æ•°ï¼Œå°äºç­‰äº 255ï¼‰ï¼Œæ»¡è¶³æ¡ä»¶åˆ™é€’å½’è°ƒç”¨ `backtrack`ã€‚
5. æœ€åï¼Œåœ¨ä¸»å‡½æ•°ä¸­è¿”å›ç»“æœæ•°ç»„ `res`ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {string[]}
 */
var restoreIpAddresses = function (s) {
	let res = [];
	let track = [];

	const isValid = (str) => {
		if ((str.length > 1 && str[0] == '0') || Number(str) > 255) {
			return false;
		}
		return true;
	};

	const backtrack = (start) => {
		if (track.length > 4) return;
		if (start == s.length && track.length == 4) {
			res.push(track.join('.'));
			return;
		}
		for (let i = start; i < s.length; i++) {
			const str = s.substring(start, i + 1);
			if (isValid(str)) {
				track.push(str);
				backtrack(i + 1);
				track.pop();
			}
		}
	};

	backtrack(0);
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 751 | [IP åˆ° CIDR](https://leetcode.com/problems/ip-to-cidr) |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | <font color=#ffb800>Medium</font> |