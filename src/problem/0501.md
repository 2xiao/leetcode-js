---
title: 501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°
description: LeetCode 501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°é¢˜è§£ï¼ŒFind Mode in Binary Search Treeï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°
  - äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°
  - Find Mode in Binary Search Tree
  - è§£é¢˜æ€è·¯
  - æ ‘
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - äºŒå‰æœç´¢æ ‘
  - äºŒå‰æ ‘
---

# 501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æœç´¢æ ‘`](/tag/binary-search-tree.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/find-mode-in-binary-search-tree) [`LeetCode`](https://leetcode.com/problems/find-mode-in-binary-search-tree)

## é¢˜ç›®

Given the `root` of a binary search tree (BST) with duplicates, return _all
the[mode(s)](https://en.wikipedia.org/wiki/Mode_\(statistics\)) (i.e., the
most frequently occurred element) in it\_.

If the tree has more than one mode, return them in **any order**.

Assume a BST is defined as follows:

- The left subtree of a node contains only nodes with keys **less than or equal to** the node's key.
- The right subtree of a node contains only nodes with keys **greater than or equal to** the node's key.
- Both the left and right subtrees must also be binary search trees.

**Example 1:**

![](https://assets.leetcode.com/uploads/2021/03/11/mode-tree.jpg)

> Input: root = [1,null,2,2]
>
> Output: [2]

**Example 2:**

> Input: root = [0]
>
> Output: [0]

**Constraints:**

- The number of nodes in the tree is in the range `[1, 104]`.
- `-10^5 <= Node.val <= 10^5`

**Follow up:** Could you do that without using any extra space? (Assume that
the implicit stack space incurred due to recursion does not count).

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå«é‡å¤å€¼çš„äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œæ‰¾å‡ºå¹¶è¿”å› BST ä¸­çš„æ‰€æœ‰
[ä¼—æ•°](https://baike.baidu.com/item/%E4%BC%97%E6%95%B0/44796)ï¼ˆå³ï¼Œå‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ï¼‰ã€‚

å¦‚æœæ ‘ä¸­æœ‰ä¸æ­¢ä¸€ä¸ªä¼—æ•°ï¼Œå¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ã€‚

å‡å®š BST æ»¡è¶³å¦‚ä¸‹å®šä¹‰ï¼š

- ç»“ç‚¹å·¦å­æ ‘ä¸­æ‰€å«èŠ‚ç‚¹çš„å€¼ **å°äºç­‰äº** å½“å‰èŠ‚ç‚¹çš„å€¼
- ç»“ç‚¹å³å­æ ‘ä¸­æ‰€å«èŠ‚ç‚¹çš„å€¼ **å¤§äºç­‰äº** å½“å‰èŠ‚ç‚¹çš„å€¼
- å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/03/11/mode-tree.jpg)

> **è¾“å…¥ï¼š** root = [1,null,2,2]
>
> **è¾“å‡ºï¼š**[2]

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** root = [0]
>
> **è¾“å‡ºï¼š**[0]

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´ `[1, 104]` å†…
- `-10^5 <= Node.val <= 10^5`

**è¿›é˜¶ï¼š** ä½ å¯ä»¥ä¸ä½¿ç”¨é¢å¤–çš„ç©ºé—´å—ï¼Ÿï¼ˆå‡è®¾ç”±é€’å½’äº§ç”Ÿçš„éšå¼è°ƒç”¨æ ˆçš„å¼€é”€ä¸è¢«è®¡ç®—åœ¨å†…ï¼‰

## è§£é¢˜æ€è·¯

é¢˜ç›®è¦æ±‚æ‰¾åˆ°äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„ä¼—æ•°ï¼ˆå³å‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ï¼‰ï¼Œç”±äº BST çš„ä¸­åºéå†ç»“æœæ˜¯ä¸€ä¸ªå‡åºæ’åˆ—çš„æ•°ç»„ï¼Œå› æ­¤ç›¸åŒå€¼çš„èŠ‚ç‚¹ä¼šè¿ç»­å‡ºç°åœ¨éå†ç»“æœä¸­ï¼Œå¯ä»¥é€šè¿‡ä¸­åºéå†é€ä¸€è®¿é—®èŠ‚ç‚¹ï¼ŒåŒæ—¶è®°å½•å‡ºç°é¢‘ç‡æ¥è§£å†³é—®é¢˜ã€‚

1. **åˆå§‹åŒ–å˜é‡**ï¼š

   - `maxFreq = 0`ï¼šè®°å½•æ‰€æœ‰å€¼ä¸­æœ€é«˜çš„å‡ºç°é¢‘ç‡ã€‚
   - `curVal = 0`ï¼šè®°å½•å½“å‰æ­£åœ¨å¤„ç†çš„å€¼ã€‚
   - `curFreq = 0`ï¼šè®°å½•å½“å‰å€¼çš„å‡ºç°é¢‘ç‡ã€‚
   - `res = []`ï¼šå­˜å‚¨æ‰€æœ‰é¢‘ç‡ç­‰äº `maxFreq` çš„å€¼ã€‚

2. **ä¸­åºéå†**ï¼š

   - æ ‘ä¸ºç©ºæ—¶ï¼Œç›´æ¥è¿”å›ç©ºæ•°ç»„ã€‚
   - é€’å½’éå†å·¦å­æ ‘ã€‚
   - å¤„ç†å½“å‰èŠ‚ç‚¹ï¼š
     - å¦‚æœå½“å‰å€¼ä¸ `curVal` ç›¸åŒï¼Œå¢åŠ  `curFreq`ã€‚
     - å¦‚æœä¸åŒï¼Œæ›´æ–° `curVal` å¹¶é‡ç½® `curFreq` ä¸º 1ã€‚
     - æ›´æ–° `maxFreq`ï¼Œæ ¹æ®é¢‘ç‡å†³å®šæ˜¯å¦æ›´æ–° `res`ã€‚
   - é€’å½’éå†å³å­æ ‘ã€‚

3. **è¿”å›ç»“æœ**ï¼š

   - è¿”å›å­˜å‚¨ä¼—æ•°çš„æ•°ç»„ `res`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯èŠ‚ç‚¹æ•°ï¼Œä¸­åºéå†æ•´æ£µæ ‘ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(h + m)`
  - é€’å½’è°ƒç”¨æ ˆçš„ç©ºé—´å¤æ‚åº¦ä¸º **O(h)**ï¼Œå…¶ä¸­ `h` æ˜¯æ ‘çš„é«˜åº¦ã€‚
  - ç»“æœæ•°ç»„ `res` çš„ç©ºé—´å¤æ‚åº¦ä¸º **O(m)**ï¼Œå…¶ä¸­ `m` æ˜¯ä¼—æ•°çš„æ•°é‡ã€‚
  - è¯·æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬ä¸è®¡ç®—é€’å½’è°ƒç”¨å †æ ˆç©ºé—´å’Œç»“æœæ•°ç»„ä½¿ç”¨çš„ç©ºé—´ï¼ˆå¦‚é—®é¢˜æè¿°çš„åç»­å†…å®¹ä¸­æ‰€è¿°ï¼‰ï¼Œåˆ™æ­¤æ–¹æ³•ä½¿ç”¨ `O(1)` ç©ºé—´ï¼Œå› ä¸ºæˆ‘ä»¬ä»…ä½¿ç”¨å‡ ä¸ªé¢å¤–çš„å˜é‡ï¼Œå¦‚ `maxFreq, curFreq, curVal`ã€‚

## ä»£ç 

```javascript
/**
 * @param {TreeNode} root
 * @return {number[]}
 */
var findMode = function (root) {
	let maxFreq = 0; // å½“å‰æœ€å¤§é¢‘ç‡
	let curFreq = 0; // å½“å‰å€¼çš„é¢‘ç‡
	let curVal = 0; // å½“å‰å¤„ç†çš„å€¼
	let res = []; // å­˜å‚¨ä¼—æ•°çš„ç»“æœæ•°ç»„

	// ä¸­åºéå†å‡½æ•°
	const dfs = (node) => {
		if (!node) return; // å¦‚æœèŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›

		dfs(node.left); // éå†å·¦å­æ ‘

		// å¤„ç†å½“å‰èŠ‚ç‚¹
		if (node.val === curVal) {
			curFreq += 1; // å½“å‰å€¼ä¸ä¹‹å‰ç›¸åŒï¼Œé¢‘ç‡å¢åŠ 
		} else {
			curFreq = 1; // å½“å‰å€¼ä¸åŒï¼Œé‡ç½®é¢‘ç‡ä¸º 1
			curVal = node.val; // æ›´æ–°å½“å‰å€¼
		}

		// æ›´æ–°æœ€å¤§é¢‘ç‡å’Œç»“æœæ•°ç»„
		if (curFreq > maxFreq) {
			maxFreq = curFreq; // æ›´æ–°æœ€å¤§é¢‘ç‡
			res = [node.val]; // é‡æ–°è®°å½•ç»“æœ
		} else if (curFreq === maxFreq) {
			res.push(node.val); // å¦‚æœé¢‘ç‡ç›¸ç­‰ï¼ŒåŠ å…¥ç»“æœ
		}

		dfs(node.right); // éå†å³å­æ ‘
	};

	dfs(root); // å¼€å§‹ä¸­åºéå†
	return res; // è¿”å›ç»“æœ
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 98 | éªŒè¯äºŒå‰æœç´¢æ ‘ | [[âœ“]](/problem/0098.md) |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æœç´¢æ ‘`](/tag/binary-search-tree.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/validate-binary-search-tree) [ğŸ”—](https://leetcode.com/problems/validate-binary-search-tree) |