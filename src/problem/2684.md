---
title: 2684. çŸ©é˜µä¸­ç§»åŠ¨çš„æœ€å¤§æ¬¡æ•°
description: LeetCode 2684. çŸ©é˜µä¸­ç§»åŠ¨çš„æœ€å¤§æ¬¡æ•°é¢˜è§£ï¼ŒMaximum Number of Moves in a Gridï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2684. çŸ©é˜µä¸­ç§»åŠ¨çš„æœ€å¤§æ¬¡æ•°
  - çŸ©é˜µä¸­ç§»åŠ¨çš„æœ€å¤§æ¬¡æ•°
  - Maximum Number of Moves in a Grid
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - åŠ¨æ€è§„åˆ’
  - çŸ©é˜µ
---

# 2684. çŸ©é˜µä¸­ç§»åŠ¨çš„æœ€å¤§æ¬¡æ•°

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`çŸ©é˜µ`](/tag/matrix.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/maximum-number-of-moves-in-a-grid) [`LeetCode`](https://leetcode.com/problems/maximum-number-of-moves-in-a-grid)

## é¢˜ç›®

You are given a **0-indexed** `m x n` matrix `grid` consisting of **positive**
integers.

You can start at **any** cell in the first column of the matrix, and traverse
the grid in the following way:

- From a cell `(row, col)`, you can move to any of the cells: `(row - 1, col + 1)`, `(row, col + 1)` and `(row + 1, col + 1)` such that the value of the cell you move to, should be **strictly** bigger than the value of the current cell.

Return _the **maximum** number of **moves** that you can perform._

**Example 1:**

![](https://assets.leetcode.com/uploads/2023/04/11/yetgriddrawio-10.png)

> Input: grid = [[2,4,3,5],[5,4,9,3],[3,4,2,11],[10,9,13,15]]
>
> Output: 3
>
> Explanation: We can start at the cell (0, 0) and make the following moves:
>
> - (0, 0) -> (0, 1).
> - (0, 1) -> (1, 2).
> - (1, 2) -> (2, 3).
>
> It can be shown that it is the maximum number of moves that can be made.

**Example 2:**

> ![](https://assets.leetcode.com/uploads/2023/04/12/yetgrid4drawio.png)
>
> **Input:** grid = [[3,2,4],[2,1,9],[1,1,7]]
>
> Output: 0
>
> Explanation: Starting from any cell in the first column we cannot perform any moves.

**Constraints:**

- `m == grid.length`
- `n == grid[i].length`
- `2 <= m, n <= 1000`
- `4 <= m * n <= 10^5`
- `1 <= grid[i][j] <= 10^6`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹ã€å¤§å°ä¸º `m x n` çš„çŸ©é˜µ `grid` ï¼ŒçŸ©é˜µç”±è‹¥å¹² **æ­£** æ•´æ•°ç»„æˆã€‚

ä½ å¯ä»¥ä»çŸ©é˜µç¬¬ä¸€åˆ—ä¸­çš„ **ä»»ä¸€** å•å…ƒæ ¼å‡ºå‘ï¼ŒæŒ‰ä»¥ä¸‹æ–¹å¼éå† `grid` ï¼š

- ä»å•å…ƒæ ¼ `(row, col)` å¯ä»¥ç§»åŠ¨åˆ° `(row - 1, col + 1)`ã€`(row, col + 1)` å’Œ `(row + 1, col + 1)` ä¸‰ä¸ªå•å…ƒæ ¼ä¸­ä»»ä¸€æ»¡è¶³å€¼ **ä¸¥æ ¼** å¤§äºå½“å‰å•å…ƒæ ¼çš„å•å…ƒæ ¼ã€‚

è¿”å›ä½ åœ¨çŸ©é˜µä¸­èƒ½å¤Ÿ **ç§»åŠ¨** çš„ **æœ€å¤§** æ¬¡æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2023/04/11/yetgriddrawio-10.png)

> **è¾“å…¥ï¼š** grid = [[2,4,3,5],[5,4,9,3],[3,4,2,11],[10,9,13,15]]
>
> **è¾“å‡ºï¼š** 3
>
> **è§£é‡Šï¼š** å¯ä»¥ä»å•å…ƒæ ¼ (0, 0) å¼€å§‹å¹¶ä¸”æŒ‰ä¸‹é¢çš„è·¯å¾„ç§»åŠ¨ï¼š
>
> - (0, 0) -> (0, 1).
> - (0, 1) -> (1, 2).
> - (1, 2) -> (2, 3).
>
> å¯ä»¥è¯æ˜è¿™æ˜¯èƒ½å¤Ÿç§»åŠ¨çš„æœ€å¤§æ¬¡æ•°ã€‚

**ç¤ºä¾‹ 2ï¼š**

> ![](https://assets.leetcode.com/uploads/2023/04/12/yetgrid4drawio.png)
>
> **è¾“å…¥ï¼š** grid = [[3,2,4],[2,1,9],[1,1,7]]
>
> **è¾“å‡ºï¼š** 0
>
> **è§£é‡Šï¼š** ä»ç¬¬ä¸€åˆ—çš„ä»»ä¸€å•å…ƒæ ¼å¼€å§‹éƒ½æ— æ³•ç§»åŠ¨ã€‚

**æç¤ºï¼š**

- `m == grid.length`
- `n == grid[i].length`
- `2 <= m, n <= 1000`
- `4 <= m * n <= 10^5`
- `1 <= grid[i][j] <= 10^6`

## è§£é¢˜æ€è·¯

å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¥è®¡ç®—ä»çŸ©é˜µç¬¬ä¸€åˆ—çš„ä»»ä¸€å•å…ƒæ ¼å‡ºå‘ï¼Œèƒ½å¤Ÿç§»åŠ¨çš„æœ€å¤§æ¬¡æ•°ã€‚

### æ€è·¯ä¸€ï¼šåŠ¨æ€è§„åˆ’

1. **åˆå§‹åŒ–çŠ¶æ€**ï¼š
   åˆ›å»ºä¸€ä¸ª `dp` æ•°ç»„ï¼Œå…¶ä¸­ `dp[i][j]` è¡¨ç¤ºä»å•å…ƒæ ¼ `(i, j)` å¼€å§‹èƒ½å¤Ÿç§»åŠ¨çš„æœ€å¤§æ¬¡æ•°ã€‚åˆå§‹æ—¶ï¼Œæ‰€æœ‰å•å…ƒæ ¼çš„æœ€å¤§ç§»åŠ¨æ¬¡æ•°éƒ½è®¾ä¸º `0`ï¼Œå› ä¸ºçŸ©é˜µçš„æœ€åä¸€åˆ—æ²¡æœ‰åç»­çš„å•å…ƒæ ¼å¯ç§»åŠ¨ï¼Œç§»åŠ¨æ¬¡æ•°å°±æ˜¯ `0`ã€‚

2. **å€’åºéå†åˆ—**ï¼š

   ä»çŸ©é˜µçš„å€’æ•°ç¬¬äºŒåˆ—å¼€å§‹éå†ï¼Œç›´åˆ°ç¬¬ä¸€åˆ—ã€‚åœ¨æ¯ä¸€åˆ—ä¸­ï¼Œæˆ‘ä»¬éƒ½è¦è®¡ç®—ä»è¿™ä¸€åˆ—æ¯ä¸ªå•å…ƒæ ¼å¯ä»¥å‘å³ç§»åŠ¨åˆ°ä¸‹ä¸€åˆ—çš„æ¬¡æ•°ã€‚

3. **æ£€æŸ¥å¯ç§»åŠ¨æ¡ä»¶**ï¼š

   - å¯¹äºæ¯ä¸ªå•å…ƒæ ¼ `(i, j)`ï¼Œæ£€æŸ¥ä»¥ä¸‹ä¸‰ä¸ªæ–¹å‘æ˜¯å¦æ»¡è¶³ç§»åŠ¨æ¡ä»¶ï¼š
     - ç§»åŠ¨åˆ°ä¸Šå³ `(i - 1, j + 1)`ï¼Œå¦‚æœ `i > 0` å¹¶ä¸” `grid[i][j] < grid[i - 1][j + 1]`ï¼Œåˆ™å¯ä»¥ç§»åŠ¨ï¼Œæ›´æ–°ç§»åŠ¨æ¬¡æ•°ã€‚
     - ç§»åŠ¨åˆ°å³ `(i, j + 1)`ï¼Œå¦‚æœ `grid[i][j] < grid[i][j + 1]`ï¼Œåˆ™å¯ä»¥ç§»åŠ¨ï¼Œæ›´æ–°ç§»åŠ¨æ¬¡æ•°ã€‚
     - ç§»åŠ¨åˆ°ä¸‹å³ `(i + 1, j + 1)`ï¼Œå¦‚æœ `i < m - 1` å¹¶ä¸” `grid[i][j] < grid[i + 1][j + 1]`ï¼Œåˆ™å¯ä»¥ç§»åŠ¨ï¼Œæ›´æ–°ç§»åŠ¨æ¬¡æ•°ã€‚

4. **è·å–ç»“æœ**ï¼š
   - æœ€åï¼Œ `dp[i][0]` ä¸­å­˜å‚¨çš„å°±æ˜¯ä»ç¬¬ä¸€åˆ—ä»»ä¸€å•å…ƒæ ¼å‡ºå‘ï¼Œèƒ½å¤Ÿç§»åŠ¨çš„æœ€å¤§æ¬¡æ•°ï¼Œä»ä¸­è·å–æœ€å¤§çš„ç§»åŠ¨æ¬¡æ•°ï¼Œä½œä¸ºç»“æœè¿”å›ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œå…¶ä¸­ `m`ã€`n` åˆ†åˆ«æ˜¯çŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°ï¼Œéœ€è¦éå†æ•´ä¸ªçŸ©é˜µã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œç”¨äºå­˜å‚¨ `dp` æ•°ç»„ã€‚

### æ€è·¯äºŒï¼šå‹ç¼©çŠ¶æ€çš„åŠ¨æ€è§„åˆ’

1. **åˆå§‹åŒ–çŠ¶æ€**ï¼š
   ä½¿ç”¨ä¸€ä¸ªä¸€ç»´æ•°ç»„ `dp`ï¼Œé•¿åº¦ä¸º `m`ï¼Œè¡¨ç¤ºä»æ¯ä¸€è¡Œçš„æŸä¸€åˆ—å‡ºå‘ï¼Œèƒ½å¤Ÿåˆ°è¾¾çš„æœ€å¤§ç§»åŠ¨æ¬¡æ•°ã€‚æœ€å¼€å§‹ï¼Œ`dp[i]` è¡¨ç¤ºä»æœ€åä¸€åˆ—çš„ç¬¬ `i` è¡Œå‡ºå‘æ—¶çš„ç§»åŠ¨æ¬¡æ•°ï¼Œå› ä¸ºæ²¡æœ‰åç»­çš„å•å…ƒæ ¼å¯ç§»åŠ¨ï¼Œåˆå§‹å€¼ä¸º `0`ã€‚

2. **å€’åºéå†åˆ—**ï¼š

   ä»çŸ©é˜µçš„å€’æ•°ç¬¬äºŒåˆ—å¼€å§‹éå†ï¼Œç›´åˆ°ç¬¬ä¸€åˆ—ã€‚åœ¨æ¯ä¸€åˆ—ä¸­ï¼Œæˆ‘ä»¬éƒ½è¦è®¡ç®—ä»è¿™ä¸€åˆ—æ¯ä¸ªå•å…ƒæ ¼å¯ä»¥å‘å³ç§»åŠ¨åˆ°ä¸‹ä¸€åˆ—çš„æ¬¡æ•°ã€‚

3. **æ£€æŸ¥å¯ç§»åŠ¨æ¡ä»¶**ï¼š

   - å¯¹äºæ¯ä¸ªå•å…ƒæ ¼ `(i, j)`ï¼Œæ£€æŸ¥ä»¥ä¸‹ä¸‰ä¸ªæ–¹å‘æ˜¯å¦æ»¡è¶³ç§»åŠ¨æ¡ä»¶ï¼š
     - ç§»åŠ¨åˆ°ä¸Šå³ `(i - 1, j + 1)`ï¼Œå¦‚æœ `i > 0` å¹¶ä¸” `grid[i][j] < grid[i - 1][j + 1]`ï¼Œåˆ™å¯ä»¥ç§»åŠ¨ï¼Œæ›´æ–°ç§»åŠ¨æ¬¡æ•°ã€‚
     - ç§»åŠ¨åˆ°å³ `(i, j + 1)`ï¼Œå¦‚æœ `grid[i][j] < grid[i][j + 1]`ï¼Œåˆ™å¯ä»¥ç§»åŠ¨ï¼Œæ›´æ–°ç§»åŠ¨æ¬¡æ•°ã€‚
     - ç§»åŠ¨åˆ°ä¸‹å³ `(i + 1, j + 1)`ï¼Œå¦‚æœ `i < m - 1` å¹¶ä¸” `grid[i][j] < grid[i + 1][j + 1]`ï¼Œåˆ™å¯ä»¥ç§»åŠ¨ï¼Œæ›´æ–°ç§»åŠ¨æ¬¡æ•°ã€‚

4. **æ›´æ–°çŠ¶æ€æ•°ç»„**ï¼š

   - å› ä¸ºåç»­è®¡ç®—è¿˜ä¾èµ–ä¸‹ä¸€åˆ—çš„ç§»åŠ¨æ¬¡æ•°ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ä¸´æ—¶æ•°ç»„ `newDp` å­˜å‚¨å½“å‰åˆ—çš„ç§»åŠ¨æ¬¡æ•°ï¼Œåœ¨éå†å®Œå½“å‰åˆ—åï¼Œæ›´æ–° `dp` ä¸º `newDp`ã€‚

5. **è·å–ç»“æœ**ï¼š
   - æœ€åï¼Œ `dp` æ•°ç»„ä¸­å­˜å‚¨çš„å°±æ˜¯ä»ç¬¬ä¸€åˆ—ä»»ä¸€å•å…ƒæ ¼å‡ºå‘ï¼Œèƒ½å¤Ÿç§»åŠ¨çš„æœ€å¤§æ¬¡æ•°ï¼Œä» `dp` æ•°ç»„ä¸­è·å–æœ€å¤§çš„ç§»åŠ¨æ¬¡æ•°ï¼Œä½œä¸ºç»“æœè¿”å›ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œå…¶ä¸­ `m`ã€`n` åˆ†åˆ«æ˜¯çŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°ï¼Œéœ€è¦éå†æ•´ä¸ªçŸ©é˜µã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m)`ï¼Œåªéœ€è¦ä¸€ä¸ªä¸€ç»´æ•°ç»„ `dp` å­˜å‚¨çŠ¶æ€ã€‚

## ä»£ç 

::: code-tabs
@tab åŠ¨æ€è§„åˆ’

```javascript
/**
 * @param {number[][]} grid
 * @return {number}
 */
var maxMoves = function (grid) {
	const m = grid.length,
		n = grid[0].length;
	// åˆ›å»º dp æ•°ç»„
	const dp = new Array(m).fill(0).map((i) => new Array(n).fill(0));

	// å€’åºéå†åˆ—
	for (let j = n - 2; j >= 0; j--) {
		for (let i = 0; i < m; i++) {
			// æ£€æŸ¥ä¸Šå³ã€å³ã€ä¸‹å³ä¸‰ä¸ªæ–¹å‘
			if (i > 0 && grid[i][j] < grid[i - 1][j + 1]) {
				dp[i][j] = Math.max(dp[i][j], dp[i - 1][j + 1] + 1);
			}
			if (grid[i][j] < grid[i][j + 1]) {
				dp[i][j] = Math.max(dp[i][j], dp[i][j + 1] + 1);
			}
			if (i < m - 1 && grid[i][j] < grid[i + 1][j + 1]) {
				dp[i][j] = Math.max(dp[i][j], dp[i + 1][j + 1] + 1);
			}
		}
	}
	// è·å–ç»“æœ
	let maxMoves = 0;
	for (let i = 0; i < m; i++) {
		maxMoves = Math.max(maxMoves, dp[i][0]);
	}
	return maxMoves;
};
```

@tab å‹ç¼©çŠ¶æ€çš„åŠ¨æ€è§„åˆ’

```javascript
/**
 * @param {number[][]} grid
 * @return {number}
 */
var maxMoves = function (grid) {
	const m = grid.length,
		n = grid[0].length;
	// åˆå§‹åŒ– dp æ•°ç»„
	let dp = new Array(m).fill(0);

	for (let j = n - 2; j >= 0; j--) {
		// è®°å½•å½“å‰åˆ—çš„ dp æ•°ç»„
		let newDp = [];
		for (let i = 0; i < m; i++) {
			// å½“å‰å•å…ƒæ ¼çš„ç§»åŠ¨æ¬¡æ•°
			let moves = 0;
			// æ£€æŸ¥ä¸‰ä¸ªå¯ç§»åŠ¨æ–¹å‘
			if (i > 0 && grid[i][j] < grid[i - 1][j + 1]) {
				moves = Math.max(moves, dp[i - 1] + 1);
			}
			if (grid[i][j] < grid[i][j + 1]) {
				moves = Math.max(moves, dp[i] + 1);
			}
			if (i < m - 1 && grid[i][j] < grid[i + 1][j + 1]) {
				moves = Math.max(moves, dp[i + 1] + 1);
			}
			// æ›´æ–°å½“å‰åˆ—çš„ç§»åŠ¨æ¬¡æ•°
			newDp.push(moves);
		}
		// æ›´æ–° dp æ•°ç»„
		dp = newDp;
	}
	// è¿”å›æœ€å¤§çš„ç§»åŠ¨æ¬¡æ•°
	return Math.max(...dp);
};
```

:::
