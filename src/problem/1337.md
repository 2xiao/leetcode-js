---
title: 1337. çŸ©é˜µä¸­æˆ˜æ–—åŠ›æœ€å¼±çš„ K è¡Œ
description: LeetCode 1337. çŸ©é˜µä¸­æˆ˜æ–—åŠ›æœ€å¼±çš„ K è¡Œé¢˜è§£ï¼ŒThe K Weakest Rows in a Matrixï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1337. çŸ©é˜µä¸­æˆ˜æ–—åŠ›æœ€å¼±çš„ K è¡Œ
  - çŸ©é˜µä¸­æˆ˜æ–—åŠ›æœ€å¼±çš„ K è¡Œ
  - The K Weakest Rows in a Matrix
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - äºŒåˆ†æŸ¥æ‰¾
  - çŸ©é˜µ
  - æ’åº
  - å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
---

# 1337. çŸ©é˜µä¸­æˆ˜æ–—åŠ›æœ€å¼±çš„ K è¡Œ

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`çŸ©é˜µ`](/tag/matrix.md) [`æ’åº`](/tag/sorting.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/the-k-weakest-rows-in-a-matrix) [`LeetCode`](https://leetcode.com/problems/the-k-weakest-rows-in-a-matrix)

## é¢˜ç›®

You are given an `m x n` binary matrix `mat` of `1`'s (representing soldiers)
and `0`'s (representing civilians). The soldiers are positioned **in front**
of the civilians. That is, all the `1`'s will appear to the **left** of all
the `0`'s in each row.

A row `i` is **weaker** than a row `j` if one of the following is true:

- The number of soldiers in row `i` is less than the number of soldiers in row `j`.
- Both rows have the same number of soldiers and `i < j`.

Return _the indices of the_`k` _**weakest** rows in the matrix ordered from
weakest to strongest_.

**Example 1:**

> Input:
>
> ```
> mat =
> [[1,1,0,0,0],
> [1,1,1,1,0],
> [1,0,0,0,0],
> [1,1,0,0,0],
> [1,1,1,1,1]],
>
> k = 3
> ```
>
> Output: [2,0,3]
>
> Explanation:
>
> The number of soldiers in each row is:
>
> - Row 0: 2
> - Row 1: 4
> - Row 2: 1
> - Row 3: 2
> - Row 4: 5
>
> The rows ordered from weakest to strongest are [2,0,3,1,4].

**Example 2:**

> Input:
>
> ```
> mat =
> [[1,0,0,0],
> [1,1,1,1],
> [1,0,0,0],
> [1,0,0,0]],
>
> k = 2
> ```
>
> Output: [0,2]
>
> Explanation:
>
> The number of soldiers in each row is:
>
> - Row 0: 1
> - Row 1: 4
> - Row 2: 1
> - Row 3: 1
>
> The rows ordered from weakest to strongest are [0,2,3,1].

**Constraints:**

- `m == mat.length`
- `n == mat[i].length`
- `2 <= n, m <= 100`
- `1 <= k <= m`
- `matrix[i][j]` is either 0 or 1.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º `m * n` çš„çŸ©é˜µ `mat`ï¼ŒçŸ©é˜µç”±è‹¥å¹²å†›äººå’Œå¹³æ°‘ç»„æˆï¼Œåˆ†åˆ«ç”¨ 1 å’Œ 0 è¡¨ç¤ºã€‚

è¯·ä½ è¿”å›çŸ©é˜µä¸­æˆ˜æ–—åŠ›æœ€å¼±çš„ `k` è¡Œçš„ç´¢å¼•ï¼ŒæŒ‰ä»æœ€å¼±åˆ°æœ€å¼ºæ’åºã€‚

å¦‚æœç¬¬ _**i**_ è¡Œçš„å†›äººæ•°é‡å°‘äºç¬¬ _**j**_ è¡Œï¼Œæˆ–è€…ä¸¤è¡Œå†›äººæ•°é‡ç›¸åŒä½† _**i**_ å°äº _**j**_ ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¤ä¸ºç¬¬
_**i**_ è¡Œçš„æˆ˜æ–—åŠ›æ¯”ç¬¬ _**j**_ è¡Œå¼±ã€‚

å†›äºº **æ€»æ˜¯** æ’åœ¨ä¸€è¡Œä¸­çš„é å‰ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ 1 æ€»æ˜¯å‡ºç°åœ¨ 0 ä¹‹å‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š**
>
> ```
> mat =
> [[1,1,0,0,0],
> [1,1,1,1,0],
> [1,0,0,0,0],
> [1,1,0,0,0],
> [1,1,1,1,1]],
>
> k = 3
> ```
>
> **è¾“å‡ºï¼š**[2,0,3]
>
> **è§£é‡Šï¼š**
>
> æ¯è¡Œä¸­çš„å†›äººæ•°ç›®ï¼š
>
> - è¡Œ 0 -> 2
> - è¡Œ 1 -> 4
> - è¡Œ 2 -> 1
> - è¡Œ 3 -> 2
> - è¡Œ 4 -> 5
>
> ä»æœ€å¼±åˆ°æœ€å¼ºå¯¹è¿™äº›è¡Œæ’åºåå¾—åˆ° [2,0,3,1,4]

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š**
>
> ```
> mat =
> [[1,0,0,0],
> [1,1,1,1],
> [1,0,0,0],
> [1,0,0,0]],
>
> k = 2
> ```
>
> **è¾“å‡ºï¼š**[0,2]
>
> **è§£é‡Šï¼š**
>
> æ¯è¡Œä¸­çš„å†›äººæ•°ç›®ï¼š
>
> - è¡Œ 0 -> 1
> - è¡Œ 1 -> 4
> - è¡Œ 2 -> 1
> - è¡Œ 3 -> 1
>
> ä»æœ€å¼±åˆ°æœ€å¼ºå¯¹è¿™äº›è¡Œæ’åºåå¾—åˆ° [0,2,3,1]

**æç¤ºï¼š**

- `m == mat.length`
- `n == mat[i].length`
- `2 <= n, m <= 100`
- `1 <= k <= m`
- `matrix[i][j]` ä¸æ˜¯ 0 å°±æ˜¯ 1

## è§£é¢˜æ€è·¯

1. **çŸ©é˜µè¡Œçš„å¼ºåº¦è®¡ç®—ï¼š**

   - ä½¿ç”¨ `map` å°†æ¯ä¸€è¡Œçš„å£«å…µæ•°é‡åŠå…¶ç´¢å¼•å­˜å‚¨ä¸º `[strength, index]`ã€‚
   - æ¯ä¸€è¡Œçš„å¼ºåº¦ä¸ºè¯¥è¡Œä¸­å€¼ä¸º `1` çš„æ•°é‡ï¼Œå¯ä»¥é€šè¿‡ `reduce` æˆ–äºŒåˆ†æŸ¥æ‰¾ï¼ˆé’ˆå¯¹æ’åºè¡Œï¼‰å¿«é€Ÿè®¡ç®—ã€‚

2. **æ„å»ºæœ€å°å †ï¼š**  
   å®šä¹‰ä¸€ä¸ª `MinHeap` ç±»å®ç°æœ€å°å †æ“ä½œï¼Œæä¾› `insert` å’Œ `pop` æ–¹æ³•ã€‚

3. **å †ä¼˜åŒ–ï¼š**  
   ä½¿ç”¨æœ€å°å †ï¼ˆMin-Heapï¼‰å­˜å‚¨è®¡ç®—å¾—åˆ°çš„ `[strength, index]` æ•°æ®ï¼Œå…¶ä¸­å †çš„ä¼˜å…ˆçº§ä¸ºï¼š

   - ä¼˜å…ˆæŒ‰å£«å…µæ•°é‡å‡åºæ’åˆ—ï¼›
   - å¦‚æœå£«å…µæ•°é‡ç›¸åŒï¼ŒæŒ‰è¡Œå·å‡åºæ’åˆ—ã€‚

4. **æå–æœ€å¼±çš„è¡Œï¼š**
   - ä½¿ç”¨å †è¿ç»­ `k` æ¬¡ `pop` æ“ä½œï¼Œå¾—åˆ°æœ€å¼±çš„ `k` è¡Œï¼Œè¿”å›å¯¹åº”çš„ `index` æ•°ç»„ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(m * n + k log m)`
  - **è®¡ç®—å¼ºåº¦ï¼š** `O(m * n)`ï¼Œå…¶ä¸­ `m` æ˜¯çŸ©é˜µçš„è¡Œæ•°ï¼Œ`n` æ˜¯åˆ—æ•°ã€‚
  - **å †æ„å»ºï¼š** `O(m)`ã€‚
  - **æå–æœ€å¼±è¡Œï¼š** `O(k log m)`ã€‚
  - æ•´ä½“å¤æ‚åº¦ä¸º `O(m * n + k log m)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m)`ï¼Œç”¨äºå­˜å‚¨å †çš„æ•°æ®ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[][]} mat
 * @param {number} k
 * @return {number[]}
 */
var kWeakestRows = function (mat, k) {
	// è‡ªå®šä¹‰æ’åºè§„åˆ™
	const priority = (a, b) => {
		if (a[0] === b[0]) return a[1] < b[1];
		return a[0] < b[0];
	};

	// è®¡ç®—æ¯ä¸€è¡Œçš„å£«å…µæ•°é‡åŠç´¢å¼•
	const arr = mat.map((row, i) => [row.reduce((a, b) => a + b, 0), i]);

	// æ„å»ºæœ€å°å †
	let minHeap = new MinHeap(arr, priority);

	// æå–æœ€å¼±çš„ k è¡Œ
	let res = [];
	while (k-- > 0) {
		res.push(minHeap.pop()[1]);
	}

	return res;
};

// æœ€å°å †å®ç°
class MinHeap {
	constructor(arr = [], priority = (a, b) => a < b) {
		this.heap = arr;
		this.priority = priority;
		for (let i = ((this.heap.length / 2) | 0) - 1; i >= 0; i--) {
			this.heapifyDown(i);
		}
	}

	// æ’å…¥å…ƒç´ 
	insert(item) {
		this.heap.push(item);
		this.heapifyUp(this.heap.length - 1);
	}

	// ç§»é™¤å¹¶è¿”å›å †é¡¶
	pop() {
		if (this.heap.length === 0) return null;
		const top = this.heap[0];
		const last = this.heap.pop();
		if (this.heap.length) {
			this.heap[0] = last;
			this.heapifyDown(0);
		}
		return top;
	}

	heapifyUp(i) {
		while (i > 0) {
			const parent = ((i - 1) / 2) | 0;
			if (this.priority(this.heap[i], this.heap[parent])) {
				[this.heap[i], this.heap[parent]] = [this.heap[parent], this.heap[i]];
				i = parent;
			} else {
				break;
			}
		}
	}

	heapifyDown(i) {
		const left = i * 2 + 1,
			right = i * 2 + 2;
		let min = i;
		if (
			left < this.heap.length &&
			this.priority(this.heap[left], this.heap[min])
		) {
			min = left;
		}
		if (
			right < this.heap.length &&
			this.priority(this.heap[right], this.heap[min])
		) {
			min = right;
		}
		if (min !== i) {
			[this.heap[i], this.heap[min]] = [this.heap[min], this.heap[i]];
			this.heapifyDown(min);
		}
	}
}
```
