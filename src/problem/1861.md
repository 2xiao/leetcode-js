---
title: 1861. æ—‹è½¬ç›’å­
description: LeetCode 1861. æ—‹è½¬ç›’å­é¢˜è§£ï¼ŒRotating the Boxï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1861. æ—‹è½¬ç›’å­
  - æ—‹è½¬ç›’å­
  - Rotating the Box
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - åŒæŒ‡é’ˆ
  - çŸ©é˜µ
---

# 1861. æ—‹è½¬ç›’å­

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`çŸ©é˜µ`](/tag/matrix.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/rotating-the-box) [`LeetCode`](https://leetcode.com/problems/rotating-the-box)

## é¢˜ç›®

You are given an `m x n` matrix of characters `box` representing a side-view
of a box. Each cell of the box is one of the following:

- A stone `'#'`
- A stationary obstacle `'*'`
- Empty `'.'`

The box is rotated **90 degrees clockwise** , causing some of the stones to
fall due to gravity. Each stone falls down until it lands on an obstacle,
another stone, or the bottom of the box. Gravity **does not** affect the
obstacles' positions, and the inertia from the box's rotation **does not**
affect the stones' horizontal positions.

It is **guaranteed** that each stone in `box` rests on an obstacle, another
stone, or the bottom of the box.

Return _an_`n x m` _matrix representing the box after the rotation described
above_.

**Example 1:**

![](https://assets.leetcode.com/uploads/2021/04/08/rotatingtheboxleetcodewithstones.png)

> **Input:** `box = [["#",".","#"]]`
>
> Output: `[["."], ["#"], ["#"]]`

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/04/08/rotatingtheboxleetcode2withstones.png)

> **Input:** `box = [["#",".","*","."], ["#","#","*","."]]`
>
> Output: `[["#","."], ["#","#"], ["*","*"], [".","."]]`

**Example 3:**

![](https://assets.leetcode.com/uploads/2021/04/08/rotatingtheboxleetcode3withstone.png)

> **Input:** `box = [["#","#","*",".","*","."], ["#","#","#","*",".","."], ["#","#","#",".","#","."]]`
>
> Output: `[[".","#","#"], [".","#","#"], ["#","#","*"], ["#","*","."], ["#",".","*"], ["#",".","."]]`

**Constraints:**

- `m == box.length`
- `n == box[i].length`
- `1 <= m, n <= 500`
- `box[i][j]` is either `'#'`, `'*'`, or `'.'`.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ª `m x n` çš„å­—ç¬¦çŸ©é˜µ `box` ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªç®±å­çš„ä¾§è§†å›¾ã€‚ç®±å­çš„æ¯ä¸€ä¸ªæ ¼å­å¯èƒ½ä¸ºï¼š

- `'#'` è¡¨ç¤ºçŸ³å¤´
- `'*'` è¡¨ç¤ºå›ºå®šçš„éšœç¢ç‰©
- `'.'` è¡¨ç¤ºç©ºä½ç½®

è¿™ä¸ªç®±å­è¢« **é¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦** ï¼Œç”±äºé‡åŠ›åŸå› ï¼Œéƒ¨åˆ†çŸ³å¤´çš„ä½ç½®ä¼šå‘ç”Ÿæ”¹å˜ã€‚æ¯ä¸ªçŸ³å¤´ä¼šå‚ç›´æ‰è½ï¼Œç›´åˆ°å®ƒé‡åˆ°éšœç¢ç‰©ï¼Œå¦ä¸€ä¸ªçŸ³å¤´æˆ–è€…ç®±å­çš„åº•éƒ¨ã€‚é‡åŠ›
**ä¸ä¼š** å½±å“éšœç¢ç‰©çš„ä½ç½®ï¼ŒåŒæ—¶ç®±å­æ—‹è½¬ä¸ä¼šäº§ç”Ÿ**æƒ¯æ€§** ï¼Œä¹Ÿå°±æ˜¯è¯´çŸ³å¤´çš„æ°´å¹³ä½ç½®ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚

é¢˜ç›®ä¿è¯åˆå§‹æ—¶ `box` ä¸­çš„çŸ³å¤´è¦ä¹ˆåœ¨ä¸€ä¸ªéšœç¢ç‰©ä¸Šï¼Œè¦ä¹ˆåœ¨å¦ä¸€ä¸ªçŸ³å¤´ä¸Šï¼Œè¦ä¹ˆåœ¨ç®±å­çš„åº•éƒ¨ã€‚

è¯·ä½ è¿”å›ä¸€ä¸ª `n x m`çš„çŸ©é˜µï¼Œè¡¨ç¤ºæŒ‰ç…§ä¸Šè¿°æ—‹è½¬åï¼Œç®±å­å†…çš„ç»“æœã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/04/08/rotatingtheboxleetcodewithstones.png)

> **è¾“å…¥ï¼š** `box = [["#",".","#"]]`
>
> **è¾“å‡ºï¼š** `[["."], ["#"], ["#"]]`

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/04/08/rotatingtheboxleetcode2withstones.png)

> **è¾“å…¥ï¼š** `box = [["#",".","*","."], ["#","#","*","."]]`
>
> **è¾“å‡ºï¼š** `[["#","."], ["#","#"], ["*","*"], [".","."]]`

**ç¤ºä¾‹ 3ï¼š**

![](https://assets.leetcode.com/uploads/2021/04/08/rotatingtheboxleetcode3withstone.png)

> **è¾“å…¥ï¼š** `box = [["#","#","*",".","*","."], ["#","#","#","*",".","."], ["#","#","#",".","#","."]]`
>
> **è¾“å‡ºï¼š** `[[".","#","#"], [".","#","#"], ["#","#","*"], ["#","*","."], ["#",".","*"], ["#",".","."]]`

**æç¤ºï¼š**

- `m == box.length`
- `n == box[i].length`
- `1 <= m, n <= 500`
- `box[i][j]` åªå¯èƒ½æ˜¯ `'#'` ï¼Œ`'*'` æˆ–è€… `'.'` ã€‚

## è§£é¢˜æ€è·¯

1. è¦å°†ç›’å­é¡ºæ—¶é’ˆæ—‹è½¬ 90Â°ï¼Œæœ¬è´¨ä¸Šï¼Œè¿™æ„å‘³ç€ç¬¬ `i` è¡Œå˜æˆæ–°æ•°ç»„ä¸­çš„ç¬¬ `m - 1 - i` åˆ—ã€‚æ—‹è½¬æ—¶éœ€è¦æ¨¡æ‹Ÿé‡åŠ›ä½œç”¨ï¼Œä¿è¯çŸ³å¤´ `#` å°½å¯èƒ½å¾€ä¸‹è½ï¼Œé‡åˆ°éšœç¢ç‰© `*` ä¼šåœä½ã€‚
2. åˆå§‹åŒ–ç»“æœçŸ©é˜µ `res`ï¼Œå¤§å°ä¸º `n x m`ã€‚
3. å¯¹äºæ¯ä¸€è¡Œï¼Œä»å³å‘å·¦éå†ï¼Œè®°å½•çŸ³å¤´ä¸‹è½çš„ä½ç½®ï¼š
   - å¦‚æœé‡åˆ°çŸ³å¤´ `#`ï¼Œå°†å…¶ç§»åŠ¨åˆ°å½“å‰é‡åŠ›ä½œç”¨çš„æœ€å³ä½ç½® `bottom`ï¼Œå¹¶æ›´æ–° `bottom`ã€‚
   - å¦‚æœé‡åˆ°éšœç¢ç‰© `*`ï¼Œå°†éšœç¢ç‰©ä½ç½®è®°å½•åˆ°ç»“æœçŸ©é˜µï¼Œå¹¶æ›´æ–°é‡åŠ›è¾¹ç•Œ `bottom` ä¸ºéšœç¢ç‰©çš„å·¦è¾¹ã€‚
4. æ ¹æ®æ—‹è½¬é€»è¾‘ï¼Œå°†åŸæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ”¾åˆ°ç»“æœçŸ©é˜µå¯¹åº”ä½ç½®ã€‚
5. å¤„ç†å®Œæˆåï¼Œè¿”å›æ—‹è½¬åçš„ç›’å­çŸ©é˜µã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œéœ€è¦éå†çŸ©é˜µé‡Œçš„æ¯ä¸ªå…ƒç´ ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œç»“æœçŸ©é˜µ `res` å ç”¨`O(m * n)`çš„ç©ºé—´ã€‚

## ä»£ç 

```javascript
/**
 * @param {character[][]} box
 * @return {character[][]}
 */
var rotateTheBox = function (box) {
	// m è¡Œï¼Œn åˆ—
	const m = box.length,
		n = box[0].length;

	// åˆå§‹åŒ–ç»“æœçŸ©é˜µ
	let res = Array(n)
		.fill()
		.map(() => Array(m).fill('.'));

	for (let row = 0; row < m; row++) {
		let bottom = n - 1; // è®°å½•çŸ³å¤´ä¸‹è½çš„æœ€å³ä½ç½®
		for (let col = n - 1; col >= 0; col--) {
			if (box[row][col] == '#') {
				// é‡åˆ°çŸ³å¤´
				res[bottom--][m - 1 - row] = '#'; // æ”¾åˆ°å½“å‰æœ€å³ä½ç½®
			} else if (box[row][col] == '*') {
				// é‡åˆ°éšœç¢ç‰©
				res[col][m - 1 - row] = '*'; // æ”¾ç½®éšœç¢ç‰©
				bottom = col - 1; // æ›´æ–°é‡åŠ›è¾¹ç•Œ
			}
		}
	}

	// è¿”å›æ—‹è½¬åçš„çŸ©é˜µ
	return res;
};
```
