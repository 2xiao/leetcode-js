---
title: 2685. ç»Ÿè®¡å®Œå…¨è¿é€šåˆ†é‡çš„æ•°é‡
description: LeetCode 2685. ç»Ÿè®¡å®Œå…¨è¿é€šåˆ†é‡çš„æ•°é‡é¢˜è§£ï¼ŒCount the Number of Complete Componentsï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2685. ç»Ÿè®¡å®Œå…¨è¿é€šåˆ†é‡çš„æ•°é‡
  - ç»Ÿè®¡å®Œå…¨è¿é€šåˆ†é‡çš„æ•°é‡
  - Count the Number of Complete Components
  - è§£é¢˜æ€è·¯
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - å›¾
---

# 2685. ç»Ÿè®¡å®Œå…¨è¿é€šåˆ†é‡çš„æ•°é‡

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å›¾`](/tag/graph.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/count-the-number-of-complete-components) [`LeetCode`](https://leetcode.com/problems/count-the-number-of-complete-components)

## é¢˜ç›®

You are given an integer `n`. There is an **undirected** graph with `n`
vertices, numbered from `0` to `n - 1`. You are given a 2D integer array
`edges` where `edges[i] = [ai, bi]` denotes that there exists an
**undirected** edge connecting vertices `ai` and `bi`.

Return _the number of**complete connected components** of the graph_.

A **connected component** is a subgraph of a graph in which there exists a
path between any two vertices, and no vertex of the subgraph shares an edge
with a vertex outside of the subgraph.

A connected component is said to be **complete** if there exists an edge
between every pair of its vertices.

**Example 1:**

![](https://assets.leetcode.com/uploads/2023/04/11/screenshot-from-2023-04-11-23-31-23.png)

> Input: n = 6, edges = [[0,1],[0,2],[1,2],[3,4]]
>
> Output: 3
>
> Explanation: From the picture above, one can see that all of the components of this graph are complete.

**Example 2:**

![](https://assets.leetcode.com/uploads/2023/04/11/screenshot-from-2023-04-11-23-32-00.png)

> Input: n = 6, edges = [[0,1],[0,2],[1,2],[3,4],[3,5]]
>
> Output: 1
>
> Explanation: The component containing vertices 0, 1, and 2 is complete since there is an edge between every pair of two vertices. On the other hand, the component containing vertices 3, 4, and 5 is not complete since there is no edge between vertices 4 and 5. Thus, the number of complete components in this graph is 1.

**Constraints:**

- `1 <= n <= 50`
- `0 <= edges.length <= n * (n - 1) / 2`
- `edges[i].length == 2`
- `0 <= ai, bi <= n - 1`
- `ai != bi`
- There are no repeated edges.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ã€‚ç°æœ‰ä¸€ä¸ªåŒ…å« `n` ä¸ªé¡¶ç‚¹çš„ **æ— å‘** å›¾ï¼Œé¡¶ç‚¹æŒ‰ä» `0` åˆ° `n - 1` ç¼–å·ã€‚ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `edges`
å…¶ä¸­ `edges[i] = [ai, bi]` è¡¨ç¤ºé¡¶ç‚¹ `ai` å’Œ `bi` ä¹‹é—´å­˜åœ¨ä¸€æ¡ **æ— å‘** è¾¹ã€‚

è¿”å›å›¾ä¸­ **å®Œå…¨è¿é€šåˆ†é‡** çš„æ•°é‡ã€‚

å¦‚æœåœ¨å­å›¾ä¸­ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´éƒ½å­˜åœ¨è·¯å¾„ï¼Œå¹¶ä¸”å­å›¾ä¸­æ²¡æœ‰ä»»ä½•ä¸€ä¸ªé¡¶ç‚¹ä¸å­å›¾å¤–éƒ¨çš„é¡¶ç‚¹å…±äº«è¾¹ï¼Œåˆ™ç§°å…¶ä¸º **è¿é€šåˆ†é‡** ã€‚

å¦‚æœè¿é€šåˆ†é‡ä¸­æ¯å¯¹èŠ‚ç‚¹ä¹‹é—´éƒ½å­˜åœ¨ä¸€æ¡è¾¹ï¼Œåˆ™ç§°å…¶ä¸º **å®Œå…¨è¿é€šåˆ†é‡** ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2023/04/11/screenshot-from-2023-04-11-23-31-23.png)

> **è¾“å…¥ï¼š** n = 6, edges = [[0,1],[0,2],[1,2],[3,4]]
>
> **è¾“å‡ºï¼š** 3
>
> **è§£é‡Šï¼š** å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°æ­¤å›¾æ‰€æœ‰åˆ†é‡éƒ½æ˜¯å®Œå…¨è¿é€šåˆ†é‡ã€‚

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2023/04/11/screenshot-from-2023-04-11-23-32-00.png)

> **è¾“å…¥ï¼š** n = 6, edges = [[0,1],[0,2],[1,2],[3,4],[3,5]]
>
> **è¾“å‡ºï¼š** 1
>
> **è§£é‡Šï¼š** åŒ…å«èŠ‚ç‚¹ 0ã€1 å’Œ 2 çš„åˆ†é‡æ˜¯å®Œå…¨è¿é€šåˆ†é‡ï¼Œå› ä¸ºæ¯å¯¹èŠ‚ç‚¹ä¹‹é—´éƒ½å­˜åœ¨ä¸€æ¡è¾¹ã€‚
>
> åŒ…å«èŠ‚ç‚¹ 3 ã€4 å’Œ 5 çš„åˆ†é‡ä¸æ˜¯å®Œå…¨è¿é€šåˆ†é‡ï¼Œå› ä¸ºèŠ‚ç‚¹ 4 å’Œ 5 ä¹‹é—´ä¸å­˜åœ¨è¾¹ã€‚
>
> å› æ­¤ï¼Œåœ¨å›¾ä¸­å®Œå…¨è¿æ¥åˆ†é‡çš„æ•°é‡æ˜¯ 1 ã€‚

**æç¤ºï¼š**

- `1 <= n <= 50`
- `0 <= edges.length <= n * (n - 1) / 2`
- `edges[i].length == 2`
- `0 <= ai, bi <= n - 1`
- `ai != bi`
- ä¸å­˜åœ¨é‡å¤çš„è¾¹

## è§£é¢˜æ€è·¯

1. **æ„å»ºå›¾**ï¼š

   - ä½¿ç”¨é‚»æ¥è¡¨ `graph` è¡¨ç¤ºå›¾ç»“æ„ï¼Œ`graph[a]` å­˜å‚¨ä¸èŠ‚ç‚¹ `a` ç›¸é‚»çš„èŠ‚ç‚¹åˆ—è¡¨ã€‚

2. **DFS éå†**ï¼š

   - å¯¹æ¯ä¸ªæœªè®¿é—®çš„èŠ‚ç‚¹ `i` è¿›è¡Œ DFS éå†ï¼Œæ‰¾åˆ°å½“å‰çš„è¿é€šåˆ†é‡ `component`ã€‚
   - DFS è¿‡ç¨‹ä¸­ï¼š
     - `component` è®°å½•å½“å‰è¿é€šåˆ†é‡å†…çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚
     - `visited` é›†åˆè®°å½•å·²è®¿é—®çš„èŠ‚ç‚¹ï¼Œé¿å…é‡å¤éå†ã€‚

3. **æ£€æŸ¥æ˜¯å¦ä¸ºå®Œå…¨å›¾**ï¼š

   - å¯¹äºä¸€ä¸ªè¿é€šåˆ†é‡ `component`ï¼š
     - **å®Œå…¨å›¾æ€§è´¨**ï¼šå¯¹äºæ¯ä¸ªèŠ‚ç‚¹ `node`ï¼Œåº”æœ‰ `graph[node]` çš„é‚»å±…æ•°é‡ == `component.size - 1`ã€‚
     - å¦‚æœæ‰€æœ‰èŠ‚ç‚¹éƒ½æ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œåˆ™è¯¥è¿é€šåˆ†é‡ä¸ºå®Œå…¨å›¾ã€‚

4. **ç»Ÿè®¡æ»¡è¶³æ¡ä»¶çš„è¿é€šåˆ†é‡æ•°é‡**ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n + m)`ã€‚

  - éå†æ¯ä¸ªèŠ‚ç‚¹ `O(n)`ã€‚
  - DFS éå†æ‰€æœ‰è¾¹ `O(m)`ã€‚
  - å¯¹æ¯ä¸ªè¿é€šåˆ†é‡è¿›è¡Œå®Œå…¨æ€§æ£€æŸ¥ï¼Œæœ€å·®æƒ…å†µ `O(n)`ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n + m)`ã€‚
  - `graph` é‚»æ¥è¡¨å­˜å‚¨ `m` æ¡è¾¹ï¼š`O(m)`ã€‚
  - `visited` å’Œ `component` é›†åˆæœ€å·®æƒ…å†µ `O(n)`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} n
 * @param {number[][]} edges
 * @return {number}
 */
var countCompleteComponents = function (n, edges) {
	let graph = {};

	// æ„å»ºå›¾
	for (let [a, b] of edges) {
		if (!graph[a]) {
			graph[a] = [];
		}
		if (!graph[b]) {
			graph[b] = [];
		}
		graph[a].push(b);
		graph[b].push(a);
	}

	let visited = new Set();
	let count = 0;

	// éå†æ¯ä¸ªèŠ‚ç‚¹ï¼ŒæŸ¥æ‰¾è¿é€šåˆ†é‡
	for (let i = 0; i < n; i++) {
		if (!visited.has(i)) {
			let component = new Set();
			dfs(i, component, visited);

			// åˆ¤æ–­è¯¥è¿é€šåˆ†é‡æ˜¯å¦æ˜¯å®Œå…¨å›¾
			if (
				[...component].every(
					(node) => (graph[node] || []).length === component.size - 1
				)
			) {
				count++;
			}
		}
	}

	return count;

	// DFS éå†
	function dfs(node, component, visited) {
		component.add(node);
		visited.add(node);
		for (let neighbor of graph[node] || []) {
			if (!visited.has(neighbor)) {
				dfs(neighbor, component, visited);
			}
		}
	}
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 323 | æ— å‘å›¾ä¸­è¿é€šåˆ†é‡çš„æ•°ç›® ğŸ”’ |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å¹¶æŸ¥é›†`](/tag/union-find.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/number-of-connected-components-in-an-undirected-graph) [ğŸ”—](https://leetcode.com/problems/number-of-connected-components-in-an-undirected-graph) |