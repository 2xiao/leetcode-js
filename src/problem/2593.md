---
title: 2593. æ ‡è®°æ‰€æœ‰å…ƒç´ åæ•°ç»„çš„åˆ†æ•°
description: LeetCode 2593. æ ‡è®°æ‰€æœ‰å…ƒç´ åæ•°ç»„çš„åˆ†æ•°é¢˜è§£ï¼ŒFind Score of an Array After Marking All Elementsï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2593. æ ‡è®°æ‰€æœ‰å…ƒç´ åæ•°ç»„çš„åˆ†æ•°
  - æ ‡è®°æ‰€æœ‰å…ƒç´ åæ•°ç»„çš„åˆ†æ•°
  - Find Score of an Array After Marking All Elements
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
  - æ’åº
  - æ¨¡æ‹Ÿ
  - å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
---

# 2593. æ ‡è®°æ‰€æœ‰å…ƒç´ åæ•°ç»„çš„åˆ†æ•°

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ’åº`](/tag/sorting.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/find-score-of-an-array-after-marking-all-elements) [`LeetCode`](https://leetcode.com/problems/find-score-of-an-array-after-marking-all-elements)

## é¢˜ç›®

You are given an array `nums` consisting of positive integers.

Starting with `score = 0`, apply the following algorithm:

- Choose the smallest integer of the array that is not marked. If there is a tie, choose the one with the smallest index.
- Add the value of the chosen integer to `score`.
- Mark **the chosen element and its two adjacent elements if they exist**.
- Repeat until all the array elements are marked.

Return _the score you get after applying the above algorithm_.

**Example 1:**

> Input: nums = `[2,1,3,4,5,2]`
>
> Output: 7
>
> Explanation: We mark the elements as follows:
>
> - 1 is the smallest unmarked element, so we mark it and its two adjacent elements: `[_2_ ,_1_ ,_3_ ,4,5,2]`.
> - 2 is the smallest unmarked element, so we mark it and its left adjacent element: `[_2_ ,_1_ ,_3_ ,4,_5_ ,_2_]`.
> - 4 is the only remaining unmarked element, so we mark it: `[_2_ ,_1_ ,_3_ ,_4_ ,_5_ ,_2_]`.
>
> Our score is 1 + 2 + 4 = 7.

**Example 2:**

> Input: nums = `[2,3,5,1,3,2]`
>
> Output: 5
>
> Explanation: We mark the elements as follows:
>
> - 1 is the smallest unmarked element, so we mark it and its two adjacent elements: `[2,3,_5_ ,_1_ ,_3_ ,2]`.
> - 2 is the smallest unmarked element, since there are two of them, we choose the left-most one, so we mark the one at index 0 and its right adjacent element: `[_2_ ,_3_ ,_5_ ,_1_ ,_3_ ,2]`.
> - 2 is the only remaining unmarked element, so we mark it: `[_2_ ,_3_ ,_5_ ,_1_ ,_3_ ,_2_]`.
>
> Our score is 1 + 2 + 2 = 5.

**Constraints:**

- `1 <= nums.length <= 10^5`
- `1 <= nums[i] <= 10^6`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•°ç»„ `nums` ï¼Œå®ƒåŒ…å«è‹¥å¹²æ­£æ•´æ•°ã€‚

ä¸€å¼€å§‹åˆ†æ•° `score = 0` ï¼Œè¯·ä½ æŒ‰ç…§ä¸‹é¢ç®—æ³•æ±‚å‡ºæœ€ååˆ†æ•°ï¼š

- ä»æ•°ç»„ä¸­é€‰æ‹©æœ€å°ä¸”æ²¡æœ‰è¢«æ ‡è®°çš„æ•´æ•°ã€‚å¦‚æœæœ‰ç›¸ç­‰å…ƒç´ ï¼Œé€‰æ‹©ä¸‹æ ‡æœ€å°çš„ä¸€ä¸ªã€‚
- å°†é€‰ä¸­çš„æ•´æ•°åŠ åˆ° `score` ä¸­ã€‚
- æ ‡è®° **è¢«é€‰ä¸­å…ƒç´ ** ï¼Œå¦‚æœæœ‰ç›¸é‚»å…ƒç´ ï¼Œåˆ™åŒæ—¶æ ‡è®° **ä¸å®ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ** ã€‚
- é‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½è¢«æ ‡è®°ã€‚

è¯·ä½ è¿”å›æ‰§è¡Œä¸Šè¿°ç®—æ³•åæœ€åçš„åˆ†æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** nums = `[2,1,3,4,5,2]`
>
> **è¾“å‡ºï¼š** 7
>
> **è§£é‡Šï¼š** æˆ‘ä»¬æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤æ ‡è®°å…ƒç´ ï¼š
>
> - 1 æ˜¯æœ€å°æœªæ ‡è®°å…ƒç´ ï¼Œæ‰€ä»¥æ ‡è®°å®ƒå’Œç›¸é‚»ä¸¤ä¸ªå…ƒç´ ï¼š`[_2_ ,_1_ ,_3_ ,4,5,2]`ã€‚
> - 2 æ˜¯æœ€å°æœªæ ‡è®°å…ƒç´ ï¼Œæ‰€ä»¥æ ‡è®°å®ƒå’Œå·¦è¾¹ç›¸é‚»å…ƒç´ ï¼š`[_2_ ,_1_ ,_3_ ,4,_5_ ,_2_]`ã€‚
> - 4 æ˜¯ä»…å‰©å”¯ä¸€æœªæ ‡è®°çš„å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬æ ‡è®°å®ƒï¼š`[_2_ ,_1_ ,_3_ ,_4_ ,_5_ ,_2_]`ã€‚
>
> æ€»å¾—åˆ†ä¸º 1 + 2 + 4 = 7 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** nums = [2,3,5,1,3,2]
>
> **è¾“å‡ºï¼š** 5
>
> **è§£é‡Šï¼š** æˆ‘ä»¬æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤æ ‡è®°å…ƒç´ ï¼š
>
> - 1 æ˜¯æœ€å°æœªæ ‡è®°å…ƒç´ ï¼Œæ‰€ä»¥æ ‡è®°å®ƒå’Œç›¸é‚»ä¸¤ä¸ªå…ƒç´ ï¼š`[2,3,_5_ ,_1_ ,_3_ ,2]`ã€‚
> - 2 æ˜¯æœ€å°æœªæ ‡è®°å…ƒç´ ï¼Œç”±äºæœ‰ä¸¤ä¸ª 2 ï¼Œæˆ‘ä»¬é€‰æ‹©æœ€å·¦è¾¹çš„ä¸€ä¸ª 2 ï¼Œä¹Ÿå°±æ˜¯ä¸‹æ ‡ä¸º 0 å¤„çš„ 2 ï¼Œä»¥åŠå®ƒå³è¾¹ç›¸é‚»çš„å…ƒç´ ï¼š`[_2_ ,_3_ ,_5_ ,_1_ ,_3_ ,2]`ã€‚
> - 2 æ˜¯ä»…å‰©å”¯ä¸€æœªæ ‡è®°çš„å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬æ ‡è®°å®ƒï¼š`[_2_ ,_3_ ,_5_ ,_1_ ,_3_ ,_2_]`ã€‚
>
> æ€»å¾—åˆ†ä¸º 1 + 2 + 2 = 5 ã€‚

**æç¤ºï¼š**

- `1 <= nums.length <= 10^5`
- `1 <= nums[i] <= 10^6`

## è§£é¢˜æ€è·¯

1. **ä½¿ç”¨æ’åºä¼˜åŒ–æœ€å°å€¼æŸ¥æ‰¾**

ä¸ºäº†å¿«é€Ÿæ‰¾åˆ°æœªæ ‡è®°çš„æœ€å°å€¼ï¼Œå…ˆå°† `nums` ä¸­çš„æ¯ä¸ªå…ƒç´ ä¸å…¶ä¸‹æ ‡å­˜å…¥æ•°ç»„ `arr`ï¼Œå¹¶æŒ‰å…ƒç´ å€¼å‡åºæ’åºã€‚

è¿™æ ·ï¼Œéå† `arr` æ—¶ï¼Œæœ€å°å€¼æ€»æ˜¯ä¼˜å…ˆå¤„ç†ï¼Œé¿å…æ¯æ¬¡æŸ¥æ‰¾æ—¶éƒ½éå†æ•´ä¸ªæ•°ç»„ã€‚

2. **ä½¿ç”¨é›†åˆè®°å½•æ ‡è®°çŠ¶æ€**

ä½¿ç”¨ä¸€ä¸ªé›†åˆ `marked` æ¥è®°å½•å·²è¢«æ ‡è®°çš„å…ƒç´ ä¸‹æ ‡ã€‚

3. **éå† `arr`**

å¯¹æ¯ä¸ªå…ƒç´ ï¼Œå…ˆåˆ¤æ–­å…¶æ˜¯å¦æœªè¢«æ ‡è®°ï¼ˆ`!marked.has(idx)`ï¼‰ï¼Œè‹¥æœªæ ‡è®°åˆ™ï¼š

- å°†è¯¥å€¼ç´¯åŠ åˆ°åˆ†æ•°ã€‚
- æ ‡è®°å½“å‰å…ƒç´ çš„ä¸‹æ ‡ä»¥åŠå…¶å·¦å³ç›¸é‚»çš„ä¸‹æ ‡ã€‚

4. **è¿”å›æœ€ç»ˆåˆ†æ•°**

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n log n)`
  - åˆ›å»ºå¹¶æ’åºæ•°ç»„ `arr`ï¼š`O(n log n)`
  - éå†æ’åºåçš„æ•°ç»„ï¼š`O(n)`
  - æ€»ä½“å¤æ‚åº¦ï¼š`O(n log n)`
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`
  - æ’åºåçš„æ•°ç»„ `arr` å ç”¨ `O(n)`
  - ç”¨äºè®°å½•æ ‡è®°çŠ¶æ€çš„é›†åˆ `marked` å ç”¨ `O(n)`
  - æ€»ä½“ç©ºé—´å¤æ‚åº¦ï¼š`O(n)`

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var findScore = function (nums) {
	// åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ¯ä¸ªå…ƒç´ åŠå…¶åŸä¸‹æ ‡ï¼Œå¹¶æŒ‰å€¼æ’åº
	const arr = nums.map((num, idx) => [num, idx]).sort((a, b) => a[0] - b[0]);
	// ç”¨äºè®°å½•å·²æ ‡è®°çš„ä¸‹æ ‡
	let marked = new Set();
	let score = 0;

	for (let [val, idx] of arr) {
		// å¦‚æœå½“å‰ä¸‹æ ‡æœªè¢«æ ‡è®°
		if (!marked.has(idx)) {
			// ç´¯åŠ åˆ†æ•°
			score += val;
			// æ ‡è®°å½“å‰å…ƒç´ 
			marked.add(idx);
			// æ ‡è®°ç›¸é‚»å…ƒç´ 
			if (idx > 0) marked.add(idx - 1);
			if (idx < nums.length - 1) marked.add(idx + 1);
		}
	}

	return score;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1387 | å°†æ•´æ•°æŒ‰æƒé‡æ’åº |  |  [`è®°å¿†åŒ–æœç´¢`](/tag/memoization.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`æ’åº`](/tag/sorting.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/sort-integers-by-the-power-value) [ğŸ”—](https://leetcode.com/problems/sort-integers-by-the-power-value) |