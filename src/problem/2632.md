# [2632. æŸ¯é‡ŒåŒ–](https://leetcode.com/problems/curry)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/curry)

## é¢˜ç›®

Given a function `fn`, return a **curried** version of that function.

A **curried** function is a function that accepts fewer or an equal number of
parameters as the original function and returns either another **curried**
function or the same value the original function would have returned.

In practical terms, if you called the original function like `sum(1,2,3)`, you
would call the **curried** version like ` csum(1)(2)(3), ``csum(1)(2,3) `,
`csum(1,2)(3)`, or `csum(1,2,3)`. All these methods of calling the **curried**
function should return the same value as the original.

**Example 1:**

> Input:
>
> fn = function sum(a, b, c) { return a + b + c; }
>
> inputs = [[1],[2],[3]]
>
> Output: 6
>
> Explanation:
>
> The code being executed is:
>
> const curriedSum = curry(fn);
>
> curriedSum(1)(2)(3) === 6;
>
> curriedSum(1)(2)(3) should return the same value as sum(1, 2, 3).

**Example 2:**

> Input:
>
> fn = function sum(a, b, c) { return a + b + c; }
>
> inputs = [[1,2],[3]]
>
> Output: 6
>
> Explanation:
>
> curriedSum(1, 2)(3) should return the same value as sum(1, 2, 3).

**Example 3:**

> Input:
>
> fn = function sum(a, b, c) { return a + b + c; }
>
> inputs = [[],[],[1,2,3]]
>
> Output: 6
>
> Explanation:
>
> You should be able to pass the parameters in any way, including all at once or none at all.
>
> curriedSum()()(1, 2, 3) should return the same value as sum(1, 2, 3).

**Example 4:**

> Input:
>
> fn = function life() { return 42; }
>
> inputs = [[]]
>
> Output: 42
>
> Explanation:
>
> currying a function that accepts zero parameters should effectively do nothing.
>
> curriedLife() === 42

**Constraints:**

- `1 <= inputs.length <= 1000`
- `0 <= inputs[i][j] <= 10^5`
- `0 <= fn.length <= 1000`
- `inputs.flat().length == fn.length`
- function parameters explicitly defined
- If `fn.length > 0` then the last array in `inputs` is not empty
- If `fn.length === 0` then `inputs.length === 1`

## é¢˜ç›®å¤§æ„

è¯·ä½ ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå…¶ä»–çš„å‡½æ•°ï¼Œå¹¶è¿”å›è¯¥å‡½æ•°çš„ **æŸ¯é‡ŒåŒ–** åçš„å½¢å¼ã€‚

**æŸ¯é‡ŒåŒ–** å‡½æ•°çš„å®šä¹‰æ˜¯æ¥å—ä¸åŸå‡½æ•°ç›¸åŒæ•°é‡æˆ–æ›´å°‘æ•°é‡çš„å‚æ•°ï¼Œå¹¶è¿”å›å¦ä¸€ä¸ª **æŸ¯é‡ŒåŒ–** åçš„å‡½æ•°æˆ–ä¸åŸå‡½æ•°ç›¸åŒçš„å€¼ã€‚

å®é™…ä¸Šï¼Œå½“ä½ è°ƒç”¨åŸå‡½æ•°ï¼Œå¦‚ `sum(1,2,3)` æ—¶ï¼Œå®ƒå°†è°ƒç”¨ **æŸ¯é‡ŒåŒ–** å‡½æ•°çš„æŸä¸ªå½¢å¼ï¼Œå¦‚ `csum(1)(2)(3)`ï¼Œ
`csum(1)(2,3)`ï¼Œ `csum(1,2)(3)`ï¼Œæˆ– `csum(1,2,3)` ã€‚æ‰€æœ‰è°ƒç”¨ **æŸ¯é‡ŒåŒ–** å‡½æ•°çš„æ–¹æ³•éƒ½åº”è¯¥è¿”å›ä¸åŸå§‹å‡½æ•°ç›¸åŒçš„å€¼ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š**
>
> fn = function sum(a, b, c) { return a + b + c; }
>
> inputs = [[1],[2],[3]]
>
> **è¾“å‡ºï¼š** 6
>
> **è§£é‡Šï¼š**
>
> æ‰§è¡Œçš„ä»£ç æ˜¯ï¼š
>
> const curriedSum = curry(fn);
>
> curriedSum(1)(2)(3) === 6;
>
> curriedSum(1)(2)(3) åº”è¯¥è¿”å›åƒåŸå‡½æ•° sum(1, 2, 3) ä¸€æ ·çš„å€¼ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š**
>
> fn = function sum(a, b, c) { return a + b + c; }
>
> inputs = [[1,2],[3]]]
>
> **è¾“å‡ºï¼š** 6
>
> **è§£é‡Šï¼š**
>
> curriedSum(1, 2)(3) åº”è¯¥è¿”å›åƒåŸå‡½æ•° sum(1, 2, 3) ä¸€æ ·çš„å€¼ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š**
>
> fn = function sum(a, b, c) { return a + b + c; }
>
> inputs = [[],[],[1,2,3]]
>
> **è¾“å‡ºï¼š** 6
>
> **è§£é‡Šï¼š**
>
> ä½ åº”è¯¥èƒ½å¤Ÿä»¥ä»»ä½•æ–¹å¼ä¼ é€’å‚æ•°ï¼ŒåŒ…æ‹¬ä¸€æ¬¡æ€§ä¼ é€’æ‰€æœ‰å‚æ•°æˆ–å®Œå…¨ä¸ä¼ é€’å‚æ•°ã€‚
>
> curriedSum()()(1, 2, 3) åº”è¯¥è¿”å›åƒåŸå‡½æ•° sum(1, 2, 3) ä¸€æ ·çš„å€¼ã€‚

**ç¤ºä¾‹ 4ï¼š**

> **è¾“å…¥ï¼š**
>
> fn = function life() { return 42; }
>
> inputs = [[]]
>
> **è¾“å‡ºï¼š** 42
>
> **è§£é‡Šï¼š**
>
> æŸ¯é‡ŒåŒ–ä¸€ä¸ªæ²¡æœ‰æ¥æ”¶å‚æ•°ï¼Œæ²¡åšæœ‰æ•ˆæ“ä½œçš„å‡½æ•°ã€‚
>
> curriedLife() === 42

**æç¤ºï¼š**

- `1 <= inputs.length <= 1000`
- `0 <= inputs[i][j] <= 10^5`
- `0 <= fn.length <= 1000`
- `inputs.flat().length == fn.length`
- `å‡½æ•°å‚æ•°éœ€è¦è¢«æ˜¾å¼å®šä¹‰`
- å¦‚æœ `fn.length > 0` åˆ™æœ€åä¸€ä¸ªæ•°ç»„ `inputs` ä¸ä¸ºç©º
- å¦‚æœ `fn.length === 0` åˆ™ `inputs.length === 1`

## è§£é¢˜æ€è·¯

[æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰](https://en.wikipedia.org/wiki/Currying)æ˜¯ä¸€ç§å…³äºå‡½æ•°çš„é«˜é˜¶æŠ€æœ¯ï¼Œå®ƒæ˜¯æŒ‡å°†ä¸€ä¸ªå‡½æ•°ä»å¯è°ƒç”¨çš„ `f(a, b, c)` è½¬æ¢ä¸ºå¯è°ƒç”¨çš„ `f(a)(b)(c)`ã€‚æŸ¯é‡ŒåŒ–ä¸ä¼šè°ƒç”¨å‡½æ•°ï¼Œåªæ˜¯å¯¹å‡½æ•°è¿›è¡Œè½¬æ¢ã€‚

<details><summary>æŸ¯é‡ŒåŒ–çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</summary>

å¯ä»¥ä»ä¸€ä¸ªå®é™…ä¸­çš„ä¾‹å­ä¸­ï¼Œäº†è§£æŸ¯é‡ŒåŒ–çš„å¥½å¤„ã€‚

ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªç”¨äºæ ¼å¼åŒ–å’Œè¾“å‡ºä¿¡æ¯çš„æ—¥å¿—ï¼ˆloggingï¼‰å‡½æ•° `log(date, importance, message)`ï¼š

```js
function log(date, importance, message) {
	alert(`[${date.getHours()}:${date.getMinutes()}] [${importance}] ${message}`);
}
```

å°†å®ƒæŸ¯é‡ŒåŒ–ï¼š

`log = _.curry(log);`

æŸ¯é‡ŒåŒ–ä¹‹åï¼Œ`log` ä»æ­£å¸¸è¿è¡Œï¼š

`log(new Date(), "DEBUG", "some debug"); // log(a, b, c)`

ä½†æ˜¯ä¹Ÿèƒ½ä»¥æŸ¯é‡ŒåŒ–å½¢å¼è¿è¡Œï¼š

`log(new Date())("DEBUG")("some debug"); // log(a)(b)(c)`

ç°åœ¨ï¼Œå¯ä»¥è½»æ¾åœ°ä¸ºå½“å‰æ—¥å¿—åˆ›å»ºä¾¿æ·å‡½æ•°ï¼š

```js
// logNow ä¼šæ˜¯å¸¦æœ‰å›ºå®šç¬¬ä¸€ä¸ªå‚æ•°çš„æ—¥å¿—çš„éƒ¨åˆ†åº”ç”¨å‡½æ•°
let logNow = log(new Date());

// ä½¿ç”¨å®ƒ
logNow('INFO', 'message'); // [HH:mm] INFO message
```

ç°åœ¨ï¼Œ`logNow` æ˜¯å…·æœ‰å›ºå®šç¬¬ä¸€ä¸ªå‚æ•°çš„ `log`ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯æ›´ç®€çŸ­çš„â€œéƒ¨åˆ†åº”ç”¨å‡½æ•°ï¼ˆpartially applied functionï¼‰â€æˆ–â€œéƒ¨åˆ†å‡½æ•°ï¼ˆpartialï¼‰â€ã€‚

å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œä¸ºå½“å‰çš„è°ƒè¯•æ—¥å¿—ï¼ˆdebug logï¼‰æä¾›ä¾¿æ·å‡½æ•°ï¼š

```js
let debugNow = logNow('DEBUG');

debugNow('message'); // [HH:mm] DEBUG message
```

å› æ­¤ï¼ŒæŸ¯é‡ŒåŒ–è®©æˆ‘ä»¬èƒ½å¤Ÿæ›´å®¹æ˜“åœ°è·å–éƒ¨åˆ†åº”ç”¨å‡½æ•°ã€‚å°±åƒåœ¨æ—¥å¿—è®°å½•ç¤ºä¾‹ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæ™®é€šå‡½æ•° `log(date, importance, message)` åœ¨è¢«æŸ¯é‡ŒåŒ–ä¹‹åï¼Œå½“è°ƒç”¨å®ƒçš„æ—¶å€™ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼ˆå¦‚ `log(date)`ï¼‰æˆ–ä¸¤ä¸ªå‚æ•°ï¼ˆ`log(date, importance)`ï¼‰æ—¶ï¼Œå®ƒä¼šè¿”å›éƒ¨åˆ†åº”ç”¨å‡½æ•°ã€‚

</details>

å®ç°æŸ¯é‡ŒåŒ–å‡½æ•°çš„æ€è·¯å¦‚ä¸‹ï¼š

1. **å‡½æ•°å‚æ•°å¤„ç†**ï¼š

   - è¾“å…¥çš„å‡½æ•° `fn` å¯èƒ½æ¥å—å¤šä¸ªå‚æ•°ã€‚
   - ä½¿ç”¨ `fn.length` æ¥è·å–å‡½æ•°æœŸæœ›çš„å‚æ•°æ•°é‡ã€‚

2. **é€’å½’è°ƒç”¨**ï¼š

   - å®šä¹‰ä¸€ä¸ªå†…éƒ¨å‡½æ•° `curried`ï¼Œç”¨äºå¤„ç†ä¼ å…¥çš„å‚æ•°ã€‚
   - æ£€æŸ¥å½“å‰æ”¶åˆ°çš„å‚æ•°æ•°é‡ `args.length` æ˜¯å¦è¾¾åˆ° `fn` æ‰€éœ€çš„å‚æ•°æ•°é‡ï¼š
     - å¦‚æœè¾¾åˆ°äº†ï¼Œåˆ™ç›´æ¥è°ƒç”¨ `fn` å¹¶è¿”å›ç»“æœã€‚
     - å¦‚æœæœªè¾¾åˆ°ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¿™ä¸ªæ–°å‡½æ•°æ¥æ”¶æ›´å¤šå‚æ•°ï¼ˆ`nextArgs`ï¼‰å¹¶å°†ä¹‹å‰çš„å‚æ•°ï¼ˆ`args`ï¼‰ä¸æ–°å‚æ•°åˆå¹¶ã€‚

3. **è¿”å›åˆæˆçš„å‡½æ•°**ï¼š
   - é€šè¿‡é€’å½’è°ƒç”¨ `curried`ï¼Œå…è®¸ç»§ç»­æ¥æ”¶å‚æ•°ç›´åˆ°æ»¡è¶³æ¡ä»¶ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œæ¯æ¬¡è°ƒç”¨æŸ¯é‡ŒåŒ–å‡½æ•°çš„å¼€é”€æ˜¯å¸¸æ•°çº§çš„ï¼Œå› ä¸ºåªæ˜¯å¤„ç†å‚æ•°å’Œå‡½æ•°è°ƒç”¨ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œåœ¨æœ€åæƒ…å†µä¸‹éœ€è¦å­˜å‚¨æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ï¼Œç›´åˆ°è¾¾åˆ°æœŸæœ›æ•°é‡çš„å‚æ•°ã€‚

## ä»£ç 

```javascript
var curry = function (fn) {
	return function curried(...args) {
		// å¦‚æœå‚æ•°æ•°é‡æ»¡è¶³è¦æ±‚ï¼Œè°ƒç”¨åŸå§‹å‡½æ•°
		if (args.length >= fn.length) {
			return fn(...args);
		}
		// å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ç»§ç»­æ¥æ”¶å‚æ•°
		return (...nextArgs) => curried(...args, ...nextArgs);
	};
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2623 | [è®°å¿†å‡½æ•°](https://leetcode.com/problems/memoize) | [[âœ“]](/problem/2623.md) |  | <font color=#ffb800>Medium</font> |
| 2630 | [è®°å¿†å‡½æ•° II](https://leetcode.com/problems/memoize-ii) |  |  | <font color=#ff334b>Hard</font> |
