---
title: 3356. é›¶æ•°ç»„å˜æ¢ II
description: LeetCode 3356. é›¶æ•°ç»„å˜æ¢ IIé¢˜è§£ï¼ŒZero Array Transformation IIï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 3356. é›¶æ•°ç»„å˜æ¢ II
  - é›¶æ•°ç»„å˜æ¢ II
  - Zero Array Transformation II
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - äºŒåˆ†æŸ¥æ‰¾
  - å‰ç¼€å’Œ
---

# 3356. é›¶æ•°ç»„å˜æ¢ II

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/zero-array-transformation-ii) [`LeetCode`](https://leetcode.com/problems/zero-array-transformation-ii)

## é¢˜ç›®

You are given an integer array `nums` of length `n` and a 2D array `queries`
where `queries[i] = [li, ri, vali]`.

Each `queries[i]` represents the following action on `nums`:

- Decrement the value at each index in the range `[li, ri]` in `nums` by **at most** `vali`.
- The amount by which each value is decremented can be chosen **independently** for each index.

A **Zero Array** is an array with all its elements equal to 0.

Return the **minimum** possible **non-negative** value of `k`, such that after
processing the first `k` queries in **sequence** , `nums` becomes a **Zero
Array**. If no such `k` exists, return -1.

**Example 1:**

**Input:** nums = [2,0,2], queries = [[0,2,1],[0,2,1],[1,1,3]]

**Output:** 2

**Explanation:**

- **For i = 0 (l = 0, r = 2, val = 1):**

  - Decrement values at indices `[0, 1, 2]` by `[1, 0, 1]` respectively.

  - The array will become `[1, 0, 1]`.

- **For i = 1 (l = 0, r = 2, val = 1):**

  - Decrement values at indices `[0, 1, 2]` by `[1, 0, 1]` respectively.

  - The array will become `[0, 0, 0]`, which is a Zero Array. Therefore, the minimum value of `k` is 2.

**Example 2:**

**Input:** nums = [4,3,2,1], queries = [[1,3,2],[0,2,1]]

**Output:** -1

**Explanation:**

- **For i = 0 (l = 1, r = 3, val = 2):**

  - Decrement values at indices `[1, 2, 3]` by `[2, 2, 1]` respectively.
  - The array will become `[4, 1, 0, 0]`.

- **For i = 1 (l = 0, r = 2, val = 1):**

  - Decrement values at indices `[0, 1, 2]` by `[1, 1, 0]` respectively.
  - The array will become `[3, 0, 0, 0]`, which is not a Zero Array.

**Constraints:**

- `1 <= nums.length <= 10^5`
- `0 <= nums[i] <= 5 * 10^5`
- `1 <= queries.length <= 10^5`
- `queries[i].length == 3`
- `0 <= li <= ri < nums.length`
- `1 <= vali <= 5`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªäºŒç»´æ•°ç»„ `queries`ï¼Œå…¶ä¸­ `queries[i] = [li, ri, vali]`ã€‚

æ¯ä¸ª `queries[i]` è¡¨ç¤ºåœ¨ `nums` ä¸Šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

- å°† `nums` ä¸­ `[li, ri]` èŒƒå›´å†…çš„æ¯ä¸ªä¸‹æ ‡å¯¹åº”å…ƒç´ çš„å€¼ **æœ€å¤š** å‡å°‘ `vali`ã€‚
- æ¯ä¸ªä¸‹æ ‡çš„å‡å°‘çš„æ•°å€¼å¯ä»¥ **ç‹¬ç«‹** é€‰æ‹©ã€‚

**é›¶æ•°ç»„** æ˜¯æŒ‡æ‰€æœ‰å…ƒç´ éƒ½ç­‰äº 0 çš„æ•°ç»„ã€‚

è¿”å› `k` å¯ä»¥å–åˆ°çš„ **æœ€å°** **éè´Ÿ** å€¼ï¼Œä½¿å¾—åœ¨ **é¡ºåº** å¤„ç†å‰ `k` ä¸ªæŸ¥è¯¢åï¼Œ`nums` å˜æˆ **é›¶æ•°ç»„**
ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ `k`ï¼Œåˆ™è¿”å› -1ã€‚

**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** nums = [2,0,2], queries = [[0,2,1],[0,2,1],[1,1,3]]

**è¾“å‡ºï¼š** 2

**è§£é‡Šï¼š**

- **å¯¹äº i = 0ï¼ˆl = 0, r = 2, val = 1ï¼‰ï¼š**

  - åœ¨ä¸‹æ ‡ `[0, 1, 2]` å¤„åˆ†åˆ«å‡å°‘ `[1, 0, 1]`ã€‚

  - æ•°ç»„å°†å˜ä¸º `[1, 0, 1]`ã€‚

- **å¯¹äº i = 1ï¼ˆl = 0, r = 2, val = 1ï¼‰ï¼š**

  - åœ¨ä¸‹æ ‡ `[0, 1, 2]` å¤„åˆ†åˆ«å‡å°‘ `[1, 0, 1]`ã€‚

  - æ•°ç»„å°†å˜ä¸º `[0, 0, 0]`ï¼Œè¿™æ˜¯ä¸€ä¸ªé›¶æ•°ç»„ã€‚å› æ­¤ï¼Œ`k` çš„æœ€å°å€¼ä¸º 2ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** nums = [4,3,2,1], queries = [[1,3,2],[0,2,1]]

**è¾“å‡ºï¼š** -1

**è§£é‡Šï¼š**

- **å¯¹äº i = 0ï¼ˆl = 1, r = 3, val = 2ï¼‰ï¼š**

  - åœ¨ä¸‹æ ‡ `[1, 2, 3]` å¤„åˆ†åˆ«å‡å°‘ `[2, 2, 1]`ã€‚

  - æ•°ç»„å°†å˜ä¸º `[4, 1, 0, 0]`ã€‚

- **å¯¹äº i = 1ï¼ˆl = 0, r = 2, val = 1ï¼‰ï¼š**

  - åœ¨ä¸‹æ ‡ `[0, 1, 2]` å¤„åˆ†åˆ«å‡å°‘ `[1, 1, 0]`ã€‚

  - æ•°ç»„å°†å˜ä¸º `[3, 0, 0, 0]`ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªé›¶æ•°ç»„ã€‚

**æç¤ºï¼š**

- `1 <= nums.length <= 10^5`
- `0 <= nums[i] <= 5 * 10^5`
- `1 <= queries.length <= 10^5`
- `queries[i].length == 3`
- `0 <= li <= ri < nums.length`
- `1 <= vali <= 5`

## è§£é¢˜æ€è·¯

ç”±äºæŸ¥è¯¢æ“ä½œæ˜¯ç´¯ç§¯çš„ï¼Œæ¯ä¸ª `queries[i]` åªèƒ½å‡å°‘ `nums` çš„å€¼ï¼Œå› æ­¤ï¼š

- **å¦‚æœ `k` èƒ½ä½¿ `nums` å…¨éƒ¨å˜æˆ 0**ï¼Œé‚£ä¹ˆæ›´å¤§çš„ `k' > k` ä¹Ÿä¸€å®šå¯ä»¥ã€‚
- **å¦‚æœ `k` ä¸èƒ½ä½¿ `nums` å…¨ 0**ï¼Œé‚£ä¹ˆæ›´å°çš„ `k' < k` ä¹Ÿä¸è¡Œã€‚

å¯ä»¥ **äºŒåˆ† `k`** æ¥æ‰¾åˆ°æœ€å°çš„ `k`ã€‚

1. **åˆ¤æ–­æ˜¯å¦èƒ½ä½¿ `nums` å…¨éƒ¨å˜ 0ï¼ˆ`canMakeZero(k)`ï¼‰**

   ä½¿ç”¨**å·®åˆ†æ•°ç»„**åŠ é€ŸåŒºé—´ä¿®æ”¹ï¼š

   - **åˆå§‹åŒ– `prefixSum`**ï¼Œå¤§å° `n + 1`ï¼Œç”¨äºè®°å½•å¢å‡æ“ä½œã€‚
   - **éå† `queries[0:k]`**ï¼š
     - å¯¹ `prefixSum[l]` åŠ  `val`ï¼ˆåŒºé—´å¢åŠ  `val`ï¼‰ã€‚
     - å¯¹ `prefixSum[r+1]` å‡ `val`ï¼ˆåŒºé—´ç»“æŸï¼ŒæŠµæ¶ˆä¹‹å‰çš„ `val`ï¼‰ã€‚
   - **è®¡ç®—å‰ç¼€å’Œ**ï¼š
     - `sum[i]` è®°å½•å½“å‰å…ƒç´  `nums[i]` ç´¯ç§¯çš„ `val` å˜åŒ–ã€‚
     - è‹¥ `nums[i] - sum[i] > 0`ï¼Œè¯´æ˜ `nums[i]` ä»ç„¶æ˜¯æ­£æ•°ï¼Œä¸å¯èƒ½å…¨éƒ¨å˜ 0ï¼Œè¿”å› `false`ã€‚
   - è‹¥ `nums` éƒ½èƒ½å˜æˆ 0ï¼Œè¿”å› `true`ã€‚

2. **äºŒåˆ†æŸ¥æ‰¾ `k`**

   - **`left = 0, right = m`**ï¼Œæœç´¢ `0 â‰¤ k â‰¤ m`ã€‚
   - å–ä¸­ç‚¹ `mid = (left + right) / 2`ï¼š
     - è‹¥ `canMakeZero(mid)` ä¸º `true`ï¼Œè¯´æ˜å¯ä»¥ç”¨æ›´å°çš„ `k`ï¼Œç¼©å° `right`ã€‚
     - å¦åˆ™ `k` å¤ªå°äº†ï¼Œéœ€è¦å¢å¤§ï¼Œè°ƒæ•´ `left`ã€‚
   - ç»“æŸæ—¶ï¼Œè¿”å› `left`ï¼Œè‹¥ `left > m`ï¼Œåˆ™è¿”å› `-1`ï¼ˆæ— æ³•ä½¿ `nums` å˜ 0ï¼‰ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O((n + m) log m)`ï¼Œå…¶ä¸­ `n = nums.length`ï¼Œ`m = queries.length`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œç”¨äº `prefixSum`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @param {number[][]} queries
 * @return {number}
 */
var minZeroArray = function (nums, queries) {
	const n = nums.length;
	const m = queries.length;
	const canMakeZero = (k) => {
		let prefixSum = new Array(n + 1).fill(0);

		for (let i = 0; i < k; i++) {
			const [l, r, val] = queries[i];
			prefixSum[l] += val;
			prefixSum[r + 1] -= val;
		}

		let sum = 0;
		for (let i = 0; i < n; i++) {
			sum += prefixSum[i];
			if (nums[i] - sum > 0) {
				return false;
			}
		}
		return true;
	};

	let left = 0,
		right = m;
	while (left <= right) {
		const mid = ((left + right) / 2) | 0;
		if (canMakeZero(mid)) {
			right = mid - 1;
		} else {
			left = mid + 1;
		}
	}
	return left > m ? -1 : left;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1109 | èˆªç­é¢„è®¢ç»Ÿè®¡ |  |  [`æ•°ç»„`](/tag/array.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/corporate-flight-bookings) [ğŸ”—](https://leetcode.com/problems/corporate-flight-bookings) |
| 1674 | ä½¿æ•°ç»„äº’è¡¥çš„æœ€å°‘æ“ä½œæ¬¡æ•° |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/minimum-moves-to-make-array-complementary) [ğŸ”—](https://leetcode.com/problems/minimum-moves-to-make-array-complementary) |