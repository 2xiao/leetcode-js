---
title: 1475. å•†å“æŠ˜æ‰£åçš„æœ€ç»ˆä»·æ ¼
description: LeetCode 1475. å•†å“æŠ˜æ‰£åçš„æœ€ç»ˆä»·æ ¼é¢˜è§£ï¼ŒFinal Prices With a Special Discount in a Shopï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1475. å•†å“æŠ˜æ‰£åçš„æœ€ç»ˆä»·æ ¼
  - å•†å“æŠ˜æ‰£åçš„æœ€ç»ˆä»·æ ¼
  - Final Prices With a Special Discount in a Shop
  - è§£é¢˜æ€è·¯
  - æ ˆ
  - æ•°ç»„
  - å•è°ƒæ ˆ
---

# 1475. å•†å“æŠ˜æ‰£åçš„æœ€ç»ˆä»·æ ¼

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`æ•°ç»„`](/tag/array.md) [`å•è°ƒæ ˆ`](/tag/monotonic-stack.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/final-prices-with-a-special-discount-in-a-shop) [`LeetCode`](https://leetcode.com/problems/final-prices-with-a-special-discount-in-a-shop)

## é¢˜ç›®

You are given an integer array `prices` where `prices[i]` is the price of the
`ith` item in a shop.

There is a special discount for items in the shop. If you buy the `ith` item,
then you will receive a discount equivalent to `prices[j]` where `j` is the
minimum index such that `j > i` and `prices[j] <= prices[i]`. Otherwise, you
will not receive any discount at all.

Return an integer array `answer` where `answer[i]` is the final price you will
pay for the `ith` item of the shop, considering the special discount.

**Example 1:**

> Input: prices = [8,4,6,2,3]
>
> Output: [4,2,4,2,3]
>
> Explanation:
>
> For item 0 with price[0]=8 you will receive a discount equivalent to prices[1]=4, therefore, the final price you will pay is 8 - 4 = 4.
>
> For item 1 with price[1]=4 you will receive a discount equivalent to prices[3]=2, therefore, the final price you will pay is 4 - 2 = 2.
>
> For item 2 with price[2]=6 you will receive a discount equivalent to prices[3]=2, therefore, the final price you will pay is 6 - 2 = 4.
>
> For items 3 and 4 you will not receive any discount at all.

**Example 2:**

> Input: prices = [1,2,3,4,5]
>
> Output: [1,2,3,4,5]
>
> Explanation: In this case, for all items, you will not receive any discount at all.

**Example 3:**

> Input: prices = [10,1,1,6]
>
> Output: [9,0,1,6]

**Constraints:**

- `1 <= prices.length <= 500`
- `1 <= prices[i] <= 1000`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•°ç»„ `prices` ï¼Œå…¶ä¸­ `prices[i]` æ˜¯å•†åº—é‡Œç¬¬ `i` ä»¶å•†å“çš„ä»·æ ¼ã€‚

å•†åº—é‡Œæ­£åœ¨è¿›è¡Œä¿ƒé”€æ´»åŠ¨ï¼Œå¦‚æœä½ è¦ä¹°ç¬¬ i ä»¶å•†å“ï¼Œé‚£ä¹ˆä½ å¯ä»¥å¾—åˆ°ä¸ `prices[j] `ç›¸ç­‰çš„æŠ˜æ‰£ï¼Œå…¶ä¸­ `j` æ˜¯æ»¡è¶³ `j > `i ä¸” `prices[j] <= prices[i]` çš„ æœ€å°ä¸‹æ ‡ ï¼Œå¦‚æœæ²¡æœ‰æ»¡è¶³æ¡ä»¶çš„ `j` ï¼Œä½ å°†æ²¡æœ‰ä»»ä½•æŠ˜æ‰£ã€‚

è¯·ä½ è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­ç¬¬ `i` ä¸ªå…ƒç´ æ˜¯æŠ˜æ‰£åä½ è´­ä¹°å•†å“ `i` æœ€ç»ˆéœ€è¦æ”¯ä»˜çš„ä»·æ ¼ã€‚

## è§£é¢˜æ€è·¯

å¯ä»¥é€šè¿‡ **å•è°ƒæ ˆ** çš„æ–¹æ³•é«˜æ•ˆè§£å†³è¿™é“é¢˜ã€‚

- ä½¿ç”¨ä¸€ä¸ªæ ˆå­˜å‚¨å…ƒç´ çš„ç´¢å¼•ï¼Œç¡®ä¿æ ˆå†…çš„ä»·æ ¼å€¼æŒ‰ **é€’å¢é¡ºåº** æ’åˆ—ã€‚
- æ¯æ¬¡é‡åˆ°ä¸€ä¸ªæ–°å…ƒç´ æ—¶ï¼Œæ£€æŸ¥æ ˆé¡¶å…ƒç´ æ˜¯å¦å¤§äºç­‰äºå½“å‰å€¼ã€‚å¦‚æœæ˜¯ï¼Œå°±å¼¹å‡ºæ ˆé¡¶å…ƒç´ å¹¶æ›´æ–°å¯¹åº”ä½ç½®çš„ä»·æ ¼ã€‚
- å¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œå°è¯•æ‰¾åˆ°å³ä¾§ç¬¬ä¸€ä¸ªå°äºç­‰äºå®ƒçš„å…ƒç´ ã€‚å¦‚æœæ‰¾åˆ°ï¼Œåˆ™æ›´æ–°ä»·æ ¼ï¼›å¦‚æœæ‰¾ä¸åˆ°ï¼Œä¿æŒåŸå€¼ã€‚

1. **åˆå§‹åŒ–æ ˆ**ï¼šæ ˆ `stack` ç”¨æ¥å­˜å‚¨ä»·æ ¼çš„ç´¢å¼•ã€‚

2. **éå†æ•°ç»„**ï¼š

   - éå† `prices` æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚
   - å½“æ ˆä¸ä¸ºç©ºä¸”å½“å‰ä»·æ ¼å°äºç­‰äºæ ˆé¡¶å¯¹åº”çš„ä»·æ ¼æ—¶ï¼š
     - å¼¹å‡ºæ ˆé¡¶ç´¢å¼• `top`ã€‚
     - æ›´æ–° `prices[top] = prices[top] - prices[i]`ã€‚
   - å°†å½“å‰ç´¢å¼•å‹å…¥æ ˆä¸­ã€‚

3. **è¿”å›ç»“æœ**ï¼šéå†å®Œæˆåï¼Œ`prices` æ•°ç»„å·²ç»è¢«ä¿®æ”¹ï¼Œç›´æ¥è¿”å›å³å¯ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯ `prices` çš„é•¿åº¦ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šè¿›æ ˆä¸€æ¬¡ï¼Œå‡ºæ ˆä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œæœ€åæƒ…å†µä¸‹æ ˆä¸­å­˜å‚¨æ‰€æœ‰çš„å…ƒç´ ç´¢å¼•ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} prices
 * @return {number[]}
 */
var finalPrices = function (prices) {
	let stack = []; // å•è°ƒæ ˆ
	for (let i = 0; i < prices.length; i++) {
		// æ£€æŸ¥æ ˆé¡¶å…ƒç´ æ˜¯å¦å¤§äºç­‰äºå½“å‰ä»·æ ¼
		while (stack.length > 0 && prices[stack[stack.length - 1]] >= prices[i]) {
			// æ›´æ–°æ ˆé¡¶ç´¢å¼•å¯¹åº”çš„ä»·æ ¼
			prices[stack.pop()] -= prices[i];
		}
		// å½“å‰ç´¢å¼•å…¥æ ˆ
		stack.push(i);
	}
	return prices;
};
```
