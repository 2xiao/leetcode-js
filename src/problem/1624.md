---
title: 1624. ä¸¤ä¸ªç›¸åŒå­—ç¬¦ä¹‹é—´çš„æœ€é•¿å­å­—ç¬¦ä¸²
description: LeetCode 1624. ä¸¤ä¸ªç›¸åŒå­—ç¬¦ä¹‹é—´çš„æœ€é•¿å­å­—ç¬¦ä¸²é¢˜è§£ï¼ŒLargest Substring Between Two Equal Charactersï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1624. ä¸¤ä¸ªç›¸åŒå­—ç¬¦ä¹‹é—´çš„æœ€é•¿å­å­—ç¬¦ä¸²
  - ä¸¤ä¸ªç›¸åŒå­—ç¬¦ä¹‹é—´çš„æœ€é•¿å­å­—ç¬¦ä¸²
  - Largest Substring Between Two Equal Characters
  - è§£é¢˜æ€è·¯
  - å“ˆå¸Œè¡¨
  - å­—ç¬¦ä¸²
---

# 1624. ä¸¤ä¸ªç›¸åŒå­—ç¬¦ä¹‹é—´çš„æœ€é•¿å­å­—ç¬¦ä¸²

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/largest-substring-between-two-equal-characters) [`LeetCode`](https://leetcode.com/problems/largest-substring-between-two-equal-characters)

## é¢˜ç›®

Given a string `s`, return _the length of the longest substring between two
equal characters, excluding the two characters._ If there is no such substring
return `-1`.

A **substring** is a contiguous sequence of characters within a string.

**Example 1:**

> Input: s = "aa"
>
> Output: 0
>
> Explanation: The optimal substring here is an empty substring between the two 'a's.

**Example 2:**

> Input: s = "abca"
>
> Output: 2
>
> Explanation: The optimal substring here is "bc".

**Example 3:**

> Input: s = "cbzxy"
>
> Output: -1
>
> Explanation: There are no characters that appear twice in s.

**Constraints:**

- `1 <= s.length <= 300`
- `s` contains only lowercase English letters.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œè¯·ä½ è¿”å› **ä¸¤ä¸ªç›¸åŒå­—ç¬¦ä¹‹é—´çš„æœ€é•¿å­å­—ç¬¦ä¸²çš„é•¿åº¦** ï¼Œè®¡ç®—é•¿åº¦æ—¶ä¸å«è¿™ä¸¤ä¸ªå­—ç¬¦ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å­å­—ç¬¦ä¸²ï¼Œè¿”å› `-1`ã€‚

**å­å­—ç¬¦ä¸²** æ˜¯å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªè¿ç»­å­—ç¬¦åºåˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** s = "aa"
>
> **è¾“å‡ºï¼š** 0
>
> **è§£é‡Šï¼š** æœ€ä¼˜çš„å­å­—ç¬¦ä¸²æ˜¯ä¸¤ä¸ª 'a' ä¹‹é—´çš„ç©ºå­å­—ç¬¦ä¸²ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = "abca"
>
> **è¾“å‡ºï¼š** 2
>
> **è§£é‡Šï¼š** æœ€ä¼˜çš„å­å­—ç¬¦ä¸²æ˜¯ "bc" ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** s = "cbzxy"
>
> **è¾“å‡ºï¼š** -1
>
> **è§£é‡Šï¼š** s ä¸­ä¸å­˜åœ¨å‡ºç°å‡ºç°ä¸¤æ¬¡çš„å­—ç¬¦ï¼Œæ‰€ä»¥è¿”å› -1 ã€‚

**ç¤ºä¾‹ 4ï¼š**

> **è¾“å…¥ï¼š** s = "cabbac"
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** æœ€ä¼˜çš„å­å­—ç¬¦ä¸²æ˜¯ "abba" ï¼Œå…¶ä»–çš„éæœ€ä¼˜è§£åŒ…æ‹¬ "bb" å’Œ "" ã€‚

**æç¤ºï¼š**

- `1 <= s.length <= 300`
- `s` åªå«å°å†™è‹±æ–‡å­—æ¯

## è§£é¢˜æ€è·¯

1. **å®šä¹‰çŠ¶æ€å­˜å‚¨ç¬¬ä¸€ä¸ªå‡ºç°ä½ç½®**ï¼š

   - ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º `26` çš„æ•°ç»„ `firstIndex` æ¥è®°å½•æ¯ä¸ªå­—ç¬¦çš„é¦–æ¬¡å‡ºç°ç´¢å¼•ã€‚
   - åˆå§‹åŒ–æ•°ç»„çš„æ‰€æœ‰å€¼ä¸º `n`ï¼Œå³æ•°ç»„é•¿åº¦ï¼Œè¿™è¡¨ç¤ºè¯¥å­—ç¬¦å°šæœªå‡ºç°åœ¨å­—ç¬¦ä¸²ä¸­ã€‚
   - å®šä¹‰å˜é‡ `longest` æ¥è®°å½•ä¸¤ä¸ªç›¸åŒå­—ç¬¦ä¹‹é—´çš„æœ€é•¿å­å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆå§‹åŒ–ä¸º `-1`ï¼Œå³æ— ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ï¼›

2. **éå†å­—ç¬¦ä¸²**ï¼š

   - å¯¹äºæ¯ä¸ªå­—ç¬¦ `s[i]`ï¼š
     - è®¡ç®—å…¶åœ¨ `firstIndex` ä¸­å¯¹åº”çš„ç´¢å¼• `code`ï¼Œå…¬å¼ä¸ºï¼š
       `s[i].charCodeAt() - 97`
     - å¦‚æœ `firstIndex[code]` ä¸ºåˆå§‹å€¼ `n`ï¼Œè¯´æ˜è¿™æ˜¯è¯¥å­—ç¬¦çš„é¦–æ¬¡å‡ºç°ï¼Œè®°å½•å…¶ç´¢å¼•ï¼š
       `firstIndex[code] = i`
     - å¦åˆ™ï¼Œè¯¥å­—ç¬¦å·²å‡ºç°è¿‡ï¼Œè®¡ç®—å½“å‰ç´¢å¼•å’Œé¦–æ¬¡ç´¢å¼•çš„é—´éš”é•¿åº¦ï¼Œå¹¶å°è¯•æ›´æ–°æœ€é•¿é—´éš”ï¼š
       `longest = Math.max(longest, i - firstIndex[code] - 1)`

3. æœ€åè¿”å› `longest`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œåªéœ€éå†å­—ç¬¦ä¸²ä¸€æ¬¡ï¼Œæ¯æ¬¡æ“ä½œä¸ºå¸¸æ•°æ—¶é—´ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä½¿ç”¨äº†å›ºå®šå¤§å°çš„æ•°ç»„ `firstIndex`ï¼Œå¤§å°ä¸º `26`ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var maxLengthBetweenEqualCharacters = function (s) {
	const n = s.length;
	let firstIndex = new Array(26).fill(n); // åˆå§‹åŒ–ä¸º nï¼Œè¡¨ç¤ºå­—ç¬¦å°šæœªå‡ºç°
	let longest = -1; // åˆå§‹åŒ–ä¸º -1ï¼Œè¡¨ç¤ºå°šæœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦

	for (let i = 0; i < n; i++) {
		const code = s[i].charCodeAt() - 97; // è®¡ç®—å­—ç¬¦çš„æ•°ç»„ç´¢å¼•
		if (firstIndex[code] === n) {
			// é¦–æ¬¡å‡ºç°
			firstIndex[code] = i;
		} else {
			// å·²å‡ºç°è¿‡ï¼Œè®¡ç®—é—´éš”å¹¶æ›´æ–°æœ€é•¿è·ç¦»
			longest = Math.max(longest, i - firstIndex[code] - 1);
		}
	}
	return longest;
};
```
