---
title: 236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ
description: LeetCode,236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ,äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ,Lowest Common Ancestor of a Binary Tree,è§£é¢˜æ€è·¯,æ ‘,æ·±åº¦ä¼˜å…ˆæœç´¢,äºŒå‰æ ‘
keywords:
  - LeetCode
  - 236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ
  - äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ
  - Lowest Common Ancestor of a Binary Tree
  - è§£é¢˜æ€è·¯
  - æ ‘
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - äºŒå‰æ ‘
---

# 236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree) [`LeetCode`](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree)

## é¢˜ç›®

Given a binary tree, find the lowest common ancestor (LCA) of two given nodes
in the tree.

According to the [definition of LCA on
Wikipedia](https://en.wikipedia.org/wiki/Lowest_common_ancestor): "The lowest
common ancestor is defined between two nodes `p` and `q` as the lowest node in
`T` that has both `p` and `q` as descendants (where we allow **a node to be a descendant of itself** )."

**Example 1:**

![](https://assets.leetcode.com/uploads/2018/12/14/binarytree.png)

> Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1
>
> Output: 3
>
> Explanation: The LCA of nodes 5 and 1 is 3.

**Example 2:**

![](https://assets.leetcode.com/uploads/2018/12/14/binarytree.png)

> Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4
>
> Output: 5
>
> Explanation: The LCA of nodes 5 and 4 is 5, since a node can be a descendant of itself according to the LCA definition.

**Example 3:**

> Input: root = [1,2], p = 1, q = 2
>
> Output: 1

**Constraints:**

- The number of nodes in the tree is in the range `[2, 10^5]`.
- `-10^9 <= Node.val <= 10^9`
- All `Node.val` are **unique**.
- `p != q`
- `p` and `q` will exist in the tree.

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚

ç»´åŸºç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªç»“ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªç»“ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€

## è§£é¢˜æ€è·¯

è¿™æ˜¯ä¸€é“ç»å…¸çš„é¢˜ç›®ï¼Œå¯»æ‰¾ä»»æ„ä¸€ä¸ªäºŒå‰æ ‘ä¸­ä¸¤ä¸ªç»“ç‚¹çš„ LCA æœ€è¿‘å…¬å…±ç¥–å…ˆï¼Œè€ƒå¯Ÿé€’å½’ã€‚

ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œé€’å½’åœ°å‘å·¦å­æ ‘å’Œå³å­æ ‘æœç´¢ã€‚é€’å½’çš„ç»ˆæ­¢æ¡ä»¶æœ‰å‡ ç§æƒ…å†µï¼š

1. å¦‚æœå½“å‰èŠ‚ç‚¹ä¸º `null`ï¼Œè¡¨ç¤ºéå†åˆ°ç©ºèŠ‚ç‚¹ï¼Œç›´æ¥è¿”å› `null`ã€‚
2. å¦‚æœå½“å‰èŠ‚ç‚¹ç­‰äº `p` æˆ– `q`ï¼Œè¡¨ç¤ºæ‰¾åˆ°äº†å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›å½“å‰èŠ‚ç‚¹ã€‚

é€’å½’æ­¥éª¤å¦‚ä¸‹ï¼š

1. é€’å½’åœ°åœ¨å·¦å­æ ‘ä¸­å¯»æ‰¾ `p` å’Œ `q` çš„æœ€ä½å…±åŒç¥–å…ˆï¼Œç»“æœå­˜å‚¨åœ¨å˜é‡ `left` ä¸­ã€‚
2. é€’å½’åœ°åœ¨å³å­æ ‘ä¸­å¯»æ‰¾ `p` å’Œ `q` çš„æœ€ä½å…±åŒç¥–å…ˆï¼Œç»“æœå­˜å‚¨åœ¨å˜é‡ `right` ä¸­ã€‚

ç„¶åï¼Œæ ¹æ® `left` å’Œ `right` çš„æƒ…å†µï¼Œå¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š

- å¦‚æœ `left` å’Œ `right` éƒ½ä¸ä¸º `null`ï¼Œè¯´æ˜ `p` å’Œ `q` åˆ†åˆ«ä½äºå½“å‰èŠ‚ç‚¹çš„å·¦å³å­æ ‘ï¼Œå› æ­¤å½“å‰èŠ‚ç‚¹å°±æ˜¯å®ƒä»¬çš„æœ€ä½å…±åŒç¥–å…ˆï¼Œç›´æ¥è¿”å›å½“å‰èŠ‚ç‚¹ã€‚
- å¦‚æœåªæœ‰ `left` ä¸ä¸º `null`ï¼Œè¯´æ˜ `p` å’Œ `q` éƒ½åœ¨å·¦å­æ ‘ï¼Œæœ€ä½å…±åŒç¥–å…ˆåœ¨å·¦å­æ ‘ä¸­ï¼Œè¿”å› `left`ã€‚
- å¦‚æœåªæœ‰ `right` ä¸ä¸º `null`ï¼Œè¯´æ˜ `p` å’Œ `q` éƒ½åœ¨å³å­æ ‘ï¼Œæœ€ä½å…±åŒç¥–å…ˆåœ¨å³å­æ ‘ä¸­ï¼Œè¿”å› `right`ã€‚

é€’å½’æ³•çš„å…³é”®åœ¨äºå°†å¤§é—®é¢˜åˆ’åˆ†ä¸ºè§„æ¨¡è¾ƒå°çš„å­é—®é¢˜ï¼Œç„¶åé€šè¿‡é€’å½’è°ƒç”¨æ¥è§£å†³å­é—®é¢˜ï¼Œæœ€ç»ˆå¾—åˆ°æ•´ä½“çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨è¿™é‡Œï¼Œé€’å½’è°ƒç”¨çš„å­é—®é¢˜æ˜¯åœ¨å·¦å³å­æ ‘ä¸­å¯»æ‰¾ `p` å’Œ `q` çš„æœ€ä½å…±åŒç¥–å…ˆã€‚

é€’å½’æ³•çš„ä¼˜ç‚¹åœ¨äºå…¶ç®€æ´æ€§å’Œç›´è§‚æ€§ï¼Œä½†éœ€è¦æ³¨æ„é¿å…é‡å¤è®¡ç®—ï¼Œä»¥æé«˜æ€§èƒ½ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ ‘ä¸­èŠ‚ç‚¹çš„æ€»æ•°ï¼Œå› ä¸ºåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œéœ€è¦æ£€æŸ¥æ¯ä¸ªèŠ‚ç‚¹æ¥æ‰¾åˆ°æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(h)`ï¼Œå…¶ä¸­ `h` æ˜¯æ ‘çš„é«˜åº¦ï¼Œç©ºé—´å¤æ‚åº¦ä¸»è¦ç”±é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦å†³å®šã€‚
  - åœ¨å¹³è¡¡æ ‘ä¸­ï¼Œé€’å½’æ·±åº¦ä¸º `O(h)`ï¼Œå…¶ä¸­ `h` æ˜¯æ ‘çš„é«˜åº¦ã€‚
  - åœ¨æœ€åæƒ…å†µä¸‹ï¼ˆä¾‹å¦‚ï¼Œæ ‘æ˜¯å®Œå…¨ä¸å¹³è¡¡çš„ï¼‰ï¼Œé€’å½’çš„æ·±åº¦å¯ä»¥è¾¾åˆ° `O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ ‘ä¸­èŠ‚ç‚¹çš„æ€»æ•°ã€‚

## ä»£ç 

```javascript
/**
 * @param {TreeNode} root
 * @param {TreeNode} p
 * @param {TreeNode} q
 * @return {TreeNode}
 */
var lowestCommonAncestor = function (root, p, q) {
	if (!root || root == p || root == q) return root;

	let left = lowestCommonAncestor(root.left, p, q);
	let right = lowestCommonAncestor(root.right, p, q);

	if (left && right) return root;
	return left ? left : right;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 235 | äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ | [[âœ“]](/problem/0235.md) |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æœç´¢æ ‘`](/tag/binary-search-tree.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-search-tree) [ğŸ”—](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree) |
| 1257 | æœ€å°å…¬å…±åŒºåŸŸ ğŸ”’ |  |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) `3+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/smallest-common-region) [ğŸ”—](https://leetcode.com/problems/smallest-common-region) |
| 1644 | äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ II ğŸ”’ |  |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree-ii) [ğŸ”—](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-ii) |
| 1650 | äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ III ğŸ”’ |  |  [`æ ‘`](/tag/tree.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree-iii) [ğŸ”—](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-iii) |
| 1676 | äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ IV ğŸ”’ |  |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree-iv) [ğŸ”—](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-iv) |
| 2096 | ä»äºŒå‰æ ‘ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹æ¯ä¸€æ­¥çš„æ–¹å‘ |  |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/step-by-step-directions-from-a-binary-tree-node-to-another) [ğŸ”—](https://leetcode.com/problems/step-by-step-directions-from-a-binary-tree-node-to-another) |
| 2225 | æ‰¾å‡ºè¾“æ‰é›¶åœºæˆ–ä¸€åœºæ¯”èµ›çš„ç©å®¶ |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`è®¡æ•°`](/tag/counting.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/find-players-with-zero-or-one-losses) [ğŸ”—](https://leetcode.com/problems/find-players-with-zero-or-one-losses) |
| 2509 | æŸ¥è¯¢æ ‘ä¸­ç¯çš„é•¿åº¦ |  |  [`æ ‘`](/tag/tree.md) [`æ•°ç»„`](/tag/array.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/cycle-length-queries-in-a-tree) [ğŸ”—](https://leetcode.com/problems/cycle-length-queries-in-a-tree) |