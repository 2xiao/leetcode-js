---
title: 1358. åŒ…å«æ‰€æœ‰ä¸‰ç§å­—ç¬¦çš„å­å­—ç¬¦ä¸²æ•°ç›®
description: LeetCode 1358. åŒ…å«æ‰€æœ‰ä¸‰ç§å­—ç¬¦çš„å­å­—ç¬¦ä¸²æ•°ç›®é¢˜è§£ï¼ŒNumber of Substrings Containing All Three Charactersï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1358. åŒ…å«æ‰€æœ‰ä¸‰ç§å­—ç¬¦çš„å­å­—ç¬¦ä¸²æ•°ç›®
  - åŒ…å«æ‰€æœ‰ä¸‰ç§å­—ç¬¦çš„å­å­—ç¬¦ä¸²æ•°ç›®
  - Number of Substrings Containing All Three Characters
  - è§£é¢˜æ€è·¯
  - å“ˆå¸Œè¡¨
  - å­—ç¬¦ä¸²
  - æ»‘åŠ¨çª—å£
---

# 1358. åŒ…å«æ‰€æœ‰ä¸‰ç§å­—ç¬¦çš„å­å­—ç¬¦ä¸²æ•°ç›®

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/number-of-substrings-containing-all-three-characters) [`LeetCode`](https://leetcode.com/problems/number-of-substrings-containing-all-three-characters)

## é¢˜ç›®

Given a string `s` consisting only of characters a , b and c.

Return the number of substrings containing **at least** one occurrence of all
these characters a , b and c.

**Example 1:**

> Input: s = "abcabc"
>
> Output: 10
>
> Explanation: The substrings containing at least one occurrence of the characters a , b and c are "abc" , "abca" , "abcab" , "abcabc" , "bca" , "bcab " , "bcabc" , "cab" , "cabc" and "abc" (**again**).

**Example 2:**

> Input: s = "aaacb"
>
> Output: 3
>
> Explanation: The substrings containing at least one occurrence of the characters a , b and c are "aaacb " , "aacb " and "acb ".

**Example 3:**

> Input: s = "abc"
>
> Output: 1

**Constraints:**

- `3 <= s.length <= 5 x 10^4`
- `s` only consists of a , b or c characters.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œå®ƒåªåŒ…å«ä¸‰ç§å­—ç¬¦ a, b å’Œ c ã€‚

è¯·ä½ è¿”å› aï¼Œb å’Œ c éƒ½ **è‡³å°‘ **å‡ºç°è¿‡ä¸€æ¬¡çš„å­å­—ç¬¦ä¸²æ•°ç›®ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** s = "abcabc"
>
> **è¾“å‡ºï¼š** 10
>
> **è§£é‡Šï¼š** åŒ…å« aï¼Œb å’Œ c å„è‡³å°‘ä¸€æ¬¡çš„å­å­—ç¬¦ä¸²ä¸º "abc " , "abca " , "abcab " , "abcabc " , "bca " , "bcab " , "bcabc " , "cab " , "cabc " å’Œ "abc " (**ç›¸åŒ**å­—ç¬¦ä¸²ç®—å¤šæ¬¡)ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = "aaacb"
>
> **è¾“å‡ºï¼š** 3
>
> **è§£é‡Šï¼š** åŒ…å« aï¼Œb å’Œ c å„è‡³å°‘ä¸€æ¬¡çš„å­å­—ç¬¦ä¸²ä¸º "aaacb " , "aacb " å’Œ "acb " ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** s = "abc"
>
> **è¾“å‡ºï¼š** 1

**æç¤ºï¼š**

- `3 <= s.length <= 5 x 10^4`
- `s` åªåŒ…å«å­—ç¬¦ aï¼Œb å’Œ c ã€‚

## è§£é¢˜æ€è·¯

1. ä½¿ç”¨ **æ»‘åŠ¨çª—å£** (`l` åˆ° `r`) éå† `s`ï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ª **å›ºå®šå¤§å°çš„æ•°ç»„ `count[3]` è®°å½•å½“å‰çª—å£å†… `a, b, c` å‡ºç°çš„æ¬¡æ•°**ã€‚

2. **å³è¾¹ç•Œæ‰©å±•çª—å£ (`r` ä» `0` åˆ° `n-1`)**

   - `count[s[r]]` è®¡æ•° +1ï¼Œè¡¨ç¤ºå­—ç¬¦ `s[r]` è¿›å…¥çª—å£ã€‚

3. **å·¦è¾¹ç•Œç¼©å°çª—å£ (`l++`)**

   - å½“ `count[0] > 0 && count[1] > 0 && count[2] > 0`ï¼ˆå³çª—å£å†…åŒ…å« `a, b, c`ï¼‰æ—¶ï¼š
   - `count[s[l]]` è®¡æ•° -1ï¼Œ`l++` ç§»åŠ¨å·¦è¾¹ç•Œã€‚

4. **ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„å­å­—ç¬¦ä¸²**

   - ç¼©å°å·¦è¾¹ç•Œç›´åˆ°çª—å£å†…ä¸å†åŒæ—¶åŒ…å« `a, b, c`ï¼Œæ­¤æ—¶ `l` ä»£è¡¨æœ‰å¤šå°‘ä¸ªå¯è¡Œçš„å­å­—ç¬¦ä¸²
   - `result += l`ï¼Œè®¡ç®—æ‰€æœ‰å¯èƒ½çš„å­å­—ç¬¦ä¸²ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œéå† `s`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªæ˜¯ç”¨äº†å¸¸æ•°ä¸ªå˜é‡ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var numberOfSubstrings = function (s) {
	let l = 0;
	let result = 0;
	let count = [0, 0, 0];
	for (let r = 0; r < s.length; r++) {
		count[s.charCodeAt(r) - 97]++;
		// åªæœ‰å½“ 'a', 'b', 'c' éƒ½å‡ºç°åï¼Œæ‰ç§»åŠ¨å·¦æŒ‡é’ˆ
		while (count[0] > 0 && count[1] > 0 && count[2] > 0) {
			count[s.charCodeAt(l) - 97]--;
			l++;
		}
		result += l;
	}
	return result;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 2063 | æ‰€æœ‰å­å­—ç¬¦ä¸²ä¸­çš„å…ƒéŸ³ |  |  [`æ•°å­¦`](/tag/math.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/vowels-of-all-substrings) [ğŸ”—](https://leetcode.com/problems/vowels-of-all-substrings) |
| 2953 | ç»Ÿè®¡å®Œå…¨å­å­—ç¬¦ä¸² |  |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/count-complete-substrings) [ğŸ”—](https://leetcode.com/problems/count-complete-substrings) |