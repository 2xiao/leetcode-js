# [2416. å­—ç¬¦ä¸²çš„å‰ç¼€åˆ†æ•°å’Œ](https://leetcode.com/problems/sum-of-prefix-scores-of-strings)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`è®¡æ•°`](/tag/counting.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/sum-of-prefix-scores-of-strings)

## é¢˜ç›®

<p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º <code>n</code> çš„æ•°ç»„ <code>words</code> ï¼Œè¯¥æ•°ç»„ç”± <strong>éç©º</strong> å­—ç¬¦ä¸²ç»„æˆã€‚</p>

<p>å®šä¹‰å­—ç¬¦ä¸² <code>term</code> çš„ <strong>åˆ†æ•°</strong> ç­‰äºä»¥ <code>term</code> ä½œä¸º <strong>å‰ç¼€</strong> çš„ <code>words[i]</code> çš„æ•°ç›®ã€‚</p>

<ul>
	<li>ä¾‹å¦‚ï¼Œå¦‚æœ <code>words = ["a", "ab", "abc", "cab"]</code> ï¼Œé‚£ä¹ˆ <code>"ab"</code> çš„åˆ†æ•°æ˜¯ <code>2</code> ï¼Œå› ä¸º <code>"ab"</code> æ˜¯ <code>"ab"</code> å’Œ <code>"abc"</code> çš„ä¸€ä¸ªå‰ç¼€ã€‚</li>
</ul>

<p>è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º<em> </em><code>n</code> çš„æ•°ç»„<em> </em><code>answer</code><em> </em>ï¼Œå…¶ä¸­<em> </em><code>answer[i]</code><em> </em>æ˜¯<em>&nbsp;</em><code>words[i]</code> çš„æ¯ä¸ªéç©ºå‰ç¼€çš„åˆ†æ•° <strong>æ€»å’Œ</strong> <em>ã€‚</em></p>

<p><strong>æ³¨æ„ï¼š</strong>å­—ç¬¦ä¸²è§†ä½œå®ƒè‡ªèº«çš„ä¸€ä¸ªå‰ç¼€ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>words = ["abc","ab","bc","b"]
<strong>è¾“å‡ºï¼š</strong>[5,4,3,2]
<strong>è§£é‡Šï¼š</strong>å¯¹åº”æ¯ä¸ªå­—ç¬¦ä¸²çš„ç­”æ¡ˆå¦‚ä¸‹ï¼š
- "abc" æœ‰ 3 ä¸ªå‰ç¼€ï¼š"a"ã€"ab" å’Œ "abc" ã€‚
- 2 ä¸ªå­—ç¬¦ä¸²çš„å‰ç¼€ä¸º "a" ï¼Œ2 ä¸ªå­—ç¬¦ä¸²çš„å‰ç¼€ä¸º "ab" ï¼Œ1 ä¸ªå­—ç¬¦ä¸²çš„å‰ç¼€ä¸º "abc" ã€‚
æ€»è®¡ answer[0] = 2 + 2 + 1 = 5 ã€‚
- "ab" æœ‰ 2 ä¸ªå‰ç¼€ï¼š"a" å’Œ "ab" ã€‚
- 2 ä¸ªå­—ç¬¦ä¸²çš„å‰ç¼€ä¸º "a" ï¼Œ2 ä¸ªå­—ç¬¦ä¸²çš„å‰ç¼€ä¸º "ab" ã€‚
æ€»è®¡ answer[1] = 2 + 2 = 4 ã€‚
- "bc" æœ‰ 2 ä¸ªå‰ç¼€ï¼š"b" å’Œ "bc" ã€‚
- 2 ä¸ªå­—ç¬¦ä¸²çš„å‰ç¼€ä¸º "b" ï¼Œ1 ä¸ªå­—ç¬¦ä¸²çš„å‰ç¼€ä¸º "bc" ã€‚ 
æ€»è®¡ answer[2] = 2 + 1 = 3 ã€‚
- "b" æœ‰ 1 ä¸ªå‰ç¼€ï¼š"b"ã€‚
- 2 ä¸ªå­—ç¬¦ä¸²çš„å‰ç¼€ä¸º "b" ã€‚
æ€»è®¡ answer[3] = 2 ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>words = ["abcd"]
<strong>è¾“å‡ºï¼š</strong>[4]
<strong>è§£é‡Šï¼š</strong>
"abcd" æœ‰ 4 ä¸ªå‰ç¼€ "a"ã€"ab"ã€"abc" å’Œ "abcd"ã€‚
æ¯ä¸ªå‰ç¼€çš„åˆ†æ•°éƒ½æ˜¯ 1 ï¼Œæ€»è®¡ answer[0] = 1 + 1 + 1 + 1 = 4 ã€‚
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= words.length &lt;= 1000</code></li>
	<li><code>1 &lt;= words[i].length &lt;= 1000</code></li>
	<li><code>words[i]</code> ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li>
</ul>


## è§£é¢˜æ€è·¯

å¯ä»¥ç”¨å­—å…¸æ ‘å­˜å‚¨æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œç”±äºæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å…¶å­æ ‘èŠ‚ç‚¹çš„å‰ç¼€ï¼Œé¢˜å¹²ä¸­çš„åˆ†æ•°å°±æ˜¯åœ¨å­—ç¬¦ä¸²æ’å…¥å­—å…¸æ ‘çš„è¿‡ç¨‹ä¸­ï¼Œç»è¿‡è¯¥èŠ‚ç‚¹çš„å­—ç¬¦ä¸²ä¸ªæ•°ï¼Œå³ä»¥è¯¥èŠ‚ç‚¹ä¸ºå‰ç¼€çš„å­—ç¬¦ä¸²çš„ä¸ªæ•°ã€‚

æ’å…¥åï¼Œå†æ¬¡éå†æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œåœ¨å­—å…¸æ ‘ä¸ŠæŸ¥æ‰¾ï¼Œç´¯åŠ è·¯å¾„ä¸Šçš„åˆ†æ•°ä¹‹å’Œå°±æ˜¯ç­”æ¡ˆã€‚

## ä»£ç 

```javascript
/**
 * @param {string[]} words
 * @return {number[]}
 */
var sumPrefixScores = function (words) {
	let map = {};
	for (let word of words) {
		let obj = map;
		for (let char of word) {
			if (!obj[char]) {
				obj[char] = {};
				obj[char].count = 0;
			}
			obj[char].count++;
			obj = obj[char];
		}
	}
	let res = [];
	for (let word of words) {
		let sum = 0,
			obj = map;
		for (let char of word) {
			sum += obj[char].count;
			obj = obj[char];
		}
		res.push(sum);
	}
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 211 | [æ·»åŠ ä¸æœç´¢å•è¯ - æ•°æ®ç»“æ„è®¾è®¡](https://leetcode.com/problems/design-add-and-search-words-data-structure) | [[âœ“]](/problem/0211.md) |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`è®¾è®¡`](/tag/design.md) [`å­—å…¸æ ‘`](/tag/trie.md) `1+` | <font color=#ffb800>Medium</font> |
| 421 | [æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„æœ€å¤§å¼‚æˆ–å€¼](https://leetcode.com/problems/maximum-xor-of-two-numbers-in-an-array) |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) `1+` | <font color=#ffb800>Medium</font> |
| 677 | [é”®å€¼æ˜ å°„](https://leetcode.com/problems/map-sum-pairs) |  |  [`è®¾è®¡`](/tag/design.md) [`å­—å…¸æ ‘`](/tag/trie.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) `1+` | <font color=#ffb800>Medium</font> |