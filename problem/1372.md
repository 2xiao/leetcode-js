---
title: 1372. äºŒå‰æ ‘ä¸­çš„æœ€é•¿äº¤é”™è·¯å¾„
description: LeetCode 1372. äºŒå‰æ ‘ä¸­çš„æœ€é•¿äº¤é”™è·¯å¾„é¢˜è§£ï¼ŒLongest ZigZag Path in a Binary Treeï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1372. äºŒå‰æ ‘ä¸­çš„æœ€é•¿äº¤é”™è·¯å¾„
  - äºŒå‰æ ‘ä¸­çš„æœ€é•¿äº¤é”™è·¯å¾„
  - Longest ZigZag Path in a Binary Tree
  - è§£é¢˜æ€è·¯
  - æ ‘
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - åŠ¨æ€è§„åˆ’
  - äºŒå‰æ ‘
---

# 1372. äºŒå‰æ ‘ä¸­çš„æœ€é•¿äº¤é”™è·¯å¾„

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/longest-zigzag-path-in-a-binary-tree) [`LeetCode`](https://leetcode.com/problems/longest-zigzag-path-in-a-binary-tree)

## é¢˜ç›®

You are given the `root` of a binary tree.

A ZigZag path for a binary tree is defined as follow:

- Choose **any** node in the binary tree and a direction (right or left).
- If the current direction is right, move to the right child of the current node; otherwise, move to the left child.
- Change the direction from right to left or from left to right.
- Repeat the second and third steps until you can't move in the tree.

Zigzag length is defined as the number of nodes visited - 1. (A single node
has a length of 0).

Return _the longest**ZigZag** path contained in that tree_.

**Example 1:**

![](https://assets.leetcode.com/uploads/2020/01/22/sample_1_1702.png)

> Input: root = [1,null,1,1,1,null,null,1,1,null,1,null,null,null,1]
>
> Output: 3
>
> Explanation: Longest ZigZag path in blue nodes (right -> left -> right).

**Example 2:**

![](https://assets.leetcode.com/uploads/2020/01/22/sample_2_1702.png)

> Input: root = [1,1,1,null,1,null,null,1,1,null,1]
>
> Output: 4
>
> Explanation: Longest ZigZag path in blue nodes (left -> right -> left -> right).

**Example 3:**

> Input: root = [1]
>
> Output: 0

**Constraints:**

- The number of nodes in the tree is in the range `[1, 5 * 104]`.
- `1 <= Node.val <= 100`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€æ£µä»¥ `root` ä¸ºæ ¹çš„äºŒå‰æ ‘ï¼ŒäºŒå‰æ ‘ä¸­çš„äº¤é”™è·¯å¾„å®šä¹‰å¦‚ä¸‹ï¼š

- é€‰æ‹©äºŒå‰æ ‘ä¸­ **ä»»æ„** èŠ‚ç‚¹å’Œä¸€ä¸ªæ–¹å‘ï¼ˆå·¦æˆ–è€…å³ï¼‰ã€‚
- å¦‚æœå‰è¿›æ–¹å‘ä¸ºå³ï¼Œé‚£ä¹ˆç§»åŠ¨åˆ°å½“å‰èŠ‚ç‚¹çš„çš„å³å­èŠ‚ç‚¹ï¼Œå¦åˆ™ç§»åŠ¨åˆ°å®ƒçš„å·¦å­èŠ‚ç‚¹ã€‚
- æ”¹å˜å‰è¿›æ–¹å‘ï¼šå·¦å˜å³æˆ–è€…å³å˜å·¦ã€‚
- é‡å¤ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥ï¼Œç›´åˆ°ä½ åœ¨æ ‘ä¸­æ— æ³•ç»§ç»­ç§»åŠ¨ã€‚

äº¤é”™è·¯å¾„çš„é•¿åº¦å®šä¹‰ä¸ºï¼š**è®¿é—®è¿‡çš„èŠ‚ç‚¹æ•°ç›® - 1** ï¼ˆå•ä¸ªèŠ‚ç‚¹çš„è·¯å¾„é•¿åº¦ä¸º 0 ï¼‰ã€‚

è¯·ä½ è¿”å›ç»™å®šæ ‘ä¸­æœ€é•¿ **äº¤é”™è·¯å¾„** çš„é•¿åº¦ã€‚

**ç¤ºä¾‹ 1ï¼š**

**![](https://assets.leetcode-cn.com/aliyun-lc-
upload/uploads/2020/03/07/sample_1_1702.png)**

> **è¾“å…¥ï¼š** root = [1,null,1,1,1,null,null,1,1,null,1,null,null,null,1,null,1]
>
> **è¾“å‡ºï¼š** 3
>
> **è§£é‡Šï¼š** è“è‰²èŠ‚ç‚¹ä¸ºæ ‘ä¸­æœ€é•¿äº¤é”™è·¯å¾„ï¼ˆå³ -> å·¦ -> å³ï¼‰ã€‚

**ç¤ºä¾‹ 2ï¼š**

**![](https://assets.leetcode-cn.com/aliyun-lc-
upload/uploads/2020/03/07/sample_2_1702.png)**

> **è¾“å…¥ï¼š** root = [1,1,1,null,1,null,null,1,1,null,1]
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** è“è‰²èŠ‚ç‚¹ä¸ºæ ‘ä¸­æœ€é•¿äº¤é”™è·¯å¾„ï¼ˆå·¦ -> å³ -> å·¦ -> å³ï¼‰ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** root = [1]
>
> **è¾“å‡ºï¼š** 0

**æç¤ºï¼š**

- æ¯æ£µæ ‘æœ€å¤šæœ‰ `50000` ä¸ªèŠ‚ç‚¹ã€‚
- æ¯ä¸ªèŠ‚ç‚¹çš„å€¼åœ¨ `[1, 100]` ä¹‹é—´ã€‚

## è§£é¢˜æ€è·¯

ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰éå†æ•´æ£µæ ‘ï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè®°å½•å½“å‰è·¯å¾„æ˜¯å‘å·¦å»¶ä¼¸è¿˜æ˜¯å‘å³å»¶ä¼¸ï¼Œä»¥åŠå½“å‰è·¯å¾„çš„é•¿åº¦ã€‚

åœ¨é€’å½’è¿‡ç¨‹ä¸­ï¼š

- å¦‚æœèŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ï¼›
- åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼Œè®°å½•å½“å‰è·¯å¾„é•¿åº¦ï¼Œå¹¶å°è¯•æ›´æ–°å…¨å±€æœ€å¤§å€¼ã€‚
- å¦‚æœå½“å‰è·¯å¾„æ˜¯å‘å·¦å»¶ä¼¸ï¼š

  - å¯¹å·¦å­èŠ‚ç‚¹é‡æ–°å¼€å§‹ï¼Œè·¯å¾„é•¿åº¦é‡ç½®ä¸º 1ï¼›
  - å¯¹å³å­èŠ‚ç‚¹ç»§ç»­å»¶é•¿ï¼Œè·¯å¾„é•¿åº¦åŠ  1ã€‚

- å¦‚æœå½“å‰è·¯å¾„æ˜¯å‘å³å»¶ä¼¸ï¼š

  - å¯¹å³å­èŠ‚ç‚¹é‡æ–°å¼€å§‹ï¼Œè·¯å¾„é•¿åº¦é‡ç½®ä¸º 1ï¼›
  - å¯¹å·¦å­èŠ‚ç‚¹ç»§ç»­å»¶é•¿ï¼Œè·¯å¾„é•¿åº¦åŠ  1ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯èŠ‚ç‚¹æ•°ï¼Œæ¯ä¸ªèŠ‚ç‚¹è®¿é—®ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(h)`ï¼Œå…¶ä¸­ `h` æ˜¯æ ‘çš„é«˜åº¦ï¼Œé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ä¸ºæ ‘çš„é«˜åº¦ã€‚

## ä»£ç 

```javascript
/**
 * @param {TreeNode} root
 * @return {number}
 */
var longestZigZag = function (root) {
	if (!root) return 0; // ç©ºæ ‘ç›´æ¥è¿”å›

	let maxZigZag = 0; // è®°å½•æœ€é•¿äº¤é”™è·¯å¾„

	// å®šä¹‰é€’å½’å‡½æ•°
	const traverse = (node, isLeft, length) => {
		if (!node) return; // é‡åˆ°ç©ºèŠ‚ç‚¹ç›´æ¥è¿”å›
		maxZigZag = Math.max(maxZigZag, length); // æ›´æ–°æœ€é•¿è·¯å¾„
		if (isLeft) {
			// å½“å‰è·¯å¾„æ˜¯å‘å·¦å»¶ä¼¸
			traverse(node.left, true, 1); // å·¦å­èŠ‚ç‚¹é‡æ–°å¼€å§‹
			traverse(node.right, false, length + 1); // å³å­èŠ‚ç‚¹å»¶é•¿è·¯å¾„
		} else {
			// å½“å‰è·¯å¾„æ˜¯å‘å³å»¶ä¼¸
			traverse(node.left, true, length + 1); // å·¦å­èŠ‚ç‚¹å»¶é•¿è·¯å¾„
			traverse(node.right, false, 1); // å³å­èŠ‚ç‚¹é‡æ–°å¼€å§‹
		}
	};

	// åˆ†åˆ«ä»æ ¹èŠ‚ç‚¹çš„å·¦å³å­æ ‘å¼€å§‹
	traverse(root.left, true, 1); // å‘å·¦å»¶ä¼¸
	traverse(root.right, false, 1); // å‘å³å»¶ä¼¸
	return maxZigZag;
};
```
