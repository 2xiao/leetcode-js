# [139. å•è¯æ‹†åˆ†](https://leetcode.com/problems/word-break)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å­—å…¸æ ‘`](/tag/trie.md) [`è®°å¿†åŒ–æœç´¢`](/tag/memoization.md) [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/word-break)

## é¢˜ç›®

Given a string `s` and a dictionary of strings `wordDict`, return `true` if
`s` can be segmented into a space-separated sequence of one or more dictionary
words.

**Note** that the same word in the dictionary may be reused multiple times in
the segmentation.

**Example 1:**

> Input: s = "leetcode", wordDict = ["leet","code"]
>
> Output: true
>
> Explanation: Return true because "leetcode" can be segmented as "leet code".

**Example 2:**

> Input: s = "applepenapple", wordDict = ["apple","pen"]
>
> Output: true
>
> Explanation: Return true because "applepenapple" can be segmented as "apple pen apple".
>
> Note that you are allowed to reuse a dictionary word.

**Example 3:**

> Input: s = "catsandog", wordDict = ["cats","dog","sand","and","cat"]
>
> Output: false

**Constraints:**

- `1 <= s.length <= 300`
- `1 <= wordDict.length <= 1000`
- `1 <= wordDict[i].length <= 20`
- `s` and `wordDict[i]` consist of only lowercase English letters.
- All the strings of `wordDict` are **unique**.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ `wordDict` ä½œä¸ºå­—å…¸ã€‚å¦‚æœå¯ä»¥åˆ©ç”¨å­—å…¸ä¸­å‡ºç°çš„ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯æ‹¼æ¥å‡º `s` åˆ™è¿”å› `true`ã€‚

**æ³¨æ„**ï¼šä¸è¦æ±‚å­—å…¸ä¸­å‡ºç°çš„å•è¯å…¨éƒ¨éƒ½ä½¿ç”¨ï¼Œå¹¶ä¸”å­—å…¸ä¸­çš„å•è¯å¯ä»¥é‡å¤ä½¿ç”¨ã€‚

**ç¤ºä¾‹ 1ï¼š**

> è¾“å…¥: s = "leetcode", wordDict = ["leet", "code"]
>
> è¾“å‡º: true
>
> è§£é‡Š: è¿”å› true å› ä¸º "leetcode" å¯ä»¥ç”± "leet" å’Œ "code" æ‹¼æ¥æˆã€‚

**ç¤ºä¾‹ 2ï¼š**

> è¾“å…¥: s = "applepenapple", wordDict = ["apple", "pen"]
>
> è¾“å‡º: true
>
> è§£é‡Š: è¿”å› true å› ä¸º "applepenapple" å¯ä»¥ç”± "apple" "pen" "apple" æ‹¼æ¥æˆã€‚
>
> æ³¨æ„ï¼Œä½ å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ã€‚

**ç¤ºä¾‹ 3ï¼š**

> è¾“å…¥: s = "catsandog", wordDict = ["cats", "dog", "sand", "and", "cat"]
>
> è¾“å‡º: false

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šé€’å½’+è®°å¿†åŒ–æœç´¢

1. **é€’å½’ + è®°å¿†åŒ–æœç´¢**ï¼šä½¿ç”¨é€’å½’å‡½æ•° `helper` æ¥åˆ¤æ–­ä»å½“å‰ä½ç½® `i` å¼€å§‹çš„å­ä¸²èƒ½å¦è¢«æ‹†åˆ†ã€‚é€šè¿‡éå†å­—å…¸ä¸­çš„å•è¯ï¼Œæ£€æŸ¥å½“å‰ä½ç½®å¼€å§‹çš„å­ä¸²æ˜¯å¦ä»¥è¿™äº›å•è¯å¼€å¤´ã€‚å¦‚æœæ˜¯ï¼Œåˆ™é€’å½’è°ƒç”¨ `helper` åˆ¤æ–­å‰©ä½™éƒ¨åˆ†ï¼Œå¦‚æœèƒ½è¢«æ‹†åˆ†ï¼Œåˆ™è¿”å› `true`ã€‚

2. **è®°å¿†åŒ–æœç´¢**ï¼šä¸ºäº†é¿å…é‡å¤è®¡ç®—ï¼Œä½¿ç”¨ä¸€ä¸ªæ•°ç»„ `dp` æ¥è®°å½•æ¯ä¸ªä½ç½®çš„è®¡ç®—ç»“æœã€‚`dp[i]` çš„å€¼ä¸º 1 è¡¨ç¤ºä»ä½ç½® `i` å¼€å§‹çš„å­ä¸²å¯ä»¥è¢«æ‹†åˆ†ï¼Œä¸º 0 è¡¨ç¤ºä¸èƒ½è¢«æ‹†åˆ†ï¼Œåˆå§‹åŒ–ä¸º -1ã€‚

3. **è¿”å›ç»“æœ**ï¼šè°ƒç”¨ `helper(0)`ï¼Œå³ä»å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®å¼€å§‹åˆ¤æ–­æ•´ä¸ªå­—ç¬¦ä¸²æ˜¯å¦èƒ½è¢«æ‹†åˆ†ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**: æœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸º `O((n/m)^m)`ï¼Œå…¶ä¸­ `n` è¡¨ç¤ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œ`m` è¡¨ç¤ºå­—å…¸ä¸­å•è¯çš„å¹³å‡é•¿åº¦ï¼Œæœ€åæƒ…å†µä¸‹æ¯ä¸ªä½ç½® `i` å¯èƒ½éœ€è¦éå†æ‰€æœ‰ `m` é•¿åº¦çš„å•è¯ï¼Œé€’å½’çš„æ·±åº¦å¯èƒ½è¾¾åˆ° `n/m` å±‚ã€‚å…·ä½“å¤æ‚åº¦å–å†³äºèƒ½å¦åˆ©ç”¨è®°å¿†åŒ–æœç´¢é¿å…é‡å¤è®¡ç®—ã€‚

- **ç©ºé—´å¤æ‚åº¦**: `O(n)`ï¼Œè®°å¿†åŒ–æœç´¢ä¸­ä½¿ç”¨äº†ä¸€ä¸ªæ•°ç»„ `dp`ï¼Œå…¶é•¿åº¦ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚é€’å½’è°ƒç”¨çš„æ ˆæ·±åº¦ä¹Ÿä¼šå ç”¨ä¸€äº›é¢å¤–çš„ç©ºé—´ã€‚

---

### æ€è·¯äºŒï¼šåŠ¨æ€è§„åˆ’-DP table

1. **åŠ¨æ€è§„åˆ’**ï¼šå¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®šä¹‰ä¸€ä¸ªä¸€ç»´æ•°ç»„ `dp`ï¼Œå…¶ä¸­ `dp[i]` è¡¨ç¤ºå­—ç¬¦ä¸²çš„å‰ `i` ä¸ªå­—ç¬¦æ˜¯å¦å¯ä»¥è¢«æ‹†åˆ†ã€‚

2. **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ï¼šå¯¹äºæ¯ä¸ªä½ç½® `i`ï¼Œå¯ä»¥è€ƒè™‘å°†å­—ç¬¦ä¸²æ‹†åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå³ `s[0:i]` å’Œ `s[i:n]`ï¼ˆ`n` æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ï¼‰ã€‚å¦‚æœå‰åŠéƒ¨åˆ†å¯ä»¥è¢«æ‹†åˆ†ï¼Œå¹¶ä¸”ååŠéƒ¨åˆ†åœ¨å­—å…¸ä¸­ï¼Œé‚£ä¹ˆæ•´ä¸ªå­—ç¬¦ä¸²å°±å¯ä»¥è¢«æ‹†åˆ†ã€‚å› æ­¤ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š`dp[i] = dp[j] && s[j:i] âˆˆ wordDict` å…¶ä¸­ï¼Œ`0 â‰¤ j < i`ã€‚

3. **åˆå§‹åŒ–**ï¼šåˆå§‹åŒ– `dp[0]` ä¸º `true`ï¼Œè¡¨ç¤ºç©ºå­—ç¬¦ä¸²å¯ä»¥è¢«æ‹†åˆ†ã€‚

4. **éå†è®¡ç®—**ï¼šä»å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ï¼Œä¾æ¬¡è®¡ç®— `dp[i]` ç›´åˆ°æœ€åä¸€ä¸ªå­—ç¬¦ã€‚

5. **ç»“æœ**ï¼šè¿”å› `dp[n]`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè¡¨ç¤ºæ•´ä¸ªå­—ç¬¦ä¸²æ˜¯å¦å¯ä»¥è¢«æ‹†åˆ†ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**: `O(n^2)`ï¼Œä¸¤å±‚å¾ªç¯ï¼Œéå†å­—ç¬¦ä¸²çš„æ‰€æœ‰å¯èƒ½å­ä¸²ã€‚
- **ç©ºé—´å¤æ‚åº¦**: `O(n)`ï¼Œä½¿ç”¨äº†ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨ä¸­é—´çŠ¶æ€ã€‚

## ä»£ç 

::: code-tabs

@tab é€’å½’+è®°å¿†åŒ–æœç´¢

```javascript
/**
 * @param {string} s
 * @param {string[]} wordDict
 * @return {boolean}
 */
var wordBreak = function (s, wordDict) {
	const n = s.length;
	const dp = new Array(n).fill(-1);
	const helper = (i) => {
		if (i == n) return true;
		if (dp[i] !== -1) return dp[i] == 1;
		for (let word of wordDict) {
			let len = word.length;
			if (i + len > n) {
				continue;
			}
			if (word !== s.substring(i, i + len)) {
				continue;
			}
			if (helper(i + len)) {
				dp[i] = 1;
				return true;
			}
		}
		dp[i] = 0;
		return false;
	};
	return helper(0);
};
```

@tab åŠ¨æ€è§„åˆ’-DP table

```javascript
/**
 * @param {string} s
 * @param {string[]} wordDict
 * @return {boolean}
 */
var wordBreak = function (s, wordDict) {
	const n = s.length;
	if (n === 0) {
		return false;
	}

	// åˆå§‹åŒ–åŠ¨æ€è§„åˆ’æ•°ç»„
	const dp = new Array(n + 1).fill(false);
	dp[0] = true; // ç©ºå­—ç¬¦ä¸²å¯ä»¥è¢«æ‹†åˆ†

	// éå†è®¡ç®—åŠ¨æ€è§„åˆ’æ•°ç»„
	for (let i = 1; i <= n; i++) {
		for (let j = 0; j < i; j++) {
			if (dp[j] && wordDict.includes(s.substring(j, i))) {
				dp[i] = true;
				break;
			}
		}
	}

	// è¿”å›ç»“æœ
	return dp[n];
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 140 | [å•è¯æ‹†åˆ† II](https://leetcode.com/problems/word-break-ii) |  |  [`å­—å…¸æ ‘`](/tag/trie.md) [`è®°å¿†åŒ–æœç´¢`](/tag/memoization.md) [`æ•°ç»„`](/tag/array.md) `4+` | <font color=#ff334b>Hard</font> |
| 2707 | [å­—ç¬¦ä¸²ä¸­çš„é¢å¤–å­—ç¬¦](https://leetcode.com/problems/extra-characters-in-a-string) |  |  [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) `2+` | <font color=#ffb800>Medium</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
