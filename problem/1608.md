---
title: 1608. ç‰¹æ®Šæ•°ç»„çš„ç‰¹å¾å€¼
description: LeetCode 1608. ç‰¹æ®Šæ•°ç»„çš„ç‰¹å¾å€¼é¢˜è§£ï¼ŒSpecial Array With X Elements Greater Than or Equal Xï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1608. ç‰¹æ®Šæ•°ç»„çš„ç‰¹å¾å€¼
  - ç‰¹æ®Šæ•°ç»„çš„ç‰¹å¾å€¼
  - Special Array With X Elements Greater Than or Equal X
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - äºŒåˆ†æŸ¥æ‰¾
  - æ’åº
---

# 1608. ç‰¹æ®Šæ•°ç»„çš„ç‰¹å¾å€¼

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`æ’åº`](/tag/sorting.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/special-array-with-x-elements-greater-than-or-equal-x) [`LeetCode`](https://leetcode.com/problems/special-array-with-x-elements-greater-than-or-equal-x)

## é¢˜ç›®

You are given an array `nums` of non-negative integers. `nums` is considered
**special** if there exists a number `x` such that there are **exactly** `x`
numbers in `nums` that are **greater than or equal to** `x`.

Notice that `x` **does not** have to be an element in `nums`.

Return `x` _if the array is **special** , otherwise, return _`-1`. It can be
proven that if `nums` is special, the value for `x` is **unique**.

**Example 1:**

> Input: nums = [3,5]
>
> Output: 2
>
> Explanation: There are 2 values (3 and 5) that are greater than or equal to 2.

**Example 2:**

> Input: nums = [0,0]
>
> Output: -1
>
> Explanation: No numbers fit the criteria for x.
>
> If x = 0, there should be 0 numbers >= x, but there are 2.
>
> If x = 1, there should be 1 number >= x, but there are 0.
>
> If x = 2, there should be 2 numbers >= x, but there are 0.
>
> x cannot be greater since there are only 2 numbers in nums.

**Example 3:**

> Input: nums = [0,4,3,0,4]
>
> Output: 3
>
> Explanation: There are 3 values that are greater than or equal to 3.

**Constraints:**

- `1 <= nums.length <= 100`
- `0 <= nums[i] <= 1000`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ `nums` ã€‚å¦‚æœå­˜åœ¨ä¸€ä¸ªæ•° `x` ï¼Œä½¿å¾— `nums` ä¸­æ°å¥½æœ‰ `x` ä¸ªå…ƒç´  **å¤§äºæˆ–è€…ç­‰äº** `x` ï¼Œé‚£ä¹ˆå°±ç§°
`nums` æ˜¯ä¸€ä¸ª **ç‰¹æ®Šæ•°ç»„** ï¼Œè€Œ `x` æ˜¯è¯¥æ•°ç»„çš„ **ç‰¹å¾å€¼** ã€‚

æ³¨æ„ï¼š `x` **ä¸å¿…** æ˜¯ `nums` çš„ä¸­çš„å…ƒç´ ã€‚

å¦‚æœæ•°ç»„ `nums` æ˜¯ä¸€ä¸ª **ç‰¹æ®Šæ•°ç»„** ï¼Œè¯·è¿”å›å®ƒçš„ç‰¹å¾å€¼ `x` ã€‚å¦åˆ™ï¼Œè¿”å› `-1` ã€‚å¯ä»¥è¯æ˜çš„æ˜¯ï¼Œå¦‚æœ `nums`
æ˜¯ç‰¹æ®Šæ•°ç»„ï¼Œé‚£ä¹ˆå…¶ç‰¹å¾å€¼ `x` æ˜¯ **å”¯ä¸€çš„** ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** nums = [3,5]
>
> **è¾“å‡ºï¼š** 2
>
> **è§£é‡Šï¼š** æœ‰ 2 ä¸ªå…ƒç´ ï¼ˆ3 å’Œ 5ï¼‰å¤§äºæˆ–ç­‰äº 2 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** nums = [0,0]
>
> **è¾“å‡ºï¼š** -1
>
> **è§£é‡Šï¼š** æ²¡æœ‰æ»¡è¶³é¢˜ç›®è¦æ±‚çš„ç‰¹æ®Šæ•°ç»„ï¼Œæ•…è€Œä¹Ÿä¸å­˜åœ¨ç‰¹å¾å€¼ x ã€‚
>
> å¦‚æœ x = 0ï¼Œåº”è¯¥æœ‰ 0 ä¸ªå…ƒç´  >= xï¼Œä½†å®é™…æœ‰ 2 ä¸ªã€‚
>
> å¦‚æœ x = 1ï¼Œåº”è¯¥æœ‰ 1 ä¸ªå…ƒç´  >= xï¼Œä½†å®é™…æœ‰ 0 ä¸ªã€‚
>
> å¦‚æœ x = 2ï¼Œåº”è¯¥æœ‰ 2 ä¸ªå…ƒç´  >= xï¼Œä½†å®é™…æœ‰ 0 ä¸ªã€‚
>
> x ä¸èƒ½å–æ›´å¤§çš„å€¼ï¼Œå› ä¸º nums ä¸­åªæœ‰ä¸¤ä¸ªå…ƒç´ ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** nums = [0,4,3,0,4]
>
> **è¾“å‡ºï¼š** 3
>
> **è§£é‡Šï¼š** æœ‰ 3 ä¸ªå…ƒç´ å¤§äºæˆ–ç­‰äº 3 ã€‚

**ç¤ºä¾‹ 4ï¼š**

> **è¾“å…¥ï¼š** nums = [3,6,7,7,0]
>
> **è¾“å‡ºï¼š** -1

**æç¤ºï¼š**

- `1 <= nums.length <= 100`
- `0 <= nums[i] <= 1000`

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šå‰ç¼€æ•°ç»„

å¯ä»¥é€šè¿‡**å‰ç¼€æ•°ç»„**ç»Ÿè®¡æ¯ä¸ªæ•°å€¼çš„å‡ºç°é¢‘ç‡ï¼Œå†ä»åå‘å‰ç´¯ç§¯è®¡ç®—å¤§äºç­‰äºå½“å‰å€¼çš„æ•°å­—ä¸ªæ•°ï¼Œè¿™æ ·é¿å…äº†ç›´æ¥å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œæå‡æ•ˆç‡ã€‚

1. **ç»Ÿè®¡é¢‘ç‡ï¼š**

   åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º `n + 1` çš„é¢‘æ¬¡æ•°ç»„ `freq`ï¼Œå…¶ä¸­ `freq[i]` è¡¨ç¤ºå€¼ä¸º `i` çš„æ•°å­—åœ¨æ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚

   å¦‚æœæŸä¸ªæ•°å­—å¤§äºæ•°ç»„é•¿åº¦ `n`ï¼Œæˆ‘ä»¬å°†å®ƒå½’å…¥ `freq[n]`ï¼Œå› ä¸ºè¶…è¿‡ `n` çš„æ•°å­—å¯¹ç»“æœçš„åˆ¤æ–­æ²¡æœ‰å½±å“ã€‚

2. **ç´¯ç§¯è®¡æ•°ï¼š**

   ä»åå¾€å‰å¼€å§‹éå†é¢‘æ¬¡æ•°ç»„ `freq`ï¼Œç´¯ç§¯è®¡ç®—å¤§äºç­‰äºå½“å‰å€¼çš„æ•°å­—ä¸ªæ•°ã€‚

   å¦‚æœç´¯ç§¯ä¸ªæ•°ä¸å½“å‰å€¼ç›¸ç­‰ï¼Œåˆ™æ‰¾åˆ°äº†æ»¡è¶³æ¡ä»¶çš„ `x`ï¼Œç›´æ¥è¿”å›ã€‚

3. **è¿”å›ç»“æœï¼š**

   å¦‚æœéå†ç»“æŸä»æœªæ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„å€¼ï¼Œè¿”å› `-1`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦ï¼š** `O(n)`
  - é¢‘ç‡ç»Ÿè®¡ï¼š`O(n)`ï¼Œéå†æ•°ç»„ä¸€æ¬¡ã€‚
  - ç´¯ç§¯è®¡æ•°ï¼š`O(n)`ï¼Œéå†é¢‘æ¬¡æ•°ç»„ä¸€æ¬¡ã€‚
  - æ€»ä½“å¤æ‚åº¦ä¸º `O(n)`ã€‚
- **ç©ºé—´å¤æ‚åº¦ï¼š** `O(n)`
  - ä½¿ç”¨ä¸€ä¸ªå¤§å°ä¸º `n + 1` çš„é¢‘æ¬¡æ•°ç»„ `freq` ã€‚

---

### æ€è·¯äºŒï¼šäºŒåˆ†æŸ¥æ‰¾

1. **æ’åºæ•°ç»„**ï¼š  
   é¦–å…ˆå¯¹æ•°ç»„ `nums` æ’åºï¼Œä»¥ä¾¿å¯ä»¥åˆ©ç”¨å…¶æœ‰åºæ€§ã€‚

2. **äºŒåˆ†æŸ¥æ‰¾**ï¼š  
    åœ¨ `[0, n]` èŒƒå›´å†…è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå› ä¸ºå¤§äºç­‰äº `x` çš„å…ƒç´ ä¸ªæ•°ä¸å¯èƒ½è¶…è¿‡æ•°ç»„é•¿åº¦ï¼š

   - å¯¹äºä¸­é—´å€¼ `mid`ï¼Œè®¡ç®—æ•°ç»„ä¸­å¤§äºç­‰äº `mid` çš„å…ƒç´ ä¸ªæ•° `count`ã€‚
   - å¦‚æœ `count` æ°å¥½ç­‰äº `mid`ï¼Œè¿”å›ç»“æœã€‚
   - å¦‚æœ `count` å¤§äº `mid`ï¼Œæœç´¢å³åŠéƒ¨åˆ†ï¼›å¦åˆ™æœç´¢å·¦åŠéƒ¨åˆ†ã€‚

3. **è®¡ç®—å¤§äºç­‰äº `x` çš„å…ƒç´ ä¸ªæ•°**ï¼š

   - å®šä¹‰ä¸€ä¸ªè¾…åŠ©å‡½æ•° `getGreaterOrEqualCount`ï¼Œç”¨æ¥è®¡ç®—ï¼Œæ•°ç»„ä¸­å¤§äºç­‰äº `x` çš„å…ƒç´ ä¸ªæ•°ã€‚
   - ä¾ç„¶å¯ä»¥é€šè¿‡ **äºŒåˆ†æŸ¥æ‰¾** æ¥å¿«é€Ÿæ‰¾åˆ°æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå¤§äºç­‰äº `x` çš„ä½ç½® `index`ã€‚
   - è¿”å›å¤§äºç­‰äº `x` çš„å…ƒç´ ä¸ªæ•°ï¼š`n - index`ã€‚

4. **éªŒè¯ `x` æ˜¯å¦æ»¡è¶³æ¡ä»¶**ï¼š  
   å¦‚æœ `x == n - index`ï¼Œåˆ™ `x` æ˜¯ç‰¹æ®Šå€¼ï¼›å¦åˆ™ç»§ç»­è°ƒæ•´ `x` çš„èŒƒå›´ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n log n)`ï¼Œ

  1. æ’åºï¼š`O(n log n)`ã€‚
  2. äºŒåˆ†æŸ¥æ‰¾ï¼š`O(log n) * O(log n)`

     - ä¸»å‡½æ•°ä¸­ï¼Œ`x` çš„èŒƒå›´æ˜¯ `[0, n]`ï¼Œè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾éœ€è¦ `O(log n)`ã€‚
     - æ¯æ¬¡éªŒè¯å€™é€‰å€¼ `x`ï¼Œéœ€è¦é€šè¿‡ `getGreaterOrEqualCount` è®¡ç®—å¤§äºç­‰äº `x` çš„å…ƒç´ ä¸ªæ•°ï¼Œä¹Ÿç”¨äºŒåˆ†æŸ¥æ‰¾å®ç°ï¼Œå¤æ‚åº¦ä¸º `O(log n)`ã€‚
     - æ€»å…±éœ€è¦ `O(log n) * O(log n) = O(log^2 n)` çš„å¤æ‚åº¦ã€‚

  3. æ€»å¤æ‚åº¦ï¼š`O(n log n) + O(log^2 n)`ï¼Œæ’åºæ˜¯ä¸»å¯¼å› ç´ ï¼Œæ•´ä½“å¤æ‚åº¦ä¸º `O(n log n)`ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œæ²¡æœ‰ä½¿ç”¨é¢å¤–çš„ç©ºé—´ã€‚

## ä»£ç 

::: code-tabs
@tab å‰ç¼€æ•°ç»„

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var specialArray = function (nums) {
	const n = nums.length;
	let freq = new Array(n + 1).fill(0);

	// ç»Ÿè®¡é¢‘ç‡
	for (let num of nums) {
		freq[Math.min(n, num)]++;
	}

	// ä»åå‘å‰ç´¯ç§¯è®¡æ•°
	let count = 0;
	for (let i = n; i >= 1; i--) {
		count += freq[i];
		if (i === count) return i; // æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„ x
	}

	return -1; // æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å€¼
};
```

@tab äºŒåˆ†æŸ¥æ‰¾

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var specialArray = function (nums) {
	nums.sort((a, b) => a - b); // æ’åºæ•°ç»„
	const n = nums.length;

	let left = 0,
		right = n; // äºŒåˆ†æŸ¥æ‰¾çš„èŒƒå›´ [0, n]

	while (left <= right) {
		const mid = Math.floor((left + right) / 2);
		const count = getGreaterOrEqualCount(nums, mid); // è®¡ç®—å¤§äºç­‰äº mid çš„å…ƒç´ ä¸ªæ•°

		if (count === mid) {
			return mid; // æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„ç‰¹æ®Šå€¼
		} else if (count > mid) {
			left = mid + 1; // è¯´æ˜ mid å¤ªå°ï¼Œç»§ç»­å‘å³æ‰¾
		} else {
			right = mid - 1; // è¯´æ˜ mid å¤ªå¤§ï¼Œç»§ç»­å‘å·¦æ‰¾
		}
	}

	return -1; // å¦‚æœæ‰¾ä¸åˆ°ç‰¹æ®Šå€¼ï¼Œè¿”å› -1
};

/**
 * è®¡ç®—æ•°ç»„ä¸­å¤§äºç­‰äº x çš„å…ƒç´ ä¸ªæ•°
 * @param {number[]} nums
 * @param {number} x
 * @return {number}
 */
function getGreaterOrEqualCount(nums, x) {
	let left = 0,
		right = nums.length - 1;

	// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äº x çš„ä½ç½®
	while (left <= right) {
		const mid = Math.floor((left + right) / 2);
		if (nums[mid] >= x) {
			right = mid - 1; // å‘å·¦ç¼©å°èŒƒå›´
		} else {
			left = mid + 1; // å‘å³ç¼©å°èŒƒå›´
		}
	}

	// å¤§äºç­‰äº x çš„å…ƒç´ ä¸ªæ•°ä¸º n - left
	return nums.length - left;
}
```

:::
