# [994. è…çƒ‚çš„æ©˜å­](https://leetcode.com/problems/rotting-oranges)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`æ•°ç»„`](/tag/array.md) [`çŸ©é˜µ`](/tag/matrix.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/rotting-oranges)

## é¢˜ç›®

You are given an `m x n` `grid` where each cell can have one of three values:

- `0` representing an empty cell,
- `1` representing a fresh orange, or
- `2` representing a rotten orange.

Every minute, any fresh orange that is **4-directionally adjacent** to a
rotten orange becomes rotten.

Return _the minimum number of minutes that must elapse until no cell has a
fresh orange_. If _this is impossible, return_ `-1`.

**Example 1:**

![](https://assets.leetcode.com/uploads/2019/02/16/oranges.png)

> Input: grid = [[2,1,1],[1,1,0],[0,1,1]]
>
> Output: 4

**Example 2:**

> Input: grid = [[2,1,1],[0,1,1],[1,0,1]]
>
> Output: -1
>
> Explanation: The orange in the bottom left corner (row 2, column 0) is never rotten, because rotting only happens 4-directionally.

**Example 3:**

> Input: grid = [[0,2]]
>
> Output: 0
>
> Explanation: Since there are already no fresh oranges at minute 0, the answer is just 0.

**Constraints:**

- `m == grid.length`
- `n == grid[i].length`
- `1 <= m, n <= 10`
- `grid[i][j]` is `0`, `1`, or `2`.

## é¢˜ç›®å¤§æ„

åœ¨ç»™å®šçš„ `m x n` ç½‘æ ¼ `grid` ä¸­ï¼Œæ¯ä¸ªå•å…ƒæ ¼å¯ä»¥æœ‰ä»¥ä¸‹ä¸‰ä¸ªå€¼ä¹‹ä¸€ï¼š

- å€¼ `0` ä»£è¡¨ç©ºå•å…ƒæ ¼ï¼›
- å€¼ `1` ä»£è¡¨æ–°é²œæ©˜å­ï¼›
- å€¼ `2` ä»£è¡¨è…çƒ‚çš„æ©˜å­ã€‚

æ¯åˆ†é’Ÿï¼Œè…çƒ‚çš„æ©˜å­ **å‘¨å›´ 4 ä¸ªæ–¹å‘ä¸Šç›¸é‚»** çš„æ–°é²œæ©˜å­éƒ½ä¼šè…çƒ‚ã€‚

è¿”å› _ç›´åˆ°å•å…ƒæ ¼ä¸­æ²¡æœ‰æ–°é²œæ©˜å­ä¸ºæ­¢æ‰€å¿…é¡»ç»è¿‡çš„æœ€å°åˆ†é’Ÿæ•°ã€‚å¦‚æœä¸å¯èƒ½ï¼Œè¿”å› `-1`_ ã€‚

**ç¤ºä¾‹ 1ï¼š**

**![](https://assets.leetcode-cn.com/aliyun-lc-
upload/uploads/2019/02/16/oranges.png)**

> **è¾“å…¥ï¼š** grid = [[2,1,1],[1,1,0],[0,1,1]]
>
> **è¾“å‡ºï¼š** 4

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** grid = [[2,1,1],[0,1,1],[1,0,1]]
>
> **è¾“å‡ºï¼š** -1
>
> **è§£é‡Šï¼š** å·¦ä¸‹è§’çš„æ©˜å­ï¼ˆç¬¬ 2 è¡Œï¼Œ ç¬¬ 0 åˆ—ï¼‰æ°¸è¿œä¸ä¼šè…çƒ‚ï¼Œå› ä¸ºè…çƒ‚åªä¼šå‘ç”Ÿåœ¨ 4 ä¸ªæ–¹å‘ä¸Šã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** grid = [[0,2]]
>
> **è¾“å‡ºï¼š** 0
>
> **è§£é‡Šï¼š** å› ä¸º 0 åˆ†é’Ÿæ—¶å·²ç»æ²¡æœ‰æ–°é²œæ©˜å­äº†ï¼Œæ‰€ä»¥ç­”æ¡ˆå°±æ˜¯ 0 ã€‚

**æç¤ºï¼š**

- `m == grid.length`
- `n == grid[i].length`
- `1 <= m, n <= 10`
- `grid[i][j]` ä»…ä¸º `0`ã€`1` æˆ– `2`

## è§£é¢˜æ€è·¯

å¯ä»¥ä½¿ç”¨**å¹¿åº¦ä¼˜å…ˆæœç´¢ (BFS)** æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒBFS çš„ç‰¹ç‚¹æ˜¯å±‚æ¬¡éå†ï¼Œéå¸¸é€‚åˆæ¨¡æ‹Ÿè¿™ç§æ‰©æ•£é—®é¢˜ã€‚

1. åˆå§‹åŒ–é˜Ÿåˆ—

é¦–å…ˆéœ€è¦æ‰¾åˆ°æ‰€æœ‰çš„è…çƒ‚æ©˜å­ï¼Œå¹¶å°†å®ƒä»¬çš„åæ ‡å­˜å‚¨åœ¨é˜Ÿåˆ—ä¸­ã€‚åŒæ—¶è®°å½•ç½‘æ ¼ä¸­æ–°é²œæ©˜å­çš„æ•°é‡ `freshCount`ã€‚

2. æ‰©æ•£è…çƒ‚æ©˜å­

æ¯åˆ†é’Ÿä»é˜Ÿåˆ—ä¸­å–å‡ºå½“å‰è…çƒ‚æ©˜å­çš„åæ ‡ï¼Œå¹¶å°†å…¶æ‰©æ•£åˆ°ç›¸é‚»çš„å››ä¸ªæ–¹å‘ã€‚å¦‚æœç›¸é‚»çš„æ©˜å­æ˜¯æ–°é²œçš„ï¼Œè…çƒ‚æ©˜å­ä¼šè®©å®ƒå˜æˆè…çƒ‚çš„ï¼Œå¹¶å°†å…¶åŠ å…¥é˜Ÿåˆ—ä¸­ï¼ŒåŒæ—¶å‡å°‘æ–°é²œæ©˜å­çš„è®¡æ•°ã€‚

3. æ£€æŸ¥æ˜¯å¦æˆåŠŸè…çƒ‚æ‰€æœ‰æ©˜å­

æ¯æ¬¡æ‰©æ•£å®Œä¹‹åï¼Œæ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ–°é²œæ©˜å­å­˜åœ¨ã€‚å¦‚æœæ‰€æœ‰æ–°é²œæ©˜å­éƒ½è¢«è…çƒ‚äº†ï¼Œè¿”å›æ‰©æ•£æ‰€éœ€çš„åˆ†é’Ÿæ•°ã€‚å¦‚æœæœ‰æ–°é²œæ©˜å­æ— æ³•è¢«è…çƒ‚ï¼ˆå³å®ƒä»¬å‘¨å›´æ²¡æœ‰è…çƒ‚æ©˜å­ï¼‰ï¼Œè¿”å› `-1`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**: `O(m * n)`ï¼Œå…¶ä¸­ `m` å’Œ `n` åˆ†åˆ«æ˜¯äºŒç»´çŸ©é˜µçš„é•¿å’Œå®½ï¼Œéœ€è¦éå†æ•´ä¸ªçŸ©é˜µä»¥æ ‡è®°æ‰€æœ‰è…çƒ‚çš„æ©˜å­ã€‚
- **ç©ºé—´å¤æ‚åº¦**: `O(m * n)`ï¼Œæœ€å¤šéœ€è¦åœ¨é˜Ÿåˆ—ä¸­å­˜å‚¨ `m * n` ä¸ªæ©˜å­çš„åæ ‡ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[][]} grid
 * @return {number}
 */
var orangesRotting = function (grid) {
	const m = grid.length,
		n = grid[0].length;

	let queue = [],
		freshCount = 0;

	// éå†çŸ©é˜µï¼Œæ‰¾åˆ°æ‰€æœ‰åæ©˜å­ï¼Œå¹¶è®¡ç®—æ‰€æœ‰æ–°é²œæ©˜å­çš„æ•°é‡
	for (let i = 0; i < m; i++) {
		for (let j = 0; j < n; j++) {
			if (grid[i][j] == 1) {
				freshCount++;
			} else if (grid[i][j] == 2) {
				queue.push([i, j]);
			}
		}
	}
	// å¦‚æœæ²¡æœ‰æ–°é²œæ©˜å­ï¼Œè¿”å› 0
	if (freshCount == 0) return 0;

	let minutes = 0;
	// ä¸Šã€ä¸‹ã€å·¦ã€å³
	const dirc = [
		[-1, 0],
		[1, 0],
		[0, -1],
		[0, 1]
	];

	// BFS éå†åæ©˜å­çš„é‚»å±…
	while (queue.length) {
		let len = queue.length,
			findFresh = false;
		for (let i = 0; i < len; i++) {
			const [x, y] = queue.shift();
			for (let [dx, dy] of dirc) {
				const newX = x + dx;
				const newY = y + dy;

				if (
					newX >= 0 &&
					newX < m &&
					newY >= 0 &&
					newY < n &&
					grid[newX][newY] == 1
				) {
					// å°†æ–°é²œæ©˜å­å˜å
					grid[newX][newY] = 2;
					freshCount--;
					queue.push([newX, newY]);
					findFresh = true;
				}
			}
		}
		// å¦‚æœæœ‰æ–°é²œæ©˜å­å˜åï¼Œminutes åŠ ä¸€
		if (findFresh) {
			minutes++;
		}
	}

	// å¦‚æœä¾ç„¶æœ‰æ–°é²œæ©˜å­ï¼Œè¿”å› -1
	return freshCount == 0 ? minutes : -1;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 286 | [å¢™ä¸é—¨](https://leetcode.com/problems/walls-and-gates) |  |  [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`æ•°ç»„`](/tag/array.md) [`çŸ©é˜µ`](/tag/matrix.md) | <font color=#ffb800>Medium</font> |
| 419 | [æ£‹ç›˜ä¸Šçš„æˆ˜èˆ°](https://leetcode.com/problems/battleships-in-a-board) |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`æ•°ç»„`](/tag/array.md) [`çŸ©é˜µ`](/tag/matrix.md) | <font color=#ffb800>Medium</font> |
| 2101 | [å¼•çˆ†æœ€å¤šçš„ç‚¸å¼¹](https://leetcode.com/problems/detonate-the-maximum-bombs) |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å›¾`](/tag/graph.md) `3+` | <font color=#ffb800>Medium</font> |
| 2258 | [é€ƒç¦»ç«ç¾](https://leetcode.com/problems/escape-the-spreading-fire) |  |  [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) `1+` | <font color=#ff334b>Hard</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
