# [3318. è®¡ç®—å­æ•°ç»„çš„ x-sum I](https://leetcode.com/problems/find-x-sum-of-all-k-long-subarrays-i)

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/find-x-sum-of-all-k-long-subarrays-i)

## é¢˜ç›®

<p>ç»™ä½ ä¸€ä¸ªç”± <code>n</code> ä¸ªæ•´æ•°ç»„æˆçš„æ•°ç»„ <code>nums</code>ï¼Œä»¥åŠä¸¤ä¸ªæ•´æ•° <code>k</code> å’Œ <code>x</code>ã€‚</p>

<p>æ•°ç»„çš„ <strong>x-sum</strong> è®¡ç®—æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š</p>

<ul>
	<li>ç»Ÿè®¡æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„å‡ºç°æ¬¡æ•°ã€‚</li>
	<li>ä»…ä¿ç•™å‡ºç°æ¬¡æ•°æœ€å¤šçš„å‰ <code>x</code> ä¸ªå…ƒç´ çš„æ¯æ¬¡å‡ºç°ã€‚å¦‚æœä¸¤ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°ç›¸åŒï¼Œåˆ™æ•°å€¼<strong> è¾ƒå¤§ </strong>çš„å…ƒç´ è¢«è®¤ä¸ºå‡ºç°æ¬¡æ•°æ›´å¤šã€‚</li>
	<li>è®¡ç®—ç»“æœæ•°ç»„çš„å’Œã€‚</li>
</ul>

<p><strong>æ³¨æ„</strong>ï¼Œå¦‚æœæ•°ç»„ä¸­çš„ä¸åŒå…ƒç´ å°‘äº <code>x</code> ä¸ªï¼Œåˆ™å…¶ <strong>x-sum</strong> æ˜¯æ•°ç»„çš„å…ƒç´ æ€»å’Œã€‚</p>

<p>è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º <code>n - k + 1</code> çš„æ•´æ•°æ•°ç»„ <code>answer</code>ï¼Œå…¶ä¸­ <code>answer[i]</code> æ˜¯ <span data-keyword="subarray-nonempty">å­æ•°ç»„</span> <code>nums[i..i + k - 1]</code> çš„ <strong>x-sum</strong>ã€‚</p>

<p><strong>å­æ•°ç»„</strong> æ˜¯æ•°ç»„å†…çš„ä¸€ä¸ªè¿ç»­<b> éç©º</b> çš„å…ƒç´ åºåˆ—ã€‚</p>

<p>&nbsp;</p>

<p><strong class="example">ç¤ºä¾‹ 1ï¼š</strong></p>

<div class="example-block">
<p><strong>è¾“å…¥ï¼š</strong><span class="example-io">nums = [1,1,2,2,3,4,2,3], k = 6, x = 2</span></p>

<p><strong>è¾“å‡ºï¼š</strong><span class="example-io">[6,10,12]</span></p>

<p><strong>è§£é‡Šï¼š</strong></p>

<ul>
	<li>å¯¹äºå­æ•°ç»„ <code>[1, 1, 2, 2, 3, 4]</code>ï¼Œåªä¿ç•™å…ƒç´  1 å’Œ 2ã€‚å› æ­¤ï¼Œ<code>answer[0] = 1 + 1 + 2 + 2</code>ã€‚</li>
	<li>å¯¹äºå­æ•°ç»„ <code>[1, 2, 2, 3, 4, 2]</code>ï¼Œåªä¿ç•™å…ƒç´  2 å’Œ 4ã€‚å› æ­¤ï¼Œ<code>answer[1] = 2 + 2 + 2 + 4</code>ã€‚æ³¨æ„ 4 è¢«ä¿ç•™æ˜¯å› ä¸ºå…¶æ•°å€¼å¤§äºå‡ºç°å…¶ä»–å‡ºç°æ¬¡æ•°ç›¸åŒçš„å…ƒç´ ï¼ˆ3 å’Œ 1ï¼‰ã€‚</li>
	<li>å¯¹äºå­æ•°ç»„ <code>[2, 2, 3, 4, 2, 3]</code>ï¼Œåªä¿ç•™å…ƒç´  2 å’Œ 3ã€‚å› æ­¤ï¼Œ<code>answer[2] = 2 + 2 + 2 + 3 + 3</code>ã€‚</li>
</ul>
</div>

<p><strong class="example">ç¤ºä¾‹ 2ï¼š</strong></p>

<div class="example-block">
<p><strong>è¾“å…¥ï¼š</strong><span class="example-io">nums = [3,8,7,8,7,5], k = 2, x = 2</span></p>

<p><strong>è¾“å‡ºï¼š</strong><span class="example-io">[11,15,15,15,12]</span></p>

<p><strong>è§£é‡Šï¼š</strong></p>

<p>ç”±äº <code>k == x</code>ï¼Œ<code>answer[i]</code> ç­‰äºå­æ•°ç»„ <code>nums[i..i + k - 1]</code> çš„æ€»å’Œã€‚</p>
</div>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= n == nums.length &lt;= 50</code></li>
	<li><code>1 &lt;= nums[i] &lt;= 50</code></li>
	<li><code>1 &lt;= x &lt;= k &lt;= nums.length</code></li>
</ul>


## è§£é¢˜æ€è·¯

- å¯ä»¥ä½¿ç”¨æ»‘åŠ¨çª—å£çš„æ–¹å¼æ¥è®¡ç®—æ¯ä¸ªé•¿åº¦ä¸º `k` çš„å­æ•°ç»„çš„ `x å’Œ`ã€‚æ»‘åŠ¨çª—å£çš„æ€æƒ³æ˜¯åœ¨è®¡ç®—æŸä¸ªå­æ•°ç»„æ—¶ï¼Œé€šè¿‡ç§»åŠ¨çª—å£è¾¹ç•Œæ¥é¿å…é‡å¤è®¡ç®—æ¯ä¸ªå…ƒç´ çš„é¢‘ç‡ã€‚
- ä½¿ç”¨å“ˆå¸Œè¡¨ï¼ˆå­—å…¸ï¼‰æ¥å­˜å‚¨æ¯ä¸ªå…ƒç´ çš„é¢‘ç‡ã€‚æ¯å½“çª—å£å³ç§»æ—¶ï¼Œæ›´æ–°åŠ å…¥å’Œç§»é™¤çš„å…ƒç´ çš„é¢‘ç‡ã€‚
- æ¯æ¬¡æ›´æ–°å®Œçª—å£åï¼Œæ ¹æ®æ¯ä¸ªå…ƒç´ çš„é¢‘ç‡è¿›è¡Œæ’åºï¼Œå¹¶è·å–çª—å£ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„å‰ `x` ä¸ªå…ƒç´ ï¼Œè®¡ç®—å‰ `x` ä¸ªå…ƒç´ çš„å’Œã€‚
- ä¾æ¬¡è®¡ç®—æ‰€æœ‰å­æ•°ç»„çš„ `x å’Œ` ï¼Œå¹¶å­˜å…¥ç»“æœæ•°ç»„ `answer` ä¸­ï¼Œæœ€åè¿”å›ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O((n - k + 1) * k log k)`ï¼Œå…¶ä¸­ `n` æ˜¯æ•°ç»„ `nums` çš„é•¿åº¦ï¼Œ`k` æ˜¯æ»‘åŠ¨çª—å£çš„é•¿åº¦ã€‚å› ä¸ºéœ€è¦åœ¨é•¿åº¦ä¸º `k` çš„æ»‘åŠ¨çª—å£ä¸­ç»´æŠ¤é¢‘ç‡å¹¶æ’åºï¼Œä»¥è·å–å‰ `x` ä¸ªæœ€å¤§é¢‘ç‡çš„å…ƒç´ ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(k)`ï¼Œéœ€è¦ `O(k)` çš„ç©ºé—´æ¥å­˜å‚¨å“ˆå¸Œè¡¨å’Œæ•°ç»„ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @param {number} k
 * @param {number} x
 * @return {number[]}
 */
var findXSum = function (nums, k, x) {
	let n = nums.length;
	let answer = [];
	// ç»´æŠ¤å…ƒç´ çš„é¢‘ç‡
	let freq = new Map();

	// æ»‘åŠ¨çª—å£
	for (let i = 0; i < n; i++) {
		// åŠ å…¥æ–°å…ƒç´ 
		freq.set(nums[i], (freq.get(nums[i]) || 0) + 1);

		// å¦‚æœçª—å£è¶…å‡ºå¤§å°ï¼Œç§»é™¤æœ€å·¦è¾¹çš„å…ƒç´ 
		if (i >= k) {
			let leftElem = nums[i - k];
			freq.set(leftElem, freq.get(leftElem) - 1);
			if (freq.get(leftElem) === 0) {
				freq.delete(leftElem);
			}
		}

		// è®¡ç®—å½“å‰çª—å£çš„ x å’Œ
		if (i >= k - 1) {
			// æ’åº
			let arr = [...freq.entries()].sort((a, b) => {
				if (a[1] === b[1]) {
					return b[0] - a[0];
				}
				return b[1] - a[1];
			});

			let sum = 0;
			for (let j = 0; j < Math.min(x, arr.length); j++) {
				sum += arr[j][0] * arr[j][1];
			}

			answer.push(sum);
		}
	}

	return answer;
};
```
