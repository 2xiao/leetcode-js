# [173. äºŒå‰æœç´¢æ ‘è¿­ä»£å™¨](https://leetcode.com/problems/binary-search-tree-iterator)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`æ ‘`](/tag/tree.md) [`è®¾è®¡`](/tag/design.md) [`äºŒå‰æœç´¢æ ‘`](/tag/binary-search-tree.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md) [`è¿­ä»£å™¨`](/tag/iterator.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/binary-search-tree-iterator)

## é¢˜ç›®

å®ç°ä¸€ä¸ªäºŒå‰æœç´¢æ ‘è¿­ä»£å™¨ç±»<code>BSTIterator</code> ï¼Œè¡¨ç¤ºä¸€ä¸ªæŒ‰ä¸­åºéå†äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„è¿­ä»£å™¨ï¼š
<div class="original__bRMd">
<div>
<ul>
	<li><code>BSTIterator(TreeNode root)</code> åˆå§‹åŒ– <code>BSTIterator</code> ç±»çš„ä¸€ä¸ªå¯¹è±¡ã€‚BST çš„æ ¹èŠ‚ç‚¹ <code>root</code> ä¼šä½œä¸ºæ„é€ å‡½æ•°çš„ä¸€éƒ¨åˆ†ç»™å‡ºã€‚æŒ‡é’ˆåº”åˆå§‹åŒ–ä¸ºä¸€ä¸ªä¸å­˜åœ¨äº BST ä¸­çš„æ•°å­—ï¼Œä¸”è¯¥æ•°å­—å°äº BST ä¸­çš„ä»»ä½•å…ƒç´ ã€‚</li>
	<li><code>boolean hasNext()</code> å¦‚æœå‘æŒ‡é’ˆå³ä¾§éå†å­˜åœ¨æ•°å­—ï¼Œåˆ™è¿”å› <code>true</code> ï¼›å¦åˆ™è¿”å› <code>false</code> ã€‚</li>
	<li><code>int next()</code>å°†æŒ‡é’ˆå‘å³ç§»åŠ¨ï¼Œç„¶åè¿”å›æŒ‡é’ˆå¤„çš„æ•°å­—ã€‚</li>
</ul>

<p>æ³¨æ„ï¼ŒæŒ‡é’ˆåˆå§‹åŒ–ä¸ºä¸€ä¸ªä¸å­˜åœ¨äº BST ä¸­çš„æ•°å­—ï¼Œæ‰€ä»¥å¯¹ <code>next()</code> çš„é¦–æ¬¡è°ƒç”¨å°†è¿”å› BST ä¸­çš„æœ€å°å…ƒç´ ã€‚</p>
</div>
</div>

<p>ä½ å¯ä»¥å‡è®¾Â <code>next()</code>Â è°ƒç”¨æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è°ƒç”¨ <code>next()</code>Â æ—¶ï¼ŒBST çš„ä¸­åºéå†ä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªä¸‹ä¸€ä¸ªæ•°å­—ã€‚</p>

<p>Â </p>

<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<img alt="" src="https://assets.leetcode.com/uploads/2018/12/25/bst-tree.png" style="width: 189px; height: 178px;" />
<pre>
<strong>è¾“å…¥</strong>
["BSTIterator", "next", "next", "hasNext", "next", "hasNext", "next", "hasNext", "next", "hasNext"]
[[[7, 3, 15, null, null, 9, 20]], [], [], [], [], [], [], [], [], []]
<strong>è¾“å‡º</strong>
[null, 3, 7, true, 9, true, 15, true, 20, false]

<strong>è§£é‡Š</strong>
BSTIterator bSTIterator = new BSTIterator([7, 3, 15, null, null, 9, 20]);
bSTIterator.next();    // è¿”å› 3
bSTIterator.next();    // è¿”å› 7
bSTIterator.hasNext(); // è¿”å› True
bSTIterator.next();    // è¿”å› 9
bSTIterator.hasNext(); // è¿”å› True
bSTIterator.next();    // è¿”å› 15
bSTIterator.hasNext(); // è¿”å› True
bSTIterator.next();    // è¿”å› 20
bSTIterator.hasNext(); // è¿”å› False
</pre>

<p>Â </p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li>æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´ <code>[1, 10<sup>5</sup>]</code> å†…</li>
	<li><code>0 <= Node.val <= 10<sup>6</sup></code></li>
	<li>æœ€å¤šè°ƒç”¨ <code>10<sup>5</sup></code> æ¬¡ <code>hasNext</code> å’Œ <code>next</code> æ“ä½œ</li>
</ul>

<p>Â </p>

<p><strong>è¿›é˜¶ï¼š</strong></p>

<ul>
	<li>ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªæ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ<code>next()</code> å’Œ <code>hasNext()</code> æ“ä½œå‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸º <code>O(1)</code> ï¼Œå¹¶ä½¿ç”¨ <code>O(h)</code> å†…å­˜ã€‚å…¶ä¸­ <code>h</code> æ˜¯æ ‘çš„é«˜åº¦ã€‚</li>
</ul>


## è§£é¢˜æ€è·¯

å¯ä»¥é‡‡ç”¨ä¸­åºéå†çš„æ–¹å¼ï¼Œé€šè¿‡é˜Ÿåˆ—æ¥æ¨¡æ‹Ÿé€’å½’è¿‡ç¨‹ã€‚

å› ä¸ºé¢˜ç›®è¦æ±‚è°ƒç”¨ `next()` è¿”å›ä¸‹ä¸€ä¸ªæœ€å°çš„æ•°ï¼Œå³æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºè¿”å›å…ƒç´ ï¼Œè¿™æ­£å¥½ç¬¦åˆäºŒå‰æœç´¢æ ‘ä¸­åºéå†çš„ç‰¹æ€§ï¼ŒäºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„ä¸­åºéå†èƒ½å¤ŸæŒ‰ç…§å‡åºé¡ºåºè¾“å‡ºæ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹å€¼ã€‚

1. åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œè°ƒç”¨ `_inorder()` æ–¹æ³•å¯¹æ•´ä¸ªæ ‘è¿›è¡Œä¸­åºéå†ï¼Œå°†éå†ç»“æœæŒ‰é¡ºåºå­˜å…¥ `queue`ã€‚
2. `next()` æ–¹æ³•ï¼šè¿”å›å¹¶ç§»é™¤é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚
3. `hasNext()` æ–¹æ³•ï¼šåˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦è¿˜æœ‰å‰©ä½™å…ƒç´ ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š

  - **åˆå§‹åŒ– (`constructor`)**: `O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ ‘ä¸­èŠ‚ç‚¹çš„æ•°é‡ã€‚å› ä¸º `_inorder()` æ–¹æ³•ä¼šéå†æ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å°†å®ƒä»¬æŒ‰ä¸­åºé¡ºåºå­˜å…¥é˜Ÿåˆ—ï¼Œæ•´ä½“æ˜¯çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚
  - **`next()` æ“ä½œ**: `O(1)`ï¼Œå› ä¸ºåªéœ€è¦ä»é˜Ÿåˆ—ä¸­ç§»é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚
  - **`hasNext()` æ“ä½œ**: `O(1)`ï¼Œä»…ä»…æ£€æŸ¥é˜Ÿåˆ—çš„é•¿åº¦æ˜¯å¦å¤§äº 0ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š
  - **åˆå§‹åŒ– (`constructor`)**: `O(n)`ï¼Œé˜Ÿåˆ—éœ€è¦å­˜å‚¨æ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸èŠ‚ç‚¹æ•° `n` æˆæ­£æ¯”ã€‚
  - **`next()` å’Œ `hasNext()` æ“ä½œ**ï¼š`O(1)`ï¼Œå› ä¸ºè¿™äº›æ“ä½œåªéœ€è¦è®¿é—®æˆ–ä¿®æ”¹é˜Ÿåˆ—ï¼Œä¸éœ€è¦é¢å¤–çš„ç©ºé—´ã€‚

## ä»£ç 

```javascript
class BSTIterator {
	// @param {TreeNode} root
	constructor(root) {
		this.queue = [];
		this._inorder(root);
	}
	// ä¸­åºéå†
	_inorder(root) {
		if (!root) return null;
		this._inorder(root.left);
		this.queue.push(root.val);
		this._inorder(root.right);
	}
	// @return {number}
	next() {
		return this.queue.shift();
	}
	// @return {boolean}
	hasNext() {
		return this.queue.length > 0;
	}
}
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 94 | [äºŒå‰æ ‘çš„ä¸­åºéå†](https://leetcode.com/problems/binary-tree-inorder-traversal) | [[âœ“]](/problem/0094.md) |  [`æ ˆ`](/tag/stack.md) [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) `1+` | <font color=#15bd66>Easy</font> |
| 251 | [å±•å¼€äºŒç»´å‘é‡](https://leetcode.com/problems/flatten-2d-vector) |  |  [`è®¾è®¡`](/tag/design.md) [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) `1+` | <font color=#ffb800>Medium</font> |
| 281 | [é”¯é½¿è¿­ä»£å™¨](https://leetcode.com/problems/zigzag-iterator) |  |  [`è®¾è®¡`](/tag/design.md) [`é˜Ÿåˆ—`](/tag/queue.md) [`æ•°ç»„`](/tag/array.md) `1+` | <font color=#ffb800>Medium</font> |
| 284 | [çª¥è§†è¿­ä»£å™¨](https://leetcode.com/problems/peeking-iterator) |  |  [`è®¾è®¡`](/tag/design.md) [`æ•°ç»„`](/tag/array.md) [`è¿­ä»£å™¨`](/tag/iterator.md) | <font color=#ffb800>Medium</font> |
| 285 | [äºŒå‰æœç´¢æ ‘ä¸­çš„ä¸­åºåç»§](https://leetcode.com/problems/inorder-successor-in-bst) |  |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æœç´¢æ ‘`](/tag/binary-search-tree.md) `1+` | <font color=#ffb800>Medium</font> |
| 1586 | [äºŒå‰æœç´¢æ ‘è¿­ä»£å™¨ II](https://leetcode.com/problems/binary-search-tree-iterator-ii) |  |  [`æ ˆ`](/tag/stack.md) [`æ ‘`](/tag/tree.md) [`è®¾è®¡`](/tag/design.md) `3+` | <font color=#ffb800>Medium</font> |