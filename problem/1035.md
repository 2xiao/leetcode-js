---
title: 1035. ä¸ç›¸äº¤çš„çº¿
description: LeetCode 1035. ä¸ç›¸äº¤çš„çº¿é¢˜è§£ï¼ŒUncrossed Linesï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1035. ä¸ç›¸äº¤çš„çº¿
  - ä¸ç›¸äº¤çš„çº¿
  - Uncrossed Lines
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - åŠ¨æ€è§„åˆ’
---

# 1035. ä¸ç›¸äº¤çš„çº¿

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/uncrossed-lines) [`LeetCode`](https://leetcode.com/problems/uncrossed-lines)

## é¢˜ç›®

You are given two integer arrays `nums1` and `nums2`. We write the integers of
`nums1` and `nums2` (in the order they are given) on two separate horizontal
lines.

We may draw connecting lines: a straight line connecting two numbers
`nums1[i]` and `nums2[j]` such that:

- `nums1[i] == nums2[j]`, and
- the line we draw does not intersect any other connecting (non-horizontal) line.

Note that a connecting line cannot intersect even at the endpoints (i.e., each
number can only belong to one connecting line).

Return _the maximum number of connecting lines we can draw in this way_.

**Example 1:**

![](https://assets.leetcode.com/uploads/2019/04/26/142.png)

> Input: nums1 = [1,4,2], nums2 = [1,2,4]
>
> Output: 2
>
> Explanation: We can draw 2 uncrossed lines as in the diagram.
>
> We cannot draw 3 uncrossed lines, because the line from nums1[1] = 4 to nums2[2] = 4 will intersect the line from nums1[2]=2 to nums2[1]=2.

**Example 2:**

> Input: nums1 = [2,5,1,2,5], nums2 = [10,5,2,1,5,2]
>
> Output: 3

**Example 3:**

> Input: nums1 = [1,3,7,1,7,5], nums2 = [1,9,2,5,1]
>
> Output: 2

**Constraints:**

- `1 <= nums1.length, nums2.length <= 500`
- `1 <= nums1[i], nums2[j] <= 2000`

## é¢˜ç›®å¤§æ„

åœ¨ä¸¤æ¡ç‹¬ç«‹çš„æ°´å¹³çº¿ä¸ŠæŒ‰ç»™å®šçš„é¡ºåºå†™ä¸‹ `nums1` å’Œ `nums2` ä¸­çš„æ•´æ•°ã€‚

ç°åœ¨ï¼Œå¯ä»¥ç»˜åˆ¶ä¸€äº›è¿æ¥ä¸¤ä¸ªæ•°å­— `nums1[i]` å’Œ `nums2[j]` çš„ç›´çº¿ï¼Œè¿™äº›ç›´çº¿éœ€è¦åŒæ—¶æ»¡è¶³ï¼š

- `nums1[i] == nums2[j]`
- ä¸”ç»˜åˆ¶çš„ç›´çº¿ä¸ä¸ä»»ä½•å…¶ä»–è¿çº¿ï¼ˆéæ°´å¹³çº¿ï¼‰ç›¸äº¤ã€‚

è¯·æ³¨æ„ï¼Œè¿çº¿å³ä½¿åœ¨ç«¯ç‚¹ä¹Ÿä¸èƒ½ç›¸äº¤ï¼šæ¯ä¸ªæ•°å­—åªèƒ½å±äºä¸€æ¡è¿çº¿ã€‚

ä»¥è¿™ç§æ–¹æ³•ç»˜åˆ¶çº¿æ¡ï¼Œå¹¶è¿”å›å¯ä»¥ç»˜åˆ¶çš„æœ€å¤§è¿çº¿æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2019/04/26/142.png)

> **è¾“å…¥ï¼š** nums1 = [1,4,2], nums2 = [1,2,4]
>
> **è¾“å‡ºï¼š** 2
>
> **è§£é‡Šï¼š** å¯ä»¥ç”»å‡ºä¸¤æ¡ä¸äº¤å‰çš„çº¿ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚
>
> ä½†æ— æ³•ç”»å‡ºç¬¬ä¸‰æ¡ä¸ç›¸äº¤çš„ç›´çº¿ï¼Œå› ä¸ºä» nums1[1]=4 åˆ° nums2[2]=4 çš„ç›´çº¿å°†ä¸ä» nums1[2]=2 åˆ° nums2[1]=2 çš„ç›´çº¿ç›¸äº¤ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** nums1 = [2,5,1,2,5], nums2 = [10,5,2,1,5,2]
>
> **è¾“å‡ºï¼š** 3

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** nums1 = [1,3,7,1,7,5], nums2 = [1,9,2,5,1]
>
> **è¾“å‡ºï¼š** 2

**æç¤ºï¼š**

- `1 <= nums1.length, nums2.length <= 500`
- `1 <= nums1[i], nums2[j] <= 2000`

## è§£é¢˜æ€è·¯

é¢˜ç›®è¦æ±‚æ‰¾åˆ°**ä¸ç›¸äº¤çš„æœ€å¤§è¿çº¿æ•°**ï¼Œå¯ä»¥çœ‹ä½œåœ¨ä¸¤ä¸ªæ•°ç»„ `nums1` å’Œ `nums2` ä¹‹é—´æ‰¾åˆ°**æœ€é•¿å…¬å…±å­åºåˆ— (LCS)**ã€‚

1. å…³é”®æ€è·¯

   - å¦‚æœ `nums1[i] == nums2[j]`ï¼Œåˆ™å¯ä»¥è¿æ¥è¿™ä¸¤ä¸ªå…ƒç´ ï¼Œå¹¶åŠ ä¸Šå®ƒä»¬å‰é¢çš„æœ€é•¿è¿çº¿æ•° `dp[i-1][j-1] + 1`ã€‚
   - å¦åˆ™ï¼Œ`nums1[i]` å’Œ `nums2[j]` ä¸èƒ½è¿æ¥ï¼Œæˆ‘ä»¬å–ä¸¤ç§å¯èƒ½æƒ…å†µçš„**æœ€å¤§å€¼**ï¼š
     - `dp[i-1][j]`ï¼ˆä¸ä½¿ç”¨ `nums1[i]`ï¼‰
     - `dp[i][j-1]`ï¼ˆä¸ä½¿ç”¨ `nums2[j]`ï¼‰

2. çŠ¶æ€å®šä¹‰
   è®¾ `dp[i][j]` è¡¨ç¤º**åœ¨ `nums1[0...i-1]` å’Œ `nums2[0...j-1]` ä¹‹é—´çš„æœ€å¤§è¿çº¿æ•°**ã€‚

3. çŠ¶æ€è½¬ç§»æ–¹ç¨‹

   - **å¦‚æœå½“å‰å…ƒç´ ç›¸ç­‰** (`nums1[i-1] == nums2[j-1]`)ï¼š

     `dp[i][j] = dp[i-1][j-1] + 1`

   - **å¦åˆ™ï¼Œä¸è¿è¿™ä¸¤ä¸ªå…ƒç´ **ï¼Œå–å‰é¢çš„æœ€å¤§å€¼ï¼š

     `dp[i][j] = max(dp[i-1][j], dp[i][j-1])`

4. åˆå§‹åŒ–

   - `dp[0][j] = 0`ï¼Œ`dp[i][0] = 0`ï¼Œå› ä¸ºä»»ä½•ä¸€ä¸ªæ•°ç»„ä¸ºç©ºæ—¶ï¼Œæœ€é•¿è¿çº¿æ•°éƒ½æ˜¯ `0`ã€‚

5. ä¼˜åŒ–

   - `dp[i][j]` åªä¾èµ–äº `dp[i-1][j]`ã€`dp[i][j-1]` å’Œ `dp[i-1][j-1]`ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨**æ»šåŠ¨æ•°ç»„**ä¼˜åŒ–ç©ºé—´åˆ° `O(m)`ï¼ˆåªå­˜å‚¨ä¸¤è¡Œï¼‰ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**: `O(n * m)`ï¼Œä¸¤å±‚å¾ªç¯ã€‚
- **ç©ºé—´å¤æ‚åº¦**: `O(n * m)`ï¼Œå­˜å‚¨ `dp` æ•°ç»„ã€‚
  - `dp[i][j]` åªä¾èµ–äº `dp[i-1][j]`ã€`dp[i][j-1]` å’Œ `dp[i-1][j-1]`ï¼Œåªç”¨åˆ°**å‰ä¸€è¡Œå’Œå½“å‰è¡Œ**ã€‚
  - å› æ­¤ï¼Œå¯ä»¥ç”¨**ä¸¤ä¸ªä¸€ç»´æ•°ç»„**æ¥ä»£æ›¿ `O(n * m)` çš„ `dp` æ•°ç»„ï¼ŒæŠŠç©ºé—´ä¼˜åŒ–åˆ° `O(m)`ã€‚

## ä»£ç 

::: code-tabs

@tab åŠ¨æ€è§„åˆ’

```javascript
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
var maxUncrossedLines = function (nums1, nums2) {
	const n = nums1.length;
	const m = nums2.length;
	const dp = new Array(n + 1).fill().map(() => new Array(m + 1).fill(0));
	for (let i = 1; i <= n; i++) {
		for (let j = 1; j <= m; j++) {
			dp[i][j] = Math.max(dp[i][j - 1], dp[i - 1][j]);
			if (nums1[i - 1] == nums2[j - 1]) {
				dp[i][j] = Math.max(1 + dp[i - 1][j - 1], dp[i][j]);
			}
		}
	}
	return dp[n][m];
};
```

@tab åŠ¨æ€è§„åˆ’-æ»šåŠ¨æ•°ç»„

```javascript
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
var maxUncrossedLines = function (nums1, nums2) {
	const n = nums1.length,
		m = nums2.length;
	let prev = new Array(m + 1).fill(0);
	let curr = new Array(m + 1).fill(0);

	for (let i = 1; i <= n; i++) {
		for (let j = 1; j <= m; j++) {
			curr[j] = Math.max(curr[j - 1], prev[j]);
			if (nums1[i - 1] === nums2[j - 1]) {
				curr[j] = Math.max(curr[j], prev[j - 1] + 1);
			}
		}
		[prev, curr] = [curr, prev]; // äº¤æ¢æ•°ç»„ï¼ŒèŠ‚çœç©ºé—´
	}
	return prev[m];
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 72 | ç¼–è¾‘è·ç¦» | [[âœ“]](/problem/0072.md) |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/edit-distance) [ğŸ”—](https://leetcode.com/problems/edit-distance) |