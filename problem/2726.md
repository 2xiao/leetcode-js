---
title: 2726. ä½¿ç”¨æ–¹æ³•é“¾çš„è®¡ç®—å™¨
description: LeetCode 2726. ä½¿ç”¨æ–¹æ³•é“¾çš„è®¡ç®—å™¨é¢˜è§£ï¼ŒCalculator with Method Chainingï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2726. ä½¿ç”¨æ–¹æ³•é“¾çš„è®¡ç®—å™¨
  - ä½¿ç”¨æ–¹æ³•é“¾çš„è®¡ç®—å™¨
  - Calculator with Method Chaining
  - è§£é¢˜æ€è·¯
---

# 2726. ä½¿ç”¨æ–¹æ³•é“¾çš„è®¡ç®—å™¨

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/calculator-with-method-chaining) [`LeetCode`](https://leetcode.com/problems/calculator-with-method-chaining)

## é¢˜ç›®

Design a `Calculator` class. The class should provide the mathematical
operations of addition, subtraction, multiplication, division, and
exponentiation. It should also allow consecutive operations to be performed
using method chaining. The `Calculator` class constructor should accept a
number which serves as the initial value of `result`.

Your `Calculator` class should have the following methods:

- `add`: This method adds the given number `value` to the `result` and returns the updated `Calculator`.
- `subtract`: This method subtracts the given number `value` from the `result` and returns the updated `Calculator`.
- `multiply`: This method multiplies the `result` by the given number `value` and returns the updated `Calculator`.
- `divide`: This method divides the `result` by the given number `value` and returns the updated `Calculator`. If the passed value is `0`, an error `"Division by zero is not allowed"` should be thrown.
- `power`: This method raises the `result` to the power of the given number `value` and returns the updated `Calculator`.
- `getResult`: This method returns the `result`.

Solutions within `10-5` of the actual result are considered correct.

**Example 1:**

> Input:
>
> actions = ["Calculator", "add", "subtract", "getResult"],
>
> values = [10, 5, 7]
>
> Output: 8
>
> Explanation:
>
> new Calculator(10).add(5).subtract(7).getResult() // 10 + 5 - 7 = 8

**Example 2:**

> Input:
>
> actions = ["Calculator", "multiply", "power", "getResult"],
>
> values = [2, 5, 2]
>
> Output: 100
>
> Explanation:
>
> new Calculator(2).multiply(5).power(2).getResult() // (2 \* 5) ^ 2 = 100

**Example 3:**

> Input:
>
> actions = ["Calculator", "divide", "getResult"],
>
> values = [20, 0]
>
> Output: "Division by zero is not allowed"
>
> Explanation:
>
> new Calculator(20).divide(0).getResult() // 20 / 0
>
> The error should be thrown because we cannot divide by zero.

**Constraints:**

- `actions` is a valid JSON array of strings
- `values` is a valid JSON array of numbers
- `2 <= actions.length <= 2 * 10^4`
- `1 <= values.length <= 2 * 104 - 1`
- `actions[i]` is one of "Calculator", "add", "subtract", "multiply", "divide", "power", and "getResult"
- First action is always "Calculator"
- Last action is always "getResult"

## é¢˜ç›®å¤§æ„

è®¾è®¡ä¸€ä¸ªç±» `Calculator`
ã€‚è¯¥ç±»åº”æä¾›åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•å’Œä¹˜æ–¹ç­‰æ•°å­¦è¿ç®—åŠŸèƒ½ã€‚åŒæ—¶ï¼Œå®ƒè¿˜åº”æ”¯æŒè¿ç»­æ“ä½œçš„æ–¹æ³•é“¾å¼è°ƒç”¨ã€‚`Calculator` ç±»çš„æ„é€ å‡½æ•°åº”æ¥å—ä¸€ä¸ªæ•°å­—ä½œä¸º
`result` çš„åˆå§‹å€¼ã€‚

ä½ çš„ `Calculator` ç±»åº”åŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š

- `add`: å°†ç»™å®šçš„æ•°å­— `value` ä¸ `result` ç›¸åŠ ï¼Œå¹¶è¿”å›æ›´æ–°åçš„ `Calculator` å¯¹è±¡ã€‚
- `subtract`: ä» `result` ä¸­å‡å»ç»™å®šçš„æ•°å­— `value` ï¼Œå¹¶è¿”å›æ›´æ–°åçš„ `Calculator` å¯¹è±¡ã€‚
- `multiply`: å°† `result` ä¹˜ä»¥ç»™å®šçš„æ•°å­— `value` ï¼Œå¹¶è¿”å›æ›´æ–°åçš„ `Calculator` å¯¹è±¡ã€‚
- `divide`: å°† `result` é™¤ä»¥ç»™å®šçš„æ•°å­— `value` ï¼Œå¹¶è¿”å›æ›´æ–°åçš„ `Calculator` å¯¹è±¡ã€‚å¦‚æœä¼ å…¥çš„å€¼ä¸º `0` ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ `"Division by zero is not allowed"` ã€‚
- `power`: è®¡ç®— `result` çš„å¹‚ï¼ŒæŒ‡æ•°ä¸ºç»™å®šçš„æ•°å­— `value` ï¼Œå¹¶è¿”å›æ›´æ–°åçš„ `Calculator` å¯¹è±¡ã€‚ï¼ˆ`result = result ^ value` ï¼‰
- `getResult`: è¿”å› `result` çš„å€¼ã€‚

ç»“æœä¸å®é™…ç»“æœç›¸å·®åœ¨ `10^-5` èŒƒå›´å†…çš„è§£è¢«è®¤ä¸ºæ˜¯æ­£ç¡®çš„ã€‚

**æç¤ºï¼š**

- `actions` æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ JSON å­—ç¬¦ä¸²æ•°ç»„
- `values` æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ JSON å­—ç¬¦ä¸²æ•°ç»„
- `2 <= actions.length <= 2 * 10^4`
- `1 <= values.length <= 2 * 104 - 1`
- `actions[i]` æ˜¯ "Calculator", "add", "subtract", "multiply", "divide", "power", å’Œ "getResult" å…¶ä¸­çš„å…ƒç´ 
- ç¬¬ä¸€ä¸ªæ“ä½œæ€»æ˜¯ "Calculator"
- æœ€åä¸€ä¸ªæ“ä½œæ€»æ˜¯ "getResult"

## è§£é¢˜æ€è·¯

1. **å®šä¹‰è®¡ç®—å™¨ç±»**ï¼šåˆ›å»ºä¸€ä¸ªç±» `Calculator`ï¼ŒåŒ…å«ä¸€ä¸ªå†…éƒ¨çŠ¶æ€å±æ€§ç”¨äºå­˜å‚¨å½“å‰çš„è®¡ç®—å€¼ã€‚
2. **å®ç°æ–¹æ³•**ï¼šå®ç° `add`, `subtract`, `multiply`, å’Œ `divide` æ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½æ¥å—ä¸€ä¸ªæ•°å­—ï¼Œå¹¶æ›´æ–°å½“å‰å€¼ã€‚
3. **è¿”å›å½“å‰å¯¹è±¡**ï¼šæ¯ä¸ªæ–¹æ³•éƒ½åº”è¿”å› `this`ï¼Œä»¥ä¾¿æ”¯æŒé“¾å¼è°ƒç”¨ã€‚
4. **å®ç° `getResult` æ–¹æ³•**ï¼šè¯¥æ–¹æ³•è¿”å›å½“å‰çš„è®¡ç®—ç»“æœã€‚

### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œæ¯ä¸ªæ“ä½œéƒ½æ˜¯å¸¸æ•°æ—¶é—´ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªä½¿ç”¨äº†å›ºå®šçš„é¢å¤–ç©ºé—´ã€‚

## ä»£ç 

```javascript
class Calculator {
	/**
	 * @param {number} value
	 */
	constructor(value) {
		this.val = value; // åˆå§‹åŒ–å½“å‰å€¼
	}

	/**
	 * @param {number} value
	 * @return {Calculator}
	 */
	add(value) {
		this.val += value;
		return this; // è¿”å›å½“å‰å¯¹è±¡
	}

	/**
	 * @param {number} value
	 * @return {Calculator}
	 */
	subtract(value) {
		this.val -= value;
		return this; // è¿”å›å½“å‰å¯¹è±¡
	}

	/**
	 * @param {number} value
	 * @return {Calculator}
	 */
	multiply(value) {
		this.val *= value;
		return this; // è¿”å›å½“å‰å¯¹è±¡
	}

	/**
	 * @param {number} value
	 * @return {Calculator}
	 */
	divide(value) {
		// æŠ›å‡ºå¼‚å¸¸
		if (value == 0) throw 'Division by zero is not allowed';
		this.val /= value;
		return this; // è¿”å›å½“å‰å¯¹è±¡
	}

	/**
	 * @param {number} value
	 * @return {Calculator}
	 */
	power(value) {
		this.val = Math.pow(this.val, value);
		return this; // è¿”å›å½“å‰å¯¹è±¡
	}

	/**
	 * @return {number}
	 */
	getResult() {
		return this.val;
	}
}
```
