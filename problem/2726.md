# [2726. ä½¿ç”¨æ–¹æ³•é“¾çš„è®¡ç®—å™¨](https://leetcode.com/problems/calculator-with-method-chaining)

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/calculator-with-method-chaining)

## é¢˜ç›®

<p>è®¾è®¡ä¸€ä¸ªç±» <code>Calculator</code> ã€‚è¯¥ç±»åº”æä¾›åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•å’Œä¹˜æ–¹ç­‰æ•°å­¦è¿ç®—åŠŸèƒ½ã€‚åŒæ—¶ï¼Œå®ƒè¿˜åº”æ”¯æŒè¿ç»­æ“ä½œçš„æ–¹æ³•é“¾å¼è°ƒç”¨ã€‚<code>Calculator</code> ç±»çš„æ„é€ å‡½æ•°åº”æ¥å—ä¸€ä¸ªæ•°å­—ä½œä¸º <code>result</code> çš„åˆå§‹å€¼ã€‚</p>

<p>ä½ çš„ <code>Calculator</code> ç±»åº”åŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š</p>

<ul>
	<li><code>add</code> - å°†ç»™å®šçš„æ•°å­— <code>value</code> ä¸ <code>result</code> ç›¸åŠ ï¼Œå¹¶è¿”å›æ›´æ–°åçš„ <code>Calculator</code> å¯¹è±¡ã€‚</li>
	<li><code>subtract</code> - ä» <code>result</code> ä¸­å‡å»ç»™å®šçš„æ•°å­— <code>value</code>&nbsp;ï¼Œå¹¶è¿”å›æ›´æ–°åçš„ <code>Calculator</code> å¯¹è±¡ã€‚</li>
	<li><code>multiply</code> - å°† <code>result</code> ä¹˜ä»¥ç»™å®šçš„æ•°å­— <code>value</code> ï¼Œå¹¶è¿”å›æ›´æ–°åçš„&nbsp;<code>Calculator</code> å¯¹è±¡ã€‚</li>
	<li><code>divide</code> - å°† <code>result</code> é™¤ä»¥ç»™å®šçš„æ•°å­— <code>value</code> ï¼Œå¹¶è¿”å›æ›´æ–°åçš„&nbsp;<code>Calculator</code> å¯¹è±¡ã€‚å¦‚æœä¼ å…¥çš„å€¼ä¸º <code>0</code> ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ <code>"Division by zero is not allowed"</code> ã€‚</li>
	<li><code>power</code> - è®¡ç®— <code>result</code> çš„å¹‚ï¼ŒæŒ‡æ•°ä¸ºç»™å®šçš„æ•°å­— <code>value</code> ï¼Œå¹¶è¿”å›æ›´æ–°åçš„&nbsp;<code>Calculator</code> å¯¹è±¡ã€‚ï¼ˆ<code>result = result ^ value</code> ï¼‰</li>
	<li><code>getResult</code> - è¿”å› <code>result</code> çš„å€¼ã€‚</li>
</ul>

<p>ç»“æœä¸å®é™…ç»“æœç›¸å·®åœ¨ <code>10<sup>-5</sup></code><sup>&nbsp;</sup>èŒƒå›´å†…çš„è§£è¢«è®¤ä¸ºæ˜¯æ­£ç¡®çš„ã€‚</p>

<p>&nbsp;</p>

<p><b>ç¤ºä¾‹ 1ï¼š</b></p>

<pre>
<b>è¾“å…¥ï¼š</b>actions = ["Calculator", "add", "subtract", "getResult"], 
values = [10, 5, 7]
<b>è¾“å‡ºï¼š</b>8
<b>è§£é‡Šï¼š</b>
new Calculator(10).add(5).subtract(7).getResult() // 10 + 5 - 7 = 8
</pre>

<p><strong class="example">ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<b>è¾“å…¥ï¼š</b>actions = ["Calculator", "multiply", "power", "getResult"], 
values = [2, 5, 2]
<b>è¾“å‡ºï¼š</b>100
<b>è§£é‡Šï¼š</b>
new Calculator(2).multiply(5).power(2).getResult() // (2 * 5) ^ 2 = 100
</pre>

<p><strong class="example">ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<b>è¾“å…¥ï¼š</b>actions = ["Calculator", "divide", "getResult"], 
values = [20, 0]
<b>è¾“å‡ºï¼š</b>"Division by zero is not allowed"
<b>è§£é‡Šï¼š</b>
new Calculator(20).divide(0).getResult() // 20 / 0 

ç”±äºä¸èƒ½é™¤ä»¥é›¶ï¼Œå› æ­¤åº”æŠ›å‡ºé”™è¯¯ã€‚
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>actions</code>&nbsp;æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ JSON å­—ç¬¦ä¸²æ•°ç»„</li>
	<li><code>values</code>&nbsp;æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ JSON å­—ç¬¦ä¸²æ•°ç»„</li>
	<li><code>2 &lt;= actions.length &lt;= 2 * 10<sup>4</sup></code></li>
	<li><code>1 &lt;= values.length &lt;= 2 * 10<sup>4</sup>&nbsp;- 1</code></li>
	<li><code>actions[i]</code>&nbsp;æ˜¯ "Calculator", "add", "subtract", "multiply", "divide", "power", å’Œ "getResult" å…¶ä¸­çš„å…ƒç´ </li>
	<li>ç¬¬ä¸€ä¸ªæ“ä½œæ€»æ˜¯ "Calculator"</li>
	<li>æœ€åä¸€ä¸ªæ“ä½œæ€»æ˜¯&nbsp;"getResult"</li>
</ul>


## è§£é¢˜æ€è·¯

1. **å®šä¹‰è®¡ç®—å™¨ç±»**ï¼šåˆ›å»ºä¸€ä¸ªç±» `Calculator`ï¼ŒåŒ…å«ä¸€ä¸ªå†…éƒ¨çŠ¶æ€å±æ€§ç”¨äºå­˜å‚¨å½“å‰çš„è®¡ç®—å€¼ã€‚
2. **å®ç°æ–¹æ³•**ï¼šå®ç° `add`, `subtract`, `multiply`, å’Œ `divide` æ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½æ¥å—ä¸€ä¸ªæ•°å­—ï¼Œå¹¶æ›´æ–°å½“å‰å€¼ã€‚
3. **è¿”å›å½“å‰å¯¹è±¡**ï¼šæ¯ä¸ªæ–¹æ³•éƒ½åº”è¿”å› `this`ï¼Œä»¥ä¾¿æ”¯æŒé“¾å¼è°ƒç”¨ã€‚
4. **å®ç° `getResult` æ–¹æ³•**ï¼šè¯¥æ–¹æ³•è¿”å›å½“å‰çš„è®¡ç®—ç»“æœã€‚

### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œæ¯ä¸ªæ“ä½œéƒ½æ˜¯å¸¸æ•°æ—¶é—´ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªä½¿ç”¨äº†å›ºå®šçš„é¢å¤–ç©ºé—´ã€‚

## ä»£ç 

```javascript
class Calculator {
	/**
	 * @param {number} value
	 */
	constructor(value) {
		this.val = value; // åˆå§‹åŒ–å½“å‰å€¼
	}

	/**
	 * @param {number} value
	 * @return {Calculator}
	 */
	add(value) {
		this.val += value;
		return this; // è¿”å›å½“å‰å¯¹è±¡
	}

	/**
	 * @param {number} value
	 * @return {Calculator}
	 */
	subtract(value) {
		this.val -= value;
		return this; // è¿”å›å½“å‰å¯¹è±¡
	}

	/**
	 * @param {number} value
	 * @return {Calculator}
	 */
	multiply(value) {
		this.val *= value;
		return this; // è¿”å›å½“å‰å¯¹è±¡
	}

	/**
	 * @param {number} value
	 * @return {Calculator}
	 */
	divide(value) {
		// æŠ›å‡ºå¼‚å¸¸
		if (value == 0) throw 'Division by zero is not allowed';
		this.val /= value;
		return this; // è¿”å›å½“å‰å¯¹è±¡
	}

	/**
	 * @param {number} value
	 * @return {Calculator}
	 */
	power(value) {
		this.val = Math.pow(this.val, value);
		return this; // è¿”å›å½“å‰å¯¹è±¡
	}

	/**
	 * @return {number}
	 */
	getResult() {
		return this.val;
	}
}
```
