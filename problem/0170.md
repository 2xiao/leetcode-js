---
title: 170. ä¸¤æ•°ä¹‹å’Œ III - æ•°æ®ç»“æ„è®¾è®¡ ğŸ”’
description: LeetCode 170. ä¸¤æ•°ä¹‹å’Œ III - æ•°æ®ç»“æ„è®¾è®¡ ğŸ”’é¢˜è§£ï¼ŒTwo Sum III - Data structure designï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 170. ä¸¤æ•°ä¹‹å’Œ III - æ•°æ®ç»“æ„è®¾è®¡ ğŸ”’
  - ä¸¤æ•°ä¹‹å’Œ III - æ•°æ®ç»“æ„è®¾è®¡
  - Two Sum III - Data structure design
  - è§£é¢˜æ€è·¯
  - è®¾è®¡
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
  - åŒæŒ‡é’ˆ
  - æ•°æ®æµ
---

# 170. ä¸¤æ•°ä¹‹å’Œ III - æ•°æ®ç»“æ„è®¾è®¡ ğŸ”’

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/tag/design.md) [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`æ•°æ®æµ`](/tag/data-stream.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/two-sum-iii-data-structure-design) [`LeetCode`](https://leetcode.com/problems/two-sum-iii-data-structure-design)

## é¢˜ç›®

Design a data structure that accepts a stream of integers and checks if it has
a pair of integers that sum up to a particular value.

Implement the `TwoSum` class:

- `TwoSum()` Initializes the `TwoSum` object, with an empty array initially.
- `void add(int number)` Adds `number` to the data structure.
- `boolean find(int value)` Returns `true` if there exists any pair of numbers whose sum is equal to `value`, otherwise, it returns `false`.

**Example 1:**

> **Input**
>
> ["TwoSum", "add", "add", "add", "find", "find"]
>
> [[], [1], [3], [5], [4], [7]]
>
> **Output**
>
> [null, null, null, null, true, false]
>
> **Explanation**
>
> ```
> TwoSum twoSum = new TwoSum();
>
> twoSum.add(1); // [] --> [1]
>
> twoSum.add(3); // [1] --> [1,3]
>
> twoSum.add(5); // [1,3] --> [1,3,5]
>
> twoSum.find(4); // 1 + 3 = 4, return true
>
> twoSum.find(7); // No two integers sum up to 7, return false
> ```

**Constraints:**

- `-10^5 <= number <= 10^5`
- `-231 <= value <= 231 - 1`
- At most `10^4` calls will be made to `add` and `find`.

## é¢˜ç›®å¤§æ„

è®¾è®¡ä¸€ä¸ªæ¥æ”¶æ•´æ•°æµçš„æ•°æ®ç»“æ„ï¼Œè¯¥æ•°æ®ç»“æ„æ”¯æŒæ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸¤æ•°ä¹‹å’Œç­‰äºç‰¹å®šå€¼ã€‚

å®ç° `TwoSum` ç±»ï¼š

- `TwoSum()` ä½¿ç”¨ç©ºæ•°ç»„åˆå§‹åŒ– `TwoSum` å¯¹è±¡
- `void add(int number)` å‘æ•°æ®ç»“æ„æ·»åŠ ä¸€ä¸ªæ•° `number`
- `boolean find(int value)` å¯»æ‰¾æ•°æ®ç»“æ„ä¸­æ˜¯å¦å­˜åœ¨ä¸€å¯¹æ•´æ•°ï¼Œä½¿å¾—ä¸¤æ•°ä¹‹å’Œä¸ç»™å®šçš„å€¼ç›¸ç­‰ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**ç¤ºä¾‹ï¼š**

> **è¾“å…¥ï¼š**
>
> ["TwoSum", "add", "add", "add", "find", "find"]
>
> [[], [1], [3], [5], [4], [7]]
>
> **è¾“å‡ºï¼š**
>
> [null, null, null, null, true, false]
>
> **è§£é‡Šï¼š**
>
> ```
> TwoSum twoSum = new TwoSum();
>
> twoSum.add(1); // [] --> [1]
>
> twoSum.add(3); // [1] --> [1,3]
>
> twoSum.add(5); // [1,3] --> [1,3,5]
>
> twoSum.find(4); // 1 + 3 = 4ï¼Œè¿”å› true
>
> twoSum.find(7); // æ²¡æœ‰ä¸¤ä¸ªæ•´æ•°åŠ èµ·æ¥ç­‰äº 7 ï¼Œè¿”å› false
> ```

**æç¤ºï¼š**

- `-10^5 <= number <= 10^5`
- `-231 <= value <= 231 - 1`
- æœ€å¤šè°ƒç”¨ `10^4` æ¬¡ `add` å’Œ `find`

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šå“ˆå¸Œè¡¨

1. ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨ `map` æ¥å­˜å‚¨æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°ã€‚
2. å¯¹äº `find(value)` æ“ä½œï¼š
   - éå†å“ˆå¸Œè¡¨ä¸­çš„æ¯ä¸ªé”® `key`ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨ `value - key`ï¼š
     - å¦‚æœ `key` å’Œ `value - key` ä¸åŒï¼Œç›´æ¥æ£€æŸ¥æ˜¯å¦å­˜åœ¨ `value - key`ã€‚
     - å¦‚æœ `key` å’Œ `value - key` ç›¸åŒï¼Œç¡®ä¿å…¶å‡ºç°æ¬¡æ•°å¤§äº 1ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š
  - **`add(number)`**ï¼š`O(1)`ï¼ˆå“ˆå¸Œè¡¨æ’å…¥ï¼‰ã€‚
  - **`find(value)`**ï¼š`O(k)`ï¼Œå…¶ä¸­ `k` æ˜¯å“ˆå¸Œè¡¨ä¸­å­˜å‚¨çš„ä¸åŒæ•°å­—çš„æ•°é‡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(k)`ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨ä¸åŒæ•°å­—çš„æ•°é‡ã€‚

**è‹¥é¢‘ç¹è°ƒç”¨ `add(number)`**ï¼Œæ¨èä½¿ç”¨ **å“ˆå¸Œè¡¨è§£æ³•**ï¼Œå› å…¶æ’å…¥é«˜æ•ˆã€‚

---

### æ€è·¯äºŒï¼šæ’åº + åŒæŒ‡é’ˆ

1. ä½¿ç”¨ä¸€ä¸ªæ•°ç»„ `list` æ¥å­˜å‚¨æ‰€æœ‰æ’å…¥çš„æ•°å­—ï¼ŒåŒæ—¶ç»´æŠ¤å…¶æœ‰åºæ€§ã€‚
2. å¯¹äº `find(value)` æ“ä½œï¼Œä½¿ç”¨åŒæŒ‡é’ˆæ³•ï¼š
   - å·¦æŒ‡é’ˆä»å¼€å¤´ï¼Œå³æŒ‡é’ˆä»æœ«å°¾ã€‚
   - å¦‚æœä¸¤æ•°å’Œå°äºç›®æ ‡å€¼ï¼Œå·¦æŒ‡é’ˆå³ç§»ï¼›å¦‚æœå¤§äºç›®æ ‡å€¼ï¼Œå³æŒ‡é’ˆå·¦ç§»ï¼›å¦‚æœç­‰äºç›®æ ‡å€¼ï¼Œè¿”å› `true`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š
  - **`add(number)`**ï¼š`O(n)`ï¼ŒäºŒåˆ†æŸ¥æ‰¾æ’å…¥ä½ç½® `O(log n)`ï¼Œæ’å…¥å…ƒç´ `O(n)`ã€‚
  - **`find(value)`**ï¼š`O(n)`ï¼ŒåŒæŒ‡é’ˆéå†æ•°ç»„ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œä½¿ç”¨æœ‰åºæ•°ç»„å­˜å‚¨æ‰€æœ‰æ’å…¥çš„æ•°å­—ã€‚

---

### æ€è·¯ä¸‰ï¼šé¢„è®¡ç®—æ‰€æœ‰ä¸¤æ•°ä¹‹å’Œ

1. ç›´æ¥å­˜å‚¨æ‰€æœ‰å¯èƒ½çš„ä¸¤æ•°ä¹‹å’Œï¼ˆä»¥ç©ºé—´æ¢æ—¶é—´ï¼‰ã€‚
2. ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œé›†åˆ `sums` æ¥å­˜å‚¨ä¸¤æ•°ä¹‹å’Œã€‚
3. å¯¹äº `add(number)` æ“ä½œï¼šéå†å·²æœ‰çš„æ‰€æœ‰æ•°å­—ï¼Œå°† `number` å’Œå®ƒä»¬çš„å’ŒåŠ å…¥åˆ° `sums` ä¸­ã€‚
4. å¯¹äº `find(value)` æ“ä½œï¼šç›´æ¥æ£€æŸ¥ `sums` æ˜¯å¦åŒ…å« `value`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š
  - **`add(number)`**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å½“å‰å·²æ·»åŠ çš„æ•°å­—æ•°é‡ã€‚
  - **`find(value)`**ï¼š`O(1)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n^2)`ï¼Œåœ¨æœ€åæƒ…å†µä¸‹ï¼ŒSet ä¸­å¯èƒ½å­˜å‚¨äº† `n * (n - 1) / 2` ä¸ªå’Œã€‚

**è‹¥é¢‘ç¹è°ƒç”¨ `find(value)`**ï¼Œæ¨èä½¿ç”¨ **é¢„è®¡ç®—è§£æ³•**ï¼Œå› å…¶æŸ¥è¯¢æ•ˆç‡é«˜ã€‚ä½†æ­¤è§£æ³•åœ¨æ•°æ®è§„æ¨¡è¾ƒå¤§æ—¶å¯èƒ½ä¸é€‚ç”¨ï¼Œå› ä¸º `sums` ä¼šå¿«é€Ÿè†¨èƒ€ï¼Œå ç”¨å¤§é‡å†…å­˜ã€‚

## ä»£ç 

::: code-tabs

@tab å“ˆå¸Œè¡¨

```javascript
class TwoSum {
	constructor() {
		this.map = new Map();
	}

	add(number) {
		this.map.set(number, (this.map.get(number) || 0) + 1);
	}

	find(value) {
		for (let key of this.map.keys()) {
			const complement = value - key;
			if (
				(complement !== key && this.map.has(complement)) ||
				(complement === key && this.map.get(key) > 1)
			) {
				return true;
			}
		}
		return false;
	}
}
```

@tab æ’åº + åŒæŒ‡é’ˆ

```javascript
class TwoSum {
	constructor() {
		this.list = [];
	}

	add(number) {
		let pos = this.binaryInsertPosition(number);
		this.list.splice(pos, 0, number); // æ’å…¥ä¿æŒæœ‰åº
	}

	find(value) {
		let left = 0,
			right = this.list.length - 1;
		while (left < right) {
			const sum = this.list[left] + this.list[right];
			if (sum === value) {
				return true;
			} else if (sum < value) {
				left++;
			} else {
				right--;
			}
		}
		return false;
	}

	binaryInsertPosition(target) {
		let left = 0,
			right = this.list.length;
		while (left < right) {
			const mid = Math.floor((left + right) / 2);
			if (this.list[mid] < target) {
				left = mid + 1;
			} else {
				right = mid;
			}
		}
		return left;
	}
}
```

@tab é¢„è®¡ç®—æ‰€æœ‰ä¸¤æ•°ä¹‹å’Œ

```javascript
class TwoSum {
	constructor() {
		this.nums = [];
		this.sums = new Set();
	}

	add(number) {
		for (let num of this.nums) {
			this.sums.add(num + number);
		}
		this.nums.push(number);
	}

	find(value) {
		return this.sums.has(value);
	}
}
```

ï¼šï¼šï¼š

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1 | ä¸¤æ•°ä¹‹å’Œ | [[âœ“]](/problem/0001.md) |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/two-sum) [ğŸ”—](https://leetcode.com/problems/two-sum) |
| 288 | å•è¯çš„å”¯ä¸€ç¼©å†™ ğŸ”’ |  |  [`è®¾è®¡`](/tag/design.md) [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/unique-word-abbreviation) [ğŸ”—](https://leetcode.com/problems/unique-word-abbreviation) |
| 653 | ä¸¤æ•°ä¹‹å’Œ IV - è¾“å…¥äºŒå‰æœç´¢æ ‘ | [[âœ“]](/problem/0653.md) |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) `4+` | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/two-sum-iv-input-is-a-bst) [ğŸ”—](https://leetcode.com/problems/two-sum-iv-input-is-a-bst) |