---
title: 390. æ¶ˆé™¤æ¸¸æˆ
description: LeetCode 390. æ¶ˆé™¤æ¸¸æˆé¢˜è§£ï¼ŒElimination Gameï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 390. æ¶ˆé™¤æ¸¸æˆ
  - æ¶ˆé™¤æ¸¸æˆ
  - Elimination Game
  - è§£é¢˜æ€è·¯
  - é€’å½’
  - æ•°å­¦
---

# 390. æ¶ˆé™¤æ¸¸æˆ

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`é€’å½’`](/tag/recursion.md) [`æ•°å­¦`](/tag/math.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/elimination-game) [`LeetCode`](https://leetcode.com/problems/elimination-game)

## é¢˜ç›®

You have a list `arr` of all integers in the range `[1, n]` sorted in a
strictly increasing order. Apply the following algorithm on `arr`:

- Starting from left to right, remove the first number and every other number afterward until you reach the end of the list.
- Repeat the previous step again, but this time from right to left, remove the rightmost number and every other number from the remaining numbers.
- Keep repeating the steps again, alternating left to right and right to left, until a single number remains.

Given the integer `n`, return _the last number that remains in_ `arr`.

**Example 1:**

> Input: n = 9
>
> Output: 6
>
> Explanation:
>
> arr = [**_1_** , 2, _**3**_ , 4, _**5**_ , 6, _**7**_ , 8, _**9**_]
>
> arr = [2, _**4**_ , 6, _**8**_]
>
> arr = [_**2**_ , 6]
>
> arr = [6]

**Example 2:**

> Input: n = 1
>
> Output: 1

**Constraints:**

- `1 <= n <= 10^9`

## é¢˜ç›®å¤§æ„

åˆ—è¡¨ `arr` ç”±åœ¨èŒƒå›´ `[1, n]` ä¸­çš„æ‰€æœ‰æ•´æ•°ç»„æˆï¼Œå¹¶æŒ‰ä¸¥æ ¼é€’å¢æ’åºã€‚è¯·ä½ å¯¹ `arr` åº”ç”¨ä¸‹è¿°ç®—æ³•ï¼š

- ä»å·¦åˆ°å³ï¼Œåˆ é™¤ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œç„¶åæ¯éš”ä¸€ä¸ªæ•°å­—åˆ é™¤ä¸€ä¸ªï¼Œç›´åˆ°åˆ°è¾¾åˆ—è¡¨æœ«å°¾ã€‚
- é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œä½†è¿™æ¬¡æ˜¯ä»å³åˆ°å·¦ã€‚ä¹Ÿå°±æ˜¯ï¼Œåˆ é™¤æœ€å³ä¾§çš„æ•°å­—ï¼Œç„¶åå‰©ä¸‹çš„æ•°å­—æ¯éš”ä¸€ä¸ªåˆ é™¤ä¸€ä¸ªã€‚
- ä¸æ–­é‡å¤è¿™ä¸¤æ­¥ï¼Œä»å·¦åˆ°å³å’Œä»å³åˆ°å·¦äº¤æ›¿è¿›è¡Œï¼Œç›´åˆ°åªå‰©ä¸‹ä¸€ä¸ªæ•°å­—ã€‚

ç»™ä½ æ•´æ•° `n` ï¼Œè¿”å› `arr` æœ€åå‰©ä¸‹çš„æ•°å­—ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** n = 9
>
> **è¾“å‡ºï¼š** 6
>
> **è§£é‡Šï¼š**
>
> arr = [**_1_** , 2, _**3**_ , 4, _**5**_ , 6, _**7**_ , 8, _**9**_]
>
> arr = [2, _**4**_ , 6, _**8**_]
>
> arr = [_**2**_ , 6]
>
> arr = [6]

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** n = 1
>
> **è¾“å‡ºï¼š** 1

**æç¤ºï¼š**

- `1 <= n <= 10^9`

## è§£é¢˜æ€è·¯

1. **è§‚å¯Ÿåˆ é™¤è§„å¾‹**

æ¯è½®çš„åˆ é™¤åˆ†ä¸ºä¸¤ç§æ–¹å¼ï¼š

- **ä»å·¦åˆ°å³åˆ é™¤**ï¼šåºåˆ—ä¸­æ¯ä¸ªå¥‡æ•°ä½ç½®çš„å…ƒç´ éƒ½ä¼šè¢«åˆ é™¤ã€‚è¿™æ—¶ï¼Œå‰©ä½™çš„å…ƒç´ åºåˆ—é¦–é¡¹å§‹ç»ˆå‘ç”Ÿå˜åŒ–ã€‚
- **ä»å³åˆ°å·¦åˆ é™¤**ï¼šè‹¥å‰©ä½™å…ƒç´ æ•°é‡ä¸ºå¥‡æ•°æ—¶ï¼Œåºåˆ—é¦–é¡¹ä¹Ÿä¼šå˜åŒ–ï¼›è‹¥ä¸ºå¶æ•°æ—¶ï¼Œåºåˆ—é¦–é¡¹ä¿æŒä¸å˜ã€‚

2. **å…³é”®å˜é‡**

- `head`ï¼šè®°å½•å½“å‰åºåˆ—çš„èµ·å§‹æ•°å­—ã€‚
- `step`ï¼šå½“å‰åºåˆ—ä¸­ä¸¤ä¸ªç›¸é‚»æ•°å­—ä¹‹é—´çš„è·ç¦»ï¼Œåˆå§‹ä¸º `1`ã€‚
- `n`ï¼šå½“å‰åºåˆ—ä¸­å‰©ä½™çš„æ•°å­—ä¸ªæ•°ã€‚
- `left`ï¼šå¸ƒå°”å˜é‡ï¼Œæ ‡è¯†å½“å‰è½®çš„åˆ é™¤æ–¹å‘ï¼Œ`true` è¡¨ç¤ºä»å·¦åˆ°å³ï¼Œ`false` è¡¨ç¤ºä»å³åˆ°å·¦ã€‚

3. **çŠ¶æ€æ›´æ–°è§„åˆ™**

- **æ›´æ–°é¦–é¡¹ (`head`)**
  - å¦‚æœä»å·¦åˆ°å³åˆ é™¤ï¼Œé¦–é¡¹ä¸€å®šå˜åŒ–ï¼š`head += step`
  - å¦‚æœä»å³åˆ°å·¦åˆ é™¤ï¼Œåªæœ‰å½“ `n` ä¸ºå¥‡æ•°æ—¶é¦–é¡¹å˜åŒ–ï¼š`head += step`
- **æ›´æ–°æ­¥é•¿ (`step`)**
  - æ¯è½®æ­¥é•¿åŠ å€ï¼š`step *= 2`
- **æ›´æ–°å‰©ä½™é•¿åº¦ (`n`)**
  - æ¯è½®åˆ é™¤ä¸€åŠå…ƒç´ ï¼š`n = Math.floor(n / 2)`
- **åˆ‡æ¢æ–¹å‘**
  - `left = !left`

4. **ç®—æ³•ç»“æŸæ¡ä»¶**

å½“åºåˆ—åªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ æ—¶ (`n === 1`)ï¼Œå³ä¸ºæœ€ç»ˆç»“æœã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(log n)`ï¼Œæ¯è½® `n` å‡åŠï¼Œå› æ­¤éœ€è¦è¿›è¡Œ `log n` è½®æ“ä½œã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªä½¿ç”¨äº†å¸¸æ•°ç©ºé—´å­˜å‚¨å˜é‡ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} n
 * @return {number}
 */
var lastRemaining = function (n) {
	let head = 1;
	let step = 1;
	let left = true;
	while (n > 1) {
		if (left || n % 2 == 1) {
			head += step;
		}
		step *= 2;
		n = Math.floor(n / 2);
		left = !left;
	}
	return head;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 2293 | æå¤§æå°æ¸¸æˆ | [[âœ“]](/problem/2293.md) |  [`æ•°ç»„`](/tag/array.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/min-max-game) [ğŸ”—](https://leetcode.com/problems/min-max-game) |