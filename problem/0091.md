---
title: 91. è§£ç æ–¹æ³•
description: LeetCode 91. è§£ç æ–¹æ³•é¢˜è§£ï¼ŒDecode Waysï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 91. è§£ç æ–¹æ³•
  - è§£ç æ–¹æ³•
  - Decode Ways
  - è§£é¢˜æ€è·¯
  - å­—ç¬¦ä¸²
  - åŠ¨æ€è§„åˆ’
---

# 91. è§£ç æ–¹æ³•

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/decode-ways) [`LeetCode`](https://leetcode.com/problems/decode-ways)

## é¢˜ç›®

You have intercepted a secret message encoded as a string of numbers. The
message is **decoded** via the following mapping:

`"1" -> 'A'  
"2" -> 'B'  
...  
"25" -> 'Y'  
"26" -> 'Z'`

However, while decoding the message, you realize that there are many different
ways you can decode the message because some codes are contained in other
codes (`"2"` and `"5"` vs `"25"`).

For example, `"11106"` can be decoded into:

- `"AAJF"` with the grouping `(1, 1, 10, 6)`
- `"KJF"` with the grouping `(11, 10, 6)`
- The grouping `(1, 11, 06)` is invalid because `"06"` is not a valid code (only `"6"` is valid).

Note: there may be strings that are impossible to decode.

Given a string s containing only digits, return the **number of ways** to
**decode** it. If the entire string cannot be decoded in any valid way, return
`0`.

The test cases are generated so that the answer fits in a **32-bit** integer.

**Example 1:**

> **Input:** s = "12"
>
> **Output:** 2
>
> **Explanation:**
>
> "12" could be decoded as "AB" (1 2) or "L" (12).

**Example 2:**

> **Input:** s = "226"
>
> **Output:** 3
>
> **Explanation:**
>
> "226" could be decoded as "BZ" (2 26), "VF" (22 6), or "BBF" (2 2 6).

**Example 3:**

> **Input:** s = "06"
>
> **Output:** 0
>
> **Explanation:**
>
> "06" cannot be mapped to "F" because of the leading zero ("6" is different from "06"). In this case, the string is not a valid encoding, so return 0.

**Constraints:**

- `1 <= s.length <= 100`
- `s` contains only digits and may contain leading zero(s).

## é¢˜ç›®å¤§æ„

ä¸€æ¡åŒ…å«å­—æ¯ `A-Z` çš„æ¶ˆæ¯é€šè¿‡ä»¥ä¸‹æ˜ å°„è¿›è¡Œäº† **ç¼–ç ** ï¼š

`"1" -> 'A'  
"2" -> 'B'  
...  
"25" -> 'Y'  
"26" -> 'Z'`

ç„¶è€Œï¼Œåœ¨ **è§£ç ** å·²ç¼–ç çš„æ¶ˆæ¯æ—¶ï¼Œä½ æ„è¯†åˆ°æœ‰è®¸å¤šä¸åŒçš„æ–¹å¼æ¥è§£ç ï¼Œå› ä¸ºæœ‰äº›ç¼–ç è¢«åŒ…å«åœ¨å…¶å®ƒç¼–ç å½“ä¸­ï¼ˆ`"2"` å’Œ `"5"` ä¸ `"25"`ï¼‰ã€‚

ä¾‹å¦‚ï¼Œ`"11106"` å¯ä»¥æ˜ å°„ä¸ºï¼š

- `"AAJF"` ï¼Œå°†æ¶ˆæ¯åˆ†ç»„ä¸º `(1, 1, 10, 6)`
- `"KJF"` ï¼Œå°†æ¶ˆæ¯åˆ†ç»„ä¸º `(11, 10, 6)`
- æ¶ˆæ¯ä¸èƒ½åˆ†ç»„ä¸º `(1, 11, 06)` ï¼Œå› ä¸º `"06"` ä¸æ˜¯ä¸€ä¸ªåˆæ³•ç¼–ç ï¼ˆåªæœ‰ "6" æ˜¯åˆæ³•çš„ï¼‰ã€‚

æ³¨æ„ï¼Œå¯èƒ½å­˜åœ¨æ— æ³•è§£ç çš„å­—ç¬¦ä¸²ã€‚

ç»™ä½ ä¸€ä¸ªåªå«æ•°å­—çš„ **éç©º** å­—ç¬¦ä¸² `s` ï¼Œè¯·è®¡ç®—å¹¶è¿”å› **è§£ç ** æ–¹æ³•çš„ **æ€»æ•°** ã€‚å¦‚æœæ²¡æœ‰åˆæ³•çš„æ–¹å¼è§£ç æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å› `0`ã€‚

é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆè‚¯å®šæ˜¯ä¸€ä¸ª **32 ä½** çš„æ•´æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** s = "12"
>
> **è¾“å‡ºï¼š** 2
>
> **è§£é‡Šï¼š** å®ƒå¯ä»¥è§£ç ä¸º "AB"ï¼ˆ1 2ï¼‰æˆ–è€… "L"ï¼ˆ12ï¼‰ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = "226"
>
> **è¾“å‡ºï¼š** 3
>
> **è§£é‡Šï¼š** å®ƒå¯ä»¥è§£ç ä¸º "BZ" (2 26), "VF" (22 6), æˆ–è€… "BBF" (2 2 6) ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** s = "06"
>
> **è¾“å‡ºï¼š** 0
>
> **è§£é‡Šï¼š** "06" æ— æ³•æ˜ å°„åˆ° "F" ï¼Œå› ä¸ºå­˜åœ¨å‰å¯¼é›¶ï¼ˆ"6" å’Œ "06" å¹¶ä¸ç­‰ä»·ï¼‰ã€‚

**æç¤ºï¼š**

- `1 <= s.length <= 100`
- `s` åªåŒ…å«æ•°å­—ï¼Œå¹¶ä¸”å¯èƒ½åŒ…å«å‰å¯¼é›¶ã€‚

## è§£é¢˜æ€è·¯

å¯ä»¥ç”¨ **åŠ¨æ€è§„åˆ’** æ¥è§£å†³è¿™é“é¢˜ã€‚

1. **çŠ¶æ€å®šä¹‰**ï¼š

   - ç”¨ `dp[i]` è¡¨ç¤ºè§£ç å‰ `i` ä¸ªå­—ç¬¦çš„æ–¹æ³•æ€»æ•°ã€‚

2. **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ï¼š

   - å¦‚æœå½“å‰å­—ç¬¦ `s[i-1]` å¯ä»¥å•ç‹¬è§£ç ï¼ˆ`1 <= s[i-1] <= 9`ï¼‰ï¼Œåˆ™ `dp[i] += dp[i-1]`ã€‚
   - å¦‚æœå½“å‰å­—ç¬¦ä¸å‰ä¸€ä¸ªå­—ç¬¦ç»„åˆå¯ä»¥è§£ç ï¼ˆ`10 <= s[i-2..i-1] <= 26`ï¼‰ï¼Œåˆ™ `dp[i] += dp[i-2]`ã€‚

3. **åˆå§‹åŒ–**ï¼š

   - `dp[0] = 1`ï¼šç©ºå­—ç¬¦ä¸²æœ‰ä¸€ç§è§£ç æ–¹å¼ã€‚
   - `dp[1] = 1`ï¼šç¬¬ä¸€ä¸ªå­—ç¬¦éé›¶æ—¶åªæœ‰ä¸€ç§è§£ç æ–¹å¼ã€‚

4. **ç‰¹æ®Šæƒ…å†µ**ï¼š

   - å¦‚æœå­—ç¬¦ä¸²ä»¥ `0` å¼€å¤´ï¼Œåˆ™æ— æ³•è§£ç ï¼Œç›´æ¥è¿”å› `0`ã€‚

5. **æœ€ç»ˆç»“æœ**ï¼š
   - è¿”å› `dp[n]`ï¼Œå³è§£ç æ•´ä¸ªå­—ç¬¦ä¸²çš„æ–¹æ³•æ•°ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œéå†å­—ç¬¦ä¸²ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œä½¿ç”¨äº†å¤§å°ä¸º `n+1` çš„æ•°ç»„ `dp`ï¼Œå¯ä»¥ä¼˜åŒ–ä¸ºåªä½¿ç”¨ä¸¤ä¸ªå˜é‡ `prev2` å’Œ `prev1` æ¥è¡¨ç¤º `dp[i-2]` å’Œ `dp[i-1]`ï¼Œä»è€Œå°†ç©ºé—´å¤æ‚åº¦é™ä¸º `O(1)`ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var numDecodings = function (s) {
	if (s[0] === '0') return 0; // å­—ç¬¦ä¸²ä»¥0å¼€å¤´æ— æ³•è§£ç 

	const n = s.length;
	let dp = new Array(n + 1).fill(0);
	dp[0] = 1; // ç©ºå­—ç¬¦ä¸²åˆå§‹åŒ–
	dp[1] = 1; // ç¬¬ä¸€ä¸ªå­—ç¬¦æœ‰æ•ˆæ—¶åˆå§‹åŒ–ä¸º1

	for (let i = 2; i <= n; i++) {
		const one = Number(s[i - 1]); // å•ç‹¬è§£ç å½“å‰å­—ç¬¦
		const two = Number(s.slice(i - 2, i)); // è§£ç å½“å‰å’Œå‰ä¸€ä¸ªå­—ç¬¦ç»„åˆ

		if (one >= 1 && one <= 9) {
			dp[i] += dp[i - 1];
		}
		if (two >= 10 && two <= 26) {
			dp[i] += dp[i - 2];
		}
	}

	return dp[n];
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 639 | è§£ç æ–¹æ³• II |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/decode-ways-ii) [ğŸ”—](https://leetcode.com/problems/decode-ways-ii) |
| 1977 | åˆ’åˆ†æ•°å­—çš„æ–¹æ¡ˆæ•° |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`åç¼€æ•°ç»„`](/tag/suffix-array.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/number-of-ways-to-separate-numbers) [ğŸ”—](https://leetcode.com/problems/number-of-ways-to-separate-numbers) |
| 2266 | ç»Ÿè®¡æ‰“å­—æ–¹æ¡ˆæ•° |  |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ•°å­¦`](/tag/math.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/count-number-of-texts) [ğŸ”—](https://leetcode.com/problems/count-number-of-texts) |