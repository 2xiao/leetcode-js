---
title: 696. è®¡æ•°äºŒè¿›åˆ¶å­ä¸²
description: LeetCode 696. è®¡æ•°äºŒè¿›åˆ¶å­ä¸²é¢˜è§£ï¼ŒCount Binary Substringsï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 696. è®¡æ•°äºŒè¿›åˆ¶å­ä¸²
  - è®¡æ•°äºŒè¿›åˆ¶å­ä¸²
  - Count Binary Substrings
  - è§£é¢˜æ€è·¯
  - åŒæŒ‡é’ˆ
  - å­—ç¬¦ä¸²
---

# 696. è®¡æ•°äºŒè¿›åˆ¶å­ä¸²

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/count-binary-substrings) [`LeetCode`](https://leetcode.com/problems/count-binary-substrings)

## é¢˜ç›®

Given a binary string `s`, return the number of non-empty substrings that have
the same number of `0`'s and `1`'s, and all the `0`'s and all the `1`'s in
these substrings are grouped consecutively.

Substrings that occur multiple times are counted the number of times they
occur.

**Example 1:**

> Input: s = "00110011"
>
> Output: 6
>
> Explanation: There are 6 substrings that have equal number of consecutive 1's and 0's: "0011", "01", "1100", "10", "0011", and "01".
>
> Notice that some of these substrings repeat and are counted the number of times they occur.
>
> Also, "00110011" is not a valid substring because all the 0's (and 1's) are not grouped together.

**Example 2:**

> Input: s = "10101"
>
> Output: 4
>
> Explanation: There are 4 substrings: "10", "01", "10", "01" that have equal number of consecutive 1's and 0's.

**Constraints:**

- `1 <= s.length <= 10^5`
- `s[i]` is either `'0'` or `'1'`.

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œç»Ÿè®¡å¹¶è¿”å›å…·æœ‰ç›¸åŒæ•°é‡ `0` å’Œ `1` çš„éç©ºï¼ˆè¿ç»­ï¼‰å­å­—ç¬¦ä¸²çš„æ•°é‡ï¼Œå¹¶ä¸”è¿™äº›å­å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ `0` å’Œæ‰€æœ‰ `1`
éƒ½æ˜¯æˆç»„è¿ç»­çš„ã€‚

é‡å¤å‡ºç°ï¼ˆä¸åŒä½ç½®ï¼‰çš„å­ä¸²ä¹Ÿè¦ç»Ÿè®¡å®ƒä»¬å‡ºç°çš„æ¬¡æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** s = "00110011"
>
> **è¾“å‡ºï¼š** 6
>
> **è§£é‡Šï¼š** 6 ä¸ªå­ä¸²æ»¡è¶³å…·æœ‰ç›¸åŒæ•°é‡çš„è¿ç»­ 1 å’Œ 0 ï¼š"0011"ã€"01"ã€"1100"ã€"10"ã€"0011" å’Œ "01" ã€‚
>
> æ³¨æ„ï¼Œä¸€äº›é‡å¤å‡ºç°çš„å­ä¸²ï¼ˆä¸åŒä½ç½®ï¼‰è¦ç»Ÿè®¡å®ƒä»¬å‡ºç°çš„æ¬¡æ•°ã€‚
>
> å¦å¤–ï¼Œ"00110011" ä¸æ˜¯æœ‰æ•ˆçš„å­ä¸²ï¼Œå› ä¸ºæ‰€æœ‰çš„ 0ï¼ˆè¿˜æœ‰ 1 ï¼‰æ²¡æœ‰ç»„åˆåœ¨ä¸€èµ·ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = "10101"
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** æœ‰ 4 ä¸ªå­ä¸²ï¼š"10"ã€"01"ã€"10"ã€"01" ï¼Œå…·æœ‰ç›¸åŒæ•°é‡çš„è¿ç»­ 1 å’Œ 0 ã€‚

**æç¤ºï¼š**

- `1 <= s.length <= 10^5`
- `s[i]` ä¸º `'0'` æˆ– `'1'`

## è§£é¢˜æ€è·¯

ä¸ºäº†æ»¡è¶³æ¡ä»¶ï¼Œå¯ä»¥å‘ç°ï¼š

1. å­—ç¬¦ä¸²ä¸­æ¯ä¸€ç»„è¿ç»­çš„ `0` å’Œ `1` æ˜¯äº’ç›¸åˆ†éš”çš„ï¼Œå¯ä»¥æŒ‰è¿ç»­çš„ `0` å’Œ `1` åˆ†ç»„ã€‚
   ä¾‹å¦‚ï¼Œå¯¹äº `s = "001110011"`, å¯åˆ†ä¸ºï¼š`[2, 3, 2, 2]`ï¼Œè¡¨ç¤ºè¿ç»­å‡ºç°çš„ `0` å’Œ `1` çš„æ•°é‡ã€‚
2. ä»»æ„ä¸¤ä¸ªç›¸é‚»çš„åˆ†ç»„ä¸­ï¼Œèƒ½å½¢æˆçš„ç¬¦åˆæ¡ä»¶çš„å­ä¸²æ•°é‡ï¼Œç­‰äºè¿™ä¸¤ä¸ªåˆ†ç»„ä¸­è¾ƒå°çš„é‚£ä¸ªç»„çš„æ•°é‡ã€‚
   - ä¾‹å¦‚åˆ†ç»„ä¸º `[2, 3]`ï¼Œèƒ½å½¢æˆçš„å­ä¸²ä¸º `min(2, 3) = 2`ã€‚
3. æœ€ç»ˆåªéœ€ç´¯åŠ æ‰€æœ‰ç›¸é‚»åˆ†ç»„çš„æœ€å°å€¼å³å¯ã€‚

---

### æ€è·¯ä¸€ï¼šåˆ†ç»„æ•°ç»„

1. **åˆå§‹åŒ–åˆ†ç»„æ•°ç»„**:

   - å®šä¹‰ä¸€ä¸ªæ•°ç»„ `group`ï¼Œç”¨æ¥å­˜å‚¨å­—ç¬¦ä¸²ä¸­æ¯ä¸€ç»„è¿ç»­å­—ç¬¦çš„æ•°é‡ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå­—ç¬¦ä¸² `s = "00110"`ï¼Œ`group` æœ€ç»ˆä¼šå˜æˆ `[2, 2, 1]`ã€‚
   - åˆå§‹å€¼ä¸º `group = [1]`ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦ï¼ˆ`s[0]`ï¼‰çš„æ•°é‡æ˜¯ 1ã€‚

2. **éå†å­—ç¬¦ä¸²ï¼Œè¿›è¡Œåˆ†ç»„ç»Ÿè®¡**:

   - ä»ç¬¬äºŒä¸ªå­—ç¬¦ï¼ˆ`s[1]`ï¼‰å¼€å§‹éå†ï¼Œå¯¹æ¯”å½“å‰å­—ç¬¦å’Œå‰ä¸€ä¸ªå­—ç¬¦çš„å€¼ï¼ˆ`s[i] == s[i - 1]`ï¼‰ï¼š
     - å¦‚æœç›¸åŒï¼Œåˆ™å°†å½“å‰åˆ†ç»„çš„æ•°é‡åŠ  1ã€‚
     - å¦‚æœä¸åŒï¼Œè¯´æ˜è¿›å…¥äº†æ–°çš„ä¸€ç»„ï¼Œå°†æ–°çš„ä¸€ç»„æ•°é‡åˆå§‹åŒ–ä¸º 1 å¹¶åŠ å…¥ `group`ã€‚

3. **ç»Ÿè®¡æ»¡è¶³æ¡ä»¶çš„å­ä¸²æ•°é‡**:

   - éå† `group` ä¸­çš„ç›¸é‚»åˆ†ç»„ï¼ˆä»ç¬¬äºŒç»„å¼€å§‹ï¼‰
   - ä»»æ„ä¸¤ä¸ªç›¸é‚»åˆ†ç»„èƒ½å½¢æˆçš„å­ä¸²æ•°é‡æ˜¯å®ƒä»¬ä¹‹é—´çš„æœ€å°å€¼
   - ç´¯åŠ è¿™äº›æœ€å°å€¼ï¼Œå³ä¸ºæ»¡è¶³æ¡ä»¶çš„å­ä¸²æ€»æ•°ã€‚

4. **è¿”å›ç»“æœ**:
   - æœ€åè¿”å›ç´¯åŠ çš„å­ä¸²æ•°é‡ `res`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚
  - éå†å­—ç¬¦ä¸²æ—¶ï¼Œæ„é€ åˆ†ç»„æ•°ç»„éœ€è¦ `O(n)`ã€‚
  - éå†åˆ†ç»„æ•°ç»„æ—¶ï¼Œç»Ÿè®¡å­ä¸²æ•°é‡éœ€è¦ `O(k)`ï¼Œå…¶ä¸­ `k` æ˜¯åˆ†ç»„çš„æ•°é‡ã€‚
  - å› ä¸º `k <= n`ï¼Œæ€»å¤æ‚åº¦ä¸º `O(n)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ã€‚
  - æ˜¾å¼æ„é€ äº†ä¸€ä¸ªåˆ†ç»„æ•°ç»„ `group`ï¼Œç©ºé—´å¤æ‚åº¦ä¸º `O(k)`ï¼Œå…¶ä¸­ `k` æ˜¯åˆ†ç»„æ•°é‡ã€‚
  - åœ¨æç«¯æƒ…å†µä¸‹ï¼ˆå¦‚ `s = "010101"`ï¼‰ï¼Œåˆ†ç»„æ•°é‡ `k = n/2`ï¼Œå› æ­¤æœ€åæƒ…å†µä¸‹ç©ºé—´å¤æ‚åº¦ä¸º `O(n)`ã€‚

---

### æ€è·¯äºŒï¼šä¼˜åŒ–ç‰ˆ

å¯ä»¥ç»§ç»­ä¼˜åŒ–ä¸Šè¿°æ€è·¯ï¼Œçœå»æ˜¾å¼çš„åˆ†ç»„ç»Ÿè®¡ï¼Œé‡‡ç”¨ä¸¤ä¸ªå˜é‡ `prev` å’Œ `cur` åŠ¨æ€æ›´æ–°å½“å‰å’Œä¸Šä¸€ä¸ªåˆ†ç»„çš„é•¿åº¦ã€‚

1. **åˆå§‹åŒ–å˜é‡**:

   - `prev = 0`: è¡¨ç¤ºä¸Šä¸€ç»„çš„è¿ç»­å­—ç¬¦æ•°é‡ï¼Œåˆå§‹ä¸º 0ã€‚
   - `cur = 1`: è¡¨ç¤ºå½“å‰ç»„çš„è¿ç»­å­—ç¬¦æ•°é‡ï¼Œåˆå§‹ä¸º 1ï¼ˆå› ä¸ºç¬¬ä¸€ä¸ªå­—ç¬¦æœ¬èº«æ˜¯ä¸€ç»„ï¼‰ã€‚
   - `res = 0`: ç”¨äºç´¯è®¡ç¬¦åˆæ¡ä»¶çš„å­ä¸²æ•°é‡ã€‚

2. **éå†å­—ç¬¦ä¸²**:

   - å¦‚æœå½“å‰å­—ç¬¦å’Œå‰ä¸€ä¸ªå­—ç¬¦ç›¸åŒï¼Œåˆ™å¢åŠ å½“å‰ç»„çš„æ•°é‡ `cur++`ã€‚
   - å¦‚æœä¸åŒï¼Œåˆ™ï¼š
     - å°†ä¸Šä¸€ç»„çš„é•¿åº¦ `prev` æ›´æ–°ä¸ºå½“å‰ç»„çš„é•¿åº¦ `cur`ã€‚
     - å°†å½“å‰ç»„ `cur` é‡ç½®ä¸º 1ï¼ˆæ–°å­—ç¬¦å¼€å§‹æ–°çš„åˆ†ç»„ï¼‰ã€‚
     - ç´¯åŠ  `res`ï¼ŒåŠ ä¸Šä¸Šä¸€ç»„å’Œå½“å‰ç»„ä¸­è¾ƒå°çš„é‚£ä¸ªå€¼ï¼š`res += Math.min(prev, cur)`ã€‚

3. **æ”¶å°¾å¤„ç†**:
   - éå†å®Œæˆåï¼Œå†åŠ ä¸€æ¬¡æœ€åä¸€ç»„å’Œå€’æ•°ç¬¬äºŒç»„çš„æ¯”è¾ƒå€¼ï¼š`res += Math.min(prev, cur)`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œéå†å­—ç¬¦ä¸²ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä¼˜åŒ–ç‰ˆä½¿ç”¨å¸¸æ•°ä¸ªå˜é‡ã€‚

## ä»£ç 

::: code-tabs
@tab åˆ†ç»„æ•°ç»„

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var countBinarySubstrings = function (s) {
	let group = [1];
	for (let i = 1; i < s.length; i++) {
		if (s[i - 1] == s[i]) {
			group[group.length - 1]++;
		} else {
			group.push(1);
		}
	}
	let res = 0;
	for (let i = 1; i < group.length; i++) {
		res += Math.min(group[i - 1], group[i]);
	}
	return res;
};
```

@tab ä¼˜åŒ–ç‰ˆ

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var countBinarySubstrings = function (s) {
	let prev = 0,
		cur = 1;
	let res = 0;
	for (let i = 1; i < s.length; i++) {
		if (s[i - 1] == s[i]) {
			cur++;
		} else {
			res += Math.min(prev, cur);
			prev = cur;
			cur = 1;
		}
	}
	return (res += Math.min(prev, cur));
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 271 | å­—ç¬¦ä¸²çš„ç¼–ç ä¸è§£ç  ğŸ”’ |  |  [`è®¾è®¡`](/tag/design.md) [`æ•°ç»„`](/tag/array.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/encode-and-decode-strings) [ğŸ”—](https://leetcode.com/problems/encode-and-decode-strings) |
| 2489 | å›ºå®šæ¯”ç‡çš„å­å­—ç¬¦ä¸²æ•° ğŸ”’ |  |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ•°å­¦`](/tag/math.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/number-of-substrings-with-fixed-ratio) [ğŸ”—](https://leetcode.com/problems/number-of-substrings-with-fixed-ratio) |
| 3234 | ç»Ÿè®¡ 1 æ˜¾è‘—çš„å­—ç¬¦ä¸²çš„æ•°é‡ |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`æšä¸¾`](/tag/enumeration.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/count-the-number-of-substrings-with-dominant-ones) [ğŸ”—](https://leetcode.com/problems/count-the-number-of-substrings-with-dominant-ones) |