---
title: 375. çŒœæ•°å­—å¤§å° II
description: LeetCode 375. çŒœæ•°å­—å¤§å° IIé¢˜è§£ï¼ŒGuess Number Higher or Lower IIï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 375. çŒœæ•°å­—å¤§å° II
  - çŒœæ•°å­—å¤§å° II
  - Guess Number Higher or Lower II
  - è§£é¢˜æ€è·¯
  - æ•°å­¦
  - åŠ¨æ€è§„åˆ’
  - åšå¼ˆ
---

# 375. çŒœæ•°å­—å¤§å° II

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°å­¦`](/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`åšå¼ˆ`](/tag/game-theory.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/guess-number-higher-or-lower-ii) [`LeetCode`](https://leetcode.com/problems/guess-number-higher-or-lower-ii)

## é¢˜ç›®

We are playing the Guessing Game. The game will work as follows:

1. I pick a number between `1` and `n`.
2. You guess a number.
3. If you guess the right number, **you win the game**.
4. If you guess the wrong number, then I will tell you whether the number I picked is **higher or lower** , and you will continue guessing.
5. Every time you guess a wrong number `x`, you will pay `x` dollars. If you run out of money, **you lose the game**.

Given a particular `n`, return _the minimum amount of money you need to
**guarantee a win regardless of what number I pick**_.

**Example 1:**

![](https://assets.leetcode.com/uploads/2020/09/10/graph.png)

> Input: n = 10
>
> Output: 16
>
> Explanation: The winning strategy is as follows:
>
> - The range is [1,10]. Guess 7.
>
> - If this is my number, your total is $0. Otherwise, you pay $7.
>
> - If my number is higher, the range is [8,10]. Guess 9.
>
>   - If this is my number, your total is $7. Otherwise, you pay $9.
>
>   - If my number is higher, it must be 10. Guess 10. Your total is $7 + $9 = $16.
>
>   - If my number is lower, it must be 8. Guess 8. Your total is $7 + $9 = $16.
>
> - If my number is lower, the range is [1,6]. Guess 3.
>
>   - If this is my number, your total is $7. Otherwise, you pay $3.
>
>   - If my number is higher, the range is [4,6]. Guess 5.
>
>     - If this is my number, your total is $7 + $3 = $10. Otherwise, you pay $5.
>
>     - If my number is higher, it must be 6. Guess 6. Your total is $7 + $3 + $5 = $15.
>
>     - If my number is lower, it must be 4. Guess 4. Your total is $7 + $3 + $5 = $15.
>
>   - If my number is lower, the range is [1,2]. Guess 1.
>
>     - If this is my number, your total is $7 + $3 = $10. Otherwise, you pay $1.
>
>     - If my number is higher, it must be 2. Guess 2. Your total is $7 + $3 + $1 = $11.
>
> The worst case in all these scenarios is that you pay $16. Hence, you only need $16 to guarantee a win.

**Example 2:**

> Input: n = 1
>
> Output: 0
>
> Explanation: There is only one possible number, so you can guess 1 and not have to pay anything.

**Example 3:**

> Input: n = 2
>
> Output: 1
>
> Explanation: There are two possible numbers, 1 and 2.
>
> - Guess 1.
>
>   - If this is my number, your total is $0. Otherwise, you pay $1.
>
>   - If my number is higher, it must be 2. Guess 2. Your total is $1.
>
> The worst case is that you pay $1.

**Constraints:**

- `1 <= n <= 200`

## é¢˜ç›®å¤§æ„

æˆ‘ä»¬æ­£åœ¨ç©ä¸€ä¸ªçŒœæ•°æ¸¸æˆï¼Œæ¸¸æˆè§„åˆ™å¦‚ä¸‹ï¼š

1. æˆ‘ä» `1` åˆ° `n` ä¹‹é—´é€‰æ‹©ä¸€ä¸ªæ•°å­—ã€‚
2. ä½ æ¥çŒœæˆ‘é€‰äº†å“ªä¸ªæ•°å­—ã€‚
3. å¦‚æœä½ çŒœåˆ°æ­£ç¡®çš„æ•°å­—ï¼Œå°±ä¼š **èµ¢å¾—æ¸¸æˆ** ã€‚
4. å¦‚æœä½ çŒœé”™äº†ï¼Œé‚£ä¹ˆæˆ‘ä¼šå‘Šè¯‰ä½ ï¼Œæˆ‘é€‰çš„æ•°å­—æ¯”ä½ çš„ **æ›´å¤§æˆ–è€…æ›´å°** ï¼Œå¹¶ä¸”ä½ éœ€è¦ç»§ç»­çŒœæ•°ã€‚
5. æ¯å½“ä½ çŒœäº†æ•°å­— `x` å¹¶ä¸”çŒœé”™äº†çš„æ—¶å€™ï¼Œä½ éœ€è¦æ”¯ä»˜é‡‘é¢ä¸º `x` çš„ç°é‡‘ã€‚å¦‚æœä½ èŠ±å…‰äº†é’±ï¼Œå°±ä¼š è¾“æ‰æ¸¸æˆ ã€‚

ç»™ä½ ä¸€ä¸ªç‰¹å®šçš„æ•°å­— `n` ï¼Œè¿”å›èƒ½å¤Ÿ **ç¡®ä¿ä½ è·èƒœ** çš„æœ€å°ç°é‡‘æ•°ï¼Œ**ä¸ç®¡æˆ‘é€‰æ‹©é‚£ä¸ªæ•°å­—** ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/09/10/graph.png)

> **è¾“å…¥ï¼š** n = 10
>
> **è¾“å‡ºï¼š** 16
>
> **è§£é‡Šï¼š** åˆ¶èƒœç­–ç•¥å¦‚ä¸‹ï¼š
>
> - æ•°å­—èŒƒå›´æ˜¯ [1,10] ã€‚ä½ å…ˆçŒœæµ‹æ•°å­—ä¸º 7 ã€‚
>
>   - å¦‚æœè¿™æ˜¯æˆ‘é€‰ä¸­çš„æ•°å­—ï¼Œä½ çš„æ€»è´¹ç”¨ä¸º $0 ã€‚å¦åˆ™ï¼Œä½ éœ€è¦æ”¯ä»˜ $7 ã€‚
>
>   - å¦‚æœæˆ‘çš„æ•°å­—æ›´å¤§ï¼Œåˆ™ä¸‹ä¸€æ­¥éœ€è¦çŒœæµ‹çš„æ•°å­—èŒƒå›´æ˜¯ [8,10] ã€‚ä½ å¯ä»¥çŒœæµ‹æ•°å­—ä¸º 9 ã€‚
>
>   - å¦‚æœè¿™æ˜¯æˆ‘é€‰ä¸­çš„æ•°å­—ï¼Œä½ çš„æ€»è´¹ç”¨ä¸º $7 ã€‚å¦åˆ™ï¼Œä½ éœ€è¦æ”¯ä»˜ $9 ã€‚
>
>   - å¦‚æœæˆ‘çš„æ•°å­—æ›´å¤§ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å­—ä¸€å®šæ˜¯ 10 ã€‚ä½ çŒœæµ‹æ•°å­—ä¸º 10 å¹¶èµ¢å¾—æ¸¸æˆï¼Œæ€»è´¹ç”¨ä¸º $7 + $9 = $16 ã€‚
>
>   - å¦‚æœæˆ‘çš„æ•°å­—æ›´å°ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å­—ä¸€å®šæ˜¯ 8 ã€‚ä½ çŒœæµ‹æ•°å­—ä¸º 8 å¹¶èµ¢å¾—æ¸¸æˆï¼Œæ€»è´¹ç”¨ä¸º $7 + $9 = $16 ã€‚
>
>   - å¦‚æœæˆ‘çš„æ•°å­—æ›´å°ï¼Œåˆ™ä¸‹ä¸€æ­¥éœ€è¦çŒœæµ‹çš„æ•°å­—èŒƒå›´æ˜¯ [1,6] ã€‚ä½ å¯ä»¥çŒœæµ‹æ•°å­—ä¸º 3 ã€‚
>
>   - å¦‚æœè¿™æ˜¯æˆ‘é€‰ä¸­çš„æ•°å­—ï¼Œä½ çš„æ€»è´¹ç”¨ä¸º $7 ã€‚å¦åˆ™ï¼Œä½ éœ€è¦æ”¯ä»˜ $3 ã€‚
>
>   - å¦‚æœæˆ‘çš„æ•°å­—æ›´å¤§ï¼Œåˆ™ä¸‹ä¸€æ­¥éœ€è¦çŒœæµ‹çš„æ•°å­—èŒƒå›´æ˜¯ [4,6] ã€‚ä½ å¯ä»¥çŒœæµ‹æ•°å­—ä¸º 5 ã€‚
>
>   - å¦‚æœè¿™æ˜¯æˆ‘é€‰ä¸­çš„æ•°å­—ï¼Œä½ çš„æ€»è´¹ç”¨ä¸º $7 + $3 = $10 ã€‚å¦åˆ™ï¼Œä½ éœ€è¦æ”¯ä»˜ $5 ã€‚
>
>   - å¦‚æœæˆ‘çš„æ•°å­—æ›´å¤§ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å­—ä¸€å®šæ˜¯ 6 ã€‚ä½ çŒœæµ‹æ•°å­—ä¸º 6 å¹¶èµ¢å¾—æ¸¸æˆï¼Œæ€»è´¹ç”¨ä¸º $7 + $3 + $5 = $15 ã€‚
>
>   - å¦‚æœæˆ‘çš„æ•°å­—æ›´å°ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å­—ä¸€å®šæ˜¯ 4 ã€‚ä½ çŒœæµ‹æ•°å­—ä¸º 4 å¹¶èµ¢å¾—æ¸¸æˆï¼Œæ€»è´¹ç”¨ä¸º $7 + $3 + $5 = $15 ã€‚
>
>   - å¦‚æœæˆ‘çš„æ•°å­—æ›´å°ï¼Œåˆ™ä¸‹ä¸€æ­¥éœ€è¦çŒœæµ‹çš„æ•°å­—èŒƒå›´æ˜¯ [1,2] ã€‚ä½ å¯ä»¥çŒœæµ‹æ•°å­—ä¸º 1 ã€‚
>
>   - å¦‚æœè¿™æ˜¯æˆ‘é€‰ä¸­çš„æ•°å­—ï¼Œä½ çš„æ€»è´¹ç”¨ä¸º $7 + $3 = $10 ã€‚å¦åˆ™ï¼Œä½ éœ€è¦æ”¯ä»˜ $1 ã€‚
>
>   - å¦‚æœæˆ‘çš„æ•°å­—æ›´å¤§ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å­—ä¸€å®šæ˜¯ 2 ã€‚ä½ çŒœæµ‹æ•°å­—ä¸º 2 å¹¶èµ¢å¾—æ¸¸æˆï¼Œæ€»è´¹ç”¨ä¸º $7 + $3 + $1 = $11 ã€‚
>
> åœ¨æœ€ç³Ÿç³•çš„æƒ…å†µä¸‹ï¼Œä½ éœ€è¦æ”¯ä»˜ $16 ã€‚å› æ­¤ï¼Œä½ åªéœ€è¦ $16 å°±å¯ä»¥ç¡®ä¿è‡ªå·±èµ¢å¾—æ¸¸æˆã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** n = 1
>
> **è¾“å‡ºï¼š** 0
>
> **è§£é‡Šï¼š** åªæœ‰ä¸€ä¸ªå¯èƒ½çš„æ•°å­—ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥çŒœ 1 å¹¶èµ¢å¾—æ¸¸æˆï¼Œæ— éœ€æ”¯ä»˜ä»»ä½•è´¹ç”¨ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** n = 2
>
> **è¾“å‡ºï¼š** 1
>
> **è§£é‡Šï¼š** æœ‰ä¸¤ä¸ªå¯èƒ½çš„æ•°å­— 1 å’Œ 2 ã€‚
>
> - ä½ å¯ä»¥å…ˆçŒœ 1 ã€‚
>
>   - å¦‚æœè¿™æ˜¯æˆ‘é€‰ä¸­çš„æ•°å­—ï¼Œä½ çš„æ€»è´¹ç”¨ä¸º $0 ã€‚å¦åˆ™ï¼Œä½ éœ€è¦æ”¯ä»˜ $1 ã€‚
>
>   - å¦‚æœæˆ‘çš„æ•°å­—æ›´å¤§ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å­—ä¸€å®šæ˜¯ 2 ã€‚ä½ çŒœæµ‹æ•°å­—ä¸º 2 å¹¶èµ¢å¾—æ¸¸æˆï¼Œæ€»è´¹ç”¨ä¸º $1 ã€‚
>
> æœ€ç³Ÿç³•çš„æƒ…å†µä¸‹ï¼Œä½ éœ€è¦æ”¯ä»˜ $1 ã€‚

**æç¤ºï¼š**

- `1 <= n <= 200`

## è§£é¢˜æ€è·¯

è¿™ä¸ªé—®é¢˜å¯ä»¥ç”¨ **åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programming, DPï¼‰** æ¥è§£å†³ã€‚æˆ‘ä»¬éœ€è¦è®¡ç®—åœ¨åŒºé—´ `[i, j]` å†…çŒœæ•°å­—çš„æœ€å°æˆæœ¬ï¼Œç„¶åé€æ­¥æ‰©å±•åˆ°æ•´ä¸ªåŒºé—´ `[1, n]`ã€‚

1.  **å®šä¹‰çŠ¶æ€**

    - è®¾ `dp[i][j]` è¡¨ç¤ºåœ¨åŒºé—´ `[i, j]` å†…çŒœæ•°å­—çš„æœ€å°æˆæœ¬ã€‚

2.  **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**

    - å‡è®¾ç¬¬ä¸€æ¬¡çŒœçš„æ•°å­—æ˜¯ `x` å¹¶ä¸”çŒœé”™ï¼Œåˆ™éœ€è¦æ”¯ä»˜é‡‘é¢ `x`ï¼›
      - å½“ `x` å¤§äºæ‰€é€‰æ•°å­—æ—¶ï¼Œä¸ºäº†ç¡®ä¿èƒœåˆ©è¿˜éœ€è¦æ”¯ä»˜çš„é‡‘é¢æ˜¯ `dp[1, x - 1]`ï¼›
      - å½“ `x` å°äºæ‰€é€‰æ•°å­—æ—¶ï¼Œä¸ºäº†ç¡®ä¿èƒœåˆ©è¿˜éœ€è¦æ”¯ä»˜çš„é‡‘é¢æ˜¯ `dp[x + 1, n]`ã€‚
    - ä¸ºäº†åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½ç¡®ä¿èƒœåˆ©ï¼Œåº”è€ƒè™‘æœ€åæƒ…å†µï¼Œè®¡ç®— `dp[1, n]` æ—¶åº”å–ä¸Šè¿°ä¸¤è€…çš„æœ€å¤§å€¼ï¼š
      `dp[1, n] = x + max(dp[1, x âˆ’ 1], dp[x + 1, n])`ã€‚

    - ä¸ºäº†å°†ç¡®ä¿èƒœåˆ©çš„é‡‘é¢æœ€å°åŒ–ï¼Œéœ€è¦éå†ä» `1` åˆ° `n` çš„æ‰€æœ‰å¯èƒ½çš„ `x`ï¼Œä½¿å¾— `dp[1, n]` çš„å€¼æœ€å°ï¼š
      `dp[1, n] = min(x + maxâ¡(dp[1, x âˆ’ 1], dp[x + 1, n])) (â¡1 â‰¤ x â‰¤ n)`

3.  **åˆå§‹åŒ–**

    - å½“ `i >= j` æ—¶ï¼ŒåŒºé—´æ— æ•ˆæˆ–åªæœ‰ä¸€ä¸ªæ•°å­—ï¼Œæˆæœ¬ä¸º `0`ï¼Œå³ `dp[i][j] = 0`ã€‚

4.  **è¾¹ç•Œé—®é¢˜**

    - åœ¨æ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹è®¡ç®—æ—¶éœ€è¦æ³¨æ„ä¸‹æ ‡çš„è¾¹ç•Œé—®é¢˜;
    - å½“ `j = n` æ—¶ï¼Œå¦‚æœ `x = j` åˆ™ `x + 1 > n`ï¼Œæ­¤æ—¶ `dp[x][j]` ä¼šå‡ºç°ä¸‹æ ‡è¶Šç•Œã€‚
    - ä¸ºäº†é¿å…å‡ºç°ä¸‹æ ‡è¶Šç•Œï¼Œè®¡ç®— `dp[i][j]` çš„æ–¹æ³•æ˜¯ï¼š
      - é¦–å…ˆä»¤ `dp[i][j] = j + dp[i][j - 1]`;
      - ç„¶åéå† `i â‰¤ x < j` çš„æ¯ä¸ª xï¼Œæ›´æ–° `dp[i][j]` çš„å€¼ã€‚

5.  **æœ€ç»ˆç»“æœ**

    - ç­”æ¡ˆæ˜¯ `dp[1][n]`ï¼Œå³åœ¨åŒºé—´ `[1, n]` å†…çŒœæ•°å­—çš„æœ€å°æˆæœ¬ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n^3)`ï¼Œä¸‰é‡å¾ªç¯ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n^2)`ï¼ŒDP è¡¨çš„å¤§å°ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} n
 * @return {number}
 */
var getMoneyAmount = function (n) {
	// åˆå§‹åŒ– DP è¡¨
	const dp = new Array(n + 1).fill(0).map(() => new Array(n + 1).fill(0));
	// éå†åŒºé—´èµ·ç‚¹
	for (let i = n - 1; i >= 1; i--) {
		// éå†åŒºé—´ç»ˆç‚¹
		for (let j = i + 1; j <= n; j++) {
			dp[i][j] = j + dp[i][j - 1];
			// éå†æ‰€æœ‰å¯èƒ½çš„çŒœæµ‹ç‚¹ x
			for (let x = i; x < j; x++) {
				dp[i][j] = Math.min(dp[i][j], x + Math.max(dp[i][x - 1], dp[x + 1][j]));
			}
		}
	}
	return dp[1][n];
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 294 | ç¿»è½¬æ¸¸æˆ II ğŸ”’ |  |  [`è®°å¿†åŒ–æœç´¢`](/tag/memoization.md) [`æ•°å­¦`](/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) `2+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/flip-game-ii) [ğŸ”—](https://leetcode.com/problems/flip-game-ii) |
| 374 | çŒœæ•°å­—å¤§å° | [[âœ“]](/problem/0374.md) |  [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`äº¤äº’`](/tag/interactive.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/guess-number-higher-or-lower) [ğŸ”—](https://leetcode.com/problems/guess-number-higher-or-lower) |
| 464 | æˆ‘èƒ½èµ¢å— |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`è®°å¿†åŒ–æœç´¢`](/tag/memoization.md) [`æ•°å­¦`](/tag/math.md) `3+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/can-i-win) [ğŸ”—](https://leetcode.com/problems/can-i-win) |
| 658 | æ‰¾åˆ° K ä¸ªæœ€æ¥è¿‘çš„å…ƒç´  | [[âœ“]](/problem/0658.md) |  [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) `3+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/find-k-closest-elements) [ğŸ”—](https://leetcode.com/problems/find-k-closest-elements) |