---
title: 2512. å¥–åŠ±æœ€é¡¶å°–çš„ K åå­¦ç”Ÿ
description: LeetCode 2512. å¥–åŠ±æœ€é¡¶å°–çš„ K åå­¦ç”Ÿé¢˜è§£ï¼ŒReward Top K Studentsï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2512. å¥–åŠ±æœ€é¡¶å°–çš„ K åå­¦ç”Ÿ
  - å¥–åŠ±æœ€é¡¶å°–çš„ K åå­¦ç”Ÿ
  - Reward Top K Students
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
  - å­—ç¬¦ä¸²
  - æ’åº
  - å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
---

# 2512. å¥–åŠ±æœ€é¡¶å°–çš„ K åå­¦ç”Ÿ

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`æ’åº`](/tag/sorting.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/reward-top-k-students) [`LeetCode`](https://leetcode.com/problems/reward-top-k-students)

## é¢˜ç›®

You are given two string arrays `positive_feedback` and `negative_feedback`,
containing the words denoting positive and negative feedback, respectively.
Note that **no** word is both positive and negative.

Initially every student has `0` points. Each positive word in a feedback
report **increases** the points of a student by `3`, whereas each negative
word **decreases** the points by `1`.

You are given `n` feedback reports, represented by a **0-indexed** string
array `report` and a **0-indexed** integer array `student_id`, where
`student_id[i]` represents the ID of the student who has received the feedback
report `report[i]`. The ID of each student is **unique**.

Given an integer `k`, return _the top_`k` _students after ranking them
in **non-increasing** order by their points_. In case more than one student has
the same points, the one with the lower ID ranks higher.

**Example 1:**

> Input: positive_feedback = ["smart","brilliant","studious"], negative_feedback = ["not"], report = ["this student is studious","the student is smart"], student_id = [1,2], k = 2
>
> Output: [1,2]
>
> Explanation:
>
> Both the students have 1 positive feedback and 3 points but since student 1 has a lower ID he ranks higher.

**Example 2:**

> Input: positive_feedback = ["smart","brilliant","studious"], negative_feedback = ["not"], report = ["this student is not studious","the student is smart"], student_id = [1,2], k = 2
>
> Output: [2,1]
>
> Explanation:
>
> - The student with ID 1 has 1 positive feedback and 1 negative feedback, so he has 3-1=2 points.
> - The student with ID 2 has 1 positive feedback, so he has 3 points.
>
> Since student 2 has more points, [2,1] is returned.

**Constraints:**

- `1 <= positive_feedback.length, negative_feedback.length <= 10^4`
- `1 <= positive_feedback[i].length, negative_feedback[j].length <= 100`
- Both `positive_feedback[i]` and `negative_feedback[j]` consists of lowercase English letters.
- No word is present in both `positive_feedback` and `negative_feedback`.
- `n == report.length == student_id.length`
- `1 <= n <= 10^4`
- `report[i]` consists of lowercase English letters and spaces `' '`.
- There is a single space between consecutive words of `report[i]`.
- `1 <= report[i].length <= 100`
- `1 <= student_id[i] <= 10^9`
- All the values of `student_id[i]` are **unique**.
- `1 <= k <= n`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²æ•°ç»„ `positive_feedback` å’Œ `negative_feedback` ï¼Œåˆ†åˆ«åŒ…å«è¡¨ç¤ºæ­£é¢çš„å’Œè´Ÿé¢çš„è¯æ±‡ã€‚**ä¸ä¼š**
æœ‰å•è¯åŒæ—¶æ˜¯æ­£é¢çš„å’Œè´Ÿé¢çš„ã€‚

ä¸€å¼€å§‹ï¼Œæ¯ä½å­¦ç”Ÿåˆ†æ•°ä¸º `0` ã€‚æ¯ä¸ªæ­£é¢çš„å•è¯ä¼šç»™å­¦ç”Ÿçš„åˆ†æ•° **åŠ ** `3` åˆ†ï¼Œæ¯ä¸ªè´Ÿé¢çš„è¯ä¼šç»™å­¦ç”Ÿçš„åˆ†æ•° **å‡** `1` åˆ†ã€‚

ç»™ä½  `n` ä¸ªå­¦ç”Ÿçš„è¯„è¯­ï¼Œç”¨ä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹çš„å­—ç¬¦ä¸²æ•°ç»„ `report` å’Œä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹çš„æ•´æ•°æ•°ç»„
`student_id` è¡¨ç¤ºï¼Œå…¶ä¸­ `student_id[i]` è¡¨ç¤ºè¿™åå­¦ç”Ÿçš„ ID ï¼Œè¿™åå­¦ç”Ÿçš„è¯„è¯­æ˜¯ `report[i]` ã€‚æ¯åå­¦ç”Ÿçš„ ID
**äº’ä¸ç›¸åŒ** ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ è¿”å›æŒ‰ç…§å¾—åˆ† **ä»é«˜åˆ°ä½** æœ€é¡¶å°–çš„ `k` åå­¦ç”Ÿã€‚å¦‚æœæœ‰å¤šåå­¦ç”Ÿåˆ†æ•°ç›¸åŒï¼ŒID è¶Šå°æ’åè¶Šå‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** positive_feedback = ["smart","brilliant","studious"], negative_feedback = ["not"], report = ["this student is studious","the student is smart"], student_id = [1,2], k = 2
>
> **è¾“å‡ºï¼š**[1,2]
>
> **è§£é‡Šï¼š**
>
> ä¸¤åå­¦ç”Ÿéƒ½æœ‰ 1 ä¸ªæ­£é¢è¯æ±‡ï¼Œéƒ½å¾—åˆ° 3 åˆ†ï¼Œå­¦ç”Ÿ 1 çš„ ID æ›´å°æ‰€ä»¥æ’åæ›´å‰ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** positive_feedback = ["smart","brilliant","studious"], negative_feedback = ["not"], report = ["this student is not studious","the student is smart"], student_id = [1,2], k = 2
>
> **è¾“å‡ºï¼š**[2,1]
>
> **è§£é‡Šï¼š**
>
> - ID ä¸º 1 çš„å­¦ç”Ÿæœ‰ 1 ä¸ªæ­£é¢è¯æ±‡å’Œ 1 ä¸ªè´Ÿé¢è¯æ±‡ï¼Œæ‰€ä»¥å¾—åˆ†ä¸º 3-1=2 åˆ†ã€‚
> - ID ä¸º 2 çš„å­¦ç”Ÿæœ‰ 1 ä¸ªæ­£é¢è¯æ±‡ï¼Œå¾—åˆ†ä¸º 3 åˆ†ã€‚
>
> å­¦ç”Ÿ 2 åˆ†æ•°æ›´é«˜ï¼Œæ‰€ä»¥è¿”å› [2,1] ã€‚

**æç¤ºï¼š**

- `1 <= positive_feedback.length, negative_feedback.length <= 10^4`
- `1 <= positive_feedback[i].length, negative_feedback[j].length <= 100`
- `positive_feedback[i]` å’Œ `negative_feedback[j]` éƒ½åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚
- `positive_feedback` å’Œ `negative_feedback` ä¸­ä¸ä¼šæœ‰ç›¸åŒå•è¯ã€‚
- `n == report.length == student_id.length`
- `1 <= n <= 10^4`
- `report[i]` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯å’Œç©ºæ ¼ `' '` ã€‚
- `report[i]` ä¸­è¿ç»­å•è¯ä¹‹é—´æœ‰å•ä¸ªç©ºæ ¼éš”å¼€ã€‚
- `1 <= report[i].length <= 100`
- `1 <= student_id[i] <= 10^9`
- `student_id[i]` çš„å€¼ **äº’ä¸ç›¸åŒ** ã€‚
- `1 <= k <= n`

## è§£é¢˜æ€è·¯

1. **æ•°æ®é¢„å¤„ç†**

- é¢˜ç›®ç»™å®š `positive_feedback` å’Œ `negative_feedback` ä¸¤ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œæˆ‘ä»¬ä½¿ç”¨ `Set` æ¥å­˜å‚¨è¿™äº›å…³é”®è¯ï¼Œä»¥ä¾¿åœ¨æŸ¥æ‰¾æ—¶ `O(1)` åˆ¤æ–­æŸä¸ªå•è¯æ˜¯å¦å±äºæ­£é¢æˆ–è´Ÿé¢åé¦ˆã€‚

2. **è®¡ç®—å¾—åˆ†**

- éå† `report` æ•°ç»„ï¼Œæ¯ä¸ª `report[i]` ä»£è¡¨ `student_id[i]` çš„è¯„è®ºå†…å®¹ï¼š
  - å°† `report[i]` æŒ‰ç©ºæ ¼æ‹†åˆ†æˆå•è¯æ•°ç»„ `words`ã€‚
  - ä¾æ¬¡åˆ¤æ–­ `words` ä¸­çš„æ¯ä¸ªå•è¯ï¼š
    - è‹¥å•è¯åœ¨ `positive_feedback` ä¸­ï¼Œå¾—åˆ† `+3`ã€‚
    - è‹¥å•è¯åœ¨ `negative_feedback` ä¸­ï¼Œå¾—åˆ† `-1`ã€‚
  - è®¡ç®—å®Œæ¯•åï¼Œå¾—åˆ° `student_id[i]` çš„æœ€ç»ˆå¾—åˆ† `score`ã€‚

3. **ç»´æŠ¤æœ€å°å †**

- ç”±äºé¢˜ç›®è¦æ±‚æ‰¾åˆ°åˆ†æ•°æœ€é«˜çš„ `k` ä¸ªå­¦ç”Ÿï¼Œå¹¶æŒ‰ç…§**å¾—åˆ†é™åºã€ç›¸åŒå¾—åˆ†æŒ‰å­¦å·å‡åº**æ’åºï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç»´æŠ¤ä¸€ä¸ª**æœ€å°å †**ï¼Œå­˜å‚¨å½“å‰å‰ `k` åçš„ `[score, student_id]`ï¼š
  - **å †çš„æ¯”è¾ƒæ–¹å¼ï¼š**
    - `score` å°çš„æ’åœ¨å †é¡¶ï¼Œä¼˜å…ˆç§»é™¤ã€‚
    - è‹¥ `score` ç›¸åŒï¼Œ`student_id` å¤§çš„æ’åœ¨å †é¡¶ï¼Œä¼˜å…ˆç§»é™¤ã€‚
  - **å †çš„æ“ä½œï¼š**
    - å½“ `heap.size() < k` æ—¶ï¼Œç›´æ¥æ’å…¥ `[score, student_id]`ã€‚
    - å½“ `heap.size() == k` æ—¶ï¼š
      - è‹¥ `heap.peek()[0] < score`ï¼ˆæ–°å­¦ç”Ÿå¾—åˆ†æ›´é«˜ï¼‰ï¼Œåˆ™å¼¹å‡ºå †é¡¶å…ƒç´ ï¼Œæ’å…¥æ–°å…ƒç´ ã€‚
      - è‹¥ `heap.peek()[0] === score` ä¸” `heap.peek()[1] > student_id`ï¼ˆç›¸åŒå¾—åˆ†ä½†å­¦å·æ›´å°ï¼‰ï¼Œåˆ™ä»ç„¶å¼¹å‡ºå †é¡¶å…ƒç´ ï¼Œæ’å…¥æ–°å…ƒç´ ã€‚

4. **å–å‡ºå‰ `k` åå­¦ç”Ÿå¹¶æ’åº**

- ç”±äºå †ä¸­å­˜çš„æ˜¯ `k` ä¸ªæœ€ä¼˜å­¦ç”Ÿï¼ŒæŒ‰ `score` å‡åºå­˜å‚¨ï¼ˆå› ä¸ºæ˜¯**æœ€å°å †**ï¼‰ã€‚
- ä¾æ¬¡ `pop()` å–å‡º `student_id`ï¼Œç„¶å**åè½¬**æ•°ç»„ï¼Œå¾—åˆ°**æŒ‰å¾—åˆ†é™åºã€å­¦å·å‡åºçš„æ’åºç»“æœ**ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(nm + k log n)`
  - **ç»´æŠ¤æœ€å°å †**ï¼š`O(n * log k)`ï¼ˆå…¶ä¸­ `n` æ˜¯ `student_id` çš„é•¿åº¦ï¼‰
  - **è®¡ç®—å¾—åˆ†æ—¶é—´**ï¼š`O(n * m)`ï¼ˆ`m` æ˜¯ `report[i]` çš„å¹³å‡é•¿åº¦ï¼‰
  - **å–å‰ K ä¸ªæ—¶é—´**ï¼š`O(k log k)`
  - **æ€»æ—¶é—´å¤æ‚åº¦**ï¼š`O(nm + (k + n) * log k)`
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(P + N + k)`
  - `positive_feedback` å’Œ `negative_feedback` ä½¿ç”¨ `Set` å­˜å‚¨ï¼Œ`O(P + N)`ã€‚
  - å †æœ€å¤šå­˜å‚¨ `k` ä¸ªå…ƒç´ ï¼Œ`O(k)`ã€‚
  - é¢å¤–çš„ç»“æœæ•°ç»„ `O(k)`ã€‚

## ä»£ç 

```javascript
/**
 * @param {string[]} positive_feedback
 * @param {string[]} negative_feedback
 * @param {string[]} report
 * @param {number[]} student_id
 * @param {number} k
 * @return {number[]}
 */
var topStudents = function (
	positive_feedback,
	negative_feedback,
	report,
	student_id,
	k
) {
	// å°†æ­£é¢å’Œè´Ÿé¢åé¦ˆå•è¯å­˜å…¥ Set
	const positive = new Set(positive_feedback);
	const negative = new Set(negative_feedback);

	// æœ€å°å †ï¼ŒæŒ‰å¾—åˆ†å‡åºæ’åºï¼Œå¾—åˆ†ç›¸åŒæŒ‰ student_id é™åº
	const heap = new MinHeap([], (a, b) =>
		a[0] === b[0] ? b[1] < a[1] : a[0] < b[0]
	);

	for (let i = 0; i < report.length; i++) {
		let score = 0;
		const words = report[i].split(' ');
		for (let word of words) {
			if (positive.has(word)) {
				score += 3;
			} else if (negative.has(word)) {
				score -= 1;
			}
		}

		// åªå­˜å‰ k ä¸ªå­¦ç”Ÿ
		if (heap.size() < k) {
			heap.insert([score, student_id[i]]);
		} else if (
			heap.peek()[0] < score ||
			(heap.peek()[0] === score && heap.peek()[1] > student_id[i])
		) {
			heap.pop();
			heap.insert([score, student_id[i]]);
		}
	}

	const res = [];
	while (!heap.isEmpty()) {
		res.push(heap.pop()[1]);
	}

	return res.reverse(); // ä»æœ€ä½åˆ†åˆ°æœ€é«˜åˆ†ï¼Œç¿»è½¬å¾—åˆ°æœ€ç»ˆç»“æœ
};
// æœ€å°ä¼˜å…ˆé˜Ÿåˆ—
class MinHeap {
	constructor(arr = [], priority = (a, b) => a < b) {
		this.heap = arr;
		this.priority = priority;
		for (let i = Math.floor(this.heap.length / 2) - 1; i >= 0; i--) {
			this.heapifyDown(i);
		}
	}

	insert(num) {
		this.heap.push(num);
		this.heapifyUp(this.heap.length - 1);
	}

	pop() {
		if (this.heap.length === 0) return null;
		const top = this.heap[0];
		const last = this.heap.pop();
		if (this.heap.length > 0) {
			this.heap[0] = last;
			this.heapifyDown(0);
		}
		return top;
	}

	isEmpty() {
		return this.heap.length == 0;
	}

	size() {
		return this.heap.length;
	}

	peek() {
		return this.heap[0];
	}

	heapifyDown(i) {
		const n = this.heap.length;
		const left = 2 * i + 1;
		const right = 2 * i + 2;
		let smallest = i;

		if (left < n && this.priority(this.heap[left], this.heap[smallest])) {
			smallest = left;
		}
		if (right < n && this.priority(this.heap[right], this.heap[smallest])) {
			smallest = right;
		}

		if (smallest !== i) {
			[this.heap[i], this.heap[smallest]] = [this.heap[smallest], this.heap[i]];
			this.heapifyDown(smallest);
		}
	}

	heapifyUp(i) {
		while (i > 0) {
			const parent = Math.floor((i - 1) / 2);
			if (this.priority(this.heap[i], this.heap[parent])) {
				[this.heap[i], this.heap[parent]] = [this.heap[parent], this.heap[i]];
				i = parent;
			} else {
				break;
			}
		}
	}
}
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 406 | æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ— | [[âœ“]](/problem/0406.md) |  [`æ ‘çŠ¶æ•°ç»„`](/tag/binary-indexed-tree.md) [`çº¿æ®µæ ‘`](/tag/segment-tree.md) [`æ•°ç»„`](/tag/array.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/queue-reconstruction-by-height) [ğŸ”—](https://leetcode.com/problems/queue-reconstruction-by-height) |
| 2146 | ä»·æ ¼èŒƒå›´å†…æœ€é«˜æ’åçš„ K æ ·ç‰©å“ |  |  [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`æ•°ç»„`](/tag/array.md) [`çŸ©é˜µ`](/tag/matrix.md) `2+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/k-highest-ranked-items-within-a-price-range) [ğŸ”—](https://leetcode.com/problems/k-highest-ranked-items-within-a-price-range) |