---
title: 1726. åŒç§¯å…ƒç»„
description: LeetCode 1726. åŒç§¯å…ƒç»„é¢˜è§£ï¼ŒTuple with Same Productï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1726. åŒç§¯å…ƒç»„
  - åŒç§¯å…ƒç»„
  - Tuple with Same Product
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
  - è®¡æ•°
---

# 1726. åŒç§¯å…ƒç»„

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`è®¡æ•°`](/tag/counting.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/tuple-with-same-product) [`LeetCode`](https://leetcode.com/problems/tuple-with-same-product)

## é¢˜ç›®

Given an array `nums` of **distinct** positive integers, return _the number of
tuples_`(a, b, c, d)`_such that_`a * b = c * d` _where_`a` _,_`b` _,_`c` _, and_`d` _are elements of_`nums` _, and_`a != b != c != d` _._

**Example 1:**

> Input: nums = [2,3,4,6]
>
> Output: 8
>
> Explanation: There are 8 valid tuples:
>
> (2,6,3,4) , (2,6,4,3) , (6,2,3,4) , (6,2,4,3)
>
> (3,4,2,6) , (4,3,2,6) , (3,4,6,2) , (4,3,6,2)

**Example 2:**

> Input: nums = [1,2,4,5,10]
>
> Output: 16
>
> Explanation: There are 16 valid tuples:
>
> (1,10,2,5) , (1,10,5,2) , (10,1,2,5) , (10,1,5,2)
>
> (2,5,1,10) , (2,5,10,1) , (5,2,1,10) , (5,2,10,1)
>
> (2,10,4,5) , (2,10,5,4) , (10,2,4,5) , (10,2,5,4)
>
> (4,5,2,10) , (4,5,10,2) , (5,4,2,10) , (5,4,10,2)

**Constraints:**

- `1 <= nums.length <= 1000`
- `1 <= nums[i] <= 10^4`
- All elements in `nums` are **distinct**.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªç”± **ä¸åŒ** æ­£æ•´æ•°ç»„æˆçš„æ•°ç»„ `nums` ï¼Œè¯·ä½ è¿”å›æ»¡è¶³ `a * b = c * d` çš„å…ƒç»„ **`(a, b, c, d)`**
çš„æ•°é‡ã€‚å…¶ä¸­ `a`ã€`b`ã€`c` å’Œ `d` éƒ½æ˜¯ `nums` ä¸­çš„å…ƒç´ ï¼Œä¸” `a != b != c != d` ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** nums = [2,3,4,6]
>
> **è¾“å‡ºï¼š** 8
>
> **è§£é‡Šï¼š** å­˜åœ¨ 8 ä¸ªæ»¡è¶³é¢˜æ„çš„å…ƒç»„ï¼š
>
> (2,6,3,4) , (2,6,4,3) , (6,2,3,4) , (6,2,4,3)
>
> (3,4,2,6) , (4,3,2,6) , (3,4,6,2) , (4,3,6,2)

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** nums = [1,2,4,5,10]
>
> **è¾“å‡ºï¼š** 16
>
> **è§£é‡Šï¼š** å­˜åœ¨ 16 ä¸ªæ»¡è¶³é¢˜æ„çš„å…ƒç»„ï¼š
>
> (1,10,2,5) , (1,10,5,2) , (10,1,2,5) , (10,1,5,2)
>
> (2,5,1,10) , (2,5,10,1) , (5,2,1,10) , (5,2,10,1)
>
> (2,10,4,5) , (2,10,5,4) , (10,2,4,5) , (10,2,5,4)
>
> (4,5,2,10) , (4,5,10,2) , (5,4,2,10) , (5,4,10,2)

**æç¤ºï¼š**

- `1 <= nums.length <= 1000`
- `1 <= nums[i] <= 10^4`
- `nums` ä¸­çš„æ‰€æœ‰å…ƒç´  **äº’ä¸ç›¸åŒ**

## è§£é¢˜æ€è·¯

1. **è®¡ç®—æ‰€æœ‰å¯èƒ½çš„ä¸¤æ•°ä¹˜ç§¯**ï¼š

   - éå†æ•°ç»„ä¸­çš„æ¯ä¸€å¯¹ä¸åŒçš„å…ƒç´  `(nums[i], nums[j])`ï¼Œå…¶ä¸­ `i < j`ã€‚
   - è®¡ç®—å®ƒä»¬çš„ä¹˜ç§¯ `product = nums[i] * nums[j]`ã€‚

2. **ç»Ÿè®¡æ¯ä¸ªä¹˜ç§¯å‡ºç°çš„æ¬¡æ•°**ï¼š

   - ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼ˆ`Map`ï¼‰æ¥è®°å½•æ¯ä¸ªä¹˜ç§¯å‡ºç°çš„æ¬¡æ•°ã€‚
   - å¦‚æœæŸä¸ªä¹˜ç§¯å·²ç»å­˜åœ¨äºå“ˆå¸Œè¡¨ä¸­ï¼Œè¯´æ˜ä¹‹å‰å·²ç»æœ‰è‹¥å¹²å¯¹å…ƒç´ çš„ä¹˜ç§¯ç­‰äºè¿™ä¸ªå€¼ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¹‹å‰è®°å½•çš„æ¬¡æ•°æ¥è®¡ç®—æ–°çš„å››å…ƒç»„æ•°é‡ã€‚

3. **è®¡ç®—æ»¡è¶³æ¡ä»¶çš„å››å…ƒç»„æ•°é‡**ï¼š

   - å¯¹äºæ¯ä¸€å¯¹ `(nums[i], nums[j])`ï¼Œå¦‚æœå®ƒä»¬çš„ä¹˜ç§¯ `product` å·²ç»åœ¨å“ˆå¸Œè¡¨ä¸­å‡ºç°è¿‡ `k` æ¬¡ï¼Œé‚£ä¹ˆå¯ä»¥å½¢æˆ `8 * k` ä¸ªæ–°çš„å››å…ƒç»„ã€‚
     - è¿™æ˜¯å› ä¸ºå¯¹äºæ¯ä¸€å¯¹ `(nums[i], nums[j])`ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä¹‹å‰è®°å½•çš„ `k` å¯¹ `(a, b)` ç»„åˆï¼Œå½¢æˆå››å…ƒç»„ `(a, b, nums[i], nums[j])` æˆ– `(nums[i], nums[j], a, b)`ï¼Œå¹¶ä¸”æ¯ä¸ªå››å…ƒç»„å¯ä»¥æœ‰ 4 ç§æ’åˆ—æ–¹å¼ï¼ˆå› ä¸º `a * b = nums[i] * nums[j]` å¯ä»¥æœ‰å¤šç§æ’åˆ—ç»„åˆï¼‰ã€‚
   - å› æ­¤ï¼Œæ¯å‘ç°ä¸€ä¸ªæ–°çš„ä¹˜ç§¯åŒ¹é…ï¼Œå°±å¢åŠ  `8 * k` åˆ°ç»“æœä¸­ã€‚

4. **æ›´æ–°å“ˆå¸Œè¡¨**ï¼š
   - æ¯æ¬¡è®¡ç®—å®Œä¸€å¯¹ `(nums[i], nums[j])` çš„ä¹˜ç§¯åï¼Œæ›´æ–°å“ˆå¸Œè¡¨ä¸­è¯¥ä¹˜ç§¯çš„è®¡æ•°ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n^2)`ï¼Œå…¶ä¸­ `n` æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œéœ€è¦éå†æ‰€æœ‰å¯èƒ½çš„ä¸¤æ•°å¯¹ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n^2)`ï¼Œæœ€åæƒ…å†µä¸‹ï¼Œæ‰€æœ‰ä¸¤æ•°å¯¹çš„ä¹˜ç§¯éƒ½ä¸åŒï¼Œå“ˆå¸Œè¡¨éœ€è¦å­˜å‚¨ `n(n-1)/2` ä¸ªé”®å€¼å¯¹ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var tupleSameProduct = function (nums) {
	let count = new Map(); // ç”¨äºè®°å½•æ¯ä¸ªä¹˜ç§¯å‡ºç°çš„æ¬¡æ•°
	let res = 0; // ç”¨äºè®°å½•æ»¡è¶³æ¡ä»¶çš„å››å…ƒç»„æ•°é‡

	for (let i = 0; i < nums.length; i++) {
		for (let j = i + 1; j < nums.length; j++) {
			const product = nums[i] * nums[j]; // è®¡ç®—å½“å‰å¯¹çš„ä¹˜ç§¯

			if (count.has(product)) {
				// å¦‚æœè¯¥ä¹˜ç§¯å·²ç»å­˜åœ¨ï¼Œè¯´æ˜ä¹‹å‰æœ‰è‹¥å¹²å¯¹å…ƒç´ çš„ä¹˜ç§¯ç­‰äºè¿™ä¸ªå€¼
				// æ¯å‘ç°ä¸€ä¸ªæ–°çš„åŒ¹é…ï¼Œå¯ä»¥å½¢æˆ 8 * k ä¸ªæ–°çš„å››å…ƒç»„
				res += 8 * count.get(product);
			}

			// æ›´æ–°å“ˆå¸Œè¡¨ä¸­è¯¥ä¹˜ç§¯çš„è®¡æ•°
			count.set(product, (count.get(product) || 0) + 1);
		}
	}

	return res;
};
```
