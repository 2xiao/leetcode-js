---
title: 72. ç¼–è¾‘è·ç¦»
description: LeetCode,72. ç¼–è¾‘è·ç¦»,ç¼–è¾‘è·ç¦»,Edit Distance,è§£é¢˜æ€è·¯,å­—ç¬¦ä¸²,åŠ¨æ€è§„åˆ’
keywords:
  - LeetCode
  - 72. ç¼–è¾‘è·ç¦»
  - ç¼–è¾‘è·ç¦»
  - Edit Distance
  - è§£é¢˜æ€è·¯
  - å­—ç¬¦ä¸²
  - åŠ¨æ€è§„åˆ’
---

# 72. ç¼–è¾‘è·ç¦»

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/edit-distance) [`LeetCode`](https://leetcode.com/problems/edit-distance)

## é¢˜ç›®

Given two strings `word1` and `word2`, return _the minimum number of
operations required to convert`word1` to `word2`_.

You have the following three operations permitted on a word:

- Insert a character
- Delete a character
- Replace a character

**Example 1:**

> Input: word1 = "horse", word2 = "ros"
>
> Output: 3
>
> Explanation:
>
> horse -> rorse (replace 'h' with 'r')
>
> rorse -> rose (remove 'r')
>
> rose -> ros (remove 'e')

**Example 2:**

> Input: word1 = "intention", word2 = "execution"
>
> Output: 5
>
> Explanation:
>
> intention -> inention (remove 't')
>
> inention -> enention (replace 'i' with 'e')
>
> enention -> exention (replace 'n' with 'x')
>
> exention -> exection (replace 'n' with 'c')
>
> exection -> execution (insert 'u')

**Constraints:**

- `0 <= word1.length, word2.length <= 500`
- `word1` and `word2` consist of lowercase English letters.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸¤ä¸ªå•è¯ `word1` å’Œ `word2`ï¼Œ è¯·è¿”å› _å°† `word1` è½¬æ¢æˆ `word2` æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•°_ ã€‚

ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š

- æ’å…¥ä¸€ä¸ªå­—ç¬¦
- åˆ é™¤ä¸€ä¸ªå­—ç¬¦
- æ›¿æ¢ä¸€ä¸ªå­—ç¬¦

`word1` å’Œ `word2` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆã€‚

## è§£é¢˜æ€è·¯

å¯ä»¥ä»åå¾€å‰æŒ¨ä¸ªå­—ç¬¦å¯¹æ¯” `s1` å’Œ `s2`ï¼Œå¯¹äºæ¯å¯¹å­—ç¬¦ `s1[i]` å’Œ `s2[j]`ï¼Œå¯ä»¥æœ‰å››ç§æ“ä½œï¼š

```
if (s1[i] == s2[j]) {
  å•¥éƒ½åˆ«åšï¼ˆskipï¼‰
  i, j åŒæ—¶å‘å‰ç§»åŠ¨
} else {
  ä¸‰é€‰ä¸€ï¼š
    1. æ’å…¥ï¼ˆInsertï¼‰ï¼š åœ¨å­—ç¬¦ä¸² `s1` çš„æœ«å°¾æ’å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œä½¿å…¶ä¸å­—ç¬¦ä¸² `s2` åŒ¹é…ã€‚
    2. åˆ é™¤ï¼ˆDeleteï¼‰ï¼š åˆ é™¤å­—ç¬¦ä¸² `s1` çš„æœ«å°¾å­—ç¬¦ï¼Œä½¿å…¶ä¸å­—ç¬¦ä¸² `s2` åŒ¹é…ã€‚
    3. æ›¿æ¢ï¼ˆReplaceï¼‰ï¼š å°†å­—ç¬¦ä¸² `s1` çš„æœ«å°¾å­—ç¬¦æ›¿æ¢ä¸ºå¦ä¸€ä¸ªå­—ç¬¦ï¼Œä½¿å…¶ä¸å­—ç¬¦ä¸² `s2` åŒ¹é…ã€‚
}
```

è¿™ä¸ªã€Œä¸‰é€‰ä¸€ã€åˆ°åº•è¯¥æ€ä¹ˆé€‰æ‹©å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œå…¨è¯•ä¸€éï¼Œå“ªä¸ªæ“ä½œæœ€åå¾—åˆ°çš„ç¼–è¾‘è·ç¦»æœ€å°ï¼Œå°±é€‰è°ã€‚

å…·ä½“è§£æ³•å¯ä»¥åˆ†ä¸º **é€’å½’** å’Œ **DP-table** ä¸¤ç§æ–¹å¼ã€‚

### æ€è·¯ä¸€ï¼šåŠ¨æ€è§„åˆ’-é€’å½’

ä½¿ç”¨é€’å½’æ¥è§£é¢˜çš„æ€è·¯å¦‚ä¸‹ï¼š

- å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•° `helper(i, j)` ï¼Œç”¨ä¸€ä¸ªæ•°ç»„ `dp` è®°å½•å­é—®é¢˜çš„ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ï¼›
- base case æ˜¯ `i` èµ°å®Œ `s1` æˆ– `j` èµ°å®Œ `s2`ï¼Œå¯ä»¥ç›´æ¥è¿”å›å¦ä¸€ä¸ªå­—ç¬¦ä¸²å‰©ä¸‹çš„é•¿åº¦ï¼›
- å¦‚æœ `dp[i][j]` å·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™å°±é€’å½’è®¡ç®—ï¼š

  - è‹¥ `s1[i] == s2[j]`ï¼Œè¯´æ˜æ­¤å¯¹å­—ç¬¦æœ¬æ¥å°±ç›¸ç­‰ï¼Œä¸éœ€è¦ä»»ä½•æ“ä½œï¼Œé€’å½’è®¡ç®— `dp[i][j] = helper(i - 1, j - 1)`;
  - å¦åˆ™å–ä»¥ä¸‹ä¸‰ç§æƒ…å†µçš„æœ€å°å€¼ï¼Œåˆ«å¿˜äº†æ“ä½œæ•°åŠ ä¸€ï¼š`dp[i][j] = Math.min(helper(i, j - 1), helper(i - 1, j), helper(i - 1, j - 1)) + 1`;

    1. æ’å…¥ï¼ˆInsertï¼‰ï¼š `helper(i, j - 1)`ï¼Œåœ¨ `s1[i]` æ’å…¥ä¸€ä¸ªå’Œ `s2[j]` ä¸€æ ·çš„å­—ç¬¦ï¼Œé‚£ä¹ˆ `s2[j]` å°±è¢«åŒ¹é…äº†ï¼Œå‰ç§» `j`ï¼Œç»§ç»­è·Ÿ `i` å¯¹æ¯”ï¼›
    2. åˆ é™¤ï¼ˆDeleteï¼‰ï¼š `helper(i - 1, j)`ï¼ŒæŠŠ `s[i]` è¿™ä¸ªå­—ç¬¦åˆ æ‰ï¼Œå‰ç§» `i`ï¼Œç»§ç»­è·Ÿ `j` å¯¹æ¯”ï¼›
    3. æ›¿æ¢ï¼ˆReplaceï¼‰ï¼š `helper(i - 1, j - 1)`ï¼ŒæŠŠ `s1[i]` æ›¿æ¢æˆ `s2[j]`ï¼Œé‚£ä¹ˆ `s2[j]` å°±è¢«åŒ¹é…äº†ï¼ŒåŒæ—¶å‰ç§» `i`ï¼Œ`j` ç»§ç»­å¯¹æ¯”ï¼›

- æœ€åè°ƒç”¨é€’å½’å‡½æ•°å³å¯ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œå…¶ä¸­ `m` æ˜¯ `word1` çš„é•¿åº¦ï¼Œ`n` æ˜¯ `word2` çš„é•¿åº¦ã€‚åŠ¨æ€è§„åˆ’çš„çŠ¶æ€ç©ºé—´ä¸º `m Ã— n`ï¼Œæ¯ä¸ªçŠ¶æ€é€šè¿‡é€’å½’å‡½æ•°è°ƒç”¨è¿›è¡Œå¡«å……ï¼Œè™½ç„¶æ¯ä¸ªçŠ¶æ€çš„è®¡ç®—æ˜¯é€šè¿‡é€’å½’å®ç°çš„ï¼Œä½†ç”±äºä½¿ç”¨äº†è®°å¿†åŒ–æœç´¢ï¼ˆåŠ¨æ€è§„åˆ’ï¼‰ï¼Œæ¯ä¸ªçŠ¶æ€ä»…è®¡ç®—ä¸€æ¬¡ã€‚å› æ­¤ï¼Œæ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(m * n)`ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œç”¨äºå­˜å‚¨åŠ¨æ€è§„åˆ’è¡¨ `dp`ï¼Œè¯¥è¡¨çš„å¤§å°ä¸º `m Ã— n`ï¼Œè®°å½•æ¯ä¸ªå­é—®é¢˜çš„ç»“æœã€‚æ­¤å¤–ï¼Œé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ä¹Ÿå¯èƒ½è¾¾åˆ° `O(m + n)`ï¼Œä½†è¿™æ˜¯å¸¸é‡å› ç´ ï¼Œå› æ­¤ä¸»è¦çš„ç©ºé—´å¤æ‚åº¦æ¥æºäº `dp` æ•°ç»„ã€‚

---

### æ€è·¯äºŒï¼šåŠ¨æ€è§„åˆ’-DP table

å®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„ `dp` , `dp[i][j]` è¡¨ç¤ºå°†é•¿åº¦ä¸º `i` çš„å­—ç¬¦ä¸² `s1` è½¬æ¢ä¸ºé•¿åº¦ä¸º `j` çš„å­—ç¬¦ä¸² `s2` æ‰€éœ€çš„æœ€å°ç¼–è¾‘è·ç¦»ã€‚`dp[..][0]` å’Œ `dp[0][..]` å¯¹åº” base caseã€‚

çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š

- å½“ `s1[i-1] === s2[j-1]`ï¼Œå³å½“å‰å­—ç¬¦ç›¸åŒï¼š`dp[i][j] = dp[i-1][j-1]`
- å¦åˆ™ï¼Œå–ä»¥ä¸‹æ“ä½œçš„æœ€å°å€¼ï¼š`dp[i][j] = 1 + min(dp[i-1][j], dp[i][j-1], dp[i-1][j-1])`

å…¶ä¸­ï¼Œ`dp[i-1][j]` è¡¨ç¤ºåˆ é™¤æ“ä½œï¼Œ`dp[i][j-1]` è¡¨ç¤ºæ’å…¥æ“ä½œï¼Œ`dp[i-1][j-1]` è¡¨ç¤ºæ›¿æ¢æ“ä½œã€‚

DP table å’Œé€’å½’çš„æ€è·¯å¤§è‡´ç›¸åŒï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼ŒDP table æ˜¯è‡ªåº•å‘ä¸Šæ±‚è§£ï¼Œé€’å½’è§£æ³•æ˜¯è‡ªé¡¶å‘ä¸‹æ±‚è§£ã€‚é€’å½’å‡½æ•°çš„ base case æ˜¯ `i`, `j` ç­‰äº `-1`ï¼Œè€Œ DP table çš„æ•°ç»„ç´¢å¼•è‡³å°‘æ˜¯ `0`ï¼Œæ‰€ä»¥ DP table æ•°ç»„ä¼šåç§»ä¸€ä½ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œå…¶ä¸­ `m` æ˜¯ `word1` çš„é•¿åº¦ï¼Œ`n` æ˜¯ `word2` çš„é•¿åº¦ã€‚åŠ¨æ€è§„åˆ’éœ€è¦å¾ªç¯éå† `m Ã— n` æ¬¡ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œç”¨äºå­˜å‚¨åŠ¨æ€è§„åˆ’è¡¨ `dp`ï¼Œè¯¥è¡¨çš„å¤§å°ä¸º `m Ã— n`ï¼Œè®°å½•æ¯ä¸ªå­é—®é¢˜çš„ç»“æœã€‚

## ä»£ç 

::: code-tabs

@tab åŠ¨æ€è§„åˆ’-é€’å½’

```javascript
/**
 * @param {string} word1
 * @param {string} word2
 * @return {number}
 */
var minDistance = function (word1, word2) {
	const m = word1.length;
	const n = word2.length;
	let dp = new Array(m).fill(-1).map((i) => new Array(n).fill(-1));
	const helper = (i, j) => {
		// base case
		if (i == -1) return j + 1;
		if (j == -1) return i + 1;

		if (dp[i][j] != -1) {
			return dp[i][j];
		}

		if (word1.charAt(i) == word2.charAt(j)) {
			dp[i][j] = helper(i - 1, j - 1); // è·³è¿‡
		} else {
			dp[i][j] =
				Math.min(
					helper(i, j - 1), // æ’å…¥
					helper(i - 1, j), // åˆ é™¤
					helper(i - 1, j - 1) // æ›¿æ¢
				) + 1;
		}
		return dp[i][j];
	};

	return helper(m - 1, n - 1);
};
```

@tab åŠ¨æ€è§„åˆ’-DP table

```javascript
/**
 * @param {string} word1
 * @param {string} word2
 * @return {number}
 */
var minDistance = function (word1, word2) {
	const m = word1.length;
	const n = word2.length;

	// åˆå§‹åŒ–åŠ¨æ€è§„åˆ’æ•°ç»„ï¼Œå¤šä¸€è¡Œä¸€åˆ—ç”¨äºå¤„ç†ç©ºå­—ç¬¦ä¸²çš„æƒ…å†µ
	const dp = new Array(m + 1).fill(0).map((i) => new Array(n + 1).fill(0));

	// åˆå§‹åŒ–è¾¹ç•Œæ¡ä»¶
	for (let i = 1; i <= m; i++) {
		dp[i][0] = i;
	}
	for (let j = 1; j <= n; j++) {
		dp[0][j] = j;
	}

	// åŠ¨æ€è§„åˆ’ï¼Œè®¡ç®—æœ€å°ç¼–è¾‘è·ç¦»
	for (let i = 1; i <= m; i++) {
		for (let j = 1; j <= n; j++) {
			if (word1.charAt(i - 1) == word2.charAt(j - 1)) {
				dp[i][j] = dp[i - 1][j - 1];
			} else {
				dp[i][j] = Math.min(dp[i][j - 1], dp[i - 1][j], dp[i - 1][j - 1]) + 1;
			}
		}
	}
	return dp[m][n];
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 161 | [ç›¸éš”ä¸º 1 çš„ç¼–è¾‘è·ç¦» ğŸ”’](https://leetcode.com/problems/one-edit-distance) |  |  [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | <font color=#ffb800>Medium</font> |
| 583 | [ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ](https://leetcode.com/problems/delete-operation-for-two-strings) | [[âœ“]](/problem/0583.md) |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ffb800>Medium</font> |
| 712 | [ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€å°ASCIIåˆ é™¤å’Œ](https://leetcode.com/problems/minimum-ascii-delete-sum-for-two-strings) | [[âœ“]](/problem/0712.md) |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ffb800>Medium</font> |
| 1035 | [ä¸ç›¸äº¤çš„çº¿](https://leetcode.com/problems/uncrossed-lines) |  |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ffb800>Medium</font> |
| 2209 | [ç”¨åœ°æ¯¯è¦†ç›–åçš„æœ€å°‘ç™½è‰²ç –å—](https://leetcode.com/problems/minimum-white-tiles-after-covering-with-carpets) |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) | <font color=#ff334b>Hard</font> |