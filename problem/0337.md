---
title: 337. æ‰“å®¶åŠ«èˆ III
description: LeetCode 337. æ‰“å®¶åŠ«èˆ IIIé¢˜è§£ï¼ŒHouse Robber IIIï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 337. æ‰“å®¶åŠ«èˆ III
  - æ‰“å®¶åŠ«èˆ III
  - House Robber III
  - è§£é¢˜æ€è·¯
  - æ ‘
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - åŠ¨æ€è§„åˆ’
  - äºŒå‰æ ‘
---

# 337. æ‰“å®¶åŠ«èˆ III

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/house-robber-iii) [`LeetCode`](https://leetcode.com/problems/house-robber-iii)

## é¢˜ç›®

The thief has found himself a new place for his thievery again. There is only
one entrance to this area, called `root`.

Besides the `root`, each house has one and only one parent house. After a
tour, the smart thief realized that all houses in this place form a binary
tree. It will automatically contact the police if **two directly-linked houses
were broken into on the same night**.

Given the `root` of the binary tree, return _the maximum amount of money the
thief can rob**without alerting the police**_.

**Example 1:**

![](https://assets.leetcode.com/uploads/2021/03/10/rob1-tree.jpg)

> Input: root = [3,2,3,null,3,null,1]
>
> Output: 7
>
> Explanation: Maximum amount of money the thief can rob = 3 + 3 + 1 = 7.

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/03/10/rob2-tree.jpg)

> Input: root = [3,4,5,1,3,null,1]
>
> Output: 9
>
> Explanation: Maximum amount of money the thief can rob = 4 + 5 = 9.

**Constraints:**

- The number of nodes in the tree is in the range `[1, 104]`.
- `0 <= Node.val <= 10^4`

## é¢˜ç›®å¤§æ„

å°å·åˆå‘ç°äº†ä¸€ä¸ªæ–°çš„å¯è¡Œçªƒçš„åœ°åŒºã€‚è¿™ä¸ªåœ°åŒºåªæœ‰ä¸€ä¸ªå…¥å£ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º `root` ã€‚

é™¤äº† `root` ä¹‹å¤–ï¼Œæ¯æ ‹æˆ¿å­æœ‰ä¸”åªæœ‰ä¸€ä¸ªâ€œçˆ¶â€œæˆ¿å­ä¸ä¹‹ç›¸è¿ã€‚ä¸€ç•ªä¾¦å¯Ÿä¹‹åï¼Œèªæ˜çš„å°å·æ„è¯†åˆ°â€œè¿™ä¸ªåœ°æ–¹çš„æ‰€æœ‰æˆ¿å±‹çš„æ’åˆ—ç±»ä¼¼äºä¸€æ£µäºŒå‰æ ‘â€ã€‚ å¦‚æœ
**ä¸¤ä¸ªç›´æ¥ç›¸è¿çš„æˆ¿å­åœ¨åŒä¸€å¤©æ™šä¸Šè¢«æ‰“åŠ«** ï¼Œæˆ¿å±‹å°†è‡ªåŠ¨æŠ¥è­¦ã€‚

ç»™å®šäºŒå‰æ ‘çš„ `root` ã€‚è¿”å› _**åœ¨ä¸è§¦åŠ¨è­¦æŠ¥çš„æƒ…å†µä¸‹** ï¼Œå°å·èƒ½å¤Ÿç›—å–çš„æœ€é«˜é‡‘é¢_ ã€‚

**ç¤ºä¾‹ 1:**

![](https://assets.leetcode.com/uploads/2021/03/10/rob1-tree.jpg)

> **è¾“å…¥:** root = [3,2,3,null,3,null,1]
>
> **è¾“å‡º:** 7
>
> **è§£é‡Š:** å°å·ä¸€æ™šèƒ½å¤Ÿç›—å–çš„æœ€é«˜é‡‘é¢ 3 + 3 + 1 = 7

**ç¤ºä¾‹ 2:**

![](https://assets.leetcode.com/uploads/2021/03/10/rob2-tree.jpg)

> **è¾“å…¥:** root = [3,4,5,1,3,null,1]
>
> **è¾“å‡º:** 9
>
> **è§£é‡Š:** å°å·ä¸€æ™šèƒ½å¤Ÿç›—å–çš„æœ€é«˜é‡‘é¢ 4 + 5 = 9

**æç¤ºï¼š**

- æ ‘çš„èŠ‚ç‚¹æ•°åœ¨ `[1, 104]` èŒƒå›´å†…
- `0 <= Node.val <= 10^4`

## è§£é¢˜æ€è·¯

1. **é—®é¢˜åˆ†è§£**

   - å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œæœ‰ä¸¤ç§é€‰æ‹©ï¼š

     - **å·å–è¯¥èŠ‚ç‚¹**ï¼šé‚£ä¹ˆå®ƒçš„ä¸¤ä¸ªå­èŠ‚ç‚¹å°±ä¸èƒ½è¢«å·å–ã€‚
     - **ä¸å·å–è¯¥èŠ‚ç‚¹**ï¼šå¯ä»¥é€‰æ‹©å·å–å­èŠ‚ç‚¹ã€‚

   - æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ•°ç»„ `[notRob, rob]` è¡¨ç¤ºä¸¤ç§çŠ¶æ€ï¼š
     - `notRob`: ä¸å·å–å½“å‰èŠ‚ç‚¹çš„æœ€å¤§æ”¶ç›Šã€‚
     - `rob`: å·å–å½“å‰èŠ‚ç‚¹çš„æœ€å¤§æ”¶ç›Šã€‚

2. **é€’å½’çŠ¶æ€è½¬ç§»**

   - **å¶å­èŠ‚ç‚¹çš„æƒ…å†µ**ï¼š
     - å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™ `[notRob, rob] = [0, 0]`ã€‚
   - **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ï¼š
     - `notRob = max(left[0], left[1]) + max(right[0], right[1])`
       - å½“å‰èŠ‚ç‚¹ä¸å·å–ï¼Œå¯ä»¥ä»å·¦å³å­èŠ‚ç‚¹ä»»æ„çŠ¶æ€ä¸­é€‰æ‹©æœ€å¤§å€¼ã€‚
     - `rob = root.val + left[0] + right[0]`
       - å½“å‰èŠ‚ç‚¹å·å–ï¼Œåªèƒ½åŠ ä¸Šå·¦å³å­èŠ‚ç‚¹ä¸å·å–æ—¶çš„æ”¶ç›Šã€‚

3. **æœ€ç»ˆç»“æœ**
   - å¯¹æ•´æ£µæ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå– `max(notRob, rob)`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ ‘ä¸­èŠ‚ç‚¹çš„æ•°é‡ï¼Œæ¯ä¸ªèŠ‚ç‚¹è®¿é—®ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(h)`ï¼Œå…¶ä¸­ `h` æ˜¯æ ‘çš„é«˜åº¦ï¼Œé€’å½’è°ƒç”¨æ ˆçš„ç©ºé—´å¤æ‚åº¦ä¸º `O(h)`ï¼Œæœ€å·®æƒ…å†µä¸‹ä¸º `O(n)`ï¼ˆå®Œå…¨ä¸å¹³è¡¡æ ‘ï¼‰ã€‚

## ä»£ç 

```javascript
/**
 * @param {TreeNode} root
 * @return {number}
 */
var rob = function (root) {
	const helper = (root) => {
		if (root == null) return [0, 0];

		const left = helper(root.left);
		const right = helper(root.right);

		const notRob = Math.max(left[0], left[1]) + Math.max(right[0], right[1]);
		const rob = root.val + left[0] + right[0];

		return [notRob, rob];
	};

	return Math.max(...helper(root));
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 198 | æ‰“å®¶åŠ«èˆ | [[âœ“]](/problem/0198.md) |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/house-robber) [ğŸ”—](https://leetcode.com/problems/house-robber) |
| 213 | æ‰“å®¶åŠ«èˆ II | [[âœ“]](/problem/0213.md) |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/house-robber-ii) [ğŸ”—](https://leetcode.com/problems/house-robber-ii) |