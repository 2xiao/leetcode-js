# [57. æ’å…¥åŒºé—´](https://leetcode.com/problems/insert-interval)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/insert-interval)

## é¢˜ç›®

You are given an array of non-overlapping intervals `intervals` where
`intervals[i] = [starti, endi]` represent the start and the end of the `ith`
interval and `intervals` is sorted in ascending order by `starti`. You are
also given an interval `newInterval = [start, end]` that represents the start
and end of another interval.

Insert `newInterval` into `intervals` such that `intervals` is still sorted in
ascending order by `starti` and `intervals` still does not have any
overlapping intervals (merge overlapping intervals if necessary).

Return `intervals` _after the insertion_.

**Example 1:**

> Input: intervals = [[1,3],[6,9]], newInterval = [2,5]
>
> Output: [[1,5],[6,9]]

**Example 2:**

> Input: intervals = [[1,2],[3,5],[6,7],[8,10],[12,16]], newInterval = [4,8]
>
> Output: [[1,2],[3,10],[12,16]]
>
> Explanation: Because the new interval [4,8] overlaps with [3,5],[6,7],[8,10].

**Constraints:**

- `0 <= intervals.length <= 10^4`
- `intervals[i].length == 2`
- `0 <= starti <= endi <= 10^5`
- `intervals` is sorted by `starti` in **ascending** order.
- `newInterval.length == 2`
- `0 <= start <= end <= 10^5`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ª **æ— é‡å çš„** ï¼ŒæŒ‰ç…§åŒºé—´èµ·å§‹ç«¯ç‚¹æ’åºçš„åŒºé—´åˆ—è¡¨ `intervals`ï¼Œå…¶ä¸­ `intervals[i] = [starti, endi]` è¡¨ç¤ºç¬¬ `i` ä¸ªåŒºé—´çš„å¼€å§‹å’Œç»“æŸï¼Œå¹¶ä¸” `intervals` æŒ‰ç…§ `starti` å‡åºæ’åˆ—ã€‚åŒæ ·ç»™å®šä¸€ä¸ªåŒºé—´ `newInterval = [start, end]` è¡¨ç¤ºå¦ä¸€ä¸ªåŒºé—´çš„å¼€å§‹å’Œç»“æŸã€‚

åœ¨ `intervals` ä¸­æ’å…¥åŒºé—´ `newInterval`ï¼Œä½¿å¾— `intervals` ä¾ç„¶æŒ‰ç…§ `starti` å‡åºæ’åˆ—ï¼Œä¸”åŒºé—´ä¹‹é—´ä¸é‡å ï¼ˆå¦‚æœæœ‰å¿…è¦çš„è¯ï¼Œå¯ä»¥åˆå¹¶åŒºé—´ï¼‰ã€‚

è¿”å›æ’å…¥ä¹‹åçš„ `intervals`ã€‚

**æ³¨æ„** ä½ ä¸éœ€è¦åŸåœ°ä¿®æ”¹ `intervals`ã€‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ç„¶åè¿”å›å®ƒã€‚

## è§£é¢˜æ€è·¯

1. éå†åŒºé—´æ•°ç»„ï¼Œå–å‡ºå½“å‰åŒºé—´ `[b1, b2]` ï¼Œä¾æ¬¡ä¸æ’å…¥åŒºé—´ `[a1, a2]` å¯¹æ¯”ï¼Œå¯èƒ½æœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µï¼š

![](../../assets/image/57.png)

- æƒ…å†µä¸€ï¼Œä¸¤åŒºé—´ä¸ç›¸äº¤ä¸” `a1 > b2`ï¼Œç›´æ¥å°†å½“å‰åŒºé—´ `[b1, b2]` æ”¾å…¥è¿”å›æ•°ç»„ï¼Œç»§ç»­å¯¹æ¯”åç»­åŒºé—´ï¼›
- æƒ…å†µäºŒï¼Œä¸¤åŒºé—´ä¸ç›¸äº¤ä¸” `a2 < b1`ï¼Œè¯´æ˜å·²ç»æ‰¾åˆ°äº†æ’å…¥åŒºé—´ `[a1, a2]` çš„ä½ç½®ï¼Œå°†æ’å…¥åŒºé—´å’Œåç»­æ²¡æœ‰å¯¹æ¯”è¿‡çš„åŒºé—´éƒ½æ”¾å…¥è¿”å›æ•°ç»„ï¼Œå¹¶è·³å‡ºå¾ªç¯ï¼›
- æƒ…å†µä¸‰ï¼Œä¸¤ä¸ªåŒºé—´ç›¸äº¤ï¼Œæ­¤æ—¶éœ€è¦å°†ä¸¤ä¸ªåŒºé—´åˆå¹¶ï¼Œå°†åˆå¹¶åçš„åŒºé—´ä½œä¸ºæ–°çš„æ’å…¥åŒºé—´ä¸åç»­åŒºé—´å¯¹æ¯”ã€‚åˆå¹¶åçš„åŒºé—´åˆ†ä¸ºå››ç§æƒ…å†µï¼Œæ ¹æ®ä¸Šå›¾å¯ä»¥å‘ç°è§„å¾‹ï¼Œåªéœ€æ›´æ–° `a1` å’Œ `a2` ä¸ºï¼š
  - `a1 = min(a1, b1)`
  - `a2 = max(a2, b2)`

2. æ³¨æ„è¾¹ç•Œæƒ…å†µ

- 1. è‹¥åŒºé—´æ•°ç»„ä¸ºç©ºï¼ˆä¾‹å¦‚ï¼š`intervals = [], newInterval = [1,2]`ï¼‰ï¼Œåˆ™ç›´æ¥è¿”å› `newInterval`ï¼›
- 2. å½“å¾ªç¯éå†åˆ°åŒºé—´æ•°ç»„çš„æœ€åä¸€ä¸ªæ—¶ï¼ˆä¾‹å¦‚ï¼š`intervals = [[2,3]], newInterval = [1,4]`ï¼‰ï¼Œç”±äºåé¢ä¸ä¼šå†å‡ºç°æƒ…å†µ 2 äº†ï¼Œæ‰€ä»¥æœ€åè¦å°†åˆå¹¶åçš„åŒºé—´æ”¾å…¥è¿”å›æ•°ç»„ä¸­ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[][]} intervals
 * @param {number[]} newInterval
 * @return {number[][]}
 */
var insert = function (intervals, newInterval) {
	// è¾¹ç•Œæƒ…å†µä¸€
	if (intervals.length == 0) return [newInterval];
	let res = [],
		a1 = newInterval[0],
		a2 = newInterval[1];
	for (let i = 0; i < intervals.length; i++) {
		let b1 = intervals[i][0],
			b2 = intervals[i][1];
		// æƒ…å†µä¸€
		if (a1 > b2) {
			res.push(intervals[i]);
		}
		// æƒ…å†µäºŒ
		else if (a2 < b1) {
			res.push([a1, a2]);
			res.push(...intervals.slice(i, intervals.length));
			break;
		}
		// æƒ…å†µä¸‰
		else {
			a1 = Math.min(a1, b1);
			a2 = Math.max(a2, b2);
		}
		// è¾¹ç•Œæƒ…å†µäºŒ
		if (i == intervals.length - 1) {
			res.push([a1, a2]);
		}
	}
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 56 | [åˆå¹¶åŒºé—´](https://leetcode.com/problems/merge-intervals) | [[âœ“]](/problem/0056.md) |  [`æ•°ç»„`](/tag/array.md) [`æ’åº`](/tag/sorting.md) | <font color=#ffb800>Medium</font> |
| 715 | [Range æ¨¡å—](https://leetcode.com/problems/range-module) |  |  [`è®¾è®¡`](/tag/design.md) [`çº¿æ®µæ ‘`](/tag/segment-tree.md) [`æœ‰åºé›†åˆ`](/tag/ordered-set.md) | <font color=#ff334b>Hard</font> |
| 2276 | [ç»Ÿè®¡åŒºé—´ä¸­çš„æ•´æ•°æ•°ç›®](https://leetcode.com/problems/count-integers-in-intervals) |  |  [`è®¾è®¡`](/tag/design.md) [`çº¿æ®µæ ‘`](/tag/segment-tree.md) [`æœ‰åºé›†åˆ`](/tag/ordered-set.md) | <font color=#ff334b>Hard</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
