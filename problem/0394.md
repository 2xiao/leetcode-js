---
title: 394. å­—ç¬¦ä¸²è§£ç 
description: LeetCode,394. å­—ç¬¦ä¸²è§£ç ,å­—ç¬¦ä¸²è§£ç ,Decode String,è§£é¢˜æ€è·¯,æ ˆ,é€’å½’,å­—ç¬¦ä¸²
keywords:
  - LeetCode
  - 394. å­—ç¬¦ä¸²è§£ç 
  - å­—ç¬¦ä¸²è§£ç 
  - Decode String
  - è§£é¢˜æ€è·¯
  - æ ˆ
  - é€’å½’
  - å­—ç¬¦ä¸²
---

# 394. å­—ç¬¦ä¸²è§£ç 

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`é€’å½’`](/tag/recursion.md) [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/decode-string) [`LeetCode`](https://leetcode.com/problems/decode-string)

## é¢˜ç›®

Given an encoded string, return its decoded string.

The encoding rule is: `k[encoded_string]`, where the `encoded_string` inside
the square brackets is being repeated exactly `k` times. Note that `k` is
guaranteed to be a positive integer.

You may assume that the input string is always valid; there are no extra white
spaces, square brackets are well-formed, etc. Furthermore, you may assume that
the original data does not contain any digits and that digits are only for
those repeat numbers, `k`. For example, there will not be input like `3a` or
`2[4]`.

The test cases are generated so that the length of the output will never
exceed `105`.

**Example 1:**

> Input: s = "3[a]2[bc]"
>
> Output: "aaabcbc"

**Example 2:**

> Input: s = "3[a2[c]]"
>
> Output: "accaccacc"

**Example 3:**

> Input: s = "2[abc]3[cd]ef"
>
> Output: "abcabccdcdcdef"

**Constraints:**

- `1 <= s.length <= 30`
- `s` consists of lowercase English letters, digits, and square brackets `'[]'`.
- `s` is guaranteed to be **a valid** input.
- All the integers in `s` are in the range `[1, 300]`.

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªç»è¿‡ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œè¿”å›å®ƒè§£ç åçš„å­—ç¬¦ä¸²ã€‚

ç¼–ç è§„åˆ™ä¸º: `k[encoded_string]`ï¼Œè¡¨ç¤ºå…¶ä¸­æ–¹æ‹¬å·å†…éƒ¨çš„ `encoded_string` æ­£å¥½é‡å¤ `k` æ¬¡ã€‚æ³¨æ„ `k` ä¿è¯ä¸ºæ­£æ•´æ•°ã€‚

ä½ å¯ä»¥è®¤ä¸ºè¾“å…¥å­—ç¬¦ä¸²æ€»æ˜¯æœ‰æ•ˆçš„ï¼›è¾“å…¥å­—ç¬¦ä¸²ä¸­æ²¡æœ‰é¢å¤–çš„ç©ºæ ¼ï¼Œä¸”è¾“å…¥çš„æ–¹æ‹¬å·æ€»æ˜¯ç¬¦åˆæ ¼å¼è¦æ±‚çš„ã€‚

æ­¤å¤–ï¼Œä½ å¯ä»¥è®¤ä¸ºåŸå§‹æ•°æ®ä¸åŒ…å«æ•°å­—ï¼Œæ‰€æœ‰çš„æ•°å­—åªè¡¨ç¤ºé‡å¤çš„æ¬¡æ•° `k` ï¼Œä¾‹å¦‚ä¸ä¼šå‡ºç°åƒ `3a` æˆ– `2[4]` çš„è¾“å…¥ã€‚

## è§£é¢˜æ€è·¯

æœ¬é¢˜å’Œ [ç¬¬ 880 é¢˜](./0880.md) ç±»ä¼¼ã€‚éœ€è¦æ³¨æ„ï¼Œæœ¬é¢˜ä¸­å¯èƒ½å‡ºç°æ‹¬å·åµŒå¥—çš„æƒ…å†µï¼Œæ¯”å¦‚ `2[a2[bc]]`ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥å…ˆè½¬åŒ–æˆ `2[abcbc]`ï¼Œå†è½¬åŒ–æˆ `abcbcabcbc`ï¼Œå¯ä»¥ä½¿ç”¨æ ˆå¤„ç†ã€‚

å…·ä½“åšæ³•æ˜¯ï¼š

- éå†å­—ç¬¦ä¸²ï¼Œå¦‚æœå½“å‰çš„å­—ç¬¦ä¸ºæ•°ä½ï¼Œè§£æå‡ºä¸€ä¸ªæ•°å­—ï¼ˆè¿ç»­çš„å¤šä¸ªæ•°ä½ï¼‰å¹¶è¿›æ ˆï¼›
- å¦‚æœå½“å‰çš„å­—ç¬¦ä¸ºå­—æ¯æˆ–è€…å·¦æ‹¬å·ï¼Œç›´æ¥è¿›æ ˆï¼›
- å¦‚æœå½“å‰çš„å­—ç¬¦ä¸ºå³æ‹¬å·ï¼Œå¼€å§‹å‡ºæ ˆï¼Œä¸€ç›´åˆ°å·¦æ‹¬å·å‡ºæ ˆï¼Œå‡ºæ ˆåºåˆ—åè½¬åæ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ­¤æ—¶å–å‡ºæ ˆé¡¶çš„æ•°å­—ï¼Œå°±æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²åº”è¯¥å‡ºç°çš„æ¬¡æ•°ï¼›
- æ ¹æ®è¿™ä¸ªæ¬¡æ•°å’Œå­—ç¬¦ä¸²æ„é€ å‡ºæ–°çš„å­—ç¬¦ä¸²å¹¶è¿›æ ˆï¼Œè¿™é‡Œå¯ä»¥ç”¨äºŒåˆ†æ³•æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œé¿å…è¶…æ—¶ï¼›
- é‡å¤å¦‚ä¸Šæ“ä½œï¼Œæœ€ç»ˆå°†æ ˆä¸­çš„å…ƒç´ æŒ‰ç…§ä»æ ˆåº•åˆ°æ ˆé¡¶çš„é¡ºåºæ‹¼æ¥èµ·æ¥ï¼Œå°±å¾—åˆ°äº†ç­”æ¡ˆã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {string}
 */
var decodeString = function (s) {
	let stack = [];
	let res = '';
	let k = 0;

	const isDigit = (str) => str >= '0' && str <= '9';

	for (let item of s) {
		if (isDigit(item)) {
			k = k * 10 + Number(item);
		} else if (item === '[') {
			stack.push(k);
			stack.push(item);
			k = 0;
		} else if (item === ']') {
			let str = '';
			while (stack[stack.length - 1] !== '[') {
				str = stack.pop() + str;
			}
			stack.pop();
			let num = stack.pop();

			stack.push(repreat(str, num));
		} else {
			stack.push(item);
		}
	}
	while (stack.length > 0) {
		res = stack.pop() + res;
	}
	return res;
};

// äºŒåˆ†æ³•æ‹¼æ¥å­—ç¬¦ä¸²
var repreat = function (str, num) {
	let res = str,
		temp = '';
	while (num > 1) {
		if (num % 2 == 1) {
			temp += res;
		}
		res += res;
		num = (num / 2) | 0;
	}
	return res + temp;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------ | :------: |
| 471 | ç¼–ç æœ€çŸ­é•¿åº¦çš„å­—ç¬¦ä¸² ğŸ”’ |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ff334b>Hard</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/encode-string-with-shortest-length) [ğŸ”—](https://leetcode.com/problems/encode-string-with-shortest-length) |
| 726 | åŸå­çš„æ•°é‡ |  |  [`æ ˆ`](/tag/stack.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `1+` | <font color=#ff334b>Hard</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/number-of-atoms) [ğŸ”—](https://leetcode.com/problems/number-of-atoms) |
| 1087 | èŠ±æ‹¬å·å±•å¼€ ğŸ”’ |  |  [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/brace-expansion) [ğŸ”—](https://leetcode.com/problems/brace-expansion) |