# [394. å­—ç¬¦ä¸²è§£ç ](https://leetcode.com/problems/decode-string)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`é€’å½’`](/tag/recursion.md) [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/decode-string)

## é¢˜ç›®

<p>ç»™å®šä¸€ä¸ªç»è¿‡ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œè¿”å›å®ƒè§£ç åçš„å­—ç¬¦ä¸²ã€‚</p>

<p>ç¼–ç è§„åˆ™ä¸º: <code>k[encoded_string]</code>ï¼Œè¡¨ç¤ºå…¶ä¸­æ–¹æ‹¬å·å†…éƒ¨çš„ <code>encoded_string</code> æ­£å¥½é‡å¤ <code>k</code> æ¬¡ã€‚æ³¨æ„ <code>k</code> ä¿è¯ä¸ºæ­£æ•´æ•°ã€‚</p>

<p>ä½ å¯ä»¥è®¤ä¸ºè¾“å…¥å­—ç¬¦ä¸²æ€»æ˜¯æœ‰æ•ˆçš„ï¼›è¾“å…¥å­—ç¬¦ä¸²ä¸­æ²¡æœ‰é¢å¤–çš„ç©ºæ ¼ï¼Œä¸”è¾“å…¥çš„æ–¹æ‹¬å·æ€»æ˜¯ç¬¦åˆæ ¼å¼è¦æ±‚çš„ã€‚</p>

<p>æ­¤å¤–ï¼Œä½ å¯ä»¥è®¤ä¸ºåŸå§‹æ•°æ®ä¸åŒ…å«æ•°å­—ï¼Œæ‰€æœ‰çš„æ•°å­—åªè¡¨ç¤ºé‡å¤çš„æ¬¡æ•° <code>k</code> ï¼Œä¾‹å¦‚ä¸ä¼šå‡ºç°åƒ&nbsp;<code>3a</code>&nbsp;æˆ–&nbsp;<code>2[4]</code>&nbsp;çš„è¾“å…¥ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>s = "3[a]2[bc]"
<strong>è¾“å‡ºï¼š</strong>"aaabcbc"
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>s = "3[a2[c]]"
<strong>è¾“å‡ºï¼š</strong>"accaccacc"
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>s = "2[abc]3[cd]ef"
<strong>è¾“å‡ºï¼š</strong>"abcabccdcdcdef"
</pre>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>s = "abc3[cd]xyz"
<strong>è¾“å‡ºï¼š</strong>"abccdcdcdxyz"
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= s.length &lt;= 30</code></li>
	<li><meta charset="UTF-8" /><code>s</code>&nbsp;ç”±å°å†™è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œæ–¹æ‹¬å·<meta charset="UTF-8" />&nbsp;<code>'[]'</code> ç»„æˆ</li>
	<li><code>s</code>&nbsp;ä¿è¯æ˜¯ä¸€ä¸ª&nbsp;<strong>æœ‰æ•ˆ</strong>&nbsp;çš„è¾“å…¥ã€‚</li>
	<li><code>s</code>&nbsp;ä¸­æ‰€æœ‰æ•´æ•°çš„å–å€¼èŒƒå›´ä¸º<meta charset="UTF-8" />&nbsp;<code>[1, 300]</code>&nbsp;</li>
</ul>


## è§£é¢˜æ€è·¯

æœ¬é¢˜å’Œ [ç¬¬ 880 é¢˜](./0880.md) ç±»ä¼¼ã€‚éœ€è¦æ³¨æ„ï¼Œæœ¬é¢˜ä¸­å¯èƒ½å‡ºç°æ‹¬å·åµŒå¥—çš„æƒ…å†µï¼Œæ¯”å¦‚ `2[a2[bc]]`ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥å…ˆè½¬åŒ–æˆ `2[abcbc]`ï¼Œå†è½¬åŒ–æˆ `abcbcabcbc`ï¼Œå¯ä»¥ä½¿ç”¨æ ˆå¤„ç†ã€‚

å…·ä½“åšæ³•æ˜¯ï¼š

- éå†å­—ç¬¦ä¸²ï¼Œå¦‚æœå½“å‰çš„å­—ç¬¦ä¸ºæ•°ä½ï¼Œè§£æå‡ºä¸€ä¸ªæ•°å­—ï¼ˆè¿ç»­çš„å¤šä¸ªæ•°ä½ï¼‰å¹¶è¿›æ ˆï¼›
- å¦‚æœå½“å‰çš„å­—ç¬¦ä¸ºå­—æ¯æˆ–è€…å·¦æ‹¬å·ï¼Œç›´æ¥è¿›æ ˆï¼›
- å¦‚æœå½“å‰çš„å­—ç¬¦ä¸ºå³æ‹¬å·ï¼Œå¼€å§‹å‡ºæ ˆï¼Œä¸€ç›´åˆ°å·¦æ‹¬å·å‡ºæ ˆï¼Œå‡ºæ ˆåºåˆ—åè½¬åæ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ­¤æ—¶å–å‡ºæ ˆé¡¶çš„æ•°å­—ï¼Œå°±æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²åº”è¯¥å‡ºç°çš„æ¬¡æ•°ï¼›
- æ ¹æ®è¿™ä¸ªæ¬¡æ•°å’Œå­—ç¬¦ä¸²æ„é€ å‡ºæ–°çš„å­—ç¬¦ä¸²å¹¶è¿›æ ˆï¼Œè¿™é‡Œå¯ä»¥ç”¨äºŒåˆ†æ³•æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œé¿å…è¶…æ—¶ï¼›
- é‡å¤å¦‚ä¸Šæ“ä½œï¼Œæœ€ç»ˆå°†æ ˆä¸­çš„å…ƒç´ æŒ‰ç…§ä»æ ˆåº•åˆ°æ ˆé¡¶çš„é¡ºåºæ‹¼æ¥èµ·æ¥ï¼Œå°±å¾—åˆ°äº†ç­”æ¡ˆã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {string}
 */
var decodeString = function (s) {
	let stack = [];
	let res = '';
	let k = 0;

	const isDigit = (str) => str >= '0' && str <= '9';

	for (let item of s) {
		if (isDigit(item)) {
			k = k * 10 + Number(item);
		} else if (item === '[') {
			stack.push(k);
			stack.push(item);
			k = 0;
		} else if (item === ']') {
			let str = '';
			while (stack[stack.length - 1] !== '[') {
				str = stack.pop() + str;
			}
			stack.pop();
			let num = stack.pop();

			stack.push(repreat(str, num));
		} else {
			stack.push(item);
		}
	}
	while (stack.length > 0) {
		res = stack.pop() + res;
	}
	return res;
};

// äºŒåˆ†æ³•æ‹¼æ¥å­—ç¬¦ä¸²
var repreat = function (str, num) {
	let res = str,
		temp = '';
	while (num > 1) {
		if (num % 2 == 1) {
			temp += res;
		}
		res += res;
		num = (num / 2) | 0;
	}
	return res + temp;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 471 | [ç¼–ç æœ€çŸ­é•¿åº¦çš„å­—ç¬¦ä¸²](https://leetcode.com/problems/encode-string-with-shortest-length) |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ff334b>Hard</font> |
| 726 | [åŸå­çš„æ•°é‡](https://leetcode.com/problems/number-of-atoms) |  |  [`æ ˆ`](/tag/stack.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `1+` | <font color=#ff334b>Hard</font> |
| 1087 | [èŠ±æ‹¬å·å±•å¼€](https://leetcode.com/problems/brace-expansion) |  |  [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |