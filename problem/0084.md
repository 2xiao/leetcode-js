---
title: 84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢
description: LeetCode,84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢,æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢,Largest Rectangle in Histogram,è§£é¢˜æ€è·¯,æ ˆ,æ•°ç»„,å•è°ƒæ ˆ
keywords:
  - LeetCode
  - 84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢
  - æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢
  - Largest Rectangle in Histogram
  - è§£é¢˜æ€è·¯
  - æ ˆ
  - æ•°ç»„
  - å•è°ƒæ ˆ
---

# 84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`æ•°ç»„`](/tag/array.md) [`å•è°ƒæ ˆ`](/tag/monotonic-stack.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/largest-rectangle-in-histogram) [`LeetCode`](https://leetcode.com/problems/largest-rectangle-in-histogram)

## é¢˜ç›®

Given an array of integers `heights` representing the histogram's bar height
where the width of each bar is `1`, return _the area of the largest rectangle
in the histogram_.

**Example 1:**

![](https://assets.leetcode.com/uploads/2021/01/04/histogram.jpg)

> Input: heights = [2,1,5,6,2,3]
>
> Output: 10
>
> Explanation: The above is a histogram where width of each bar is 1.
>
> The largest rectangle is shown in the red area, which has an area = 10 units.

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/01/04/histogram-1.jpg)

> Input: heights = [2,4]
>
> Output: 4

**Constraints:**

- `1 <= heights.length <= 10^5`
- `0 <= heights[i] <= 10^4`

## é¢˜ç›®å¤§æ„

ç»™å®š _n_ ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚

æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚

**ç¤ºä¾‹ 1:**

![](https://assets.leetcode.com/uploads/2021/01/04/histogram.jpg)

> **è¾“å…¥ï¼š** heights = [2,1,5,6,2,3]
>
> **è¾“å‡ºï¼š** 10
>
> **è§£é‡Šï¼š** æœ€å¤§çš„çŸ©å½¢ä¸ºå›¾ä¸­çº¢è‰²åŒºåŸŸï¼Œé¢ç§¯ä¸º 10

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/01/04/histogram-1.jpg)

> **è¾“å…¥ï¼š** heights = [2,4]
>
> **è¾“å‡ºï¼š** 4

**æç¤ºï¼š**

- `1 <= heights.length <=10^5`
- `0 <= heights[i] <= 10^4`

## è§£é¢˜æ€è·¯

å¯ä»¥ä½¿ç”¨**å•è°ƒæ ˆ**æ¥ç»´æŠ¤ä¸€ä¸ªé€’å¢çš„æŸ±å½¢é«˜åº¦åºåˆ—ï¼Œä»è€Œèƒ½å¤Ÿå¿«é€Ÿæ‰¾åˆ°æ¯æ ¹æŸ±å­å·¦å³ä¸¤è¾¹çš„è¾¹ç•Œï¼Œè®¡ç®—å‡ºå®ƒèƒ½å½¢æˆçš„æœ€å¤§çŸ©å½¢é¢ç§¯ã€‚

1. éå†æ¯ä¸ªæŸ±å½¢

ä»å·¦åˆ°å³éå†æŸ±å½¢ï¼Œå¦‚æœå½“å‰æŸ±å­çš„é«˜åº¦æ¯”æ ˆé¡¶æŸ±å­çš„é«˜åº¦å¤§ï¼Œåˆ™ç»§ç»­å‘å³æ‰©å±•ã€‚å¦åˆ™ï¼Œå¼¹å‡ºæ ˆé¡¶çš„æŸ±å­å¹¶è®¡ç®—å®ƒæ‰€èƒ½å½¢æˆçš„çŸ©å½¢é¢ç§¯ã€‚

2. è®¡ç®—é¢ç§¯

æ¯å½“é‡åˆ°ä¸€ä¸ªæ¯”æ ˆé¡¶å…ƒç´ é«˜åº¦å°çš„æŸ±å­æ—¶ï¼Œå°†æ ˆé¡¶æŸ±å­å¼¹å‡ºï¼Œå°†å…¶è§†ä¸ºå½“å‰èƒ½å¤Ÿå½¢æˆçŸ©å½¢çš„é«˜åº¦ï¼Œå¹¶ä½¿ç”¨æ ˆä¸­çš„å‰ä¸€ä¸ªæŸ±å­çš„ç´¢å¼•æ¥ç¡®å®šçŸ©å½¢çš„å®½åº¦èŒƒå›´ã€‚æ ¹æ®è¯¥å®½åº¦å’Œé«˜åº¦æ¥è®¡ç®—é¢ç§¯ã€‚

3. ç»“æŸæ—¶æ¸…ç©ºæ ˆ

å½“éå†å®Œæˆåï¼Œå¯èƒ½æ ˆä¸­è¿˜æœ‰æœªå¤„ç†çš„æŸ±å­ã€‚è¿™æ—¶å°†æ ˆä¸­çš„æŸ±å­é€ä¸ªå¼¹å‡ºï¼Œè®¡ç®—é¢ç§¯ï¼Œç›´åˆ°æ ˆä¸ºç©ºã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**: `O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æŸ±å­çš„æ•°é‡ã€‚æ¯ä¸ªæŸ±å­æœ€å¤šä¼šè¢«å‹å…¥å’Œå¼¹å‡ºæ ˆä¸€æ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§çš„ã€‚
- **ç©ºé—´å¤æ‚åº¦**: `O(n)`ï¼Œä½¿ç”¨ä¸€ä¸ªæ ˆæ¥å­˜å‚¨æŸ±å­çš„ç´¢å¼•ï¼Œæœ€åæƒ…å†µä¸‹ï¼Œæ ˆçš„å¤§å°å¯èƒ½æ˜¯ `O(n)`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} heights
 * @return {number}
 */
var largestRectangleArea = function (heights) {
	let stack = [], // ç”¨äºå­˜å‚¨æŸ±å­çš„ç´¢å¼•
		res = 0;

	// æ·»åŠ ä¸€ä¸ªé«˜åº¦ä¸º0çš„æŸ±å­ï¼Œç”¨æ¥å¤„ç†å‰©ä½™çš„æ ˆå…ƒç´ 
	heights.push(0);

	for (let i = 0; i < heights.length; i++) {
		while (stack.length && heights[i] < heights[stack[stack.length - 1]]) {
			// çŸ©å½¢é«˜åº¦å°±æ˜¯å½“å‰æŸ±å­çš„é«˜åº¦
			const h = heights[stack.pop()];
			// çŸ©å½¢å®½åº¦
			const w = stack.length === 0 ? i : i - stack[stack.length - 1] - 1;

			// æ›´æ–°æœ€å¤§çŸ©å½¢é¢ç§¯
			res = Math.max(res, w * h);
		}

		// å°†å½“å‰æŸ±å­çš„ç´¢å¼•å­˜å…¥æ ˆä¸­
		stack.push(i);
	}
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------ | :------: |
| 85 | æœ€å¤§çŸ©å½¢ | [[âœ“]](/problem/0085.md) |  [`æ ˆ`](/tag/stack.md) [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) `2+` | <font color=#ff334b>Hard</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/maximal-rectangle) [ğŸ”—](https://leetcode.com/problems/maximal-rectangle) |
| 1793 | å¥½å­æ•°ç»„çš„æœ€å¤§åˆ†æ•° |  |  [`æ ˆ`](/tag/stack.md) [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) `2+` | <font color=#ff334b>Hard</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-score-of-a-good-subarray) [ğŸ”—](https://leetcode.com/problems/maximum-score-of-a-good-subarray) |