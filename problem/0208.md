# [208. å®ç° Trie (å‰ç¼€æ ‘)](https://leetcode.com/problems/implement-trie-prefix-tree)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/tag/design.md) [`å­—å…¸æ ‘`](/tag/trie.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/implement-trie-prefix-tree)

## é¢˜ç›®

<p><strong><a href="https://baike.baidu.com/item/å­—å…¸æ ‘/9825209?fr=aladdin" target="_blank">Trie</a></strong>ï¼ˆå‘éŸ³ç±»ä¼¼ "try"ï¼‰æˆ–è€…è¯´ <strong>å‰ç¼€æ ‘</strong> æ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œç”¨äºé«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢å­—ç¬¦ä¸²æ•°æ®é›†ä¸­çš„é”®ã€‚è¿™ä¸€æ•°æ®ç»“æ„æœ‰ç›¸å½“å¤šçš„åº”ç”¨æƒ…æ™¯ï¼Œä¾‹å¦‚è‡ªåŠ¨è¡¥å…¨å’Œæ‹¼å†™æ£€æŸ¥ã€‚</p>

<p>è¯·ä½ å®ç° Trie ç±»ï¼š</p>

<ul>
	<li><code>Trie()</code> åˆå§‹åŒ–å‰ç¼€æ ‘å¯¹è±¡ã€‚</li>
	<li><code>void insert(String word)</code> å‘å‰ç¼€æ ‘ä¸­æ’å…¥å­—ç¬¦ä¸² <code>word</code> ã€‚</li>
	<li><code>boolean search(String word)</code> å¦‚æœå­—ç¬¦ä¸² <code>word</code> åœ¨å‰ç¼€æ ‘ä¸­ï¼Œè¿”å› <code>true</code>ï¼ˆå³ï¼Œåœ¨æ£€ç´¢ä¹‹å‰å·²ç»æ’å…¥ï¼‰ï¼›å¦åˆ™ï¼Œè¿”å› <code>false</code> ã€‚</li>
	<li><code>boolean startsWith(String prefix)</code> å¦‚æœä¹‹å‰å·²ç»æ’å…¥çš„å­—ç¬¦ä¸²&nbsp;<code>word</code> çš„å‰ç¼€ä¹‹ä¸€ä¸º <code>prefix</code> ï¼Œè¿”å› <code>true</code> ï¼›å¦åˆ™ï¼Œè¿”å› <code>false</code> ã€‚</li>
</ul>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ï¼š</strong></p>

<pre>
<strong>è¾“å…¥</strong>
["Trie", "insert", "search", "search", "startsWith", "insert", "search"]
[[], ["apple"], ["apple"], ["app"], ["app"], ["app"], ["app"]]
<strong>è¾“å‡º</strong>
[null, null, true, false, true, null, true]

<strong>è§£é‡Š</strong>
Trie trie = new Trie();
trie.insert("apple");
trie.search("apple");   // è¿”å› True
trie.search("app");     // è¿”å› False
trie.startsWith("app"); // è¿”å› True
trie.insert("app");
trie.search("app");     // è¿”å› True
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= word.length, prefix.length &lt;= 2000</code></li>
	<li><code>word</code> å’Œ <code>prefix</code> ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li>
	<li><code>insert</code>ã€<code>search</code> å’Œ <code>startsWith</code> è°ƒç”¨æ¬¡æ•° <strong>æ€»è®¡</strong> ä¸è¶…è¿‡ <code>3 * 10<sup>4</sup></code> æ¬¡</li>
</ul>


## è§£é¢˜æ€è·¯

Trie æ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œä¸“é—¨ç”¨äºå­˜å‚¨å­—ç¬¦ä¸²é›†ã€‚æ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºå­—ç¬¦ä¸²çš„ä¸€ä¸ªå­—ç¬¦ï¼Œå­èŠ‚ç‚¹å¯¹åº”è¯¥å­—ç¬¦åç»­çš„å­—ç¬¦åºåˆ—ã€‚Trie çš„æœ€å¤§ä¼˜ç‚¹æ˜¯å¯ä»¥åœ¨ **O(m)** æ—¶é—´å†…å®ŒæˆæŸ¥æ‰¾æˆ–æ’å…¥æ“ä½œï¼Œå…¶ä¸­ `m` æ˜¯è¦æŸ¥æ‰¾æˆ–æ’å…¥çš„å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚

Trie çš„ç»“æ„ï¼š

- æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œæ¯ä¸ªå­èŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªå­—æ¯ã€‚
- ä¸€ä¸ªæ ‡å¿—ä½ `isEnd` ç”¨äºè¡¨ç¤ºæ˜¯å¦å­˜åœ¨ä¸€ä¸ªä»¥å½“å‰èŠ‚ç‚¹ä¸ºç»“å°¾çš„å®Œæ•´å•è¯ã€‚

1. **æ’å…¥å•è¯ (`insert`)**ï¼š
   - ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå¯¹äºå•è¯ä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œä¾æ¬¡åˆ›å»ºå­èŠ‚ç‚¹ã€‚å¦‚æœå­—ç¬¦çš„å­èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„å­èŠ‚ç‚¹ã€‚
   - æœ€åï¼Œæ ‡è®°è¯¥èŠ‚ç‚¹ä¸ºå•è¯çš„ç»“å°¾ï¼ˆå³ `isEnd = true`ï¼‰ã€‚
2. **æŸ¥æ‰¾å•è¯ (`search`)**ï¼š
   - ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¾æ¬¡æ²¿ç€ç»™å®šå•è¯çš„å­—ç¬¦æŸ¥æ‰¾å¯¹åº”çš„å­èŠ‚ç‚¹ã€‚
   - å¦‚æœæ‰¾åˆ°æ‰€æœ‰å­—ç¬¦ä¸”æœ€åä¸€ä¸ªèŠ‚ç‚¹æ ‡è®°ä¸ºå•è¯çš„ç»“å°¾ï¼Œè¿”å› `true`ï¼›å¦åˆ™ï¼Œè¿”å› `false`ã€‚
3. **æŸ¥æ‰¾å‰ç¼€ (`startsWith`)**ï¼š
   - å’Œ `search` ç±»ä¼¼ï¼Œåªæ˜¯ä¸è¦æ±‚èŠ‚ç‚¹æ˜¯å•è¯çš„ç»“å°¾ï¼Œåªè¦èƒ½æ‰¾åˆ°æ‰€æœ‰å‰ç¼€å­—ç¬¦å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå°±è¿”å› `true`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š

  - **æ’å…¥å•è¯ (`insert`)**ï¼š`O(L)`ï¼Œ`L` æ˜¯è¦æ’å…¥çš„å•è¯é•¿åº¦ï¼Œå¯¹äºæ¯ä¸ªå•è¯ï¼Œå­—ç¬¦é€ä¸ªè¢«æ’å…¥ Trie ä¸­ã€‚
  - **æœç´¢å•è¯ (`search`)**ï¼š`O(L)`ï¼Œ`L` æ˜¯è¦æŸ¥æ‰¾çš„å•è¯é•¿åº¦ï¼Œæœç´¢å•è¯æ—¶éœ€è¦é€ä¸ªå­—ç¬¦åœ°åœ¨ Trie ä¸­æŸ¥æ‰¾ã€‚
  - **æ£€æŸ¥å‰ç¼€ (`startsWith`)**ï¼š`O(L)`ï¼Œ`L` æ˜¯å‰ç¼€çš„é•¿åº¦ï¼Œéœ€è¦éå†å‰ç¼€çš„æ¯ä¸ªå­—ç¬¦ï¼Œæ£€æŸ¥å‰ç¼€æ˜¯å¦å­˜åœ¨ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n * L)`ï¼Œå…¶ä¸­ `n` æ˜¯å•è¯æ•°é‡ï¼Œ`L` æ˜¯å•è¯çš„å¹³å‡é•¿åº¦ï¼Œåœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ¯ä¸ªå­—ç¬¦éƒ½éœ€è¦ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹æ¥å­˜å‚¨ï¼Œå› æ­¤å¯¹äºæ¯ä¸ªæ’å…¥çš„å•è¯ï¼Œå¯èƒ½åˆ›å»º `L` ä¸ªæ–°çš„èŠ‚ç‚¹ã€‚

## ä»£ç 

```javascript
var Trie = function () {
	this.root = {}; // åˆå§‹åŒ–æ ¹èŠ‚ç‚¹
};

// æ’å…¥ä¸€ä¸ªå•è¯åˆ° Trie
/**
 * @param {string} word
 * @return {void}
 */
Trie.prototype.insert = function (word) {
	let node = this.root;
	for (let char of word) {
		// å¦‚æœå­èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°çš„å­èŠ‚ç‚¹
		if (!node[char]) {
			node[char] = {};
		}
		// ç»§ç»­éå†ä¸‹ä¸€ä¸ªå­—ç¬¦
		node = node[char];
	}
	// å•è¯ç»“æŸæ ‡è®°
	node.isEnd = true;
};

// æœç´¢å•è¯ï¼Œè¦æ±‚å®Œå…¨åŒ¹é…
/**
 * @param {string} word
 * @return {boolean}
 */
Trie.prototype.search = function (word) {
	let node = this.root;
	for (let char of word) {
		// å¦‚æœæ‰¾ä¸åˆ°å­—ç¬¦ï¼Œè¿”å› false
		if (!node[char]) return false;
		node = node[char];
	}
	// åªæœ‰åˆ°è¾¾çš„èŠ‚ç‚¹æ˜¯å•è¯ç»“å°¾æ—¶ï¼Œæ‰è¿”å› true
	return node.isEnd == true;
};

// æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä»¥æŸä¸ªå‰ç¼€å¼€å¤´çš„å•è¯
/**
 * @param {string} prefix
 * @return {boolean}
 */
Trie.prototype.startsWith = function (prefix) {
	let node = this.root;
	for (let char of prefix) {
		// å¦‚æœå‰ç¼€å­—ç¬¦ä¸å­˜åœ¨ï¼Œè¿”å› false
		if (!node[char]) return false;
		node = node[char];
	}
	// åªè¦èƒ½åŒ¹é…åˆ°å‰ç¼€ï¼Œè¿”å› true
	return true;
};

/**
 * Your Trie object will be instantiated and called as such:
 * var obj = new Trie()
 * obj.insert(word)
 * var param_2 = obj.search(word)
 * var param_3 = obj.startsWith(prefix)
 */
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 211 | [æ·»åŠ ä¸æœç´¢å•è¯ - æ•°æ®ç»“æ„è®¾è®¡](https://leetcode.com/problems/design-add-and-search-words-data-structure) | [[âœ“]](/problem/0211.md) |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`è®¾è®¡`](/tag/design.md) [`å­—å…¸æ ‘`](/tag/trie.md) `1+` | <font color=#ffb800>Medium</font> |
| 642 | [è®¾è®¡æœç´¢è‡ªåŠ¨è¡¥å…¨ç³»ç»Ÿ](https://leetcode.com/problems/design-search-autocomplete-system) |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`è®¾è®¡`](/tag/design.md) [`å­—å…¸æ ‘`](/tag/trie.md) `4+` | <font color=#ff334b>Hard</font> |
| 648 | [å•è¯æ›¿æ¢](https://leetcode.com/problems/replace-words) |  |  [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) `1+` | <font color=#ffb800>Medium</font> |
| 676 | [å®ç°ä¸€ä¸ªé­”æ³•å­—å…¸](https://leetcode.com/problems/implement-magic-dictionary) |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`è®¾è®¡`](/tag/design.md) [`å­—å…¸æ ‘`](/tag/trie.md) `2+` | <font color=#ffb800>Medium</font> |
| 1804 | [å®ç° Trie ï¼ˆå‰ç¼€æ ‘ï¼‰ II](https://leetcode.com/problems/implement-trie-ii-prefix-tree) |  |  [`è®¾è®¡`](/tag/design.md) [`å­—å…¸æ ‘`](/tag/trie.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) `1+` | <font color=#ffb800>Medium</font> |
| 2227 | [åŠ å¯†è§£å¯†å­—ç¬¦ä¸²](https://leetcode.com/problems/encrypt-and-decrypt-strings) |  |  [`è®¾è®¡`](/tag/design.md) [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) `2+` | <font color=#ff334b>Hard</font> |
| 3042 | [ç»Ÿè®¡å‰åç¼€ä¸‹æ ‡å¯¹ I](https://leetcode.com/problems/count-prefix-and-suffix-pairs-i) |  |  [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `3+` | <font color=#15bd66>Easy</font> |
| 3045 | [ç»Ÿè®¡å‰åç¼€ä¸‹æ ‡å¯¹ II](https://leetcode.com/problems/count-prefix-and-suffix-pairs-ii) |  |  [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `3+` | <font color=#ff334b>Hard</font> |