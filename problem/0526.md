---
title: 526. ä¼˜ç¾çš„æ’åˆ—
description: LeetCode 526. ä¼˜ç¾çš„æ’åˆ—é¢˜è§£ï¼ŒBeautiful Arrangementï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 526. ä¼˜ç¾çš„æ’åˆ—
  - ä¼˜ç¾çš„æ’åˆ—
  - Beautiful Arrangement
  - è§£é¢˜æ€è·¯
  - ä½è¿ç®—
  - æ•°ç»„
  - åŠ¨æ€è§„åˆ’
  - å›æº¯
  - çŠ¶æ€å‹ç¼©
---

# 526. ä¼˜ç¾çš„æ’åˆ—

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`å›æº¯`](/tag/backtracking.md) [`çŠ¶æ€å‹ç¼©`](/tag/bitmask.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/beautiful-arrangement) [`LeetCode`](https://leetcode.com/problems/beautiful-arrangement)

## é¢˜ç›®

Suppose you have `n` integers labeled `1` through `n`. A permutation of those
`n` integers `perm` (**1-indexed**) is considered a **beautiful arrangement**
if for every `i` (`1 <= i <= n`), **either** of the following is true:

- `perm[i]` is divisible by `i`.
- `i` is divisible by `perm[i]`.

Given an integer `n`, return _the **number** of the **beautiful arrangements**
that you can construct_.

**Example 1:**

> Input: n = 2
>
> Output: 2
>
> Explanation:
>
> The first beautiful arrangement is [1,2]:
>
> - perm[1] = 1 is divisible by i = 1
>
> - perm[2] = 2 is divisible by i = 2
>
> The second beautiful arrangement is [2,1]:
>
> - perm[1] = 2 is divisible by i = 1
>
> - i = 2 is divisible by perm[2] = 1

**Example 2:**

> Input: n = 1
>
> Output: 1

**Constraints:**

- `1 <= n <= 15`

## é¢˜ç›®å¤§æ„

å‡è®¾æœ‰ä» 1 åˆ° n çš„ n ä¸ªæ•´æ•°ã€‚ç”¨è¿™äº›æ•´æ•°æ„é€ ä¸€ä¸ªæ•°ç»„ `perm`ï¼ˆ**ä¸‹æ ‡ä» 1 å¼€å§‹** ï¼‰ï¼Œåªè¦æ»¡è¶³ä¸‹è¿°æ¡ä»¶ **ä¹‹ä¸€** ï¼Œè¯¥æ•°ç»„å°±æ˜¯ä¸€ä¸ª
**ä¼˜ç¾çš„æ’åˆ—** ï¼š

- `perm[i]` èƒ½å¤Ÿè¢« `i` æ•´é™¤
- `i` èƒ½å¤Ÿè¢« `perm[i]` æ•´é™¤

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¿”å›å¯ä»¥æ„é€ çš„ **ä¼˜ç¾æ’åˆ—** çš„ **æ•°é‡** ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** n = 2
>
> **è¾“å‡ºï¼š** 2
>
> **è§£é‡Šï¼š**
>
> ç¬¬ 1 ä¸ªä¼˜ç¾çš„æ’åˆ—æ˜¯ [1,2]ï¼š
>
> - perm[1] = 1 èƒ½è¢« i = 1 æ•´é™¤
>
> - perm[2] = 2 èƒ½è¢« i = 2 æ•´é™¤
>
> ç¬¬ 2 ä¸ªä¼˜ç¾çš„æ’åˆ—æ˜¯ [2,1]:
>
> - perm[1] = 2 èƒ½è¢« i = 1 æ•´é™¤
>
> - i = 2 èƒ½è¢« perm[2] = 1 æ•´é™¤

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** n = 1
>
> **è¾“å‡ºï¼š** 1

**æç¤ºï¼š**

- `1 <= n <= 15`

## è§£é¢˜æ€è·¯

1. **å›æº¯å‡½æ•° `backtrack(idx)`**

   - `idx` ä»£è¡¨å½“å‰å¡«å……çš„ä½ç½®ï¼ˆä» `1` å¼€å§‹ï¼‰ã€‚
   - å½“ `idx > n` æ—¶ï¼Œè¯´æ˜æ‰€æœ‰æ•°å­—å·²ç»æ’åˆ—å®Œæˆï¼Œæ»¡è¶³æ¡ä»¶çš„æ–¹æ¡ˆæ•° `result +1`ã€‚
   - å¦åˆ™ï¼Œéå† `1~n` çš„æ‰€æœ‰æ•°å­—ï¼Œå°è¯•æ”¾å…¥å½“å‰ `idx` ä½ç½®ï¼š
     - åªæœ‰ `idx % i == 0` æˆ– `i % idx == 0` æ—¶ï¼Œæ‰èƒ½ç»§ç»­é€’å½’ã€‚
     - ä½¿ç”¨ `used` æ•°ç»„è®°å½•å·²ä½¿ç”¨çš„æ•°å­—ï¼Œé¿å…é‡å¤é€‰æ‹©ã€‚
     - å›æº¯åæ¢å¤ `used` çŠ¶æ€ï¼ˆå›æº¯æ’¤é”€ï¼‰ã€‚

2. **å‰ªæä¼˜åŒ–**
   - ç”±äº **å¤§çš„æ•°å­—æ›´éš¾æ»¡è¶³ `idx % i == 0`**ï¼Œæ‰€ä»¥æˆ‘ä»¬ **å€’åºéå†** `i`ï¼Œè®©å¤§æ•°ä¼˜å…ˆæ”¾å…¥ï¼Œèƒ½æ›´æ—©å‘ç°ä¸ç¬¦åˆçš„æƒ…å†µï¼Œå‡å°‘å›æº¯æ¬¡æ•°ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n^n)`
  - æœ€åæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦éå† `n!` ç§æ’åˆ—ï¼Œå› æ­¤æœ€åæ—¶é—´å¤æ‚åº¦ä¸º `O(n!)`ã€‚
  - ç”±äºå‰ªæä¼˜åŒ–ï¼ˆ`idx % i == 0 || i % idx == 0`ï¼‰ï¼Œæœç´¢ç©ºé—´è¢«å¤§å¹…å‡å°‘ï¼Œå®é™…å¤æ‚åº¦è¿œå°äº `O(n!)`ï¼Œå¤§çº¦åœ¨ `O(n^n)` çº§åˆ«ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œä½¿ç”¨äº†ä¸€ä¸ª `used` æ•°ç»„è®°å½•å·²ä½¿ç”¨çš„æ•°å­—ã€‚

## ä»£ç 

```js
/**
 * @param {number} n
 * @return {number}
 */
var countArrangement = function (n) {
	let result = 0;
	const used = new Array(n + 1).fill(false); // é•¿åº¦è®¾ä¸º n+1ï¼Œæ–¹ä¾¿ç´¢å¼• 1~n

	const backtrack = (idx) => {
		if (idx == n + 1) {
			// é€’å½’å‡ºå£ï¼Œæ‰¾åˆ°ä¸€ä¸ªåˆæ³•æ’åˆ—
			result++;
			return;
		}
		for (let i = n; i > 0; i--) {
			// å€’åºéå†ï¼Œå‡å°‘å›æº¯
			if (!used[i] && (idx % i == 0 || i % idx == 0)) {
				used[i] = true;
				backtrack(idx + 1);
				used[i] = false; // æ¢å¤çŠ¶æ€ï¼ˆå›æº¯ï¼‰
			}
		}
	};

	backtrack(1);
	return result;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 667 | ä¼˜ç¾çš„æ’åˆ— II |  |  [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/beautiful-arrangement-ii) [ğŸ”—](https://leetcode.com/problems/beautiful-arrangement-ii) |