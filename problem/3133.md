---
title: 3133. æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„æœ€å°å€¼
description: LeetCode 3133. æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„æœ€å°å€¼é¢˜è§£ï¼ŒMinimum Array Endï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 3133. æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„æœ€å°å€¼
  - æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„æœ€å°å€¼
  - Minimum Array End
  - è§£é¢˜æ€è·¯
  - ä½è¿ç®—
---

# 3133. æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„æœ€å°å€¼

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/minimum-array-end) [`LeetCode`](https://leetcode.com/problems/minimum-array-end)

## é¢˜ç›®

You are given two integers `n` and `x`. You have to construct an array of
**positive** integers `nums` of size `n` where for every `0 <= i < n - 1`,
`nums[i + 1]` is **greater than** `nums[i]`, and the result of the bitwise
`AND` operation between all elements of `nums` is `x`.

Return the **minimum** possible value of `nums[n - 1]`.

**Example 1:**

**Input:** n = 3, x = 4

**Output:** 6

**Explanation:**

`nums` can be `[4,5,6]` and its last element is 6.

**Example 2:**

**Input:** n = 2, x = 7

**Output:** 15

**Explanation:**

`nums` can be `[7,15]` and its last element is 15.

**Constraints:**

- `1 <= n, x <= 10^8`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸¤ä¸ªæ•´æ•° `n` å’Œ `x` ã€‚ä½ éœ€è¦æ„é€ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„ **æ­£æ•´æ•°** æ•°ç»„ `nums` ï¼Œå¯¹äºæ‰€æœ‰ `0 <= i < n - 1`
ï¼Œæ»¡è¶³ `nums[i + 1]`**å¤§äº**`nums[i]` ï¼Œå¹¶ä¸”æ•°ç»„ `nums` ä¸­æ‰€æœ‰å…ƒç´ çš„æŒ‰ä½ `AND` è¿ç®—ç»“æœä¸º `x` ã€‚

è¿”å› `nums[n - 1]` å¯èƒ½çš„**æœ€å°** å€¼ã€‚

**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** n = 3, x = 4

**è¾“å‡ºï¼š** 6

**è§£é‡Šï¼š**

æ•°ç»„ `nums` å¯ä»¥æ˜¯ `[4,5,6]` ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸º `6` ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** n = 2, x = 7

**è¾“å‡ºï¼š** 15

**è§£é‡Šï¼š**

æ•°ç»„ `nums` å¯ä»¥æ˜¯ `[7,15]` ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸º `15` ã€‚

**æç¤ºï¼š**

- `1 <= n, x <= 10^8`

## è§£é¢˜æ€è·¯

1. **BigInt å¤„ç†å¤§æ•°**ï¼š

   - ä¸ºäº†ç¡®ä¿ç®—æ³•èƒ½å¤„ç†æå¤§çš„è¾“å…¥ï¼ˆå¦‚ `n = 10^8`ï¼‰ï¼Œéœ€è¦å°† `n` å’Œ `x` è½¬æ¢ä¸º `BigInt` ç±»å‹ï¼Œä»¥é¿å…æº¢å‡ºã€‚

2. **å¾ªç¯éå†ä½æ©ç **ï¼š

   - ä½¿ç”¨ä¸€ä¸ªä½æ©ç  `mask` ä» `1n`ï¼ˆå³äºŒè¿›åˆ¶æœ€ä½ä½ï¼‰å¼€å§‹ï¼Œæ¯æ¬¡å·¦ç§»ä¸€ä½ï¼Œéå†æ‰€æœ‰ä½ã€‚
   - å¯¹äºæ¯ä¸€ä½ï¼Œæ£€æŸ¥ `x` çš„å½“å‰ä½æ˜¯å¦ä¸º `0`ã€‚å¦‚æœ `x` åœ¨è¯¥ä½ä¸º `0`ï¼Œåˆ™å¯ä»¥å°è¯•åœ¨ `number` ä¸­è®¾ç½®è¿™ä¸€ä½ï¼Œä»¥ç¡®ä¿æœ€åç”Ÿæˆçš„æ•°ä¸å½±å“æœ€ç»ˆ `AND` çš„ç»“æœã€‚

3. **æŒ‰æ¡ä»¶æ›´æ–° `number`**ï¼š

   - å¯¹äºæ¯ä¸€ä½ï¼š
     - æ£€æŸ¥ `x` çš„å½“å‰ä½ï¼Œå¦‚æœå®ƒä¸º `0`ï¼Œåˆ™è€ƒè™‘æ˜¯å¦å°†è¯¥ä½è®¾ä¸º `1`ï¼Œä½¿å¾—ç”Ÿæˆçš„æ•°å°½å¯èƒ½å¤§ã€‚
     - ä¸ºæ­¤ï¼Œä½¿ç”¨ `(n & 1n) * BigInt(mask)`ï¼Œè¿™åœ¨ `n` çš„æœ€ä½ä½ä¸º `1` æ—¶ä¼šå°† `number` çš„ç›¸åº”ä½è®¾ä¸º `1`ã€‚
     - ç„¶åå°† `n` å³ç§»ä¸€ä½ï¼Œä»¥æ£€æŸ¥ä¸‹ä¸€ä½ã€‚
   - è¿™æ ·åšçš„ç»“æœæ˜¯ï¼Œåªåœ¨ `n` æŒ‡å®šçš„æŸäº›ä½ç½®å°† `number` è®¾ä¸ºæ›´é«˜çš„å€¼ã€‚

4. **è½¬æ¢å¹¶è¿”å›ç»“æœ**ï¼š
   - å°†æœ€ç»ˆå¾—åˆ°çš„ `number` è½¬æ¢ä¸º `Number` ç±»å‹å¹¶è¿”å›ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(log n)`ï¼Œå› ä¸ºæ¯æ¬¡å¾ªç¯ä¸­ `n` å³ç§»ä¸€ä½ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä»…ä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} n
 * @param {number} x
 * @return {number}
 */
var minEnd = function (n, x) {
	var number = BigInt(x);
	n = BigInt(n) - 1n;
	for (var mask = 1n; n > 0n; mask <<= 1n) {
		if ((mask & BigInt(x)) == 0n) {
			number = number | ((n & 1n) * BigInt(mask));
			n >>= 1n;
		}
	}
	return Number(number);
};
```
