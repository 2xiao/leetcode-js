---
title: 22. æ‹¬å·ç”Ÿæˆ
description: LeetCode,22. æ‹¬å·ç”Ÿæˆ,æ‹¬å·ç”Ÿæˆ,Generate Parentheses,è§£é¢˜æ€è·¯,å­—ç¬¦ä¸²,åŠ¨æ€è§„åˆ’,å›æº¯
keywords:
  - LeetCode
  - 22. æ‹¬å·ç”Ÿæˆ
  - æ‹¬å·ç”Ÿæˆ
  - Generate Parentheses
  - è§£é¢˜æ€è·¯
  - å­—ç¬¦ä¸²
  - åŠ¨æ€è§„åˆ’
  - å›æº¯
---

# 22. æ‹¬å·ç”Ÿæˆ

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`å›æº¯`](/tag/backtracking.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/generate-parentheses) [`LeetCode`](https://leetcode.com/problems/generate-parentheses)

## é¢˜ç›®

Given `n` pairs of parentheses, write a function to _generate all combinations
of well-formed parentheses_.

**Example 1:**

> Input: n = 3
>
> Output: ["((()))","(()())","(())()","()(())","()()()"]

**Example 2:**

> Input: n = 1
>
> Output: ["()"]

**Constraints:**

- `1 <= n <= 8`

## é¢˜ç›®å¤§æ„

æ•°å­— `n` ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” **æœ‰æ•ˆçš„** æ‹¬å·ç»„åˆã€‚

## è§£é¢˜æ€è·¯

1. å®šä¹‰ä¸€ä¸ªç©ºæ•°ç»„ `res` ç”¨äºå­˜å‚¨æœ€ç»ˆç»“æœï¼Œä»¥åŠä¸€ä¸ªç©ºæ•°ç»„ `track` ç”¨äºå­˜å‚¨å½“å‰ç”Ÿæˆçš„æ‹¬å·ç»„åˆã€‚
2. ç¼–å†™å›æº¯å‡½æ•° `backtrack`ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•° `left` å’Œ `right`ï¼Œåˆ†åˆ«è¡¨ç¤ºå½“å‰å·²ä½¿ç”¨çš„å·¦æ‹¬å·å’Œå³æ‹¬å·çš„æ•°é‡ã€‚
3. åœ¨å›æº¯å‡½æ•°ä¸­ï¼Œé€šè¿‡åˆ¤æ–­æ¡ä»¶è¿›è¡Œå‰ªæï¼š
   - å¦‚æœ `left` å°äº `right`ï¼Œè¯´æ˜ç”Ÿæˆçš„æ‹¬å·ç»„åˆæ˜¯æ— æ•ˆçš„ï¼Œç›´æ¥è¿”å›ã€‚
   - å¦‚æœ `left` æˆ– `right` çš„æ•°é‡è¶…è¿‡ `n`ï¼Œè¯´æ˜å·²ç»è¶…å‡ºæœ‰æ•ˆèŒƒå›´ï¼Œç›´æ¥è¿”å›ã€‚
4. å¦‚æœ `left` å’Œ `right` éƒ½ç­‰äº `n`ï¼Œåˆ™è¯´æ˜å·²ç»ç”Ÿæˆäº†æœ‰æ•ˆçš„æ‹¬å·ç»„åˆï¼Œå°†å½“å‰ `track` ä¸­çš„æ‹¬å·ç»„åˆè½¬ä¸ºå­—ç¬¦ä¸²å¹¶åŠ å…¥ `res` æ•°ç»„ã€‚
5. åœ¨å›æº¯å‡½æ•°ä¸­ï¼Œåˆ†åˆ«å°è¯•æ·»åŠ å·¦æ‹¬å·å’Œå³æ‹¬å·ï¼Œå¹¶é€’å½’è°ƒç”¨ä¸‹ä¸€å±‚ã€‚ä¹‹åéœ€è¦æ’¤é”€å½“å‰çš„é€‰æ‹©ï¼Œç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªé€‰æ‹©ã€‚
6. è°ƒç”¨å›æº¯å‡½æ•° `backtrack` çš„åˆå§‹çŠ¶æ€æ˜¯ `(0, 0)`ï¼Œè¡¨ç¤ºå·¦å³æ‹¬å·çš„æ•°é‡éƒ½ä¸º 0ã€‚
7. æœ€ç»ˆè¿”å›ç»“æœæ•°ç»„ `res`ã€‚

#### ç©ºé—´å¤æ‚åº¦

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(4^n / âˆšn)`ï¼Œç”Ÿæˆåˆæ³•æ‹¬å·ç»„åˆçš„æ—¶é—´å¤æ‚åº¦ç”±å¡ç‰¹å…°æ•°å†³å®šï¼Œå¯¹äº `n` å¯¹æ‹¬å·ï¼Œå…¶æ•°é‡ä¸º `C(2n, n)/(n + 1)`ï¼Œå³ `O(4^n / âˆšn)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`(ä¸åŒ…æ‹¬ç»“æœæ•°ç»„çš„å­˜å‚¨ç©ºé—´)ã€‚
  - é€’å½’æ ˆçš„ç©ºé—´å¤æ‚åº¦ `O(n)`ï¼Œå›æº¯çš„æœ€å¤§é€’å½’æ·±åº¦ä¸º `2n`ï¼Œå› ä¸ºæ¯æ¬¡é€’å½’éƒ½ä¼šå¤„ç†ä¸€ä¸ªæ‹¬å·ï¼Œç›´åˆ°æ‰€æœ‰ `2n` ä¸ªæ‹¬å·è¢«å¤„ç†å®Œï¼›
  - ä½¿ç”¨äº†ä¸€ä¸ª `track` æ•°ç»„æ¥å­˜å‚¨å½“å‰è·¯å¾„ï¼Œå®ƒçš„ç©ºé—´å¤æ‚åº¦æ˜¯ `O(n)`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} n
 * @return {string[]}
 */
var generateParenthesis = function (n) {
	let res = [];
	let track = [];

	const backtrack = (left, right) => {
		if (left < right || left > n || right > n) return;
		if (left == n && right == n) {
			res.push(track.join(''));
			return;
		}
		track.push('(');
		backtrack(left + 1, right);
		track.pop();

		track.push(')');
		backtrack(left, right + 1);
		track.pop();
	};

	backtrack(0, 0);
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------ | :------: |
| 17 | ç”µè¯å·ç çš„å­—æ¯ç»„åˆ | [[âœ“]](/problem/0017.md) |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/letter-combinations-of-a-phone-number) [ğŸ”—](https://leetcode.com/problems/letter-combinations-of-a-phone-number) |
| 20 | æœ‰æ•ˆçš„æ‹¬å· | [[âœ“]](/problem/0020.md) |  [`æ ˆ`](/tag/stack.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/valid-parentheses) [ğŸ”—](https://leetcode.com/problems/valid-parentheses) |
| 2116 | åˆ¤æ–­ä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆ |  |  [`æ ˆ`](/tag/stack.md) [`è´ªå¿ƒ`](/tag/greedy.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/check-if-a-parentheses-string-can-be-valid) [ğŸ”—](https://leetcode.com/problems/check-if-a-parentheses-string-can-be-valid) |