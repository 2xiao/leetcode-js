---
title: 2594. ä¿®è½¦çš„æœ€å°‘æ—¶é—´
description: LeetCode 2594. ä¿®è½¦çš„æœ€å°‘æ—¶é—´é¢˜è§£ï¼ŒMinimum Time to Repair Carsï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2594. ä¿®è½¦çš„æœ€å°‘æ—¶é—´
  - ä¿®è½¦çš„æœ€å°‘æ—¶é—´
  - Minimum Time to Repair Cars
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - äºŒåˆ†æŸ¥æ‰¾
---

# 2594. ä¿®è½¦çš„æœ€å°‘æ—¶é—´

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/minimum-time-to-repair-cars) [`LeetCode`](https://leetcode.com/problems/minimum-time-to-repair-cars)

## é¢˜ç›®

You are given an integer array `ranks` representing the **ranks** of some
mechanics. ranksi is the rank of the ith mechanic. A mechanic with a rank `r`
can repair n cars in `r * n2` minutes.

You are also given an integer `cars` representing the total number of cars
waiting in the garage to be repaired.

Return _the **minimum** time taken to repair all the cars._

**Note:** All the mechanics can repair the cars simultaneously.

**Example 1:**

> Input: ranks = [4,2,3,1], cars = 10
>
> Output: 16
>
> Explanation:
>
> - The first mechanic will repair two cars. The time required is `4 * 2 * 2 = 16` minutes.
> - The second mechanic will repair two cars. The time required is `2 * 2 * 2 = 8` minutes.
> - The third mechanic will repair two cars. The time required is `3 * 2 * 2 = 12` minutes.
> - The fourth mechanic will repair four cars. The time required is `1 * 4 * 4 = 16` minutes.
>
> It can be proved that the cars cannot be repaired in less than 16 minutes.â€‹â€‹â€‹â€‹â€‹

**Example 2:**

> Input: ranks = [5,1,8], cars = 6
>
> Output: 16
>
> Explanation:
>
> - The first mechanic will repair one car. The time required is `5 * 1 * 1 = 5` minutes.
> - The second mechanic will repair four cars. The time required is `1 * 4 * 4 = 16` minutes.
> - The third mechanic will repair one car. The time required is `8 * 1 * 1 = 8` minutes.
>
> It can be proved that the cars cannot be repaired in less than 16 minutes.â€‹â€‹â€‹â€‹â€‹

**Constraints:**

- `1 <= ranks.length <= 10^5`
- `1 <= ranks[i] <= 100`
- `1 <= cars <= 10^6`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `ranks` ï¼Œè¡¨ç¤ºä¸€äº›æœºæ¢°å·¥çš„ **èƒ½åŠ›å€¼** ã€‚`ranksi` æ˜¯ç¬¬ `i` ä½æœºæ¢°å·¥çš„èƒ½åŠ›å€¼ã€‚èƒ½åŠ›å€¼ä¸º `r` çš„æœºæ¢°å·¥å¯ä»¥åœ¨
`r * n2` åˆ†é’Ÿå†…ä¿®å¥½ `n` è¾†è½¦ã€‚

åŒæ—¶ç»™ä½ ä¸€ä¸ªæ•´æ•° `cars` ï¼Œè¡¨ç¤ºæ€»å…±éœ€è¦ä¿®ç†çš„æ±½è½¦æ•°ç›®ã€‚

è¯·ä½ è¿”å›ä¿®ç†æ‰€æœ‰æ±½è½¦ **æœ€å°‘** éœ€è¦å¤šå°‘æ—¶é—´ã€‚

**æ³¨æ„ï¼š** æ‰€æœ‰æœºæ¢°å·¥å¯ä»¥åŒæ—¶ä¿®ç†æ±½è½¦ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** ranks = [4,2,3,1], cars = 10
>
> **è¾“å‡ºï¼š** 16
>
> **è§£é‡Šï¼š**
>
> - ç¬¬ä¸€ä½æœºæ¢°å·¥ä¿® 2 è¾†è½¦ï¼Œéœ€è¦ `4 * 2 * 2 = 16` åˆ†é’Ÿã€‚
> - ç¬¬äºŒä½æœºæ¢°å·¥ä¿® 2 è¾†è½¦ï¼Œéœ€è¦ `2 * 2 * 2 = 8` åˆ†é’Ÿã€‚
> - ç¬¬ä¸‰ä½æœºæ¢°å·¥ä¿® 2 è¾†è½¦ï¼Œéœ€è¦ `3 * 2 * 2 = 12` åˆ†é’Ÿã€‚
> - ç¬¬å››ä½æœºæ¢°å·¥ä¿® 4 è¾†è½¦ï¼Œéœ€è¦ `1 * 4 * 4 = 16` åˆ†é’Ÿã€‚
>
> 16 åˆ†é’Ÿæ˜¯ä¿®ç†å®Œæ‰€æœ‰è½¦éœ€è¦çš„æœ€å°‘æ—¶é—´ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** ranks = [5,1,8], cars = 6
>
> **è¾“å‡ºï¼š** 16
>
> **è§£é‡Šï¼š**
>
> - ç¬¬ä¸€ä½æœºæ¢°å·¥ä¿® 1 è¾†è½¦ï¼Œéœ€è¦ `5 * 1 * 1 = 5` åˆ†é’Ÿã€‚
> - ç¬¬äºŒä½æœºæ¢°å·¥ä¿® 4 è¾†è½¦ï¼Œéœ€è¦ `1 * 4 * 4 = 16` åˆ†é’Ÿã€‚
> - ç¬¬ä¸‰ä½æœºæ¢°å·¥ä¿® 1 è¾†è½¦ï¼Œéœ€è¦ `8 * 1 * 1 = 8` åˆ†é’Ÿã€‚
>
> 16 åˆ†é’Ÿæ—¶ä¿®ç†å®Œæ‰€æœ‰è½¦éœ€è¦çš„æœ€å°‘æ—¶é—´ã€‚

**æç¤ºï¼š**

- `1 <= ranks.length <= 10^5`
- `1 <= ranks[i] <= 100`
- `1 <= cars <= 10^6`

## è§£é¢˜æ€è·¯

1. **ç¡®å®šæœç´¢èŒƒå›´**ï¼š

   - æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¿® `cars` è¾†è½¦æ‰€éœ€çš„æœ€çŸ­æ—¶é—´ `time`ã€‚
   - **æœ€å°æ—¶é—´ `left = 1`**ï¼Œå³ç†è®ºä¸Šæœ€å¿«çš„æƒ…å†µä¸‹ä¸€è¾†è½¦ä¿®ç†åªéœ€è¦ 1 åˆ†é’Ÿã€‚
   - **æœ€å¤§æ—¶é—´ `right = min(ranks) * carsÂ²`**ï¼Œå³å‡è®¾åªæœ‰æœ€å¿«çš„å·¥äººæ¥ä¿®æ‰€æœ‰çš„è½¦ã€‚

2. **äºŒåˆ†æŸ¥æ‰¾ `mid = (left + right) / 2`**ï¼Œè¡¨ç¤ºå°è¯•ä»¥ `mid` ä½œä¸ºä¿® `cars` è¾†è½¦çš„æœ€çŸ­å¯è¡Œæ—¶é—´ï¼š

   - **æ£€æŸ¥æ˜¯å¦èƒ½åœ¨ `mid` æ—¶é—´å†…ä¿®å®Œ `cars` è¾†è½¦**ï¼š
     - éå†æ‰€æœ‰ `ranks`ï¼Œè®¡ç®—æ¯ä¸ªå·¥äººåœ¨ `mid` æ—¶é—´å†…æœ€å¤šèƒ½ä¿®çš„è½¦è¾†æ•° `x = floor(sqrt(mid / rank))`ã€‚
     - ç´¯åŠ æ‰€æœ‰å·¥äººçš„ä¿®è½¦æ•°é‡ `count`ï¼Œå¦‚æœ `count â‰¥ cars`ï¼Œè¯´æ˜ `mid` å¯è¡Œã€‚
   - è‹¥ `mid` å¯è¡Œï¼Œå°è¯•æ›´å°çš„ `mid`ï¼Œè°ƒæ•´ `right = mid - 1`ã€‚
   - è‹¥ `mid` ä¸å¯è¡Œï¼Œå°è¯•æ›´å¤§çš„ `mid`ï¼Œè°ƒæ•´ `left = mid + 1`ã€‚

3. **æœ€ç»ˆè¿”å›æœ€å°å¯è¡Œçš„ `mid`**ã€‚

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n log T)`

  - äºŒåˆ†æŸ¥æ‰¾ `O(log T)`ï¼Œå…¶ä¸­ `T = min(ranks) * carsÂ²`ã€‚
  - æ¯æ¬¡ `canFixed(time)` éå† `ranks` è®¡ç®—æœ€å¤šèƒ½ä¿®çš„è½¦æ•°ï¼Œæ—¶é—´å¤æ‚åº¦ `O(n)`ã€‚
  - æ€»ä½“å¤æ‚åº¦ `O(n log T)`ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä»…ä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} ranks
 * @param {number} cars
 * @return {number}
 */
var repairCars = function (ranks, cars) {
	let freqs = new Map();

	for (let rank of ranks) {
		freqs.set(rank, (freqs.get(rank) || 0) + 1);
	}

	const canFixed = (time) => {
		let count = 0;
		for (let [rank, freq] of freqs) {
			count += freq * Math.floor(Math.sqrt(time / rank));
			if (count >= cars) return true;
		}
		return false;
	};

	let left = 1,
		right = Math.min(...ranks) * cars * cars;
	let res;
	while (left <= right) {
		const mid = Math.floor((left + right) / 2);
		if (canFixed(mid)) {
			res = mid;
			right = mid - 1;
		} else {
			left = mid + 1;
		}
	}
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 360 | æœ‰åºè½¬åŒ–æ•°ç»„ ğŸ”’ |  |  [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/sort-transformed-array) [ğŸ”—](https://leetcode.com/problems/sort-transformed-array) |
| 875 | çˆ±åƒé¦™è•‰çš„ç‚ç‚ | [[âœ“]](/problem/0875.md) |  [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/koko-eating-bananas) [ğŸ”—](https://leetcode.com/problems/koko-eating-bananas) |