# [2627. å‡½æ•°é˜²æŠ–](https://leetcode.com/problems/debounce)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/debounce)

## é¢˜ç›®

<p>è¯·ä½ ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶å‚æ•°ä¸ºå¦ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªä»¥æ¯«ç§’ä¸ºå•ä½çš„æ—¶é—´ <code>t</code> ï¼Œå¹¶è¿”å›è¯¥å‡½æ•°çš„&nbsp;<b>å‡½æ•°é˜²æŠ–&nbsp;</b>åçš„ç»“æœã€‚</p>

<p><b>å‡½æ•°é˜²æŠ– </b>æ–¹æ³•æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„æ‰§è¡Œè¢«å»¶è¿Ÿäº† <code>t</code> æ¯«ç§’ï¼Œå¦‚æœåœ¨è¿™ä¸ªæ—¶é—´çª—å£å†…å†æ¬¡è°ƒç”¨å®ƒï¼Œå®ƒçš„æ‰§è¡Œå°†è¢«å–æ¶ˆã€‚ä½ ç¼–å†™çš„é˜²æŠ–å‡½æ•°ä¹Ÿåº”è¯¥æ¥æ”¶ä¼ é€’çš„å‚æ•°ã€‚</p>

<p>ä¾‹å¦‚ï¼Œå‡è®¾ <code>t = 50ms</code> ï¼Œå‡½æ•°åˆ†åˆ«åœ¨ <code>30ms</code> ã€ <code>60ms</code> å’Œ <code>100ms</code> æ—¶è°ƒç”¨ã€‚å‰ä¸¤ä¸ªå‡½æ•°è°ƒç”¨å°†è¢«å–æ¶ˆï¼Œç¬¬ä¸‰ä¸ªå‡½æ•°è°ƒç”¨å°†åœ¨ <code>150ms</code> æ‰§è¡Œã€‚å¦‚æœæ”¹ä¸º <code>t = 35ms</code> ï¼Œåˆ™ç¬¬ä¸€ä¸ªè°ƒç”¨å°†è¢«å–æ¶ˆï¼Œç¬¬äºŒä¸ªè°ƒç”¨å°†åœ¨ <code>95ms</code> æ‰§è¡Œï¼Œç¬¬ä¸‰ä¸ªè°ƒç”¨å°†åœ¨ <code>135ms</code> æ‰§è¡Œã€‚</p>

<p><img alt="Debounce Schematic" src="https://assets.leetcode.com/uploads/2023/04/08/screen-shot-2023-04-08-at-11048-pm.png" style="width: 800px; height: 242px;" /></p>

<p>ä¸Šå›¾å±•ç¤ºäº†äº†é˜²æŠ–å‡½æ•°æ˜¯å¦‚ä½•è½¬æ¢äº‹ä»¶çš„ã€‚å…¶ä¸­ï¼Œæ¯ä¸ªçŸ©å½¢è¡¨ç¤º 100msï¼Œåå¼¹æ—¶é—´ä¸º 400msã€‚æ¯ç§é¢œè‰²ä»£è¡¨ä¸€ç»„ä¸åŒçš„è¾“å…¥ã€‚</p>

<p>è¯·åœ¨ä¸ä½¿ç”¨ lodash çš„ <code>_.debounce()</code> å‡½æ•°çš„å‰æä¸‹è§£å†³è¯¥é—®é¢˜ã€‚</p>

<p>&nbsp;</p>

<p><strong class="example">ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<b>è¾“å…¥ï¼š</b>
t = 50
calls = [
&nbsp; {"t": 50, inputs: [1]},
&nbsp; {"t": 75, inputs: [2]}
]
<b>è¾“å‡ºï¼š</b>[{"t": 125, inputs: [2]}]
<strong>è§£é‡Šï¼š</strong>
let start = Date.now();
function log(...inputs) { 
&nbsp; console.log([Date.now() - start, inputs ])
}
const dlog = debounce(log, 50);
setTimeout(() =&gt; dlog(1), 50);
setTimeout(() =&gt; dlog(2), 75);

ç¬¬ä¸€æ¬¡è°ƒç”¨è¢«ç¬¬äºŒæ¬¡è°ƒç”¨å–æ¶ˆï¼Œå› ä¸ºç¬¬äºŒæ¬¡è°ƒç”¨å‘ç”Ÿåœ¨ 100ms ä¹‹å‰
ç¬¬äºŒæ¬¡è°ƒç”¨å»¶è¿Ÿ 50msï¼Œåœ¨ 125ms æ‰§è¡Œã€‚è¾“å…¥ä¸º (2)ã€‚
</pre>

<p><strong class="example">ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<b>è¾“å…¥ï¼š</b>
t = 20
calls = [
&nbsp; {"t": 50, inputs: [1]},
&nbsp; {"t": 100, inputs: [2]}
]
<b>è¾“å‡ºï¼š</b>[{"t": 70, inputs: [1]}, {"t": 120, inputs: [2]}]
<strong>è§£é‡Šï¼š</strong>
ç¬¬ä¸€æ¬¡è°ƒç”¨å»¶è¿Ÿåˆ° 70msã€‚è¾“å…¥ä¸º (1)ã€‚
ç¬¬äºŒæ¬¡è°ƒç”¨å»¶è¿Ÿåˆ° 120msã€‚è¾“å…¥ä¸º (2)ã€‚
</pre>

<p><strong class="example">ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<b>è¾“å…¥ï¼š</b>
t = 150
calls = [
&nbsp; {"t": 50, inputs: [1, 2]},
&nbsp; {"t": 300, inputs: [3, 4]},
&nbsp; {"t": 300, inputs: [5, 6]}
]
<b>è¾“å‡ºï¼š</b>[{"t": 200, inputs: [1,2]}, {"t": 450, inputs: [5, 6]}]
<strong>è§£é‡Šï¼š</strong>
ç¬¬ä¸€æ¬¡è°ƒç”¨å»¶è¿Ÿäº† 150msï¼Œè¿è¡Œæ—¶é—´ä¸º 200msã€‚è¾“å…¥ä¸º (1, 2)ã€‚
ç¬¬äºŒæ¬¡è°ƒç”¨è¢«ç¬¬ä¸‰æ¬¡è°ƒç”¨å–æ¶ˆ
ç¬¬ä¸‰æ¬¡è°ƒç”¨å»¶è¿Ÿäº† 150msï¼Œè¿è¡Œæ—¶é—´ä¸º 450msã€‚è¾“å…¥ä¸º (5, 6)ã€‚
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>0 &lt;= t &lt;= 1000</code></li>
	<li><code>1 &lt;= calls.length &lt;= 10</code></li>
	<li><code>0 &lt;= calls[i].t &lt;= 1000</code></li>
	<li><code>0 &lt;= calls[i].inputs.length &lt;= 10</code></li>
</ul>


## è§£é¢˜æ€è·¯

**é˜²æŠ–** çš„ä½œç”¨æ˜¯å°†çŸ­æ—¶é—´å†…è§¦å‘çš„å¤šæ¬¡è°ƒç”¨ï¼Œå»¶è¿Ÿåˆ°æŒ‡å®šæ—¶é—´åæ‰§è¡Œã€‚å¦‚æœåœ¨ç­‰å¾…æ—¶é—´å†…å‡½æ•°è¢«å†æ¬¡è°ƒç”¨ï¼Œåˆ™é‡æ–°è®¡æ—¶ï¼Œåªæœ‰åœ¨æ²¡æœ‰æ–°è°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œç­‰åˆ°è®¡æ—¶å™¨åˆ°è¾¾ `t` æ¯«ç§’åï¼Œæ‰ä¼šçœŸæ­£æ‰§è¡Œ `fn`ã€‚è¿™åœ¨å¤„ç†é«˜é¢‘è§¦å‘äº‹ä»¶ï¼ˆå¦‚çª—å£è°ƒæ•´å¤§å°ã€ç”¨æˆ·è¾“å…¥ç­‰ï¼‰æ—¶éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥é¿å…å¤§é‡ä¸å¿…è¦çš„æ“ä½œã€‚

1. å®šä¹‰ä¸€ä¸ªå˜é‡ `timer` æ¥å­˜å‚¨å½“å‰çš„è®¡æ—¶å™¨ IDã€‚
2. è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œæ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨å¹¶é‡æ–°å¯åŠ¨ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ã€‚
3. å¦‚æœè®¡æ—¶å™¨è§¦å‘ï¼Œåˆ™è°ƒç”¨åŸå§‹å‡½æ•° `fn`ï¼Œå¹¶ä¼ å…¥å…¶å‚æ•°ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œå› ä¸ºæ¸…é™¤å’Œè®¾ç½®å®šæ—¶å™¨éƒ½æ˜¯å¸¸æ•°æ—¶é—´æ“ä½œã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªéœ€è¦ä¸€ä¸ªå˜é‡ `timer` æ¥å­˜å‚¨è®¡æ—¶å™¨ IDã€‚

## ä»£ç 

```javascript
/**
 * @param {Function} fn
 * @param {number} t milliseconds
 * @return {Function}
 */
var debounce = function (fn, t) {
	let timer;
	return function (...args) {
		// æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œæ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
		clearTimeout(timer);

		// å¯åŠ¨æ–°çš„å®šæ—¶å™¨
		timer = setTimeout(() => fn(...args), t);
	};
};

/**
 * const log = debounce(console.log, 100);
 * log('Hello'); // cancelled
 * log('Hello'); // cancelled
 * log('Hello'); // Logged at t=100ms
 */
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2622 | [æœ‰æ—¶é—´é™åˆ¶çš„ç¼“å­˜](https://leetcode.com/problems/cache-with-time-limit) | [[âœ“]](/problem/2622.md) |  | <font color=#ffb800>Medium</font> |
| 2637 | [æœ‰æ—¶é—´é™åˆ¶çš„ Promise å¯¹è±¡](https://leetcode.com/problems/promise-time-limit) | [[âœ“]](/problem/2637.md) |  | <font color=#ffb800>Medium</font> |
| 2676 | [èŠ‚æµ](https://leetcode.com/problems/throttle) | [[âœ“]](/problem/2676.md) |  | <font color=#ffb800>Medium</font> |