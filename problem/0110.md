---
title: 110. å¹³è¡¡äºŒå‰æ ‘
description: LeetCode 110. å¹³è¡¡äºŒå‰æ ‘é¢˜è§£ï¼ŒBalanced Binary Treeï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 110. å¹³è¡¡äºŒå‰æ ‘
  - å¹³è¡¡äºŒå‰æ ‘
  - Balanced Binary Tree
  - è§£é¢˜æ€è·¯
  - æ ‘
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - äºŒå‰æ ‘
---

# 110. å¹³è¡¡äºŒå‰æ ‘

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/balanced-binary-tree) [`LeetCode`](https://leetcode.com/problems/balanced-binary-tree)

## é¢˜ç›®

Given a binary tree, determine if it is **height-balanced**.

**Example 1:**

![](https://assets.leetcode.com/uploads/2020/10/06/balance_1.jpg)

> Input: root = [3,9,20,null,null,15,7]
>
> Output: true

**Example 2:**

![](https://assets.leetcode.com/uploads/2020/10/06/balance_2.jpg)

> Input: root = [1,2,2,3,3,null,null,4,4]
>
> Output: false

**Example 3:**

> Input: root = []
>
> Output: true

**Constraints:**

- The number of nodes in the tree is in the range `[0, 5000]`.
- `-10^4 <= Node.val <= 10^4`

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦æ˜¯é«˜åº¦å¹³è¡¡çš„äºŒå‰æ ‘ã€‚

æœ¬é¢˜ä¸­ï¼Œä¸€æ£µé«˜åº¦å¹³è¡¡äºŒå‰æ ‘å®šä¹‰ä¸ºï¼šä¸€ä¸ªäºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹ çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1 ã€‚

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šè‡ªä¸Šå‘ä¸‹é€’å½’

é€šè¿‡é€’å½’çš„æ–¹å¼ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œåˆ¤æ–­ï¼Œç¡®ä¿å®ƒçš„å·¦å³å­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡ 1ï¼Œå¹¶é€å±‚å‘ä¸‹åˆ¤æ–­:

1. å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œè®¡ç®—å…¶å·¦å­æ ‘å’Œå³å­æ ‘çš„é«˜åº¦å·®ã€‚
2. å¦‚æœæŸä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®è¶…è¿‡ 1ï¼Œåˆ™è¯´æ˜ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ä¸æ˜¯å¹³è¡¡çš„ï¼Œç›´æ¥è¿”å› `false`ã€‚
3. å¦‚æœè¯¥èŠ‚ç‚¹æ˜¯å¹³è¡¡çš„ï¼Œç»§ç»­é€’å½’æ£€æŸ¥å…¶å·¦å­æ ‘å’Œå³å­æ ‘æ˜¯å¦å¹³è¡¡ã€‚
4. é€’å½’çš„ç»ˆæ­¢æ¡ä»¶æ˜¯éå†åˆ°å¶å­èŠ‚ç‚¹ï¼Œå¶å­èŠ‚ç‚¹æ˜¯å¹³è¡¡çš„ã€‚
5. å¦‚æœæ•´æ£µæ ‘çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ»¡è¶³å¹³è¡¡æ¡ä»¶ï¼Œè¿”å› `true`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n^2)`ï¼Œ
  - **`getHeight` å‡½æ•°**ï¼šæ¯æ¬¡è°ƒç”¨ `getHeight` ä¼šéå†æ ‘çš„èŠ‚ç‚¹ä»¥è®¡ç®—é«˜åº¦ã€‚åœ¨ `isBalanced` å‡½æ•°ä¸­ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹éƒ½è°ƒç”¨äº†ä¸€æ¬¡ `getHeight`ã€‚å› æ­¤ï¼Œå¯¹äºä¸€æ£µåŒ…å« `n` ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œ`getHeight` çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n)`ã€‚
  - **`isBalanced` å‡½æ•°**ï¼šåœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ `getHeight`ï¼Œå› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n^2)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œç”±äºé€’å½’çš„æ·±åº¦ç­‰äºæ ‘çš„é«˜åº¦ï¼Œåœ¨æœ€åæƒ…å†µä¸‹ï¼ˆä¾‹å¦‚å®Œå…¨ä¸å¹³è¡¡çš„æ ‘ï¼‰ï¼Œæ ‘çš„é«˜åº¦å¯èƒ½æ˜¯ `n`ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º `O(n)`ã€‚åœ¨å¹³è¡¡æ ‘çš„æƒ…å†µä¸‹ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ `O(log n)`ã€‚

---

### æ€è·¯äºŒï¼šè‡ªåº•å‘ä¸Šé€’å½’

ä¸ºäº†ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ï¼Œå¯ä»¥ä½¿ç”¨è‡ªåº•å‘ä¸Šçš„æ–¹æ³•ï¼Œåœ¨è®¡ç®—æ ‘çš„é«˜åº¦æ—¶åŒæ—¶æ£€æŸ¥æ ‘çš„å¹³è¡¡æ€§ï¼Œè¿™æ ·å¯ä»¥å°†æ—¶é—´å¤æ‚åº¦é™ä½åˆ° `O(n)`ã€‚

1. **å•æ¬¡éå†**ï¼š`checkBalance` å‡½æ•°åœ¨æ£€æŸ¥æ¯ä¸ªèŠ‚ç‚¹çš„é«˜åº¦æ—¶ï¼Œç›´æ¥åˆ¤æ–­å…¶æ˜¯å¦å¹³è¡¡ï¼Œé¿å…äº†é‡å¤éå†ã€‚
2. **è¿”å›å€¼**ï¼šå¦‚æœå‘ç°ä¸å¹³è¡¡ï¼Œè¿”å› `-1`ï¼Œå¦åˆ™è¿”å›æ ‘çš„é«˜åº¦ã€‚è¿™ç§æ–¹å¼ä½¿å¾—å¯ä»¥åœ¨å‘ç°ä¸å¹³è¡¡æ—¶ç«‹å³åœæ­¢åç»­çš„æ£€æŸ¥ã€‚

### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š `O(n)`ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªéå†ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š `O(h)`ï¼Œå…¶ä¸­ `h` æ˜¯æ ‘çš„é«˜åº¦ï¼ˆé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ï¼‰ï¼Œåœ¨æœ€åæƒ…å†µä¸‹ä¸º `O(n)`ï¼Œåœ¨å¹³è¡¡æ ‘æƒ…å†µä¸‹ä¸º `O(log n)`ã€‚

## ä»£ç 

::: code-tabs

@tab è‡ªä¸Šå‘ä¸‹é€’å½’

```javascript
/**
 * @param {TreeNode} root
 * @return {boolean}
 */
var isBalanced = function (root) {
	if (!root) {
		return true; // ç©ºæ ‘æ˜¯å¹³è¡¡çš„
	}

	// è®¡ç®—å·¦å³å­æ ‘çš„é«˜åº¦å·®
	const diff = Math.abs(getHeight(node.left) - getHeight(node.right));

	// æ£€æŸ¥å½“å‰èŠ‚ç‚¹æ˜¯å¦å¹³è¡¡ï¼Œä»¥åŠå…¶å·¦å³å­æ ‘æ˜¯å¦å¹³è¡¡
	return diff <= 1 && isBalanced(node.left) && isBalanced(node.right);
};

// è®¡ç®—æ ‘çš„é«˜åº¦
var getHeight = function (node) {
	if (!node) {
		return 0;
	}
	return 1 + Math.max(getHeight(node.left), getHeight(node.right));
};
```

@tab è‡ªåº•å‘ä¸Šé€’å½’

```javascript
/**
 * @param {TreeNode} root
 * @return {boolean}
 */
var isBalanced = function (root) {
	return checkBalance(root) !== -1;
};

// æ£€æŸ¥å¹³è¡¡æ€§å’Œè®¡ç®—é«˜åº¦
var checkBalance = function (node) {
	if (!node) {
		return 0; // ç©ºæ ‘é«˜åº¦ä¸º0
	}

	const leftHeight = checkBalance(node.left);
	if (leftHeight === -1) return -1; // å·¦å­æ ‘ä¸å¹³è¡¡

	const rightHeight = checkBalance(node.right);
	if (rightHeight === -1) return -1; // å³å­æ ‘ä¸å¹³è¡¡

	// æ£€æŸ¥å½“å‰èŠ‚ç‚¹çš„å¹³è¡¡æ€§
	if (Math.abs(leftHeight - rightHeight) > 1) {
		return -1; // ä¸å¹³è¡¡
	}

	// è¿”å›å½“å‰æ ‘çš„é«˜åº¦
	return Math.max(leftHeight, rightHeight) + 1;
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 104 | äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ | [[âœ“]](/problem/0104.md) |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) `1+` | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-depth-of-binary-tree) [ğŸ”—](https://leetcode.com/problems/maximum-depth-of-binary-tree) |
| 3319 | ç¬¬ K å¤§çš„å®Œç¾äºŒå‰å­æ ‘çš„å¤§å° | [[âœ“]](/problem/3319.md) |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/k-th-largest-perfect-subtree-size-in-binary-tree) [ğŸ”—](https://leetcode.com/problems/k-th-largest-perfect-subtree-size-in-binary-tree) |