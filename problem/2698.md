---
title: 2698. æ±‚ä¸€ä¸ªæ•´æ•°çš„æƒ©ç½šæ•°
description: LeetCode 2698. æ±‚ä¸€ä¸ªæ•´æ•°çš„æƒ©ç½šæ•°é¢˜è§£ï¼ŒFind the Punishment Number of an Integerï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2698. æ±‚ä¸€ä¸ªæ•´æ•°çš„æƒ©ç½šæ•°
  - æ±‚ä¸€ä¸ªæ•´æ•°çš„æƒ©ç½šæ•°
  - Find the Punishment Number of an Integer
  - è§£é¢˜æ€è·¯
  - æ•°å­¦
  - å›æº¯
---

# 2698. æ±‚ä¸€ä¸ªæ•´æ•°çš„æƒ©ç½šæ•°

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°å­¦`](/tag/math.md) [`å›æº¯`](/tag/backtracking.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/find-the-punishment-number-of-an-integer) [`LeetCode`](https://leetcode.com/problems/find-the-punishment-number-of-an-integer)

## é¢˜ç›®

Given a positive integer `n`, return _the**punishment number**_ of `n`.

The **punishment number** of `n` is defined as the sum of the squares of all
integers `i` such that:

- `1 <= i <= n`
- The decimal representation of `i * i` can be partitioned into contiguous substrings such that the sum of the integer values of these substrings equals `i`.

**Example 1:**

> Input: n = 10
>
> Output: 182
>
> Explanation: There are exactly 3 integers i that satisfy the conditions in the statement:
>
> - 1 since 1 \* 1 = 1
> - 9 since 9 \* 9 = 81 and 81 can be partitioned into 8 + 1.
> - 10 since 10 \* 10 = 100 and 100 can be partitioned into 10 + 0.
>
> Hence, the punishment number of 10 is 1 + 81 + 100 = 182

**Example 2:**

> Input: n = 37
>
> Output: 1478
>
> Explanation: There are exactly 4 integers i that satisfy the conditions in the statement:
>
> - 1 since 1 \* 1 = 1.
> - 9 since 9 \* 9 = 81 and 81 can be partitioned into 8 + 1.
> - 10 since 10 \* 10 = 100 and 100 can be partitioned into 10 + 0.
> - 36 since 36 \* 36 = 1296 and 1296 can be partitioned into 1 + 29 + 6.
>
> Hence, the punishment number of 37 is 1 + 81 + 100 + 1296 = 1478

**Constraints:**

- `1 <= n <= 1000`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° `n` ï¼Œè¯·ä½ è¿”å› `n` çš„ **æƒ©ç½šæ•°** ã€‚

`n` çš„ **æƒ©ç½šæ•°** å®šä¹‰ä¸ºæ‰€æœ‰æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ `i` çš„æ•°çš„å¹³æ–¹å’Œï¼š

- `1 <= i <= n`
- `i * i` çš„åè¿›åˆ¶è¡¨ç¤ºçš„å­—ç¬¦ä¸²å¯ä»¥åˆ†å‰²æˆè‹¥å¹²è¿ç»­å­å­—ç¬¦ä¸²ï¼Œä¸”è¿™äº›å­å­—ç¬¦ä¸²å¯¹åº”çš„æ•´æ•°å€¼ä¹‹å’Œç­‰äº `i` ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** n = 10
>
> **è¾“å‡ºï¼š** 182
>
> **è§£é‡Šï¼š** æ€»å…±æœ‰ 3 ä¸ªæ•´æ•° i æ»¡è¶³è¦æ±‚ï¼š
>
> - 1 ï¼Œå› ä¸º 1 \* 1 = 1
> - 9 ï¼Œå› ä¸º 9 \* 9 = 81 ï¼Œä¸” 81 å¯ä»¥åˆ†å‰²æˆ 8 + 1 ã€‚
> - 10 ï¼Œå› ä¸º 10 \* 10 = 100 ï¼Œä¸” 100 å¯ä»¥åˆ†å‰²æˆ 10 + 0 ã€‚
>
> å› æ­¤ï¼Œ10 çš„æƒ©ç½šæ•°ä¸º 1 + 81 + 100 = 182

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** n = 37
>
> **è¾“å‡ºï¼š** 1478
>
> **è§£é‡Šï¼š** æ€»å…±æœ‰ 4 ä¸ªæ•´æ•° i æ»¡è¶³è¦æ±‚ï¼š
>
> - 1 ï¼Œå› ä¸º 1 \* 1 = 1
> - 9 ï¼Œå› ä¸º 9 \* 9 = 81 ï¼Œä¸” 81 å¯ä»¥åˆ†å‰²æˆ 8 + 1 ã€‚
> - 10 ï¼Œå› ä¸º 10 \* 10 = 100 ï¼Œä¸” 100 å¯ä»¥åˆ†å‰²æˆ 10 + 0 ã€‚
> - 36 ï¼Œå› ä¸º 36 \* 36 = 1296 ï¼Œä¸” 1296 å¯ä»¥åˆ†å‰²æˆ 1 + 29 + 6 ã€‚
>
> å› æ­¤ï¼Œ37 çš„æƒ©ç½šæ•°ä¸º 1 + 81 + 100 + 1296 = 1478

**æç¤ºï¼š**

- `1 <= n <= 1000`

## è§£é¢˜æ€è·¯

1. **éå† `1` åˆ° `n`ï¼Œè®¡ç®— `i^2`**

   - å¯¹äº `1 â‰¤ i â‰¤ n`ï¼Œè®¡ç®— `i^2` å¹¶å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸² `str`ã€‚
   - ä¾‹å¦‚ï¼Œè‹¥ `i = 10`ï¼Œåˆ™ `i^2 = 100`ï¼Œè½¬æ¢ä¸ºå­—ç¬¦ä¸² `"100"`ã€‚

2. **é€’å½’æ£€æŸ¥ `i^2` æ˜¯å¦èƒ½æ‹†åˆ†æˆå¤šä¸ªéƒ¨åˆ†ï¼Œä½¿å…¶å’Œç­‰äº `i`**

   - ä½¿ç”¨é€’å½’å‡½æ•° `check(str, target)` æ¥åˆ¤æ–­ `str` æ˜¯å¦å¯ä»¥æ‹†åˆ†æˆå¤šä¸ªéƒ¨åˆ†ï¼Œä½¿å¾—è¿™äº›éƒ¨åˆ†çš„æ•°å€¼ä¹‹å’Œç­‰äº `target`ã€‚
   - åœ¨ `check` è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ `cache` è®°å¿†åŒ–å­˜å‚¨ï¼Œå‡å°‘é‡å¤è®¡ç®—ã€‚
   - `check(str, target)` çš„é€’å½’é€»è¾‘ï¼š
     - **ç»ˆæ­¢æ¡ä»¶**ï¼š
       - è‹¥ `str` ä¸ºç©ºä¸” `target == 0`ï¼Œè¿”å› `true`ï¼ˆè¯´æ˜æˆåŠŸæ‹†åˆ†ï¼‰ã€‚
       - è‹¥ `target < 0`ï¼Œè¿”å› `false`ï¼ˆè¯´æ˜å½“å‰è·¯å¾„ä¸å¯èƒ½æ»¡è¶³æ¡ä»¶ï¼‰ã€‚
     - **å°è¯•ä¸åŒçš„æ‹†åˆ†æ–¹å¼**ï¼š
       - éå† `str` çš„å‰ç¼€éƒ¨åˆ† `str[0:i]`ï¼Œå°†å…¶è½¬æ¢ä¸ºæ•°å­— `left`ã€‚
       - é€’å½’æ£€æŸ¥ `str[i:]` æ˜¯å¦å¯ä»¥æ„æˆå‰©ä½™çš„ `target - left`ã€‚
       - è‹¥æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„æ‹†åˆ†ï¼Œåˆ™è¿”å› `true`ï¼Œå¦åˆ™ç»§ç»­å°è¯•ã€‚

3. **å¦‚æœ `i^2` æ»¡è¶³æ¡ä»¶ï¼Œåˆ™ç´¯åŠ åˆ°ç»“æœä¸­**

   - è‹¥ `check(square.toString(), i)` ç»“æœä¸º `true`ï¼Œåˆ™å°† `square` åŠ å…¥æœ€ç»ˆç»“æœã€‚

4. **è¿”å›æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„ `i^2` ä¹‹å’Œ**

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n * 2^m)`ï¼Œå…¶ä¸­ `m â‰ˆ log(n^2) = 2 log(n)`ã€‚
  - éå† `1` åˆ° `n` éœ€è¦ **O(n)**ã€‚
  - `check(str, target)` é€’å½’åœ°å°è¯•æ‰€æœ‰å¯èƒ½çš„æ‹†åˆ†æ–¹å¼ï¼Œæœ€åæƒ…å†µä¸‹æ¥è¿‘ **O(2^m)**ï¼ˆ`m` ä¸º `i^2` çš„å­—ç¬¦ä¸²é•¿åº¦ï¼‰ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n log(n))`ã€‚

  - **è®°å¿†åŒ–å“ˆå¸Œè¡¨ `cache`**ï¼š`O(n log(n))`

    - æ¯æ¬¡è°ƒç”¨ `check(str, target, cache)`ï¼Œæœ€å¤šå­˜å‚¨ `O(m * i)` ä¸ªå­é—®é¢˜çš„è§£ã€‚
    - å…¶ä¸­ `m` æ˜¯ `i^2` çš„ä½æ•°ï¼Œ`i` æ˜¯ `target` çš„å–å€¼èŒƒå›´ï¼ˆæœ€å¤š `O(n)`ï¼‰ã€‚
    - ç”±äº `m â‰ˆ 2 log(n)`ï¼Œ`i â‰¤ n`ï¼Œæ‰€ä»¥ `cache` çš„å¤§å°æœ€å¤š `O(n log(n))`ã€‚

  - **é€’å½’è°ƒç”¨æ ˆç©ºé—´**ï¼š`O(log(n))`

    - åœ¨ `check()` é€’å½’æ—¶ï¼Œæ¯æ¬¡æ‹†åˆ†å­—ç¬¦ä¸² `square.toString()`ï¼Œæ·±åº¦æœ€å¤š `O(m)`ï¼ˆå³ `2 log(n)`ï¼‰ã€‚
    - ç”±äº**å‰ªæä¼˜åŒ–**ï¼Œå®é™…é€’å½’æ·±åº¦é€šå¸¸æ¯” `m` æ›´æµ…ã€‚
    - **æœ€åæƒ…å†µä¸‹**ï¼Œé€’å½’è°ƒç”¨æ ˆç©ºé—´ä¸º `O(log(n))`ã€‚

  - **æ€»çš„ç©ºé—´å¤æ‚åº¦**ï¼š `O(n log(n))`ï¼Œ`cache` æ˜¯ä¸»è¦çš„ç©ºé—´å¼€é”€ï¼Œé€’å½’è°ƒç”¨æ ˆçš„å½±å“è¾ƒå°ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} n
 * @return {number}
 */
var punishmentNumber = function (n) {
	// é€’å½’æ£€æŸ¥æ˜¯å¦å¯ä»¥æ‹†åˆ†
	const check = (str, target, cache) => {
		// å¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºä¸”ç›®æ ‡å€¼å˜ä¸º0ï¼Œè¯´æ˜æ‰¾åˆ°ä¸€ç§åˆæ³•æ‹†åˆ†æ–¹å¼
		if (str == '' && target == 0) return true;
		// å¦‚æœç›®æ ‡å€¼å°äº0ï¼Œåˆ™ä¸å¯èƒ½æ»¡è¶³æ¡ä»¶
		if (target < 0) return false;
		// å‘½ä¸­ç¼“å­˜
		if (cache.has(str + ',' + target)) return cache.get(str + ',' + target);

		let res = false;
		// éå†å‰ç¼€ï¼Œå°è¯•ä¸åŒçš„æ‹†åˆ†æ–¹å¼
		for (let i = 0; i < str.length; i++) {
			let left = str.substring(0, i + 1); // å½“å‰å‰ç¼€
			let right = str.substring(i + 1); // å‰©ä½™éƒ¨åˆ†
			// é€’å½’æ£€æŸ¥å‰©ä½™éƒ¨åˆ†èƒ½å¦æ„æˆ target - left
			if (check(right, target - Number(left), cache)) {
				cache.set(str + ',' + target, true);
				res = true;
				break; // ä¸€æ—¦æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„æ‹†åˆ†æ–¹å¼å°±é€€å‡ºå¾ªç¯
			}
		}
		cache.set(str + ',' + target, false);
		return res;
	};

	let res = 0;
	// éå† 1 åˆ° nï¼Œæ£€æŸ¥å“ªäº› i^2 æ»¡è¶³æ‹†åˆ†æ¡ä»¶
	for (let i = 1; i <= n; i++) {
		let cache = new Map();

		const square = i * i; // è®¡ç®— i^2
		if (check(square.toString(), i, cache)) {
			// æ£€æŸ¥æ˜¯å¦æ»¡è¶³æ‹†åˆ†æ¡ä»¶
			res += square; // è®¡å…¥æœ€ç»ˆç»“æœ
		}
	}
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 2518 | å¥½åˆ†åŒºçš„æ•°ç›® |  |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/number-of-great-partitions) [ğŸ”—](https://leetcode.com/problems/number-of-great-partitions) |