# [4. å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°](https://leetcode.com/problems/median-of-two-sorted-arrays)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`åˆ†æ²»`](/tag/divide-and-conquer.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/median-of-two-sorted-arrays)

## é¢˜ç›®

<p>ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º <code>m</code> å’Œ <code>n</code> çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„&nbsp;<code>nums1</code> å’Œ&nbsp;<code>nums2</code>ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ <strong>ä¸­ä½æ•°</strong> ã€‚</p>

<p>ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º <code>O(log (m+n))</code> ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums1 = [1,3], nums2 = [2]
<strong>è¾“å‡ºï¼š</strong>2.00000
<strong>è§£é‡Šï¼š</strong>åˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums1 = [1,2], nums2 = [3,4]
<strong>è¾“å‡ºï¼š</strong>2.50000
<strong>è§£é‡Šï¼š</strong>åˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5
</pre>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>nums1.length == m</code></li>
	<li><code>nums2.length == n</code></li>
	<li><code>0 &lt;= m &lt;= 1000</code></li>
	<li><code>0 &lt;= n &lt;= 1000</code></li>
	<li><code>1 &lt;= m + n &lt;= 2000</code></li>
	<li><code>-10<sup>6</sup> &lt;= nums1[i], nums2[i] &lt;= 10<sup>6</sup></code></li>
</ul>


## è§£é¢˜æ€è·¯

è¿™ä¸€é¢˜æœ€å®¹æ˜“æƒ³åˆ°çš„åŠæ³•æ˜¯æŠŠä¸¤ä¸ªæ•°ç»„åˆå¹¶ï¼Œç„¶åå–å‡ºä¸­ä½æ•°ã€‚ä½†æ˜¯åˆå¹¶æœ‰åºæ•°ç»„çš„æ“ä½œæ—¶é—´å¤æ‚åº¦æ˜¯ `O(m+n)` ï¼Œä¸ç¬¦åˆé¢˜æ„ã€‚

ç”±äºé¢˜ç›®è¦æ±‚çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(log(m + n))`ï¼Œè¿™è¡¨æ˜æˆ‘ä»¬éœ€è¦ä½¿ç”¨ **äºŒåˆ†æŸ¥æ‰¾**ã€‚

å¯ä»¥å°†é—®é¢˜è½¬åŒ–ä¸º **åœ¨ä¸¤ä¸ªæ’åºæ•°ç»„ä¸­å¯»æ‰¾ç¬¬ k å°çš„æ•°**ï¼Œå…¶ä¸­ k æ˜¯ `(m + n) / 2` æˆ– `(m + n) / 2 + 1`ï¼Œä½¿ç”¨äºŒåˆ†æ³•æ¥è§£å†³ã€‚

- ç»™å®šä¸¤ä¸ªæ’åºæ•°ç»„ `nums1` å’Œ `nums2`ï¼Œéœ€è¦æ‰¾åˆ°ç¬¬ `k` å°çš„æ•°ã€‚
- ä½¿ç”¨äºŒåˆ†æ³•æ¥ç¼©å°æŸ¥æ‰¾èŒƒå›´ï¼š
  - å–ä¸¤ä¸ªæ•°ç»„ä¸­ç¬¬ `k / 2` ä¸ªæ•°ï¼Œæ¯”è¾ƒè¿™ä¸¤ä¸ªæ•°çš„å¤§å°ã€‚
  - è¾ƒå°çš„é‚£ä¸ªæ•°ç»„çš„å‰ `k / 2` ä¸ªæ•°ä¸å¯èƒ½åŒ…å«ç¬¬ k å°çš„æ•°ï¼Œæ‰€ä»¥å¯ä»¥å°†è¿™äº›æ•°æ’é™¤ï¼Œå¹¶åœ¨å‰©ä½™çš„éƒ¨åˆ†ç»§ç»­æŸ¥æ‰¾ã€‚

**ç‰¹æ®Šæƒ…å†µå¤„ç†**ï¼š

- å¦‚æœæŸä¸€ä¸ªæ•°ç»„ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›å¦ä¸€ä¸ªæ•°ç»„çš„ä¸­é—´å€¼ã€‚
- å¦‚æœ k == 1ï¼Œåˆ™è¿”å›ä¸¤ä¸ªæ•°ç»„çš„æœ€å°å€¼ã€‚
- æ€»é•¿åº¦ä¸ºå¶æ•°æ—¶ï¼Œéœ€è¦åŒæ—¶æ‰¾åˆ°ç¬¬ `(m + n) / 2` å’Œç¬¬ `(m + n) / 2 + 1` å°çš„æ•°ï¼Œå¹¶å–å®ƒä»¬çš„å¹³å‡å€¼ä½œä¸ºä¸­ä½æ•°ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(log(min(m, n)))`ï¼Œå› ä¸ºæ¯æ¬¡é€’å½’æˆ‘ä»¬ä¼šæ’é™¤æ‰ `k/2` ä¸ªå…ƒç´ ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ `k` å°çš„å…ƒç´ ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯å¯¹è¾ƒçŸ­æ•°ç»„é•¿åº¦çš„äºŒåˆ†æŸ¥æ‰¾ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªä½¿ç”¨äº†å¸¸æ•°çº§åˆ«çš„é¢å¤–ç©ºé—´ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
var findMedianSortedArrays = function (nums1, nums2) {
	const findKth = (arr1, start1, arr2, start2, k) => {
		// å¦‚æœæ•°ç»„ 1 å·²ç»å…¨éƒ¨è¢«æ’é™¤ï¼Œåˆ™è¿”å›æ•°ç»„ 2 ä¸­çš„ç¬¬ k å°å…ƒç´ 
		if (start1 >= arr1.length) {
			return arr2[start2 + k - 1];
		}

		// å¦‚æœæ•°ç»„ 2 å·²ç»å…¨éƒ¨è¢«æ’é™¤ï¼Œåˆ™è¿”å›æ•°ç»„ 1 ä¸­çš„ç¬¬ k å°å…ƒç´ 
		if (start2 >= arr2.length) {
			return arr1[start1 + k - 1];
		}

		// å¦‚æœ k == 1ï¼Œè¿”å›ä¸¤ä¸ªæ•°ç»„ä¸­æœ€å°çš„å…ƒç´ 
		if (k == 1) {
			return Math.min(arr1[start1], arr2[start2]);
		}

		// åœ¨ä¸¤ä¸ªæ•°ç»„ä¸­åˆ†åˆ«æ‰¾å‡ºç¬¬ k/2 ä¸ªå…ƒç´ 
		let harfK = (k / 2) | 0,
			index1 = start1 + harfK - 1,
			index2 = start2 + harfK - 1,
			mid1 = index1 < arr1.length ? arr1[index1] : Infinity,
			mid2 = index2 < arr2.length ? arr2[index2] : Infinity;

		// å¦‚æœæ•°ç»„ 1 çš„ä¸­é—´å€¼è¾ƒå°ï¼Œæ’é™¤æ•°ç»„ 1 ä¸­çš„å‰ k/2 ä¸ªå…ƒç´ 
		if (mid1 < mid2) {
			return findKth(arr1, start1 + harfK, arr2, start2, k - harfK);
		} else {
			// å¦åˆ™æ’é™¤æ•°ç»„ 2 ä¸­çš„å‰ k/2 ä¸ªå…ƒç´ 
			return findKth(arr1, start1, arr2, start2 + harfK, k - harfK);
		}
	};

	const len = nums1.length + nums2.length;
	// å¦‚æœæ€»é•¿åº¦ä¸ºå¥‡æ•°ï¼Œè¿”å›ä¸­é—´çš„é‚£ä¸ªæ•°
	if (len % 2 == 1) {
		return findKth(nums1, 0, nums2, 0, ((len / 2) | 0) + 1);
	} else {
		// å¦‚æœæ€»é•¿åº¦ä¸ºå¶æ•°ï¼Œè¿”å›ä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼
		const left = findKth(nums1, 0, nums2, 0, len / 2);
		const right = findKth(nums1, 0, nums2, 0, len / 2 + 1);
		return (left + right) / 2;
	}
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2387 | [è¡Œæ’åºçŸ©é˜µçš„ä¸­ä½æ•°](https://leetcode.com/problems/median-of-a-row-wise-sorted-matrix) |  |  [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`çŸ©é˜µ`](/tag/matrix.md) | <font color=#ffb800>Medium</font> |