# [921. ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ ](https://leetcode.com/problems/minimum-add-to-make-parentheses-valid)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`è´ªå¿ƒ`](/tag/greedy.md) [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/minimum-add-to-make-parentheses-valid)

## é¢˜ç›®

<p>åªæœ‰æ»¡è¶³ä¸‹é¢å‡ ç‚¹ä¹‹ä¸€ï¼Œæ‹¬å·å­—ç¬¦ä¸²æ‰æ˜¯æœ‰æ•ˆçš„ï¼š</p>

<ul>
	<li>å®ƒæ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œæˆ–è€…</li>
	<li>å®ƒå¯ä»¥è¢«å†™æˆ&nbsp;<code>AB</code>&nbsp;ï¼ˆ<code>A</code>&nbsp;ä¸&nbsp;<code>B</code>&nbsp;è¿æ¥ï¼‰, å…¶ä¸­&nbsp;<code>A</code> å’Œ&nbsp;<code>B</code>&nbsp;éƒ½æ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ï¼Œæˆ–è€…</li>
	<li>å®ƒå¯ä»¥è¢«å†™ä½œ&nbsp;<code>(A)</code>ï¼Œå…¶ä¸­&nbsp;<code>A</code>&nbsp;æ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ã€‚</li>
</ul>

<p>ç»™å®šä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸² <code>s</code> ï¼Œåœ¨æ¯ä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ éƒ½å¯ä»¥åœ¨å­—ç¬¦ä¸²çš„ä»»ä½•ä½ç½®æ’å…¥ä¸€ä¸ªæ‹¬å·</p>

<ul>
	<li>ä¾‹å¦‚ï¼Œå¦‚æœ <code>s = "()))"</code> ï¼Œä½ å¯ä»¥æ’å…¥ä¸€ä¸ªå¼€å§‹æ‹¬å·ä¸º <code>"(()))"</code> æˆ–ç»“æŸæ‹¬å·ä¸º <code>"())))"</code> ã€‚</li>
</ul>

<p>è¿”å› <em>ä¸ºä½¿ç»“æœå­—ç¬¦ä¸² <code>s</code> æœ‰æ•ˆè€Œå¿…é¡»æ·»åŠ çš„æœ€å°‘æ‹¬å·æ•°</em>ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>s = "())"
<strong>è¾“å‡ºï¼š</strong>1
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>s = "((("
<strong>è¾“å‡ºï¼š</strong>3
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= s.length &lt;= 1000</code></li>
	<li><code>s</code> åªåŒ…å«&nbsp;<code>'('</code> å’Œ&nbsp;<code>')'</code>&nbsp;å­—ç¬¦ã€‚</li>
</ul>


## è§£é¢˜æ€è·¯

1. **åˆå§‹åŒ–ä¸¤ä¸ªå˜é‡**ï¼š

   - `needLeft`ï¼šæœªåŒ¹é…çš„å·¦æ‹¬å·æ•°ï¼Œåˆå§‹å€¼ä¸º 0ã€‚
   - `needRight`ï¼šéœ€è¦çš„å³æ‹¬å·æ•°ï¼Œåˆå§‹å€¼ä¸º 0ã€‚

2. **éå†å­—ç¬¦ä¸²**ï¼š

   - å¯¹äºæ¯ä¸ªå­—ç¬¦ï¼š
     - å¦‚æœæ˜¯å·¦æ‹¬å· `'('`ï¼Œå°† `needLeft` å˜é‡åŠ  1ã€‚
     - å¦‚æœæ˜¯å³æ‹¬å· `')'`ï¼š
       - å¦‚æœå­˜åœ¨æœªåŒ¹é…çš„å·¦æ‹¬å·ï¼ˆå³ `needLeft > 0`ï¼‰ï¼Œåˆ™å‡å°‘ `needLeft`ï¼Œå› ä¸ºæ‰¾åˆ°äº†ä¸€ä¸ªå³æ‹¬å·å¯ä»¥ä¸ä¹‹åŒ¹é…ã€‚
       - å¦åˆ™ï¼Œå¢åŠ  `needRight`ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªæœªåŒ¹é…çš„å³æ‹¬å·ã€‚

3. **æœ€ç»ˆç»“æœ**ï¼š
   - éå†å®Œæˆåï¼Œå‰©ä½™çš„ `needLeft` è¡¨ç¤ºæœªåŒ¹é…çš„å·¦æ‹¬å·ï¼Œ`needRight` è¡¨ç¤ºæœªåŒ¹é…çš„å³æ‹¬å·ã€‚ä¸¤è€…ä¹‹å’Œå°±æ˜¯éœ€è¦æ·»åŠ çš„æ‹¬å·æ•°é‡ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**:` O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸² `s` çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéœ€è¦éå†å­—ç¬¦ä¸²ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**:` O(1)`ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨äº†ä¸¤ä¸ªè®¡æ•°å™¨å˜é‡ `needLeft` å’Œ `needRight`ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var minAddToMakeValid = function (s) {
	let needLeft = 0, // è®°å½•å·¦æ‹¬å·çš„éœ€æ±‚é‡
		needRight = 0; // è®°å½•å³æ‹¬å·çš„éœ€æ±‚é‡
	for (let char of s) {
		if (char == '(') {
			// å¯¹å³æ‹¬å·çš„éœ€æ±‚ + 1
			needRight++;
		} else {
			if (needRight > 0) {
				// å¯¹å³æ‹¬å·çš„éœ€æ±‚ - 1
				needRight--;
			} else {
				// éœ€æ’å…¥ä¸€ä¸ªå·¦æ‹¬å·
				needLeft++;
			}
		}
	}
	return needLeft + needRight;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 1963 | [ä½¿å­—ç¬¦ä¸²å¹³è¡¡çš„æœ€å°äº¤æ¢æ¬¡æ•°](https://leetcode.com/problems/minimum-number-of-swaps-to-make-the-string-balanced) | [[âœ“]](/problem/1963.md) |  [`æ ˆ`](/tag/stack.md) [`è´ªå¿ƒ`](/tag/greedy.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) `1+` | <font color=#ffb800>Medium</font> |