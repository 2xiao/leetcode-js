---
title: 1975. æœ€å¤§æ–¹é˜µå’Œ
description: LeetCode 1975. æœ€å¤§æ–¹é˜µå’Œé¢˜è§£ï¼ŒMaximum Matrix Sumï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1975. æœ€å¤§æ–¹é˜µå’Œ
  - æœ€å¤§æ–¹é˜µå’Œ
  - Maximum Matrix Sum
  - è§£é¢˜æ€è·¯
  - è´ªå¿ƒ
  - æ•°ç»„
  - çŸ©é˜µ
---

# 1975. æœ€å¤§æ–¹é˜µå’Œ

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) [`çŸ©é˜µ`](/tag/matrix.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/maximum-matrix-sum) [`LeetCode`](https://leetcode.com/problems/maximum-matrix-sum)

## é¢˜ç›®

You are given an `n x n` integer `matrix`. You can do the following operation
**any** number of times:

- Choose any two **adjacent** elements of `matrix` and **multiply** each of them by `-1`.

Two elements are considered **adjacent** if and only if they share a
**border**.

Your goal is to **maximize** the summation of the matrix's elements. Return
_the**maximum** sum of the matrix's elements using the operation mentioned
above._

**Example 1:**

![](https://assets.leetcode.com/uploads/2021/07/16/pc79-q2ex1.png)

> Input: matrix = [[1,-1],[-1,1]]
>
> Output: 4
>
> Explanation: We can follow the following steps to reach sum equals 4:
>
> - Multiply the 2 elements in the first row by -1.
> - Multiply the 2 elements in the first column by -1.

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/07/16/pc79-q2ex2.png)

> Input: matrix = [[1,2,3],[-1,-2,-3],[1,2,3]]
>
> Output: 16
>
> Explanation: We can follow the following step to reach sum equals 16:
>
> - Multiply the 2 last elements in the second row by -1.

**Constraints:**

- `n == matrix.length == matrix[i].length`
- `2 <= n <= 250`
- `-10^5 <= matrix[i][j] <= 10^5`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ª `n x n` çš„æ•´æ•°æ–¹é˜µ `matrix` ã€‚ä½ å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œ **ä»»æ„æ¬¡** ï¼š

- é€‰æ‹© `matrix` ä¸­ **ç›¸é‚»** ä¸¤ä¸ªå…ƒç´ ï¼Œå¹¶å°†å®ƒä»¬éƒ½ **ä¹˜ä»¥** `-1` ã€‚

å¦‚æœä¸¤ä¸ªå…ƒç´ æœ‰ **å…¬å…±è¾¹** ï¼Œé‚£ä¹ˆå®ƒä»¬å°±æ˜¯ **ç›¸é‚»** çš„ã€‚

ä½ çš„ç›®çš„æ˜¯ **æœ€å¤§åŒ–** æ–¹é˜µå…ƒç´ çš„å’Œã€‚è¯·ä½ åœ¨æ‰§è¡Œä»¥ä¸Šæ“ä½œä¹‹åï¼Œè¿”å›æ–¹é˜µçš„ **æœ€å¤§** å’Œã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/07/16/pc79-q2ex1.png)

> **è¾“å…¥ï¼š** matrix = [[1,-1],[-1,1]]
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** æˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œä½¿å’Œç­‰äº 4 ï¼š
>
> - å°†ç¬¬ä¸€è¡Œçš„ 2 ä¸ªå…ƒç´ ä¹˜ä»¥ -1 ã€‚
> - å°†ç¬¬ä¸€åˆ—çš„ 2 ä¸ªå…ƒç´ ä¹˜ä»¥ -1 ã€‚

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/07/16/pc79-q2ex2.png)

> **è¾“å…¥ï¼š** matrix = [[1,2,3],[-1,-2,-3],[1,2,3]]
>
> **è¾“å‡ºï¼š** 16
>
> **è§£é‡Šï¼š** æˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œä½¿å’Œç­‰äº 16 ï¼š
>
> - å°†ç¬¬äºŒè¡Œçš„æœ€å 2 ä¸ªå…ƒç´ ä¹˜ä»¥ -1 ã€‚

**æç¤ºï¼š**

- `n == matrix.length == matrix[i].length`
- `2 <= n <= 250`
- `-10^5 <= matrix[i][j] <= 10^5`

## è§£é¢˜æ€è·¯

æœ€å¤§åŒ–çŸ©é˜µå…ƒç´ å’Œçš„å…³é”®åœ¨äºï¼š

- **å°½é‡ä½¿è´Ÿæ•°å˜ä¸ºæ­£æ•°**ã€‚
- å¦‚æœæŸäº›è´Ÿæ•°æ— æ³•ç¿»è½¬ç¬¦å·ï¼Œæˆ‘ä»¬éœ€è¦å‡å°‘å®ƒä»¬å¯¹æ€»å’Œçš„å½±å“ã€‚

1. **è®¡ç®—çŸ©é˜µçš„ç»å¯¹å€¼æ€»å’Œ**ï¼š
   - å¯¹äºæ‰€æœ‰å…ƒç´ çš„ç»å¯¹å€¼ç›¸åŠ ï¼Œå‡è®¾æ‰€æœ‰å…ƒç´ éƒ½èƒ½å˜ä¸ºæ­£æ•°ï¼Œè¿™æ˜¯ç†è®ºä¸Šçš„æœ€å¤§å¯èƒ½æ€»å’Œã€‚
2. **ç»Ÿè®¡è´Ÿæ•°çš„ä¸ªæ•°**ï¼š
   - å¦‚æœè´Ÿæ•°çš„ä¸ªæ•°ä¸ºå¶æ•°ï¼Œé€šè¿‡å¤šæ¬¡ç¿»è½¬æ“ä½œå¯ä»¥å°†æ‰€æœ‰è´Ÿæ•°å˜ä¸ºæ­£æ•°ã€‚
   - å¦‚æœè´Ÿæ•°çš„ä¸ªæ•°ä¸ºå¥‡æ•°ï¼Œæœ€ç»ˆä¼šå‰©ä¸‹ä¸€ä¸ªè´Ÿæ•°ã€‚
3. **å¤„ç†å¥‡æ•°ä¸ªè´Ÿæ•°çš„æƒ…å†µ**ï¼š
   - æ‰¾åˆ°çŸ©é˜µä¸­ç»å¯¹å€¼æœ€å°çš„å…ƒç´ ï¼ˆä¸è®ºæ­£è´Ÿï¼‰ï¼Œå¦‚æœæ— æ³•å®Œå…¨æ¶ˆé™¤è´Ÿæ•°ï¼Œå¯ä»¥å°†è¿™ä¸ªç»å¯¹å€¼æœ€å°çš„å…ƒç´ ç¿»è½¬ä¸ºè´Ÿï¼Œä»è€Œå¯¹æ€»å’Œå½±å“æœ€å°ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n^2)`ï¼Œéå†çŸ©é˜µæ‰€æœ‰å…ƒç´ ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä½¿ç”¨äº†å¸¸æ•°çº§åˆ«çš„è¾…åŠ©å˜é‡ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[][]} matrix
 * @return {number}
 */
var maxMatrixSum = function (matrix) {
	let totalSum = 0; // çŸ©é˜µç»å¯¹å€¼æ€»å’Œ
	let minAbs = Infinity; // çŸ©é˜µä¸­ç»å¯¹å€¼æœ€å°çš„å…ƒç´ 
	let negativeCount = 0; // è´Ÿæ•°ä¸ªæ•°

	for (let row of matrix) {
		for (let val of row) {
			totalSum += Math.abs(val); // ç»Ÿè®¡ç»å¯¹å€¼æ€»å’Œ
			minAbs = Math.min(minAbs, Math.abs(val)); // æ›´æ–°ç»å¯¹å€¼æœ€å°çš„å€¼
			if (val < 0) negativeCount++; // ç»Ÿè®¡è´Ÿæ•°ä¸ªæ•°
		}
	}

	// å¦‚æœè´Ÿæ•°ä¸ªæ•°ä¸ºå¶æ•°ï¼Œæ‰€æœ‰è´Ÿæ•°éƒ½èƒ½æ¶ˆé™¤
	// å¦‚æœè´Ÿæ•°ä¸ªæ•°ä¸ºå¥‡æ•°ï¼Œå‰©ä¸‹çš„è´Ÿæ•°ä¼šå‡å»æœ€å°ç»å¯¹å€¼çš„ä¸¤å€
	return negativeCount % 2 === 0 ? totalSum : totalSum - 2 * minAbs;
};
```
