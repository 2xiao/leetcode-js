# [37. è§£æ•°ç‹¬](https://leetcode.com/problems/sudoku-solver)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å›æº¯`](/tag/backtracking.md) [`çŸ©é˜µ`](/tag/matrix.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/sudoku-solver)

## é¢˜ç›®

<p>ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œé€šè¿‡å¡«å……ç©ºæ ¼æ¥è§£å†³æ•°ç‹¬é—®é¢˜ã€‚</p>

<p>æ•°ç‹¬çš„è§£æ³•éœ€<strong> éµå¾ªå¦‚ä¸‹è§„åˆ™</strong>ï¼š</p>

<ol>
	<li>æ•°å­—&nbsp;<code>1-9</code>&nbsp;åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</li>
	<li>æ•°å­—&nbsp;<code>1-9</code>&nbsp;åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</li>
	<li>æ•°å­—&nbsp;<code>1-9</code>&nbsp;åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„&nbsp;<code>3x3</code>&nbsp;å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰</li>
</ol>

<p>æ•°ç‹¬éƒ¨åˆ†ç©ºæ ¼å†…å·²å¡«å…¥äº†æ•°å­—ï¼Œç©ºç™½æ ¼ç”¨&nbsp;<code>'.'</code>&nbsp;è¡¨ç¤ºã€‚</p>

<p>&nbsp;</p>

<div class="top-view__1vxA">
<div class="original__bRMd">
<div>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2021/04/12/250px-sudoku-by-l2g-20050714svg.png" style="height:250px; width:250px" />
<pre>
<strong>è¾“å…¥ï¼š</strong>board = [["5","3",".",".","7",".",".",".","."],["6",".",".","1","9","5",".",".","."],[".","9","8",".",".",".",".","6","."],["8",".",".",".","6",".",".",".","3"],["4",".",".","8",".","3",".",".","1"],["7",".",".",".","2",".",".",".","6"],[".","6",".",".",".",".","2","8","."],[".",".",".","4","1","9",".",".","5"],[".",".",".",".","8",".",".","7","9"]]
<strong>è¾“å‡ºï¼š</strong>[["5","3","4","6","7","8","9","1","2"],["6","7","2","1","9","5","3","4","8"],["1","9","8","3","4","2","5","6","7"],["8","5","9","7","6","1","4","2","3"],["4","2","6","8","5","3","7","9","1"],["7","1","3","9","2","4","8","5","6"],["9","6","1","5","3","7","2","8","4"],["2","8","7","4","1","9","6","3","5"],["3","4","5","2","8","6","1","7","9"]]
<strong>è§£é‡Šï¼š</strong>è¾“å…¥çš„æ•°ç‹¬å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå”¯ä¸€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹æ‰€ç¤ºï¼š

<img src=" https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2021/04/12/250px-sudoku-by-l2g-20050714_solutionsvg.png" style="height:250px; width:250px" />
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>board.length == 9</code></li>
	<li><code>board[i].length == 9</code></li>
	<li><code>board[i][j]</code> æ˜¯ä¸€ä½æ•°å­—æˆ–è€… <code>'.'</code></li>
	<li>é¢˜ç›®æ•°æ® <strong>ä¿è¯</strong> è¾“å…¥æ•°ç‹¬ä»…æœ‰ä¸€ä¸ªè§£</li>
</ul>
</div>
</div>
</div>


## è§£é¢˜æ€è·¯

è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨ **å›æº¯æ³•**ï¼ˆBacktrackingï¼‰ï¼Œé€æ­¥å°è¯•å°†æ¯ä¸ªç©ºæ ¼å¡«å……æ•°å­—ï¼Œå¹¶æ£€æŸ¥å½“å‰çš„å¡«å……æ˜¯å¦ç¬¦åˆæ•°ç‹¬è§„åˆ™ã€‚å¦‚æœä¸ç¬¦åˆè§„åˆ™ï¼Œåˆ™å›é€€åˆ°ä¹‹å‰çš„çŠ¶æ€ç»§ç»­å°è¯•å…¶ä»–å¯èƒ½æ€§ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå¯è¡Œè§£ã€‚

1. **å¯»æ‰¾ç©ºæ ¼**ï¼š

   - éå†æ•´ä¸ªæ•°ç‹¬ï¼Œæ‰¾åˆ°å°šæœªå¡«å……æ•°å­—çš„ä½ç½®ï¼ˆå³ç©ºæ ¼ `' . '`ï¼‰ï¼Œç„¶åå¼€å§‹å°è¯•å¡«å…¥æ•°å­—ã€‚

2. **é€’å½’å¡«å……æ•°å­—**ï¼š

   - å°è¯•å°†æ•°å­— `1-9` ä¾æ¬¡å¡«å…¥ç©ºæ ¼ä¸­ï¼Œå¹¶åœ¨æ¯æ¬¡å¡«å…¥åï¼Œæ£€æŸ¥è¡Œã€åˆ—ã€3x3 çš„å°æ–¹æ ¼æ˜¯å¦ä»æ»¡è¶³æ•°ç‹¬çš„è§„åˆ™ã€‚

3. **æ£€æŸ¥æœ‰æ•ˆæ€§**ï¼š

   - æ¯æ¬¡å¡«å…¥ä¸€ä¸ªæ•°å­—åï¼Œæ£€æŸ¥å½“å‰æ•°ç‹¬çš„æœ‰æ•ˆæ€§ï¼ˆå³æ¯è¡Œã€æ¯åˆ—ã€æ¯ä¸ª 3x3 å°æ–¹æ ¼ä¸­æ˜¯å¦åŒ…å«é‡å¤çš„æ•°å­—ï¼‰ã€‚

4. **å›æº¯**ï¼š

   - å¦‚æœå½“å‰æ•°å­—ä¸æ»¡è¶³è§„åˆ™ï¼Œåˆ™å›é€€åˆ°ä¸Šä¸€æ­¥ï¼Œå°è¯•å¡«å…¥ä¸‹ä¸€ä¸ªå¯èƒ½çš„æ•°å­—ã€‚
   - å¦‚æœæ‰€æœ‰å¯èƒ½çš„æ•°å­—éƒ½ä¸ç¬¦åˆè§„åˆ™ï¼Œåˆ™è¿”å›åˆ°ä¸Šä¸€ä¸ªç©ºæ ¼çš„ä½ç½®ï¼Œç»§ç»­å°è¯•å…¶ä»–å¯èƒ½çš„æ•°å­—ã€‚

5. **ç»ˆæ­¢æ¡ä»¶**ï¼š

   - å½“æ‰€æœ‰ç©ºæ ¼éƒ½å¡«å®Œï¼Œå¹¶ä¸”æ•´ä¸ªæ•°ç‹¬ç¬¦åˆè§„åˆ™æ—¶ï¼Œé€’å½’ç»ˆæ­¢ï¼Œæ•°ç‹¬è¢«è§£å‡ºã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šå›æº¯æ³•çš„æ—¶é—´å¤æ‚åº¦éå¸¸éš¾ä»¥ç²¾ç¡®ä¼°è®¡ï¼Œå› ä¸ºå®ƒå–å†³äºè¾“å…¥æ•°ç‹¬çš„å¤æ‚ç¨‹åº¦ã€‚åœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦å¯èƒ½ä¼šæ¥è¿‘ `O(9^m)`ï¼Œå…¶ä¸­ `m` æ˜¯ç©ºæ ¼çš„æ•°é‡ã€‚å› ä¸ºæ¯ä¸ªç©ºæ ¼æœ€å¤šå¯ä»¥å¡«å…¥ `9` ä¸ªæ•°å­—ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œå› ä¸ºæ•°ç‹¬æ˜¯åœ¨åŸæ•°ç»„ä¸Šä¿®æ”¹çš„ï¼Œä¸”åªä½¿ç”¨äº†å°‘é‡é¢å¤–ç©ºé—´ç”¨äºé€’å½’æ ˆã€‚

## ä»£ç 

```javascript
/**
 * @param {character[][]} board
 * @return {void} Do not return anything, modify board in-place instead.
 */
var solveSudoku = function (board) {
	const solve = (board) => {
		for (let i = 0; i < 9; i++) {
			for (let j = 0; j < 9; j++) {
				if (board[i][j] == '.') {
					// å°è¯•å¡«å…¥ 1-9
					for (let num = 1; num <= 9; num++) {
						if (isValid(board, i, j, num + '')) {
							board[i][j] = num + '';
							// é€’å½’æ±‚è§£
							if (solve(board)) {
								return true;
							}
							// å›æº¯
							board[i][j] = '.';
						}
					}
					// è‹¥æ— æ³•å¡«å…¥ä»»ä½•æ•°å­—ï¼Œè¿”å› false
					return false;
				}
			}
		}
		// æ•°ç‹¬å·²è§£å†³
		return true;
	};
	solve(board);
};

// æ£€æŸ¥åœ¨ board[row][col] æ”¾ç½® num æ˜¯å¦æœ‰æ•ˆ
var isValid = function (board, row, col, num) {
	for (let i = 0; i < 9; i++) {
		// æ£€æŸ¥è¡Œå’Œåˆ—
		if (board[i][col] == num || board[row][i] == num) {
			return false;
		}
		// æ£€æŸ¥ 3x3 å°æ–¹æ ¼
		const boxRow = 3 * ((row / 3) | 0) + ((i / 3) | 0);
		const boxCol = 3 * ((col / 3) | 0) + (i % 3);
		if (board[boxRow][boxCol] == num) {
			return false;
		}
	}
	return true;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 36 | [æœ‰æ•ˆçš„æ•°ç‹¬](https://leetcode.com/problems/valid-sudoku) | [[âœ“]](/problem/0036.md) |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`çŸ©é˜µ`](/tag/matrix.md) | <font color=#ffb800>Medium</font> |
| 980 | [ä¸åŒè·¯å¾„ III](https://leetcode.com/problems/unique-paths-iii) |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md) `1+` | <font color=#ff334b>Hard</font> |