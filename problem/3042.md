---
title: 3042. ç»Ÿè®¡å‰åç¼€ä¸‹æ ‡å¯¹ I
description: LeetCode 3042. ç»Ÿè®¡å‰åç¼€ä¸‹æ ‡å¯¹ Ié¢˜è§£ï¼ŒCount Prefix and Suffix Pairs Iï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 3042. ç»Ÿè®¡å‰åç¼€ä¸‹æ ‡å¯¹ I
  - ç»Ÿè®¡å‰åç¼€ä¸‹æ ‡å¯¹ I
  - Count Prefix and Suffix Pairs I
  - è§£é¢˜æ€è·¯
  - å­—å…¸æ ‘
  - æ•°ç»„
  - å­—ç¬¦ä¸²
  - å­—ç¬¦ä¸²åŒ¹é…
  - å“ˆå¸Œå‡½æ•°
  - æ»šåŠ¨å“ˆå¸Œ
---

# 3042. ç»Ÿè®¡å‰åç¼€ä¸‹æ ‡å¯¹ I

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å­—ç¬¦ä¸²åŒ¹é…`](/tag/string-matching.md) [`å“ˆå¸Œå‡½æ•°`](/tag/hash-function.md) [`æ»šåŠ¨å“ˆå¸Œ`](/tag/rolling-hash.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/count-prefix-and-suffix-pairs-i) [`LeetCode`](https://leetcode.com/problems/count-prefix-and-suffix-pairs-i)

## é¢˜ç›®

You are given a **0-indexed** string array `words`.

Let's define a **boolean** function `isPrefixAndSuffix` that takes two
strings, `str1` and `str2`:

- `isPrefixAndSuffix(str1, str2)` returns `true` if `str1` is **both** a prefix and a suffix of `str2`, and `false` otherwise.

For example, `isPrefixAndSuffix("aba", "ababa")` is `true` because `"aba"` is
a prefix of `"ababa"` and also a suffix, but `isPrefixAndSuffix("abc",
"abcd")` is `false`.

Return _an integer denoting the **number** of index pairs_ `(i, j)`_such that_`i < j` _, and_`isPrefixAndSuffix(words[i], words[j])`_is_`true` .

**Example 1:**

> Input: words = ["a","aba","ababa","aa"]
>
> Output: 4
>
> Explanation: In this example, the counted index pairs are:
>
> i = 0 and j = 1 because isPrefixAndSuffix("a", "aba") is true.
>
> i = 0 and j = 2 because isPrefixAndSuffix("a", "ababa") is true.
>
> i = 0 and j = 3 because isPrefixAndSuffix("a", "aa") is true.
>
> i = 1 and j = 2 because isPrefixAndSuffix("aba", "ababa") is true.
>
> Therefore, the answer is 4.

**Example 2:**

> Input: words = ["pa","papa","ma","mama"]
>
> Output: 2
>
> Explanation: In this example, the counted index pairs are:
>
> i = 0 and j = 1 because isPrefixAndSuffix("pa", "papa") is true.
>
> i = 2 and j = 3 because isPrefixAndSuffix("ma", "mama") is true.
>
> Therefore, the answer is 2.

**Example 3:**

> Input: words = ["abab","ab"]
>
> Output: 0
>
> Explanation: In this example, the only valid index pair is i = 0 and j = 1, and isPrefixAndSuffix("abab", "ab") is false.
>
> Therefore, the answer is 0.

**Constraints:**

- `1 <= words.length <= 50`
- `1 <= words[i].length <= 10`
- `words[i]` consists only of lowercase English letters.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹çš„å­—ç¬¦ä¸²æ•°ç»„ `words` ã€‚

å®šä¹‰ä¸€ä¸ª **å¸ƒå°”** å‡½æ•° `isPrefixAndSuffix` ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå­—ç¬¦ä¸²å‚æ•° `str1` å’Œ `str2` ï¼š

- å½“ `str1` åŒæ—¶æ˜¯ `str2` çš„å‰ç¼€ï¼ˆprefixï¼‰å’Œåç¼€ï¼ˆsuffixï¼‰æ—¶ï¼Œ`isPrefixAndSuffix(str1, str2)` è¿”å› `true`ï¼Œå¦åˆ™è¿”å› `false`ã€‚

ä¾‹å¦‚ï¼Œ`isPrefixAndSuffix("aba", "ababa")` è¿”å› `true`ï¼Œå› ä¸º `"aba"` æ—¢æ˜¯ `"ababa"`
çš„å‰ç¼€ï¼Œä¹Ÿæ˜¯ `"ababa"` çš„åç¼€ï¼Œä½†æ˜¯ `isPrefixAndSuffix("abc", "abcd")` è¿”å›` false`ã€‚

ä»¥æ•´æ•°å½¢å¼ï¼Œè¿”å›æ»¡è¶³ `i < j` ä¸” `isPrefixAndSuffix(words[i], words[j])` ä¸º `true` çš„ä¸‹æ ‡å¯¹
`(i, j)` çš„**æ•°é‡** ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** words = ["a","aba","ababa","aa"]
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œè®¡æ•°çš„ä¸‹æ ‡å¯¹åŒ…æ‹¬ï¼š
>
> i = 0 ä¸” j = 1 ï¼Œå› ä¸º isPrefixAndSuffix("a", "aba") ä¸º true ã€‚
>
> i = 0 ä¸” j = 2 ï¼Œå› ä¸º isPrefixAndSuffix("a", "ababa") ä¸º true ã€‚
>
> i = 0 ä¸” j = 3 ï¼Œå› ä¸º isPrefixAndSuffix("a", "aa") ä¸º true ã€‚
>
> i = 1 ä¸” j = 2 ï¼Œå› ä¸º isPrefixAndSuffix("aba", "ababa") ä¸º true ã€‚
>
> å› æ­¤ï¼Œç­”æ¡ˆæ˜¯ 4 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** words = ["pa","papa","ma","mama"]
>
> **è¾“å‡ºï¼š** 2
>
> **è§£é‡Šï¼š** åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œè®¡æ•°çš„ä¸‹æ ‡å¯¹åŒ…æ‹¬ï¼š
>
> i = 0 ä¸” j = 1 ï¼Œå› ä¸º isPrefixAndSuffix("pa", "papa") ä¸º true ã€‚
>
> i = 2 ä¸” j = 3 ï¼Œå› ä¸º isPrefixAndSuffix("ma", "mama") ä¸º true ã€‚
>
> å› æ­¤ï¼Œç­”æ¡ˆæ˜¯ 2 ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** words = ["abab","ab"]
>
> **è¾“å‡ºï¼š** 0
>
> **è§£é‡Šï¼š** åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œå”¯ä¸€æœ‰æ•ˆçš„ä¸‹æ ‡å¯¹æ˜¯ i = 0 ä¸” j = 1 ï¼Œä½†æ˜¯ isPrefixAndSuffix("abab", "ab") ä¸º false ã€‚
>
> å› æ­¤ï¼Œç­”æ¡ˆæ˜¯ 0 ã€‚

**æç¤ºï¼š**

- `1 <= words.length <= 50`
- `1 <= words[i].length <= 10`
- `words[i]` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆã€‚

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šåŒå±‚å¾ªç¯æš´åŠ›æ³•

- å¤–å±‚å¾ªç¯éå†æ¯ä¸ªå­—ç¬¦ä¸² `words[i]`ã€‚
- å†…å±‚å¾ªç¯ä» `i + 1` å¼€å§‹éå†å‰©ä½™å­—ç¬¦ä¸² `words[j]`ã€‚
- æ£€æŸ¥ï¼š
  - å¦‚æœ `words[i]` é•¿åº¦å¤§äº `words[j]`ï¼Œåˆ™è·³è¿‡ï¼Œä¼˜åŒ–æ•ˆç‡ã€‚
  - å¦åˆ™åˆ¤æ–­ `words[i]` æ˜¯å¦æ˜¯ `words[j]` çš„å‰ç¼€ä¸”åç¼€ã€‚
  - ä½¿ç”¨ JavaScript çš„å­—ç¬¦ä¸²æ–¹æ³• `startsWith` å’Œ `endsWith` åˆ†åˆ«æ£€æŸ¥å‰ç¼€å’Œåç¼€å…³ç³»ã€‚
- å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œè®¡æ•°å™¨ `count` å¢åŠ ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n^2 * m)`
  - å¤–å±‚å¾ªç¯éå† `n` ä¸ªå­—ç¬¦ä¸²ï¼Œå†…å±‚å¾ªç¯æœ€å¤šéå† `n-1` ä¸ªå­—ç¬¦ä¸²ï¼Œåœ¨æœ€åæƒ…å†µä¸‹éœ€è¦æ¯”è¾ƒæ‰€æœ‰çš„å­—ç¬¦ä¸²å¯¹ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º `O(n^2)`ã€‚
  - æ¯æ¬¡æ¯”è¾ƒå­—ç¬¦ä¸²çš„å‰ç¼€å’Œåç¼€æ—¶ï¼Œå¤æ‚åº¦ä¸å­—ç¬¦ä¸²çš„é•¿åº¦ `m` æˆæ­£æ¯”ï¼Œå› æ­¤æ•´ä½“å¤æ‚åº¦ä¸º `O(n^2 * m)`ï¼Œå…¶ä¸­ `m` æ˜¯å­—ç¬¦ä¸²çš„å¹³å‡é•¿åº¦ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä»…ä½¿ç”¨äº†å¸¸æ•°çº§åˆ«çš„è¾…åŠ©å˜é‡ã€‚

---

### æ€è·¯äºŒï¼šå‰ç¼€æ ‘æ³•

ä¸ºäº†æé«˜æ•ˆç‡ï¼Œå¯ä»¥ä½¿ç”¨å‰ç¼€æ ‘ï¼ˆTrieï¼‰å’Œåç¼€æ ‘åˆ†åˆ«å¤„ç†å‰ç¼€å’Œåç¼€åŒ¹é…ï¼Œä»è€Œä¼˜åŒ–æš´åŠ›è§£æ³•çš„æ—¶é—´å¤æ‚åº¦ã€‚

1. **æ„å»ºå‰ç¼€æ ‘å’Œåç¼€æ ‘ï¼š**

   - **å‰ç¼€æ ‘ï¼ˆPrefix Trieï¼‰ï¼š** ç”¨äºå¿«é€Ÿåˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å¦ä¸€ä¸ªå­—ç¬¦ä¸²çš„å‰ç¼€ã€‚
   - **åç¼€æ ‘ï¼ˆSuffix Trieï¼‰ï¼š** ç”¨äºå¿«é€Ÿåˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å¦ä¸€ä¸ªå­—ç¬¦ä¸²çš„åç¼€ã€‚
   - éå†æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œå°†æ¯ä¸ªå­—ç¬¦ä¸²æ’å…¥åˆ°å‰ç¼€æ ‘å’Œåç¼€æ ‘ä¸­ã€‚
   - æ’å…¥åˆ°åç¼€æ ‘æ—¶ï¼Œå…ˆå°†å­—ç¬¦ä¸²åè½¬ï¼Œè¿™æ ·åç¼€åŒ¹é…å˜æˆå‰ç¼€åŒ¹é…ã€‚

2. **æŸ¥è¯¢å‰ç¼€å’Œåç¼€åŒ¹é…ï¼š**

   - å¯¹äºå½“å‰å­—ç¬¦ä¸²å‰é¢çš„æ¯ä¸ªå­—ç¬¦ä¸²ï¼ŒæŸ¥è¯¢å®ƒæ˜¯å¦åŒæ—¶æ˜¯å½“å‰å­—ç¬¦ä¸²çš„å‰ç¼€å’Œåç¼€ã€‚

3. **è®¡æ•°ï¼š**

   - å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œå¢åŠ è®¡æ•°ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n * m)`
  - æ„å»ºå‰ç¼€æ ‘å’Œåç¼€æ ‘çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(n * m)`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸²æ•°é‡ï¼Œ`m` æ˜¯å­—ç¬¦ä¸²çš„å¹³å‡é•¿åº¦ã€‚
  - æ¯ä¸ªå­—ç¬¦ä¸²æŸ¥è¯¢å‰ç¼€å’Œåç¼€çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(m)`ï¼Œæ€»å¤æ‚åº¦æ˜¯ `O(n * m)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n * m)`ï¼Œå‰ç¼€æ ‘å’Œåç¼€æ ‘çš„å­˜å‚¨å¤æ‚åº¦ä¸º `O(n * m)`ï¼Œéœ€è¦å­˜å‚¨æ‰€æœ‰å­—ç¬¦ä¸²çš„èŠ‚ç‚¹ã€‚

## ä»£ç 

::: code-tabs
@tab åŒå±‚å¾ªç¯æš´åŠ›æ³•

```javascript
/**
 * @param {string[]} words
 * @return {number}
 */
var countPrefixSuffixPairs = function (words) {
	let count = 0;

	// éå†æ¯ä¸ªå­—ç¬¦ä¸²å¯¹
	for (let i = 0; i < words.length; i++) {
		for (let j = i + 1; j < words.length; j++) {
			// å¦‚æœ words[i] æ¯” words[j] é•¿ï¼Œç›´æ¥è·³è¿‡
			if (words[i].length > words[j].length) {
				continue;
			}

			// æ£€æŸ¥ words[i] æ˜¯å¦ä¸º words[j] çš„å‰ç¼€å’Œåç¼€
			if (words[j].startsWith(words[i]) && words[j].endsWith(words[i])) {
				count++;
			}
		}
	}

	return count;
};
```

@tab å‰ç¼€æ ‘æ³•

```javascript
/**
 * @param {string[]} words
 * @return {number}
 */
var countPrefixSuffixPairs = function (words) {
	let count = 0;
	const n = words.length;
	for (let i = 0; i < n; i++) {
		// æ„å»ºå‰ç¼€æ ‘å’Œåç¼€æ ‘
		const prefixTrie = new Trie();
		const suffixTrie = new Trie();
		// æ’å…¥å‰ç¼€æ ‘
		prefixTrie.insert(words[i]);
		// æ’å…¥åç¼€æ ‘ï¼ˆåè½¬å­—ç¬¦ä¸²ï¼‰
		suffixTrie.insert([...words[i]].reverse().join(''));

		// éå†æ¯ä¸ªå­—ç¬¦ä¸²ï¼ŒæŸ¥è¯¢å‰ç¼€å’Œåç¼€åŒ¹é…
		for (let j = 0; j < i; j++) {
			// å¦‚æœ words[j] æ¯” words[i] é•¿ï¼Œç›´æ¥è·³è¿‡
			if (words[i].length < words[j].length) continue;

			const word = words[j];
			const reversedWord = [...word].reverse().join('');
			if (prefixTrie.startsWith(word) && suffixTrie.startsWith(reversedWord)) {
				count++;
			}
		}
	}
	return count;
};
class TrieNode {
	constructor() {
		this.children = {}; // å­èŠ‚ç‚¹æ˜ å°„
		this.isEnd = false; // æ ‡è®°æ˜¯å¦æ˜¯æŸä¸ªå­—ç¬¦ä¸²çš„ç»“æŸ
	}
}
class Trie {
	constructor() {
		this.root = new TrieNode();
	}
	// æ’å…¥å­—ç¬¦ä¸²
	insert(str) {
		let node = this.root;
		for (let char of str) {
			if (!node.children[char]) {
				node.children[char] = new TrieNode();
			}
			node = node.children[char];
		}
		node.isEnd = true;
	}
	// æŸ¥è¯¢æ˜¯å¦ä¸ºå‰ç¼€
	startsWith(prefix) {
		let node = this.root;
		for (let char of prefix) {
			if (!node.children[char]) {
				return false;
			}
			node = node.children[char];
		}
		return true;
	}
}
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 208 | å®ç° Trie (å‰ç¼€æ ‘) | [[âœ“]](/problem/0208.md) |  [`è®¾è®¡`](/tag/design.md) [`å­—å…¸æ ‘`](/tag/trie.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/implement-trie-prefix-tree) [ğŸ”—](https://leetcode.com/problems/implement-trie-prefix-tree) |
| 211 | æ·»åŠ ä¸æœç´¢å•è¯ - æ•°æ®ç»“æ„è®¾è®¡ | [[âœ“]](/problem/0211.md) |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`è®¾è®¡`](/tag/design.md) [`å­—å…¸æ ‘`](/tag/trie.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/design-add-and-search-words-data-structure) [ğŸ”—](https://leetcode.com/problems/design-add-and-search-words-data-structure) |