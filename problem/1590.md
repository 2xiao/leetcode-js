# [1590. ä½¿æ•°ç»„å’Œèƒ½è¢« P æ•´é™¤](https://leetcode.com/problems/make-sum-divisible-by-p)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/make-sum-divisible-by-p)

## é¢˜ç›®

<p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„&nbsp;<code>nums</code>ï¼Œè¯·ä½ ç§»é™¤ <strong>æœ€çŸ­</strong>&nbsp;å­æ•°ç»„ï¼ˆå¯ä»¥ä¸º <strong>ç©º</strong>ï¼‰ï¼Œä½¿å¾—å‰©ä½™å…ƒç´ çš„ <strong>å’Œ</strong>&nbsp;èƒ½è¢« <code>p</code>&nbsp;æ•´é™¤ã€‚ <strong>ä¸å…è®¸</strong>&nbsp;å°†æ•´ä¸ªæ•°ç»„éƒ½ç§»é™¤ã€‚</p>

<p>è¯·ä½ è¿”å›ä½ éœ€è¦ç§»é™¤çš„æœ€çŸ­å­æ•°ç»„çš„é•¿åº¦ï¼Œå¦‚æœæ— æ³•æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œè¿”å› <code>-1</code>&nbsp;ã€‚</p>

<p><strong>å­æ•°ç»„</strong>&nbsp;å®šä¹‰ä¸ºåŸæ•°ç»„ä¸­è¿ç»­çš„ä¸€ç»„å…ƒç´ ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>nums = [3,1,4,2], p = 6
<strong>è¾“å‡ºï¼š</strong>1
<strong>è§£é‡Šï¼š</strong>nums ä¸­å…ƒç´ å’Œä¸º 10ï¼Œä¸èƒ½è¢« p æ•´é™¤ã€‚æˆ‘ä»¬å¯ä»¥ç§»é™¤å­æ•°ç»„ [4] ï¼Œå‰©ä½™å…ƒç´ çš„å’Œä¸º 6 ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>nums = [6,3,5,2], p = 9
<strong>è¾“å‡ºï¼š</strong>2
<strong>è§£é‡Šï¼š</strong>æˆ‘ä»¬æ— æ³•ç§»é™¤ä»»ä½•ä¸€ä¸ªå…ƒç´ ä½¿å¾—å’Œè¢« 9 æ•´é™¤ï¼Œæœ€ä¼˜æ–¹æ¡ˆæ˜¯ç§»é™¤å­æ•°ç»„ [5,2] ï¼Œå‰©ä½™å…ƒç´ ä¸º [6,3]ï¼Œå’Œä¸º 9 ã€‚
</pre>

<p><strong>ç¤ºä¾‹&nbsp;3ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>nums = [1,2,3], p = 3
<strong>è¾“å‡ºï¼š</strong>0
<strong>è§£é‡Šï¼š</strong>å’Œæ°å¥½ä¸º 6 ï¼Œå·²ç»èƒ½è¢« 3 æ•´é™¤äº†ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦ç§»é™¤ä»»ä½•å…ƒç´ ã€‚
</pre>

<p><strong>ç¤ºä¾‹&nbsp; 4ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>nums = [1,2,3], p = 7
<strong>è¾“å‡ºï¼š</strong>-1
<strong>è§£é‡Šï¼š</strong>æ²¡æœ‰ä»»ä½•æ–¹æ¡ˆä½¿å¾—ç§»é™¤å­æ•°ç»„åå‰©ä½™å…ƒç´ çš„å’Œè¢« 7 æ•´é™¤ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 5ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>nums = [1000000000,1000000000,1000000000], p = 3
<strong>è¾“å‡ºï¼š</strong>0
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>1 &lt;= nums[i] &lt;= 10<sup>9</sup></code></li>
	<li><code>1 &lt;= p &lt;= 10<sup>9</sup></code></li>
</ul>


## è§£é¢˜æ€è·¯

1. **è®¡ç®—æ€»å’Œ**ï¼š

   - ä½¿ç”¨ `reduce` æ–¹æ³•è®¡ç®—æ•°ç»„ `nums` çš„æ€»å’Œï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å˜é‡ `sum` ä¸­ã€‚

2. **ç¡®å®šæ€»ä½™æ•°**ï¼š

   - è®¡ç®— `totalRemainder` ä¸º `sum % p`ã€‚å¦‚æœ `totalRemainder` ä¸º `0`ï¼Œè¯´æ˜æ•´ä¸ªæ•°ç»„çš„å’Œå·²ç»å¯ä»¥è¢« `p` æ•´é™¤ï¼Œå› æ­¤ç›´æ¥è¿”å› `0`ï¼Œå› ä¸ºä¸éœ€è¦ç§»é™¤ä»»ä½•å…ƒç´ ã€‚

3. **åˆå§‹åŒ–å˜é‡**ï¼š

   - åˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ `map`ï¼Œç”¨äºå­˜å‚¨é‡åˆ°çš„ä½™æ•°åŠå…¶å¯¹åº”çš„ç´¢å¼•ã€‚åˆå§‹åŒ–æ—¶å°† `{0: -1}` æ”¾å…¥å…¶ä¸­ï¼Œä»¥å¤„ç†å¯èƒ½éœ€è¦ä»æ•°ç»„å¼€å¤´ç§»é™¤å…ƒç´ çš„æƒ…å†µã€‚
   - åˆå§‹åŒ– `curRemainder` ä¸º `0`ï¼Œç”¨äºåœ¨éå†æ•°ç»„æ—¶å­˜å‚¨å½“å‰ç´¯ç§¯å’Œçš„ä½™æ•°ã€‚
   - å°† `res` è®¾ç½®ä¸ºæ•°ç»„çš„é•¿åº¦ (`nums.length`)ï¼Œç”¨äºè·Ÿè¸ªéœ€è¦ç§»é™¤çš„æœ€å°å­æ•°ç»„é•¿åº¦ã€‚

4. **éå†æ•°ç»„**ï¼š

   - éå†æ•°ç»„ï¼Œæ›´æ–°å½“å‰å’Œçš„ä½™æ•°ã€‚å¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸€ä¸ªä»¥å‰çš„ä½™æ•°ï¼Œä½¿å¾— `curRemainder - totalRemainder` å¯ä»¥è¢« `p` æ•´é™¤ã€‚
   - å¦‚æœæ‰¾åˆ°ï¼Œè®¡ç®—éœ€è¦ç§»é™¤çš„å­æ•°ç»„çš„é•¿åº¦ï¼Œå¹¶æ›´æ–°æœ€å°é•¿åº¦ã€‚
   - å°†å½“å‰çš„ `curRemainder` å’Œå…¶ç´¢å¼• `i` å­˜å…¥å“ˆå¸Œè¡¨ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚

5. **è¿”å›ç»“æœ**ï¼š
   - éå†ç»“æŸåï¼Œæ£€æŸ¥ `res` æ˜¯å¦ä»ç­‰äºæ•°ç»„çš„é•¿åº¦ã€‚å¦‚æœæ˜¯ï¼Œè¿”å› `-1`ï¼Œè¡¨ç¤ºæ— æ³•æ‰¾åˆ°åˆé€‚çš„å­æ•°ç»„ï¼›å¦åˆ™ï¼Œè¿”å› `res` çš„å€¼ï¼Œè¡¨ç¤ºéœ€è¦ç§»é™¤çš„æœ€å°å­æ•°ç»„é•¿åº¦ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œéœ€è¦éå†æ•°ç»„ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œç”¨äºå­˜å‚¨å“ˆå¸Œè¡¨ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @param {number} p
 * @return {number}
 */
var minSubarray = function (nums, p) {
	const sum = nums.reduce((a, b) => a + b, 0);
	const totalRemainder = sum % p;
	// å¦‚æœæ€»å’Œå·²ç»å¯ä»¥è¢« p æ•´é™¤ï¼Œç›´æ¥è¿”å› 0
	if (totalRemainder == 0) return 0;

	let map = new Map(),
		curRemainder = 0,
		res = nums.length;

	// å¤„ç†è¾¹ç•Œæƒ…å†µ
	map.set(0, -1);

	for (let i = 0; i < nums.length; i++) {
		// è®¡ç®—å½“å‰çš„ä½™æ•°
		curRemainder = (curRemainder + nums[i]) % p;
		// è®¡ç®—éœ€è¦çš„ä½™æ•°
		const targetRemainder = (curRemainder - totalRemainder + p) % p;
		// å¦‚æœå­˜åœ¨è¿™æ ·çš„ä½™æ•°
		if (map.has(targetRemainder)) {
			res = Math.min(res, i - map.get(targetRemainder));
		}
		// è®°å½•å½“å‰ä½™æ•°åŠå…¶ç´¢å¼•
		map.set(curRemainder, i);
	}
	// å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å› -1
	return res == nums.length ? -1 : res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 974 | [å’Œå¯è¢« K æ•´é™¤çš„å­æ•°ç»„](https://leetcode.com/problems/subarray-sums-divisible-by-k) |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) | <font color=#ffb800>Medium</font> |
| 2575 | [æ‰¾å‡ºå­—ç¬¦ä¸²çš„å¯æ•´é™¤æ•°ç»„](https://leetcode.com/problems/find-the-divisibility-array-of-a-string) |  |  [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | <font color=#ffb800>Medium</font> |