# [39. ç»„åˆæ€»å’Œ](https://leetcode.com/problems/combination-sum)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/combination-sum)

## é¢˜ç›®

<p>ç»™ä½ ä¸€ä¸ª <strong>æ— é‡å¤å…ƒç´ </strong> çš„æ•´æ•°æ•°ç»„&nbsp;<code>candidates</code> å’Œä¸€ä¸ªç›®æ ‡æ•´æ•°&nbsp;<code>target</code>&nbsp;ï¼Œæ‰¾å‡º&nbsp;<code>candidates</code>&nbsp;ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•°&nbsp;<code>target</code> çš„ æ‰€æœ‰<em>&nbsp;</em><strong>ä¸åŒç»„åˆ</strong> ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›ã€‚ä½ å¯ä»¥æŒ‰ <strong>ä»»æ„é¡ºåº</strong> è¿”å›è¿™äº›ç»„åˆã€‚</p>

<p><code>candidates</code> ä¸­çš„ <strong>åŒä¸€ä¸ª</strong> æ•°å­—å¯ä»¥ <strong>æ— é™åˆ¶é‡å¤è¢«é€‰å–</strong> ã€‚å¦‚æœè‡³å°‘ä¸€ä¸ªæ•°å­—çš„è¢«é€‰æ•°é‡ä¸åŒï¼Œåˆ™ä¸¤ç§ç»„åˆæ˜¯ä¸åŒçš„ã€‚&nbsp;</p>

<p>å¯¹äºç»™å®šçš„è¾“å…¥ï¼Œä¿è¯å’Œä¸º&nbsp;<code>target</code> çš„ä¸åŒç»„åˆæ•°å°‘äº <code>150</code> ä¸ªã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹&nbsp;1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>candidates = <code>[2,3,6,7]</code>, target = <code>7</code>
<strong>è¾“å‡ºï¼š</strong>[[2,2,3],[7]]
<strong>è§£é‡Šï¼š</strong>
2 å’Œ 3 å¯ä»¥å½¢æˆä¸€ç»„å€™é€‰ï¼Œ2 + 2 + 3 = 7 ã€‚æ³¨æ„ 2 å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚
7 ä¹Ÿæ˜¯ä¸€ä¸ªå€™é€‰ï¼Œ 7 = 7 ã€‚
ä»…æœ‰è¿™ä¸¤ç§ç»„åˆã€‚</pre>

<p><strong>ç¤ºä¾‹&nbsp;2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥: </strong>candidates = [2,3,5]<code>, </code>target = 8
<strong>è¾“å‡º: </strong>[[2,2,2,2],[2,3,3],[3,5]]</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<strong>è¾“å…¥: </strong>candidates = <code>[2], </code>target = 1
<strong>è¾“å‡º: </strong>[]
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= candidates.length &lt;= 30</code></li>
	<li><code>2 &lt;= candidates[i] &lt;= 40</code></li>
	<li><code>candidates</code> çš„æ‰€æœ‰å…ƒç´  <strong>äº’ä¸ç›¸åŒ</strong></li>
	<li><code>1 &lt;= target &lt;= 40</code></li>
</ul>


## è§£é¢˜æ€è·¯

è¿™ä¸ªé—®é¢˜ä½¿ç”¨å›æº¯æ³•æ¥è§£å†³ã€‚å›æº¯æ³•æ˜¯ä¸€ç§é€šè¿‡ä¸æ–­å°è¯•ç”Ÿæˆé—®é¢˜çš„æ‰€æœ‰è§£çš„ç®—æ³•ï¼Œå¦‚æœè§£ä¸ç¬¦åˆè¦æ±‚ï¼Œå°±æ’¤é”€ä¸Šä¸€æ­¥ç”šè‡³ä¸Šå‡ æ­¥çš„è®¡ç®—ï¼Œå†é€šè¿‡å…¶ä»–å¯èƒ½çš„åˆ†æ”¯å¯»æ‰¾æ­£ç¡®çš„è§£ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š

1. **å®šä¹‰å›æº¯å‡½æ•°ï¼š** å®šä¹‰ä¸€ä¸ªå›æº¯å‡½æ•° `backtrack`ï¼Œæ¥æ”¶ä¸€ä¸ªèµ·å§‹ç´¢å¼• `start` ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºä»å€™é€‰æ•°ç»„çš„å“ªä¸ªä½ç½®å¼€å§‹è€ƒè™‘ï¼Œé¿å…é‡å¤ç»„åˆã€‚

2. **å›æº¯è¿‡ç¨‹ï¼š** åœ¨å›æº¯çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ–­é€‰æ‹©å½“å‰ä½ç½®çš„æ•°å­—ï¼Œå¹¶æ›´æ–°å½“å‰ç»„åˆçš„å’Œ `sum`ã€‚å¦‚æœ `sum` ç­‰äºç›®æ ‡å€¼ `target`ï¼Œåˆ™å°†å½“å‰ç»„åˆæ·»åŠ åˆ°ç»“æœé›†ä¸­ã€‚

3. **é€’å½’è°ƒç”¨ï¼š** å¦‚æœ `sum` å°äº `target`ï¼Œåˆ™ç»§ç»­åœ¨å½“å‰ä½ç½®å’Œä¹‹åçš„ä½ç½®è¿›è¡Œé€’å½’ã€‚å¦‚æœ `sum` å¤§äº `target`ï¼Œè¯´æ˜å½“å‰ç»„åˆä¸æ»¡è¶³æ¡ä»¶ï¼Œéœ€è¦æ’¤é”€å½“å‰é€‰æ‹©ï¼Œè¿”å›ä¸Šä¸€å±‚ç»§ç»­å°è¯•å…¶ä»–åˆ†æ”¯ã€‚

4. **é™åˆ¶æ¡ä»¶ï¼š** åœ¨é€’å½’çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡åˆ¤æ–­ `sum` æ˜¯å¦ç­‰äº `target` æ¥ç¡®ä¿ç”Ÿæˆçš„ç»„åˆæ˜¯ç¬¦åˆè¦æ±‚çš„ã€‚é€’å½’æ—¶ä¼ å…¥ `i` ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºä»å½“å‰ä½ç½®å¼€å§‹å°è¯•ï¼Œä»¥ç¡®ä¿å¯ä»¥é‡å¤ä½¿ç”¨å½“å‰æ•°å­—ã€‚

5. **è¿”å›ç»“æœï¼š** æœ€ç»ˆé€šè¿‡è°ƒç”¨ `backtrack` å‡½æ•°å¾—åˆ°æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç»„åˆï¼Œè¿”å›è¿™äº›ç»„åˆçš„æ•°ç»„ä½œä¸ºç»“æœã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n^t)`ï¼Œ`n` ä¸º `candidates` é•¿åº¦ï¼Œ`t = target / æœ€å°å€™é€‰æ•°`ï¼Œä¸»è¦ç”±é€’å½’æ ‘çš„æ·±åº¦å’Œæ¯å±‚é€’å½’ä¸­å¾ªç¯æ¬¡æ•°å†³å®šã€‚
  - é€’å½’æ ‘çš„æ¯ä¸€å±‚ä»£è¡¨ä»æ•°ç»„ `candidates` ä¸­é€‰æ‹©ä¸€ä¸ªæ•°å­—åŠ å…¥åˆ°ç»„åˆä¸­çš„è¿‡ç¨‹ã€‚æ¯ä¸ªæ•°å­—éƒ½å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå› æ­¤é€’å½’æ ‘çš„æ·±åº¦æœ€å¤§ä¸º `target / æœ€å°å€™é€‰æ•°`ã€‚
  - åœ¨æœ€åæƒ…å†µä¸‹ï¼Œé€’å½’æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½è¦è¿›è¡Œ `n` æ¬¡å¾ªç¯æ“ä½œæ¥é€‰æ‹©å€™é€‰æ•°ï¼Œå› æ­¤é€’å½’æ ‘çš„èŠ‚ç‚¹æ€»æ•°æœ€å¤šä¸º `n^(target / æœ€å°å€™é€‰æ•°)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(t)`ï¼Œ`t = target / æœ€å°å€™é€‰æ•°`ï¼Œä¸»è¦ç”±é€’å½’æ·±åº¦å†³å®šï¼Œé€’å½’æ ‘çš„æ·±åº¦å¯èƒ½è¾¾åˆ° `target / æœ€å°å€™é€‰æ•°`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} candidates
 * @param {number} target
 * @return {number[][]}
 */
var combinationSum = function (candidates, target) {
	const len = candidates.length;
	let res = [];
	let track = [];
	let sum = 0;

	const backtrack = (start) => {
		// æ»¡è¶³æ¡ä»¶
		if (sum == target) {
			res.push([...track]);
			return;
		}
		// å‰ªæ
		if (sum > target) {
			return;
		}
		for (let i = start; i < len; i++) {
			track.push(candidates[i]);
			sum += candidates[i];

			// æ³¨æ„è¿™é‡Œä¼ å…¥çš„å‚æ•°æ˜¯ i è€Œä¸æ˜¯ i + 1ï¼Œè¡¨ç¤ºå¯ä»¥é‡å¤ä½¿ç”¨å½“å‰çš„æ•°å­—
			backtrack(i);

			track.pop();
			sum -= candidates[i];
		}
	};
	backtrack(0);
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 17 | [ç”µè¯å·ç çš„å­—æ¯ç»„åˆ](https://leetcode.com/problems/letter-combinations-of-a-phone-number) | [[âœ“]](/problem/0017.md) |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 40 | [ç»„åˆæ€»å’Œ II](https://leetcode.com/problems/combination-sum-ii) | [[âœ“]](/problem/0040.md) |  [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 77 | [ç»„åˆ](https://leetcode.com/problems/combinations) | [[âœ“]](/problem/0077.md) |  [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 216 | [ç»„åˆæ€»å’Œ III](https://leetcode.com/problems/combination-sum-iii) | [[âœ“]](/problem/0216.md) |  [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 254 | [å› å­çš„ç»„åˆ](https://leetcode.com/problems/factor-combinations) |  |  [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 377 | [ç»„åˆæ€»å’Œ â…£](https://leetcode.com/problems/combination-sum-iv) |  |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ffb800>Medium</font> |
| 3183 | [è¾¾åˆ°æ€»å’Œçš„æ–¹æ³•æ•°é‡](https://leetcode.com/problems/the-number-of-ways-to-make-the-sum) |  |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ffb800>Medium</font> |