---
title: 841. é’¥åŒ™å’Œæˆ¿é—´
description: LeetCode 841. é’¥åŒ™å’Œæˆ¿é—´é¢˜è§£ï¼ŒKeys and Roomsï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 841. é’¥åŒ™å’Œæˆ¿é—´
  - é’¥åŒ™å’Œæˆ¿é—´
  - Keys and Rooms
  - è§£é¢˜æ€è·¯
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - å›¾
---

# 841. é’¥åŒ™å’Œæˆ¿é—´

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å›¾`](/tag/graph.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/keys-and-rooms) [`LeetCode`](https://leetcode.com/problems/keys-and-rooms)

## é¢˜ç›®

There are `n` rooms labeled from `0` to `n - 1` and all the rooms are locked
except for room `0`. Your goal is to visit all the rooms. However, you cannot
enter a locked room without having its key.

When you visit a room, you may find a set of **distinct keys** in it. Each key
has a number on it, denoting which room it unlocks, and you can take all of
them with you to unlock the other rooms.

Given an array `rooms` where `rooms[i]` is the set of keys that you can obtain
if you visited room `i`, return `true` _if you can visit**all** the rooms, or_
`false` _otherwise_.

**Example 1:**

> Input: rooms = [[1],[2],[3],[]]
>
> Output: true
>
> Explanation:
>
> We visit room 0 and pick up key 1.
>
> We then visit room 1 and pick up key 2.
>
> We then visit room 2 and pick up key 3.
>
> We then visit room 3.
>
> Since we were able to visit every room, we return true.

**Example 2:**

> Input: rooms = [[1,3],[3,0,1],[2],[0]]
>
> Output: false
>
> Explanation: We can not enter room number 2 since the only key that unlocks it is in that room.

**Constraints:**

- `n == rooms.length`
- `2 <= n <= 1000`
- `0 <= rooms[i].length <= 1000`
- `1 <= sum(rooms[i].length) <= 3000`
- `0 <= rooms[i][j] < n`
- All the values of `rooms[i]` are **unique**.

## é¢˜ç›®å¤§æ„

æœ‰ `n` ä¸ªæˆ¿é—´ï¼Œæˆ¿é—´æŒ‰ä» `0` åˆ° `n - 1` ç¼–å·ã€‚æœ€åˆï¼Œé™¤ `0`
å·æˆ¿é—´å¤–çš„å…¶ä½™æ‰€æœ‰æˆ¿é—´éƒ½è¢«é”ä½ã€‚ä½ çš„ç›®æ ‡æ˜¯è¿›å…¥æ‰€æœ‰çš„æˆ¿é—´ã€‚ç„¶è€Œï¼Œä½ ä¸èƒ½åœ¨æ²¡æœ‰è·å¾—é’¥åŒ™çš„æ—¶å€™è¿›å…¥é”ä½çš„æˆ¿é—´ã€‚

å½“ä½ è¿›å…¥ä¸€ä¸ªæˆ¿é—´ï¼Œä½ å¯èƒ½ä¼šåœ¨é‡Œé¢æ‰¾åˆ°ä¸€å¥— **ä¸åŒçš„é’¥åŒ™** ï¼Œæ¯æŠŠé’¥åŒ™ä¸Šéƒ½æœ‰å¯¹åº”çš„æˆ¿é—´å·ï¼Œå³è¡¨ç¤ºé’¥åŒ™å¯ä»¥æ‰“å¼€çš„æˆ¿é—´ã€‚ä½ å¯ä»¥æ‹¿ä¸Šæ‰€æœ‰é’¥åŒ™å»è§£é”å…¶ä»–æˆ¿é—´ã€‚

ç»™ä½ ä¸€ä¸ªæ•°ç»„ `rooms` å…¶ä¸­ `rooms[i]` æ˜¯ä½ è¿›å…¥ `i` å·æˆ¿é—´å¯ä»¥è·å¾—çš„é’¥åŒ™é›†åˆã€‚å¦‚æœèƒ½è¿›å…¥ **æ‰€æœ‰** æˆ¿é—´è¿”å›
`true`ï¼Œå¦åˆ™è¿”å› `false`ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** rooms = [[1],[2],[3],[]]
>
> **è¾“å‡ºï¼š** true
>
> **è§£é‡Šï¼š**
>
> æˆ‘ä»¬ä» 0 å·æˆ¿é—´å¼€å§‹ï¼Œæ‹¿åˆ°é’¥åŒ™ 1ã€‚
>
> ä¹‹åæˆ‘ä»¬å» 1 å·æˆ¿é—´ï¼Œæ‹¿åˆ°é’¥åŒ™ 2ã€‚
>
> ç„¶åæˆ‘ä»¬å» 2 å·æˆ¿é—´ï¼Œæ‹¿åˆ°é’¥åŒ™ 3ã€‚
>
> æœ€åæˆ‘ä»¬å»äº† 3 å·æˆ¿é—´ã€‚
>
> ç”±äºæˆ‘ä»¬èƒ½å¤Ÿè¿›å…¥æ¯ä¸ªæˆ¿é—´ï¼Œæˆ‘ä»¬è¿”å› trueã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** rooms = [[1,3],[3,0,1],[2],[0]]
>
> **è¾“å‡ºï¼š** false
>
> **è§£é‡Šï¼š** æˆ‘ä»¬ä¸èƒ½è¿›å…¥ 2 å·æˆ¿é—´ã€‚

**æç¤ºï¼š**

- `n == rooms.length`
- `2 <= n <= 1000`
- `0 <= rooms[i].length <= 1000`
- `1 <= sum(rooms[i].length) <= 3000`
- `0 <= rooms[i][j] < n`
- æ‰€æœ‰ `rooms[i]` çš„å€¼ **äº’ä¸ç›¸åŒ**

## è§£é¢˜æ€è·¯

è¿™é“é¢˜ç›®æ˜¯å…¸å‹çš„å›¾éå†é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰æˆ–å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰æ¥è§£å†³ã€‚

- æ¯ä¸ªæˆ¿é—´å¯ä»¥çœ‹ä½œä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯æŠŠé’¥åŒ™å¯ä»¥çœ‹ä½œä¸€æ¡è¾¹ã€‚
- åˆå§‹çŠ¶æ€ä¸‹ä½ åœ¨ç¬¬ 0 ä¸ªæˆ¿é—´ï¼Œå¹¶æ‹¥æœ‰ä¸€äº›é’¥åŒ™ï¼Œç›®æ ‡æ˜¯æ£€æŸ¥æ˜¯å¦èƒ½è®¿é—®æ‰€æœ‰æˆ¿é—´ã€‚

### æ€è·¯ä¸€ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢ (DFS)

1. åˆå§‹åŒ–ä¸€ä¸ª `visited` æ•°ç»„ï¼Œç”¨æ¥è®°å½•æ˜¯å¦è®¿é—®è¿‡æŸä¸ªæˆ¿é—´ã€‚
2. ä»æˆ¿é—´ 0 å¼€å§‹ï¼Œé€’å½’åœ°éå†æ¯ä¸ªæˆ¿é—´ï¼Œå¹¶ä½¿ç”¨é’¥åŒ™è¿›å…¥å…¶ä»–æˆ¿é—´ã€‚
3. å¦‚æœæ‰€æœ‰æˆ¿é—´éƒ½è¢«è®¿é—®ï¼Œè¿”å› `true`ï¼›å¦åˆ™è¿”å› `false`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(V + E)`ï¼Œ`V` æ˜¯æˆ¿é—´æ•°ï¼ˆèŠ‚ç‚¹æ•°ï¼‰ï¼Œ`E` æ˜¯é’¥åŒ™æ•°ï¼ˆè¾¹æ•°ï¼‰ï¼Œæ¯ä¸ªæˆ¿é—´åªè®¿é—®ä¸€æ¬¡ï¼Œæ¯æ¡é’¥åŒ™åªå¤„ç†ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(V)`ï¼Œéœ€è¦é€’å½’æ ˆå­˜å‚¨å½“å‰è®¿é—®çš„æˆ¿é—´ã€‚

---

### æ€è·¯äºŒï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ (BFS)

1. ä½¿ç”¨é˜Ÿåˆ—æ¨¡æ‹Ÿä»æˆ¿é—´ 0 å¼€å§‹çš„è®¿é—®è¿‡ç¨‹ã€‚
2. éå†æ¯ä¸ªæˆ¿é—´æ—¶ï¼Œå°†æœªè®¿é—®è¿‡çš„æˆ¿é—´åŠ å…¥é˜Ÿåˆ—ã€‚
3. å¦‚æœéå†å®Œæ‰€æœ‰å¯ä»¥è®¿é—®çš„æˆ¿é—´åï¼Œæ‰€æœ‰æˆ¿é—´éƒ½æ ‡è®°ä¸ºå·²è®¿é—®ï¼Œåˆ™è¿”å› `true`ï¼›å¦åˆ™è¿”å› `false`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(V + E)`ï¼Œ`V` æ˜¯æˆ¿é—´æ•°ï¼ˆèŠ‚ç‚¹æ•°ï¼‰ï¼Œ`E` æ˜¯é’¥åŒ™æ•°ï¼ˆè¾¹æ•°ï¼‰ï¼Œæ¯ä¸ªæˆ¿é—´åªè®¿é—®ä¸€æ¬¡ï¼Œæ¯æ¡é’¥åŒ™åªå¤„ç†ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(V)`ï¼Œéœ€è¦é˜Ÿåˆ—å­˜å‚¨å¾…è®¿é—®çš„æˆ¿é—´ã€‚

## ä»£ç 

::: code-tabs
@tab DFS è§£æ³•

```javascript
/**
 * @param {number[][]} rooms
 * @return {boolean}
 */
var canVisitAllRooms = function (rooms) {
	let visited = new Array(rooms.length).fill(false); // è®°å½•è®¿é—®æƒ…å†µ
	let count = 0; // ç»Ÿè®¡å·²è®¿é—®çš„æˆ¿é—´æ•°

	const dfs = (room) => {
		visited[room] = true;
		count++;
		for (let key of rooms[room]) {
			if (!visited[key]) {
				dfs(key);
			}
		}
	};

	dfs(0); // ä»æˆ¿é—´ 0 å¼€å§‹æ·±åº¦ä¼˜å…ˆæœç´¢
	return count === rooms.length;
};
```

@tab BFS è§£æ³•

```javascript
/**
 * @param {number[][]} rooms
 * @return {boolean}
 */
var canVisitAllRooms = function (rooms) {
	let visited = new Array(rooms.length).fill(false); // è®°å½•è®¿é—®æƒ…å†µ
	let queue = [0]; // åˆå§‹åŒ–é˜Ÿåˆ—ï¼Œä»æˆ¿é—´ 0 å¼€å§‹
	visited[0] = true; // æ ‡è®°æˆ¿é—´ 0 å·²è®¿é—®
	let count = 1; // ç»Ÿè®¡å·²è®¿é—®çš„æˆ¿é—´æ•°

	while (queue.length > 0) {
		let room = queue.shift();
		for (let key of rooms[room]) {
			if (!visited[key]) {
				visited[key] = true;
				queue.push(key);
				count++;
			}
		}
	}

	return count === rooms.length;
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 261 | ä»¥å›¾åˆ¤æ ‘ ğŸ”’ |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å¹¶æŸ¥é›†`](/tag/union-find.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/graph-valid-tree) [ğŸ”—](https://leetcode.com/problems/graph-valid-tree) |