# [729. æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ I](https://leetcode.com/problems/my-calendar-i)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/tag/design.md) [`çº¿æ®µæ ‘`](/tag/segment-tree.md) [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`æœ‰åºé›†åˆ`](/tag/ordered-set.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/my-calendar-i)

## é¢˜ç›®

<p>å®ç°ä¸€ä¸ª <code>MyCalendar</code> ç±»æ¥å­˜æ”¾ä½ çš„æ—¥ç¨‹å®‰æ’ã€‚å¦‚æœè¦æ·»åŠ çš„æ—¥ç¨‹å®‰æ’ä¸ä¼šé€ æˆ <strong>é‡å¤é¢„è®¢</strong> ï¼Œåˆ™å¯ä»¥å­˜å‚¨è¿™ä¸ªæ–°çš„æ—¥ç¨‹å®‰æ’ã€‚</p>

<p>å½“ä¸¤ä¸ªæ—¥ç¨‹å®‰æ’æœ‰ä¸€äº›æ—¶é—´ä¸Šçš„äº¤å‰æ—¶ï¼ˆä¾‹å¦‚ä¸¤ä¸ªæ—¥ç¨‹å®‰æ’éƒ½åœ¨åŒä¸€æ—¶é—´å†…ï¼‰ï¼Œå°±ä¼šäº§ç”Ÿ <strong>é‡å¤é¢„è®¢</strong> ã€‚</p>

<p>æ—¥ç¨‹å¯ä»¥ç”¨ä¸€å¯¹æ•´æ•° <code>start</code> å’Œ <code>end</code> è¡¨ç¤ºï¼Œè¿™é‡Œçš„æ—¶é—´æ˜¯åŠå¼€åŒºé—´ï¼Œå³ <code>[start, end)</code>, å®æ•°&nbsp;<code>x</code> çš„èŒƒå›´ä¸ºï¼Œ &nbsp;<code>start &lt;= x &lt; end</code> ã€‚</p>

<p>å®ç° <code>MyCalendar</code> ç±»ï¼š</p>

<ul>
	<li><code>MyCalendar()</code> åˆå§‹åŒ–æ—¥å†å¯¹è±¡ã€‚</li>
	<li><code>boolean book(int start, int end)</code> å¦‚æœå¯ä»¥å°†æ—¥ç¨‹å®‰æ’æˆåŠŸæ·»åŠ åˆ°æ—¥å†ä¸­è€Œä¸ä¼šå¯¼è‡´é‡å¤é¢„è®¢ï¼Œè¿”å› <code>true</code> ã€‚å¦åˆ™ï¼Œè¿”å› <code>false</code>&nbsp;å¹¶ä¸”ä¸è¦å°†è¯¥æ—¥ç¨‹å®‰æ’æ·»åŠ åˆ°æ—¥å†ä¸­ã€‚</li>
</ul>

<p>&nbsp;</p>

<p><strong class="example">ç¤ºä¾‹ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>
["MyCalendar", "book", "book", "book"]
[[], [10, 20], [15, 25], [20, 30]]
<strong>è¾“å‡ºï¼š</strong>
[null, true, false, true]

<strong>è§£é‡Šï¼š</strong>
MyCalendar myCalendar = new MyCalendar();
myCalendar.book(10, 20); // return True
myCalendar.book(15, 25); // return False ï¼Œè¿™ä¸ªæ—¥ç¨‹å®‰æ’ä¸èƒ½æ·»åŠ åˆ°æ—¥å†ä¸­ï¼Œå› ä¸ºæ—¶é—´ 15 å·²ç»è¢«å¦ä¸€ä¸ªæ—¥ç¨‹å®‰æ’é¢„è®¢äº†ã€‚
myCalendar.book(20, 30); // return True ï¼Œè¿™ä¸ªæ—¥ç¨‹å®‰æ’å¯ä»¥æ·»åŠ åˆ°æ—¥å†ä¸­ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæ—¥ç¨‹å®‰æ’é¢„è®¢çš„æ¯ä¸ªæ—¶é—´éƒ½å°äº 20 ï¼Œä¸”ä¸åŒ…å«æ—¶é—´ 20 ã€‚</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>0 &lt;= start &lt; end &lt;= 10<sup>9</sup></code></li>
	<li>æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè°ƒç”¨ <code>book</code> æ–¹æ³•çš„æ¬¡æ•°æœ€å¤šä¸è¶…è¿‡ <code>1000</code> æ¬¡ã€‚</li>
</ul>


## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šéå†

- éå†å·²æ·»åŠ çš„æ—¥å†ï¼Œé€ä¸€åˆ¤æ–­æ–°çš„æ—¥ç¨‹å®‰æ’ `[start, end)` å’Œå·²æœ‰çš„æ—¥ç¨‹å®‰æ’ `[s, e)` æ˜¯å¦é‡å¤
- å½“ `start < e && end > s` æ—¶ï¼Œä»£è¡¨ä¸¤ä¸ªåŒºé—´é‡å¤äº†ï¼›
- ä¸€æ—¦å‘ç°é‡å¤ï¼Œåˆ™è¿”å› `false`ï¼›
- å…¨éƒ¨éå†å®Œéƒ½æ²¡æœ‰é‡å¤ï¼Œåˆ™å°†æ–°æ—¥ç¨‹åŠ å…¥åˆ°æ—¥ç¨‹æ•°ç»„ä¸­ï¼Œå¹¶è¿”å› `true`ï¼›

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å·²é¢„å®šçš„æ—¶é—´æ®µæ•°é‡ã€‚æ¯æ¬¡è°ƒç”¨ `book` æ–¹æ³•æ—¶ï¼Œéƒ½éœ€è¦éå†æ•´ä¸ª `calendar` æ•°ç»„ä»¥æ£€æŸ¥æ˜¯å¦æœ‰é‡å æ—¶é—´æ®µã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š` O(n)``ï¼Œæ•°ç»„  `calendar`å­˜å‚¨`n` ä¸ªé¢„å®šçš„æ—¶é—´æ®µã€‚

---

### æ€è·¯äºŒï¼šäºŒåˆ†æŸ¥æ‰¾

å¦‚æœæ¯æ¬¡æ·»åŠ æ–°çš„æ—¥ç¨‹ `[start, end)` æ—¶ï¼ŒæŒ‰ç…§ `start` çš„å¤§å°é¡ºåºæ’å…¥ï¼ŒæŸ¥æ‰¾çš„æ—¶å€™å°±å¯ä»¥ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œå°†æ—¶é—´å¤æ‚åº¦é™ä½åˆ° `O(log n)`ã€‚

æ›´æ–°äºŒåˆ†æŸ¥æ‰¾èŒƒå›´çš„æ—¶å€™è¦æ³¨æ„ï¼Œå¯¹äºå·²æœ‰çš„æ—¥ç¨‹å®‰æ’ `[s, e)`ï¼Œè¦æ ¹æ® `e` å’Œ `start`çš„å…³ç³»æ¥åˆ¤æ–­æŸ¥æ‰¾èŒƒå›´ï¼š

- è‹¥ `e < start`ï¼Œåˆ™ä¸¤ä¸ªæ—¥ç¨‹æ— äº¤é›†ï¼Œå¯ä»¥ç›´æ¥ç¼©å°èŒƒå›´ï¼›
  - å¦‚æœæ–°æ—¶é—´æ®µçš„ `start` å¤§äºç­‰äºå½“å‰æ¯”è¾ƒæ—¶é—´æ®µçš„ `end`ï¼Œæ›´æ–° `left` æŒ‡é’ˆï¼›
  - å¦‚æœæ–°æ—¶é—´æ®µçš„ `end` å°äºå½“å‰æ¯”è¾ƒæ—¶é—´æ®µçš„ `start`ï¼Œæ›´æ–° `right` æŒ‡é’ˆï¼›
- è‹¥ `e > start`ï¼Œåˆ™ä¸¤ä¸ªæ—¥ç¨‹æœ‰é‡åˆçš„å¯èƒ½ï¼Œè¿”å› `false`ï¼›

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(log n)`ï¼Œå…¶ä¸­ `n` æ˜¯å·²é¢„å®šçš„æ—¶é—´æ®µæ•°é‡ã€‚ç”±äºæ—¶é—´æ®µæŒ‰é¡ºåºæ’å…¥ï¼Œå› æ­¤å¯ä»¥å¯¹ `calendar` è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾å¹¶æ’å…¥æ–°æ—¶é—´æ®µçš„æ—¶é—´å¤æ‚åº¦ä¸º `O(log n)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š` O(n)``ï¼Œæ•°ç»„  `calendar`å­˜å‚¨`n` ä¸ªé¢„å®šçš„æ—¶é—´æ®µã€‚

## ä»£ç 

::: code-tabs

@tab éå†

```javascript
var MyCalendar = function () {
	this.calendar = [];
};

/**
 * @param {number} start
 * @param {number} end
 * @return {boolean}
 */
MyCalendar.prototype.book = function (start, end) {
	for (let [s, e] of this.calendar) {
		if (start < e && end > s) return false;
	}
	this.calendar.push([start, end]);
	return true;
};

/**
 * Your MyCalendar object will be instantiated and called as such:
 * var obj = new MyCalendar()
 * var param_1 = obj.book(start,end)
 */
```

@tab äºŒåˆ†æŸ¥æ‰¾

```javascript
var MyCalendar = function () {
	this.calendar = [];
};

/**
 * @param {number} start
 * @param {number} end
 * @return {boolean}
 */
MyCalendar.prototype.book = function (start, end) {
	let left = 0,
		right = this.calendar.length - 1;

	// äºŒåˆ†æŸ¥æ‰¾
	while (left <= right) {
		let mid = ((left + right) / 2) | 0;
		const [s, e] = this.calendar[mid];

		// æ—¶é—´é‡åˆï¼Œç›´æ¥è¿”å› false
		if (start < e && end > s) return false;

		// æ›´æ–°äºŒåˆ†æŸ¥æ‰¾èŒƒå›´
		if (start >= e) {
			left = mid + 1;
		} else {
			right = mid - 1;
		}
	}
	this.calendar.splice(left, 0, [start, end]);
	return true;
};

/**
 * Your MyCalendar object will be instantiated and called as such:
 * var obj = new MyCalendar()
 * var param_1 = obj.book(start,end)
 */
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 731 | [æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ II](https://leetcode.com/problems/my-calendar-ii) | [[âœ“]](/problem/0731.md) |  [`è®¾è®¡`](/tag/design.md) [`çº¿æ®µæ ‘`](/tag/segment-tree.md) [`æ•°ç»„`](/tag/array.md) `3+` | <font color=#ffb800>Medium</font> |
| 732 | [æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ III](https://leetcode.com/problems/my-calendar-iii) |  |  [`è®¾è®¡`](/tag/design.md) [`çº¿æ®µæ ‘`](/tag/segment-tree.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) `2+` | <font color=#ff334b>Hard</font> |
| 2446 | [åˆ¤æ–­ä¸¤ä¸ªäº‹ä»¶æ˜¯å¦å­˜åœ¨å†²çª](https://leetcode.com/problems/determine-if-two-events-have-conflict) |  |  [`æ•°ç»„`](/tag/array.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | <font color=#15bd66>Easy</font> |