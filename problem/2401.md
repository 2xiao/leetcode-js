---
title: 2401. æœ€é•¿ä¼˜é›…å­æ•°ç»„
description: LeetCode 2401. æœ€é•¿ä¼˜é›…å­æ•°ç»„é¢˜è§£ï¼ŒLongest Nice Subarrayï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2401. æœ€é•¿ä¼˜é›…å­æ•°ç»„
  - æœ€é•¿ä¼˜é›…å­æ•°ç»„
  - Longest Nice Subarray
  - è§£é¢˜æ€è·¯
  - ä½è¿ç®—
  - æ•°ç»„
  - æ»‘åŠ¨çª—å£
---

# 2401. æœ€é•¿ä¼˜é›…å­æ•°ç»„

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/longest-nice-subarray) [`LeetCode`](https://leetcode.com/problems/longest-nice-subarray)

## é¢˜ç›®

You are given an array `nums` consisting of **positive** integers.

We call a subarray of `nums` **nice** if the bitwise **AND** of every pair of
elements that are in **different** positions in the subarray is equal to `0`.

Return _the length of the**longest** nice subarray_.

A **subarray** is a **contiguous** part of an array.

**Note** that subarrays of length `1` are always considered nice.

**Example 1:**

> Input: nums = [1,3,8,48,10]
>
> Output: 3
>
> Explanation: The longest nice subarray is [3,8,48]. This subarray satisfies the conditions:
>
> - 3 AND 8 = 0.
> - 3 AND 48 = 0.
> - 8 AND 48 = 0.
>
> It can be proven that no longer nice subarray can be obtained, so we return 3.

**Example 2:**

> Input: nums = [3,1,5,11,13]
>
> Output: 1
>
> Explanation: The length of the longest nice subarray is 1. Any subarray of length 1 can be chosen.

**Constraints:**

- `1 <= nums.length <= 10^5`
- `1 <= nums[i] <= 10^9`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªç”± **æ­£** æ•´æ•°ç»„æˆçš„æ•°ç»„ `nums` ã€‚

å¦‚æœ `nums` çš„å­æ•°ç»„ä¸­ä½äº **ä¸åŒ** ä½ç½®çš„æ¯å¯¹å…ƒç´ æŒ‰ä½ **ä¸ï¼ˆANDï¼‰** è¿ç®—çš„ç»“æœç­‰äº `0` ï¼Œåˆ™ç§°è¯¥å­æ•°ç»„ä¸º **ä¼˜é›…** å­æ•°ç»„ã€‚

è¿”å› **æœ€é•¿** çš„ä¼˜é›…å­æ•°ç»„çš„é•¿åº¦ã€‚

**å­æ•°ç»„** æ˜¯æ•°ç»„ä¸­çš„ä¸€ä¸ª **è¿ç»­** éƒ¨åˆ†ã€‚

**æ³¨æ„ï¼š** é•¿åº¦ä¸º `1` çš„å­æ•°ç»„å§‹ç»ˆè§†ä½œä¼˜é›…å­æ•°ç»„ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** nums = [1,3,8,48,10]
>
> **è¾“å‡ºï¼š** 3
>
> **è§£é‡Šï¼š** æœ€é•¿çš„ä¼˜é›…å­æ•°ç»„æ˜¯ [3,8,48] ã€‚å­æ•°ç»„æ»¡è¶³é¢˜ç›®æ¡ä»¶ï¼š
>
> - 3 AND 8 = 0
> - 3 AND 48 = 0
> - 8 AND 48 = 0
>
> å¯ä»¥è¯æ˜ä¸å­˜åœ¨æ›´é•¿çš„ä¼˜é›…å­æ•°ç»„ï¼Œæ‰€ä»¥è¿”å› 3 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** nums = [3,1,5,11,13]
>
> **è¾“å‡ºï¼š** 1
>
> **è§£é‡Šï¼š** æœ€é•¿çš„ä¼˜é›…å­æ•°ç»„é•¿åº¦ä¸º 1 ï¼Œä»»ä½•é•¿åº¦ä¸º 1 çš„å­æ•°ç»„éƒ½æ»¡è¶³é¢˜ç›®æ¡ä»¶ã€‚

**æç¤ºï¼š**

- `1 <= nums.length <= 10^5`
- `1 <= nums[i] <= 10^9`

## è§£é¢˜æ€è·¯

å¯ä»¥ä½¿ç”¨ **æ»‘åŠ¨çª—å£** æ–¹æ³•ç»´æŠ¤ä¸€ä¸ªåˆæ³•çš„å­æ•°ç»„ï¼Œå¹¶ä½¿ç”¨**æŒ‰ä½è¿ç®—**æ¥å¿«é€Ÿæ£€æŸ¥æ˜¯å¦åˆæ³•ã€‚

1. **ä½¿ç”¨ `mask` è®°å½•çª—å£å†…æ‰€æœ‰å…ƒç´ çš„æŒ‰ä½ OR ç»“æœ**ï¼š

   - `mask |= nums[r]` è¡¨ç¤ºæŠŠ `nums[r]` åŠ å…¥çª—å£ï¼Œæ›´æ–° `mask`ã€‚

2. **å¦‚æœ `nums[r] & mask != 0`ï¼Œè¯´æ˜æ–°åŠ å…¥çš„ `nums[r]` äº§ç”Ÿäº†å†²çª**ï¼š

   - é€šè¿‡ `mask ^= nums[l]` ç§»é™¤ `nums[l]`ï¼Œç„¶å `l++` ç›´åˆ°çª—å£åˆæ³•ã€‚

3. **æ›´æ–°æœ€å¤§é•¿åº¦**ï¼š
   - `maxLen = max(maxLen, r - l + 1)`

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šè¢«åŠ å…¥å’Œç§»é™¤çª—å£ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªä½¿ç”¨äº† `mask, l, maxLen` è¿™äº›å˜é‡ï¼Œä¸ä¾èµ–é¢å¤–çš„æ•°æ®ç»“æ„ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @return {number}
 */
var longestNiceSubarray = function (nums) {
	let mask = 0;
	let l = 0;
	let maxLen = 0;

	for (let r = 0; r < nums.length; r++) {
		// å½“ nums[r] & mask != 0 æ—¶ï¼Œè¯´æ˜æœ‰é‡å çš„ 1ï¼Œéœ€è¦ç¼©å°çª—å£
		while ((nums[r] & mask) !== 0) {
			mask ^= nums[l]; // ç§»é™¤å·¦ä¾§å…ƒç´ 
			l++;
		}
		mask |= nums[r]; // åŠ å…¥æ–°å…ƒç´ 

		maxLen = Math.max(r - l + 1, maxLen);
	}

	return maxLen;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 3 | æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² | [[âœ“]](/problem/0003.md) |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/longest-substring-without-repeating-characters) [ğŸ”—](https://leetcode.com/problems/longest-substring-without-repeating-characters) |
| 201 | æ•°å­—èŒƒå›´æŒ‰ä½ä¸ | [[âœ“]](/problem/0201.md) |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/bitwise-and-of-numbers-range) [ğŸ”—](https://leetcode.com/problems/bitwise-and-of-numbers-range) |
| 898 | å­æ•°ç»„æŒ‰ä½æˆ–æ“ä½œ |  |  [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/bitwise-ors-of-subarrays) [ğŸ”—](https://leetcode.com/problems/bitwise-ors-of-subarrays) |
| 904 | æ°´æœæˆç¯® |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/fruit-into-baskets) [ğŸ”—](https://leetcode.com/problems/fruit-into-baskets) |
| 1004 | æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III | [[âœ“]](/problem/1004.md) |  [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/max-consecutive-ones-iii) [ğŸ”—](https://leetcode.com/problems/max-consecutive-ones-iii) |
| 1208 | å°½å¯èƒ½ä½¿å­—ç¬¦ä¸²ç›¸ç­‰ |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/get-equal-substrings-within-budget) [ğŸ”—](https://leetcode.com/problems/get-equal-substrings-within-budget) |
| 1838 | æœ€é«˜é¢‘å…ƒç´ çš„é¢‘æ•° |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) `3+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/frequency-of-the-most-frequent-element) [ğŸ”—](https://leetcode.com/problems/frequency-of-the-most-frequent-element) |
| 1839 | æ‰€æœ‰å…ƒéŸ³æŒ‰é¡ºåºæ’å¸ƒçš„æœ€é•¿å­å­—ç¬¦ä¸² |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/longest-substring-of-all-vowels-in-order) [ğŸ”—](https://leetcode.com/problems/longest-substring-of-all-vowels-in-order) |
| 2024 | è€ƒè¯•çš„æœ€å¤§å›°æ‰°åº¦ |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/maximize-the-confusion-of-an-exam) [ğŸ”—](https://leetcode.com/problems/maximize-the-confusion-of-an-exam) |
| 2461 | é•¿åº¦ä¸º K å­æ•°ç»„ä¸­çš„æœ€å¤§å’Œ | [[âœ“]](/problem/2461.md) |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-sum-of-distinct-subarrays-with-length-k) [ğŸ”—](https://leetcode.com/problems/maximum-sum-of-distinct-subarrays-with-length-k) |