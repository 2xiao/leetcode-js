---
title: 495. æè«æ”»å‡»
description: LeetCode 495. æè«æ”»å‡»é¢˜è§£ï¼ŒTeemo Attackingï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 495. æè«æ”»å‡»
  - æè«æ”»å‡»
  - Teemo Attacking
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - æ¨¡æ‹Ÿ
---

# 495. æè«æ”»å‡»

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/teemo-attacking) [`LeetCode`](https://leetcode.com/problems/teemo-attacking)

## é¢˜ç›®

Our hero Teemo is attacking an enemy Ashe with poison attacks! When Teemo
attacks Ashe, Ashe gets poisoned for a exactly `duration` seconds. More
formally, an attack at second `t` will mean Ashe is poisoned during the
**inclusive** time interval `[t, t + duration - 1]`. If Teemo attacks again
**before** the poison effect ends, the timer for it is **reset** , and the
poison effect will end `duration` seconds after the new attack.

You are given a **non-decreasing** integer array `timeSeries`, where
`timeSeries[i]` denotes that Teemo attacks Ashe at second `timeSeries[i]`, and
an integer `duration`.

Return _the**total** number of seconds that Ashe is poisoned_.

**Example 1:**

> Input: timeSeries = [1,4], duration = 2
>
> Output: 4
>
> Explanation: Teemo's attacks on Ashe go as follows:
>
> - At second 1, Teemo attacks, and Ashe is poisoned for seconds 1 and 2.
> - At second 4, Teemo attacks, and Ashe is poisoned for seconds 4 and 5.
>
> Ashe is poisoned for seconds 1, 2, 4, and 5, which is 4 seconds in total.

**Example 2:**

> Input: timeSeries = [1,2], duration = 2
>
> Output: 3
>
> Explanation: Teemo's attacks on Ashe go as follows:
>
> - At second 1, Teemo attacks, and Ashe is poisoned for seconds 1 and 2.
> - At second 2 however, Teemo attacks again and resets the poison timer. Ashe is poisoned for seconds 2 and 3.
>
> Ashe is poisoned for seconds 1, 2, and 3, which is 3 seconds in total.

**Constraints:**

- `1 <= timeSeries.length <= 10^4`
- `0 <= timeSeries[i], duration <= 10^7`
- `timeSeries` is sorted in **non-decreasing** order.

## é¢˜ç›®å¤§æ„

åœ¨ã€Šè‹±é›„è”ç›Ÿã€‹çš„ä¸–ç•Œä¸­ï¼Œæœ‰ä¸€ä¸ªå« â€œæè«â€ çš„è‹±é›„ã€‚ä»–çš„æ”»å‡»å¯ä»¥è®©æ•Œæ–¹è‹±é›„è‰¾å¸Œï¼ˆç¼–è€…æ³¨ï¼šå¯’å†°å°„æ‰‹ï¼‰è¿›å…¥ä¸­æ¯’çŠ¶æ€ã€‚

å½“æè«æ”»å‡»è‰¾å¸Œï¼Œè‰¾å¸Œçš„ä¸­æ¯’çŠ¶æ€æ­£å¥½æŒç»­ `duration` ç§’ã€‚

æ­£å¼åœ°è®²ï¼Œæè«åœ¨ `t` å‘èµ·æ”»å‡»æ„å‘³ç€è‰¾å¸Œåœ¨æ—¶é—´åŒºé—´ `[t, t + duration - 1]`ï¼ˆå« `t` å’Œ `t + duration -
1`ï¼‰å¤„äºä¸­æ¯’çŠ¶æ€ã€‚å¦‚æœæè«åœ¨ä¸­æ¯’å½±å“ç»“æŸ **å‰** å†æ¬¡æ”»å‡»ï¼Œä¸­æ¯’çŠ¶æ€è®¡æ—¶å™¨å°†ä¼š **é‡ç½®** ï¼Œåœ¨æ–°çš„æ”»å‡»ä¹‹åï¼Œä¸­æ¯’å½±å“å°†ä¼šåœ¨ `duration`
ç§’åç»“æŸã€‚

ç»™ä½ ä¸€ä¸ª **éé€’å‡** çš„æ•´æ•°æ•°ç»„ `timeSeries` ï¼Œå…¶ä¸­ `timeSeries[i]` è¡¨ç¤ºæè«åœ¨ `timeSeries[i]`
ç§’æ—¶å¯¹è‰¾å¸Œå‘èµ·æ”»å‡»ï¼Œä»¥åŠä¸€ä¸ªè¡¨ç¤ºä¸­æ¯’æŒç»­æ—¶é—´çš„æ•´æ•° `duration` ã€‚

è¿”å›è‰¾å¸Œå¤„äºä¸­æ¯’çŠ¶æ€çš„ **æ€»** ç§’æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** timeSeries = [1,4], duration = 2
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** æè«æ”»å‡»å¯¹è‰¾å¸Œçš„å½±å“å¦‚ä¸‹ï¼š
>
> - ç¬¬ 1 ç§’ï¼Œæè«æ”»å‡»è‰¾å¸Œå¹¶ä½¿å…¶ç«‹å³ä¸­æ¯’ã€‚ä¸­æ¯’çŠ¶æ€ä¼šç»´æŒ 2 ç§’ï¼Œå³ç¬¬ 1 ç§’å’Œç¬¬ 2 ç§’ã€‚
> - ç¬¬ 4 ç§’ï¼Œæè«å†æ¬¡æ”»å‡»è‰¾å¸Œï¼Œè‰¾å¸Œä¸­æ¯’çŠ¶æ€åˆæŒç»­ 2 ç§’ï¼Œå³ç¬¬ 4 ç§’å’Œç¬¬ 5 ç§’ã€‚
>
> è‰¾å¸Œåœ¨ç¬¬ 1ã€2ã€4ã€5 ç§’å¤„äºä¸­æ¯’çŠ¶æ€ï¼Œæ‰€ä»¥æ€»ä¸­æ¯’ç§’æ•°æ˜¯ 4 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** timeSeries = [1,2], duration = 2
>
> **è¾“å‡ºï¼š** 3
>
> **è§£é‡Šï¼š** æè«æ”»å‡»å¯¹è‰¾å¸Œçš„å½±å“å¦‚ä¸‹ï¼š
>
> - ç¬¬ 1 ç§’ï¼Œæè«æ”»å‡»è‰¾å¸Œå¹¶ä½¿å…¶ç«‹å³ä¸­æ¯’ã€‚ä¸­æ¯’çŠ¶æ€ä¼šç»´æŒ 2 ç§’ï¼Œå³ç¬¬ 1 ç§’å’Œç¬¬ 2 ç§’ã€‚
> - ç¬¬ 2 ç§’ï¼Œæè«å†æ¬¡æ”»å‡»è‰¾å¸Œï¼Œå¹¶é‡ç½®ä¸­æ¯’è®¡æ—¶å™¨ï¼Œè‰¾å¸Œä¸­æ¯’çŠ¶æ€éœ€è¦æŒç»­ 2 ç§’ï¼Œå³ç¬¬ 2 ç§’å’Œç¬¬ 3 ç§’ã€‚
>
> è‰¾å¸Œåœ¨ç¬¬ 1ã€2ã€3 ç§’å¤„äºä¸­æ¯’çŠ¶æ€ï¼Œæ‰€ä»¥æ€»ä¸­æ¯’ç§’æ•°æ˜¯ 3 ã€‚

**æç¤ºï¼š**

- `1 <= timeSeries.length <= 10^4`
- `0 <= timeSeries[i], duration <= 10^7`
- `timeSeries` æŒ‰ **éé€’å‡** é¡ºåºæ’åˆ—

## è§£é¢˜æ€è·¯

1. **ç»´æŠ¤å˜é‡**ï¼š

   - ä½¿ç”¨ä¸€ä¸ªå˜é‡ `total` æ¥ç´¯åŠ ä¸­æ¯’çš„æ€»æ—¶é—´ã€‚
   - ä½¿ç”¨å˜é‡ `end` æ¥è¡¨ç¤ºä¸Šä¸€æ¬¡ä¸­æ¯’çš„ç»“æŸæ—¶é—´ã€‚

2. **ç†è§£æ—¶é—´é‡å **ï¼š

   - å¦‚æœæŸæ¬¡æ”»å‡»çš„æ—¶é—´ `timeSeries[i]` ä¸ä¸Šä¸€æ¬¡æ”»å‡»çš„ç»“æŸæ—¶é—´ `end` é‡å ï¼Œå³ `timeSeries[i] < end`ï¼Œé‚£ä¹ˆå®é™…çš„ä¸­æ¯’æ—¶é—´è¦æ‰£é™¤é‡å éƒ¨åˆ†ã€‚
   - å¦‚æœä¸é‡å ï¼Œåˆ™æ­£å¸¸åŠ ä¸Š `duration`ã€‚

3. **éå†æ”»å‡»æ—¶é—´æ•°ç»„**ï¼š

   - å¯¹äºæ¯ä¸ªæ”»å‡»æ—¶é—´ `time`ï¼š
     - é¦–å…ˆå‡è®¾ä¸­æ¯’æŒç»­æ—¶é—´æ˜¯ `duration`ï¼Œç´¯åŠ åˆ° `total`ã€‚
     - å¦‚æœå½“å‰æ”»å‡»æ—¶é—´ `time` å°äº `end`ï¼Œè¯´æ˜å­˜åœ¨é‡å éƒ¨åˆ†ï¼Œéœ€è¦ä» `total` ä¸­å‡å»é‡å çš„æ—¶é—´ `(end - time)`ã€‚
     - æ›´æ–°å½“å‰ä¸­æ¯’çš„ç»“æŸæ—¶é—´ `end = time + duration`ã€‚

4. **è¿”å›ç»“æœ**ï¼š
   - éå†å®Œæ‰€æœ‰æ”»å‡»æ—¶é—´åï¼Œè¿”å›æ€»çš„ä¸­æ¯’æ—¶é—´ `total`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ”»å‡»æ¬¡æ•°çš„æ•°é‡ï¼Œéœ€è¦éå† `timeSeries` æ•°ç»„ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä½¿ç”¨äº†å¸¸æ•°ä¸ªå˜é‡ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} timeSeries
 * @param {number} duration
 * @return {number}
 */
var findPoisonedDuration = function (timeSeries, duration) {
	let total = 0; // æ€»ä¸­æ¯’æ—¶é—´
	let end = 0; // ä¸Šä¸€æ¬¡ä¸­æ¯’çš„ç»“æŸæ—¶é—´

	for (let time of timeSeries) {
		total += duration; // å‡è®¾å½“å‰æ”»å‡»å®Œå…¨è´¡çŒ®æŒç»­æ—¶é—´
		if (time < end) {
			// å¦‚æœå½“å‰æ”»å‡»ä¸ä¸Šä¸€æ¬¡ä¸­æ¯’æ—¶é—´é‡å 
			total -= end - time; // å‡å»é‡å çš„æ—¶é—´
		}
		end = time + duration; // æ›´æ–°ç»“æŸæ—¶é—´
	}

	return total;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 56 | åˆå¹¶åŒºé—´ | [[âœ“]](/problem/0056.md) |  [`æ•°ç»„`](/tag/array.md) [`æ’åº`](/tag/sorting.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/merge-intervals) [ğŸ”—](https://leetcode.com/problems/merge-intervals) |
| 605 | ç§èŠ±é—®é¢˜ | [[âœ“]](/problem/0605.md) |  [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/can-place-flowers) [ğŸ”—](https://leetcode.com/problems/can-place-flowers) |
| 649 | Dota2 å‚è®®é™¢ | [[âœ“]](/problem/0649.md) |  [`è´ªå¿ƒ`](/tag/greedy.md) [`é˜Ÿåˆ—`](/tag/queue.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/dota2-senate) [ğŸ”—](https://leetcode.com/problems/dota2-senate) |