---
title: 1233. åˆ é™¤å­æ–‡ä»¶å¤¹
description: LeetCode 1233. åˆ é™¤å­æ–‡ä»¶å¤¹é¢˜è§£ï¼ŒRemove Sub-Folders from the Filesystemï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1233. åˆ é™¤å­æ–‡ä»¶å¤¹
  - åˆ é™¤å­æ–‡ä»¶å¤¹
  - Remove Sub-Folders from the Filesystem
  - è§£é¢˜æ€è·¯
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - å­—å…¸æ ‘
  - æ•°ç»„
  - å­—ç¬¦ä¸²
---

# 1233. åˆ é™¤å­æ–‡ä»¶å¤¹

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/remove-sub-folders-from-the-filesystem) [`LeetCode`](https://leetcode.com/problems/remove-sub-folders-from-the-filesystem)

## é¢˜ç›®

Given a list of folders `folder`, return _the folders after removing all**sub-
folders** in those folders_. You may return the answer in **any order**.

If a `folder[i]` is located within another `folder[j]`, it is called a **sub-
folder** of it. A sub-folder of `folder[j]` must start with `folder[j]`,
followed by a `"/"`. For example, `"/a/b"` is a sub-folder of `"/a"`, but
`"/b"` is not a sub-folder of `"/a/b/c"`.

The format of a path is one or more concatenated strings of the form: `'/'`
followed by one or more lowercase English letters.

- For example, `"/leetcode"` and `"/leetcode/problems"` are valid paths while an empty string and `"/"` are not.

**Example 1:**

> Input: folder = ["/a","/a/b","/c/d","/c/d/e","/c/f"]
>
> Output: ["/a","/c/d","/c/f"]
>
> Explanation: Folders "/a/b" is a subfolder of "/a" and "/c/d/e" is inside of folder "/c/d" in our filesystem.

**Example 2:**

> Input: folder = ["/a","/a/b/c","/a/b/d"]
>
> Output: ["/a"]
>
> Explanation: Folders "/a/b/c" and "/a/b/d" will be removed because they are subfolders of "/a".

**Example 3:**

> Input: folder = ["/a/b/c","/a/b/ca","/a/b/d"]
>
> Output: ["/a/b/c","/a/b/ca","/a/b/d"]

**Constraints:**

- `1 <= folder.length <= 4 * 10^4`
- `2 <= folder[i].length <= 100`
- `folder[i]` contains only lowercase letters and `'/'`.
- `folder[i]` always starts with the character `'/'`.
- Each folder name is **unique**.

## é¢˜ç›®å¤§æ„

ä½ æ˜¯ä¸€ä½ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‰‹é‡Œæœ‰ä¸€ä»½æ–‡ä»¶å¤¹åˆ—è¡¨ `folder`ï¼Œä½ çš„ä»»åŠ¡æ˜¯è¦åˆ é™¤è¯¥åˆ—è¡¨ä¸­çš„æ‰€æœ‰ **å­æ–‡ä»¶å¤¹** ï¼Œå¹¶ä»¥ **ä»»æ„é¡ºåº** è¿”å›å‰©ä¸‹çš„æ–‡ä»¶å¤¹ã€‚

å¦‚æœæ–‡ä»¶å¤¹ `folder[i]` ä½äºå¦ä¸€ä¸ªæ–‡ä»¶å¤¹ `folder[j]` ä¸‹ï¼Œé‚£ä¹ˆ `folder[i]` å°±æ˜¯ `folder[j]` çš„
**å­æ–‡ä»¶å¤¹** ã€‚`folder[j]` çš„å­æ–‡ä»¶å¤¹å¿…é¡»ä»¥ `folder[j]` å¼€å¤´ï¼Œåè·Ÿä¸€ä¸ª `"/"`ã€‚ä¾‹å¦‚ï¼Œ`"/a/b"` æ˜¯ `"/a"`
çš„ä¸€ä¸ªå­æ–‡ä»¶å¤¹ï¼Œä½† `"/b"` ä¸æ˜¯ `"/a/b/c"` çš„ä¸€ä¸ªå­æ–‡ä»¶å¤¹ã€‚

æ–‡ä»¶å¤¹çš„ã€Œè·¯å¾„ã€æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‰ä»¥ä¸‹æ ¼å¼ä¸²è”å½¢æˆçš„å­—ç¬¦ä¸²ï¼š'/' åè·Ÿä¸€ä¸ªæˆ–è€…å¤šä¸ªå°å†™è‹±æ–‡å­—æ¯ã€‚

- ä¾‹å¦‚ï¼Œ`"/leetcode"` å’Œ `"/leetcode/problems"` éƒ½æ˜¯æœ‰æ•ˆçš„è·¯å¾„ï¼Œè€Œç©ºå­—ç¬¦ä¸²å’Œ `"/"` ä¸æ˜¯ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** folder = ["/a","/a/b","/c/d","/c/d/e","/c/f"]
>
> **è¾“å‡ºï¼š**["/a","/c/d","/c/f"]
>
> **è§£é‡Šï¼š** "/a/b" æ˜¯ "/a" çš„å­æ–‡ä»¶å¤¹ï¼Œè€Œ "/c/d/e" æ˜¯ "/c/d" çš„å­æ–‡ä»¶å¤¹ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** folder = ["/a","/a/b/c","/a/b/d"]
>
> **è¾“å‡ºï¼š**["/a"]
>
> **è§£é‡Šï¼š** æ–‡ä»¶å¤¹ "/a/b/c" å’Œ "/a/b/d" éƒ½ä¼šè¢«åˆ é™¤ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯ "/a" çš„å­æ–‡ä»¶å¤¹ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥:** folder = ["/a/b/c","/a/b/ca","/a/b/d"]
>
> **è¾“å‡º:** ["/a/b/c","/a/b/ca","/a/b/d"]

**æç¤ºï¼š**

- `1 <= folder.length <= 4 * 10^4`
- `2 <= folder[i].length <= 100`
- `folder[i]` åªåŒ…å«å°å†™å­—æ¯å’Œ `'/'`
- `folder[i]` æ€»æ˜¯ä»¥å­—ç¬¦ `'/'` èµ·å§‹
- `folder` æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ **å”¯ä¸€** çš„

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šå‰ç¼€æ ‘

å¯ä»¥åˆ©ç”¨ã€Œå‰ç¼€æ ‘ï¼ˆTrieï¼‰ã€çš„æ•°æ®ç»“æ„æ¥é«˜æ•ˆåœ°è¯†åˆ«å’Œå»é™¤å­æ–‡ä»¶å¤¹ï¼Œé€šè¿‡å‰ç¼€æ ‘æ¥æ„å»ºæ–‡ä»¶å¤¹ç»“æ„ï¼Œç„¶åæ ¹æ®æ„å»ºçš„æ ‘æ¥è¾“å‡ºæ²¡æœ‰å­æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚

1. **æ„å»ºå‰ç¼€æ ‘**ï¼šéå†æ–‡ä»¶å¤¹åˆ—è¡¨ `folder`ï¼Œå°†æ¯ä¸ªè·¯å¾„æ’å…¥å‰ç¼€æ ‘ã€‚è‹¥å‘ç°ä¸€ä¸ªè·¯å¾„çš„çˆ¶èŠ‚ç‚¹å·²ç»è¢«æ ‡è®°ä¸ºå¶å­èŠ‚ç‚¹ï¼Œåˆ™è·³è¿‡è¯¥è·¯å¾„ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå­æ–‡ä»¶å¤¹ã€‚
2. **æ ‡è®°å¶å­èŠ‚ç‚¹**ï¼šåœ¨æ’å…¥æ¯ä¸ªæ–‡ä»¶å¤¹è·¯å¾„æ—¶ï¼Œå¦‚æœæŸè·¯å¾„æˆä¸ºå¶å­èŠ‚ç‚¹ï¼Œè¡¨ç¤ºå®ƒæ˜¯å½“å‰çš„æœ€ä¸Šçº§çˆ¶æ–‡ä»¶å¤¹ï¼Œå¯ä»¥æ¸…é™¤è¿™ä¸ªè·¯å¾„çš„å…¶ä»–å­æ–‡ä»¶å¤¹è·¯å¾„ã€‚
3. **éå†å‰ç¼€æ ‘ï¼Œæå–æ–‡ä»¶å¤¹è·¯å¾„**ï¼šæ·±åº¦ä¼˜å…ˆéå†å‰ç¼€æ ‘ï¼Œé€šè¿‡å‰ç¼€æ ‘ä¸­çš„å¶å­èŠ‚ç‚¹è·å–æ‰€æœ‰æ²¡æœ‰å­æ–‡ä»¶å¤¹çš„çˆ¶æ–‡ä»¶å¤¹è·¯å¾„ã€‚

è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ç›´æ¥åœ¨æ„å»ºè¿‡ç¨‹ä¸­åˆ¤æ–­å’Œè¿‡æ»¤å­æ–‡ä»¶å¤¹ï¼Œé¿å…äº†æ’åºæ“ä½œï¼›ç¼ºç‚¹æ˜¯æ„é€ å‰ç¼€æ ‘ç»“æ„ç¨æ˜¾å¤æ‚ï¼Œä½†å®ƒåœ¨æ–‡ä»¶å¤¹è·¯å¾„è¾ƒé•¿æˆ–æ’åºæ“ä½œæˆæœ¬è¾ƒé«˜æ—¶å…·æœ‰æ›´ä¼˜çš„æ€§èƒ½ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n * m)`ï¼Œå…¶ä¸­ `n` æ˜¯æ–‡ä»¶å¤¹æ•°é‡ï¼Œ`m` æ˜¯æ¯ä¸ªæ–‡ä»¶å¤¹è·¯å¾„çš„å¹³å‡é•¿åº¦ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n * m)`ï¼Œæ„å»ºå‰ç¼€æ ‘éœ€è¦ `O(n * m)` çš„ç©ºé—´ã€‚

### æ€è·¯äºŒï¼šæ’åº

1. é¦–å…ˆå¯¹ `folder` æ•°ç»„è¿›è¡Œå­—å…¸é¡ºåºæ’åºï¼ˆä¹Ÿå°±æ˜¯é€šå¸¸çš„å­—ç¬¦ä¸²æ’åºï¼‰ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿å¦‚æœæŸä¸ªæ–‡ä»¶å¤¹æ˜¯å…¶ä»–æ–‡ä»¶å¤¹çš„å­æ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆçˆ¶æ–‡ä»¶å¤¹å¿…ç„¶ä¼šåœ¨å­æ–‡ä»¶å¤¹ä¹‹å‰ã€‚

2. éå†æ’åºåçš„æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œç­›é€‰å‡ºçˆ¶æ–‡ä»¶å¤¹ï¼š

   - åˆå§‹åŒ–ä¸€ä¸ªç»“æœæ•°ç»„ `res`ï¼Œä¸€ä¸ª `lastPath` å‚æ•°ç”¨äºè®°å½•ä¸Šä¸€ä¸ªè·¯å¾„ã€‚
   - å¼€å§‹é€ä¸ªæ£€æŸ¥æ¯ä¸ªè·¯å¾„ `path` æ˜¯å¦ä¸º `lastPath` çš„å­æ–‡ä»¶å¤¹ï¼Œåˆ¤æ–­æ–¹æ³•æ˜¯ï¼š`path.startsWith(lastPath + '/')`ã€‚
   - å¦‚æœ `path` ä¸æ˜¯ `lastPath` çš„å­æ–‡ä»¶å¤¹ï¼Œåˆ™å°†å…¶æ·»åŠ åˆ° `res` ä¸­ï¼Œå¹¶æ›´æ–° `lastPath` ä¸º `path`ã€‚

3. ç»è¿‡ä¸Šè¿°ç­›é€‰ï¼Œ`res` ä¸­çš„æ¯ä¸ªæ–‡ä»¶å¤¹è·¯å¾„éƒ½ä¸æ˜¯å…¶ä»–è·¯å¾„çš„å­æ–‡ä»¶å¤¹ï¼Œç›´æ¥è¿”å› `res` ä½œä¸ºæœ€ç»ˆç»“æœã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n log n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ–‡ä»¶å¤¹çš„æ•°é‡ï¼Œä¸»è¦å¼€é”€åœ¨å¯¹ `folder` æ•°ç»„è¿›è¡Œæ’åºã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œç”¨äºå­˜å‚¨ç»“æœæ•°ç»„ï¼Œæœ€åæƒ…å†µä¸‹ï¼ˆå½“æ‰€æœ‰æ–‡ä»¶å¤¹éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰å­æ–‡ä»¶å¤¹ï¼‰ï¼Œ`res` çš„é•¿åº¦ä¸è¾“å…¥æ•°ç»„ç›¸åŒã€‚

## ä»£ç 

::: code-tabs
@tab å‰ç¼€æ ‘

```javascript
/**
 * @param {string[]} folder
 * @return {string[]}
 */
var removeSubfolders = function (folder) {
	let tire = {};
	// å°†æ–‡ä»¶å¤¹è·¯å¾„æ’å…¥å‰ç¼€æ ‘
	for (let str of folder) {
		let cur = tire;
		for (let char of str.split('/')) {
			// å¦‚æœå·²ç»æ˜¯å¶å­èŠ‚ç‚¹ï¼Œå½“å‰è·¯å¾„ä¸ºå­æ–‡ä»¶å¤¹ï¼Œç›´æ¥ break
			if (cur.isEnd == true) {
				break;
			}
			if (!cur[char]) {
				cur[char] = {};
			}
			cur = cur[char];
		}
		// å½“å‰è·¯å¾„ä¸ºå¶å­èŠ‚ç‚¹ï¼Œæ¸…ç©ºå…¶ä»–å­æ–‡ä»¶å¤¹è·¯å¾„
		Object.keys(cur).forEach((key) => delete cur[key]);
		// æ ‡è®°ä¸ºå¶å­èŠ‚ç‚¹
		cur.isEnd = true;
	}
	let res = [];
	// éå†å‰ç¼€æ ‘ï¼Œæ”¶é›†å¶å­èŠ‚ç‚¹è·¯å¾„
	const backtrack = (root, track) => {
		if (root.isEnd == true) {
			res.push(track.join('/'));
			return;
		}
		for (let key of Object.keys(root)) {
			track.push(key);
			backtrack(root[key], track);
			track.pop();
		}
	};
	backtrack(tire, []);
	return res;
};
```

@tab æ’åº

```javascript
/**
 * @param {string[]} folder
 * @return {string[]}
 */
var removeSubfolders = function (folder) {
	// å¯¹ folder æ•°ç»„è¿›è¡Œå­—å…¸é¡ºåºæ’åº
	folder.sort();
	let res = [],
		lastPath = '';
	for (path of folder) {
		// æ¯”è¾ƒ path æ˜¯ä¸æ˜¯ lastPath çš„å­æ–‡ä»¶å¤¹
		if (!lastPath || !path.startsWith(lastPath + '/')) {
			res.push(path);
			lastPath = path;
		}
	}
	return res;
};
```

:::
