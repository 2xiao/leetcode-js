---
title: 2625. æ‰å¹³åŒ–åµŒå¥—æ•°ç»„
description: LeetCode,2625. æ‰å¹³åŒ–åµŒå¥—æ•°ç»„,æ‰å¹³åŒ–åµŒå¥—æ•°ç»„,Flatten Deeply Nested Array,è§£é¢˜æ€è·¯
keywords:
  - LeetCode
  - 2625. æ‰å¹³åŒ–åµŒå¥—æ•°ç»„
  - æ‰å¹³åŒ–åµŒå¥—æ•°ç»„
  - Flatten Deeply Nested Array
  - è§£é¢˜æ€è·¯
---

# 2625. æ‰å¹³åŒ–åµŒå¥—æ•°ç»„

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/flatten-deeply-nested-array) [`LeetCode`](https://leetcode.com/problems/flatten-deeply-nested-array)

## é¢˜ç›®

Given a **multi-dimensional** array `arr` and a depth `n`, return a
**flattened** version of that array.

A **multi-dimensional** array is a recursive data structure that contains
integers or other **multi-dimensional** arrays.

A **flattened** array is a version of that array with some or all of the sub-
arrays removed and replaced with the actual elements in that sub-array. This
flattening operation should only be done if the current depth of nesting is
less than `n`. The depth of the elements in the first array are considered to
be `0`.

Please solve it without the built-in `Array.flat` method.

**Example 1:**

> **Input**
>
> arr = [1, 2, 3, [4, 5, 6], [7, 8, [9, 10, 11], 12], [13, 14, 15]]
>
> n = 0
>
> **Output**
>
> [1, 2, 3, [4, 5, 6], [7, 8, [9, 10, 11], 12], [13, 14, 15]]
>
> **Explanation**
>
> Passing a depth of n=0 will always result in the original array. This is because the smallest possible depth of a subarray (0) is not less than n=0. Thus, no subarray should be flattened.

**Example 2:**

> **Input**
>
> arr = [1, 2, 3, [4, 5, 6], [7, 8, [9, 10, 11], 12], [13, 14, 15]]
>
> n = 1
>
> **Output**
>
> [1, 2, 3, 4, 5, 6, 7, 8, [9, 10, 11], 12, 13, 14, 15]
>
> **Explanation**
>
> The subarrays starting with 4, 7, and 13 are all flattened. This is because their depth of 0 is less than 1. However [9, 10, 11] remains unflattened because its depth is 1.

**Example 3:**

> **Input**
>
> arr = [[1, 2, 3], [4, 5, 6], [7, 8, [9, 10, 11], 12], [13, 14, 15]]
>
> n = 2
>
> **Output**
>
> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]
>
> **Explanation**
>
> The maximum depth of any subarray is 1. Thus, all of them are flattened.

**Constraints:**

- `0 <= count of numbers in arr <= 10^5`
- `0 <= count of subarrays in arr <= 10^5`
- `maxDepth <= 1000`
- `-1000 <= each number <= 1000`
- `0 <= n <= 1000`

## é¢˜ç›®å¤§æ„

è¯·ä½ ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª **å¤šç»´æ•°ç»„** `arr` å’Œå®ƒçš„æ·±åº¦ `n` ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„çš„ **æ‰å¹³åŒ–** åçš„ç»“æœã€‚

**å¤šç»´æ•°ç»„** æ˜¯ä¸€ç§åŒ…å«æ•´æ•°æˆ–å…¶ä»–å¤šç»´æ•°ç»„çš„é€’å½’æ•°æ®ç»“æ„ã€‚

æ•°ç»„ **æ‰å¹³åŒ–** æ˜¯å¯¹æ•°ç»„çš„ä¸€ç§æ“ä½œï¼Œå®šä¹‰æ˜¯å°†åŸæ•°ç»„éƒ¨åˆ†æˆ–å…¨éƒ¨å­æ•°ç»„åˆ é™¤ï¼Œå¹¶æ›¿æ¢ä¸ºè¯¥å­æ•°ç»„ä¸­çš„å®é™…å…ƒç´ ã€‚åªæœ‰å½“åµŒå¥—çš„æ•°ç»„æ·±åº¦å¤§äº `n`
æ—¶ï¼Œæ‰åº”è¯¥æ‰§è¡Œæ‰å¹³åŒ–æ“ä½œã€‚ç¬¬ä¸€å±‚æ•°ç»„ä¸­å…ƒç´ çš„æ·±åº¦è¢«è®¤ä¸ºæ˜¯ 0ã€‚

è¯·åœ¨æ²¡æœ‰ä½¿ç”¨å†…ç½®æ–¹æ³• `Array.flat` çš„å‰æä¸‹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

**æç¤ºï¼š**

- `0 <= arr çš„å…ƒç´ ä¸ªæ•° <= 10^5`
- `0 <= arr çš„å­æ•°ç»„ä¸ªæ•° <= 10^5`
- `maxDepth <= 1000`
- `-1000 <= each number <= 1000`
- `0 <= n <= 1000`

## è§£é¢˜æ€è·¯

1. å®šä¹‰ä¸€ä¸ªç©ºæ•°ç»„ `result` ç”¨äºå­˜å‚¨ç»“æœã€‚
2. å®šä¹‰å†…éƒ¨é€’å½’å‡½æ•° `flattenArray`ï¼Œä½¿ç”¨ `forEach` éå†è¾“å…¥çš„åµŒå¥—æ•°ç»„ã€‚
3. å¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œï¼š
   - å¦‚æœæ˜¯å…¶ç±»å‹æ˜¯æ•°ç»„ä¸”æ‰å¹³åŒ–æ·±åº¦å¤§äº 0ï¼Œé€’å½’è°ƒç”¨ `flattenArray` å‡½æ•°å¤„ç†è¯¥æ•°ç»„ã€‚
   - å¦åˆ™ï¼Œç›´æ¥å°†å…¶æ·»åŠ åˆ°ç»“æœæ•°ç»„ä¸­ã€‚
4. æœ€åè¿”å›å±•å¹³åçš„ç»“æœæ•°ç»„ã€‚

### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„æ€»æ•°ï¼Œæ¯ä¸ªå…ƒç´ éƒ½éœ€è¦è¢«è®¿é—®ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œç”¨äºå­˜å‚¨ç»“æœæ•°ç»„ã€‚

## ä»£ç 

```javascript
/**
 * @param {Array} arr
 * @param {number} depth
 * @return {Array}
 */
var flat = function (arr, n) {
	let res = [];
	const flattenArray = (arr, n) => {
		arr.forEach((item) => {
			if (Array.isArray(item) && n > 0) {
				// é€’å½’è°ƒç”¨
				flattenArray(item, n - 1);
			} else {
				// æ·»åŠ éæ•°ç»„å…ƒç´ 
				res.push(item);
			}
		});
	};
	flattenArray(arr, n);
	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2628 | [å®Œå…¨ç›¸ç­‰çš„ JSON å­—ç¬¦ä¸² ğŸ”’](https://leetcode.com/problems/json-deep-equal) | [[âœ“]](/problem/2628.md) |  | <font color=#ffb800>Medium</font> |
| 2633 | [å°†å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸² ğŸ”’](https://leetcode.com/problems/convert-object-to-json-string) | [[âœ“]](/problem/2633.md) |  | <font color=#ffb800>Medium</font> |
| 2649 | [åµŒå¥—æ•°ç»„ç”Ÿæˆå™¨](https://leetcode.com/problems/nested-array-generator) | [[âœ“]](/problem/2649.md) |  | <font color=#ffb800>Medium</font> |