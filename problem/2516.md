---
title: 2516. æ¯ç§å­—ç¬¦è‡³å°‘å– K ä¸ª
description: LeetCode 2516. æ¯ç§å­—ç¬¦è‡³å°‘å– K ä¸ªé¢˜è§£ï¼ŒTake K of Each Character From Left and Rightï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2516. æ¯ç§å­—ç¬¦è‡³å°‘å– K ä¸ª
  - æ¯ç§å­—ç¬¦è‡³å°‘å– K ä¸ª
  - Take K of Each Character From Left and Right
  - è§£é¢˜æ€è·¯
  - å“ˆå¸Œè¡¨
  - å­—ç¬¦ä¸²
  - æ»‘åŠ¨çª—å£
---

# 2516. æ¯ç§å­—ç¬¦è‡³å°‘å– K ä¸ª

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/take-k-of-each-character-from-left-and-right) [`LeetCode`](https://leetcode.com/problems/take-k-of-each-character-from-left-and-right)

## é¢˜ç›®

You are given a string `s` consisting of the characters `'a'`, `'b'`, and
`'c'` and a non-negative integer `k`. Each minute, you may take either the
**leftmost** character of `s`, or the **rightmost** character of `s`.

Return _the**minimum** number of minutes needed for you to take **at least**
_`k` _of each character, or return_`-1` _if it is not possible to take_`k` _of
each character._

**Example 1:**

> Input: s = "aabaaaacaabc", k = 2
>
> Output: 8
>
> Explanation:
>
> Take three characters from the left of s. You now have two 'a' characters, and one 'b' character.
>
> Take five characters from the right of s. You now have four 'a' characters, two 'b' characters, and two 'c' characters.
>
> A total of 3 + 5 = 8 minutes is needed.
>
> It can be proven that 8 is the minimum number of minutes needed.

**Example 2:**

> Input: s = "a", k = 1
>
> Output: -1
>
> Explanation: It is not possible to take one 'b' or 'c' so return -1.

**Constraints:**

- `1 <= s.length <= 10^5`
- `s` consists of only the letters `'a'`, `'b'`, and `'c'`.
- `0 <= k <= s.length`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªç”±å­—ç¬¦ `'a'`ã€`'b'`ã€`'c'` ç»„æˆçš„å­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªéè´Ÿæ•´æ•° `k` ã€‚æ¯åˆ†é’Ÿï¼Œä½ å¯ä»¥é€‰æ‹©å–èµ° `s` **æœ€å·¦ä¾§** è¿˜æ˜¯
**æœ€å³ä¾§** çš„é‚£ä¸ªå­—ç¬¦ã€‚

ä½ å¿…é¡»å–èµ°æ¯ç§å­—ç¬¦ **è‡³å°‘** `k` ä¸ªï¼Œè¿”å›éœ€è¦çš„ **æœ€å°‘** åˆ†é’Ÿæ•°ï¼›å¦‚æœæ— æ³•å–åˆ°ï¼Œåˆ™è¿”å› `-1` ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** s = "aabaaaacaabc", k = 2
>
> **è¾“å‡ºï¼š** 8
>
> **è§£é‡Šï¼š**
>
> ä» s çš„å·¦ä¾§å–ä¸‰ä¸ªå­—ç¬¦ï¼Œç°åœ¨å…±å–åˆ°ä¸¤ä¸ªå­—ç¬¦ 'a' ã€ä¸€ä¸ªå­—ç¬¦ 'b' ã€‚
>
> ä» s çš„å³ä¾§å–äº”ä¸ªå­—ç¬¦ï¼Œç°åœ¨å…±å–åˆ°å››ä¸ªå­—ç¬¦ 'a' ã€ä¸¤ä¸ªå­—ç¬¦ 'b' å’Œä¸¤ä¸ªå­—ç¬¦ 'c' ã€‚
>
> å…±éœ€è¦ 3 + 5 = 8 åˆ†é’Ÿã€‚
>
> å¯ä»¥è¯æ˜éœ€è¦çš„æœ€å°‘åˆ†é’Ÿæ•°æ˜¯ 8 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = "a", k = 1
>
> **è¾“å‡ºï¼š** -1
>
> **è§£é‡Šï¼š** æ— æ³•å–åˆ°ä¸€ä¸ªå­—ç¬¦ 'b' æˆ–è€… 'c'ï¼Œæ‰€ä»¥è¿”å› -1 ã€‚

**æç¤ºï¼š**

- `1 <= s.length <= 10^5`
- `s` ä»…ç”±å­—æ¯ `'a'`ã€`'b'`ã€`'c'` ç»„æˆ
- `0 <= k <= s.length`

## è§£é¢˜æ€è·¯

1. ç»Ÿè®¡æ¯ç§å­—ç¬¦çš„æ€»æ•°

é¦–å…ˆï¼Œéå†å­—ç¬¦ä¸² `s` ç»Ÿè®¡ `'a'`ã€`'b'` å’Œ `'c'` çš„æ€»æ•°é‡ `total`ï¼Œåˆ†åˆ«å­˜å‚¨åœ¨æ•°ç»„ `total` ä¸­ã€‚

å¦‚æœä»»ä½•ä¸€ç§å­—ç¬¦çš„æ€»æ•°é‡å°äº `k`ï¼Œç›´æ¥è¿”å› `-1`ï¼Œå› ä¸ºæ— æ³•æ»¡è¶³é¢˜ç›®è¦æ±‚ã€‚

2. é€†å‘è€ƒè™‘å‰©ä½™çš„åŒºé—´

è¦æ±‚æœ€çŸ­çš„å‰ç¼€å’Œåç¼€ï¼Œå³**æœ€é•¿çš„ä¸­é—´è¿ç»­å­æ•°ç»„çš„é•¿åº¦**ï¼Œæ»¡è¶³ï¼šä¸­é—´å­æ•°ç»„ä¸­æ¯ç§å­—ç¬¦çš„æ•°é‡ä¸è¶…è¿‡ `total[i] - k`ã€‚

è¿™æ˜¯å› ä¸ºï¼Œä»æ•´ä¸ªå­—ç¬¦ä¸²ä¸­å»æ‰æ»¡è¶³æ¡ä»¶çš„ä¸­é—´éƒ¨åˆ†åï¼Œå‰©ä¸‹çš„å‰ç¼€å’Œåç¼€çš„å­—ç¬¦æ•°é‡å¿…ç„¶æ»¡è¶³è¦æ±‚ã€‚

3. ä½¿ç”¨æ»‘åŠ¨çª—å£æ‰¾åˆ°æœ€é•¿ä¸­é—´å­æ•°ç»„

é€šè¿‡æ»‘åŠ¨çª—å£ç»´æŠ¤ä¸€ä¸ªè®¡æ•°æ•°ç»„ `window`ï¼Œç»Ÿè®¡å½“å‰çª—å£å†…æ¯ç§å­—ç¬¦çš„æ•°é‡ï¼š

- çª—å£å³è¾¹ç•Œ `right` æ¯æ¬¡å‘å³æ‰©å±•ï¼Œå¢åŠ å­—ç¬¦çš„è®¡æ•°ï¼›
- å½“çª—å£å†…æŸç§å­—ç¬¦æ•°é‡è¶…è¿‡å…è®¸å€¼ `total[i] - k` æ—¶ï¼Œç§»åŠ¨å·¦è¾¹ç•Œ `left` ç¼©å°çª—å£ï¼›
- æ¯æ¬¡æ›´æ–°çª—å£é•¿åº¦ `right - left` å¹¶ä¸ç»“æœ `res` æ¯”è¾ƒï¼Œå–æœ€çŸ­çš„å‰ç¼€å’Œåç¼€é•¿åº¦ã€‚

4. ç»“æœè®¡ç®—

å¯¹äºçª—å£ä¸­æ»¡è¶³æ¡ä»¶çš„æœ€é•¿ä¸­é—´å­æ•°ç»„ï¼Œå‰©ä½™çš„å‰ç¼€å’Œåç¼€é•¿åº¦ä¸º `n - (right - left)`ï¼Œè®°å½•æœ€å°å€¼ã€‚

æœ€åè¿”å› `res`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸² `s` çš„é•¿åº¦ï¼Œéœ€è¦éå†ä¸¤æ¬¡å­—ç¬¦ä¸²ï¼Œç»Ÿè®¡å­—ç¬¦æ€»æ•°ä¸€æ¬¡ï¼Œæ»‘åŠ¨çª—å£ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œä½¿ç”¨äº†å¸¸æ•°çº§åˆ«çš„æ•°ç»„å­˜å‚¨å­—ç¬¦ç»Ÿè®¡ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @param {number} k
 * @return {number}
 */
var takeCharacters = function (s, k) {
	let total = [0, 0, 0]; // ç»Ÿè®¡å­—ç¬¦ 'a', 'b', 'c' çš„æ€»æ•°
	for (let char of s) {
		total[char.charCodeAt(0) - 'a'.charCodeAt(0)]++;
	}

	// å¦‚æœä»»æ„ä¸€ç§å­—ç¬¦ä¸è¶³ k ä¸ªï¼Œè¿”å› -1
	if (total[0] < k || total[1] < k || total[2] < k) {
		return -1;
	}

	const n = s.length;
	let window = [0, 0, 0]; // å½“å‰çª—å£ä¸­å­—ç¬¦çš„æ•°é‡
	let res = n; // ç»“æœåˆå§‹åŒ–ä¸ºå­—ç¬¦ä¸²é•¿åº¦
	let left = 0;
	let right = 0;

	// æ»‘åŠ¨çª—å£
	while (right < n) {
		// æ‰©å±•å³è¾¹ç•Œ
		window[s.charCodeAt(right) - 'a'.charCodeAt(0)]++;
		right++;

		// æ”¶ç¼©å·¦è¾¹ç•Œï¼Œä½¿å¾—çª—å£å†…å­—ç¬¦æ•°é‡æ»¡è¶³æ¡ä»¶
		while (
			window[0] > total[0] - k ||
			window[1] > total[1] - k ||
			window[2] > total[2] - k
		) {
			window[s.charCodeAt(left) - 'a'.charCodeAt(0)]--;
			left++;
		}

		// æ›´æ–°ç»“æœï¼šæœ€çŸ­å‰ç¼€å’Œåç¼€é•¿åº¦
		res = Math.min(res, n - (right - left));
	}

	return res; // è¿”å›ç»“æœ
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 88 | åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ | [[âœ“]](/problem/0088.md) |  [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`æ’åº`](/tag/sorting.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/merge-sorted-array) [ğŸ”—](https://leetcode.com/problems/merge-sorted-array) |
| 143 | é‡æ’é“¾è¡¨ | [[âœ“]](/problem/0143.md) |  [`æ ˆ`](/tag/stack.md) [`é€’å½’`](/tag/recursion.md) [`é“¾è¡¨`](/tag/linked-list.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/reorder-list) [ğŸ”—](https://leetcode.com/problems/reorder-list) |
| 1652 | æ‹†ç‚¸å¼¹ | [[âœ“]](/problem/1652.md) |  [`æ•°ç»„`](/tag/array.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/defuse-the-bomb) [ğŸ”—](https://leetcode.com/problems/defuse-the-bomb) |