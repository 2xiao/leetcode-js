---
title: 395. è‡³å°‘æœ‰ K ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²
description: LeetCode 395. è‡³å°‘æœ‰ K ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²é¢˜è§£ï¼ŒLongest Substring with At Least K Repeating Charactersï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 395. è‡³å°‘æœ‰ K ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²
  - è‡³å°‘æœ‰ K ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²
  - Longest Substring with At Least K Repeating Characters
  - è§£é¢˜æ€è·¯
  - å“ˆå¸Œè¡¨
  - å­—ç¬¦ä¸²
  - åˆ†æ²»
  - æ»‘åŠ¨çª—å£
---

# 395. è‡³å°‘æœ‰ K ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`åˆ†æ²»`](/tag/divide-and-conquer.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/longest-substring-with-at-least-k-repeating-characters) [`LeetCode`](https://leetcode.com/problems/longest-substring-with-at-least-k-repeating-characters)

## é¢˜ç›®

Given a string `s` and an integer `k`, return _the length of the longest
substring of_ `s` _such that the frequency of each character in this substring
is greater than or equal to_ `k`.

if no such substring exists, return 0.

**Example 1:**

> Input: s = "aaabb", k = 3
>
> Output: 3
>
> Explanation: The longest substring is "aaa", as 'a' is repeated 3 times.

**Example 2:**

> Input: s = "ababbc", k = 2
>
> Output: 5
>
> Explanation: The longest substring is "ababb", as 'a' is repeated 2 times and 'b' is repeated 3 times.

**Constraints:**

- `1 <= s.length <= 10^4`
- `s` consists of only lowercase English letters.
- `1 <= k <= 10^5`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ æ‰¾å‡º `s` ä¸­çš„æœ€é•¿å­ä¸²ï¼Œ è¦æ±‚è¯¥å­ä¸²ä¸­çš„æ¯ä¸€å­—ç¬¦å‡ºç°æ¬¡æ•°éƒ½ä¸å°‘äº `k` ã€‚è¿”å›è¿™ä¸€å­ä¸²çš„é•¿åº¦ã€‚

å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å­å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å› 0ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** s = "aaabb", k = 3
>
> **è¾“å‡ºï¼š** 3
>
> **è§£é‡Šï¼š** æœ€é•¿å­ä¸²ä¸º "aaa" ï¼Œå…¶ä¸­ 'a' é‡å¤äº† 3 æ¬¡ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = "ababbc", k = 2
>
> **è¾“å‡ºï¼š** 5
>
> **è§£é‡Šï¼š** æœ€é•¿å­ä¸²ä¸º "ababb" ï¼Œå…¶ä¸­ 'a' é‡å¤äº† 2 æ¬¡ï¼Œ 'b' é‡å¤äº† 3 æ¬¡ã€‚

**æç¤ºï¼š**

- `1 <= s.length <= 10^4`
- `s` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- `1 <= k <= 10^5`

## è§£é¢˜æ€è·¯

1. **å­—ç¬¦ç§ç±»é™åˆ¶çš„ä¼˜åŒ–ç­–ç•¥**

   - ä¸å¿…æš´åŠ›æšä¸¾æ‰€æœ‰å­ä¸²ï¼Œè€Œæ˜¯ä»¥ **å­—ç¬¦ç§ç±»æ•°é‡ (`targetUnique`)** ä¸ºç›®æ ‡ï¼Œä» `1` åˆ°å­—ç¬¦ä¸²ä¸­å®é™…å­—ç¬¦ç§ç±»æ•°è¿›è¡Œæ»‘åŠ¨çª—å£éå†ã€‚
   - `charLen` æ˜¯ `s` ä¸­å»é‡å­—ç¬¦çš„æ•°é‡ï¼Œé€šè¿‡ `new Set(s.split(''))` æ¥è®¡ç®—ã€‚

2. **æ»‘åŠ¨çª—å£æœºåˆ¶**

   - **å·¦å³åŒæŒ‡é’ˆ (`left` å’Œ `right`)**ï¼šåŠ¨æ€æ§åˆ¶å­ä¸²èŒƒå›´ã€‚
   - **å­—ç¬¦è®¡æ•° (`charCount`) å“ˆå¸Œè¡¨**ï¼šè®°å½•å½“å‰çª—å£å†…å­—ç¬¦çš„å‡ºç°æ¬¡æ•°ã€‚
   - **çŠ¶æ€å˜é‡ (`uniqueCount`, `countAtLeastK`)**ï¼š
     - `uniqueCount`ï¼šçª—å£ä¸­ä¸åŒå­—ç¬¦çš„æ•°é‡ã€‚
     - `countAtLeastK`ï¼šå‡ºç°æ¬¡æ•°è‡³å°‘ä¸º `k` çš„å­—ç¬¦æ•°é‡ã€‚

3. **çª—å£è°ƒæ•´è§„åˆ™**
   - æ¯æ¬¡å‘å³æ‰©å±•çª—å£æ—¶æ›´æ–°å­—ç¬¦è®¡æ•°å’ŒçŠ¶æ€å˜é‡ã€‚
   - å¦‚æœ `uniqueCount > targetUnique`ï¼Œè¯´æ˜çª—å£å†…å­—ç¬¦ç§ç±»è¶…å‡ºç›®æ ‡èŒƒå›´ï¼Œéœ€è¦ç§»åŠ¨å·¦æŒ‡é’ˆæ”¶ç¼©çª—å£ã€‚
   - å¦‚æœ `uniqueCount == countAtLeastK`ï¼Œæ›´æ–°ç»“æœé•¿åº¦ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(26 * n)`
  - å¤–å±‚å¾ªç¯æœ€å¤š 26 æ¬¡ï¼ˆé’ˆå¯¹æ¯ç§å­—ç¬¦ç§ç±»æ•°é‡ï¼‰ã€‚
  - å†…å±‚æ»‘åŠ¨çª—å£å¤„ç†æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(26)`ï¼Œç”¨äºå­—ç¬¦è®¡æ•°å“ˆå¸Œè¡¨ `charCount`ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @param {number} k
 * @return {number}
 */
var longestSubstring = function (s, k) {
	if (!s || s.length === 0) return 0;
	let maxLen = 0;
	const n = s.length;
	const charLen = new Set(s.split('')).size;

	for (let targetUnique = 1; targetUnique <= charLen; targetUnique++) {
		let left = 0,
			right = 0;
		const charCount = new Map();
		let uniqueCount = 0,
			countAtLeastK = 0;

		while (right < n) {
			// æ‰©å±•çª—å£
			const charRight = s[right];
			charCount.set(charRight, (charCount.get(charRight) || 0) + 1);
			if (charCount.get(charRight) === 1) uniqueCount++;
			if (charCount.get(charRight) === k) countAtLeastK++;
			right++;

			// æ”¶ç¼©çª—å£
			while (uniqueCount > targetUnique) {
				const charLeft = s[left];
				if (charCount.get(charLeft) === k) countAtLeastK--;
				charCount.set(charLeft, charCount.get(charLeft) - 1);
				if (charCount.get(charLeft) === 0) uniqueCount--;
				left++;
			}

			// æ›´æ–°ç»“æœ
			if (uniqueCount === countAtLeastK) {
				maxLen = Math.max(maxLen, right - left);
			}
		}
	}

	return maxLen;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 2014 | é‡å¤ K æ¬¡çš„æœ€é•¿å­åºåˆ— |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md) `2+` | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/longest-subsequence-repeated-k-times) [ğŸ”—](https://leetcode.com/problems/longest-subsequence-repeated-k-times) |
| 2067 | ç­‰è®¡æ•°å­ä¸²çš„æ•°é‡ ğŸ”’ |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`è®¡æ•°`](/tag/counting.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/number-of-equal-count-substrings) [ğŸ”—](https://leetcode.com/problems/number-of-equal-count-substrings) |
| 2405 | å­å­—ç¬¦ä¸²çš„æœ€ä¼˜åˆ’åˆ† | [[âœ“]](/problem/2405.md) |  [`è´ªå¿ƒ`](/tag/greedy.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/optimal-partition-of-string) [ğŸ”—](https://leetcode.com/problems/optimal-partition-of-string) |
| 2958 | æœ€å¤š K ä¸ªé‡å¤å…ƒç´ çš„æœ€é•¿å­æ•°ç»„ |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/length-of-longest-subarray-with-at-most-k-frequency) [ğŸ”—](https://leetcode.com/problems/length-of-longest-subarray-with-at-most-k-frequency) |
| 2981 | æ‰¾å‡ºå‡ºç°è‡³å°‘ä¸‰æ¬¡çš„æœ€é•¿ç‰¹æ®Šå­å­—ç¬¦ä¸² I |  |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) `2+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/find-longest-special-substring-that-occurs-thrice-i) [ğŸ”—](https://leetcode.com/problems/find-longest-special-substring-that-occurs-thrice-i) |
| 2982 | æ‰¾å‡ºå‡ºç°è‡³å°‘ä¸‰æ¬¡çš„æœ€é•¿ç‰¹æ®Šå­å­—ç¬¦ä¸² II |  |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) `2+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/find-longest-special-substring-that-occurs-thrice-ii) [ğŸ”—](https://leetcode.com/problems/find-longest-special-substring-that-occurs-thrice-ii) |