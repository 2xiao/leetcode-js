---
title: 933. æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°
description: LeetCode,933. æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°,æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°,Number of Recent Calls,è§£é¢˜æ€è·¯,è®¾è®¡,é˜Ÿåˆ—,æ•°æ®æµ
keywords:
  - LeetCode
  - 933. æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°
  - æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°
  - Number of Recent Calls
  - è§£é¢˜æ€è·¯
  - è®¾è®¡
  - é˜Ÿåˆ—
  - æ•°æ®æµ
---

# 933. æœ€è¿‘çš„è¯·æ±‚æ¬¡æ•°

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/tag/design.md) [`é˜Ÿåˆ—`](/tag/queue.md) [`æ•°æ®æµ`](/tag/data-stream.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/number-of-recent-calls) [`LeetCode`](https://leetcode.com/problems/number-of-recent-calls)

## é¢˜ç›®

You have a `RecentCounter` class which counts the number of recent requests
within a certain time frame.

Implement the `RecentCounter` class:

- `RecentCounter()` Initializes the counter with zero recent requests.
- `int ping(int t)` Adds a new request at time `t`, where `t` represents some time in milliseconds, and returns the number of requests that has happened in the past `3000` milliseconds (including the new request). Specifically, return the number of requests that have happened in the inclusive range `[t - 3000, t]`.

It is **guaranteed** that every call to `ping` uses a strictly larger value of
`t` than the previous call.

**Example 1:**

> **Input**
>
> ["RecentCounter", "ping", "ping", "ping", "ping"]
>
> [[], [1], [100], [3001], [3002]]
>
> **Output**
>
> [null, 1, 2, 3, 3]
>
> **Explanation**
>
> ```js
> RecentCounter recentCounter = new RecentCounter();
> recentCounter.ping(1); // requests = [1], range is [-2999,1], return 1
> recentCounter.ping(100);   // requests = [1 , 100], range is [-2900,100], return 2
> recentCounter.ping(3001);  // requests = [1 , 100 , 3001], range is [1,3001], return 3
> recentCounter.ping(3002);  // requests = [1, 100 , 3001 , 3002], range is [2,3002], return 3
> ```

**Constraints:**

- `1 <= t <= 10^9`
- Each test case will call `ping` with **strictly increasing** values of `t`.
- At most `10^4` calls will be made to `ping`.

## é¢˜ç›®å¤§æ„

å†™ä¸€ä¸ª `RecentCounter` ç±»æ¥è®¡ç®—ç‰¹å®šæ—¶é—´èŒƒå›´å†…æœ€è¿‘çš„è¯·æ±‚ã€‚

è¯·ä½ å®ç° `RecentCounter` ç±»ï¼š

- `RecentCounter()` åˆå§‹åŒ–è®¡æ•°å™¨ï¼Œè¯·æ±‚æ•°ä¸º 0 ã€‚
- `int ping(int t)` åœ¨æ—¶é—´ `t` æ·»åŠ ä¸€ä¸ªæ–°è¯·æ±‚ï¼Œå…¶ä¸­ `t` è¡¨ç¤ºä»¥æ¯«ç§’ä¸ºå•ä½çš„æŸä¸ªæ—¶é—´ï¼Œå¹¶è¿”å›è¿‡å» `3000` æ¯«ç§’å†…å‘ç”Ÿçš„æ‰€æœ‰è¯·æ±‚æ•°ï¼ˆåŒ…æ‹¬æ–°è¯·æ±‚ï¼‰ã€‚ç¡®åˆ‡åœ°è¯´ï¼Œè¿”å›åœ¨ `[t-3000, t]` å†…å‘ç”Ÿçš„è¯·æ±‚æ•°ã€‚

**ä¿è¯** æ¯æ¬¡å¯¹ `ping` çš„è°ƒç”¨éƒ½ä½¿ç”¨æ¯”ä¹‹å‰æ›´å¤§çš„ `t` å€¼ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š**
>
> ["RecentCounter", "ping", "ping", "ping", "ping"]
>
> [[], [1], [100], [3001], [3002]]
>
> **è¾“å‡ºï¼š**
>
> [null, 1, 2, 3, 3]
>
> **è§£é‡Šï¼š**
>
> ```js
> RecentCounter recentCounter = new RecentCounter();
> recentCounter.ping(1); // requests = [1], range is [-2999,1], return 1
> recentCounter.ping(100);   // requests = [1 , 100], range is [-2900,100], return 2
> recentCounter.ping(3001);  // requests = [1 , 100 , 3001], range is [1,3001], return 3
> recentCounter.ping(3002);  // requests = [1, 100 , 3001 , 3002], range is [2,3002], return 3
> ```

**æç¤ºï¼š**

- `1 <= t <= 10^9`
- ä¿è¯æ¯æ¬¡å¯¹ `ping` è°ƒç”¨æ‰€ä½¿ç”¨çš„ `t` å€¼éƒ½ **ä¸¥æ ¼é€’å¢**
- è‡³å¤šè°ƒç”¨ `ping` æ–¹æ³• `10^4` æ¬¡

## è§£é¢˜æ€è·¯

1. **å±æ€§åˆå§‹åŒ–**ï¼š`RecentCounter` ç±»åŒ…å«ä¸€ä¸ªæ•°ç»„ `requests`ï¼Œç”¨äºå­˜å‚¨æ‰€æœ‰è¯·æ±‚çš„æ—¶é—´æˆ³ã€‚

2. **ping æ–¹æ³•**ï¼š
   - `ping` æ–¹æ³•åœ¨æ”¶åˆ°ä¸€ä¸ªæ–°è¯·æ±‚æ—¶ï¼Œå°†å½“å‰è¯·æ±‚æ—¶é—´æˆ³ `t` è®°å½•åœ¨ `requests` æ•°ç»„ä¸­ï¼Œå¹¶ç§»é™¤æ‰€æœ‰åœ¨å½“å‰æ—¶é—´ `t` çš„ 3000 æ¯«ç§’å‰çš„è¯·æ±‚ï¼ˆå³å°äº `t - 3000` çš„è¯·æ±‚ï¼‰ã€‚
   - `while` å¾ªç¯é€ä¸€æ£€æŸ¥ `requests` çš„å¼€å¤´å…ƒç´ ï¼ˆå³æœ€æ—©çš„è¯·æ±‚æ—¶é—´ï¼‰ï¼Œå¦‚æœå°äº `t - 3000`ï¼Œåˆ™ä»é˜Ÿåˆ—çš„å¤´éƒ¨ç§»é™¤è¯¥å…ƒç´ ï¼Œç›´åˆ°åªå‰©ä¸‹åœ¨æœ€è¿‘ 3000 æ¯«ç§’å†…çš„è¯·æ±‚ã€‚
   - æœ€åï¼Œè¿”å›å½“å‰é˜Ÿåˆ—çš„é•¿åº¦ï¼Œå³ 3000 æ¯«ç§’å†…çš„è¯·æ±‚æ•°é‡ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` ä¸º `requests` ä¸­çš„è¯·æ±‚æ•°é‡ï¼Œæœ€åæƒ…å†µä¸‹ï¼Œæ¯æ¬¡ ping æ“ä½œéƒ½éœ€è¦ç§»é™¤æ—§è¯·æ±‚ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå­˜å‚¨æœ€è¿‘ 3000 æ¯«ç§’å†…çš„è¯·æ±‚æ•°é‡ã€‚

## ä»£ç 

```javascript
var RecentCounter = function () {
	this.requests = [];
};

/**
 * @param {number} t
 * @return {number}
 */
RecentCounter.prototype.ping = function (t) {
	while (this.requests.length > 0 && this.requests[0] < t - 3000) {
		// ç§»é™¤æ‰€æœ‰è¶…è¿‡ 3000 æ¯«ç§’çš„æ—§è¯·æ±‚
		this.requests.shift();
	}
	// æ·»åŠ å½“å‰è¯·æ±‚æ—¶é—´æˆ³
	this.requests.push(t);
	// è¿”å› 3000 æ¯«ç§’å†…çš„è¯·æ±‚æ•°é‡
	return this.requests.length;
};
```
