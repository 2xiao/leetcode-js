---
title: 204. è®¡æ•°è´¨æ•°
description: LeetCode 204. è®¡æ•°è´¨æ•°é¢˜è§£ï¼ŒCount Primesï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 204. è®¡æ•°è´¨æ•°
  - è®¡æ•°è´¨æ•°
  - Count Primes
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - æ•°å­¦
  - æšä¸¾
  - æ•°è®º
---

# 204. è®¡æ•°è´¨æ•°

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`æšä¸¾`](/tag/enumeration.md) [`æ•°è®º`](/tag/number-theory.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/count-primes) [`LeetCode`](https://leetcode.com/problems/count-primes)

## é¢˜ç›®

Given an integer `n`, return _the number of prime numbers that are strictly
less than_ `n`.

**Example 1:**

> Input: n = 10
>
> Output: 4
>
> Explanation: There are 4 prime numbers less than 10, they are 2, 3, 5, 7.

**Example 2:**

> Input: n = 0
>
> Output: 0

**Example 3:**

> Input: n = 1
>
> Output: 0

**Constraints:**

- `0 <= n <= 5 * 10^6`

## é¢˜ç›®å¤§æ„

ç»™å®šæ•´æ•° `n` ï¼Œè¿”å› _æ‰€æœ‰å°äºéè´Ÿæ•´æ•° `n` çš„è´¨æ•°çš„æ•°é‡_ ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** n = 10
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** å°äº 10 çš„è´¨æ•°ä¸€å…±æœ‰ 4 ä¸ª, å®ƒä»¬æ˜¯ 2, 3, 5, 7 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** n = 0
>
> **è¾“å‡ºï¼š** 0

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** n = 1
>
> **è¾“å‡º** ï¼š0

**æç¤ºï¼š**

- `0 <= n <= 5 * 10^6`

## è§£é¢˜æ€è·¯

è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„ç­›æ³•é—®é¢˜ï¼Œå¯ä»¥ç”¨ **åŸƒæ‹‰æ‰˜è‰²å°¼ç­›æ³•**ï¼ˆSieve of Eratosthenesï¼‰é«˜æ•ˆåœ°è§£å†³ã€‚

1. **åˆå§‹åŒ–çŠ¶æ€æ•°ç»„**ï¼š

   - åˆ›å»ºä¸€ä¸ªæ•°ç»„ `seen`ï¼Œå¤§å°ä¸º `n`ï¼Œåˆå§‹å€¼ä¸º `0`ï¼Œç”¨äºæ ‡è®°æ•°å­—æ˜¯å¦ä¸ºåˆæ•°ï¼ˆéè´¨æ•°ï¼‰ã€‚
   - å¦‚æœ `seen[i] = 0`ï¼Œè¯´æ˜ `i` æ˜¯è´¨æ•°ï¼›å¦‚æœ `seen[i] = 1`ï¼Œè¯´æ˜ `i` æ˜¯åˆæ•°ã€‚

2. **ä»æœ€å°çš„è´¨æ•° `2` å¼€å§‹ç­›é€‰**ï¼š

   - éå†ä» `2` åˆ° `n-1` çš„æ¯ä¸ªæ•°ï¼š
     - å¦‚æœå½“å‰æ•° `i` æ˜¯è´¨æ•°ï¼ˆ`seen[i] == 0`ï¼‰ï¼Œå°†å…¶è®¡å…¥ç»“æœã€‚
     - ä» `i * i` å¼€å§‹ï¼Œå°†æ‰€æœ‰ `i` çš„å€æ•°æ ‡è®°ä¸ºåˆæ•°ï¼ˆ`seen[j] = 1`ï¼‰ã€‚

3. **æå‰ä¼˜åŒ–ç­›é€‰èŒƒå›´**ï¼š

   - ç”±äºå°äº `i * i` çš„å€æ•°åœ¨ä¹‹å‰å·²ç»è¢«å…¶ä»–è´¨æ•°æ ‡è®°è¿‡ï¼Œå› æ­¤ä» `i * i` å¼€å§‹ç­›é€‰ã€‚

4. **ç»Ÿè®¡è´¨æ•°ä¸ªæ•°**ï¼š

   - éå† `seen` æ•°ç»„ï¼Œè®¡ç®—æœªè¢«æ ‡è®°çš„æ•°ï¼ˆè´¨æ•°ï¼‰çš„æ•°é‡ã€‚

5. **è¿”å›ç»“æœ**ï¼š
   - è¿”å›è®¡æ•°å€¼ `res`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n log log n)`ï¼Œå¤–å±‚å¾ªç¯éå†æ‰€æœ‰æ•° `2` åˆ° `n-1`ï¼Œä½†æ¯ä¸ªæ•°çš„å€æ•°æœ€å¤šè¢«æ ‡è®°ä¸€æ¬¡ï¼Œå› æ­¤æ•´ä½“å¤æ‚åº¦ä¸º `O(n log log n)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œä½¿ç”¨ä¸€ä¸ªå¤§å°ä¸º `n` çš„æ•°ç»„ `seen` æ¥æ ‡è®°æ•°å­—ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} n
 * @return {number}
 */
var countPrimes = function (n) {
	let res = 0;
	let seen = new Array(n).fill(0);

	// éå†ä» 2 åˆ° n-1 çš„æ‰€æœ‰æ•°
	for (let i = 2; i < n; i++) {
		if (seen[i]) continue; // å¦‚æœå·²æ ‡è®°ä¸ºåˆæ•°ï¼Œè·³è¿‡

		res++; // å½“å‰æ•°æ˜¯è´¨æ•°
		for (let j = i * i; j < n; j += i) {
			seen[j] = 1; // æ ‡è®°æ‰€æœ‰ i çš„å€æ•°ä¸ºåˆæ•°
		}
	}

	return res;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 263 | ä¸‘æ•° | [[âœ“]](/problem/0263.md) |  [`æ•°å­¦`](/tag/math.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/ugly-number) [ğŸ”—](https://leetcode.com/problems/ugly-number) |
| 264 | ä¸‘æ•° II | [[âœ“]](/problem/0264.md) |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ•°å­¦`](/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/ugly-number-ii) [ğŸ”—](https://leetcode.com/problems/ugly-number-ii) |
| 279 | å®Œå…¨å¹³æ–¹æ•° | [[âœ“]](/problem/0279.md) |  [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`æ•°å­¦`](/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/perfect-squares) [ğŸ”—](https://leetcode.com/problems/perfect-squares) |
| 2427 | å…¬å› å­çš„æ•°ç›® |  |  [`æ•°å­¦`](/tag/math.md) [`æšä¸¾`](/tag/enumeration.md) [`æ•°è®º`](/tag/number-theory.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/number-of-common-factors) [ğŸ”—](https://leetcode.com/problems/number-of-common-factors) |
| 2761 | å’Œç­‰äºç›®æ ‡å€¼çš„è´¨æ•°å¯¹ |  |  [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`æšä¸¾`](/tag/enumeration.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/prime-pairs-with-target-sum) [ğŸ”—](https://leetcode.com/problems/prime-pairs-with-target-sum) |
| 3233 | ç»Ÿè®¡ä¸æ˜¯ç‰¹æ®Šæ•°å­—çš„æ•°å­—æ•°é‡ |  |  [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`æ•°è®º`](/tag/number-theory.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/find-the-count-of-numbers-which-are-not-special) [ğŸ”—](https://leetcode.com/problems/find-the-count-of-numbers-which-are-not-special) |