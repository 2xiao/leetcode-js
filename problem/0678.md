# [678. æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²](https://leetcode.com/problems/valid-parenthesis-string)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`è´ªå¿ƒ`](/tag/greedy.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/valid-parenthesis-string)

## é¢˜ç›®

Given a string `s` containing only three types of characters: `'('`, `')'` and
`'*'`, return `true` _if_ `s` _is **valid**_.

The following rules define a **valid** string:

- Any left parenthesis `'('` must have a corresponding right parenthesis `')'`.
- Any right parenthesis `')'` must have a corresponding left parenthesis `'('`.
- Left parenthesis `'('` must go before the corresponding right parenthesis `')'`.
- `'*'` could be treated as a single right parenthesis `')'` or a single left parenthesis `'('` or an empty string `""`.

**Example 1:**

> Input: s = "()"
>
> Output: true

**Example 2:**

> Input: s = "(\*)"
>
> Output: true

**Example 3:**

> Input: s = "(\*))"
>
> Output: true

**Constraints:**

- `1 <= s.length <= 100`
- `s[i]` is `'('`, `')'` or `'*'`.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªåªåŒ…å«ä¸‰ç§å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œæ”¯æŒçš„å­—ç¬¦ç±»å‹åˆ†åˆ«æ˜¯ `'('`ã€`')'` å’Œ `'*'`ã€‚è¯·ä½ æ£€éªŒè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºæœ‰æ•ˆå­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²è¿”å› `true` ã€‚

æœ‰æ•ˆå­—ç¬¦ä¸²ç¬¦åˆå¦‚ä¸‹è§„åˆ™ï¼š

- ä»»ä½•å·¦æ‹¬å· `'('` å¿…é¡»æœ‰ç›¸åº”çš„å³æ‹¬å· `')'`ã€‚
- ä»»ä½•å³æ‹¬å· `')'` å¿…é¡»æœ‰ç›¸åº”çš„å·¦æ‹¬å· `'('` ã€‚
- å·¦æ‹¬å· `'('` å¿…é¡»åœ¨å¯¹åº”çš„å³æ‹¬å·ä¹‹å‰ `')'`ã€‚
- `'*'` å¯ä»¥è¢«è§†ä¸ºå•ä¸ªå³æ‹¬å· `')'` ï¼Œæˆ–å•ä¸ªå·¦æ‹¬å· `'('` ï¼Œæˆ–ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚
- ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ä¹Ÿè¢«è§†ä¸ºæœ‰æ•ˆå­—ç¬¦ä¸²ã€‚

## è§£é¢˜æ€è·¯

æ‹¬å·åŒ¹é…çš„é—®é¢˜å¯ä»¥ç”¨æ ˆæ±‚è§£ã€‚

å¦‚æœå­—ç¬¦ä¸²ä¸­æ²¡æœ‰æ˜Ÿå·ï¼Œåˆ™åªéœ€è¦ä¸€ä¸ªæ ˆå­˜å‚¨å·¦æ‹¬å·ï¼Œä»å·¦åˆ°å³éå†å­—ç¬¦ä¸²çš„è¿‡ç¨‹ä¸­æ£€æŸ¥æ‹¬å·æ˜¯å¦åŒ¹é…ã€‚

åœ¨æœ‰æ˜Ÿå·çš„æƒ…å†µä¸‹ï¼Œéœ€è¦ä¸¤ä¸ªæ ˆåˆ†åˆ«å­˜å‚¨å·¦æ‹¬å·å’Œæ˜Ÿå·ã€‚ä»å·¦åˆ°å³éå†å­—ç¬¦ä¸²ï¼š

- å¦‚æœé‡åˆ°å·¦æ‹¬å·ï¼Œåˆ™å°†å½“å‰ä¸‹æ ‡å­˜å…¥å·¦æ‹¬å·æ ˆã€‚
- å¦‚æœé‡åˆ°æ˜Ÿå·ï¼Œåˆ™å°†å½“å‰ä¸‹æ ‡å­˜å…¥æ˜Ÿå·æ ˆã€‚
- å¦‚æœé‡åˆ°å³æ‹¬å·ï¼Œåˆ™éœ€è¦æœ‰ä¸€ä¸ªå·¦æ‹¬å·æˆ–æ˜Ÿå·è¿›è¡ŒåŒ¹é…ï¼Œç”±äºæ˜Ÿå·ä¹Ÿå¯ä»¥çœ‹æˆå³æ‹¬å·æˆ–è€…ç©ºå­—ç¬¦ä¸²ï¼Œå› æ­¤å½“å‰çš„å³æ‹¬å·åº”ä¼˜å…ˆå’Œå·¦æ‹¬å·åŒ¹é…ï¼Œæ²¡æœ‰å·¦æ‹¬å·æ—¶å†å’Œæ˜Ÿå·åŒ¹é…ï¼š
  1. å¦‚æœå·¦æ‹¬å·æ ˆä¸ä¸ºç©ºï¼Œåˆ™ä»å·¦æ‹¬å·æ ˆå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼›
  2. å¦‚æœå·¦æ‹¬å·æ ˆä¸ºç©ºä¸”æ˜Ÿå·æ ˆä¸ä¸ºç©ºï¼Œåˆ™ä»æ˜Ÿå·æ ˆå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼›
  3. å¦‚æœå·¦æ‹¬å·æ ˆå’Œæ˜Ÿå·æ ˆéƒ½ä¸ºç©ºï¼Œåˆ™æ²¡æœ‰å­—ç¬¦å¯ä»¥å’Œå½“å‰çš„å³æ‹¬å·åŒ¹é…ï¼Œè¿”å› `false`ã€‚

éå†ç»“æŸä¹‹åï¼Œå·¦æ‹¬å·æ ˆå’Œæ˜Ÿå·æ ˆå¯èƒ½è¿˜æœ‰å…ƒç´ ã€‚ä¸ºäº†å°†æ¯ä¸ªå·¦æ‹¬å·åŒ¹é…ï¼Œéœ€è¦å°†æ˜Ÿå·çœ‹æˆå³æ‹¬å·ï¼Œä¸”æ¯ä¸ªå·¦æ‹¬å·å¿…é¡»å‡ºç°åœ¨å…¶åŒ¹é…çš„æ˜Ÿå·ä¹‹å‰ã€‚å½“ä¸¤ä¸ªæ ˆéƒ½ä¸ä¸ºç©ºæ—¶ï¼Œæ¯æ¬¡ä»å·¦æ‹¬å·æ ˆå’Œæ˜Ÿå·æ ˆåˆ†åˆ«å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¯¹åº”å·¦æ‹¬å·ä¸‹æ ‡å’Œæ˜Ÿå·ä¸‹æ ‡ï¼Œå¦‚æœå·¦æ‹¬å·ä¸‹æ ‡å¤§äºæ˜Ÿå·ä¸‹æ ‡åˆ™è¿”å› `false`ã€‚

æœ€ç»ˆåˆ¤æ–­å·¦æ‹¬å·æ ˆæ˜¯å¦ä¸ºç©ºã€‚å¦‚æœå·¦æ‹¬å·æ ˆä¸ºç©ºï¼Œåˆ™å·¦æ‹¬å·å…¨éƒ¨åŒ¹é…å®Œæ¯•ï¼Œå‰©ä¸‹çš„æ˜Ÿå·éƒ½å¯ä»¥çœ‹æˆç©ºå­—ç¬¦ä¸²ï¼Œæ­¤æ—¶ `s` æ˜¯æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²ï¼Œè¿”å› `true`ã€‚å¦‚æœå·¦æ‹¬å·æ ˆä¸ä¸ºç©ºï¼Œåˆ™è¿˜æœ‰å·¦æ‹¬å·æ— æ³•åŒ¹é…ï¼Œæ­¤æ—¶ `s` ä¸æ˜¯æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²ï¼Œè¿”å› `false`ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {boolean}
 */
var checkValidString = function (s) {
	let pt_stack = [];
	let star_stack = [];
	for (let i = 0; i < s.length; i++) {
		if (s[i] === '(') pt_stack.push(i);
		else if (s[i] === '*') star_stack.push(i);
		else {
			if (pt_stack.length) pt_stack.pop();
			else if (star_stack.length) star_stack.pop();
			else return false;
		}
	}
	while (pt_stack.length && star_stack.length) {
		if (pt_stack[pt_stack.length - 1] > star_stack[star_stack.length - 1]) {
			return false;
		}
		pt_stack.pop();
		star_stack.pop();
	}
	return pt_stack.length === 0;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 761 | [ç‰¹æ®Šçš„äºŒè¿›åˆ¶åºåˆ—](https://leetcode.com/problems/special-binary-string) |  |  [`é€’å½’`](/tag/recursion.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | <font color=#ff334b>Hard</font> |
| 2116 | [åˆ¤æ–­ä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆ](https://leetcode.com/problems/check-if-a-parentheses-string-can-be-valid) |  |  [`æ ˆ`](/tag/stack.md) [`è´ªå¿ƒ`](/tag/greedy.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | <font color=#ffb800>Medium</font> |