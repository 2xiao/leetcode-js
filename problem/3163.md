# [3163. å‹ç¼©å­—ç¬¦ä¸² III](https://2xiao.github.io/leetcode-js/problem/3163.html)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/string-compression-iii) [`LeetCode`](https://leetcode.com/problems/string-compression-iii)

## é¢˜ç›®

Given a string `word`, compress it using the following algorithm:

- Begin with an empty string `comp`. While `word` is **not** empty, use the following operation:
- Remove a maximum length prefix of `word` made of a _single character_ `c` repeating **at most** 9 times.
- Append the length of the prefix followed by `c` to `comp`.

Return the string `comp`.

**Example 1:**

**Input:** word = "abcde"

**Output:** "1a1b1c1d1e"

**Explanation:**

Initially, `comp = ""`. Apply the operation 5 times, choosing `"a"`, `"b"`,
`"c"`, `"d"`, and `"e"` as the prefix in each operation.

For each prefix, append `"1"` followed by the character to `comp`.

**Example 2:**

**Input:** word = "aaaaaaaaaaaaaabb"

**Output:** "9a5a2b"

**Explanation:**

Initially, `comp = ""`. Apply the operation 3 times, choosing `"aaaaaaaaa"`,
`"aaaaa"`, and `"bb"` as the prefix in each operation.

- For prefix `"aaaaaaaaa"`, append `"9"` followed by `"a"` to `comp`.
- For prefix `"aaaaa"`, append `"5"` followed by `"a"` to `comp`.
- For prefix `"bb"`, append `"2"` followed by `"b"` to `comp`.

**Constraints:**

- `1 <= word.length <= 2 * 10^5`
- `word` consists only of lowercase English letters.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `word`ï¼Œè¯·ä½ ä½¿ç”¨ä»¥ä¸‹ç®—æ³•è¿›è¡Œå‹ç¼©ï¼š

- ä»ç©ºå­—ç¬¦ä¸² `comp` å¼€å§‹ã€‚å½“ `word` **ä¸ä¸ºç©º** æ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
- ç§»é™¤ `word` çš„æœ€é•¿å•å­—ç¬¦å‰ç¼€ï¼Œè¯¥å‰ç¼€ç”±å•ä¸€å­—ç¬¦ `c` é‡å¤å¤šæ¬¡ç»„æˆï¼Œä¸”è¯¥å‰ç¼€é•¿åº¦ **æœ€å¤š** ä¸º 9 ã€‚
- å°†å‰ç¼€çš„é•¿åº¦å’Œå­—ç¬¦ `c` è¿½åŠ åˆ° `comp` ã€‚

è¿”å›å­—ç¬¦ä¸² `comp` ã€‚

**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** word = "abcde"

**è¾“å‡ºï¼š** "1a1b1c1d1e"

**è§£é‡Šï¼š**

åˆå§‹æ—¶ï¼Œ`comp = ""` ã€‚è¿›è¡Œ 5 æ¬¡æ“ä½œï¼Œæ¯æ¬¡æ“ä½œåˆ†åˆ«é€‰æ‹© `"a"`ã€`"b"`ã€`"c"`ã€`"d"` å’Œ `"e"` ä½œä¸ºå‰ç¼€ã€‚

å¯¹æ¯ä¸ªå‰ç¼€ï¼Œå°† `"1"` å’Œå¯¹åº”çš„å­—ç¬¦è¿½åŠ åˆ° `comp`ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** word = "aaaaaaaaaaaaaabb"

**è¾“å‡ºï¼š** "9a5a2b"

**è§£é‡Šï¼š**

åˆå§‹æ—¶ï¼Œ`comp = ""`ã€‚è¿›è¡Œ 3 æ¬¡æ“ä½œï¼Œæ¯æ¬¡æ“ä½œåˆ†åˆ«é€‰æ‹© `"aaaaaaaaa"`ã€`"aaaaa"` å’Œ `"bb"` ä½œä¸ºå‰ç¼€ã€‚

- å¯¹äºå‰ç¼€ `"aaaaaaaaa"`ï¼Œå°† `"9"` å’Œ `"a"` è¿½åŠ åˆ° `comp`ã€‚
- å¯¹äºå‰ç¼€ `"aaaaa"`ï¼Œå°† `"5"` å’Œ `"a"` è¿½åŠ åˆ° `comp`ã€‚
- å¯¹äºå‰ç¼€ `"bb"`ï¼Œå°† `"2"` å’Œ `"b"` è¿½åŠ åˆ° `comp`ã€‚

**æç¤ºï¼š**

- `1 <= word.length <= 2 * 10^5`
- `word` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆã€‚

## è§£é¢˜æ€è·¯

1. **åˆå§‹åŒ–å˜é‡**ï¼š

   - åˆ›å»ºä¸€ä¸ªç©ºå­—ç¬¦ä¸² `comp` ç”¨äºå­˜å‚¨å‹ç¼©åçš„ç»“æœã€‚
   - ä½¿ç”¨ä¸€ä¸ªç´¢å¼• `i` ä» `0` å¼€å§‹éå† `word`ã€‚

2. **å¾ªç¯éå†å­—ç¬¦ä¸²**ï¼š

   - åœ¨å¾ªç¯ä¸­ï¼Œé¦–å…ˆé‡ç½® `count` ä¸º `0`ï¼Œç”¨æ¥è®¡æ•°å½“å‰å­—ç¬¦çš„è¿ç»­å‡ºç°æ¬¡æ•°ã€‚
   - ä½¿ç”¨ `curChar` è®°å½•å½“å‰å­—ç¬¦ã€‚

3. **è®¡ç®—å‰ç¼€é•¿åº¦**ï¼š

   - ä½¿ç”¨ä¸€ä¸ªåµŒå¥—çš„ `while` å¾ªç¯ï¼Œè®¡ç®—å½“å‰å­—ç¬¦çš„æœ€é•¿å‰ç¼€é•¿åº¦ã€‚æ¡ä»¶æ˜¯å½“å‰å­—ç¬¦ä¸ `curChar` ç›¸ç­‰å¹¶ä¸”è®¡æ•°å°äº `9`ã€‚
   - æ¯æ¬¡åŒ¹é…åˆ°ç›¸åŒå­—ç¬¦æ—¶ï¼Œå¢åŠ è®¡æ•°å¹¶ç§»åŠ¨ç´¢å¼• `i`ã€‚

4. **æ„å»ºå‹ç¼©å­—ç¬¦ä¸²**ï¼š

   - åœ¨å¤–å±‚å¾ªç¯ä¸­ï¼Œå°†å‰ç¼€é•¿åº¦å’Œå­—ç¬¦è¿½åŠ åˆ° `comp`ã€‚

5. **è¿”å›ç»“æœ**ï¼š
   - å½“å­—ç¬¦ä¸²éå†å®Œæˆåï¼Œè¿”å›æœ€ç»ˆçš„å‹ç¼©ç»“æœ `comp`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸² `word` çš„é•¿åº¦ï¼Œæ¯ä¸ªå­—ç¬¦æœ€å¤šè¢«éå†ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œåœ¨æœ€åæƒ…å†µä¸‹ï¼Œå‹ç¼©åçš„å­—ç¬¦ä¸²å¯èƒ½ä¸è¾“å…¥å­—ç¬¦ä¸²ç›¸åŒï¼ˆä¾‹å¦‚ï¼Œæ‰€æœ‰å­—ç¬¦éƒ½ä¸åŒï¼‰ï¼Œå› æ­¤éœ€è¦é¢å¤–çš„ç©ºé—´å­˜å‚¨ç»“æœã€‚

## ä»£ç 

```javascript
/**
 * @param {string} word
 * @return {string}
 */
var compressedString = function (word) {
	let comp = '';
	let i = 0;

	while (i < word.length) {
		let count = 0;
		let curChar = word[i];

		// è®¡ç®—å½“å‰å­—ç¬¦çš„å‰ç¼€é•¿åº¦ï¼ˆæœ€å¤šä¸º9ï¼‰
		while (i < word.length && word[i] === curChar && count < 9) {
			count++;
			i++;
		}

		// å°†å‰ç¼€çš„é•¿åº¦å’Œå­—ç¬¦è¿½åŠ åˆ° comp
		comp += count + curChar;
	}

	return comp;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 443 | [å‹ç¼©å­—ç¬¦ä¸²](https://leetcode.com/problems/string-compression) | [[âœ“]](/problem/0443.md) |  [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | <font color=#ffb800>Medium</font> |
| 1531 | [å‹ç¼©å­—ç¬¦ä¸² II](https://leetcode.com/problems/string-compression-ii) |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ff334b>Hard</font> |