# [502. IPO](https://leetcode.com/problems/ipo)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) [`æ’åº`](/tag/sorting.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/ipo)

## é¢˜ç›®

<p>å‡è®¾ åŠ›æ‰£ï¼ˆLeetCodeï¼‰å³å°†å¼€å§‹ <strong>IPO</strong> ã€‚ä¸ºäº†ä»¥æ›´é«˜çš„ä»·æ ¼å°†è‚¡ç¥¨å–ç»™é£é™©æŠ•èµ„å…¬å¸ï¼ŒåŠ›æ‰£ å¸Œæœ›åœ¨ IPO ä¹‹å‰å¼€å±•ä¸€äº›é¡¹ç›®ä»¥å¢åŠ å…¶èµ„æœ¬ã€‚ ç”±äºèµ„æºæœ‰é™ï¼Œå®ƒåªèƒ½åœ¨ IPO ä¹‹å‰å®Œæˆæœ€å¤š <code>k</code> ä¸ªä¸åŒçš„é¡¹ç›®ã€‚å¸®åŠ© åŠ›æ‰£ è®¾è®¡å®Œæˆæœ€å¤š <code>k</code> ä¸ªä¸åŒé¡¹ç›®åå¾—åˆ°æœ€å¤§æ€»èµ„æœ¬çš„æ–¹å¼ã€‚</p>

<p>ç»™ä½  <code>n</code> ä¸ªé¡¹ç›®ã€‚å¯¹äºæ¯ä¸ªé¡¹ç›® <code>i</code><strong> </strong>ï¼Œå®ƒéƒ½æœ‰ä¸€ä¸ªçº¯åˆ©æ¶¦ <code>profits[i]</code> ï¼Œå’Œå¯åŠ¨è¯¥é¡¹ç›®éœ€è¦çš„æœ€å°èµ„æœ¬ <code>capital[i]</code> ã€‚</p>

<p>æœ€åˆï¼Œä½ çš„èµ„æœ¬ä¸º <code>w</code> ã€‚å½“ä½ å®Œæˆä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œä½ å°†è·å¾—çº¯åˆ©æ¶¦ï¼Œä¸”åˆ©æ¶¦å°†è¢«æ·»åŠ åˆ°ä½ çš„æ€»èµ„æœ¬ä¸­ã€‚</p>

<p>æ€»è€Œè¨€ä¹‹ï¼Œä»ç»™å®šé¡¹ç›®ä¸­é€‰æ‹© <strong>æœ€å¤š</strong> <code>k</code> ä¸ªä¸åŒé¡¹ç›®çš„åˆ—è¡¨ï¼Œä»¥ <strong>æœ€å¤§åŒ–æœ€ç»ˆèµ„æœ¬</strong> ï¼Œå¹¶è¾“å‡ºæœ€ç»ˆå¯è·å¾—çš„æœ€å¤šèµ„æœ¬ã€‚</p>

<p>ç­”æ¡ˆä¿è¯åœ¨ 32 ä½æœ‰ç¬¦å·æ•´æ•°èŒƒå›´å†…ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>k = 2, w = 0, profits = [1,2,3], capital = [0,1,1]
<strong>è¾“å‡ºï¼š</strong>4
<strong>è§£é‡Šï¼š
</strong>ç”±äºä½ çš„åˆå§‹èµ„æœ¬ä¸º 0ï¼Œä½ ä»…å¯ä»¥ä» 0 å·é¡¹ç›®å¼€å§‹ã€‚
åœ¨å®Œæˆåï¼Œä½ å°†è·å¾— 1 çš„åˆ©æ¶¦ï¼Œä½ çš„æ€»èµ„æœ¬å°†å˜ä¸º 1ã€‚
æ­¤æ—¶ä½ å¯ä»¥é€‰æ‹©å¼€å§‹ 1 å·æˆ– 2 å·é¡¹ç›®ã€‚
ç”±äºä½ æœ€å¤šå¯ä»¥é€‰æ‹©ä¸¤ä¸ªé¡¹ç›®ï¼Œæ‰€ä»¥ä½ éœ€è¦å®Œæˆ 2 å·é¡¹ç›®ä»¥è·å¾—æœ€å¤§çš„èµ„æœ¬ã€‚
å› æ­¤ï¼Œè¾“å‡ºæœ€åæœ€å¤§åŒ–çš„èµ„æœ¬ï¼Œä¸º 0 + 1 + 3 = 4ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>k = 3, w = 0, profits = [1,2,3], capital = [0,1,2]
<strong>è¾“å‡ºï¼š</strong>6
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= k &lt;= 10<sup>5</sup></code></li>
	<li><code>0 &lt;= w &lt;= 10<sup>9</sup></code></li>
	<li><code>n == profits.length</code></li>
	<li><code>n == capital.length</code></li>
	<li><code>1 &lt;= n &lt;= 10<sup>5</sup></code></li>
	<li><code>0 &lt;= profits[i] &lt;= 10<sup>4</sup></code></li>
	<li><code>0 &lt;= capital[i] &lt;= 10<sup>9</sup></code></li>
</ul>


## è§£é¢˜æ€è·¯

å¯ä»¥é€šè¿‡ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå †ï¼‰æ¥è§£å†³ã€‚æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå¤§é¡¶å †ã€‚æ¯æ¬¡å°†æ€»èµ„æœ¬å…è®¸çš„æ¡ä»¶ä¸‹æ‰€æœ‰é¡¹ç›®çš„åˆ©æ¶¦åŠ å…¥å †ä¸­ï¼Œå¹¶å¼¹å‡ºå †é¡¶å…ƒç´ ï¼Œå°†å…¶åŠ å…¥åˆ°æ€»åˆ©æ¶¦ä¸­ï¼Œç›´åˆ°åšå®Œäº† `k` ä¸ªä¸åŒé¡¹ç›®ï¼Œæœ€ç»ˆè¿”å›æ€»åˆ©æ¶¦ã€‚

1. å°†é¡¹ç›®çš„æˆæœ¬å’Œåˆ©æ¶¦æˆå¯¹åŠ å…¥åˆ°æ•°ç»„ `vp` ä¸­ï¼Œå¹¶æŒ‰ç…§æˆæœ¬å‡åºæ’åºï¼›
2. æ„å»ºä¸€ä¸ªå¤§é¡¶å † heap ï¼Œå †ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯é¡¹ç›®çš„åˆ©æ¶¦ï¼›
3. é‡å¤ä»¥ä¸‹æ­¥éª¤ `k` æ¬¡ï¼š
   - å°†æ‰€æœ‰æˆæœ¬ `capital` å°äºæ€»èµ„æœ¬ `totalProfit` çš„é¡¹ç›®åŠ å…¥å †ä¸­ï¼›
   - å¼¹å‡ºå †é¡¶å…ƒç´ ï¼Œå¹¶å°†æ›´æ–°åŠ å…¥æ€»èµ„æœ¬ `totalProfit` ä¸­ï¼›
4. è¿”å›æ€»èµ„æœ¬ `totalProfit`ï¼›

## ä»£ç 

```javascript
/**
 * @param {number} k
 * @param {number} w
 * @param {number[]} profits
 * @param {number[]} capital
 * @return {number}
 */
var findMaximizedCapital = function (k, w, profits, capital) {
	let heap = [];
	const insert = (value) => {
		heap.push(value);
		heapifyUp(heap.length - 1);
	};

	const pop = () => {
		if (heap.length == 0) return null;
		const max = heap[0],
			min = heap.pop();
		if (heap.length > 0) {
			heap[0] = min;
			heapifyDown(0);
		}
		return max;
	};

	const heapifyUp = (i) => {
		while (i) {
			const parent = ((i - 1) / 2) | 0;
			if (heap[i] > heap[parent]) {
				[heap[i], heap[parent]] = [heap[parent], heap[i]];
				i = parent;
			} else {
				break;
			}
		}
	};

	const heapifyDown = (i) => {
		let left = i * 2 + 1,
			right = i * 2 + 2,
			min = i;
		if (left < heap.length && heap[left] > heap[min]) {
			min = left;
		}
		if (right < heap.length && heap[right] > heap[min]) {
			min = right;
		}
		if (min !== i) {
			[heap[min], heap[i]] = [heap[i], heap[min]];
			heapifyDown(min);
		}
	};

	let vp = [],
		len = profits.length;

	for (let i = 0; i < len; i++) {
		vp.push([capital[i], profits[i]]);
	}
	vp.sort((a, b) => a[0] - b[0]);

	let totalProfit = w,
		count = 0;
	for (let i = 0; i < k; i++) {
		while (count < len && vp[count][0] <= totalProfit) {
			insert(vp[count][1]);
			count++;
		}
		if (heap.length == 0) {
			break;
		}
		totalProfit += pop();
	}
	return totalProfit;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2542 | [æœ€å¤§å­åºåˆ—çš„åˆ†æ•°](https://leetcode.com/problems/maximum-subsequence-score) |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) [`æ’åº`](/tag/sorting.md) `1+` | <font color=#ffb800>Medium</font> |
| 2813 | [å­åºåˆ—æœ€å¤§ä¼˜é›…åº¦](https://leetcode.com/problems/maximum-elegance-of-a-k-length-subsequence) |  |  [`æ ˆ`](/tag/stack.md) [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) `3+` | <font color=#ff334b>Hard</font> |