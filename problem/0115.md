---
title: 115. ä¸åŒçš„å­åºåˆ—
description: LeetCode 115. ä¸åŒçš„å­åºåˆ—é¢˜è§£ï¼ŒDistinct Subsequencesï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 115. ä¸åŒçš„å­åºåˆ—
  - ä¸åŒçš„å­åºåˆ—
  - Distinct Subsequences
  - è§£é¢˜æ€è·¯
  - å­—ç¬¦ä¸²
  - åŠ¨æ€è§„åˆ’
---

# 115. ä¸åŒçš„å­åºåˆ—

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/distinct-subsequences) [`LeetCode`](https://leetcode.com/problems/distinct-subsequences)

## é¢˜ç›®

Given two strings s and t, return _the number of distinct_ **_subsequences_**
_of_ s _which equals_ t.

The test cases are generated so that the answer fits on a 32-bit signed
integer.

**Example 1:**

> Input: s = "rabbbit", t = "rabbit"
>
> Output: 3
>
> Explanation:
>
> As shown below, there are 3 ways you can generate "rabbit" from s.
>
> **_rabb_** b** _it_**
>
> **_ra_** b** _bbit_**
>
> **_rab_** b** _bit_**

**Example 2:**

> Input: s = "babgbag", t = "bag"
>
> Output: 5
>
> Explanation:
>
> As shown below, there are 5 ways you can generate "bag" from s.
>
> **_ba_** b _**g**_ bag
>
> **_ba_** bgba** _g_**
>
> _**b**_ abgb** _ag_**
>
> ba _**b**_ gb _**ag**_
>
> babg** _bag_**

**Constraints:**

- `1 <= s.length, t.length <= 1000`
- `s` and `t` consist of English letters.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² `s` å’Œ `t` ï¼Œç»Ÿè®¡å¹¶è¿”å›åœ¨ `s` çš„ å­åºåˆ— ä¸­ `t` å‡ºç°çš„ä¸ªæ•°ï¼Œç»“æœéœ€è¦å¯¹ `10^9 + 7` å–æ¨¡ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** s = "rabbbit", t = "rabbit"
>
> **è¾“å‡º**ï¼š3
>
> **è§£é‡Šï¼š**
>
> å¦‚ä¸‹æ‰€ç¤º, æœ‰ 3 ç§å¯ä»¥ä» s ä¸­å¾—åˆ° "rabbit" çš„æ–¹æ¡ˆã€‚
>
> **_rabb_** b** _it_**
>
> **_ra_** b** _bbit_**
>
> **_rab_** b** _bit_**

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = "babgbag", t = "bag"
>
> **è¾“å‡º**ï¼š5
>
> **è§£é‡Šï¼š**
>
> å¦‚ä¸‹æ‰€ç¤º, æœ‰ 5 ç§å¯ä»¥ä» s ä¸­å¾—åˆ° "bag" çš„æ–¹æ¡ˆã€‚
>
> **_ba_** b _**g**_ bag
>
> **_ba_** bgba** _g_**
>
> _**b**_ abgb** _ag_**
>
> ba _**b**_ gb _**ag**_
>
> babg** _bag_**

**æç¤ºï¼š**

- `1 <= s.length, t.length <= 1000`
- `s` å’Œ `t` ç”±è‹±æ–‡å­—æ¯ç»„æˆ

## è§£é¢˜æ€è·¯

1. **å®šä¹‰ `dp[i][j]`**ï¼š

   - `dp[i][j]` ä»£è¡¨ **å‰ `i` ä¸ªå­—ç¬¦çš„ `s` ä¸­ï¼Œå‰ `j` ä¸ªå­—ç¬¦çš„ `t` å‡ºç°çš„å­åºåˆ—ä¸ªæ•°**ã€‚

2. **åˆå§‹åŒ–**ï¼š

   - `dp[i][0] = 1`ï¼ˆç©ºå­—ç¬¦ä¸² `t` æ˜¯ `s` çš„ä¸€ä¸ªå­åºåˆ—ï¼‰ã€‚
   - `dp[0][j] = 0`ï¼ˆéç©º `t` ä¸èƒ½ä»ç©º `s` å½¢æˆï¼‰ã€‚

3. **çŠ¶æ€è½¬ç§»**ï¼š
   - **å¦‚æœ `s[i-1] == t[j-1]`**ï¼Œä¸¤ç§é€‰æ‹©ï¼š
     - å– `s[i-1]`ï¼š`dp[i-1][j-1]`
     - ä¸å– `s[i-1]`ï¼š`dp[i-1][j]`
     - çŠ¶æ€æ–¹ç¨‹ï¼š
       `dp[i][j] = dp[i-1][j] + dp[i-1][j-1]`
   - **å¦åˆ™**ï¼š
     - ä¸èƒ½åŒ¹é… `t[j-1]`ï¼Œåªèƒ½ç»§æ‰¿ `dp[i-1][j]`ï¼š
       `dp[i][j] = dp[i-1][j]`
4. **æ»šåŠ¨æ•°ç»„ä¼˜åŒ–**ï¼š
   - `dp[i][j]` åªä¾èµ– `dp[i-1][j]` å’Œ `dp[i-1][j-1]`ï¼Œå¯ä»¥ç”¨ **ä¸€ç»´æ•°ç»„** é™ä½ç©ºé—´å¤æ‚åº¦åˆ° `O(n)`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼ŒåŒå±‚å¾ªç¯éå† `s` å’Œ `t`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œ`dp` æ•°ç»„å­˜å‚¨å­åºåˆ—æ•°é‡ï¼Œå¯ä»¥ç”¨ **ä¸€ç»´æ•°ç»„** é™ä½ç©ºé—´å¤æ‚åº¦åˆ° `O(n)`ã€‚

## ä»£ç 

::: code-tabs
@tab åŠ¨æ€è§„åˆ’

```javascript
/**
 * @param {string} s
 * @param {string} t
 * @return {number}
 */
var numDistinct = function (s, t) {
	const m = s.length,
		n = t.length;
	const dp = Array(m + 1)
		.fill()
		.map(() => Array(n + 1).fill(0));

	for (let i = 0; i <= m; i++) dp[i][0] = 1;

	for (let i = 1; i <= m; i++) {
		for (let j = 1; j <= n; j++) {
			dp[i][j] = dp[i - 1][j];
			if (s[i - 1] === t[j - 1]) {
				dp[i][j] += dp[i - 1][j - 1];
			}
		}
	}
	return dp[m][n];
};
```

@tab æ»šåŠ¨æ•°ç»„ä¼˜åŒ–

```javascript
/**
 * @param {string} s
 * @param {string} t
 * @return {number}
 */
var numDistinct = function (s, t) {
	const m = s.length,
		n = t.length;
	let dp = new Array(n + 1).fill(0);
	dp[0] = 1;

	for (let i = 1; i <= m; i++) {
		for (let j = n; j > 0; j--) {
			if (s[i - 1] === t[j - 1]) {
				dp[j] += dp[j - 1];
			}
		}
	}
	return dp[n];
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1987 | ä¸åŒçš„å¥½å­åºåˆ—æ•°ç›® |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/number-of-unique-good-subsequences) [ğŸ”—](https://leetcode.com/problems/number-of-unique-good-subsequences) |