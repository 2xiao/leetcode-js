# [202. å¿«ä¹æ•°](https://leetcode.com/problems/happy-number)

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ•°å­¦`](/tag/math.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/happy-number)

## é¢˜ç›®

Write an algorithm to determine if a number `n` is happy.

A **happy number** is a number defined by the following process:

- Starting with any positive integer, replace the number by the sum of the squares of its digits.
- Repeat the process until the number equals 1 (where it will stay), or it **loops endlessly in a cycle** which does not include 1.
- Those numbers for which this process **ends in 1** are happy.

Return `true` _if_ `n` _is a happy number, and_ `false` _if not_.

**Example 1:**

> Input: n = 19
>
> Output: true
>
> Explanation:
>
> 12 + 92 = 82
>
> 82 + 22 = 68
>
> 62 + 82 = 100
>
> 12 + 02 + 02 = 1

**Example 2:**

> Input: n = 2
>
> Output: false

**Constraints:**

- `1 <= n <= 2^31 - 1`

## é¢˜ç›®å¤§æ„

ç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•° `n` æ˜¯ä¸æ˜¯å¿«ä¹æ•°ã€‚

**ã€Œå¿«ä¹æ•°ã€** å®šä¹‰ä¸ºï¼š

- å¯¹äºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å°†è¯¥æ•°æ›¿æ¢ä¸ºå®ƒæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œã€‚
- ç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°è¿™ä¸ªæ•°å˜ä¸º 1ï¼Œä¹Ÿå¯èƒ½æ˜¯ **æ— é™å¾ªç¯** ä½†å§‹ç»ˆå˜ä¸åˆ° 1ã€‚
- å¦‚æœè¿™ä¸ªè¿‡ç¨‹ **ç»“æœä¸º 1**ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯å¿«ä¹æ•°ã€‚

å¦‚æœ `n` æ˜¯ _å¿«ä¹æ•°_ å°±è¿”å› `true` ï¼›ä¸æ˜¯ï¼Œåˆ™è¿”å› `false` ã€‚

## è§£é¢˜æ€è·¯

è¿™é“é¢˜éœ€è¦æ³¨æ„å¾ªç¯ä¸å¿«ä¹æ•°ï¼Œæ¯”å¦‚ `4` :

      1. 4^2 = 16
      2. 1^2 + 6^2 = 37
      3. 3^2 + 7^2 = 58
      4. 5^2 + 8^2 = 89
      5. 8^2 + 9^2 = 145
      6. 1^2 + 4^2 + 5^2 = 42
      7. 4^2 + 2^2 = 20
      8. 2^2 + 0^2 = 4

åœ¨ç¬¬ 8 æ­¥æ—¶ï¼Œæˆ‘ä»¬åˆå›åˆ°äº†æ•°å­— `4`ï¼Œä¹‹åçš„è®¡ç®—è¿‡ç¨‹ä¼šé™·å…¥æ— é™å¾ªç¯ã€‚

ä¸ºäº†é˜²æ­¢ç¨‹åºè¿›å…¥æ­»å¾ªç¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªé›†åˆæ¥è®°å½•æ¯æ¬¡å˜æ¢åçš„ç»“æœï¼Œå¦‚æœåœ¨å˜æ¢çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†å·²ç»åœ¨é›†åˆä¸­çš„æ•°å­—ï¼Œå°±è¯´æ˜é™·å…¥äº†å¾ªç¯ï¼Œè¿™ä¸ªæ•°ä¸æ˜¯å¿«ä¹æ•°ã€‚å…·ä½“çš„æ­¥éª¤å¦‚ä¸‹ï¼š

1. **å®šä¹‰ä¸€ä¸ªå˜æ¢å‡½æ•°**ï¼šç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªæ•°å­—ï¼Œè®¡ç®—å…¶æ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œã€‚

2. **ä½¿ç”¨é›†åˆè®°å½•**ï¼šä½¿ç”¨ä¸€ä¸ªé›†åˆï¼ˆæˆ–å“ˆå¸Œè¡¨ï¼‰æ¥è®°å½•æ¯æ¬¡å˜æ¢åçš„ç»“æœï¼Œä»¥æ£€æŸ¥æ˜¯å¦é™·å…¥å¾ªç¯ã€‚

3. **è¿­ä»£æ£€æŸ¥**ï¼šå¯¹äºç»™å®šçš„æ•°å­— `n`ï¼Œä¸æ–­è¿›è¡Œå˜æ¢ï¼Œæ£€æŸ¥å˜æ¢åçš„ç»“æœæ˜¯å¦ä¸º `1` æˆ–è€…æ˜¯å¦å·²ç»åœ¨é›†åˆä¸­ã€‚å¦‚æœæ˜¯ï¼Œè¯´æ˜æ˜¯å¿«ä¹æ•°ï¼›å¦‚æœä¸æ˜¯ï¼Œç»§ç»­è¿­ä»£ã€‚

4. **è¿”å›ç»“æœ**ï¼šæœ€ç»ˆï¼Œå¦‚æœå¾ªç¯ç»“æŸäº†ï¼ˆå³æ²¡æœ‰é™·å…¥å¾ªç¯ï¼‰ï¼Œåˆ™è¯´æ˜è¿™ä¸ªæ•°å­—ä¸æ˜¯å¿«ä¹æ•°ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(logN)`ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨é›†åˆè®°å½•å˜æ¢åçš„ç»“æœï¼Œè€Œæ¯ä¸ªæ•°å­—æœ€å¤šä¼šè¢«è®°å½•ä¸€æ¬¡ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º `O(logN)`ï¼Œå…¶ä¸­ N æ˜¯æ•°å­—çš„å¤§å°ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(logN)`ï¼Œä½¿ç”¨äº†ä¸€ä¸ªé›†åˆæ¥è®°å½•å˜æ¢åçš„ç»“æœï¼Œæœ€åæƒ…å†µä¸‹ä¼šåŒ…å« `O(logN)` ä¸ªå…ƒç´ ã€‚

## ä»£ç 

```javascript
/**
 * @param {number} n
 * @return {boolean}
 */
var isHappy = function (n) {
	const getNext = (n) => {
		const arr = (n + '').split('');
		return arr.reduce((acc, num) => acc + Number(num) ** 2, 0);
	};

	let set = new Set();
	while (n !== 1 && !set.has(n)) {
		set.add(n);
		n = getNext(n);
	}

	return n == 1;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 141 | [ç¯å½¢é“¾è¡¨](https://leetcode.com/problems/linked-list-cycle) | [[âœ“]](/problem/0141.md) |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`é“¾è¡¨`](/tag/linked-list.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) | <font color=#15bd66>Easy</font> |
| 258 | [å„ä½ç›¸åŠ ](https://leetcode.com/problems/add-digits) |  |  [`æ•°å­¦`](/tag/math.md) [`æ•°è®º`](/tag/number-theory.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md) | <font color=#15bd66>Easy</font> |
| 263 | [ä¸‘æ•°](https://leetcode.com/problems/ugly-number) |  |  [`æ•°å­¦`](/tag/math.md) | <font color=#15bd66>Easy</font> |
| 1945 | [å­—ç¬¦ä¸²è½¬åŒ–åçš„å„ä½æ•°å­—ä¹‹å’Œ](https://leetcode.com/problems/sum-of-digits-of-string-after-convert) |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md) | <font color=#15bd66>Easy</font> |
| 2457 | [ç¾ä¸½æ•´æ•°çš„æœ€å°å¢é‡](https://leetcode.com/problems/minimum-addition-to-make-integer-beautiful) |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°å­¦`](/tag/math.md) | <font color=#ffb800>Medium</font> |
| 2507 | [ä½¿ç”¨è´¨å› æ•°ä¹‹å’Œæ›¿æ¢åå¯ä»¥å–åˆ°çš„æœ€å°å€¼](https://leetcode.com/problems/smallest-value-after-replacing-with-sum-of-prime-factors) |  |  [`æ•°å­¦`](/tag/math.md) [`æ•°è®º`](/tag/number-theory.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md) | <font color=#ffb800>Medium</font> |
| 2520 | [ç»Ÿè®¡èƒ½æ•´é™¤æ•°å­—çš„ä½æ•°](https://leetcode.com/problems/count-the-digits-that-divide-a-number) |  |  [`æ•°å­¦`](/tag/math.md) | <font color=#15bd66>Easy</font> |