---
title: 1498. æ»¡è¶³æ¡ä»¶çš„å­åºåˆ—æ•°ç›®
description: LeetCode 1498. æ»¡è¶³æ¡ä»¶çš„å­åºåˆ—æ•°ç›®é¢˜è§£ï¼ŒNumber of Subsequences That Satisfy the Given Sum Conditionï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1498. æ»¡è¶³æ¡ä»¶çš„å­åºåˆ—æ•°ç›®
  - æ»¡è¶³æ¡ä»¶çš„å­åºåˆ—æ•°ç›®
  - Number of Subsequences That Satisfy the Given Sum Condition
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - åŒæŒ‡é’ˆ
  - äºŒåˆ†æŸ¥æ‰¾
  - æ’åº
---

# 1498. æ»¡è¶³æ¡ä»¶çš„å­åºåˆ—æ•°ç›®

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`æ’åº`](/tag/sorting.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/number-of-subsequences-that-satisfy-the-given-sum-condition) [`LeetCode`](https://leetcode.com/problems/number-of-subsequences-that-satisfy-the-given-sum-condition)

## é¢˜ç›®

You are given an array of integers `nums` and an integer `target`.

Return _the number of**non-empty** subsequences of _`nums` _such that the sum
of the minimum and maximum element on it is less or equal to_`target`. Since
the answer may be too large, return it **modulo** `10^9 + 7`.

**Example 1:**

> Input: nums = [3,5,6,7], target = 9
>
> Output: 4
>
> Explanation: There are 4 subsequences that satisfy the condition.
>
> [3] -> Min value + max value <= target (3 + 3 <= 9)
>
> [3,5] -> (3 + 5 <= 9)
>
> [3,5,6] -> (3 + 6 <= 9)
>
> [3,6] -> (3 + 6 <= 9)

**Example 2:**

> Input: nums = [3,3,6,8], target = 10
>
> Output: 6
>
> Explanation: There are 6 subsequences that satisfy the condition. (nums can have repeated numbers).
>
> [3] , [3] , [3,3], [3,6] , [3,6] , [3,3,6]

**Example 3:**

> Input: nums = [2,3,3,4,6,7], target = 12
>
> Output: 61
>
> Explanation: There are 63 non-empty subsequences, two of them do not satisfy the condition ([6,7], [7]).
>
> Number of valid subsequences (63 - 2 = 61).

**Constraints:**

- `1 <= nums.length <= 10^5`
- `1 <= nums[i] <= 10^6`
- `1 <= target <= 10^6`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `target` ã€‚

è¯·ä½ ç»Ÿè®¡å¹¶è¿”å› `nums` ä¸­èƒ½æ»¡è¶³å…¶æœ€å°å…ƒç´ ä¸æœ€å¤§å…ƒç´ çš„ **å’Œ** å°äºæˆ–ç­‰äº `target` çš„ **éç©º** å­åºåˆ—çš„æ•°ç›®ã€‚

ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¯·å°†ç»“æœå¯¹ `10^9 + 7` å–ä½™åè¿”å›ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** nums = [3,5,6,7], target = 9
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** æœ‰ 4 ä¸ªå­åºåˆ—æ»¡è¶³è¯¥æ¡ä»¶ã€‚
>
> [3] -> æœ€å°å…ƒç´  + æœ€å¤§å…ƒç´  <= target (3 + 3 <= 9)
>
> [3,5] -> (3 + 5 <= 9)
>
> [3,5,6] -> (3 + 6 <= 9)
>
> [3,6] -> (3 + 6 <= 9)

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** nums = [3,3,6,8], target = 10
>
> **è¾“å‡ºï¼š** 6
>
> **è§£é‡Šï¼š** æœ‰ 6 ä¸ªå­åºåˆ—æ»¡è¶³è¯¥æ¡ä»¶ã€‚ï¼ˆnums ä¸­å¯ä»¥æœ‰é‡å¤æ•°å­—ï¼‰
>
> [3] , [3] , [3,3], [3,6] , [3,6] , [3,3,6]

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** nums = [2,3,3,4,6,7], target = 12
>
> **è¾“å‡ºï¼š** 61
>
> **è§£é‡Šï¼š** å…±æœ‰ 63 ä¸ªéç©ºå­åºåˆ—ï¼Œå…¶ä¸­ 2 ä¸ªä¸æ»¡è¶³æ¡ä»¶ï¼ˆ[6,7], [7]ï¼‰
>
> æœ‰æ•ˆåºåˆ—æ€»æ•°ä¸ºï¼ˆ63 - 2 = 61ï¼‰

**æç¤ºï¼š**

- `1 <= nums.length <= 10^5`
- `1 <= nums[i] <= 10^6`
- `1 <= target <= 10^6`

## è§£é¢˜æ€è·¯

1. **å¯¹å­åºåˆ—çš„æ€§è´¨è¿›è¡Œåˆ†æï¼š**

   - ç»™å®šæ•°ç»„ `nums`ï¼Œå°†å…¶æŒ‰ç…§å‡åºæ’åˆ—ï¼Œè¿™æ ·å¯ä»¥ç®€åŒ–å­åºåˆ—çš„å¤„ç†ã€‚
   - å‡è®¾å­åºåˆ—çš„æœ€å°å…ƒç´ ä¸º `nums[i]`ï¼Œæœ€å¤§å…ƒç´ ä¸º `nums[j]`ï¼ˆ`i <= j`ï¼‰ã€‚
   - å¦‚æœ `nums[i] + nums[j] <= target`ï¼Œåˆ™æ‰€æœ‰ä» `nums[i]` åˆ° `nums[j]` çš„å­åºåˆ—éƒ½æ»¡è¶³æ¡ä»¶ï¼š
     - ä»¥ `nums[i]` ä¸ºæœ€å°å…ƒç´ ã€ä»¥ `nums[j]` ä¸ºæœ€å¤§å…ƒç´ çš„å­åºåˆ—æ•°ä¸º `2^(j - i)`ï¼ˆæ¯ä¸ªä½ç½®çš„å…ƒç´ å¯é€‰æˆ–ä¸é€‰ï¼‰ã€‚

2. **åŒæŒ‡é’ˆéå†ï¼š**

   - ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆ `i` å’Œ `j`ï¼Œåˆ†åˆ«æŒ‡å‘å­åºåˆ—çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚
   - åˆå§‹åŒ– `j = nums.length - 1`ï¼Œä»æœ€å¤§å€¼å¼€å§‹é€æ­¥ç¼©å°èŒƒå›´ã€‚
   - å¦‚æœå½“å‰ `nums[i] + nums[j] <= target`ï¼Œè®¡ç®—ä»¥ `nums[i]` ä¸ºèµ·ç‚¹çš„æ»¡è¶³æ¡ä»¶çš„å­åºåˆ—æ•°é‡ã€‚
   - å¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼Œå‡å° `j`ï¼Œç›´åˆ°æ»¡è¶³ä¸ºæ­¢ã€‚

3. **å¿«é€Ÿè®¡ç®—ç»„åˆæ•°ï¼š**

   - å¯¹äºæ¯å¯¹æ»¡è¶³æ¡ä»¶çš„ `i` å’Œ `j`ï¼Œéœ€è¦å¿«é€Ÿè®¡ç®— `2^(j - i)`ï¼Œä½¿ç”¨**é¢„è®¡ç®—**çš„æ–¹å¼åŠ é€Ÿï¼š
     - æ„é€ æ•°ç»„ `power`ï¼Œå…¶ä¸­ `power[k] = 2^k % (10^9 + 7)`ã€‚
     - æŸ¥è¯¢æ—¶å¯ä»¥ç›´æ¥å– `power[j - i]`ã€‚

4. **ç»“æœå–æ¨¡ï¼š**
   - æ‰€æœ‰å­åºåˆ—æ•°é‡åŠ æ€»åå¯¹ `10^9 + 7` å–æ¨¡ï¼Œé˜²æ­¢ç»“æœæº¢å‡ºã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n log n)`ï¼Œæ’åºè€—æ—¶ `O(n log n)`ï¼ŒåŒæŒ‡é’ˆéå†è€—æ—¶ `O(n)`ï¼Œæ•´ä½“æ—¶é—´å¤æ‚åº¦ä¸º `O(n log n)`ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œé¢„è®¡ç®—æ•°ç»„ `power` éœ€è¦ `O(n)` çš„é¢å¤–ç©ºé—´ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} nums
 * @param {number} target
 * @return {number}
 */
var numSubseq = function (nums, target) {
	const MOD = 1e9 + 7;
	nums.sort((a, b) => a - b); // æ’åºæ•°ç»„

	// é¢„è®¡ç®— 2^k % MOD
	let power = [1];
	for (let i = 1; i < nums.length; i++) {
		power.push((power[i - 1] * 2) % MOD);
	}

	let i = 0,
		j = nums.length - 1,
		result = 0;

	while (i <= j) {
		if (nums[i] + nums[j] > target) {
			// ç¼©å°æœ€å¤§å€¼
			j--;
		} else {
			// å­åºåˆ—æ•°ç›®
			result = (result + power[j - i]) % MOD;
			i++; // å¢å¤§æœ€å°å€¼
		}
	}

	return result;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 2835 | ä½¿å­åºåˆ—çš„å’Œç­‰äºç›®æ ‡çš„æœ€å°‘æ“ä½œæ¬¡æ•° |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/minimum-operations-to-form-subsequence-with-target-sum) [ğŸ”—](https://leetcode.com/problems/minimum-operations-to-form-subsequence-with-target-sum) |
| 3082 | æ±‚å‡ºæ‰€æœ‰å­åºåˆ—çš„èƒ½é‡å’Œ |  |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/find-the-sum-of-the-power-of-all-subsequences) [ğŸ”—](https://leetcode.com/problems/find-the-sum-of-the-power-of-all-subsequences) |
| 3098 | æ±‚å‡ºæ‰€æœ‰å­åºåˆ—çš„èƒ½é‡å’Œ |  |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`æ’åº`](/tag/sorting.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/find-the-sum-of-subsequence-powers) [ğŸ”—](https://leetcode.com/problems/find-the-sum-of-subsequence-powers) |