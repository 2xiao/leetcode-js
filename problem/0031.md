# [31. ä¸‹ä¸€ä¸ªæ’åˆ—](https://leetcode.com/problems/next-permutation)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/next-permutation)

## é¢˜ç›®

<p>æ•´æ•°æ•°ç»„çš„ä¸€ä¸ª <strong>æ’åˆ—</strong>&nbsp; å°±æ˜¯å°†å…¶æ‰€æœ‰æˆå‘˜ä»¥åºåˆ—æˆ–çº¿æ€§é¡ºåºæ’åˆ—ã€‚</p>

<ul>
	<li>ä¾‹å¦‚ï¼Œ<code>arr = [1,2,3]</code> ï¼Œä»¥ä¸‹è¿™äº›éƒ½å¯ä»¥è§†ä½œ <code>arr</code> çš„æ’åˆ—ï¼š<code>[1,2,3]</code>ã€<code>[1,3,2]</code>ã€<code>[3,1,2]</code>ã€<code>[2,3,1]</code> ã€‚</li>
</ul>

<p>æ•´æ•°æ•°ç»„çš„ <strong>ä¸‹ä¸€ä¸ªæ’åˆ—</strong> æ˜¯æŒ‡å…¶æ•´æ•°çš„ä¸‹ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚æ›´æ­£å¼åœ°ï¼Œå¦‚æœæ•°ç»„çš„æ‰€æœ‰æ’åˆ—æ ¹æ®å…¶å­—å…¸é¡ºåºä»å°åˆ°å¤§æ’åˆ—åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæ•°ç»„çš„ <strong>ä¸‹ä¸€ä¸ªæ’åˆ—</strong> å°±æ˜¯åœ¨è¿™ä¸ªæœ‰åºå®¹å™¨ä¸­æ’åœ¨å®ƒåé¢çš„é‚£ä¸ªæ’åˆ—ã€‚å¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ç»„å¿…é¡»é‡æ’ä¸ºå­—å…¸åºæœ€å°çš„æ’åˆ—ï¼ˆå³ï¼Œå…¶å…ƒç´ æŒ‰å‡åºæ’åˆ—ï¼‰ã€‚</p>

<ul>
	<li>ä¾‹å¦‚ï¼Œ<code>arr = [1,2,3]</code> çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ <code>[1,3,2]</code> ã€‚</li>
	<li>ç±»ä¼¼åœ°ï¼Œ<code>arr = [2,3,1]</code> çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ <code>[3,1,2]</code> ã€‚</li>
	<li>è€Œ <code>arr = [3,2,1]</code> çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ <code>[1,2,3]</code> ï¼Œå› ä¸º <code>[3,2,1]</code> ä¸å­˜åœ¨ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚</li>
</ul>

<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œæ‰¾å‡º <code>nums</code> çš„ä¸‹ä¸€ä¸ªæ’åˆ—ã€‚</p>

<p>å¿…é¡»<strong><a href="https://baike.baidu.com/item/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95" target="_blank"> åŸåœ° </a></strong>ä¿®æ”¹ï¼Œåªå…è®¸ä½¿ç”¨é¢å¤–å¸¸æ•°ç©ºé—´ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [1,2,3]
<strong>è¾“å‡ºï¼š</strong>[1,3,2]
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [3,2,1]
<strong>è¾“å‡ºï¼š</strong>[1,2,3]
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>nums = [1,1,5]
<strong>è¾“å‡ºï¼š</strong>[1,5,1]
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 100</code></li>
	<li><code>0 &lt;= nums[i] &lt;= 100</code></li>
</ul>


## è§£é¢˜æ€è·¯

1. **ä»åå¾€å‰æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸‹é™ç‚¹**ï¼š
   - ä»å³å‘å·¦æ‰«ææ•°ç»„ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ª**ç ´åå‡åº**çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªä½ç½® `i`ï¼Œä½¿å¾— `nums[i] < nums[i + 1]`ã€‚è¿™ä¸ªä½ç½® `i` åŠå…¶ä¹‹å‰çš„å…ƒç´ æ˜¯æ— æ³•å˜å¾—æ›´å¤§çš„ï¼Œè€Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´ `i` ä¹‹åçš„å…ƒç´ æ¥å¾—åˆ°ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ã€‚
2. **åœ¨ i ä¹‹åæ‰¾åˆ°æ¯” nums[i] å¤§çš„æœ€å°å…ƒç´ **ï¼š
   - ç»§ç»­ä»å³å‘å·¦æ‰«æï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯” `nums[i]` å¤§çš„å…ƒç´  `nums[j]`ã€‚äº¤æ¢ `nums[i]` å’Œ `nums[j]`ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿å¾—åˆ°æ¯”å½“å‰æ’åˆ—å¤§çš„ä¸‹ä¸€ä¸ªæ’åˆ—ã€‚
3. **å°† i ä¹‹åçš„å…ƒç´ ç¿»è½¬**ï¼š
   - ç”±äº `i` ä¹‹åçš„éƒ¨åˆ†æ˜¯é™åºæ’åˆ—çš„ï¼ˆå› ä¸ºæˆ‘ä»¬ä»åå‘å‰æ‰«æï¼‰ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™éƒ¨åˆ†åè½¬ï¼Œå˜æˆå‡åºæ’åˆ—ï¼Œä»¥è·å¾—å­—å…¸åºä¸­ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ã€‚
4. **ç‰¹æ®Šæƒ…å†µ**ï¼š
   - å¦‚æœæ•´ä¸ªæ•°ç»„æ˜¯é™åºæ’åˆ—çš„ï¼Œæ¯”å¦‚ `[3, 2, 1]`ï¼Œé‚£ä¹ˆæˆ‘ä»¬å·²ç»å¤„äºå­—å…¸åºçš„æœ€å¤§æ’åˆ—ï¼Œæ­¤æ—¶ç›´æ¥å°†æ•´ä¸ªæ•°ç»„åè½¬ä¸ºå‡åºæ’åˆ—å³å¯ã€‚

ä»¥æ•°ç»„ `[1, 2, 3, 4]` ä¸ºä¾‹ï¼š

1. ä»åå¾€å‰æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸‹é™ç‚¹ï¼š
   - ä»å³å‘å·¦çœ‹ï¼Œ`3 < 4`ï¼Œå› æ­¤ `i = 2`ï¼ˆ`nums[2] = 3`ï¼‰ã€‚
2. æ‰¾åˆ°æ¯” `3` å¤§çš„æœ€å°æ•°ï¼š

   - ä»å³å‘å·¦çœ‹ï¼Œ`4` æ˜¯æ¯” `3` å¤§çš„æœ€å°æ•°ï¼Œæ‰€ä»¥ `j = 3`ï¼ˆ`nums[3] = 4`ï¼‰ã€‚
   - äº¤æ¢ `nums[i]` å’Œ `nums[j]`ï¼Œå³ `nums[2]` å’Œ `nums[3]` äº¤æ¢ï¼Œæ•°ç»„å˜ä¸ºï¼š`[1, 2, 4, 3]`

3. åè½¬ `i` ä¹‹åçš„éƒ¨åˆ†ï¼š
   - ç°åœ¨ `i = 2`ï¼Œ`i` ä¹‹åçš„éƒ¨åˆ†æ˜¯ `[3]`ã€‚ç”±äºåè½¬å•ä¸ªå…ƒç´ æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œæ‰€ä»¥åè½¬åä»ç„¶æ˜¯ `[3]`ã€‚

ç»è¿‡è¿™ä¸‰ä¸ªæ­¥éª¤åï¼Œæ•°ç»„ `[1, 2, 3, 4]` çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ï¼š `[1, 2, 4, 3]`

#### å¤æ‚åº¦åˆ†æï¼š

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚æˆ‘ä»¬ä»å³å‘å·¦æ‰«ææ•°ç»„ï¼Œæœ€å¤šæ‰«æä¸¤æ¬¡ï¼ˆä¸€æ¬¡æ‰¾åˆ°ä¸‹é™ç‚¹ï¼Œä¸€æ¬¡æ‰¾åˆ°äº¤æ¢ç‚¹ï¼‰ï¼Œç„¶åå†ç¿»è½¬ä¸€éƒ¨åˆ†æ•°ç»„ï¼Œæ‰€ä»¥æ•´ä½“å¤æ‚åº¦æ˜¯çº¿æ€§æ—¶é—´ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œå› ä¸ºåªéœ€è¦å¸¸æ•°ä¸ªé¢å¤–çš„å˜é‡è¿›è¡ŒåŸåœ°äº¤æ¢å’Œåè½¬æ“ä½œï¼Œæ²¡æœ‰ä½¿ç”¨é¢å¤–çš„æ•°ç»„ã€‚

## ä»£ç 

```javascript
var nextPermutation = function (nums) {
	let i = nums.length - 2;

	// ä»å³å‘å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸‹é™ç‚¹
	while (i >= 0 && nums[i] >= nums[i + 1]) {
		i--;
	}

	if (i >= 0) {
		// è¯´æ˜æ‰¾åˆ°äº†ç¬¬ä¸€ä¸ªä¸‹é™ç‚¹
		let j = nums.length - 1;
		// æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯” nums[i] å¤§çš„æ•°
		while (j >= 0 && nums[j] <= nums[i]) {
			j--;
		}
		// äº¤æ¢ i å’Œ j ä½ç½®ä¸Šçš„æ•°
		[nums[i], nums[j]] = [nums[j], nums[i]];
	}

	// ç¿»è½¬ i ä¹‹åçš„éƒ¨åˆ†ï¼Œä½¿å…¶å˜ä¸ºå‡åº
	let left = i + 1;
	let right = nums.length - 1;
	while (left < right) {
		[nums[left], nums[right]] = [nums[right], nums[left]];
		left++;
		right--;
	}
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 46 | [å…¨æ’åˆ—](https://leetcode.com/problems/permutations) | [[âœ“]](/problem/0046.md) |  [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 47 | [å…¨æ’åˆ— II](https://leetcode.com/problems/permutations-ii) | [[âœ“]](/problem/0047.md) |  [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 60 | [æ’åˆ—åºåˆ—](https://leetcode.com/problems/permutation-sequence) |  |  [`é€’å½’`](/tag/recursion.md) [`æ•°å­¦`](/tag/math.md) | <font color=#ff334b>Hard</font> |
| 267 | [å›æ–‡æ’åˆ— II](https://leetcode.com/problems/palindrome-permutation-ii) |  |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å›æº¯`](/tag/backtracking.md) | <font color=#ffb800>Medium</font> |
| 1850 | [é‚»ä½äº¤æ¢çš„æœ€å°æ¬¡æ•°](https://leetcode.com/problems/minimum-adjacent-swaps-to-reach-the-kth-smallest-number) |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | <font color=#ffb800>Medium</font> |