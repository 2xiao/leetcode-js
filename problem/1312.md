# [1312. è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°](https://leetcode.com/problems/minimum-insertion-steps-to-make-a-string-palindrome)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/minimum-insertion-steps-to-make-a-string-palindrome)

## é¢˜ç›®

<p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²&nbsp;<code>s</code>&nbsp;ï¼Œæ¯ä¸€æ¬¡æ“ä½œä½ éƒ½å¯ä»¥åœ¨å­—ç¬¦ä¸²çš„ä»»æ„ä½ç½®æ’å…¥ä»»æ„å­—ç¬¦ã€‚</p>

<p>è¯·ä½ è¿”å›è®©&nbsp;<code>s</code>&nbsp;æˆä¸ºå›æ–‡ä¸²çš„&nbsp;<strong>æœ€å°‘æ“ä½œæ¬¡æ•°</strong>&nbsp;ã€‚</p>

<p>ã€Œå›æ–‡ä¸²ã€æ˜¯æ­£è¯»å’Œåè¯»éƒ½ç›¸åŒçš„å­—ç¬¦ä¸²ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>s = "zzazz"
<strong>è¾“å‡ºï¼š</strong>0
<strong>è§£é‡Šï¼š</strong>å­—ç¬¦ä¸² "zzazz" å·²ç»æ˜¯å›æ–‡ä¸²äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦åšä»»ä½•æ’å…¥æ“ä½œã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>s = "mbadm"
<strong>è¾“å‡ºï¼š</strong>2
<strong>è§£é‡Šï¼š</strong>å­—ç¬¦ä¸²å¯å˜ä¸º "mbdadbm" æˆ–è€… "mdbabdm" ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>s = "leetcode"
<strong>è¾“å‡ºï¼š</strong>5
<strong>è§£é‡Šï¼š</strong>æ’å…¥ 5 ä¸ªå­—ç¬¦åå­—ç¬¦ä¸²å˜ä¸º "leetcodocteel" ã€‚
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= s.length &lt;= 500</code></li>
	<li><code>s</code>&nbsp;ä¸­æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯å°å†™å­—æ¯ã€‚</li>
</ul>


## è§£é¢˜æ€è·¯

è¿™ä¸ªé—®é¢˜å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³ã€‚å¯ä»¥å®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„ `dp`ï¼Œå…¶ä¸­ `dp[i][j]` è¡¨ç¤ºå°†å­—ç¬¦ä¸²çš„å­ä¸² `s[i...j]` å˜æˆå›æ–‡ä¸²æ‰€éœ€çš„æœ€å°‘æ’å…¥æ¬¡æ•°ã€‚

1. **çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š**

- å½“å­—ç¬¦ `s[i]` ç­‰äº `s[j]` æ—¶ï¼Œè¡¨ç¤º `s[i...j]` å·²ç»æ˜¯å›æ–‡ä¸²ï¼Œä¸éœ€è¦æ’å…¥ï¼Œå› æ­¤ `dp[i][j] = dp[i+1][j-1]`ã€‚
- å½“å­—ç¬¦ `s[i]` ä¸ç­‰äº `s[j]` æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ `s[i...j]` çš„ä¸¤ç«¯æ’å…¥å­—ç¬¦ï¼Œä½¿å¾—æ’å…¥åçš„å­ä¸² `s[i...j]` æ˜¯å›æ–‡ä¸²ï¼Œå› æ­¤ `dp[i][j] = min(dp[i+1][j], dp[i][j-1]) + 1`ã€‚
  - ä¸ºä»€ä¹ˆä¸æ˜¯ `dp[i][j] = dp[i+1][j-1] + 2` ï¼Ÿ
  - å› ä¸º `s[i...j-1]` æˆ– `s[i+1...j]` æœ‰å¯èƒ½æ˜¯å›æ–‡ä¸²ï¼Œä¸éœ€è¦æ’å…¥ï¼Œå¦‚ï¼š`s[i...j] = "xaaaaa"` æ—¶ï¼Œ`s[i+1...j] = "aaaaa"` æœ¬èº«å°±æ˜¯å›æ–‡ä¸²ï¼›
  - æ‰€ä»¥æ— è„‘æ’å…¥ä¸¤æ¬¡è‚¯å®šæ˜¯å¯ä»¥è®© `s[i..j]` å˜æˆå›æ–‡ä¸²ï¼Œä½†æ˜¯ä¸ä¸€å®šæ˜¯æ’å…¥æ¬¡æ•°æœ€å°‘çš„ï¼›
  - æ­£ç¡®çš„åšæ³•æ˜¯ï¼Œå…ˆå°† `s[i..j-1]` æˆ–è€… `s[i+1..j]` å˜æˆå›æ–‡ä¸²ï¼Œç„¶åå–äºŒè€…ä¸­æ’å…¥æ¬¡æ•°å°‘çš„æƒ…å†µï¼Œå†åŠ ä¸€ï¼›

```javascript
if (s[i] === s[j]) {
	dp[i][j] = dp[i + 1][j - 1];
} else {
	dp[i][j] = Math.min(dp[i + 1][j], dp[i][j - 1]) + 1;
}
```

2. **åˆå§‹åŒ–ï¼š**
   å¯¹è§’çº¿ä¸Šçš„å…ƒç´  `dp[i][i]` å‡ä¸º `0`ï¼Œå› ä¸ºå•ä¸ªå­—ç¬¦å·²ç»æ˜¯å›æ–‡ä¸²ã€‚

3. **åŠ¨æ€è§„åˆ’éå†ï¼š**
   åœ¨è®¡ç®— `dp[i][j]` æ—¶ï¼Œéœ€è¦å…ˆç¡®ä¿ `dp[i+1][j-1]` å·²ç»è®¡ç®—è¿‡ï¼Œå› æ­¤éœ€è¦æŒ‰ç…§åŒºé—´é•¿åº¦ä»å°åˆ°å¤§çš„é¡ºåºéå†ã€‚

   ![](../image/1312.png)

4. **è¿”å›ç»“æœï¼š**
   æœ€ç»ˆç»“æœå­˜å‚¨åœ¨ `dp[0][n-1]` ä¸­ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n^2)`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ŒåŠ¨æ€è§„åˆ’æ•°ç»„çš„å¤§å°ä¸º `n^2`ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n^2)`ï¼Œä½¿ç”¨äº†ä¸€ä¸ªäºŒç»´åŠ¨æ€è§„åˆ’æ•°ç»„ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var minInsertions = function (s) {
	const n = s.length;
	let dp = new Array(n).fill(0).map((i) => new Array(n).fill(0));
	for (let i = n - 2; i >= 0; i--) {
		for (let j = i + 1; j < n; j++) {
			if (s[i] == s[j]) {
				dp[i][j] = dp[i + 1][j - 1];
			} else {
				dp[i][j] = Math.min(dp[i + 1][j], dp[i][j - 1]) + 1;
			}
		}
	}
	return dp[0][n - 1];
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2193 | [å¾—åˆ°å›æ–‡ä¸²çš„æœ€å°‘æ“ä½œæ¬¡æ•°](https://leetcode.com/problems/minimum-number-of-moves-to-make-palindrome) |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`æ ‘çŠ¶æ•°ç»„`](/tag/binary-indexed-tree.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) `1+` | <font color=#ff334b>Hard</font> |