---
title: 2628. å®Œå…¨ç›¸ç­‰çš„ JSON å­—ç¬¦ä¸² ğŸ”’
description: LeetCode 2628. å®Œå…¨ç›¸ç­‰çš„ JSON å­—ç¬¦ä¸² ğŸ”’é¢˜è§£ï¼ŒJSON Deep Equalï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2628. å®Œå…¨ç›¸ç­‰çš„ JSON å­—ç¬¦ä¸² ğŸ”’
  - å®Œå…¨ç›¸ç­‰çš„ JSON å­—ç¬¦ä¸²
  - JSON Deep Equal
  - è§£é¢˜æ€è·¯
---

# 2628. å®Œå…¨ç›¸ç­‰çš„ JSON å­—ç¬¦ä¸² ğŸ”’

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/json-deep-equal) [`LeetCode`](https://leetcode.com/problems/json-deep-equal)

## é¢˜ç›®

Given two values `o1` and `o2`, return a boolean value indicating whether two
values, `o1` and `o2`, are **deeply equal**.

For two values to be **deeply equal** , the following conditions must be met:

- If both values are primitive types, they are **deeply equal** if they pass the `===` equality check.

- If both values are arrays, they are **deeply equal** if they have the same elements in the same order, and each element is also **deeply equal** according to these conditions.

- If both values are objects, they are **deeply equal** if they have the same keys, and the associated values for each key are also **deeply equal** according to these conditions.

You may assume both values are the output of `JSON.parse`. In other words,
they are valid JSON.

Please solve it without using lodash's `_.isEqual()` function

**Example 1:**

> Input: o1 = {"x":1,"y":2}, o2 = {"x":1,"y":2}
>
> Output: true
>
> Explanation: The keys and values match exactly.

**Example 2:**

> Input: o1 = {"y":2,"x":1}, o2 = {"x":1,"y":2}
>
> Output: true
>
> Explanation: Although the keys are in a different order, they still match exactly.

**Example 3:**

> Input: o1 = {"x":null,"L":[1,2,3]}, o2 = {"x":null,"L":["1","2","3"]}
>
> Output: false
>
> Explanation: The array of numbers is different from the array of strings.

**Example 4:**

> Input: o1 = true, o2 = false
>
> Output: false
>
> Explanation: true !== false

**Constraints:**

- `1 <= JSON.stringify(o1).length <= 10^5`
- `1 <= JSON.stringify(o2).length <= 10^5`
- `maxNestingDepth <= 1000`

## é¢˜ç›®å¤§æ„

ç»™å®šä¸¤ä¸ªå¯¹è±¡ `o1` å’Œ `o2` ï¼Œè¯·ä½ æ£€æŸ¥å®ƒä»¬æ˜¯å¦ **å®Œå…¨ç›¸ç­‰** ã€‚

å¯¹äºä¸¤ä¸ª **å®Œå…¨ç›¸ç­‰** çš„å¯¹è±¡ï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

- å¦‚æœä¸¤ä¸ªå€¼éƒ½æ˜¯åŸå§‹ç±»å‹ï¼Œå®ƒä»¬é€šè¿‡äº† `===` ç­‰å¼æ£€æŸ¥ï¼Œåˆ™è®¤ä¸ºè¿™ä¸¤ä¸ªå€¼æ˜¯ **å®Œå…¨ç›¸ç­‰** çš„ã€‚
- å¦‚æœä¸¤ä¸ªå€¼éƒ½æ˜¯æ•°ç»„ï¼Œåœ¨å®ƒä»¬å…·æœ‰ç›¸åŒå…ƒç´ ä¸”é¡ºåºç›¸åŒï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ åœ¨è¿™äº›æ¡ä»¶ä¸‹ä¹Ÿ **å®Œå…¨ç›¸ç­‰ **æ—¶ï¼Œè®¤ä¸ºè¿™ä¸¤ä¸ªå€¼æ˜¯ **å®Œå…¨ç›¸ç­‰** çš„ã€‚
- å¦‚æœä¸¤ä¸ªå€¼éƒ½æ˜¯å¯¹è±¡ï¼Œåœ¨å®ƒä»¬å…·æœ‰ç›¸åŒé”®ï¼Œå¹¶ä¸”æ¯ä¸ªé”®å…³è”çš„å€¼åœ¨è¿™äº›æ¡ä»¶ä¸‹ä¹Ÿ **å®Œå…¨ç›¸ç­‰** æ—¶ï¼Œè®¤ä¸ºè¿™ä¸¤ä¸ªå€¼æ˜¯ **å®Œå…¨ç›¸ç­‰** çš„ã€‚

ä½ å¯ä»¥å‡è®¾è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯ `JSON.parse` çš„è¾“å‡ºã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬æ˜¯æœ‰æ•ˆçš„ `JSON` ã€‚

è¯·ä½ åœ¨ä¸ä½¿ç”¨ lodash çš„ `_.isEqual()` å‡½æ•°çš„å‰æä¸‹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** o1 = {"x":1,"y":2}, o2 = {"x":1,"y":2}
>
> **è¾“å‡ºï¼š** true
>
> **è¾“å…¥ï¼š** é”®å’Œå€¼å®Œå…¨åŒ¹é…ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** o1 = {"y":2,"x":1}, o2 = {"x":1,"y":2}
>
> **è¾“å‡ºï¼š** true
>
> **è§£é‡Šï¼š** å°½ç®¡é”®çš„é¡ºåºä¸åŒï¼Œä½†å®ƒä»¬ä»ç„¶å®Œå…¨åŒ¹é…ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** o1 = {"x":null,"L":[1,2,3]}, o2 = {"x":null,"L":["1","2","3"]}
>
> **è¾“å‡ºï¼š** false
>
> **è§£é‡Šï¼š** æ•°å­—æ•°ç»„ä¸åŒäºå­—ç¬¦ä¸²æ•°ç»„ã€‚

**ç¤ºä¾‹ 4ï¼š**

> **è¾“å…¥ï¼š** o1 = true, o2 = false
>
> **è¾“å‡ºï¼š** false
>
> **è§£é‡Šï¼š** true !== false

**æç¤ºï¼š**

- `1 <= JSON.stringify(o1).length <= 10^5`
- `1 <= JSON.stringify(o2).length <= 10^5`
- `maxNestingDepth <= 1000`

## è§£é¢˜æ€è·¯

ä¸»è¦çš„éš¾ç‚¹åœ¨äºå¯¹æ¯”æ·±å±‚åµŒå¥—çš„å¯¹è±¡å’Œæ•°ç»„æ—¶ï¼Œéœ€è¦é€’å½’è°ƒç”¨æ¯”è¾ƒå‡½æ•°ï¼š

1. **ç±»å‹æ£€æŸ¥**ï¼š

   - é¦–å…ˆæ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦éƒ½æ˜¯ `null` æˆ–è€…éƒ½æ˜¯å¯¹è±¡ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªæ˜¯ `null` è€Œå¦ä¸€ä¸ªä¸æ˜¯ï¼Œåˆ™è¿”å› `false`ã€‚

2. **åŸå§‹ç±»å‹æ¯”è¾ƒ**ï¼š

   - å¦‚æœä¸¤ä¸ªå€¼éƒ½æ˜¯åŸå§‹ç±»å‹ï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ç­‰ï¼‰ï¼Œåˆ™ä½¿ç”¨ `===` è¿›è¡Œæ¯”è¾ƒã€‚

3. **æ•°ç»„å’Œå¯¹è±¡æ¯”è¾ƒ**ï¼š

   - å¦‚æœä¸¤ä¸ªå€¼éƒ½æ˜¯æ•°ç»„ï¼Œåˆ™æ¯”è¾ƒå®ƒä»¬çš„é•¿åº¦å¹¶é€’å½’æ¯”è¾ƒæ¯ä¸ªå…ƒç´ ã€‚
   - å¦‚æœä¸¤ä¸ªå€¼éƒ½æ˜¯å¯¹è±¡ï¼Œåˆ™æ¯”è¾ƒå®ƒä»¬çš„é”®æ•°ã€é”®çš„åç§°ä»¥åŠæ¯ä¸ªé”®å¯¹åº”çš„å€¼ã€‚

4. **é€’å½’è°ƒç”¨**ï¼š
   - å¯¹äºæ¯ä¸ªéœ€è¦æ·±å…¥æ¯”è¾ƒçš„å€¼ï¼Œé€’å½’è°ƒç”¨æ¯”è¾ƒå‡½æ•°ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å…ƒç´ æ€»æ•°ï¼Œå› ä¸ºæ¯ä¸ªå…ƒç´ éƒ½éœ€è¦è¢«æ¯”è¾ƒã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(d)`ï¼Œå…¶ä¸­ `d` æ˜¯åµŒå¥—çš„æœ€å¤§æ·±åº¦ï¼Œä¸»è¦å–å†³äºé€’å½’çš„æ·±åº¦ã€‚

## ä»£ç 

```javascript
var areDeeplyEqual = function (o1, o2) {
	// æ£€æŸ¥ null å’ŒåŸå§‹ç±»å‹
	if (o1 === o2) return true; // åŒæ—¶ä¸º null æˆ–ç›¸åŒåŸå§‹ç±»å‹
	if (
		o1 === null ||
		o2 === null ||
		typeof o1 !== 'object' ||
		typeof o2 !== 'object'
	)
		return false;

	// æ£€æŸ¥æ˜¯å¦ä¸ºæ•°ç»„
	if (Array.isArray(o1) !== Array.isArray(o2)) return false;

	// è·å–å¯¹è±¡çš„é”®
	let keys1 = Object.keys(o1),
		keys2 = Object.keys(o2);

	// æ£€æŸ¥é”®çš„æ•°é‡
	if (keys1.length !== keys2.length) return false;

	// é€’å½’æ¯”è¾ƒæ¯ä¸ªé”®çš„å€¼
	for (let key of keys1) {
		// é€’å½’è°ƒç”¨
		if (!areDeeplyEqual(o1[key], o2[key])) return false;
	}

	return true;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 2625 | æ‰å¹³åŒ–åµŒå¥—æ•°ç»„ | [[âœ“]](/problem/2625.md) |  | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/flatten-deeply-nested-array) [ğŸ”—](https://leetcode.com/problems/flatten-deeply-nested-array) |
| 2633 | å°†å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸² ğŸ”’ | [[âœ“]](/problem/2633.md) |  | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/convert-object-to-json-string) [ğŸ”—](https://leetcode.com/problems/convert-object-to-json-string) |
| 2675 | å°†å¯¹è±¡æ•°ç»„è½¬æ¢ä¸ºçŸ©é˜µ ğŸ”’ | [[âœ“]](/problem/2675.md) |  | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/array-of-objects-to-matrix) [ğŸ”—](https://leetcode.com/problems/array-of-objects-to-matrix) |
| 2700 | ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„å·®å¼‚ ğŸ”’ | [[âœ“]](/problem/2700.md) |  | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/differences-between-two-objects) [ğŸ”—](https://leetcode.com/problems/differences-between-two-objects) |