# [235. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/outline/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/outline/tag/depth-first-search.md) [`äºŒå‰æœç´¢æ ‘`](/outline/tag/binary-search-tree.md) [`äºŒå‰æ ‘`](/outline/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree)

## é¢˜ç›®

Given a binary search tree (BST), find the lowest common ancestor (LCA) node
of two given nodes in the BST.

According to the [definition of LCA on Wikipedia](https://en.wikipedia.org/wiki/Lowest_common_ancestor): "The lowest common ancestor is defined between two nodes `p` and `q` as the lowest node in `T` that has both `p` and `q` as descendants (where we allow **a node to be a descendant of itself** )."

**Example 1:**

![](https://assets.leetcode.com/uploads/2018/12/14/binarysearchtree_improved.png)

> Input: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 8
>
> Output: 6
>
> Explanation: The LCA of nodes 2 and 8 is 6.

**Example 2:**

![](https://assets.leetcode.com/uploads/2018/12/14/binarysearchtree_improved.png)

> Input: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 4
>
> Output: 2
>
> Explanation: The LCA of nodes 2 and 4 is 2, since a node can be a descendant of itself according to the LCA definition.

**Example 3:**

> Input: root = [2,1], p = 2, q = 1
>
> Output: 2

**Constraints:**

- The number of nodes in the tree is in the range `[2, 10^5]`.
- `-10^9 <= Node.val <= 10^9`
- All `Node.val` are **unique**.
- `p != q`
- `p` and `q` will exist in the BST.

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚

ç»´åŸºç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªç»“ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªç»“ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šé€’å½’æ¯”æ•°å€¼

ç”±äº BST çš„æ€§è´¨ï¼Œå¯ä»¥é€šè¿‡æ¯”è¾ƒèŠ‚ç‚¹çš„å€¼æ¥ç¡®å®šæœ€è¿‘çš„å…¬å…±ç¥–å…ˆã€‚

1. å¦‚æœèŠ‚ç‚¹çš„å€¼å°äº p å’Œ q çš„å€¼ï¼Œè¯´æ˜ p å’Œ q éƒ½åœ¨èŠ‚ç‚¹çš„å³å­æ ‘ä¸­ï¼Œé€’å½’æœç´¢å³å­æ ‘ã€‚
2. å¦‚æœèŠ‚ç‚¹çš„å€¼å¤§äº p å’Œ q çš„å€¼ï¼Œè¯´æ˜ p å’Œ q éƒ½åœ¨èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸­ï¼Œé€’å½’æœç´¢å·¦å­æ ‘ã€‚
3. å¦‚æœèŠ‚ç‚¹çš„å€¼åœ¨ p å’Œ q çš„å€¼ä¹‹é—´ï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹å³ä¸ºæœ€è¿‘çš„å…¬å…±ç¥–å…ˆã€‚

---

### æ€è·¯äºŒï¼šé€’å½’æŸ¥æ‰¾

å’Œ [ç¬¬ 236 é¢˜](./0236.md) ä¸€æ ·ï¼Œä½¿ç”¨é€’å½’æŸ¥æ‰¾ã€‚

ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œé€’å½’åœ°å‘å·¦å­æ ‘å’Œå³å­æ ‘æœç´¢ã€‚é€’å½’çš„ç»ˆæ­¢æ¡ä»¶æœ‰å‡ ç§æƒ…å†µï¼š

1. å¦‚æœå½“å‰èŠ‚ç‚¹ä¸º `null`ï¼Œè¡¨ç¤ºéå†åˆ°ç©ºèŠ‚ç‚¹ï¼Œç›´æ¥è¿”å› `null`ã€‚
2. å¦‚æœå½“å‰èŠ‚ç‚¹ç­‰äº `p` æˆ– `q`ï¼Œè¡¨ç¤ºæ‰¾åˆ°äº†å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›å½“å‰èŠ‚ç‚¹ã€‚

é€’å½’æ­¥éª¤å¦‚ä¸‹ï¼š

1. é€’å½’åœ°åœ¨å·¦å­æ ‘ä¸­å¯»æ‰¾ `p` å’Œ `q` çš„æœ€ä½å…±åŒç¥–å…ˆï¼Œç»“æœå­˜å‚¨åœ¨å˜é‡ `left` ä¸­ã€‚
2. é€’å½’åœ°åœ¨å³å­æ ‘ä¸­å¯»æ‰¾ `p` å’Œ `q` çš„æœ€ä½å…±åŒç¥–å…ˆï¼Œç»“æœå­˜å‚¨åœ¨å˜é‡ `right` ä¸­ã€‚

ç„¶åï¼Œæ ¹æ® `left` å’Œ `right` çš„æƒ…å†µï¼Œå¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š

- å¦‚æœ `left` å’Œ `right` éƒ½ä¸ä¸º `null`ï¼Œè¯´æ˜ `p` å’Œ `q` åˆ†åˆ«ä½äºå½“å‰èŠ‚ç‚¹çš„å·¦å³å­æ ‘ï¼Œå› æ­¤å½“å‰èŠ‚ç‚¹å°±æ˜¯å®ƒä»¬çš„æœ€ä½å…±åŒç¥–å…ˆï¼Œç›´æ¥è¿”å›å½“å‰èŠ‚ç‚¹ã€‚
- å¦‚æœåªæœ‰ `left` ä¸ä¸º `null`ï¼Œè¯´æ˜ `p` å’Œ `q` éƒ½åœ¨å·¦å­æ ‘ï¼Œæœ€ä½å…±åŒç¥–å…ˆåœ¨å·¦å­æ ‘ä¸­ï¼Œè¿”å› `left`ã€‚
- å¦‚æœåªæœ‰ `right` ä¸ä¸º `null`ï¼Œè¯´æ˜ `p` å’Œ `q` éƒ½åœ¨å³å­æ ‘ï¼Œæœ€ä½å…±åŒç¥–å…ˆåœ¨å³å­æ ‘ä¸­ï¼Œè¿”å› `right`ã€‚

## ä»£ç 

::: code-tabs

@tab é€’å½’æ¯”æ•°å€¼

```javascript
/**
 * @param {TreeNode} root
 * @param {TreeNode} p
 * @param {TreeNode} q
 * @return {TreeNode}
 */
var lowestCommonAncestor = function (root, p, q) {
	if (!root) return null;
	if (root.val < p.val && root.val < q.val) {
		return lowestCommonAncestor(root.right, p, q);
	} else if (root.val > p.val && root.val > q.val) {
		return lowestCommonAncestor(root.left, p, q);
	}
	return root;
};
```

@tab é€’å½’æŸ¥æ‰¾

```javascript
/**
 * @param {TreeNode} root
 * @param {TreeNode} p
 * @param {TreeNode} q
 * @return {TreeNode}
 */
var lowestCommonAncestor = function (root, p, q) {
	if (!root || p == root || q == root) return root;
	let left = lowestCommonAncestor(root.left, p, q);
	let right = lowestCommonAncestor(root.right, p, q);
	if (left && right) return root;
	return left ? left : right;
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 236 | [äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree) | [[âœ“]](/problem/0236.md) |  [`æ ‘`](/outline/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/outline/tag/depth-first-search.md) [`äºŒå‰æ ‘`](/outline/tag/binary-tree.md) | <font color=#ffb800>Medium</font> |
| 1257 | [æœ€å°å…¬å…±åŒºåŸŸ](https://leetcode.com/problems/smallest-common-region) |  |  [`æ ‘`](/outline/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/outline/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/outline/tag/breadth-first-search.md) `3+` | <font color=#ffb800>Medium</font> |
| 1644 | [äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ II](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-ii) |  |  [`æ ‘`](/outline/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/outline/tag/depth-first-search.md) [`äºŒå‰æ ‘`](/outline/tag/binary-tree.md) | <font color=#ffb800>Medium</font> |
| 1650 | [äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ III](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-iii) |  |  [`æ ‘`](/outline/tag/tree.md) [`å“ˆå¸Œè¡¨`](/outline/tag/hash-table.md) [`åŒæŒ‡é’ˆ`](/outline/tag/two-pointers.md) `1+` | <font color=#ffb800>Medium</font> |
| 1676 | [äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ IV](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-iv) |  |  [`æ ‘`](/outline/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/outline/tag/depth-first-search.md) [`å“ˆå¸Œè¡¨`](/outline/tag/hash-table.md) `1+` | <font color=#ffb800>Medium</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
