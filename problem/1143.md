# [1143. æœ€é•¿å…¬å…±å­åºåˆ—](https://leetcode.com/problems/longest-common-subsequence)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/longest-common-subsequence)

## é¢˜ç›®

Given two strings `text1` and `text2`, return _the length of their longest **common subsequence**._ If there is no **common subsequence** , return `0`.

A **subsequence** of a string is a new string generated from the original
string with some characters (can be none) deleted without changing the
relative order of the remaining characters.

- For example, `"ace"` is a subsequence of `"abcde"`.

A **common subsequence** of two strings is a subsequence that is common to
both strings.

**Example 1:**

> Input: text1 = "abcde", text2 = "ace"
>
> Output: 3
>
> Explanation: The longest common subsequence is "ace" and its length is 3.

**Example 2:**

> Input: text1 = "abc", text2 = "abc"
>
> Output: 3
>
> Explanation: The longest common subsequence is "abc" and its length is 3.

**Example 3:**

> Input: text1 = "abc", text2 = "def"
>
> Output: 0
>
> Explanation: There is no such common subsequence, so the result is 0.

**Constraints:**

- `1 <= text1.length, text2.length <= 1000`
- `text1` and `text2` consist of only lowercase English characters.

## é¢˜ç›®å¤§æ„

ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² `text1` å’Œ `text2`ï¼Œè¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿ **å…¬å…±å­åºåˆ—** çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ **å…¬å…±å­åºåˆ—** ï¼Œè¿”å› `0` ã€‚

ä¸€ä¸ªå­—ç¬¦ä¸²çš„ **å­åºåˆ—** æ˜¯æŒ‡è¿™æ ·ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼šå®ƒæ˜¯ç”±åŸå­—ç¬¦ä¸²åœ¨ä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹é¡ºåºçš„æƒ…å†µä¸‹åˆ é™¤æŸäº›å­—ç¬¦ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ä»»ä½•å­—ç¬¦ï¼‰åç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚

- ä¾‹å¦‚ï¼Œ`"ace"` æ˜¯ `"abcde"` çš„å­åºåˆ—ï¼Œä½† `"aec"` ä¸æ˜¯ `"abcde"` çš„å­åºåˆ—ã€‚

ä¸¤ä¸ªå­—ç¬¦ä¸²çš„ **å…¬å…±å­åºåˆ—** æ˜¯è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€å…±åŒæ‹¥æœ‰çš„å­åºåˆ—ã€‚

`text1` å’Œ `text2` ä»…ç”±å°å†™è‹±æ–‡å­—ç¬¦ç»„æˆã€‚

## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šåŠ¨æ€è§„åˆ’-é€’å½’

ä½¿ç”¨é€’å½’æ¥è§£é¢˜çš„æ€è·¯å¦‚ä¸‹ï¼š

- å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•° `helper(i, j)` ï¼Œ`i` å’Œ `j` ä»£è¡¨ä¸¤ä¸ªå­—ç¬¦ä¸²çš„ä¸‹æ ‡ï¼Œå‡½æ•°è¿”å›æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ï¼›
- base case æ˜¯å½“ `i` æˆ– `j` ç­‰äº `-1`ï¼Œå³å…¶ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºç©ºï¼Œæœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ä¸º `0` ;
- ç”¨ä¸€ä¸ªæ•°ç»„ `dp` è®°å½•å­é—®é¢˜çš„ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ï¼›
- å¦‚æœ `dp[i][j]` å·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™å°±é€’å½’è®¡ç®—ï¼š

  - è‹¥ `s1[i] == s2[j]`ï¼Œè¯´æ˜å½“å‰å­—ç¬¦ç›¸åŒï¼Œæœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦å¯ä»¥åœ¨ä¹‹å‰çš„åŸºç¡€ä¸ŠåŠ  `1`ï¼š`dp[i][j] = 1 + helper(i - 1, j - 1)`ï¼›
  - å¦åˆ™è¯´æ˜å½“å‰å­—ç¬¦ä¸åŒï¼Œæœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­åˆ†åˆ«å»æ‰å½“å‰å­—ç¬¦åçš„æœ€å¤§å€¼ï¼š`dp[i][j] = Math.max(helper(i, j - 1), helper(i - 1, j))`ï¼›
    - `dp[i-1][j]` è¡¨ç¤ºèˆå¼ƒå­—ç¬¦ `s1[i]` ï¼›
    - `dp[i][j-1]` è¡¨ç¤ºèˆå¼ƒå­—ç¬¦ `s2[j]`ï¼›
    - è°èƒ½è®©æœ€é•¿å…¬å…±å­åºåˆ—æœ€é•¿ï¼Œå°±é€‰æ‹©è°ï¼›

- æœ€åè°ƒç”¨é€’å½’å‡½æ•°å³å¯ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œå…¶ä¸­ `m` æ˜¯ `text1` çš„é•¿åº¦ï¼Œ`n` æ˜¯ `text2` çš„é•¿åº¦ã€‚åœ¨æœ€åæƒ…å†µä¸‹ï¼Œå‡½æ•° `helper` å¯èƒ½ä¼šè¢«è°ƒç”¨ `m * n` æ¬¡

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œä½¿ç”¨äº†ä¸€ä¸ªäºŒç»´åŠ¨æ€è§„åˆ’æ•°ç»„ï¼ŒåŠ¨æ€è§„åˆ’æ•°ç»„çš„å¤§å°ä¸º `(m+1) * (n+1)`ï¼›åœ¨æœ€åæƒ…å†µä¸‹ï¼Œé€’å½’æ ˆçš„æ·±åº¦å¯èƒ½è¾¾åˆ° `m + n`ï¼ˆæœ€åæƒ…å†µä¸‹ï¼Œé€’å½’æ¯æ¬¡åªå‘å·¦æˆ–ä¸‹ç§»åŠ¨ï¼‰ï¼Œæ ˆçš„ç©ºé—´ç›¸å¯¹äº `dp` çš„ç©ºé—´æ˜¯å¯ä»¥å¿½ç•¥çš„ã€‚

---

### æ€è·¯äºŒï¼šåŠ¨æ€è§„åˆ’-DP table

å®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„ `dp` , å…¶ä¸­ `dp[i][j]` è¡¨ç¤º `text1[0...i-1]` å’Œ `text2[0...j-1]` çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ã€‚

`dp[..][0]` å’Œ `dp[0][..]` å¯¹åº” base caseï¼Œå³ä»»ä½•ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºç©ºæ—¶ï¼Œæœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ä¸º `0`ã€‚

çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š

- å½“ `s1[i-1] === s2[j-1]`ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—ç¬¦ä¸€å®šåœ¨æœ€é•¿å…¬å…±å­åºåˆ—ä¸­ï¼š`dp[i][j] = 1 + dp[i-1][j-1]`
- å¦åˆ™ï¼Œè¿™ä¸¤ä¸ªå­—ç¬¦è‡³å°‘æœ‰ä¸€ä¸ªä¸åœ¨æœ€é•¿å…¬å…±å­åºåˆ—ä¸­ï¼Œéœ€è¦ä¸¢å¼ƒä¸€ä¸ªã€‚å–äºŒè€…çš„æœ€å¤§å€¼ï¼š`dp[i][j] = max(dp[i-1][j], dp[i][j-1])`

å…¶ä¸­ï¼Œ`dp[i-1][j]` è¡¨ç¤ºèˆå¼ƒå­—ç¬¦ `s1[i]` ï¼Œ`dp[i][j-1]` è¡¨ç¤ºèˆå¼ƒå­—ç¬¦ `s2[j]`ï¼Œè°èƒ½è®©æœ€é•¿å…¬å…±å­åºåˆ—æœ€é•¿ï¼Œå°±é€‰æ‹©è°ã€‚

DP table å’Œé€’å½’çš„æ€è·¯å¤§è‡´ç›¸åŒï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼ŒDP table æ˜¯è‡ªåº•å‘ä¸Šæ±‚è§£ï¼Œé€’å½’è§£æ³•æ˜¯è‡ªé¡¶å‘ä¸‹æ±‚è§£ã€‚é€’å½’å‡½æ•°çš„ base case æ˜¯ `i`, `j` ç­‰äº `-1`ï¼Œè€Œ DP table çš„æ•°ç»„ç´¢å¼•è‡³å°‘æ˜¯ `0`ï¼Œæ‰€ä»¥ DP table æ•°ç»„ä¼šåç§»ä¸€ä½ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œå…¶ä¸­ `m` æ˜¯ `text1` çš„é•¿åº¦ï¼Œ`n` æ˜¯ `text2` çš„é•¿åº¦ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(m * n)`ï¼Œä½¿ç”¨äº†ä¸€ä¸ªäºŒç»´åŠ¨æ€è§„åˆ’æ•°ç»„ï¼ŒåŠ¨æ€è§„åˆ’æ•°ç»„çš„å¤§å°ä¸º `(m+1) * (n+1)`ã€‚

## ä»£ç 

::: code-tabs

@tab åŠ¨æ€è§„åˆ’-é€’å½’

```javascript
/**
 * @param {string} text1
 * @param {string} text2
 * @return {number}
 */
var longestCommonSubsequence = function (text1, text2) {
	const m = text1.length;
	const n = text2.length;

	// è®°å½•å­é—®é¢˜çš„è®¡ç®—ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—
	let dp = new Array(m).fill(-1).map((i) => new Array(n).fill(-1));

	const helper = (i, j) => {
		// é€’å½’çš„ç»ˆæ­¢æ¡ä»¶
		if (i == -1 || j == -1) return 0;

		// é¿å…é‡å¤è®¡ç®—å­é—®é¢˜
		if (dp[i][j] != -1) return dp[i][j];

		// çŠ¶æ€è½¬ç§»
		if (text1.charAt(i) == text2.charAt(j)) {
			dp[i][j] = 1 + helper(i - 1, j - 1);
		} else {
			dp[i][j] = Math.max(helper(i, j - 1), helper(i - 1, j));
		}

		return dp[i][j];
	};

	// è°ƒç”¨é€’å½’å‡½æ•°
	return helper(m - 1, n - 1);
};
```

@tab åŠ¨æ€è§„åˆ’-DP table

```javascript
/**
 * @param {string} text1
 * @param {string} text2
 * @return {number}
 */
var longestCommonSubsequence = function (text1, text2) {
	const m = text1.length;
	const n = text2.length;

	// åˆå§‹åŒ–åŠ¨æ€è§„åˆ’æ•°ç»„ï¼Œå¤šä¸€è¡Œä¸€åˆ—ç”¨äºå¤„ç†ç©ºå­—ç¬¦ä¸²çš„æƒ…å†µ
	let dp = new Array(m + 1).fill(0).map((i) => new Array(n + 1).fill(0));

	// åŠ¨æ€è§„åˆ’ï¼Œè®¡ç®—æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦
	for (let i = 1; i <= m; i++) {
		for (let j = 1; j <= n; j++) {
			if (text1.charAt(i - 1) == text2.charAt(j - 1)) {
				dp[i][j] = 1 + dp[i - 1][j - 1];
			} else {
				dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]);
			}
		}
	}
	return dp[m][n];
};
```

:::

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 516 | [æœ€é•¿å›æ–‡å­åºåˆ—](https://leetcode.com/problems/longest-palindromic-subsequence) | [[âœ“]](/problem/0516.md) |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ffb800>Medium</font> |
| 583 | [ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ](https://leetcode.com/problems/delete-operation-for-two-strings) | [[âœ“]](/problem/0583.md) |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ffb800>Medium</font> |
| 1092 | [æœ€çŸ­å…¬å…±è¶…åºåˆ—](https://leetcode.com/problems/shortest-common-supersequence) |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ff334b>Hard</font> |
| 2207 | [å­—ç¬¦ä¸²ä¸­æœ€å¤šæ•°ç›®çš„å­åºåˆ—](https://leetcode.com/problems/maximize-number-of-subsequences-in-a-string) |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) | <font color=#ffb800>Medium</font> |
| 2565 | [æœ€å°‘å¾—åˆ†å­åºåˆ—](https://leetcode.com/problems/subsequence-with-the-minimum-score) |  |  [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) | <font color=#ff334b>Hard</font> |