---
title: 2054. ä¸¤ä¸ªæœ€å¥½çš„ä¸é‡å æ´»åŠ¨
description: LeetCode 2054. ä¸¤ä¸ªæœ€å¥½çš„ä¸é‡å æ´»åŠ¨é¢˜è§£ï¼ŒTwo Best Non-Overlapping Eventsï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2054. ä¸¤ä¸ªæœ€å¥½çš„ä¸é‡å æ´»åŠ¨
  - ä¸¤ä¸ªæœ€å¥½çš„ä¸é‡å æ´»åŠ¨
  - Two Best Non-Overlapping Events
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - äºŒåˆ†æŸ¥æ‰¾
  - åŠ¨æ€è§„åˆ’
  - æ’åº
  - å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
---

# 2054. ä¸¤ä¸ªæœ€å¥½çš„ä¸é‡å æ´»åŠ¨

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`æ’åº`](/tag/sorting.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/two-best-non-overlapping-events) [`LeetCode`](https://leetcode.com/problems/two-best-non-overlapping-events)

## é¢˜ç›®

You are given a **0-indexed** 2D integer array of `events` where `events[i] =
[startTimei, endTimei, valuei]`. The `ith` event starts at `startTimei` and
ends at `endTimei`, and if you attend this event, you will receive a value of
`valuei`. You can choose **at most** **two** **non-overlapping** events to
attend such that the sum of their values is **maximized**.

Return _this**maximum** sum._

Note that the start time and end time is **inclusive** : that is, you cannot
attend two events where one of them starts and the other ends at the same
time. More specifically, if you attend an event with end time `t`, the next
event must start at or after `t + 1`.

**Example 1:**

![](https://assets.leetcode.com/uploads/2021/09/21/picture5.png)

> Input: events = [[1,3,2],[4,5,2],[2,4,3]]
>
> Output: 4
>
> Explanation: Choose the green events, 0 and 1 for a sum of 2 + 2 = 4.

**Example 2:**

![Example 1
Diagram](https://assets.leetcode.com/uploads/2021/09/21/picture1.png)

> Input: events = [[1,3,2],[4,5,2],[1,5,5]]
>
> Output: 5
>
> Explanation: Choose event 2 for a sum of 5.

**Example 3:**

![](https://assets.leetcode.com/uploads/2021/09/21/picture3.png)

> Input: events = [[1,5,3],[1,5,1],[6,6,5]]
>
> Output: 8
>
> Explanation: Choose events 0 and 2 for a sum of 3 + 5 = 8.

**Constraints:**

- `2 <= events.length <= 10^5`
- `events[i].length == 3`
- `1 <= startTimei <= endTimei <= 10^9`
- `1 <= valuei <= 10^6`

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹çš„äºŒç»´æ•´æ•°æ•°ç»„ `events` ï¼Œå…¶ä¸­ `events[i] = [startTimei, endTimei,
valuei]` ã€‚ç¬¬ `i` ä¸ªæ´»åŠ¨å¼€å§‹äº `startTimei` ï¼Œç»“æŸäº `endTimei` ï¼Œå¦‚æœä½ å‚åŠ è¿™ä¸ªæ´»åŠ¨ï¼Œé‚£ä¹ˆä½ å¯ä»¥å¾—åˆ°ä»·å€¼
`valuei` ã€‚ä½  **æœ€å¤š** å¯ä»¥å‚åŠ  **ä¸¤ä¸ªæ—¶é—´ä¸é‡å ** æ´»åŠ¨ï¼Œä½¿å¾—å®ƒä»¬çš„ä»·å€¼ä¹‹å’Œ **æœ€å¤§** ã€‚

è¯·ä½ è¿”å›ä»·å€¼ä¹‹å’Œçš„ **æœ€å¤§å€¼** ã€‚

æ³¨æ„ï¼Œæ´»åŠ¨çš„å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´æ˜¯ **åŒ…æ‹¬**
åœ¨æ´»åŠ¨æ—¶é—´å†…çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸èƒ½å‚åŠ ä¸¤ä¸ªæ´»åŠ¨ä¸”å®ƒä»¬ä¹‹ä¸€çš„å¼€å§‹æ—¶é—´ç­‰äºå¦ä¸€ä¸ªæ´»åŠ¨çš„ç»“æŸæ—¶é—´ã€‚æ›´å…·ä½“çš„ï¼Œå¦‚æœä½ å‚åŠ ä¸€ä¸ªæ´»åŠ¨ï¼Œä¸”ç»“æŸæ—¶é—´ä¸º `t`
ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªæ´»åŠ¨å¿…é¡»åœ¨ `t + 1` æˆ–ä¹‹åçš„æ—¶é—´å¼€å§‹ã€‚

**ç¤ºä¾‹ 1:**

![](https://assets.leetcode.com/uploads/2021/09/21/picture5.png)

> **è¾“å…¥ï¼š** events = [[1,3,2],[4,5,2],[2,4,3]]
>
> **è¾“å‡ºï¼š** 4
>
> **è§£é‡Šï¼š** é€‰æ‹©ç»¿è‰²çš„æ´»åŠ¨ 0 å’Œ 1 ï¼Œä»·å€¼ä¹‹å’Œä¸º 2 + 2 = 4 ã€‚

**ç¤ºä¾‹ 2ï¼š**

![Example 1
Diagram](https://assets.leetcode.com/uploads/2021/09/21/picture1.png)

> **è¾“å…¥ï¼š** events = [[1,3,2],[4,5,2],[1,5,5]]
>
> **è¾“å‡ºï¼š** 5
>
> **è§£é‡Šï¼š** é€‰æ‹©æ´»åŠ¨ 2 ï¼Œä»·å€¼å’Œä¸º 5 ã€‚

**ç¤ºä¾‹ 3ï¼š**

![](https://assets.leetcode.com/uploads/2021/09/21/picture3.png)

> **è¾“å…¥ï¼š** events = [[1,5,3],[1,5,1],[6,6,5]]
>
> **è¾“å‡ºï¼š** 8
>
> **è§£é‡Šï¼š** é€‰æ‹©æ´»åŠ¨ 0 å’Œ 2 ï¼Œä»·å€¼ä¹‹å’Œä¸º 3 + 5 = 8 ã€‚

**æç¤ºï¼š**

- `2 <= events.length <= 10^5`
- `events[i].length == 3`
- `1 <= startTimei <= endTimei <= 10^9`
- `1 <= valuei <= 10^6`

## è§£é¢˜æ€è·¯

ä½¿ç”¨ **æ’åº + åç¼€æ•°ç»„ + äºŒåˆ†æŸ¥æ‰¾** æ¥é«˜æ•ˆè§£å†³æ­¤é—®é¢˜ã€‚

1. æŒ‰å¼€å§‹æ—¶é—´æ’åº

- é¦–å…ˆï¼Œå°†æ‰€æœ‰æ´»åŠ¨æŒ‰å…¶å¼€å§‹æ—¶é—´ `startTime` å‡åºæ’åºã€‚
- æ’åºæ–¹ä¾¿åç»­é€šè¿‡äºŒåˆ†æŸ¥æ‰¾å¿«é€Ÿæ‰¾åˆ°å½“å‰æ´»åŠ¨ä¹‹åçš„ç¬¬ä¸€ä¸ªæœ‰æ•ˆæ´»åŠ¨ã€‚

2. æ„å»ºåç¼€æ•°ç»„ `suffixMax`

- ä½¿ç”¨åç¼€æ•°ç»„ `suffixMax` ä¿å­˜æ¯ä¸ªæ´»åŠ¨å¼€å§‹åå‰©ä½™æ´»åŠ¨ä¸­çš„æœ€å¤§æ”¶ç›Šï¼Œ`suffixMax[i]` è¡¨ç¤ºä»æ´»åŠ¨ `i` åˆ°æœ€åä¸€ä¸ªæ´»åŠ¨çš„æœ€å¤§æ”¶ç›Šã€‚
- ä»åå¾€å‰éå†æ´»åŠ¨åˆ—è¡¨ï¼Œé€æ­¥æ›´æ–° `suffixMax`ï¼š

3. éå†æ¯ä¸ªæ´»åŠ¨å¹¶å°è¯•è®¡ç®—æœ€å¤§æ”¶ç›Š

- å¯¹äºæ¯ä¸ªæ´»åŠ¨ `i`ï¼Œé€šè¿‡äºŒåˆ†æŸ¥æ‰¾å¿«é€Ÿæ‰¾åˆ°å…¶ç»“æŸæ—¶é—´ä¹‹åå¼€å§‹çš„ä¸‹ä¸€ä¸ªæ´»åŠ¨ã€‚
  - å¦‚æœå­˜åœ¨è¿™æ ·çš„æ´»åŠ¨ï¼ˆç´¢å¼•ä¸º `nextIdx`ï¼‰ï¼Œåˆ™è®¡ç®—æ”¶ç›Š `events[i][2] + suffixMax[nextIdx]`ã€‚
  - å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä»…è€ƒè™‘å½“å‰æ´»åŠ¨çš„æ”¶ç›Š `events[i][2]`ã€‚
- ä½¿ç”¨å˜é‡ `maxSum` ä¸æ–­æ›´æ–°æœ€å¤§æ”¶ç›Šã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n log n)`

  - **æ’åº**ï¼šæŒ‰ `startTime` æ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(n log n)`ã€‚
  - **åç¼€æ•°ç»„**ï¼šæ„å»ºåç¼€æ•°ç»„éœ€è¦ `O(n)`ã€‚
  - **äºŒåˆ†æŸ¥æ‰¾**ï¼šå¯¹äºæ¯ä¸ªæ´»åŠ¨ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(log n)`ï¼Œæ€»å…± `n` æ¬¡æŸ¥æ‰¾ï¼Œå› æ­¤ä¸º `O(n log n)`ã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œä½¿ç”¨äº†é¢å¤–çš„åç¼€æ•°ç»„ `suffixMax`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[][]} events
 * @return {number}
 */
var maxTwoEvents = function (events) {
	const n = events.length;
	// æŒ‰å¼€å§‹æ—¶é—´æ’åº
	events.sort((a, b) => a[0] - b[0]);

	// åç¼€æ•°ç»„ï¼Œä¿å­˜æ¯ä¸ªæ´»åŠ¨å¼€å§‹åå‰©ä½™æ´»åŠ¨ä¸­çš„æœ€å¤§æ”¶ç›Š
	let suffixMax = new Array(n);
	suffixMax[n - 1] = events[n - 1][2];

	for (let i = n - 2; i >= 0; i--) {
		suffixMax[i] = Math.max(events[i][2], suffixMax[i + 1]);
	}

	let maxSum = 0; // æœ€å¤§æ”¶ç›Š

	// å¯¹äºæ¯ä¸€ä¸ªäº‹ä»¶ï¼Œæ‰¾åˆ°åœ¨å…¶ç»“æŸåå¼€å§‹çš„ä¸‹ä¸€ä¸ªäº‹ä»¶
	for (let i = 0; i < n; i++) {
		let nextIdx = -1; // ä¸‹ä¸€ä¸ªäº‹ä»¶çš„ index

		// äºŒåˆ†æŸ¥æ‰¾
		let left = i + 1,
			right = n - 1;

		while (left <= right) {
			const mid = ((left + right) / 2) | 0;
			if (events[mid][0] > events[i][1]) {
				nextIdx = mid;
				right = mid - 1;
			} else {
				left = mid + 1;
			}
		}

		if (nextIdx !== -1) {
			// å¦‚æœæ‰¾åˆ°æœ‰æ•ˆçš„ä¸‹ä¸€ä¸ªäº‹ä»¶ï¼Œæ›´æ–°æœ€å¤§å’Œ
			maxSum = Math.max(maxSum, events[i][2] + suffixMax[nextIdx]);
		} else {
			// å¦‚æœæ‰¾ä¸åˆ°ï¼Œä»…è€ƒè™‘å½“å‰æ´»åŠ¨çš„æ”¶ç›Š
			maxSum = Math.max(maxSum, events[i][2]);
		}
	}

	return maxSum;
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1235 | è§„åˆ’å…¼èŒå·¥ä½œ |  |  [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) `1+` | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-profit-in-job-scheduling) [ğŸ”—](https://leetcode.com/problems/maximum-profit-in-job-scheduling) |
| 1751 | æœ€å¤šå¯ä»¥å‚åŠ çš„ä¼šè®®æ•°ç›® II |  |  [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) `1+` | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-number-of-events-that-can-be-attended-ii) [ğŸ”—](https://leetcode.com/problems/maximum-number-of-events-that-can-be-attended-ii) |
| 2555 | ä¸¤ä¸ªçº¿æ®µè·å¾—çš„æœ€å¤šå¥–å“ |  |  [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/maximize-win-from-two-segments) [ğŸ”—](https://leetcode.com/problems/maximize-win-from-two-segments) |