---
title: 2182. æ„é€ é™åˆ¶é‡å¤çš„å­—ç¬¦ä¸²
description: LeetCode 2182. æ„é€ é™åˆ¶é‡å¤çš„å­—ç¬¦ä¸²é¢˜è§£ï¼ŒConstruct String With Repeat Limitï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2182. æ„é€ é™åˆ¶é‡å¤çš„å­—ç¬¦ä¸²
  - æ„é€ é™åˆ¶é‡å¤çš„å­—ç¬¦ä¸²
  - Construct String With Repeat Limit
  - è§£é¢˜æ€è·¯
  - è´ªå¿ƒ
  - å“ˆå¸Œè¡¨
  - å­—ç¬¦ä¸²
  - è®¡æ•°
  - å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
---

# 2182. æ„é€ é™åˆ¶é‡å¤çš„å­—ç¬¦ä¸²

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è´ªå¿ƒ`](/tag/greedy.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`è®¡æ•°`](/tag/counting.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/construct-string-with-repeat-limit) [`LeetCode`](https://leetcode.com/problems/construct-string-with-repeat-limit)

## é¢˜ç›®

You are given a string `s` and an integer `repeatLimit`. Construct a new
string `repeatLimitedString` using the characters of `s` such that no letter
appears **more than** `repeatLimit` times **in a row**. You do **not** have to
use all characters from `s`.

Return _the**lexicographically largest** _`repeatLimitedString` _possible_.

A string `a` is **lexicographically larger** than a string `b` if in the first
position where `a` and `b` differ, string `a` has a letter that appears later
in the alphabet than the corresponding letter in `b`. If the first
`min(a.length, b.length)` characters do not differ, then the longer string is
the lexicographically larger one.

**Example 1:**

> Input: s = "cczazcc", repeatLimit = 3
>
> Output: "zzcccac"
>
> Explanation: We use all of the characters from s to construct the repeatLimitedString "zzcccac".
>
> The letter 'a' appears at most 1 time in a row.
>
> The letter 'c' appears at most 3 times in a row.
>
> The letter 'z' appears at most 2 times in a row.
>
> Hence, no letter appears more than repeatLimit times in a row and the string is a valid repeatLimitedString.
>
> The string is the lexicographically largest repeatLimitedString possible so we return "zzcccac".
>
> Note that the string "zzcccca" is lexicographically larger but the letter 'c' appears more than 3 times in a row, so it is not a valid repeatLimitedString.

**Example 2:**

> Input: s = "aababab", repeatLimit = 2
>
> Output: "bbabaa"
>
> Explanation: We use only some of the characters from s to construct the repeatLimitedString "bbabaa".
>
> The letter 'a' appears at most 2 times in a row.
>
> The letter 'b' appears at most 2 times in a row.
>
> Hence, no letter appears more than repeatLimit times in a row and the string is a valid repeatLimitedString.
>
> The string is the lexicographically largest repeatLimitedString possible so we return "bbabaa".
>
> Note that the string "bbabaaa" is lexicographically larger but the letter 'a' appears more than 2 times in a row, so it is not a valid repeatLimitedString.

**Constraints:**

- `1 <= repeatLimit <= s.length <= 10^5`
- `s` consists of lowercase English letters.

## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªæ•´æ•° `repeatLimit` ï¼Œç”¨ `s` ä¸­çš„å­—ç¬¦æ„é€ ä¸€ä¸ªæ–°å­—ç¬¦ä¸² `repeatLimitedString`
ï¼Œä½¿ä»»ä½•å­—æ¯ **è¿ç»­** å‡ºç°çš„æ¬¡æ•°éƒ½ä¸è¶…è¿‡ `repeatLimit` æ¬¡ã€‚ä½ ä¸å¿…ä½¿ç”¨ `s` ä¸­çš„å…¨éƒ¨å­—ç¬¦ã€‚

è¿”å› **å­—å…¸åºæœ€å¤§çš„** `repeatLimitedString` ã€‚

å¦‚æœåœ¨å­—ç¬¦ä¸² `a` å’Œ `b` ä¸åŒçš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œå­—ç¬¦ä¸² `a` ä¸­çš„å­—æ¯åœ¨å­—æ¯è¡¨ä¸­å‡ºç°æ—¶é—´æ¯”å­—ç¬¦ä¸² `b` å¯¹åº”çš„å­—æ¯æ™šï¼Œåˆ™è®¤ä¸ºå­—ç¬¦ä¸² `a` æ¯”å­—ç¬¦ä¸²
`b` **å­—å…¸åºæ›´å¤§** ã€‚å¦‚æœå­—ç¬¦ä¸²ä¸­å‰ `min(a.length, b.length)` ä¸ªå­—ç¬¦éƒ½ç›¸åŒï¼Œé‚£ä¹ˆè¾ƒé•¿çš„å­—ç¬¦ä¸²å­—å…¸åºæ›´å¤§ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** s = "cczazcc", repeatLimit = 3
>
> **è¾“å‡ºï¼š** "zzcccac"
>
> **è§£é‡Šï¼š** ä½¿ç”¨ s ä¸­çš„æ‰€æœ‰å­—ç¬¦æ¥æ„é€  repeatLimitedString "zzcccac"ã€‚
>
> å­—æ¯ 'a' è¿ç»­å‡ºç°è‡³å¤š 1 æ¬¡ã€‚
>
> å­—æ¯ 'c' è¿ç»­å‡ºç°è‡³å¤š 3 æ¬¡ã€‚
>
> å­—æ¯ 'z' è¿ç»­å‡ºç°è‡³å¤š 2 æ¬¡ã€‚
>
> å› æ­¤ï¼Œæ²¡æœ‰å­—æ¯è¿ç»­å‡ºç°è¶…è¿‡ repeatLimit æ¬¡ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ repeatLimitedString ã€‚
>
> è¯¥å­—ç¬¦ä¸²æ˜¯å­—å…¸åºæœ€å¤§çš„ repeatLimitedString ï¼Œæ‰€ä»¥è¿”å› "zzcccac" ã€‚
>
> æ³¨æ„ï¼Œå°½ç®¡ "zzcccca" å­—å…¸åºæ›´å¤§ï¼Œä½†å­—æ¯ 'c' è¿ç»­å‡ºç°è¶…è¿‡ 3 æ¬¡ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ repeatLimitedString ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = "aababab", repeatLimit = 2
>
> **è¾“å‡ºï¼š** "bbabaa"
>
> **è§£é‡Šï¼š**
>
> ä½¿ç”¨ s ä¸­çš„ä¸€äº›å­—ç¬¦æ¥æ„é€  repeatLimitedString "bbabaa"ã€‚
>
> å­—æ¯ 'a' è¿ç»­å‡ºç°è‡³å¤š 2 æ¬¡ã€‚
>
> å­—æ¯ 'b' è¿ç»­å‡ºç°è‡³å¤š 2 æ¬¡ã€‚
>
> å› æ­¤ï¼Œæ²¡æœ‰å­—æ¯è¿ç»­å‡ºç°è¶…è¿‡ repeatLimit æ¬¡ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ repeatLimitedString ã€‚
>
> è¯¥å­—ç¬¦ä¸²æ˜¯å­—å…¸åºæœ€å¤§çš„ repeatLimitedString ï¼Œæ‰€ä»¥è¿”å› "bbabaa" ã€‚
>
> æ³¨æ„ï¼Œå°½ç®¡ "bbabaaa" å­—å…¸åºæ›´å¤§ï¼Œä½†å­—æ¯ 'a' è¿ç»­å‡ºç°è¶…è¿‡ 2 æ¬¡ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ repeatLimitedString ã€‚

**æç¤ºï¼š**

- `1 <= repeatLimit <= s.length <= 10^5`
- `s` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

## è§£é¢˜æ€è·¯

1. **ç»Ÿè®¡é¢‘æ¬¡å¹¶æ’åº**ï¼š

   - ä½¿ç”¨ `count[26]` æ•°ç»„è®°å½• `s` ä¸­æ¯ä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°

2. **ä»é«˜åˆ°ä½å¤„ç†å­—ç¬¦**ï¼š

   - æ¯æ¬¡é€‰æ‹©å­—å…¸åºæœ€å¤§çš„å­—ç¬¦ï¼Œæ·»åŠ åˆ°ç»“æœå­—ç¬¦ä¸²ä¸­ï¼Œä¸”è¿ç»­æ·»åŠ æ¬¡æ•°ä¸è¶…è¿‡ `repeatLimit`ã€‚
   - å¦‚æœå½“å‰å­—ç¬¦æ— æ³•ç»§ç»­ä½¿ç”¨ï¼ˆå› ä¸ºä¼šè¶…å‡ºé™åˆ¶ï¼‰ï¼Œåˆ™é€‰æ‹©å­—å…¸åºæ¬¡å¤§çš„å­—ç¬¦æ’å…¥ã€‚
   - æ’å…¥æ¬¡é åçš„å­—ç¬¦åï¼Œå¯ä»¥é‡æ–°å°è¯•ä½¿ç”¨å½“å‰æœ€é åçš„å­—ç¬¦ã€‚
   - è‹¥æ²¡æœ‰å…¶ä»–å­—ç¬¦å¯ä»¥æ’å…¥ï¼Œåˆ™åœæ­¢æ„é€ ã€‚

3. **ç»“æŸæ¡ä»¶**ï¼š
   - å½“æ‰€æœ‰å­—ç¬¦çš„é¢‘æ¬¡éƒ½è¢«ç”¨å®Œæ—¶ï¼Œé€€å‡ºå¾ªç¯ï¼Œè¿”å›æ„é€ å¥½çš„å­—ç¬¦ä¸²ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ n æ˜¯è¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚
  - ç»Ÿè®¡é¢‘æ¬¡éœ€è¦ `O(n)`ã€‚
  - æ¯æ¬¡å¯»æ‰¾å¯ç”¨å­—ç¬¦éœ€è¦ `O(26)`ï¼ˆå¸¸æ•°ï¼‰ã€‚
  - æ„é€ ç»“æœå­—ç¬¦ä¸²éœ€è¦éå†æ‰€æœ‰å­—ç¬¦ï¼Œæ€»è®¡ `O(n)`ã€‚
  - æ€»å¤æ‚åº¦ä¸º `O(n)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œä½¿ç”¨ä¸€ä¸ª `res` æ•°ç»„å‚¨å­˜ç»“æœå­—ç¬¦ï¼Œæœ€åæƒ…å†µä¸‹ä¼šå­˜å‚¨ `n` ä¸ªå­—ç¬¦ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @param {number} repeatLimit
 * @return {string}
 */
var repeatLimitedString = function (s, repeatLimit) {
	const getChar = (i) => String.fromCharCode('a'.charCodeAt() + i);
	// ç»Ÿè®¡æ¯ä¸ªå­—ç¬¦çš„é¢‘æ¬¡
	let count = new Array(26).fill(0);
	for (let char of s) {
		count[char.charCodeAt() - 'a'.charCodeAt()]++;
	}

	// æ ‡è®°æ˜¯å¦è¿˜æœ‰æ›´å¤§çš„å­—ç¬¦æ²¡æœ‰ç”¨å®Œ
	let lastIdx = -1;
	let res = [];
	for (let i = 25; i >= 0; i--) {
		// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¯ä»¥ç”¨çš„å­—ç¬¦
		if (count[i] == 0) {
			continue;
		}

		// å¦‚æœè¿˜æœ‰æ›´å¤§çš„å­—ç¬¦æ²¡ç”¨å®Œï¼Œè¯´æ˜æ˜¯è¶…è¿‡é‡å¤é™åˆ¶äº†ï¼Œæ’å…¥æ¬¡å¤§å­—ç¬¦ä¸€æ¬¡ï¼Œå†æ¥ç€æ’å…¥æ›´å¤§çš„å­—ç¬¦
		if (lastIdx > 0) {
			// æ’å…¥æ¬¡å¤§å­—ç¬¦ä¸€æ¬¡
			res.push(getChar(i));
			count[i]--;
			// å› ä¸ºæ¯æ¬¡å¾ªç¯åä¼š i--ï¼Œæ‰€ä»¥è®© i = lastIdx + 1ï¼Œä¿è¯ä¸‹æ¬¡è¿›å…¥å¾ªç¯æ—¶ i æ˜¯ lastIdx
			i = lastIdx + 1;
			lastIdx = -1;
		} else {
			// æ’å…¥å½“å‰å­—ç¬¦ï¼Œæœ€å¤šæ’å…¥ repeatLimit æ¬¡
			for (let j = 0; j < repeatLimit && count[i] > 0; j++, count[i]--) {
				res.push(getChar(i));
			}
			if (count[i] > 0) {
				// æ ‡è®°å½“å‰å­—ç¬¦è¿˜æ²¡æœ‰ç”¨å®Œ
				lastIdx = i;
			}
		}
	}
	return res.join('');
};
```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 358 | K è·ç¦»é—´éš”é‡æ’å­—ç¬¦ä¸² ğŸ”’ |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `3+` | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/rearrange-string-k-distance-apart) [ğŸ”—](https://leetcode.com/problems/rearrange-string-k-distance-apart) |