import{_ as o,r as c,o as l,c as i,a as n,b as e,d as a,w as p,e as d}from"./app-fBVbqwGY.js";const r={},u=n("h1",{id:"_2715-æ‰§è¡Œå¯å–æ¶ˆçš„å»¶è¿Ÿå‡½æ•°",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2715-æ‰§è¡Œå¯å–æ¶ˆçš„å»¶è¿Ÿå‡½æ•°","aria-hidden":"true"},"#"),e(" 2715. æ‰§è¡Œå¯å–æ¶ˆçš„å»¶è¿Ÿå‡½æ•°")],-1),m={href:"https://leetcode.cn/problems/timeout-cancellation",target:"_blank",rel:"noopener noreferrer"},k=n("code",null,"åŠ›æ‰£",-1),v={href:"https://leetcode.com/problems/timeout-cancellation",target:"_blank",rel:"noopener noreferrer"},f=n("code",null,"LeetCode",-1),h=d(`<h2 id="é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®" aria-hidden="true">#</a> é¢˜ç›®</h2><p>Given a function <code>fn</code>, an array of arguments <code>args</code>, and a timeout <code>t</code> in milliseconds, return a cancel function <code>cancelFn</code>.</p><p>After a delay of <code>cancelTimeMs</code>, the returned cancel function <code>cancelFn</code> will be invoked.</p><blockquote><p>setTimeout(cancelFn, cancelTimeMs)</p></blockquote><p>Initially, the execution of the function <code>fn</code> should be delayed by <code>t</code> milliseconds.</p><p>If, before the delay of <code>t</code> milliseconds, the function <code>cancelFn</code> is invoked, it should cancel the delayed execution of <code>fn</code>. Otherwise, if <code>cancelFn</code> is not invoked within the specified delay <code>t</code>, <code>fn</code> should be executed with the provided <code>args</code> as arguments.</p><p><strong>Example 1:</strong></p><blockquote><p>Input: fn = (x) =&gt; x * 5, args = [2], t = 20</p><p>Output: [{&quot;time&quot;: 20, &quot;returned&quot;: 10}]</p><p>Explanation:</p><p>const cancelTimeMs = 50;</p><p>const cancelFn = cancellable((x) =&gt; x * 5, [2], 20);</p><p>setTimeout(cancelFn, cancelTimeMs);</p><p>The cancellation was scheduled to occur after a delay of cancelTimeMs (50ms), which happened after the execution of fn(2) at 20ms.</p></blockquote><p><strong>Example 2:</strong></p><blockquote><p>Input: fn = (x) =&gt; x**2, args = [2], t = 100</p><p>Output: []</p><p>Explanation:</p><p>const cancelTimeMs = 50;</p><p>const cancelFn = cancellable((x) =&gt; x**2, [2], 100);</p><p>setTimeout(cancelFn, cancelTimeMs);</p><p>The cancellation was scheduled to occur after a delay of cancelTimeMs (50ms), which happened before the execution of fn(2) at 100ms, resulting in fn(2) never being called.</p></blockquote><p><strong>Example 3:</strong></p><blockquote><p>Input: fn = (x1, x2) =&gt; x1 * x2, args = [2,4], t = 30</p><p>Output: [{&quot;time&quot;: 30, &quot;returned&quot;: 8}]</p><p>Explanation: const cancelTimeMs = 100;</p><p>const cancelFn = cancellable((x1, x2) =&gt; x1 * x2, [2,4], 30);</p><p>setTimeout(cancelFn, cancelTimeMs);</p><p>The cancellation was scheduled to occur after a delay of cancelTimeMs (100ms), which happened after the execution of fn(2,4) at 30ms.</p></blockquote><p><strong>Constraints:</strong></p><ul><li><code>fn</code> is a function</li><li><code>args</code> is a valid JSON array</li><li><code>1 &lt;= args.length &lt;= 10</code></li><li><code>20 &lt;= t &lt;= 1000</code></li><li><code>10 &lt;= cancelTimeMs &lt;= 1000</code></li></ul><h2 id="é¢˜ç›®å¤§æ„" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®å¤§æ„" aria-hidden="true">#</a> é¢˜ç›®å¤§æ„</h2><p>ç»™å®šä¸€ä¸ªå‡½æ•° <code>fn</code> ï¼Œä¸€ä¸ªå‚æ•°æ•°ç»„ <code>args</code> å’Œä¸€ä¸ªä»¥æ¯«ç§’ä¸ºå•ä½çš„è¶…æ—¶æ—¶é—´ <code>t</code> ï¼Œè¿”å›ä¸€ä¸ªå–æ¶ˆå‡½æ•° <code>cancelFn</code> ã€‚</p><p>åœ¨ <code>cancelTimeMs</code> çš„å»¶è¿Ÿåï¼Œè¿”å›çš„å–æ¶ˆå‡½æ•° <code>cancelFn</code> å°†è¢«è°ƒç”¨ã€‚</p><blockquote><p>setTimeout(cancelFn, cancelTimeMs)</p></blockquote><p>æœ€åˆï¼Œå‡½æ•° <code>fn</code> çš„æ‰§è¡Œåº”è¯¥å»¶è¿Ÿ <code>t</code> æ¯«ç§’ã€‚</p><p>å¦‚æœåœ¨ <code>t</code> æ¯«ç§’çš„å»¶è¿Ÿä¹‹å‰è°ƒç”¨äº†å‡½æ•° <code>cancelFn</code>ï¼Œå®ƒåº”è¯¥å–æ¶ˆ <code>fn</code> çš„å»¶è¿Ÿæ‰§è¡Œã€‚å¦åˆ™ï¼Œå¦‚æœåœ¨æŒ‡å®šçš„å»¶è¿Ÿ <code>t</code> å†…æ²¡æœ‰è°ƒç”¨ <code>cancelFn</code>ï¼Œåˆ™åº”æ‰§è¡Œ <code>fn</code>ï¼Œå¹¶ä½¿ç”¨æä¾›çš„ <code>args</code> ä½œä¸ºå‚æ•°ã€‚</p><p><strong>æç¤ºï¼š</strong></p><ul><li><code>fn</code> æ˜¯ä¸€ä¸ªå‡½æ•°</li><li><code>args</code> æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ JSON æ•°ç»„</li><li><code>1 &lt;= args.length &lt;= 10</code></li><li><code>20 &lt;= t &lt;= 1000</code></li><li><code>10 &lt;= cancelTimeMs &lt;= 1000</code></li></ul><h2 id="è§£é¢˜æ€è·¯" tabindex="-1"><a class="header-anchor" href="#è§£é¢˜æ€è·¯" aria-hidden="true">#</a> è§£é¢˜æ€è·¯</h2><ol><li><p><strong>åˆ›å»ºå®šæ—¶å™¨</strong>ï¼šä½¿ç”¨ <code>setTimeout</code> æ¥æ‰§è¡Œ <code>fn</code>ï¼Œå¹¶è®¾ç½®å»¶è¿Ÿ <code>t</code> æ¯«ç§’åæ‰§è¡Œã€‚</p></li><li><p><strong>å®ç°å–æ¶ˆåŠŸèƒ½</strong>ï¼š<code>setTimeout</code> ä¼šè¿”å›ä¸€ä¸ª <code>timer</code> å¥æŸ„ï¼Œå¯ä»¥é€šè¿‡ <code>clearTimeout(timer)</code> æ¥å–æ¶ˆè¯¥å®šæ—¶å™¨ã€‚è¿”å›ä¸€ä¸ªå–æ¶ˆå‡½æ•° <code>cancelFn</code>ï¼Œè¯¥å‡½æ•°è¢«è°ƒç”¨æ—¶ä¼šæ¸…é™¤å®šæ—¶å™¨ï¼Œé˜»æ­¢ <code>fn</code> çš„æ‰§è¡Œã€‚</p></li></ol><h4 id="å¤æ‚åº¦åˆ†æ" tabindex="-1"><a class="header-anchor" href="#å¤æ‚åº¦åˆ†æ" aria-hidden="true">#</a> å¤æ‚åº¦åˆ†æ</h4><ul><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š<code>O(1)</code>ï¼Œ<code>setTimeout</code> å’Œ <code>clearTimeout</code> çš„è°ƒç”¨éƒ½æ˜¯å¸¸æ•°æ—¶é—´æ“ä½œã€‚</li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š<code>O(1)</code>ï¼Œå­˜å‚¨ä¸€ä¸ªå®šæ—¶å™¨å¥æŸ„ <code>timer</code> ä»¥åŠå–æ¶ˆå‡½æ•°å ç”¨å¸¸æ•°ç©ºé—´ã€‚</li></ul><h2 id="ä»£ç " tabindex="-1"><a class="header-anchor" href="#ä»£ç " aria-hidden="true">#</a> ä»£ç </h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Function<span class="token punctuation">}</span></span> <span class="token parameter">fn</span>
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Array<span class="token punctuation">}</span></span> <span class="token parameter">args</span>
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token parameter">t</span>
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span>Function<span class="token punctuation">}</span></span>
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">cancellable</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> args<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å»¶è¿Ÿ t æ¯«ç§’åæ‰§è¡Œ fn</span>
	<span class="token keyword">const</span> <span class="token function-variable function">cancelFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›å–æ¶ˆå‡½æ•°</span>
	<span class="token keyword">return</span> cancelFn<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 *  const result = [];
 *
 *  const fn = (x) =&gt; x * 5;
 *  const args = [2], t = 20, cancelTimeMs = 50;
 *
 *  const start = performance.now();
 *
 *  const log = (...argsArr) =&gt; <span class="token punctuation">{</span>
 *      const diff = Math.floor(performance.now() - start);
 *      result.push(<span class="token punctuation">{</span>&quot;time&quot;: diff, &quot;returned&quot;: fn(...argsArr)<span class="token punctuation">}</span>);
 *  <span class="token punctuation">}</span>
 *
 *  const cancel = cancellable(log, args, t);
 *
 *  const maxT = Math.max(t, cancelTimeMs);
 *
 *  setTimeout(cancel, cancelTimeMs);
 *
 *  setTimeout(() =&gt; <span class="token punctuation">{</span>
 *      console.log(result); // [<span class="token punctuation">{</span>&quot;time&quot;:20,&quot;returned&quot;:10<span class="token punctuation">}</span>]
 *  <span class="token punctuation">}</span>, maxT + 15)
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,28);function b(g,x){const t=c("font"),s=c("ExternalLinkIcon");return l(),i("div",null,[u,n("p",null,[e("ğŸŸ¢ "),a(t,{color:"#15bd66"},{default:p(()=>[e("Easy")]),_:1}),e("â€ƒ ğŸ”—â€‚"),n("a",m,[k,a(s)]),e(),n("a",v,[f,a(s)])]),h])}const _=o(r,[["render",b],["__file","2715.html.vue"]]);export{_ as default};
