import{_ as i,r as p,o as r,c as k,a as n,b as s,d as t,w as a,e as d}from"./app-B5EG-zH0.js";const m={},v=n("h1",{id:"_2795-å¹¶è¡Œæ‰§è¡Œ-promise-ä»¥è·å–ç‹¬æœ‰çš„ç»“æœ-ğŸ”’",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2795-å¹¶è¡Œæ‰§è¡Œ-promise-ä»¥è·å–ç‹¬æœ‰çš„ç»“æœ-ğŸ”’","aria-hidden":"true"},"#"),s(" 2795. å¹¶è¡Œæ‰§è¡Œ Promise ä»¥è·å–ç‹¬æœ‰çš„ç»“æœ ğŸ”’")],-1),b={href:"https://leetcode.cn/problems/parallel-execution-of-promises-for-individual-results-retrieval",target:"_blank",rel:"noopener noreferrer"},g=n("code",null,"åŠ›æ‰£",-1),f={href:"https://leetcode.com/problems/parallel-execution-of-promises-for-individual-results-retrieval",target:"_blank",rel:"noopener noreferrer"},q=n("code",null,"LeetCode",-1),h=d(`<h2 id="é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®" aria-hidden="true">#</a> é¢˜ç›®</h2><p>Given an array <code>functions</code>, return a promise <code>promise</code>. <code>functions</code> is an array of functions that return promises <code>fnPromise.</code> Each <code>fnPromise</code> can be resolved or rejected.</p><p>If <code>fnPromise</code> is resolved:</p><p><code>obj = { status: &quot;fulfilled&quot;, value: resolved value }</code></p><p>If <code>fnPromise</code> is rejected:</p><p><code>obj = { status: &quot;rejected&quot;, reason: reason of rejection (catched error message) }</code></p><p>The <code>promise</code> should resolve with an array of these objects <code>obj</code>. Each <code>obj</code> in the array should correspond to the promises in the original array function, <strong>maintaining the same order</strong>.</p><p>Try to implement it without using the built-in method <code>Promise.allSettled()</code>.</p><p><strong>Example 1:</strong></p><blockquote><p>Input:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>functions <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Output:</p><p><code>{&quot;t&quot;:100,&quot;values&quot;:[{&quot;status&quot;:&quot;fulfilled&quot;,&quot;value&quot;:15}]}</code></p><p>Explanation:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> time <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token function">promiseAllSettled</span><span class="token punctuation">(</span>functions<span class="token punctuation">)</span><span class="token punctuation">;</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> out <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">t</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> time<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">values</span><span class="token operator">:</span> res <span class="token punctuation">}</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {&quot;t&quot;:100,&quot;values&quot;:[{&quot;status&quot;:&quot;fulfilled&quot;,&quot;value&quot;:15}]}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The returned promise resolves within 100 milliseconds. Since promise from the array functions is fulfilled, the resolved value of the returned promise is set to [{&quot;status&quot;:&quot;fulfilled&quot;,&quot;value&quot;:15}].</p></blockquote><p><strong>Example 2:</strong></p><blockquote><p>Input:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>functions <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Output:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;values&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token string-property property">&quot;status&quot;</span><span class="token operator">:</span><span class="token string">&quot;fulfilled&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token string-property property">&quot;status&quot;</span><span class="token operator">:</span><span class="token string">&quot;fulfilled&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Explanation: The returned promise resolves within 100 milliseconds, because the resolution time is determined by the promise that takes the longest time to fulfill. Since promises from the array functions are fulfilled, the resolved value of the returned promise is set to [{&quot;status&quot;:&quot;fulfilled&quot;,&quot;value&quot;:20},{&quot;status&quot;:&quot;fulfilled&quot;,&quot;value&quot;:15}].</p></blockquote><p><strong>Example 3:</strong></p><blockquote><p>Input:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>functions <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
		<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;Error&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Output:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;values&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token string-property property">&quot;status&quot;</span><span class="token operator">:</span><span class="token string">&quot;fulfilled&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token string-property property">&quot;status&quot;</span><span class="token operator">:</span><span class="token string">&quot;rejected&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;reason&quot;</span><span class="token operator">:</span><span class="token string">&quot;Error&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Explanation: The returned promise resolves within 200 milliseconds, as its resolution time is determined by the promise that takes the longest time to fulfill. Since one promise from the array function is fulfilled and another is rejected, the resolved value of the returned promise is set to an array containing objects in the following order: [{&quot;status&quot;:&quot;fulfilled&quot;,&quot;value&quot;:30}, {&quot;status&quot;:&quot;rejected&quot;,&quot;reason&quot;:&quot;Error&quot;}]. Each object in the array corresponds to the promises in the original array function, maintaining the same order.</p></blockquote><p><strong>Constraints:</strong></p><ul><li><code>1 &lt;= functions.length &lt;= 10</code></li></ul><h2 id="é¢˜ç›®å¤§æ„" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®å¤§æ„" aria-hidden="true">#</a> é¢˜ç›®å¤§æ„</h2><p>ç»™å®šä¸€ä¸ªæ•°ç»„ <code>functions</code>ï¼Œè¿”å›ä¸€ä¸ª promise å¯¹è±¡ <code>promise</code>ã€‚<code>functions</code> æ˜¯ä¸€ä¸ªè¿”å›å¤šä¸ª promise å¯¹è±¡ <code>fnPromise</code> çš„å‡½æ•°æ•°ç»„ã€‚æ¯ä¸ª <code>fnPromise</code> å¯ä»¥è¢«è§£æï¼ˆresolvedï¼‰æˆ–æ‹’ç»ï¼ˆrejectedï¼‰ã€‚</p><p>å¦‚æœ <code>fnPromise</code> è¢«è§£æï¼š</p><p><code>obj = { status: &quot;fulfilled&quot;, value: resolved value }</code></p><p>å¦‚æœ <code>fnPromise</code> è¢«æ‹’ç»ï¼š</p><p><code>obj = { status: &quot;rejected&quot;, reason: æ‹’ç»çš„åŸå› ï¼ˆæ•è·çš„é”™è¯¯æ¶ˆæ¯ï¼‰}</code></p><p>è¯¥ <code>promise</code> åº”è¯¥è¿”å›ä¸€ä¸ªåŒ…å«è¿™äº›å¯¹è±¡ <code>obj</code> çš„æ•°ç»„ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ª <code>obj</code> åº”è¯¥å¯¹åº”åŸå§‹å‡½æ•°æ•°ç»„ä¸­çš„å¤šä¸ª promise å¯¹è±¡ï¼Œå¹¶ä¿æŒç›¸åŒçš„é¡ºåºã€‚</p><p>è¯·åœ¨ä¸ä½¿ç”¨å†…ç½®æ–¹æ³• <code>Promise.allSettled()</code> çš„æƒ…å†µä¸‹å®ç°å®ƒã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><blockquote><p><strong>è¾“å…¥ï¼š</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>functions <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è¾“å‡ºï¼š</strong></p><p><code>{&quot;t&quot;:100,&quot;values&quot;:[{&quot;status&quot;:&quot;fulfilled&quot;,&quot;value&quot;:15}]}</code></p><p><strong>è§£é‡Šï¼š</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> time <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token function">promiseAllSettled</span><span class="token punctuation">(</span>functions<span class="token punctuation">)</span><span class="token punctuation">;</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> out <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">t</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> time<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">values</span><span class="token operator">:</span> res <span class="token punctuation">}</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {&quot;t&quot;:100,&quot;values&quot;:[{&quot;status&quot;:&quot;fulfilled&quot;,&quot;value&quot;:15}]}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿”å›çš„ promise åœ¨ 100 æ¯«ç§’å†…è§£æã€‚ç”±äºå‡½æ•°æ•°ç»„ä¸­çš„ promise è¢«è§£æï¼Œè¿”å›çš„ promise çš„è§£æå€¼è®¾ç½®ä¸º[{&quot;status&quot;:&quot;fulfilled&quot;,&quot;value&quot;:15}]ã€‚</p></blockquote><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><blockquote><p><strong>è¾“å…¥ï¼š</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>functions <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è¾“å‡ºï¼š</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;values&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token string-property property">&quot;status&quot;</span><span class="token operator">:</span><span class="token string">&quot;fulfilled&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token string-property property">&quot;status&quot;</span><span class="token operator">:</span><span class="token string">&quot;fulfilled&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è§£é‡Šï¼š</strong> è¿”å›çš„ promise åœ¨ 100 æ¯«ç§’å†…è§£æï¼Œå› ä¸ºè§£ææ—¶é—´å–å†³äºéœ€è¦æœ€é•¿æ—¶é—´æ¥è§£æçš„ promiseã€‚ç”±äºå‡½æ•°æ•°ç»„ä¸­çš„ promises è¢«è§£æï¼Œè¿”å›çš„ promise çš„è§£æå€¼è®¾ç½®ä¸º[{&quot;status&quot;:&quot;fulfilled&quot;,&quot;value&quot;:20},{&quot;status&quot;:&quot;fulfilled&quot;,&quot;value&quot;:15}]ã€‚</p></blockquote><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><blockquote><p><strong>è¾“å…¥ï¼š</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>functions <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
		<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;Error&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è¾“å‡ºï¼š</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;values&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token string-property property">&quot;status&quot;</span><span class="token operator">:</span><span class="token string">&quot;fulfilled&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token string-property property">&quot;status&quot;</span><span class="token operator">:</span><span class="token string">&quot;rejected&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;reason&quot;</span><span class="token operator">:</span><span class="token string">&quot;Error&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è§£é‡Šï¼š</strong> è¿”å›çš„ promise åœ¨ 200 æ¯«ç§’å†…è§£æï¼Œå› ä¸ºè§£ææ—¶é—´å–å†³äºéœ€è¦æœ€é•¿æ—¶é—´æ¥è§£æçš„ promiseã€‚ç”±äºå‡½æ•°æ•°ç»„ä¸­çš„ä¸€ä¸ª promise è¢«è§£æï¼Œå¦ä¸€ä¸ªè¢«æ‹’ç»ï¼Œè¿”å›çš„ promise çš„è§£æå€¼è®¾ç½®ä¸º[{&quot;status&quot;:&quot;fulfilled&quot;,&quot;value&quot;:30},{&quot;status&quot;:&quot;rejected&quot;,&quot;reason&quot;:&quot;Error&quot;}]ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå¯¹è±¡å¯¹åº”åŸå§‹å‡½æ•°æ•°ç»„ä¸­çš„ promiseï¼Œå¹¶ä¿æŒç›¸åŒçš„é¡ºåºã€‚</p></blockquote><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= functions.length &lt;= 10</code></li></ul><h2 id="è§£é¢˜æ€è·¯" tabindex="-1"><a class="header-anchor" href="#è§£é¢˜æ€è·¯" aria-hidden="true">#</a> è§£é¢˜æ€è·¯</h2><h3 id="æ€è·¯ä¸€-foreach" tabindex="-1"><a class="header-anchor" href="#æ€è·¯ä¸€-foreach" aria-hidden="true">#</a> æ€è·¯ä¸€ï¼šforEach</h3><ol><li><p><strong>åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Promise</code> å¯¹è±¡</strong>ï¼šå®šä¹‰ <code>promiseAllSettled</code> å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª <code>Promise</code>ï¼Œç¡®ä¿åœ¨æ‰€æœ‰ <code>functions</code> æ•°ç»„ä¸­çš„ <code>Promise</code> çŠ¶æ€éƒ½å·²ç¡®å®šï¼ˆæ— è®ºæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼‰æ—¶ï¼Œç»Ÿä¸€è¿”å›ç»“æœã€‚</p></li><li><p><strong>éå† <code>functions</code> æ•°ç»„</strong>ï¼šä½¿ç”¨ <code>forEach</code> éå†æ¯ä¸ªè¿”å› <code>Promise</code> çš„å‡½æ•° <code>fn</code>ã€‚æ¯ä¸ª <code>fn</code> ä¼šè¢«è°ƒç”¨ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Promise</code> å¯¹è±¡ã€‚</p></li><li><p><strong>å¤„ç†æ¯ä¸ª <code>Promise</code> çš„çŠ¶æ€</strong>ï¼š</p><ul><li>å¦‚æœ <code>Promise</code> è¢«è§£æï¼Œåˆ™åœ¨ <code>result</code> æ•°ç»„ä¸­å¯¹åº”ä½ç½® <code>i</code> å­˜å…¥ <code>{ status: &#39;fulfilled&#39;, value: res }</code>ã€‚</li><li>å¦‚æœ <code>Promise</code> è¢«æ‹’ç»ï¼Œåˆ™åœ¨ <code>result</code> æ•°ç»„ä¸­å­˜å…¥ <code>{ status: &#39;rejected&#39;, reason: err }</code>ã€‚</li><li>ä¸ç®¡ <code>Promise</code> æ˜¯è§£æè¿˜æ˜¯æ‹’ç»ï¼Œ<code>count</code> éƒ½ä¼šå¢åŠ ï¼Œç”¨äºè®°å½•å·²å¤„ç†çš„ <code>Promise</code> æ•°é‡ã€‚</li></ul></li><li><p><strong>æ£€æŸ¥æ‰€æœ‰ <code>Promise</code> æ˜¯å¦å·²å¤„ç†</strong>ï¼š</p><ul><li>æ¯æ¬¡æœ‰ä¸€ä¸ª <code>Promise</code> çš„çŠ¶æ€ç¡®å®šåï¼Œéƒ½ä¼šæ£€æŸ¥ <code>count</code> æ˜¯å¦ç­‰äº <code>functions.length</code>ã€‚</li><li>ä¸€æ—¦ <code>count</code> è¾¾åˆ° <code>functions.length</code>ï¼Œè¡¨ç¤ºæ‰€æœ‰ <code>Promise</code> çŠ¶æ€éƒ½å·²ç¡®å®šï¼Œè°ƒç”¨ <code>resolve(result)</code> å°† <code>result</code> æ•°ç»„ä¼ å›ï¼Œä»¥ä¿è¯ <code>promiseAllSettled</code> è§£æå¹¶è¿”å›æœ€ç»ˆç»“æœã€‚</li></ul></li></ol><h4 id="å¤æ‚åº¦åˆ†æ" tabindex="-1"><a class="header-anchor" href="#å¤æ‚åº¦åˆ†æ" aria-hidden="true">#</a> å¤æ‚åº¦åˆ†æ</h4><ul><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š<code>O(n)</code>ï¼Œå…¶ä¸­ <code>n</code> æ˜¯ <code>functions</code> æ•°ç»„çš„é•¿åº¦ï¼Œæ¯ä¸ªå‡½æ•°è°ƒç”¨ä¸€æ¬¡ã€‚</li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š<code>O(n)</code>ï¼Œéœ€è¦å­˜å‚¨æ‰€æœ‰çš„ <code>Promise</code> ç»“æœå¯¹è±¡ã€‚</li></ul><h3 id="æ€è·¯äºŒ-promise-all" tabindex="-1"><a class="header-anchor" href="#æ€è·¯äºŒ-promise-all" aria-hidden="true">#</a> æ€è·¯äºŒï¼šPromise.all</h3><ol><li><strong>å®šä¹‰ <code>promiseAllSettled</code> å‡½æ•°</strong>ï¼š å‡½æ•°æ¥å—ä¸€ä¸ª <code>Promise</code> æ•°ç»„å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code>ï¼Œè¯¥ <code>Promise</code> ä¼šç­‰å¾…æ‰€æœ‰è¾“å…¥çš„ <code>Promise</code> å®Œæˆï¼Œæ— è®ºå®ƒä»¬æ˜¯ <code>resolved</code> è¿˜æ˜¯ <code>rejected</code>ã€‚</li><li><strong>éå†æ‰€æœ‰ <code>Promise</code> çš„çŠ¶æ€</strong>ï¼š å¯¹äºæ¯ä¸ª <code>Promise</code>ï¼Œä½¿ç”¨ <code>.then</code> å’Œ <code>.catch</code> æ–¹æ³•åˆ†åˆ«å¤„ç†æˆåŠŸå’Œå¤±è´¥çš„æƒ…å†µï¼Œç¡®ä¿å°†ç»“æœä»¥ <code>{ status, value/reason }</code> æ ¼å¼å­˜å‚¨ã€‚</li><li><strong>ç­‰å¾…æ‰€æœ‰ <code>Promise</code> å®Œæˆ</strong>ï¼š ä½¿ç”¨ <code>Promise.all</code> åŒ…è£¹æ¯ä¸ªå¤„ç†åçš„ <code>Promise</code>ï¼Œç¡®ä¿æ‰€æœ‰ <code>Promise</code> çŠ¶æ€éƒ½è¢«æ”¶é›†åæ‰è¿”å›ã€‚</li></ol><h4 id="å¤æ‚åº¦åˆ†æ-1" tabindex="-1"><a class="header-anchor" href="#å¤æ‚åº¦åˆ†æ-1" aria-hidden="true">#</a> å¤æ‚åº¦åˆ†æ</h4><ul><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š<code>O(n)</code>ï¼Œå…¶ä¸­ <code>n</code> æ˜¯ <code>functions</code> çš„é•¿åº¦ï¼Œæ¯ä¸ªå‡½æ•°è°ƒç”¨ä¸€æ¬¡ã€‚</li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š<code>O(n)</code>ï¼Œç”¨äºå­˜å‚¨ <code>promises</code> æ•°ç»„çš„çŠ¶æ€ã€‚</li></ul><h2 id="ä»£ç " tabindex="-1"><a class="header-anchor" href="#ä»£ç " aria-hidden="true">#</a> ä»£ç </h2>`,42),y=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Array"),n("span",{class:"token punctuation"},"<"),s("Function"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"}")]),s(`
 * `),n("span",{class:"token keyword"},"@return"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Promise"),n("span",{class:"token punctuation"},"<"),s("any"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"}")]),s(`
 */`)]),s(`
`),n("span",{class:"token keyword"},"var"),s(),n("span",{class:"token function-variable function"},"promiseAllSettled"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"functions"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Promise"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"resolve"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"let"),s(" result "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
			count `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`
		functions`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("fn"),n("span",{class:"token punctuation"},","),s(" i")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(`
			`),n("span",{class:"token function"},"fn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
				`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"res"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
					result`),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"status"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'fulfilled'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"value"),n("span",{class:"token operator"},":"),s(" res "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
					count`),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
				`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"catch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"err"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
					result`),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"status"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'rejected'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"reason"),n("span",{class:"token operator"},":"),s(" err "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
					count`),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
				`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
					`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("count "),n("span",{class:"token operator"},"=="),s(" functions"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
						`),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("result"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
					`),n("span",{class:"token punctuation"},"}"),s(`
				`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),j=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Array"),n("span",{class:"token punctuation"},"<"),s("Function"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"}")]),s(`
 * `),n("span",{class:"token keyword"},"@return"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Promise"),n("span",{class:"token punctuation"},"<"),s("any"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"}")]),s(`
 */`)]),s(`
`),n("span",{class:"token keyword"},"var"),s(),n("span",{class:"token function-variable function"},"promiseAllSettled"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"functions"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" promises "),n("span",{class:"token operator"},"="),s(" functions"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"fn"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(`
		`),n("span",{class:"token function"},"fn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),s(`
			`),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"value"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"status"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'fulfilled'"),n("span",{class:"token punctuation"},","),s(" value "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
			`),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"reason"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"status"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'rejected'"),n("span",{class:"token punctuation"},","),s(" reason "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"return"),s(" Promise"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"all"),n("span",{class:"token punctuation"},"("),s("promises"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1);function w(P,_){const u=p("font"),c=p("ExternalLinkIcon"),l=p("CodeTabs");return r(),k("div",null,[v,n("p",null,[s("ğŸŸ  "),t(u,{color:"#ffb800"},{default:a(()=>[s("Medium")]),_:1}),s("â€ƒ ğŸ”—â€‚"),n("a",b,[g,t(c)]),s(),n("a",f,[q,t(c)])]),h,t(l,{id:"292",data:[{id:"forEach"},{id:"Promise.all"}]},{title0:a(({value:o,isActive:e})=>[s("forEach")]),title1:a(({value:o,isActive:e})=>[s("Promise.all")]),tab0:a(({value:o,isActive:e})=>[y]),tab1:a(({value:o,isActive:e})=>[j]),_:1},8,["data"])])}const E=i(m,[["render",w],["__file","2795.html.vue"]]);export{E as default};
