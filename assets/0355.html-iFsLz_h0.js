import{_ as l,r as o,o as i,c as u,a as n,b as s,d as a,w as t,f as k,e as d}from"./app-aQeLbVW9.js";const r={},v=n("h1",{id:"_355-è®¾è®¡æ¨ç‰¹",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_355-è®¾è®¡æ¨ç‰¹","aria-hidden":"true"},"#"),s(" 355. è®¾è®¡æ¨ç‰¹")],-1),m=n("code",null,"è®¾è®¡",-1),w=n("code",null,"å“ˆå¸Œè¡¨",-1),h=n("code",null,"é“¾è¡¨",-1),b=n("code",null,"å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰",-1),f={href:"https://leetcode.cn/problems/design-twitter",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"åŠ›æ‰£",-1),g={href:"https://leetcode.com/problems/design-twitter",target:"_blank",rel:"noopener noreferrer"},I=n("code",null,"LeetCode",-1),_=d(`<h2 id="é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®" aria-hidden="true">#</a> é¢˜ç›®</h2><p>Design a simplified version of Twitter where users can post tweets, follow/unfollow another user, and is able to see the <code>10</code> most recent tweets in the user&#39;s news feed.</p><p>Implement the <code>Twitter</code> class:</p><ul><li><code>Twitter()</code> Initializes your twitter object.</li><li><code>void postTweet(int userId, int tweetId)</code> Composes a new tweet with ID <code>tweetId</code> by the user <code>userId</code>. Each call to this function will be made with a unique <code>tweetId</code>.</li><li><code>List&lt;Integer&gt; getNewsFeed(int userId)</code> Retrieves the <code>10</code> most recent tweet IDs in the user&#39;s news feed. Each item in the news feed must be posted by users who the user followed or by the user themself. Tweets must be <strong>ordered from most recent to least recent</strong>.</li><li><code>void follow(int followerId, int followeeId)</code> The user with ID <code>followerId</code> started following the user with ID <code>followeeId</code>.</li><li><code>void unfollow(int followerId, int followeeId)</code> The user with ID <code>followerId</code> started unfollowing the user with ID <code>followeeId</code>.</li></ul><p><strong>Example 1:</strong></p><blockquote><p><strong>Input</strong></p><p>[&quot;Twitter&quot;, &quot;postTweet&quot;, &quot;getNewsFeed&quot;, &quot;follow&quot;, &quot;postTweet&quot;, &quot;getNewsFeed&quot;, &quot;unfollow&quot;, &quot;getNewsFeed&quot;]</p><p>[[], [1, 5], [1], [1, 2], [2, 6], [1], [1, 2], [1]]</p><p><strong>Output</strong></p><p>[null, null, [5], null, null, [6, 5], null, [5]]</p><p><strong>Explanation</strong></p><p>Twitter twitter = new Twitter();</p><p>twitter.postTweet(1, 5); // User 1 posts a new tweet (id = 5).</p><p>twitter.getNewsFeed(1); // User 1&#39;s news feed should return a list with 1 tweet id -&gt; [5]. return [5]</p><p>twitter.follow(1, 2); // User 1 follows user 2.</p><p>twitter.postTweet(2, 6); // User 2 posts a new tweet (id = 6).</p><p>twitter.getNewsFeed(1); // User 1&#39;s news feed should return a list with 2 tweet ids -&gt; [6, 5]. Tweet id 6 should precede tweet id 5 because it is posted after tweet id 5.</p><p>twitter.unfollow(1, 2); // User 1 unfollows user 2.</p><p>twitter.getNewsFeed(1); // User 1&#39;s news feed should return a list with 1 tweet id -&gt; [5], since user 1 is no longer following user 2.</p></blockquote><p><strong>Constraints:</strong></p><ul><li><code>1 &lt;= userId, followerId, followeeId &lt;= 500</code></li><li><code>0 &lt;= tweetId &lt;= 10^4</code></li><li>All the tweets have <strong>unique</strong> IDs.</li><li>At most <code>3 * 10^4</code> calls will be made to <code>postTweet</code>, <code>getNewsFeed</code>, <code>follow</code>, and <code>unfollow</code>.</li></ul><h2 id="é¢˜ç›®å¤§æ„" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®å¤§æ„" aria-hidden="true">#</a> é¢˜ç›®å¤§æ„</h2><p>è®¾è®¡ä¸€ä¸ªç®€åŒ–ç‰ˆçš„æ¨ç‰¹(Twitter)ï¼Œå¯ä»¥è®©ç”¨æˆ·å®ç°å‘é€æ¨æ–‡ï¼Œå…³æ³¨/å–æ¶ˆå…³æ³¨å…¶ä»–ç”¨æˆ·ï¼Œèƒ½å¤Ÿçœ‹è§å…³æ³¨äººï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰çš„æœ€è¿‘ <code>10</code> æ¡æ¨æ–‡ã€‚</p><p>å®ç° <code>Twitter</code> ç±»ï¼š</p><ul><li><code>Twitter()</code> åˆå§‹åŒ–ç®€æ˜“ç‰ˆæ¨ç‰¹å¯¹è±¡</li><li><code>void postTweet(int userId, int tweetId)</code> æ ¹æ®ç»™å®šçš„ <code>tweetId</code> å’Œ <code>userId</code> åˆ›å»ºä¸€æ¡æ–°æ¨æ–‡ã€‚æ¯æ¬¡è°ƒç”¨æ­¤å‡½æ•°éƒ½ä¼šä½¿ç”¨ä¸€ä¸ªä¸åŒçš„ <code>tweetId</code> ã€‚</li><li><code>List&lt;Integer&gt; getNewsFeed(int userId)</code> æ£€ç´¢å½“å‰ç”¨æˆ·æ–°é—»æ¨é€ä¸­æœ€è¿‘ <code>10</code> æ¡æ¨æ–‡çš„ ID ã€‚æ–°é—»æ¨é€ä¸­çš„æ¯ä¸€é¡¹éƒ½å¿…é¡»æ˜¯ç”±ç”¨æˆ·å…³æ³¨çš„äººæˆ–è€…æ˜¯ç”¨æˆ·è‡ªå·±å‘å¸ƒçš„æ¨æ–‡ã€‚æ¨æ–‡å¿…é¡» æŒ‰ç…§æ—¶é—´é¡ºåºç”±æœ€è¿‘åˆ°æœ€è¿œæ’åº ã€‚</li><li><code>void follow(int followerId, int followeeId)</code> ID ä¸º <code>followerId</code> çš„ç”¨æˆ·å¼€å§‹å…³æ³¨ ID ä¸º <code>followeeId</code> çš„ç”¨æˆ·ã€‚</li><li><code>void unfollow(int followerId, int followeeId)</code> ID ä¸º <code>followerId</code> çš„ç”¨æˆ·ä¸å†å…³æ³¨ ID ä¸º <code>followeeId</code> çš„ç”¨æˆ·ã€‚</li></ul><h2 id="è§£é¢˜æ€è·¯" tabindex="-1"><a class="header-anchor" href="#è§£é¢˜æ€è·¯" aria-hidden="true">#</a> è§£é¢˜æ€è·¯</h2><p>å¯ä»¥ä½¿ç”¨å“ˆå¸Œè¡¨å’Œä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæˆ–è€…å †ï¼‰æ¥å­˜å‚¨ç”¨æˆ·çš„æ¨æ–‡å’Œå…³æ³¨å…³ç³»ã€‚</p><ol><li><p>å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨æ¥å­˜å‚¨ç”¨æˆ·çš„æ¨æ–‡ã€‚å“ˆå¸Œè¡¨çš„é”®æ˜¯ç”¨æˆ·çš„ IDï¼Œå€¼æ˜¯ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæˆ–è€…å †ï¼‰ï¼Œç”¨äºæŒ‰ç…§æ—¶é—´æˆ³å­˜å‚¨ç”¨æˆ·çš„æ¨æ–‡ã€‚æ¯ä¸ªæ¨æ–‡å¯ä»¥åŒ…å«æ¨æ–‡çš„ ID å’Œæ—¶é—´æˆ³ã€‚</p></li><li><p>å½“ç”¨æˆ·å‘å¸ƒæ¨æ–‡æ—¶ï¼Œå°†æ¨æ–‡æ·»åŠ åˆ°ç›¸åº”ç”¨æˆ·çš„ä¼˜å…ˆé˜Ÿåˆ—ä¸­ã€‚ä¸ºäº†ä¿è¯æ¨æ–‡æŒ‰ç…§æ—¶é—´é¡ºåºæ’åºï¼Œå¯ä»¥ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºæ’åºçš„ä¾æ®ã€‚</p></li><li><p>è·å–æ–°é—»æ¨é€æ—¶ï¼Œéœ€è¦è·å–å½“å‰ç”¨æˆ·å…³æ³¨çš„äººçš„æ¨æ–‡ï¼Œå¹¶å°†è¿™äº›æ¨æ–‡è¿›è¡Œåˆå¹¶ã€‚ä¸ºäº†æ–¹ä¾¿åˆå¹¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¤§é¡¶å †ï¼Œæ¯æ¬¡ä»å †ä¸­å–å‡ºæœ€å¤§çš„æ—¶é—´æˆ³çš„æ¨æ–‡ï¼ŒåŒæ—¶å°†è¯¥æ¨æ–‡æ‰€å±ç”¨æˆ·çš„å…¶ä»–æ¨æ–‡åŠ å…¥å †ä¸­ã€‚</p></li><li><p>ç”¨æˆ·å…³æ³¨å’Œå–æ¶ˆå…³æ³¨å¯ä»¥é€šè¿‡ç»´æŠ¤å…³æ³¨å…³ç³»çš„å“ˆå¸Œè¡¨æ¥å®ç°ã€‚å“ˆå¸Œè¡¨çš„é”®æ˜¯å…³æ³¨è€…çš„ IDï¼Œå€¼æ˜¯ä¸€ä¸ªé›†åˆï¼ŒåŒ…å«è¯¥å…³æ³¨è€…å…³æ³¨çš„äººçš„ IDã€‚</p></li></ol><h2 id="ä»£ç " tabindex="-1"><a class="header-anchor" href="#ä»£ç " aria-hidden="true">#</a> ä»£ç </h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Twitter</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>tweets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç”¨æˆ·æ¨æ–‡çš„å“ˆå¸Œè¡¨</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>following <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…³æ³¨å…³ç³»çš„å“ˆå¸Œè¡¨</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>timestamp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// æ—¶é—´æˆ³ï¼Œç”¨äºæ¨æ–‡çš„æ’åº</span>
	<span class="token punctuation">}</span>

	<span class="token function">postTweet</span><span class="token punctuation">(</span><span class="token parameter">userId<span class="token punctuation">,</span> tweetId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>tweets<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>tweets<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>tweets<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> tweetId<span class="token punctuation">,</span> <span class="token literal-property property">timestamp</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>timestamp<span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">getNewsFeed</span><span class="token punctuation">(</span><span class="token parameter">userId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> heap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MaxHeap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// åŠ å…¥è‡ªå·±çš„æ¨æ–‡</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tweets<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>tweets<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tweet</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> heap<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>tweet<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// åŠ å…¥å…³æ³¨è€…çš„æ¨æ–‡</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>following<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>following<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">followeeId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tweets<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>followeeId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>tweets<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>followeeId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tweet</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> heap<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>tweet<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>heap<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> tweet <span class="token operator">=</span> heap<span class="token punctuation">.</span><span class="token function">extractMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tweet<span class="token punctuation">.</span>tweetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> result<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">follow</span><span class="token punctuation">(</span><span class="token parameter">followerId<span class="token punctuation">,</span> followeeId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>following<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>followerId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>following<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>followerId<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>following<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>followerId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>followeeId<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">unfollow</span><span class="token punctuation">(</span><span class="token parameter">followerId<span class="token punctuation">,</span> followeeId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>following<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>followerId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>following<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>followerId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>followeeId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MaxHeap</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>heap <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">insert</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">heapifyUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">extractMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">const</span> max <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> last <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> last<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">heapifyDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> max<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">heapifyUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> cur <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span>cur <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> parent <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>cur <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>cur<span class="token punctuation">]</span>
				<span class="token punctuation">]</span><span class="token punctuation">;</span>
				cur <span class="token operator">=</span> parent<span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token function">heapifyDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> cur <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> leftChild <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> cur <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">const</span> rightChild <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> cur <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token keyword">let</span> next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>
				leftChild <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>leftChild<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp
			<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				next <span class="token operator">=</span> leftChild<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>
				rightChild <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>rightChild<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp
			<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				next <span class="token operator">=</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>rightChild<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>leftChild<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp
						<span class="token operator">?</span> rightChild
						<span class="token operator">:</span> leftChild<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>
				next <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>next<span class="token punctuation">]</span><span class="token punctuation">.</span>timestamp
			<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>next<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>next<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heap<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				cur <span class="token operator">=</span> next<span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç›¸å…³é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#ç›¸å…³é¢˜ç›®" aria-hidden="true">#</a> ç›¸å…³é¢˜ç›®</h2>`,18),x=n("thead",null,[n("tr",null,[n("th",{style:{"text-align":"center"}},"é¢˜å·"),n("th",{style:{"text-align":"left"}},"æ ‡é¢˜"),n("th",{style:{"text-align":"center"}},"é¢˜è§£"),n("th",{style:{"text-align":"left"}},"æ ‡ç­¾"),n("th",{style:{"text-align":"center"}},"éš¾åº¦"),n("th",{style:{"text-align":"center"}},"åŠ›æ‰£")])],-1),T=n("td",{style:{"text-align":"center"}},"1500",-1),q=n("td",{style:{"text-align":"left"}},"è®¾è®¡æ–‡ä»¶åˆ†äº«ç³»ç»Ÿ ğŸ”’",-1),D=n("td",{style:{"text-align":"center"}},null,-1),C={style:{"text-align":"left"}},N=n("code",null,"è®¾è®¡",-1),E=n("code",null,"å“ˆå¸Œè¡¨",-1),F=n("code",null,"æ•°æ®æµ",-1),U=n("code",null,"2+",-1),M=n("td",{style:{"text-align":"center"}},"ğŸŸ ",-1),L={style:{"text-align":"center"}},V={href:"https://leetcode.cn/problems/design-a-file-sharing-system",target:"_blank",rel:"noopener noreferrer"},j={href:"https://leetcode.com/problems/design-a-file-sharing-system",target:"_blank",rel:"noopener noreferrer"};function B(R,A){const c=o("font"),e=o("RouterLink"),p=o("ExternalLinkIcon");return i(),u("div",null,[v,n("p",null,[s("ğŸŸ  "),a(c,{color:"#ffb800"},{default:t(()=>[s("Medium")]),_:1}),s("â€ƒ ğŸ”–â€‚ "),a(e,{to:"/tag/design.html"},{default:t(()=>[m]),_:1}),s(),a(e,{to:"/tag/hash-table.html"},{default:t(()=>[w]),_:1}),s(),a(e,{to:"/tag/linked-list.html"},{default:t(()=>[h]),_:1}),s(),a(e,{to:"/tag/heap-priority-queue.html"},{default:t(()=>[b]),_:1}),s("â€ƒ ğŸ”—â€‚"),n("a",f,[y,a(p)]),s(),n("a",g,[I,a(p)])]),_,k(" prettier-ignore "),n("table",null,[x,n("tbody",null,[n("tr",null,[T,q,D,n("td",C,[a(e,{to:"/tag/design.html"},{default:t(()=>[N]),_:1}),s(),a(e,{to:"/tag/hash-table.html"},{default:t(()=>[E]),_:1}),s(),a(e,{to:"/tag/data-stream.html"},{default:t(()=>[F]),_:1}),s(),U]),M,n("td",L,[n("a",V,[s("ğŸ€„ï¸"),a(p)]),s(),n("a",j,[s("ğŸ”—"),a(p)])])])])])])}const S=l(r,[["render",B],["__file","0355.html.vue"]]);export{S as default};
