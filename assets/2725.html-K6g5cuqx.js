import{_ as o,r as l,o as i,c as p,a as n,b as e,d as s,w as u,e as t}from"./app-aQeLbVW9.js";const d={},r=n("h1",{id:"_2725-é—´éš”å–æ¶ˆ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2725-é—´éš”å–æ¶ˆ","aria-hidden":"true"},"#"),e(" 2725. é—´éš”å–æ¶ˆ")],-1),m={href:"https://leetcode.cn/problems/interval-cancellation",target:"_blank",rel:"noopener noreferrer"},v=n("code",null,"åŠ›æ‰£",-1),k={href:"https://leetcode.com/problems/interval-cancellation",target:"_blank",rel:"noopener noreferrer"},f=n("code",null,"LeetCode",-1),b=t('<h2 id="é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®" aria-hidden="true">#</a> é¢˜ç›®</h2><p>Given a function <code>fn</code>, an array of arguments <code>args</code>, and an interval time <code>t</code>, return a cancel function <code>cancelFn</code>.</p><p>After a delay of <code>cancelTimeMs</code>, the returned cancel function <code>cancelFn</code> will be invoked.</p><blockquote><p>setTimeout(cancelFn, cancelTimeMs)</p></blockquote><p>The function <code>fn</code> should be called with <code>args</code> immediately and then called again every <code>t</code> milliseconds until <code>cancelFn</code> is called at <code>cancelTimeMs</code> ms.</p><p><strong>Example 1:</strong></p>',6),h=n("blockquote",null,[n("p",null,"Input: fn = (x) => x * 2, args = [4], t = 35"),n("p",null,"Output:"),n("p",null,"["),n("p",null,'{"time": 0, "returned": 8},'),n("p",null,'{"time": 35, "returned": 8},'),n("p",null,'{"time": 70, "returned": 8},'),n("p",null,'{"time": 105, "returned": 8},'),n("p",null,'{"time": 140, "returned": 8},'),n("p",{"time:175,returned:8":""}),n("p",null,"]"),n("p",null,"Explanation:"),n("p",null,"const cancelTimeMs = 190;"),n("p",null,"const cancelFn = cancellable((x) => x * 2, [4], 35);"),n("p",null,"setTimeout(cancelFn, cancelTimeMs);"),n("p",null,"Every 35ms, fn(4) is called. Until t=190ms, then it is cancelled."),n("p",null,"1st fn call is at 0ms. fn(4) returns 8."),n("p",null,"2nd fn call is at 35ms. fn(4) returns 8."),n("p",null,"3rd fn call is at 70ms. fn(4) returns 8."),n("p",null,"4th fn call is at 105ms. fn(4) returns 8."),n("p",null,"5th fn call is at 140ms. fn(4) returns 8."),n("p",null,"6th fn call is at 175ms. fn(4) returns 8."),n("p",null,"Cancelled at 190ms")],-1),g=n("p",null,[n("strong",null,"Example 2:")],-1),x=n("blockquote",null,[n("p",null,"Input: fn = (x1, x2) => (x1 * x2), args = [2, 5], t = 30"),n("p",null,"Output:"),n("p",null,"["),n("p",null,'{"time": 0, "returned": 10},'),n("p",null,'{"time": 30, "returned": 10},'),n("p",null,'{"time": 60, "returned": 10},'),n("p",null,'{"time": 90, "returned": 10},'),n("p",null,'{"time": 120, "returned": 10},'),n("p",{"time:150,returned:10":""}),n("p",null,"]"),n("p",null,"Explanation:"),n("p",null,"const cancelTimeMs = 165;"),n("p",null,"const cancelFn = cancellable((x1, x2) => (x1 * x2), [2, 5], 30)"),n("p",null,"setTimeout(cancelFn, cancelTimeMs)"),n("p",null,"Every 30ms, fn(2, 5) is called. Until t=165ms, then it is cancelled."),n("p",null,"1st fn call is at 0ms"),n("p",null,"2nd fn call is at 30ms"),n("p",null,"3rd fn call is at 60ms"),n("p",null,"4th fn call is at 90ms"),n("p",null,"5th fn call is at 120ms"),n("p",null,"6th fn call is at 150ms"),n("p",null,"Cancelled at 165ms")],-1),_=n("p",null,[n("strong",null,"Example 3:")],-1),q=n("blockquote",null,[n("p",null,"Input: fn = (x1, x2, x3) => (x1 + x2 + x3), args = [5, 1, 3], t = 50"),n("p",null,"Output:"),n("p",null,"["),n("p",null,'{"time": 0, "returned": 9},'),n("p",null,'{"time": 50, "returned": 9},'),n("p",null,'{"time": 100, "returned": 9},'),n("p",{"time:150,returned:9":""}),n("p",null,"]"),n("p",null,"Explanation:"),n("p",null,"const cancelTimeMs = 180;"),n("p",null,"const cancelFn = cancellable((x1, x2, x3) => (x1 + x2 + x3), [5, 1, 3], 50)"),n("p",null,"setTimeout(cancelFn, cancelTimeMs)"),n("p",null,"Every 50ms, fn(5, 1, 3) is called. Until t=180ms, then it is cancelled."),n("p",null,"1st fn call is at 0ms"),n("p",null,"2nd fn call is at 50ms"),n("p",null,"3rd fn call is at 100ms"),n("p",null,"4th fn call is at 150ms"),n("p",null,"Cancelled at 180ms")],-1),T=t(`<p><strong>Constraints:</strong></p><ul><li><code>fn</code> is a function</li><li><code>args</code> is a valid JSON array</li><li><code>1 &lt;= args.length &lt;= 10</code></li><li><code>30 &lt;= t &lt;= 100</code></li><li><code>10 &lt;= cancelTimeMs &lt;= 500</code></li></ul><h2 id="é¢˜ç›®å¤§æ„" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®å¤§æ„" aria-hidden="true">#</a> é¢˜ç›®å¤§æ„</h2><p>ç°ç»™å®šä¸€ä¸ªå‡½æ•° <code>fn</code>ï¼Œä¸€ä¸ªå‚æ•°æ•°ç»„ <code>args</code> å’Œä¸€ä¸ªæ—¶é—´é—´éš” <code>t</code>ï¼Œè¿”å›ä¸€ä¸ªå–æ¶ˆå‡½æ•° <code>cancelFn</code>ã€‚</p><p>åœ¨ç»è¿‡ <code>cancelTimeMs</code> æ¯«ç§’çš„å»¶è¿Ÿåï¼Œå°†è°ƒç”¨è¿”å›çš„å–æ¶ˆå‡½æ•° <code>cancelFn</code>ã€‚</p><blockquote><p>setTimeout(cancelFn, cancelTimeMs)</p></blockquote><p>å‡½æ•° <code>fn</code> åº”ç«‹å³ä½¿ç”¨å‚æ•° <code>args</code> è°ƒç”¨ï¼Œç„¶åæ¯éš” <code>t</code> æ¯«ç§’è°ƒç”¨ä¸€æ¬¡ï¼Œç›´åˆ°åœ¨ <code>cancelTimeMs</code> æ¯«ç§’æ—¶è°ƒç”¨ <code>cancelFn</code>ã€‚</p><p><strong>æç¤ºï¼š</strong></p><ul><li><code>fn</code> æ˜¯ä¸€ä¸ªå‡½æ•°</li><li><code>args</code> æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ JSON æ•°ç»„</li><li><code>1 &lt;= args.length &lt;= 10</code></li><li><code>30 &lt;= t &lt;= 100</code></li><li><code>10 &lt;= cancelT &lt;= 500</code></li></ul><h2 id="è§£é¢˜æ€è·¯" tabindex="-1"><a class="header-anchor" href="#è§£é¢˜æ€è·¯" aria-hidden="true">#</a> è§£é¢˜æ€è·¯</h2><ol><li>é¢˜ç›®è¦æ±‚å‡½æ•° <code>fn</code> åº”ç«‹å³ä½¿ç”¨å‚æ•° <code>args</code> è°ƒç”¨ï¼Œç„¶åæ¯éš” <code>t</code> æ¯«ç§’è°ƒç”¨ä¸€æ¬¡ï¼Œæ‰€ä»¥ç«‹å³æ‰‹åŠ¨æ‰§è¡Œ <code>fn</code> ä¸€æ¬¡ã€‚</li><li>ä½¿ç”¨ <code>setInterval</code> æ¥å¯åŠ¨å®šæ—¶å™¨ï¼Œæ¯éš” <code>delay</code> æ¯«ç§’ä¼šæ‰§è¡Œä¸€æ¬¡ä¼ å…¥çš„å‡½æ•° <code>fn</code>ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œå‘ç”Ÿåœ¨ <code>delay</code> æ¯«ç§’ä¹‹åã€‚</li><li><code>setInterval</code> è¿”å›ä¸€ä¸ª <code>intervalId</code>ï¼Œè¿™æ˜¯å”¯ä¸€æ ‡è¯†è¿™ä¸ªå®šæ—¶å™¨çš„å€¼ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ <code>clearInterval(intervalId)</code> æ¥å–æ¶ˆå®šæ—¶å™¨ã€‚</li><li>è¿”å›å–æ¶ˆå‡½æ•°ï¼Œè¿™ä¸ªå–æ¶ˆå‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶ï¼Œä¼šåœæ­¢å®šæ—¶å™¨çš„ç»§ç»­æ‰§è¡Œã€‚</li></ol><h4 id="å¤æ‚åº¦åˆ†æ" tabindex="-1"><a class="header-anchor" href="#å¤æ‚åº¦åˆ†æ" aria-hidden="true">#</a> å¤æ‚åº¦åˆ†æ</h4><ul><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š<code>O(1)</code>ï¼Œå› ä¸º <code>setInterval</code> å’Œ <code>clearInterval</code> éƒ½æ˜¯å¸¸æ•°æ—¶é—´æ“ä½œã€‚</li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š<code>O(1)</code>ï¼Œåªå­˜å‚¨äº† <code>intervalId</code> ä½œä¸ºå”¯ä¸€çš„å®šæ—¶å™¨æ ‡è¯†ã€‚</li></ul><h2 id="ä»£ç " tabindex="-1"><a class="header-anchor" href="#ä»£ç " aria-hidden="true">#</a> ä»£ç </h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Function<span class="token punctuation">}</span></span> <span class="token parameter">fn</span>
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Array<span class="token punctuation">}</span></span> <span class="token parameter">args</span>
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token parameter">t</span>
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span>Function<span class="token punctuation">}</span></span>
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">cancellable</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> args<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ç«‹å³è°ƒç”¨ä¸€æ¬¡ fn</span>
	<span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// ä½¿ç”¨ setInterval å¯åŠ¨å®šæ—¶å™¨ï¼Œæ¯éš” t æ¯«ç§’æ‰§è¡Œä¸€æ¬¡ fn</span>
	<span class="token keyword">const</span> intervalId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// è¿”å›ä¸€ä¸ªå–æ¶ˆå‡½æ•°ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨è¯¥å‡½æ•°æ¥æ¸…é™¤å®šæ—¶å™¨</span>
	<span class="token keyword">const</span> <span class="token function-variable function">cancelFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>intervalId<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> cancelFn<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 *  const result = [];
 *
 *  const fn = (x) =&gt; x * 2;
 *  const args = [4], t = 35, cancelTimeMs = 190;
 *
 *  const start = performance.now();
 *
 *  const log = (...argsArr) =&gt; <span class="token punctuation">{</span>
 *      const diff = Math.floor(performance.now() - start);
 *      result.push(<span class="token punctuation">{</span>&quot;time&quot;: diff, &quot;returned&quot;: fn(...argsArr)<span class="token punctuation">}</span>);
 *  <span class="token punctuation">}</span>
 *
 *  const cancel = cancellable(log, args, t);
 *
 *  setTimeout(cancel, cancelTimeMs);
 *
 *  setTimeout(() =&gt; <span class="token punctuation">{</span>
 *      console.log(result);
 *      // [
 *      //     <span class="token punctuation">{</span>&quot;time&quot;:0,&quot;returned&quot;:8<span class="token punctuation">}</span>,
 *      //     <span class="token punctuation">{</span>&quot;time&quot;:35,&quot;returned&quot;:8<span class="token punctuation">}</span>,
 *      //     <span class="token punctuation">{</span>&quot;time&quot;:70,&quot;returned&quot;:8<span class="token punctuation">}</span>,
 *      //     <span class="token punctuation">{</span>&quot;time&quot;:105,&quot;returned&quot;:8<span class="token punctuation">}</span>,
 *      //     <span class="token punctuation">{</span>&quot;time&quot;:140,&quot;returned&quot;:8<span class="token punctuation">}</span>,
 *      //     <span class="token punctuation">{</span>&quot;time&quot;:175,&quot;returned&quot;:8<span class="token punctuation">}</span>
 *      // ]
 *  <span class="token punctuation">}</span>, cancelTimeMs + t + 15)
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,15);function y(F,I){const c=l("font"),a=l("ExternalLinkIcon");return i(),p("div",null,[r,n("p",null,[e("ğŸŸ¢ "),s(c,{color:"#15bd66"},{default:u(()=>[e("Easy")]),_:1}),e("â€ƒ ğŸ”—â€‚"),n("a",m,[v,s(a)]),e(),n("a",k,[f,s(a)])]),b,h,g,x,_,q,T])}const w=o(d,[["render",y],["__file","2725.html.vue"]]);export{w as default};
