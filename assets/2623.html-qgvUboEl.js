import{_ as i,r as l,o as p,c as r,a as e,b as t,d as n,w as a,f as d,e as u}from"./app-B5EG-zH0.js";const m={},h=e("h1",{id:"_2623-è®°å¿†å‡½æ•°",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_2623-è®°å¿†å‡½æ•°","aria-hidden":"true"},"#"),t(" 2623. è®°å¿†å‡½æ•°")],-1),f={href:"https://leetcode.cn/problems/memoize",target:"_blank",rel:"noopener noreferrer"},k=e("code",null,"åŠ›æ‰£",-1),b={href:"https://leetcode.com/problems/memoize",target:"_blank",rel:"noopener noreferrer"},_=e("code",null,"LeetCode",-1),g=u(`<h2 id="é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®" aria-hidden="true">#</a> é¢˜ç›®</h2><p>Given a function <code>fn</code>, return a <strong>memoized</strong> version of that function.</p><p>A **memoized **function is a function that will never be called twice with the same inputs. Instead it will return a cached value.</p><p>You can assume there are <strong>3</strong> possible input functions: <code>sum</code>, <code>fib</code>, and <code>factorial</code>.</p><ul><li><code>sum</code> accepts two integers <code>a</code> and <code>b</code> and returns <code>a + b</code>. Assume that if a value has already been cached for the arguments <code>(b, a)</code> where <code>a != b</code>, it cannot be used for the arguments <code>(a, b)</code>. For example, if the arguments are <code>(3, 2)</code> and <code>(2, 3)</code>, two separate calls should be made.</li><li><code>fib</code> accepts a single integer <code>n</code> and returns <code>1</code> if <code>n &lt;= 1</code> or <code>fib(n - 1) + fib(n - 2)</code> otherwise.</li><li><code>factorial</code> accepts a single integer <code>n</code> and returns <code>1</code> if <code>n &lt;= 1</code> or <code>factorial(n - 1) * n</code> otherwise.</li></ul><p><strong>Example 1:</strong></p><blockquote><p>Input:</p><p>fnName = &quot;sum&quot;</p><p>actions = [&quot;call&quot;,&quot;call&quot;,&quot;getCallCount&quot;,&quot;call&quot;,&quot;getCallCount&quot;]</p><p>values = [[2,2],[2,2],[],[1,2],[]]</p><p>Output: [4,4,1,3,2]</p><p>Explanation:</p><p>const sum = (a, b) =&gt; a + b;</p><p>const memoizedSum = memoize(sum);</p><p>memoizedSum(2, 2); // &quot;call&quot; - returns 4. sum() was called as (2, 2) was not seen before.</p><p>memoizedSum(2, 2); // &quot;call&quot; - returns 4. However sum() was not called because the same inputs were seen before.</p><p>// &quot;getCallCount&quot; - total call count: 1</p><p>memoizedSum(1, 2); // &quot;call&quot; - returns 3. sum() was called as (1, 2) was not seen before.</p><p>// &quot;getCallCount&quot; - total call count: 2</p></blockquote><p><strong>Example 2:</strong></p><blockquote><p>Input: fnName = &quot;factorial&quot;</p><p>actions = [&quot;call&quot;,&quot;call&quot;,&quot;call&quot;,&quot;getCallCount&quot;,&quot;call&quot;,&quot;getCallCount&quot;]</p><p>values = [[2],[3],[2],[],[3],[]]</p><p>Output: [2,6,2,2,6,2]</p><p>Explanation:</p><p>const factorial = (n) =&gt; (n &lt;= 1) ? 1 : (n * factorial(n - 1));</p><p>const memoFactorial = memoize(factorial);</p><p>memoFactorial(2); // &quot;call&quot; - returns 2.</p><p>memoFactorial(3); // &quot;call&quot; - returns 6.</p><p>memoFactorial(2); // &quot;call&quot; - returns 2. However factorial was not called because 2 was seen before.</p><p>// &quot;getCallCount&quot; - total call count: 2</p><p>memoFactorial(3); // &quot;call&quot; - returns 6. However factorial was not called because 3 was seen before.</p><p>// &quot;getCallCount&quot; - total call count: 2</p></blockquote><p><strong>Example 3:</strong></p><blockquote><p>Input: fnName = &quot;fib&quot;</p><p>actions = [&quot;call&quot;,&quot;getCallCount&quot;]</p><p>values = [[5],[]]</p><p>Output: [8,1]</p><p>Explanation: fib(5) = 8 // &quot;call&quot;</p><p>// &quot;getCallCount&quot; - total call count: 1</p></blockquote><p><strong>Constraints:</strong></p><ul><li><code>0 &lt;= a, b &lt;= 10^5</code></li><li><code>1 &lt;= n &lt;= 10</code></li><li><code>0 &lt;= actions.length &lt;= 10^5</code></li><li><code>actions.length === values.length</code></li><li><code>actions[i]</code> is one of &quot;call&quot; and &quot;getCallCount&quot;</li><li><code>fnName</code> is one of &quot;sum&quot;, &quot;factorial&quot; and &quot;fib&quot;</li></ul><h2 id="é¢˜ç›®å¤§æ„" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®å¤§æ„" aria-hidden="true">#</a> é¢˜ç›®å¤§æ„</h2><p>è¯·ä½ ç¼–å†™ä¸€ä¸ªå‡½æ•° <code>fn</code>ï¼Œå®ƒæ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›è¯¥å‡½æ•°çš„ <strong>è®°å¿†åŒ–</strong> åçš„ç»“æœã€‚</p><p><strong>è®°å¿†å‡½æ•°</strong> æ˜¯ä¸€ä¸ªå¯¹äºç›¸åŒçš„è¾“å…¥æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡çš„å‡½æ•°ã€‚ç›¸åï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªç¼“å­˜å€¼ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æœ‰ <strong>3</strong> ä¸ªå¯èƒ½çš„è¾“å…¥å‡½æ•°ï¼š<code>sum</code> ã€<code>fib</code> å’Œ <code>factorial</code> ã€‚</p><ul><li><code>sum</code> æ¥æ”¶ä¸¤ä¸ªæ•´å‹å‚æ•° <code>a</code> å’Œ <code>b</code> ï¼Œå¹¶è¿”å› <code>a + b</code> ã€‚å‡è®¾å¦‚æœå‚æ•° <code>(b, a)</code> å·²ç»ç¼“å­˜äº†å€¼ï¼Œå…¶ä¸­ <code>a != b</code>ï¼Œå®ƒä¸èƒ½ç”¨äºå‚æ•° <code>(a, b)</code>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå‚æ•°æ˜¯ <code>(3, 2)</code> å’Œ <code>(2, 3)</code>ï¼Œåˆ™åº”è¿›è¡Œä¸¤ä¸ªå•ç‹¬çš„è°ƒç”¨ã€‚</li><li><code>fib</code> æ¥æ”¶ä¸€ä¸ªæ•´å‹å‚æ•° <code>n</code> ï¼Œå¦‚æœ <code>n &lt;= 1</code> åˆ™è¿”å› <code>1</code>ï¼Œå¦åˆ™è¿”å› <code>fib (n - 1) + fib (n - 2)</code>ã€‚</li><li><code>factorial</code> æ¥æ”¶ä¸€ä¸ªæ•´å‹å‚æ•° <code>n</code> ï¼Œå¦‚æœ <code>n &lt;= 1</code> åˆ™è¿”å› <code>1</code> ï¼Œå¦åˆ™è¿”å› <code>factorial(n - 1) * n</code> ã€‚</li></ul><p><strong>æç¤ºï¼š</strong></p><ul><li><code>0 &lt;= a, b &lt;= 10^5</code></li><li><code>1 &lt;= n &lt;= 10</code></li><li><code>actions.length === values.length</code></li><li><code>actions[i]</code> ä¸º &quot;call&quot; å’Œ &quot;getCallCount&quot; ä¸­çš„ä¸€ä¸ª</li><li><code>fnName </code>ä¸º &quot;sum&quot;, &quot;factorial&quot; å’Œ &quot;fib&quot; ä¸­çš„ä¸€ä¸ª</li></ul><h2 id="è§£é¢˜æ€è·¯" tabindex="-1"><a class="header-anchor" href="#è§£é¢˜æ€è·¯" aria-hidden="true">#</a> è§£é¢˜æ€è·¯</h2><p>è®°å¿†åŒ– (Memoization) æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œç”¨äºåŠ é€Ÿå‡½æ•°çš„æ‰§è¡Œï¼Œç‰¹åˆ«æ˜¯å¯¹äºæœ‰ç›¸åŒè¾“å…¥æ—¶å¯ä»¥é‡ç”¨ç»“æœçš„å‡½æ•°ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨ä¸€ä¸ªç¼“å­˜ç»“æ„æ¥å­˜å‚¨ä¹‹å‰çš„è®¡ç®—ç»“æœï¼Œä»¥é¿å…å¯¹ç›¸åŒçš„è¾“å…¥è¿›è¡Œå¤šæ¬¡è®¡ç®—ã€‚</p><ol><li>åˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ <code>cache</code> æ¥å­˜å‚¨å·²ç»è®¡ç®—è¿‡çš„ç»“æœï¼Œé”®æ˜¯è¾“å…¥å‚æ•°ï¼Œå€¼æ˜¯å¯¹åº”çš„è¾“å‡ºç»“æœã€‚</li><li>å°†è¾“å…¥å‚æ•°é€šè¿‡ JSON åºåˆ—åŒ–è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç”¨ä½œç¼“å­˜çš„é”® <code>key = JSON.stringify(args)</code>ã€‚</li><li>æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ£€æŸ¥è¯¥è¾“å…¥å‚æ•°æ˜¯å¦å·²ç»å­˜åœ¨äºç¼“å­˜ä¸­ï¼š <ul><li>å¦‚æœå­˜åœ¨ï¼Œç›´æ¥è¿”å›ç¼“å­˜ä¸­çš„ç»“æœã€‚</li><li>å¦‚æœä¸å­˜åœ¨ï¼Œè®¡ç®—è¯¥è¾“å…¥çš„ç»“æœï¼Œå¹¶å°†å…¶å­˜å…¥ç¼“å­˜ä»¥ä¾›ä¸‹æ¬¡ä½¿ç”¨ã€‚</li></ul></li></ol><h4 id="å¤æ‚åº¦åˆ†æ" tabindex="-1"><a class="header-anchor" href="#å¤æ‚åº¦åˆ†æ" aria-hidden="true">#</a> å¤æ‚åº¦åˆ†æ</h4><ul><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š<code>O(1)</code>ï¼Œæ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šåœ¨ç¼“å­˜ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼ˆ<code>Map</code> çš„æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸º <code>O(1)</code>ï¼‰ã€‚å¦‚æœç¼“å­˜å‘½ä¸­ï¼Œç›´æ¥è¿”å›ï¼›å¦‚æœæ²¡æœ‰å‘½ä¸­ï¼Œè¿›è¡Œä¸€æ¬¡è®¡ç®—å¹¶å­˜å‚¨ç»“æœã€‚</li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š<code>O(n)</code>ï¼Œå–å†³äºä¸åŒè¾“å…¥çš„æ•°é‡ã€‚ç¼“å­˜ä¼šæ ¹æ®å‡½æ•°çš„è¾“å…¥å‚æ•°å­˜å‚¨ç»“æœï¼Œå› æ­¤ç©ºé—´æ¶ˆè€—éšè°ƒç”¨çš„ä¸åŒè¾“å…¥å¢å¤šã€‚</li></ul><h2 id="ä»£ç " tabindex="-1"><a class="header-anchor" href="#ä»£ç " aria-hidden="true">#</a> ä»£ç </h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Function<span class="token punctuation">}</span></span> <span class="token parameter">fn</span>
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span>Function<span class="token punctuation">}</span></span>
 */</span>
<span class="token keyword">function</span> <span class="token function">memoize</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ›å»ºç¼“å­˜</span>

	<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†å‚æ•°åºåˆ—åŒ–ä½œä¸ºé”®</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¦‚æœç¼“å­˜å­˜åœ¨ç»“æœï¼Œç›´æ¥è¿”å›</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¡ç®—ç»“æœ</span>
		cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å­˜å…¥ç¼“å­˜</span>
		<span class="token keyword">return</span> result<span class="token punctuation">;</span> <span class="token comment">// è¿”å›è®¡ç®—ç»“æœ</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * let callCount = 0;
 * const memoizedFn = memoize(function (a, b) <span class="token punctuation">{</span>
 *	 callCount += 1;
 *   return a + b;
 * <span class="token punctuation">}</span>)
 * memoizedFn(2, 3) // 5
 * memoizedFn(2, 3) // 5
 * console.log(callCount) // 1
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç›¸å…³é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#ç›¸å…³é¢˜ç›®" aria-hidden="true">#</a> ç›¸å…³é¢˜ç›®</h2>`,28),q=e("thead",null,[e("tr",null,[e("th",{style:{"text-align":"center"}},"é¢˜å·"),e("th",{style:{"text-align":"left"}},"æ ‡é¢˜"),e("th",{style:{"text-align":"center"}},"é¢˜è§£"),e("th",{style:{"text-align":"left"}},"æ ‡ç­¾"),e("th",{style:{"text-align":"center"}},"éš¾åº¦"),e("th",{style:{"text-align":"center"}},"åŠ›æ‰£")])],-1),v=e("td",{style:{"text-align":"center"}},"2620",-1),y=e("td",{style:{"text-align":"left"}},"è®¡æ•°å™¨",-1),x={style:{"text-align":"center"}},w=e("td",{style:{"text-align":"left"}},null,-1),C=e("td",{style:{"text-align":"center"}},"ğŸŸ¢",-1),z={style:{"text-align":"center"}},N={href:"https://leetcode.cn/problems/counter",target:"_blank",rel:"noopener noreferrer"},F={href:"https://leetcode.com/problems/counter",target:"_blank",rel:"noopener noreferrer"},E=e("td",{style:{"text-align":"center"}},"2629",-1),O=e("td",{style:{"text-align":"left"}},"å¤åˆå‡½æ•°",-1),I={style:{"text-align":"center"}},S=e("td",{style:{"text-align":"left"}},null,-1),L=e("td",{style:{"text-align":"center"}},"ğŸŸ¢",-1),V={style:{"text-align":"center"}},M={href:"https://leetcode.cn/problems/function-composition",target:"_blank",rel:"noopener noreferrer"},j={href:"https://leetcode.com/problems/function-composition",target:"_blank",rel:"noopener noreferrer"},B=e("td",{style:{"text-align":"center"}},"2630",-1),H=e("td",{style:{"text-align":"left"}},"è®°å¿†å‡½æ•° II",-1),J={style:{"text-align":"center"}},A=e("td",{style:{"text-align":"left"}},null,-1),R=e("td",{style:{"text-align":"center"}},"ğŸ”´",-1),G={style:{"text-align":"center"}},T={href:"https://leetcode.cn/problems/memoize-ii",target:"_blank",rel:"noopener noreferrer"},Y={href:"https://leetcode.com/problems/memoize-ii",target:"_blank",rel:"noopener noreferrer"},D=e("td",{style:{"text-align":"center"}},"2632",-1),K=e("td",{style:{"text-align":"left"}},"æŸ¯é‡ŒåŒ– ğŸ”’",-1),P={style:{"text-align":"center"}},Q=e("td",{style:{"text-align":"left"}},null,-1),U=e("td",{style:{"text-align":"center"}},"ğŸŸ ",-1),W={style:{"text-align":"center"}},X={href:"https://leetcode.cn/problems/curry",target:"_blank",rel:"noopener noreferrer"},Z={href:"https://leetcode.com/problems/curry",target:"_blank",rel:"noopener noreferrer"};function $(ee,te){const c=l("font"),o=l("ExternalLinkIcon"),s=l("RouterLink");return p(),r("div",null,[h,e("p",null,[t("ğŸŸ  "),n(c,{color:"#ffb800"},{default:a(()=>[t("Medium")]),_:1}),t("â€ƒ ğŸ”—â€‚"),e("a",f,[k,n(o)]),t(),e("a",b,[_,n(o)])]),g,d(" prettier-ignore "),e("table",null,[q,e("tbody",null,[e("tr",null,[v,y,e("td",x,[n(s,{to:"/problem/2620.html"},{default:a(()=>[t("[âœ“]")]),_:1})]),w,C,e("td",z,[e("a",N,[t("ğŸ€„ï¸"),n(o)]),t(),e("a",F,[t("ğŸ”—"),n(o)])])]),e("tr",null,[E,O,e("td",I,[n(s,{to:"/problem/2629.html"},{default:a(()=>[t("[âœ“]")]),_:1})]),S,L,e("td",V,[e("a",M,[t("ğŸ€„ï¸"),n(o)]),t(),e("a",j,[t("ğŸ”—"),n(o)])])]),e("tr",null,[B,H,e("td",J,[n(s,{to:"/problem/2630.html"},{default:a(()=>[t("[âœ“]")]),_:1})]),A,R,e("td",G,[e("a",T,[t("ğŸ€„ï¸"),n(o)]),t(),e("a",Y,[t("ğŸ”—"),n(o)])])]),e("tr",null,[D,K,e("td",P,[n(s,{to:"/problem/2632.html"},{default:a(()=>[t("[âœ“]")]),_:1})]),Q,U,e("td",W,[e("a",X,[t("ğŸ€„ï¸"),n(o)]),t(),e("a",Z,[t("ğŸ”—"),n(o)])])])])])])}const oe=i(m,[["render",$],["__file","2623.html.vue"]]);export{oe as default};
