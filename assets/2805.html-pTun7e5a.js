import{_ as p,r as e,o as c,c as l,a as n,b as s,d as a,w as i,e as u}from"./app-B5EG-zH0.js";const d={},r=n("h1",{id:"_2805-è‡ªå®šä¹‰é—´éš”-ğŸ”’",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2805-è‡ªå®šä¹‰é—´éš”-ğŸ”’","aria-hidden":"true"},"#"),s(" 2805. è‡ªå®šä¹‰é—´éš” ğŸ”’")],-1),k={href:"https://leetcode.cn/problems/custom-interval",target:"_blank",rel:"noopener noreferrer"},m=n("code",null,"åŠ›æ‰£",-1),v={href:"https://leetcode.com/problems/custom-interval",target:"_blank",rel:"noopener noreferrer"},b=n("code",null,"LeetCode",-1),f=u(`<h2 id="é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®" aria-hidden="true">#</a> é¢˜ç›®</h2><p><strong>Function</strong> <code>customInterval</code></p><p>Given a function <code>fn</code>, a number <code>delay</code> and a number <code>period</code>, return a number <code>id</code>.</p><p><code>customInterval</code> is a function that should execute the provided function <code>fn</code> at intervals based on a linear pattern defined by the formula <code>delay + period * count</code>.</p><p>The <code>count</code> in the formula represents the number of times the interval has been executed starting from an initial value of <code>0</code>.</p><p><strong>Function</strong> <code>customClearInterval</code></p><p>Given the <code>id</code>. <code>id</code> is the returned value from the function <code>customInterval</code>.</p><p><code>customClearInterval</code> should stop executing provided function <code>fn</code> at intervals.</p><p><strong>Note:</strong> The <code>setTimeout</code> and <code>setInterval</code> functions in Node.js return an object, not a number.</p><p><strong>Example 1:</strong></p><blockquote><p>Input: delay = 50, period = 20, cancelTime = 225</p><p>Output: [50,120,210]</p><p>Explanation:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> t <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">customInterval</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> period<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">customClearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">225</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>50 + 20 * 0 = 50 // 50ms - 1st function call</p><p>50 + 20 * 1 = 70 // 50ms + 70ms = 120ms - 2nd function call</p><p>50 + 20 * 2 = 90 // 50ms + 70ms + 90ms = 210ms - 3rd function call</p></blockquote><p><strong>Example 2:</strong></p><blockquote><p>Input: delay = 20, period = 20, cancelTime = 150</p><p>Output: [20,60,120]</p><p>Explanation:</p><p>20 + 20 * 0 = 20 // 20ms - 1st function call</p><p>20 + 20 * 1 = 40 // 20ms + 40ms = 60ms - 2nd function call</p><p>20 + 20 * 2 = 60 // 20ms + 40ms + 60ms = 120ms - 3rd function call</p></blockquote><p><strong>Example 3:</strong></p><blockquote><p>Input: delay = 100, period = 200, cancelTime = 500</p><p>Output: [100,400]</p><p>Explanation:</p><p>100 + 200 * 0 = 100 // 100ms - 1st function call</p><p>100 + 200 * 1 = 300 // 100ms + 300ms = 400ms - 2nd function call</p></blockquote><p><strong>Constraints:</strong></p><ul><li><code>20 &lt;= delay, period &lt;= 250</code></li><li><code>20 &lt;= cancelTime &lt;= 1000</code></li></ul><h2 id="é¢˜ç›®å¤§æ„" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®å¤§æ„" aria-hidden="true">#</a> é¢˜ç›®å¤§æ„</h2><p><strong>å‡½æ•°</strong> <code>customInterval</code></p><p>ç»™å®šä¸€ä¸ªå‡½æ•° <code>fn</code>ã€ä¸€ä¸ªæ•°å­— <code>delay</code> å’Œä¸€ä¸ªæ•°å­— <code>period</code>ï¼Œè¿”å›ä¸€ä¸ªæ•°å­— <code>id</code>ã€‚<code>customInterval</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒåº”è¯¥æ ¹æ®å…¬å¼ <code>delay + period * count</code> åœ¨é—´éš”ä¸­æ‰§è¡Œæä¾›çš„å‡½æ•° <code>fn</code>ï¼Œå…¬å¼ä¸­çš„ <code>count</code> è¡¨ç¤ºä»åˆå§‹å€¼ <code>0</code> å¼€å§‹æ‰§è¡Œé—´éš”çš„æ¬¡æ•°ã€‚</p><p><strong>å‡½æ•°</strong> <code>customClearInterval</code></p><p>ç»™å®š <code>id</code>ã€‚<code>id</code> æ˜¯ä»å‡½æ•° <code>customInterval</code> è¿”å›çš„å€¼ã€‚<code>customClearInterval</code> åº”è¯¥åœæ­¢åœ¨é—´éš”ä¸­æ‰§è¡Œæä¾›çš„å‡½æ•° <code>fn</code>ã€‚</p><p><strong>æ³¨æ„ï¼š</strong> åœ¨ Node.js ä¸­ï¼Œ<code>setTimeout</code> å’Œ <code>setInterval</code> å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ•°å­—ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><blockquote><p><strong>è¾“å…¥ï¼š</strong> delay = 50, period = 20, stopTime = 225</p><p><strong>è¾“å‡ºï¼š</strong>[50,120,210]</p><p><strong>è§£é‡Šï¼š</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> t <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">customInterval</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> period<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">customClearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">225</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>50 + 20 * 0 = 50 // 50ms - ç¬¬ä¸€ä¸ªå‡½æ•°è°ƒç”¨</p><p>50 + 20 * 1 = 70 // 50ms + 70ms = 120ms - ç¬¬äºŒä¸ªå‡½æ•°è°ƒç”¨</p><p>50 + 20 * 2 = 90 // 50ms + 70ms + 90ms = 210ms - ç¬¬ä¸‰ä¸ªå‡½æ•°è°ƒç”¨</p></blockquote><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><blockquote><p><strong>è¾“å…¥ï¼š</strong> delay = 20, period = 20, stopTime = 150</p><p><strong>è¾“å‡ºï¼š</strong>[20,60,120]</p><p><strong>è§£é‡Šï¼š</strong></p><p>20 + 20 * 0 = 20 // 20ms - ç¬¬ä¸€ä¸ªå‡½æ•°è°ƒç”¨</p><p>20 + 20 * 1 = 40 // 20ms + 40ms = 60ms - ç¬¬äºŒä¸ªå‡½æ•°è°ƒç”¨</p><p>20 + 20 * 2 = 60 // 20ms + 40ms + 60ms = 120ms - ç¬¬ä¸‰ä¸ªå‡½æ•°è°ƒç”¨</p></blockquote><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><blockquote><p><strong>è¾“å…¥ï¼š</strong> delay = 100, period = 200, stopTime = 500</p><p><strong>è¾“å‡ºï¼š</strong>[100,400]</p><p><strong>è§£é‡Šï¼š</strong></p><p>100 + 200 * 0 = 100 // 100ms - ç¬¬ä¸€ä¸ªå‡½æ•°è°ƒç”¨</p><p>100 + 200 * 1 = 300 // 100ms + 300ms = 400ms - ç¬¬äºŒä¸ªå‡½æ•°è°ƒç”¨</p></blockquote><p><strong>æç¤ºï¼š</strong></p><ul><li><code>20 &lt;= delay, period &lt;= 250</code></li><li><code>20 &lt;= stopTime &lt;= 1000</code></li></ul><h2 id="è§£é¢˜æ€è·¯" tabindex="-1"><a class="header-anchor" href="#è§£é¢˜æ€è·¯" aria-hidden="true">#</a> è§£é¢˜æ€è·¯</h2><ol><li><p><strong>è‡ªå®šä¹‰å®šæ—¶å‡½æ•° <code>customInterval</code></strong>:</p><ul><li><code>customInterval</code> æ¥å— <code>fn</code>ã€<code>delay</code> å’Œ <code>period</code>ã€‚</li><li>åˆå§‹åŒ–ä¸€ä¸ª <code>count</code> å˜é‡ä¸º 0ï¼Œç”¨æ¥è®°å½•è°ƒç”¨æ¬¡æ•°ã€‚</li><li>ä½¿ç”¨ <code>setTimeout</code> è®¾ç½®åˆå§‹å»¶è¿Ÿä¸º <code>delay</code> æ¯«ç§’ã€‚</li><li>åœ¨æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œè®¡ç®—ä¸‹æ¬¡å»¶è¿Ÿæ—¶é—´ <code>delay + period * count</code>ã€‚</li><li>ç»§ç»­é€’å½’è°ƒç”¨ <code>setTimeout</code>ï¼Œå¹¶æ›´æ–° <code>count</code>ã€‚</li><li>å°† <code>setTimeout</code> è¿”å›çš„ ID ç”¨å“ˆå¸Œè¡¨å­˜å‚¨èµ·æ¥ï¼Œä»¥ä¾¿åç»­å¯ä»¥æ¸…é™¤è¯¥å®šæ—¶å™¨ã€‚</li><li>è¿”å›ç”¨äºåœæ­¢è°ƒç”¨çš„å”¯ä¸€æ ‡è¯†ç¬¦ <code>id</code>ï¼Œè®© <code>customClearInterval</code> å¯ä»¥æ ¹æ®è¿™ä¸ª ID åœæ­¢å®šæ—¶å™¨ã€‚</li></ul></li><li><p><strong>åœæ­¢å®šæ—¶å™¨ <code>customClearInterval</code></strong>:</p><ul><li><code>customClearInterval</code> ä½¿ç”¨ <code>clearTimeout</code> æ¸…é™¤ç›¸åº”çš„å®šæ—¶å™¨ï¼Œä»è€Œåœæ­¢è°ƒç”¨ã€‚</li></ul></li></ol><h4 id="å¤æ‚åº¦åˆ†æ" tabindex="-1"><a class="header-anchor" href="#å¤æ‚åº¦åˆ†æ" aria-hidden="true">#</a> å¤æ‚åº¦åˆ†æ</h4><ul><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š<code>O(n)</code>ï¼Œå…¶ä¸­ <code>n</code> æ˜¯è°ƒç”¨æ¬¡æ•°ï¼Œå–å†³äº <code>stopTime</code> å’Œ <code>period</code>ï¼Œæ¯æ¬¡é€’å½’è°ƒç”¨éƒ½ä¼šæ‰§è¡Œ <code>setTimeout</code>ã€‚</li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š<code>O(n)</code>ï¼Œæ¯æ¬¡é€’å½’è°ƒç”¨å“ˆå¸Œè¡¨ä¸­éƒ½éœ€è¦å­˜å‚¨å®šæ—¶å™¨ IDã€‚</li></ul><h2 id="ä»£ç " tabindex="-1"><a class="header-anchor" href="#ä»£ç " aria-hidden="true">#</a> ä»£ç </h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> idMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Function<span class="token punctuation">}</span></span> <span class="token parameter">fn</span>
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token parameter">delay</span>
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token parameter">period</span>
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span>
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">customClearInterval</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> period</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> curDelay <span class="token operator">=</span> delay <span class="token operator">+</span> period <span class="token operator">*</span> count<span class="token punctuation">;</span>
		idMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>
			id<span class="token punctuation">,</span>
			<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				count<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> curDelay<span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> id <span class="token operator">=</span> Data<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token parameter">id</span>
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">}</span></span>
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">customClearInterval</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>idMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">clearTimeout</span><span class="token punctuation">(</span>idMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		idMap<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,37);function g(h,y){const o=e("font"),t=e("ExternalLinkIcon");return c(),l("div",null,[r,n("p",null,[s("ğŸŸ  "),a(o,{color:"#ffb800"},{default:i(()=>[s("Medium")]),_:1}),s("â€ƒ ğŸ”—â€‚"),n("a",k,[m,a(t)]),s(),n("a",v,[b,a(t)])]),f])}const _=p(d,[["render",g],["__file","2805.html.vue"]]);export{_ as default};
