import{_ as p,r as c,o as i,c as d,a as n,b as s,d as e,w as a,f as u,e as r}from"./app-B5EG-zH0.js";const m={},k=n("h1",{id:"_381-o-1-æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ -å…è®¸é‡å¤",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_381-o-1-æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ -å…è®¸é‡å¤","aria-hidden":"true"},"#"),s(" 381. O(1) æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´  - å…è®¸é‡å¤")],-1),v=n("code",null,"è®¾è®¡",-1),h=n("code",null,"æ•°ç»„",-1),g=n("code",null,"å“ˆå¸Œè¡¨",-1),b=n("code",null,"æ•°å­¦",-1),f=n("code",null,"éšæœºåŒ–",-1),_={href:"https://leetcode.cn/problems/insert-delete-getrandom-o1-duplicates-allowed",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"åŠ›æ‰£",-1),w={href:"https://leetcode.com/problems/insert-delete-getrandom-o1-duplicates-allowed",target:"_blank",rel:"noopener noreferrer"},x=n("code",null,"LeetCode",-1),R=r(`<h2 id="é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®" aria-hidden="true">#</a> é¢˜ç›®</h2><p><code>RandomizedCollection</code> is a data structure that contains a collection of numbers, possibly duplicates (i.e., a multiset). It should support inserting and removing specific elements and also reporting a random element.</p><p>Implement the <code>RandomizedCollection</code> class:</p><ul><li><code>RandomizedCollection()</code> Initializes the empty <code>RandomizedCollection</code> object.</li><li><code>bool insert(int val)</code> Inserts an item <code>val</code> into the multiset, even if the item is already present. Returns <code>true</code> if the item is not present, <code>false</code> otherwise.</li><li><code>bool remove(int val)</code> Removes an item <code>val</code> from the multiset if present. Returns <code>true</code> if the item is present, <code>false</code> otherwise. Note that if <code>val</code> has multiple occurrences in the multiset, we only remove one of them.</li><li><code>int getRandom()</code> Returns a random element from the current multiset of elements. The probability of each element being returned is <strong>linearly related</strong> to the number of the same values the multiset contains.</li></ul><p>You must implement the functions of the class such that each function works on <strong>average</strong> <code>O(1)</code> time complexity.</p><p><strong>Note:</strong> The test cases are generated such that <code>getRandom</code> will only be called if there is <strong>at least one</strong> item in the <code>RandomizedCollection</code>.</p><p><strong>Example 1:</strong></p><blockquote><p><strong>Input</strong></p><p>[&quot;RandomizedCollection&quot;, &quot;insert&quot;, &quot;insert&quot;, &quot;insert&quot;, &quot;getRandom&quot;, &quot;remove&quot;, &quot;getRandom&quot;]</p><p>[[], [1], [1], [2], [], [1], []]</p><p><strong>Output</strong></p><p>[null, true, false, true, 2, true, 1]</p><p><strong>Explanation</strong></p><p>RandomizedCollection randomizedCollection = new RandomizedCollection();</p><p>randomizedCollection.insert(1); // return true since the collection does not contain 1.</p><p>// Inserts 1 into the collection.</p><p>randomizedCollection.insert(1); // return false since the collection contains 1.</p><p>// Inserts another 1 into the collection. Collection now contains [1,1].</p><p>randomizedCollection.insert(2); // return true since the collection does not contain 2.</p><p>// Inserts 2 into the collection. Collection now contains [1,1,2].</p><p>randomizedCollection.getRandom(); // getRandom should:</p><p>// - return 1 with probability 2/3, or</p><p>// - return 2 with probability 1/3.</p><p>randomizedCollection.remove(1); // return true since the collection contains 1.</p><p>// Removes 1 from the collection. Collection now contains [1,2].</p><p>randomizedCollection.getRandom(); // getRandom should return 1 or 2, both equally likely.</p></blockquote><p><strong>Constraints:</strong></p><ul><li><code>-2^31 &lt;= val &lt;= 2^31 - 1</code></li><li>At most <code>2 * 10^5</code> calls <strong>in total</strong> will be made to <code>insert</code>, <code>remove</code>, and <code>getRandom</code>.</li><li>There will be <strong>at least one</strong> element in the data structure when <code>getRandom</code> is called.</li></ul><h2 id="é¢˜ç›®å¤§æ„" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®å¤§æ„" aria-hidden="true">#</a> é¢˜ç›®å¤§æ„</h2><p><code>RandomizedCollection</code> æ˜¯ä¸€ç§åŒ…å«æ•°å­—é›†åˆ(å¯èƒ½æ˜¯é‡å¤çš„)çš„æ•°æ®ç»“æ„ã€‚å®ƒåº”è¯¥æ”¯æŒæ’å…¥å’Œåˆ é™¤ç‰¹å®šå…ƒç´ ï¼Œä»¥åŠåˆ é™¤éšæœºå…ƒç´ ã€‚</p><p>å®ç° <code>RandomizedCollection</code> ç±»:</p><ul><li><code>RandomizedCollection()</code>åˆå§‹åŒ–ç©ºçš„ <code>RandomizedCollection</code> å¯¹è±¡ã€‚</li><li><code>bool insert(int val)</code> å°†ä¸€ä¸ª <code>val</code> é¡¹æ’å…¥åˆ°é›†åˆä¸­ï¼Œå³ä½¿è¯¥é¡¹å·²ç»å­˜åœ¨ã€‚å¦‚æœè¯¥é¡¹ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› <code>true</code> ï¼Œå¦åˆ™è¿”å› <code>false</code> ã€‚</li><li><code>bool remove(int val)</code> å¦‚æœå­˜åœ¨ï¼Œä»é›†åˆä¸­ç§»é™¤ä¸€ä¸ª <code>val</code> é¡¹ã€‚å¦‚æœè¯¥é¡¹å­˜åœ¨ï¼Œåˆ™è¿”å› <code>true</code> ï¼Œå¦åˆ™è¿”å› <code>false</code> ã€‚æ³¨æ„ï¼Œå¦‚æœ <code>val</code> åœ¨é›†åˆä¸­å‡ºç°å¤šæ¬¡ï¼Œæˆ‘ä»¬åªåˆ é™¤å…¶ä¸­ä¸€ä¸ªã€‚</li><li><code>int getRandom()</code> ä»å½“å‰çš„å¤šä¸ªå…ƒç´ é›†åˆä¸­è¿”å›ä¸€ä¸ªéšæœºå…ƒç´ ã€‚æ¯ä¸ªå…ƒç´ è¢«è¿”å›çš„æ¦‚ç‡ä¸é›†åˆä¸­åŒ…å«çš„ç›¸åŒå€¼çš„æ•°é‡ <strong>çº¿æ€§ç›¸å…³</strong> ã€‚</li></ul><p>æ‚¨å¿…é¡»å®ç°ç±»çš„å‡½æ•°ï¼Œä½¿æ¯ä¸ªå‡½æ•°çš„ <strong>å¹³å‡</strong> æ—¶é—´å¤æ‚åº¦ä¸º <code>O(1)</code> ã€‚</p><p><strong>æ³¨æ„ï¼š</strong> ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œåªæœ‰åœ¨ <code>RandomizedCollection</code> ä¸­ <strong>è‡³å°‘æœ‰ä¸€é¡¹</strong> æ—¶ï¼Œæ‰ä¼šè°ƒç”¨ <code>getRandom</code> ã€‚</p><p><strong>ç¤ºä¾‹ 1:</strong></p><blockquote><p><strong>è¾“å…¥</strong></p><p>[&quot;RandomizedCollection&quot;, &quot;insert&quot;, &quot;insert&quot;, &quot;insert&quot;, &quot;getRandom&quot;, &quot;remove&quot;, &quot;getRandom&quot;]</p><p>[[], [1], [1], [2], [], [1], []]</p><p><strong>è¾“å‡º</strong></p><p>[null, true, false, true, 2, true, 1]</p><p><strong>è§£é‡Š</strong></p><p>RandomizedCollection collection = new RandomizedCollection();// åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„é›†åˆã€‚</p><p>collection.insert(1); // è¿”å› trueï¼Œå› ä¸ºé›†åˆä¸åŒ…å« 1ã€‚</p><p>// å°† 1 æ’å…¥åˆ°é›†åˆä¸­ã€‚</p><p>collection.insert(1); // è¿”å› falseï¼Œå› ä¸ºé›†åˆåŒ…å« 1ã€‚</p><p>// å°†å¦ä¸€ä¸ª 1 æ’å…¥åˆ°é›†åˆä¸­ã€‚é›†åˆç°åœ¨åŒ…å« [1,1]ã€‚</p><p>collection.insert(2); // è¿”å› trueï¼Œå› ä¸ºé›†åˆä¸åŒ…å« 2ã€‚</p><p>// å°† 2 æ’å…¥åˆ°é›†åˆä¸­ã€‚é›†åˆç°åœ¨åŒ…å« [1,1,2]ã€‚</p><p>collection.getRandom(); // getRandom åº”å½“:</p><p>// æœ‰ 2/3 çš„æ¦‚ç‡è¿”å› 1,</p><p>// 1/3 çš„æ¦‚ç‡è¿”å› 2ã€‚</p><p>collection.remove(1); // è¿”å› trueï¼Œå› ä¸ºé›†åˆåŒ…å« 1ã€‚</p><p>// ä»é›†åˆä¸­ç§»é™¤ 1ã€‚é›†åˆç°åœ¨åŒ…å« [1,2]ã€‚</p><p>collection.getRandom(); // getRandom åº”è¯¥è¿”å› 1 æˆ– 2ï¼Œä¸¤è€…çš„å¯èƒ½æ€§ç›¸åŒã€‚</p></blockquote><p><strong>æç¤º:</strong></p><ul><li><code>-2^31 &lt;= val &lt;= 2^31 - 1</code></li><li><code>insert</code>, <code>remove</code> å’Œ <code>getRandom</code> æœ€å¤š <strong>æ€»å…±</strong> è¢«è°ƒç”¨ <code>2 * 10^5</code> æ¬¡</li><li>å½“è°ƒç”¨ <code>getRandom</code> æ—¶ï¼Œæ•°æ®ç»“æ„ä¸­ <strong>è‡³å°‘æœ‰ä¸€ä¸ª</strong> å…ƒç´ </li></ul><h2 id="è§£é¢˜æ€è·¯" tabindex="-1"><a class="header-anchor" href="#è§£é¢˜æ€è·¯" aria-hidden="true">#</a> è§£é¢˜æ€è·¯</h2><p>æˆ‘ä»¬éœ€è¦æ”¯æŒ <strong>O(1) çš„æ’å…¥ã€åˆ é™¤å’Œéšæœºè®¿é—®</strong>ï¼Œå› æ­¤é‡‡ç”¨ï¼š</p><ul><li><strong>æ•°ç»„ <code>elements</code></strong>ï¼šç”¨äºå­˜å‚¨æ‰€æœ‰æ’å…¥çš„å…ƒç´ ï¼Œæ–¹ä¾¿ <code>getRandom()</code> é€šè¿‡ç´¢å¼• <strong>O(1)</strong> è·å–éšæœºå…ƒç´ ã€‚</li><li><strong>å“ˆå¸Œè¡¨ <code>indicesMap</code></strong>ï¼ˆ<code>Map&lt;number, Set&lt;number&gt;&gt;</code>ï¼‰ï¼š <ul><li><strong>key</strong>: å­˜å‚¨å…ƒç´ å€¼</li><li><strong>value</strong>: è¯¥å€¼åœ¨æ•°ç»„ <code>elements</code> ä¸­çš„æ‰€æœ‰ç´¢å¼•é›†åˆï¼ˆ<code>Set</code>ï¼‰ã€‚</li><li><strong>ä¸ºä»€ä¹ˆç”¨ <code>Set</code>?</strong> å…è®¸ç›¸åŒçš„ <code>val</code> å¤šæ¬¡æ’å…¥ï¼Œå¹¶ä¸”åˆ é™¤æ“ä½œä»ç„¶ä¿æŒ O(1) å¤æ‚åº¦ã€‚</li></ul></li></ul><h4 id="_1-insert-val" tabindex="-1"><a class="header-anchor" href="#_1-insert-val" aria-hidden="true">#</a> 1. <code>insert(val)</code></h4><ol><li>å…ˆæ£€æŸ¥ <code>val</code> æ˜¯å¦å·²ç»å­˜åœ¨äº <code>indicesMap</code>ã€‚</li><li>å°† <code>val</code> æ·»åŠ åˆ° <code>elements</code> æ•°ç»„çš„ <strong>æœ«å°¾</strong>ã€‚</li><li>åœ¨ <code>indicesMap</code> é‡Œ <strong>è®°å½•ç´¢å¼•</strong>ï¼š <ul><li>å¦‚æœ <code>val</code> ä¸å­˜åœ¨ï¼Œåˆ›å»º <code>Set</code> å­˜å‚¨ç´¢å¼•ã€‚</li><li>å¦‚æœ <code>val</code> å·²å­˜åœ¨ï¼Œç›´æ¥å°†æ–°ç´¢å¼•åŠ å…¥ <code>Set</code>ã€‚</li></ul></li><li><strong>è¿”å›</strong> <code>val</code> æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡æ’å…¥ï¼ˆ<code>true</code> æˆ– <code>false</code>ï¼‰ã€‚</li></ol><ul><li><strong>æ—¶é—´å¤æ‚åº¦ï¼šO(1)</strong>ï¼Œå› ä¸º <code>æ•°ç»„ push</code> å’Œ <code>Map æ“ä½œ</code> çš†ä¸º O(1)ã€‚</li></ul><hr><h4 id="_2-remove-val" tabindex="-1"><a class="header-anchor" href="#_2-remove-val" aria-hidden="true">#</a> 2. <code>remove(val)</code></h4><ol><li>å…ˆæ£€æŸ¥ <code>val</code> æ˜¯å¦å­˜åœ¨äº <code>indicesMap</code>ï¼Œå¦‚æœä¸å­˜åœ¨ç›´æ¥è¿”å› <code>false</code>ã€‚</li><li>æ‰¾åˆ° <code>val</code> åœ¨æ•°ç»„ä¸­çš„æŸä¸ªç´¢å¼• <code>removeIndex</code>ã€‚</li><li>è·å– <code>elements</code> <strong>æœ€åä¸€ä¸ªå…ƒç´ </strong> <code>lastElement</code>ï¼Œå‡†å¤‡ <strong>å°†å…¶ç§»åŠ¨åˆ° <code>removeIndex</code> ä½ç½®</strong>ï¼ˆé¿å…æ•°ç»„ <code>splice</code> æ“ä½œï¼Œä¿è¯ O(1)ï¼‰ã€‚</li><li><strong>æ›¿æ¢ <code>val</code></strong><ul><li><code>elements[removeIndex] = lastElement</code> ï¼ˆå°†æœ€åä¸€ä¸ªå…ƒç´ ç§»åŠ¨åˆ° <code>val</code> çš„ä½ç½®ï¼‰</li><li><code>elements.pop()</code> åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </li></ul></li><li>æ›´æ–° <code>indicesMap</code><ul><li><strong>åˆ é™¤ <code>removeIndex</code></strong>ï¼Œå¦‚æœ <code>val</code> æ²¡æœ‰ç´¢å¼•äº†ï¼Œä» <code>Map</code> ä¸­åˆ é™¤ã€‚</li><li><strong>æ›´æ–° <code>lastElement</code> çš„ç´¢å¼•</strong>ï¼ˆå¦‚æœ <code>lastElement</code> ä¸æ˜¯ <code>val</code> æœ¬èº«ï¼‰ã€‚</li></ul></li><li>è¿”å› <code>true</code>ï¼Œè¡¨ç¤ºæˆåŠŸåˆ é™¤ã€‚</li></ol><ul><li><strong>æ—¶é—´å¤æ‚åº¦ï¼šO(1)</strong>ï¼Œå› ä¸ºï¼š <ul><li>è·å–ç´¢å¼•æ˜¯ O(1) (<code>Set.values().next().value</code>)</li><li>æ›¿æ¢ç´¢å¼•æ˜¯ O(1)</li><li><code>elements.pop()</code> æ˜¯ O(1)</li><li><code>Map</code> æ“ä½œæ˜¯ O(1)</li></ul></li></ul><h4 id="_3-getrandom" tabindex="-1"><a class="header-anchor" href="#_3-getrandom" aria-hidden="true">#</a> 3. <code>getRandom()</code></h4><ol><li>ç”Ÿæˆ <code>[0, elements.length - 1]</code> ä¹‹é—´çš„éšæœºç´¢å¼•ã€‚</li><li>è¿”å› <code>elements[randomIndex]</code>ã€‚</li></ol><ul><li><strong>æ—¶é—´å¤æ‚åº¦ï¼šO(1)</strong>ï¼Œå› ä¸ºæ•°ç»„éšæœºè®¿é—®æ˜¯ O(1)ã€‚</li></ul><h4 id="å¤æ‚åº¦åˆ†æ" tabindex="-1"><a class="header-anchor" href="#å¤æ‚åº¦åˆ†æ" aria-hidden="true">#</a> å¤æ‚åº¦åˆ†æ</h4><ul><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š<code>O(1)</code>ï¼Œ<code> insert</code>, <code>remove </code> å’Œ <code>getRandom</code> éƒ½æ˜¯<code>O(1)</code>æ—¶é—´å¤æ‚åº¦ã€‚</li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š<code>O(n)</code>ï¼Œä½¿ç”¨äº†ä¸€ä¸ªæ•°ç»„å’Œä¸€ä¸ªå“ˆå¸Œè¡¨å­˜å‚¨å…ƒç´ åŠå…¶ç´¢å¼•ã€‚</li></ul><h2 id="ä»£ç " tabindex="-1"><a class="header-anchor" href="#ä»£ç " aria-hidden="true">#</a> ä»£ç </h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">RandomizedCollection</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>elements <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// å­˜å‚¨æ‰€æœ‰æ’å…¥çš„å…ƒç´ </span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>indicesMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Map&lt;number, Set&lt;number&gt;&gt;ï¼Œå­˜å‚¨æ¯ä¸ªå€¼çš„ç´¢å¼•é›†åˆ</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * æ’å…¥ä¸€ä¸ªå€¼åˆ°é›†åˆä¸­
	 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token parameter">val</span>
	 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span>boolean<span class="token punctuation">}</span></span> æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡æ’å…¥
	 */</span>
	<span class="token function">insert</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> exists <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>indicesMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®°å½• val æ˜¯å¦å·²ç»å­˜åœ¨</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>elements<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°† val æ·»åŠ åˆ°æ•°ç»„æœ«å°¾</span>

		<span class="token comment">// åœ¨å“ˆå¸Œè¡¨ä¸­è®°å½• val å¯¹åº”çš„ç´¢å¼•</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>exists<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>indicesMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>indicesMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elements<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token operator">!</span>exists<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * ä»é›†åˆä¸­åˆ é™¤ä¸€ä¸ªå€¼
	 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token parameter">val</span>
	 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span>boolean<span class="token punctuation">}</span></span> æ˜¯å¦åˆ é™¤æˆåŠŸ
	 */</span>
	<span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>indicesMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// è‹¥ val ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å› false</span>

		<span class="token keyword">const</span> lastIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elements<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// è·å–æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•</span>
		<span class="token keyword">const</span> valIndices <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>indicesMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å– val æ‰€åœ¨çš„ç´¢å¼•é›†åˆ</span>
		<span class="token keyword">const</span> removeIndex <span class="token operator">=</span> valIndices<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span> <span class="token comment">// å–å‡º val åœ¨æ•°ç»„ä¸­çš„æŸä¸ªç´¢å¼•</span>

		<span class="token keyword">const</span> lastElement <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elements<span class="token punctuation">[</span>lastIndex<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// è·å–æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ </span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>elements<span class="token punctuation">[</span>removeIndex<span class="token punctuation">]</span> <span class="token operator">=</span> lastElement<span class="token punctuation">;</span> <span class="token comment">// ç”¨æœ€åä¸€ä¸ªå…ƒç´ è¦†ç›–å¾…åˆ é™¤å…ƒç´ </span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>elements<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ é™¤æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ </span>

		<span class="token comment">// æ›´æ–° val çš„ç´¢å¼•é›†åˆ</span>
		valIndices<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>removeIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>valIndices<span class="token punctuation">.</span>size <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>indicesMap<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è‹¥ val æ²¡æœ‰ç´¢å¼•äº†ï¼Œä» Map ä¸­åˆ é™¤</span>

		<span class="token comment">// è‹¥è¢«æ›¿æ¢çš„å…ƒç´  lastElement ä¸æ˜¯ valï¼Œåˆ™éœ€è¦æ›´æ–° lastElement çš„ç´¢å¼•</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>removeIndex <span class="token operator">!==</span> lastIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> lastIndices <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>indicesMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>lastElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
			lastIndices<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
			lastIndices<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>removeIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ›´æ–° lastElement åœ¨æ•°ç»„ä¸­çš„ä½ç½®</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token doc-comment comment">/**
	 * éšæœºè·å–ä¸€ä¸ªå…ƒç´ 
	 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> éšæœºè¿”å›é›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ 
	 */</span>
	<span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> randomIndex <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elements<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elements<span class="token punctuation">[</span>randomIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * Your RandomizedCollection object will be instantiated and called as such:
 * var obj = new RandomizedCollection()
 * var param_1 = obj.insert(val)
 * var param_2 = obj.remove(val)
 * var param_3 = obj.getRandom()
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç›¸å…³é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#ç›¸å…³é¢˜ç›®" aria-hidden="true">#</a> ç›¸å…³é¢˜ç›®</h2>`,38),C=n("thead",null,[n("tr",null,[n("th",{style:{"text-align":"center"}},"é¢˜å·"),n("th",{style:{"text-align":"left"}},"æ ‡é¢˜"),n("th",{style:{"text-align":"center"}},"é¢˜è§£"),n("th",{style:{"text-align":"left"}},"æ ‡ç­¾"),n("th",{style:{"text-align":"center"}},"éš¾åº¦"),n("th",{style:{"text-align":"center"}},"åŠ›æ‰£")])],-1),q=n("td",{style:{"text-align":"center"}},"380",-1),I=n("td",{style:{"text-align":"left"}},"O(1) æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ ",-1),z={style:{"text-align":"center"}},M={style:{"text-align":"left"}},O=n("code",null,"è®¾è®¡",-1),E=n("code",null,"æ•°ç»„",-1),j=n("code",null,"å“ˆå¸Œè¡¨",-1),S=n("code",null,"2+",-1),N=n("td",{style:{"text-align":"center"}},"ğŸŸ ",-1),L={style:{"text-align":"center"}},V={href:"https://leetcode.cn/problems/insert-delete-getrandom-o1",target:"_blank",rel:"noopener noreferrer"},T={href:"https://leetcode.com/problems/insert-delete-getrandom-o1",target:"_blank",rel:"noopener noreferrer"};function B(Y,A){const l=c("font"),t=c("RouterLink"),o=c("ExternalLinkIcon");return i(),d("div",null,[k,n("p",null,[s("ğŸ”´ "),e(l,{color:"#ff334b"},{default:a(()=>[s("Hard")]),_:1}),s("â€ƒ ğŸ”–â€‚ "),e(t,{to:"/tag/design.html"},{default:a(()=>[v]),_:1}),s(),e(t,{to:"/tag/array.html"},{default:a(()=>[h]),_:1}),s(),e(t,{to:"/tag/hash-table.html"},{default:a(()=>[g]),_:1}),s(),e(t,{to:"/tag/math.html"},{default:a(()=>[b]),_:1}),s(),e(t,{to:"/tag/randomized.html"},{default:a(()=>[f]),_:1}),s("â€ƒ ğŸ”—â€‚"),n("a",_,[y,e(o)]),s(),n("a",w,[x,e(o)])]),R,u(" prettier-ignore "),n("table",null,[C,n("tbody",null,[n("tr",null,[q,I,n("td",z,[e(t,{to:"/problem/0380.html"},{default:a(()=>[s("[âœ“]")]),_:1})]),n("td",M,[e(t,{to:"/tag/design.html"},{default:a(()=>[O]),_:1}),s(),e(t,{to:"/tag/array.html"},{default:a(()=>[E]),_:1}),s(),e(t,{to:"/tag/hash-table.html"},{default:a(()=>[j]),_:1}),s(),S]),N,n("td",L,[n("a",V,[s("ğŸ€„ï¸"),e(o)]),s(),n("a",T,[s("ğŸ”—"),e(o)])])])])])])}const D=p(m,[["render",B],["__file","0381.html.vue"]]);export{D as default};
