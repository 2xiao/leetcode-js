---
title: 505. è¿·å®« II ğŸ”’
description: LeetCode,505. è¿·å®« II ğŸ”’,è¿·å®« II,The Maze II,è§£é¢˜æ€è·¯,æ·±åº¦ä¼˜å…ˆæœç´¢,å¹¿åº¦ä¼˜å…ˆæœç´¢,å›¾,æ•°ç»„,çŸ©é˜µ,æœ€çŸ­è·¯,å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
keywords:
  - LeetCode
  - 505. è¿·å®« II ğŸ”’
  - è¿·å®« II
  - The Maze II
  - è§£é¢˜æ€è·¯
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - å›¾
  - æ•°ç»„
  - çŸ©é˜µ
  - æœ€çŸ­è·¯
  - å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
---

# 505. è¿·å®« II ğŸ”’

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å›¾`](/tag/graph.md) [`æ•°ç»„`](/tag/array.md) [`çŸ©é˜µ`](/tag/matrix.md) [`æœ€çŸ­è·¯`](/tag/shortest-path.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/the-maze-ii) [`LeetCode`](https://leetcode.com/problems/the-maze-ii)

## é¢˜ç›®

There is a ball in a `maze` with empty spaces (represented as `0`) and walls
(represented as `1`). The ball can go through the empty spaces by rolling
**up, down, left or right** , but it won't stop rolling until hitting a wall.
When the ball stops, it could choose the next direction.

Given the `m x n` `maze`, the ball's `start` position and the `destination`,
where `start = [startrow, startcol]` and `destination = [destinationrow,
destinationcol]`, return _the shortest**distance** for the ball to stop at the
destination_. If the ball cannot stop at `destination`, return `-1`.

The **distance** is the number of **empty spaces** traveled by the ball from
the start position (excluded) to the destination (included).

You may assume that **the borders of the maze are all walls** (see examples).



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0500-0599/0505.The%20Maze%20II/images/maze1-1-grid.jpg)

> Input: maze = [[0,0,1,0,0],[0,0,0,0,0],[0,0,0,1,0],[1,1,0,1,1],[0,0,0,0,0]], start = [0,4], destination = [4,4]
> 
> Output: 12
> 
> Explanation: One possible way is : left -> down -> left -> down -> right -> down -> right.
> 
> The length of the path is 1 + 1 + 3 + 1 + 2 + 2 + 2 = 12.

**Example 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0500-0599/0505.The%20Maze%20II/images/maze1-2-grid.jpg)

> Input: maze = [[0,0,1,0,0],[0,0,0,0,0],[0,0,0,1,0],[1,1,0,1,1],[0,0,0,0,0]], start = [0,4], destination = [3,2]
> 
> Output: -1
> 
> Explanation: There is no way for the ball to stop at the destination. Notice that you can pass through the destination but you cannot stop there.

**Example 3:**

> Input: maze = [[0,0,0,0,0],[1,1,0,0,1],[0,0,0,0,0],[0,1,0,0,1],[0,1,0,0,0]], start = [4,3], destination = [0,1]
> 
> Output: -1

**Constraints:**

  * `m == maze.length`
  * `n == maze[i].length`
  * `1 <= m, n <= 100`
  * `maze[i][j]` is `0` or `1`.
  * `start.length == 2`
  * `destination.length == 2`
  * `0 <= startrow, destinationrow < m`
  * `0 <= startcol, destinationcol < n`
  * Both the ball and the destination exist in an empty space, and they will not be in the same position initially.
  * The maze contains **at least 2 empty spaces**.


## é¢˜ç›®å¤§æ„

**è¿·å®«** ä¸­æœ‰ä¸€ä¸ªçƒï¼Œå®ƒæœ‰ç©ºåœ° (è¡¨ç¤ºä¸º `0`) å’Œå¢™ (è¡¨ç¤ºä¸º `1`)ã€‚çƒå¯ä»¥**å‘ä¸Š** ã€**å‘ä¸‹** ã€**å‘å·¦** æˆ–**å‘å³**
æ»šè¿‡ç©ºåœ°ï¼Œä½†ç›´åˆ°æ’ä¸Šå¢™ä¹‹å‰å®ƒéƒ½ä¸ä¼šåœæ­¢æ»šåŠ¨ã€‚å½“çƒåœæ­¢æ—¶ï¼Œå®ƒæ‰å¯ä»¥é€‰æ‹©ä¸‹ä¸€ä¸ªæ»šåŠ¨æ–¹å‘ã€‚

ç»™å®š `m Ã— n` çš„**è¿·å®«**(`maze`)ï¼Œçƒçš„**èµ·å§‹ä½ç½®  **(`start = [startrow, startcol]`) å’Œ**ç›®çš„åœ°
**(`destination = [destinationrow, destinationcol]`)ï¼Œè¿”å›çƒåœ¨**ç›®çš„åœ°
**(`destination`) åœæ­¢çš„æœ€çŸ­**è·ç¦»** ã€‚å¦‚æœçƒä¸èƒ½åœ¨**ç›®çš„åœ°  **(`destination`) åœæ­¢ï¼Œè¿”å› `-1`ã€‚

**è·ç¦»** æ˜¯æŒ‡çƒä»èµ·å§‹ä½ç½® ( ä¸åŒ…æ‹¬ ) åˆ°ç»ˆç‚¹ ( åŒ…æ‹¬ ) æ‰€ç»è¿‡çš„**ç©ºåœ°** æ•°ã€‚

ä½ å¯ä»¥å‡è®¾**è¿·å®«çš„è¾¹ç•Œéƒ½æ˜¯å¢™  **( è§ä¾‹å­ )ã€‚



**ç¤ºä¾‹ 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0500-0599/0505.The%20Maze%20II/images/maze1-1-grid.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥:** maze = [[0,0,1,0,0],[0,0,0,0,0],[0,0,0,1,0],[1,1,0,1,1],[0,0,0,0,0]], start = [0,4], destination = [4,4]
> 
> **è¾“å‡º:** 12
> 
> **è§£æ:** ä¸€æ¡æœ€çŸ­è·¯å¾„ : left -> down -> left -> down -> right -> down -> rightã€‚
> 
> > 
> > 
> > 
>  æ€»è·ç¦»ä¸º 1 + 1 + 3 + 1 + 2 + 2 + 2 = 12ã€‚
> 
> 
> 
> 

**ç¤ºä¾‹  2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0500-0599/0505.The%20Maze%20II/images/maze1-2-grid.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥:** maze = [[0,0,1,0,0],[0,0,0,0,0],[0,0,0,1,0],[1,1,0,1,1],[0,0,0,0,0]], start = [0,4], destination = [3,2]
> 
> **è¾“å‡º:** -1
> 
> **è§£æ:** çƒä¸å¯èƒ½åœ¨ç›®çš„åœ°åœä¸‹æ¥ã€‚æ³¨æ„ï¼Œä½ å¯ä»¥ç»è¿‡ç›®çš„åœ°ï¼Œä½†ä¸èƒ½åœ¨é‚£é‡Œåœä¸‹æ¥ã€‚
> 
> 

**ç¤ºä¾‹  3:**

> 
> 
> 
> 
> 
> **è¾“å…¥:** maze = [[0,0,0,0,0],[1,1,0,0,1],[0,0,0,0,0],[0,1,0,0,1],[0,1,0,0,0]], start = [4,3], destination = [0,1]
> 
> **è¾“å‡º:** -1
> 
> 



**æ³¨æ„:**

  * `m == maze.length`
  * `n == maze[i].length`
  * `1 <= m, n <= 100`
  * `maze[i][j]` æ˜¯ `0` æˆ– `1`.
  * `start.length == 2`
  * `destination.length == 2`
  * `0 <= startrow, destinationrow < m`
  * `0 <= startcol, destinationcol < n`
  * çƒå’Œç›®çš„åœ°éƒ½å­˜åœ¨äºä¸€ä¸ªç©ºåœ°ä¸­ï¼Œå®ƒä»¬æœ€åˆä¸ä¼šå¤„äºç›¸åŒçš„ä½ç½®ã€‚
  * è¿·å®«**è‡³å°‘åŒ…å«ä¸¤ä¸ªç©ºåœ°** ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------ | :------: |
| 490 | è¿·å®« ğŸ”’ |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`æ•°ç»„`](/tag/array.md) `1+` | <font color=#ffb800>Medium</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/the-maze) [ğŸ”—](https://leetcode.com/problems/the-maze) |
| 499 | è¿·å®« III ğŸ”’ |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å›¾`](/tag/graph.md) `5+` | <font color=#ff334b>Hard</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/the-maze-iii) [ğŸ”—](https://leetcode.com/problems/the-maze-iii) |