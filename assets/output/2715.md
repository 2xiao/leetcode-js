# [2715. æ‰§è¡Œå¯å–æ¶ˆçš„å»¶è¿Ÿå‡½æ•°](https://leetcode.com/problems/timeout-cancellation)

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/timeout-cancellation)


## é¢˜ç›®

Given a function `fn`, an array of arguments `args`, and a timeout `t` in
milliseconds, return a cancel function `cancelFn`.

After a delay of `cancelTimeMs`, the returned cancel function `cancelFn` will
be invoked.

> 
> 
> 
> 
> 
> setTimeout(cancelFn, cancelTimeMs)
> 
> 

Initially, the execution of the function `fn` should be delayed by `t`
milliseconds.

If, before the delay of `t` milliseconds, the function `cancelFn` is invoked,
it should cancel the delayed execution of `fn`. Otherwise, if `cancelFn` is
not invoked within the specified delay `t`, `fn` should be executed with the
provided `args` as arguments.



**Example 1:**

> Input: fn = (x) => x * 5, args = [2], t = 20
> 
> Output: [{"time": 20, "returned": 10}]
> 
> Explanation: 
> 
> const cancelTimeMs = 50;
> 
> const cancelFn = cancellable((x) => x * 5, [2], 20);
> 
> setTimeout(cancelFn, cancelTimeMs);
> 
> 
> 
> The cancellation was scheduled to occur after a delay of cancelTimeMs (50ms), which happened after the execution of fn(2) at 20ms.

**Example 2:**

> Input: fn = (x) => x**2, args = [2], t = 100
> 
> Output: []
> 
> Explanation: 
> 
> const cancelTimeMs = 50;
> 
> const cancelFn = cancellable((x) => x**2, [2], 100);
> 
> setTimeout(cancelFn, cancelTimeMs);
> 
> 
> 
> The cancellation was scheduled to occur after a delay of cancelTimeMs (50ms), which happened before the execution of fn(2) at 100ms, resulting in fn(2) never being called.

**Example 3:**

> Input: fn = (x1, x2) => x1 * x2, args = [2,4], t = 30
> 
> Output: [{"time": 30, "returned": 8}]
> 
> Explanation: const cancelTimeMs = 100;
> 
> const cancelFn = cancellable((x1, x2) => x1 * x2, [2,4], 30);
> 
> setTimeout(cancelFn, cancelTimeMs);
> 
> 
> 
> The cancellation was scheduled to occur after a delay of cancelTimeMs (100ms), which happened after the execution of fn(2,4) at 30ms.

**Constraints:**

  * `fn` is a function
  * `args` is a valid JSON array
  * `1 <= args.length <= 10`
  * `20 <= t <= 1000`
  * `10 <= cancelTimeMs <= 1000`


## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªå‡½æ•° `fn` ï¼Œä¸€ä¸ªå‚æ•°æ•°ç»„ `args` å’Œä¸€ä¸ªä»¥æ¯«ç§’ä¸ºå•ä½çš„è¶…æ—¶æ—¶é—´ `t` ï¼Œè¿”å›ä¸€ä¸ªå–æ¶ˆå‡½æ•° `cancelFn` ã€‚

åœ¨ `cancelTimeMs` çš„å»¶è¿Ÿåï¼Œè¿”å›çš„å–æ¶ˆå‡½æ•° `cancelFn` å°†è¢«è°ƒç”¨ã€‚

> 
> 
> 
> 
> 
> setTimeout(cancelFn, cancelTimeMs)
> 
> 

æœ€åˆï¼Œå‡½æ•° `fn` çš„æ‰§è¡Œåº”è¯¥å»¶è¿Ÿ `t` æ¯«ç§’ã€‚

å¦‚æœåœ¨ `t` æ¯«ç§’çš„å»¶è¿Ÿä¹‹å‰è°ƒç”¨äº†å‡½æ•° `cancelFn`ï¼Œå®ƒåº”è¯¥å–æ¶ˆ `fn` çš„å»¶è¿Ÿæ‰§è¡Œã€‚å¦åˆ™ï¼Œå¦‚æœåœ¨æŒ‡å®šçš„å»¶è¿Ÿ `t` å†…æ²¡æœ‰è°ƒç”¨
`cancelFn`ï¼Œåˆ™åº”æ‰§è¡Œ `fn`ï¼Œå¹¶ä½¿ç”¨æä¾›çš„ `args` ä½œä¸ºå‚æ•°ã€‚



**ç¤ºä¾‹ 1:**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** fn = (x) => x * 5, args = [2], t = 20
> 
> **è¾“å‡ºï¼š**[{"time": 20, "returned": 10}]
> 
> **è§£é‡Šï¼š**
> 
> const cancelTimeMs = 50;
> 
> const cancelFn = cancellable((x) => x * 5, [2], 20);
> 
> setTimeout(cancelFn, cancelTimeMs);
> 
> 
> 
> å–æ¶ˆæ“ä½œè¢«å®‰æ’åœ¨å»¶è¿Ÿäº† cancelTimeMsï¼ˆ50æ¯«ç§’ï¼‰åè¿›è¡Œï¼Œè¿™å‘ç”Ÿåœ¨ fn(2) åœ¨20æ¯«ç§’æ—¶æ‰§è¡Œä¹‹åã€‚

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** fn = (x) => x**2, args = [2], t = 100
> 
> **è¾“å‡ºï¼š**[]
> 
> **è§£é‡Šï¼š**
> 
> const cancelTimeMs = 50;
> 
> const cancelFn = cancellable((x) => x**2, [2], 100);
> 
> setTimeout(cancelFn, cancelTimeMs);
> 
> 
> 
> å–æ¶ˆæ“ä½œè¢«å®‰æ’åœ¨å»¶è¿Ÿäº† cancelTimeMsï¼ˆ50æ¯«ç§’ï¼‰åè¿›è¡Œï¼Œè¿™å‘ç”Ÿåœ¨ fn(2) åœ¨100æ¯«ç§’æ—¶æ‰§è¡Œä¹‹å‰ï¼Œå¯¼è‡´ fn(2) ä»æœªè¢«è°ƒç”¨ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** fn = (x1, x2) => x1 * x2, args = [2,4], t = 30
> 
> **è¾“å‡ºï¼š**[{"time": 30, "returned": 8}]
> 
> **è§£é‡Šï¼š**
> 
> const cancelTimeMs = 100;
> 
> const cancelFn = cancellable((x1, x2) => x1 * x2, [2,4], 30);
> 
> setTimeout(cancelFn, cancelTimeMs);
> 
> 
> 
> å–æ¶ˆæ“ä½œè¢«å®‰æ’åœ¨å»¶è¿Ÿäº† cancelTimeMsï¼ˆ100æ¯«ç§’ï¼‰åè¿›è¡Œï¼Œè¿™å‘ç”Ÿåœ¨ fn(2,4) åœ¨30æ¯«ç§’æ—¶æ‰§è¡Œä¹‹åã€‚
> 
> 



**æç¤ºï¼š**

  * `fn` æ˜¯ä¸€ä¸ªå‡½æ•°
  * `args` æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ JSON æ•°ç»„
  * `1 <= args.length <= 10`
  * `20 <= t <= 1000`
  * `10 <= cancelTimeMs <= 1000`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```