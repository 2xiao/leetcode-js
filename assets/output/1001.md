# [1001. ç½‘æ ¼ç…§æ˜](https://leetcode.com/problems/grid-illumination)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/grid-illumination)


## é¢˜ç›®

There is a 2D `grid` of size `n x n` where each cell of this grid has a lamp
that is initially **turned off**.

You are given a 2D array of lamp positions `lamps`, where `lamps[i] = [rowi,
coli]` indicates that the lamp at `grid[rowi][coli]` is **turned on**. Even if
the same lamp is listed more than once, it is turned on.

When a lamp is turned on, it **illuminates its cell** and **all other cells**
in the same **row, column, or diagonal**.

You are also given another 2D array `queries`, where `queries[j] = [rowj,
colj]`. For the `jth` query, determine whether `grid[rowj][colj]` is
illuminated or not. After answering the `jth` query, **turn off** the lamp at
`grid[rowj][colj]` and its **8 adjacent lamps** if they exist. A lamp is
adjacent if its cell shares either a side or corner with `grid[rowj][colj]`.

Return _an array of integers_`ans` _,__where_`ans[j]`_should be_`1` _if the
cell in the_`jth` _query was illuminated, or_`0` _if the lamp was not._



**Example 1:**

![](https://assets.leetcode.com/uploads/2020/08/19/illu_1.jpg)

> Input: n = 5, lamps = [[0,0],[4,4]], queries = [[1,1],[1,0]]
> 
> Output: [1,0]
> 
> Explanation: We have the initial grid with all lamps turned off. In the above picture we see the grid after turning on the lamp at grid[0][0] then turning on the lamp at grid[4][4].
> 
> The 0th query asks if the lamp at grid[1][1] is illuminated or not (the blue square). It is illuminated, so set ans[0] = 1. Then, we turn off all lamps in the red square.
> 
> ![](https://assets.leetcode.com/uploads/2020/08/19/illu_step1.jpg)
> 
> The 1st query asks if the lamp at grid[1][0] is illuminated or not (the blue square). It is not illuminated, so set ans[1] = 0. Then, we turn off all lamps in the red rectangle.
> 
> ![](https://assets.leetcode.com/uploads/2020/08/19/illu_step2.jpg)

**Example 2:**

> Input: n = 5, lamps = [[0,0],[4,4]], queries = [[1,1],[1,1]]
> 
> Output: [1,1]

**Example 3:**

> Input: n = 5, lamps = [[0,0],[0,4]], queries = [[0,4],[0,1],[1,4]]
> 
> Output: [1,1,0]

**Constraints:**

  * `1 <= n <= 10^9`
  * `0 <= lamps.length <= 20000`
  * `0 <= queries.length <= 20000`
  * `lamps[i].length == 2`
  * `0 <= rowi, coli < n`
  * `queries[j].length == 2`
  * `0 <= rowj, colj < n`


## é¢˜ç›®å¤§æ„

åœ¨å¤§å°ä¸º `n x n` çš„ç½‘æ ¼ `grid` ä¸Šï¼Œæ¯ä¸ªå•å…ƒæ ¼éƒ½æœ‰ä¸€ç›ç¯ï¼Œæœ€åˆç¯éƒ½å¤„äº **å…³é—­** çŠ¶æ€ã€‚

ç»™ä½ ä¸€ä¸ªç”±ç¯çš„ä½ç½®ç»„æˆçš„äºŒç»´æ•°ç»„ `lamps` ï¼Œå…¶ä¸­ `lamps[i] = [rowi, coli]` è¡¨ç¤º **æ‰“å¼€** ä½äº
`grid[rowi][coli]` çš„ç¯ã€‚å³ä¾¿åŒä¸€ç›ç¯å¯èƒ½åœ¨ `lamps` ä¸­å¤šæ¬¡åˆ—å‡ºï¼Œä¸ä¼šå½±å“è¿™ç›ç¯å¤„äº **æ‰“å¼€** çŠ¶æ€ã€‚

å½“ä¸€ç›ç¯å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œå®ƒå°†ä¼šç…§äº® **è‡ªèº«æ‰€åœ¨å•å…ƒæ ¼** ä»¥åŠåŒä¸€ **è¡Œ** ã€åŒä¸€ **åˆ—** å’Œä¸¤æ¡ **å¯¹è§’çº¿** ä¸Šçš„ **æ‰€æœ‰å…¶ä»–å•å…ƒæ ¼** ã€‚

å¦ç»™ä½ ä¸€ä¸ªäºŒç»´æ•°ç»„ `queries` ï¼Œå…¶ä¸­ `queries[j] = [rowj, colj]` ã€‚å¯¹äºç¬¬ `j` ä¸ªæŸ¥è¯¢ï¼Œå¦‚æœå•å…ƒæ ¼ `[rowj,
colj]` æ˜¯è¢«ç…§äº®çš„ï¼Œåˆ™æŸ¥è¯¢ç»“æœä¸º `1` ï¼Œå¦åˆ™ä¸º `0` ã€‚åœ¨ç¬¬ `j` æ¬¡æŸ¥è¯¢ä¹‹å [æŒ‰ç…§æŸ¥è¯¢çš„é¡ºåº] ï¼Œ**å…³é—­** ä½äºå•å…ƒæ ¼
`grid[rowj][colj]` ä¸ŠåŠç›¸é‚» 8 ä¸ªæ–¹å‘ä¸Šï¼ˆä¸å•å…ƒæ ¼ `grid[rowi][coli]` å…±äº«è§’æˆ–è¾¹ï¼‰çš„ä»»ä½•ç¯ã€‚

è¿”å›ä¸€ä¸ªæ•´æ•°æ•°ç»„ `ans` ä½œä¸ºç­”æ¡ˆï¼Œ `ans[j]` åº”ç­‰äºç¬¬ `j` æ¬¡æŸ¥è¯¢ `queries[j]` çš„ç»“æœï¼Œ`1` è¡¨ç¤ºç…§äº®ï¼Œ`0`
è¡¨ç¤ºæœªç…§äº®ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/08/19/illu_1.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 5, lamps = [[0,0],[4,4]], queries = [[1,1],[1,0]]
> 
> **è¾“å‡ºï¼š**[1,0]
> 
> **è§£é‡Šï¼š** æœ€åˆæ‰€æœ‰ç¯éƒ½æ˜¯å…³é—­çš„ã€‚åœ¨æ‰§è¡ŒæŸ¥è¯¢ä¹‹å‰ï¼Œæ‰“å¼€ä½äº [0, 0] å’Œ [4, 4] çš„ç¯ã€‚ç¬¬ 0 æ¬¡æŸ¥è¯¢æ£€æŸ¥ grid[1][1] æ˜¯å¦è¢«ç…§äº®ï¼ˆè“è‰²æ–¹æ¡†ï¼‰ã€‚è¯¥å•å…ƒæ ¼è¢«ç…§äº®ï¼Œæ‰€ä»¥ ans[0] = 1 ã€‚ç„¶åï¼Œå…³é—­çº¢è‰²æ–¹æ¡†ä¸­çš„æ‰€æœ‰ç¯ã€‚
> 
> ![](https://assets.leetcode.com/uploads/2020/08/19/illu_step1.jpg)
> 
> ç¬¬ 1 æ¬¡æŸ¥è¯¢æ£€æŸ¥ grid[1][0] æ˜¯å¦è¢«ç…§äº®ï¼ˆè“è‰²æ–¹æ¡†ï¼‰ã€‚è¯¥å•å…ƒæ ¼æ²¡æœ‰è¢«ç…§äº®ï¼Œæ‰€ä»¥ ans[1] = 0 ã€‚ç„¶åï¼Œå…³é—­çº¢è‰²çŸ©å½¢ä¸­çš„æ‰€æœ‰ç¯ã€‚
> 
> ![](https://assets.leetcode.com/uploads/2020/08/19/illu_step2.jpg)
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 5, lamps = [[0,0],[4,4]], queries = [[1,1],[1,1]]
> 
> **è¾“å‡ºï¼š**[1,1]
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 5, lamps = [[0,0],[0,4]], queries = [[0,4],[0,1],[1,4]]
> 
> **è¾“å‡ºï¼š**[1,1,0]
> 
> 



**æç¤ºï¼š**

  * `1 <= n <= 10^9`
  * `0 <= lamps.length <= 20000`
  * `0 <= queries.length <= 20000`
  * `lamps[i].length == 2`
  * `0 <= rowi, coli < n`
  * `queries[j].length == 2`
  * `0 <= rowj, colj < n`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 51 | [N çš‡å](https://leetcode.com/problems/n-queens) | [[âœ“]](https://2xiao.github.io/leetcode-js/leetcode/problem/0051) |  [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å›æº¯`](/leetcode/outline/tag/backtracking.md) | <font color=#ff334b>Hard</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
