---
title: 639. è§£ç æ–¹æ³• II
description: LeetCode 639. è§£ç æ–¹æ³• IIé¢˜è§£ï¼ŒDecode Ways IIï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 639. è§£ç æ–¹æ³• II
  - è§£ç æ–¹æ³• II
  - Decode Ways II
  - è§£é¢˜æ€è·¯
  - å­—ç¬¦ä¸²
  - åŠ¨æ€è§„åˆ’
---

# 639. è§£ç æ–¹æ³• II

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/decode-ways-ii) [`LeetCode`](https://leetcode.com/problems/decode-ways-ii)

## é¢˜ç›®

A message containing letters from `A-Z` can be **encoded** into numbers using
the following mapping:

> 
> 
> 
> 
> 
> 'A' -> "1"
> 
> 'B' -> "2"
> 
> ...
> 
> 'Z' -> "26"
> 
> 

To **decode** an encoded message, all the digits must be grouped then mapped
back into letters using the reverse of the mapping above (there may be
multiple ways). For example, `"11106"` can be mapped into:

  * `"AAJF"` with the grouping `(1 1 10 6)`
  * `"KJF"` with the grouping `(11 10 6)`

Note that the grouping `(1 11 06)` is invalid because `"06"` cannot be mapped
into `'F'` since `"6"` is different from `"06"`.

**In addition** to the mapping above, an encoded message may contain the `'*'`
character, which can represent any digit from `'1'` to `'9'` (`'0'` is
excluded). For example, the encoded message `"1*"` may represent any of the
encoded messages `"11"`, `"12"`, `"13"`, `"14"`, `"15"`, `"16"`, `"17"`,
`"18"`, or `"19"`. Decoding `"1*"` is equivalent to decoding **any** of the
encoded messages it can represent.

Given a string `s` consisting of digits and `'*'` characters, return
_the**number** of ways to **decode** it_.

Since the answer may be very large, return it **modulo** `109 + 7`.



**Example 1:**

> Input: s = "*"
> 
> Output: 9
> 
> Explanation: The encoded message can represent any of the encoded messages "1", "2", "3", "4", "5", "6", "7", "8", or "9".
> 
> Each of these can be decoded to the strings "A", "B", "C", "D", "E", "F", "G", "H", and "I" respectively.
> 
> Hence, there are a total of 9 ways to decode "*".

**Example 2:**

> Input: s = "1*"
> 
> Output: 18
> 
> Explanation: The encoded message can represent any of the encoded messages "11", "12", "13", "14", "15", "16", "17", "18", or "19".
> 
> Each of these encoded messages have 2 ways to be decoded (e.g. "11" can be decoded to "AA" or "K").
> 
> Hence, there are a total of 9 * 2 = 18 ways to decode "1*".

**Example 3:**

> Input: s = "2*"
> 
> Output: 15
> 
> Explanation: The encoded message can represent any of the encoded messages "21", "22", "23", "24", "25", "26", "27", "28", or "29".
> 
> "21", "22", "23", "24", "25", and "26" have 2 ways of being decoded, but "27", "28", and "29" only have 1 way.
> 
> Hence, there are a total of (6 * 2) + (3 * 1) = 12 + 3 = 15 ways to decode "2*".

**Constraints:**

  * `1 <= s.length <= 10^5`
  * `s[i]` is a digit or `'*'`.


## é¢˜ç›®å¤§æ„

ä¸€æ¡åŒ…å«å­—æ¯ `A-Z` çš„æ¶ˆæ¯é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼è¿›è¡Œäº† **ç¼–ç ** ï¼š

> 
> 
> 
> 
> 
> 'A' -> "1"
> 
> 'B' -> "2"
> 
> ...
> 
> 'Z' -> "26"

è¦ **è§£ç ** ä¸€æ¡å·²ç¼–ç çš„æ¶ˆæ¯ï¼Œæ‰€æœ‰çš„æ•°å­—éƒ½å¿…é¡»åˆ†ç»„ï¼Œç„¶åæŒ‰åŸæ¥çš„ç¼–ç æ–¹æ¡ˆåå‘æ˜ å°„å›å­—æ¯ï¼ˆå¯èƒ½å­˜åœ¨å¤šç§æ–¹å¼ï¼‰ã€‚ä¾‹å¦‚ï¼Œ`"11106"` å¯ä»¥æ˜ å°„ä¸ºï¼š

  * `"AAJF"` å¯¹åº”åˆ†ç»„ `(1 1 10 6)`
  * `"KJF"` å¯¹åº”åˆ†ç»„ `(11 10 6)`

æ³¨æ„ï¼Œåƒ `(1 11 06)` è¿™æ ·çš„åˆ†ç»„æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸º `"06"` ä¸å¯ä»¥æ˜ å°„ä¸º `'F'` ï¼Œå› ä¸º `"6"` ä¸ `"06"` ä¸åŒã€‚

**é™¤äº†** ä¸Šé¢æè¿°çš„æ•°å­—å­—æ¯æ˜ å°„æ–¹æ¡ˆï¼Œç¼–ç æ¶ˆæ¯ä¸­å¯èƒ½åŒ…å« `'*'` å­—ç¬¦ï¼Œå¯ä»¥è¡¨ç¤ºä» `'1'` åˆ° `'9'` çš„ä»»ä¸€æ•°å­—ï¼ˆä¸åŒ…æ‹¬
`'0'`ï¼‰ã€‚ä¾‹å¦‚ï¼Œç¼–ç å­—ç¬¦ä¸² `"1*"` å¯ä»¥è¡¨ç¤º
`"11"`ã€`"12"`ã€`"13"`ã€`"14"`ã€`"15"`ã€`"16"`ã€`"17"`ã€`"18"` æˆ– `"19"` ä¸­çš„ä»»æ„ä¸€æ¡æ¶ˆæ¯ã€‚å¯¹
`"1*"` è¿›è¡Œè§£ç ï¼Œç›¸å½“äºè§£ç è¯¥å­—ç¬¦ä¸²å¯ä»¥è¡¨ç¤ºçš„ä»»ä½•ç¼–ç æ¶ˆæ¯ã€‚

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œç”±æ•°å­—å’Œ `'*'` å­—ç¬¦ç»„æˆï¼Œè¿”å› **è§£ç ** è¯¥å­—ç¬¦ä¸²çš„æ–¹æ³• **æ•°ç›®** ã€‚

ç”±äºç­”æ¡ˆæ•°ç›®å¯èƒ½éå¸¸å¤§ï¼Œè¿”å› `109 + 7` çš„ **æ¨¡**  ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** s = "*"
> 
> **è¾“å‡ºï¼š** 9
> 
> **è§£é‡Šï¼š** è¿™ä¸€æ¡ç¼–ç æ¶ˆæ¯å¯ä»¥è¡¨ç¤º "1"ã€"2"ã€"3"ã€"4"ã€"5"ã€"6"ã€"7"ã€"8" æˆ– "9" ä¸­çš„ä»»æ„ä¸€æ¡ã€‚
> 
> å¯ä»¥åˆ†åˆ«è§£ç æˆå­—ç¬¦ä¸² "A"ã€"B"ã€"C"ã€"D"ã€"E"ã€"F"ã€"G"ã€"H" å’Œ "I" ã€‚
> 
> å› æ­¤ï¼Œ"*" æ€»å…±æœ‰ 9 ç§è§£ç æ–¹æ³•ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** s = "1*"
> 
> **è¾“å‡ºï¼š** 18
> 
> **è§£é‡Šï¼š** è¿™ä¸€æ¡ç¼–ç æ¶ˆæ¯å¯ä»¥è¡¨ç¤º "11"ã€"12"ã€"13"ã€"14"ã€"15"ã€"16"ã€"17"ã€"18" æˆ– "19" ä¸­çš„ä»»æ„ä¸€æ¡ã€‚
> 
> æ¯ç§æ¶ˆæ¯éƒ½å¯ä»¥ç”± 2 ç§æ–¹æ³•è§£ç ï¼ˆä¾‹å¦‚ï¼Œ"11" å¯ä»¥è§£ç æˆ "AA" æˆ– "K"ï¼‰ã€‚
> 
> å› æ­¤ï¼Œ"1*" å…±æœ‰ 9 * 2 = 18 ç§è§£ç æ–¹æ³•ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** s = "2*"
> 
> **è¾“å‡ºï¼š** 15
> 
> **è§£é‡Šï¼š** è¿™ä¸€æ¡ç¼–ç æ¶ˆæ¯å¯ä»¥è¡¨ç¤º "21"ã€"22"ã€"23"ã€"24"ã€"25"ã€"26"ã€"27"ã€"28" æˆ– "29" ä¸­çš„ä»»æ„ä¸€æ¡ã€‚
> 
> "21"ã€"22"ã€"23"ã€"24"ã€"25" å’Œ "26" ç”± 2 ç§è§£ç æ–¹æ³•ï¼Œä½† "27"ã€"28" å’Œ "29" ä»…æœ‰ 1 ç§è§£ç æ–¹æ³•ã€‚
> 
> å› æ­¤ï¼Œ"2*" å…±æœ‰ (6 * 2) + (3 * 1) = 12 + 3 = 15 ç§è§£ç æ–¹æ³•ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= s.length <= 10^5`
  * `s[i]` æ˜¯ `0 - 9` ä¸­çš„ä¸€ä½æ•°å­—æˆ–å­—ç¬¦ `'*'`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 91 | è§£ç æ–¹æ³• | [[âœ“]](/problem/0091.md) |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/decode-ways) [ğŸ”—](https://leetcode.com/problems/decode-ways) |
| 1977 | åˆ’åˆ†æ•°å­—çš„æ–¹æ¡ˆæ•° |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`åç¼€æ•°ç»„`](/tag/suffix-array.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/number-of-ways-to-separate-numbers) [ğŸ”—](https://leetcode.com/problems/number-of-ways-to-separate-numbers) |
| 2147 | åˆ†éš”é•¿å»Šçš„æ–¹æ¡ˆæ•° |  |  [`æ•°å­¦`](/tag/math.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/number-of-ways-to-divide-a-long-corridor) [ğŸ”—](https://leetcode.com/problems/number-of-ways-to-divide-a-long-corridor) |