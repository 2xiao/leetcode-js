# [3245. äº¤æ›¿ç»„ III](https://leetcode.com/problems/alternating-groups-iii)

ðŸ”´ <font color=#ff334b>Hard</font>&emsp; ðŸ”–&ensp; [`æ ‘çŠ¶æ•°ç»„`](/leetcode/outline/tag/binary-indexed-tree.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md)&emsp; ðŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/alternating-groups-iii)


## é¢˜ç›®

There are some red and blue tiles arranged circularly. You are given an array
of integers `colors` and a 2D integers array `queries`.

The color of tile `i` is represented by `colors[i]`:

  * `colors[i] == 0` means that tile `i` is **red**.
  * `colors[i] == 1` means that tile `i` is **blue**.

An **alternating** group is a contiguous subset of tiles in the circle with
**alternating** colors (each tile in the group except the first and last one
has a different color from its **adjacent** tiles in the group).

You have to process queries of two types:

  * `queries[i] = [1, sizei]`, determine the count of **alternating** groups with size `sizei`.
  * `queries[i] = [2, indexi, colori]`, change `colors[indexi]` to `colori`.

Return an array `answer` containing the results of the queries of the first
type _in order_.

**Note** that since `colors` represents a **circle** , the **first** and the
**last** tiles are considered to be next to each other.



**Example 1:**

**Input:** colors = [0,1,1,0,1], queries = [[2,1,0],[1,4]]

**Output:** [2]

**Explanation:**

**![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-14-44.png)**

First query:

Change `colors[1]` to 0.

![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-20-25.png)

Second query:

Count of the alternating groups with size 4:

![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-25-02-2.png)![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-24-12.png)

**Example 2:**

**Input:** colors = [0,0,1,0,1,1], queries = [[1,3],[2,3,0],[1,5]]

**Output:** [2,0]

**Explanation:**

![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-35-50.png)

First query:

Count of the alternating groups with size 3:

![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-37-13.png)![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-36-40.png)

Second query: `colors` will not change.

Third query: There is no alternating group with size 5.



**Constraints:**

  * `4 <= colors.length <= 5 * 10^4`
  * `0 <= colors[i] <= 1`
  * `1 <= queries.length <= 5 * 10^4`
  * `queries[i][0] == 1` or `queries[i][0] == 2`
  * For all `i` that: 
> 
> * `queries[i][0] == 1`: `queries[i].length == 2`, `3 <= queries[i][1] <= colors.length - 1`
> 
> * `queries[i][0] == 2`: `queries[i].length == 3`, `0 <= queries[i][1] <= colors.length - 1`, `0 <= queries[i][2] <= 1`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `colors` å’Œä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `queries` ã€‚`colors`è¡¨ç¤ºä¸€ä¸ªç”±çº¢è‰²å’Œè“è‰²ç“·ç –ç»„æˆçš„çŽ¯ï¼Œç¬¬ `i` å—ç“·ç –çš„é¢œè‰²ä¸º
`colors[i]` ï¼š

  * `colors[i] == 0` è¡¨ç¤ºç¬¬ `i` å—ç“·ç –çš„é¢œè‰²æ˜¯ **çº¢è‰²**  ã€‚
  * `colors[i] == 1` è¡¨ç¤ºç¬¬ `i` å—ç“·ç –çš„é¢œè‰²æ˜¯ **è“è‰²**  ã€‚

çŽ¯ä¸­è¿žç»­è‹¥å¹²å—ç“·ç –çš„é¢œè‰²å¦‚æžœæ˜¯ **äº¤æ›¿**  é¢œè‰²ï¼ˆä¹Ÿå°±æ˜¯è¯´è¿™ç»„ç“·ç –ä¸­é™¤äº†ç¬¬ä¸€å—å’Œæœ€åŽä¸€å—ç“·ç –ä»¥å¤–ï¼Œä¸­é—´ç“·ç –çš„é¢œè‰²ä¸Žå®ƒ**  å·¦è¾¹** å’Œ **å³è¾¹**
çš„é¢œè‰²éƒ½ä¸åŒï¼‰ï¼Œé‚£ä¹ˆå®ƒè¢«ç§°ä¸ºä¸€ä¸ª **äº¤æ›¿ç»„** ã€‚

ä½ éœ€è¦å¤„ç†ä¸¤ç§ç±»åž‹çš„æŸ¥è¯¢ï¼š

  * `queries[i] = [1, sizei]`ï¼Œç¡®å®šå¤§å°ä¸º`sizei`çš„******äº¤æ›¿ç»„** çš„æ•°é‡ã€‚
  * `queries[i] = [2, indexi, colori]`ï¼Œå°†`colors[indexi]`æ›´æ”¹ä¸º`colori`ã€‚

è¿”å›žæ•°ç»„ `answer`ï¼Œæ•°ç»„ä¸­æŒ‰é¡ºåºåŒ…å«ç¬¬ä¸€ç§ç±»åž‹æŸ¥è¯¢çš„ç»“æžœã€‚

**æ³¨æ„**  ï¼Œç”±äºŽ `colors` è¡¨ç¤ºä¸€ä¸ª **çŽ¯**  ï¼Œ**ç¬¬ä¸€å—**  ç“·ç –å’Œ **æœ€åŽä¸€å—**  ç“·ç –æ˜¯ç›¸é‚»çš„ã€‚



**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** colors = [0,1,1,0,1], queries = [[2,1,0],[1,4]]

**è¾“å‡ºï¼š**[2]

**è§£é‡Šï¼š**

ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼š

å°† `colors[1]` æ”¹ä¸º 0ã€‚

![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-20-25.png)

ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼š

ç»Ÿè®¡å¤§å°ä¸º 4 çš„äº¤æ›¿ç»„çš„æ•°é‡ï¼š

![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-25-02-2.png)![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-24-12.png)

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** colors = [0,0,1,0,1,1], queries = [[1,3],[2,3,0],[1,5]]

**è¾“å‡ºï¼š**[2,0]

**è§£é‡Šï¼š**

![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-35-50.png)

ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼š

ç»Ÿè®¡å¤§å°ä¸º 3 çš„äº¤æ›¿ç»„çš„æ•°é‡ã€‚

![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-37-13.png)![](https://assets.leetcode.com/uploads/2024/06/03/screenshot-
from-2024-06-03-20-36-40.png)

ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼š`colors`ä¸å˜ã€‚

ç¬¬ä¸‰æ¬¡æŸ¥è¯¢ï¼šä¸å­˜åœ¨å¤§å°ä¸º 5 çš„äº¤æ›¿ç»„ã€‚



**æç¤ºï¼š**

  * `4 <= colors.length <= 5 * 10^4`
  * `0 <= colors[i] <= 1`
  * `1 <= queries.length <= 5 * 10^4`
  * `queries[i][0] == 1` æˆ– `queries[i][0] == 2`
  * å¯¹äºŽæ‰€æœ‰çš„`i`ï¼š 
> 
> * `queries[i][0] == 1`ï¼š `queries[i].length == 2`, `3 <= queries[i][1] <= colors.length - 1`
> 
> * `queries[i][0] == 2`ï¼š `queries[i].length == 3`, `0 <= queries[i][1] <= colors.length - 1`, `0 <= queries[i][2] <= 1`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æž

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```