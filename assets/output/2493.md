# [2493. å°†èŠ‚ç‚¹åˆ†æˆå°½å¯èƒ½å¤šçš„ç»„](https://leetcode.com/problems/divide-nodes-into-the-maximum-number-of-groups)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/leetcode/outline/tag/breadth-first-search.md) [`å¹¶æŸ¥é›†`](/leetcode/outline/tag/union-find.md) [`å›¾`](/leetcode/outline/tag/graph.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/divide-nodes-into-the-maximum-number-of-groups)


## é¢˜ç›®

You are given a positive integer `n` representing the number of nodes in an
**undirected** graph. The nodes are labeled from `1` to `n`.

You are also given a 2D integer array `edges`, where `edges[i] = [ai, bi]`
indicates that there is a **bidirectional** edge between nodes `ai` and `bi`.
**Notice** that the given graph may be disconnected.

Divide the nodes of the graph into `m` groups (**1-indexed**) such that:

  * Each node in the graph belongs to exactly one group.
  * For every pair of nodes in the graph that are connected by an edge `[ai, bi]`, if `ai` belongs to the group with index `x`, and `bi` belongs to the group with index `y`, then `|y - x| = 1`.

Return _the maximum number of groups (i.e., maximum_`m` _) into which you can
divide the nodes_. Return `-1` _if it is impossible to group the nodes with
the given conditions_.



**Example 1:**

![](https://assets.leetcode.com/uploads/2022/10/13/example1.png)

> Input: n = 6, edges = [[1,2],[1,4],[1,5],[2,6],[2,3],[4,6]]
> 
> Output: 4
> 
> Explanation: As shown in the image we:
> - Add node 5 to the first group.
> - Add node 1 to the second group.
> - Add nodes 2 and 4 to the third group.
> - Add nodes 3 and 6 to the fourth group.
> 
> We can see that every edge is satisfied.
> 
> It can be shown that that if we create a fifth group and move any node from the third or fourth group to it, at least on of the edges will not be satisfied.

**Example 2:**

> Input: n = 3, edges = [[1,2],[2,3],[3,1]]
> 
> Output: -1
> 
> Explanation: If we add node 1 to the first group, node 2 to the second group, and node 3 to the third group to satisfy the first two edges, we can see that the third edge will not be satisfied.
> 
> It can be shown that no grouping is possible.

**Constraints:**

  * `1 <= n <= 500`
  * `1 <= edges.length <= 10^4`
  * `edges[i].length == 2`
  * `1 <= ai, bi <= n`
  * `ai != bi`
  * There is at most one edge between any pair of vertices.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° `n` ï¼Œè¡¨ç¤ºä¸€ä¸ª **æ— å‘**  å›¾ä¸­çš„èŠ‚ç‚¹æ•°ç›®ï¼ŒèŠ‚ç‚¹ç¼–å·ä» `1` åˆ° `n` ã€‚

åŒæ—¶ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `edges` ï¼Œå…¶ä¸­ `edges[i] = [ai, bi]` è¡¨ç¤ºèŠ‚ç‚¹ `ai` å’Œ `bi` ä¹‹é—´æœ‰ä¸€æ¡ **åŒå‘**
è¾¹ã€‚æ³¨æ„ç»™å®šçš„å›¾å¯èƒ½æ˜¯ä¸è¿é€šçš„ã€‚

è¯·ä½ å°†å›¾åˆ’åˆ†ä¸º `m` ä¸ªç»„ï¼ˆç¼–å·ä» **1**  å¼€å§‹ï¼‰ï¼Œæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

  * å›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½åªå±äºä¸€ä¸ªç»„ã€‚
  * å›¾ä¸­æ¯æ¡è¾¹è¿æ¥çš„ä¸¤ä¸ªç‚¹ `[ai, bi]` ï¼Œå¦‚æœ `ai` å±äºç¼–å·ä¸º `x` çš„ç»„ï¼Œ`bi` å±äºç¼–å·ä¸º `y` çš„ç»„ï¼Œé‚£ä¹ˆ `|y - x| = 1` ã€‚

è¯·ä½ è¿”å›æœ€å¤šå¯ä»¥å°†èŠ‚ç‚¹åˆ†ä¸ºå¤šå°‘ä¸ªç»„ï¼ˆä¹Ÿå°±æ˜¯æœ€å¤§çš„ _ _`m` ï¼‰ã€‚å¦‚æœæ²¡åŠæ³•åœ¨ç»™å®šæ¡ä»¶ä¸‹åˆ†ç»„ï¼Œè¯·ä½ è¿”å› `-1` ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2022/10/13/example1.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 6, edges = [[1,2],[1,4],[1,5],[2,6],[2,3],[4,6]]
> 
> **è¾“å‡ºï¼š** 4
> 
> **è§£é‡Šï¼š** å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ
> - èŠ‚ç‚¹ 5 åœ¨ç¬¬ä¸€ä¸ªç»„ã€‚
> - èŠ‚ç‚¹ 1 åœ¨ç¬¬äºŒä¸ªç»„ã€‚
> - èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 4 åœ¨ç¬¬ä¸‰ä¸ªç»„ã€‚
> - èŠ‚ç‚¹ 3 å’ŒèŠ‚ç‚¹ 6 åœ¨ç¬¬å››ä¸ªç»„ã€‚
> 
> æ‰€æœ‰è¾¹éƒ½æ»¡è¶³é¢˜ç›®è¦æ±‚ã€‚
> 
> å¦‚æœæˆ‘ä»¬åˆ›å»ºç¬¬äº”ä¸ªç»„ï¼Œå°†ç¬¬ä¸‰ä¸ªç»„æˆ–è€…ç¬¬å››ä¸ªç»„ä¸­ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹æ”¾åˆ°ç¬¬äº”ä¸ªç»„ï¼Œè‡³å°‘æœ‰ä¸€æ¡è¾¹è¿æ¥çš„ä¸¤ä¸ªèŠ‚ç‚¹æ‰€å±çš„ç»„ç¼–å·ä¸ç¬¦åˆé¢˜ç›®è¦æ±‚ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 3, edges = [[1,2],[2,3],[3,1]]
> 
> **è¾“å‡ºï¼š** -1
> 
> **è§£é‡Šï¼š** å¦‚æœæˆ‘ä»¬å°†èŠ‚ç‚¹ 1 æ”¾å…¥ç¬¬ä¸€ä¸ªç»„ï¼ŒèŠ‚ç‚¹ 2 æ”¾å…¥ç¬¬äºŒä¸ªç»„ï¼ŒèŠ‚ç‚¹ 3 æ”¾å…¥ç¬¬ä¸‰ä¸ªç»„ï¼Œå‰ä¸¤æ¡è¾¹æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œä½†ç¬¬ä¸‰æ¡è¾¹ä¸æ»¡è¶³é¢˜ç›®è¦æ±‚ã€‚
> 
> æ²¡æœ‰ä»»ä½•ç¬¦åˆé¢˜ç›®è¦æ±‚çš„åˆ†ç»„æ–¹å¼ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= n <= 500`
  * `1 <= edges.length <= 10^4`
  * `edges[i].length == 2`
  * `1 <= ai, bi <= n`
  * `ai != bi`
  * ä¸¤ä¸ªç‚¹ä¹‹é—´è‡³å¤šåªæœ‰ä¸€æ¡è¾¹ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®
- [102. äºŒå‰æ ‘çš„å±‚åºéå†](./0102.md)
- [785. åˆ¤æ–­äºŒåˆ†å›¾](https://leetcode.com/problems/is-graph-bipartite)
- [2608. å›¾ä¸­çš„æœ€çŸ­ç¯](https://leetcode.com/problems/shortest-cycle-in-a-graph)

::::
