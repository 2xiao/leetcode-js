# [393. UTF-8 ç¼–ç éªŒè¯](https://2xiao.github.io/leetcode-js/problem/0393.html)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/utf-8-validation) [`LeetCode`](https://leetcode.com/problems/utf-8-validation)

## é¢˜ç›®

Given an integer array `data` representing the data, return whether it is a
valid **UTF-8** encoding (i.e. it translates to a sequence of valid UTF-8
encoded characters).

A character in **UTF8** can be from **1 to 4 bytes** long, subjected to the
following rules:

  1. For a **1-byte** character, the first bit is a `0`, followed by its Unicode code.
  2. For an **n-bytes** character, the first `n` bits are all one's, the `n + 1` bit is `0`, followed by `n - 1` bytes with the most significant `2` bits being `10`.

This is how the UTF-8 encoding would work:

> 
> 
> 
> 
> 
> > 
>  Number of Bytes   |> 
> > 
> UTF-8 Octet Sequence
> 
> > 
> > 
> > 
> > 
> > 
>    |> 
> > 
> > 
>   (binary)
> 
>    --------------------+-----------------------------------------
> 
> > 
> > 
> > 
> 1> 
> > 
>   |   0xxxxxxx
> 
> > 
> > 
> > 
> 2> 
> > 
>   |   110xxxxx 10xxxxxx
> 
> > 
> > 
> > 
> 3> 
> > 
>   |   1110xxxx 10xxxxxx 10xxxxxx
> 
> > 
> > 
> > 
> 4> 
> > 
>   |   11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
> 
> 

`x` denotes a bit in the binary form of a byte that may be either `0` or `1`.

**Note:** The input is an array of integers. Only the **least significant 8
bits** of each integer is used to store the data. This means each integer
represents only 1 byte of data.



**Example 1:**

> Input: data = [197,130,1]
> 
> Output: true
> 
> Explanation: data represents the octet sequence: 11000101 10000010 00000001.
> 
> It is a valid utf-8 encoding for a 2-bytes character followed by a 1-byte character.

**Example 2:**

> Input: data = [235,140,4]
> 
> Output: false
> 
> Explanation: data represented the octet sequence: 11101011 10001100 00000100.
> 
> The first 3 bits are all one's and the 4th bit is 0 means it is a 3-bytes character.
> 
> The next byte is a continuation byte which starts with 10 and that's correct.
> 
> But the second continuation byte does not start with 10, so it is invalid.

**Constraints:**

  * `1 <= data.length <= 2 * 10^4`
  * `0 <= data[i] <= 255`


## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªè¡¨ç¤ºæ•°æ®çš„æ•´æ•°æ•°ç»„ `data` ï¼Œè¿”å›å®ƒæ˜¯å¦ä¸ºæœ‰æ•ˆçš„ **UTF-8** ç¼–ç ã€‚

**UTF-8** ä¸­çš„ä¸€ä¸ªå­—ç¬¦å¯èƒ½çš„é•¿åº¦ä¸º **1 åˆ° 4 å­—èŠ‚** ï¼Œéµå¾ªä»¥ä¸‹çš„è§„åˆ™ï¼š

  1. å¯¹äº **1 å­—èŠ‚**  çš„å­—ç¬¦ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º 0 ï¼Œåé¢ 7 ä½ä¸ºè¿™ä¸ªç¬¦å·çš„ unicode ç ã€‚
  2. å¯¹äº **n å­—èŠ‚**  çš„å­—ç¬¦ (n > 1)ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰ n ä½éƒ½è®¾ä¸º1ï¼Œç¬¬ n+1 ä½è®¾ä¸º 0 ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º 10 ã€‚å‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„ unicode ç ã€‚

è¿™æ˜¯ UTF-8 ç¼–ç çš„å·¥ä½œæ–¹å¼ï¼š

> 
> 
> 
> 
> 
> > 
>   Number of Bytes  |> 
> > 
> UTF-8 octet sequence
> 
> > 
> > 
> > 
> > 
> > 
>    |> 
> > 
> > 
>   (binary)
> 
>    --------------------+---------------------------------------------
> 
> > 
> > 
> > 
> 1> 
> > 
>   | 0xxxxxxx
> 
> > 
> > 
> > 
> 2> 
> > 
>   | 110xxxxx 10xxxxxx
> 
> > 
> > 
> > 
> 3> 
> > 
>   | 1110xxxx 10xxxxxx 10xxxxxx
> 
> > 
> > 
> > 
> 4> 
> > 
>   | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
> 
> 

`x` è¡¨ç¤ºäºŒè¿›åˆ¶å½¢å¼çš„ä¸€ä½ï¼Œå¯ä»¥æ˜¯ `0` æˆ– `1`ã€‚

**æ³¨æ„ï¼š** è¾“å…¥æ˜¯æ•´æ•°æ•°ç»„ã€‚åªæœ‰æ¯ä¸ªæ•´æ•°çš„ **æœ€ä½ 8 ä¸ªæœ‰æ•ˆä½** ç”¨æ¥å­˜å‚¨æ•°æ®ã€‚è¿™æ„å‘³ç€æ¯ä¸ªæ•´æ•°åªè¡¨ç¤º 1 å­—èŠ‚çš„æ•°æ®ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** data = [197,130,1]
> 
> **è¾“å‡ºï¼š** true
> 
> **è§£é‡Šï¼š** æ•°æ®è¡¨ç¤ºå­—èŠ‚åºåˆ—:**11000101 10000010 00000001** ã€‚
> 
> è¿™æ˜¯æœ‰æ•ˆçš„ utf-8 ç¼–ç ï¼Œä¸ºä¸€ä¸ª 2 å­—èŠ‚å­—ç¬¦ï¼Œè·Ÿç€ä¸€ä¸ª 1 å­—èŠ‚å­—ç¬¦ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** data = [235,140,4]
> 
> **è¾“å‡ºï¼š** false
> 
> **è§£é‡Šï¼š** æ•°æ®è¡¨ç¤º 8 ä½çš„åºåˆ—: **11101011 10001100 00000100**.
> 
> å‰ 3 ä½éƒ½æ˜¯ 1 ï¼Œç¬¬ 4 ä½ä¸º 0 è¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ª 3 å­—èŠ‚å­—ç¬¦ã€‚
> 
> ä¸‹ä¸€ä¸ªå­—èŠ‚æ˜¯å¼€å¤´ä¸º 10 çš„å»¶ç»­å­—èŠ‚ï¼Œè¿™æ˜¯æ­£ç¡®çš„ã€‚
> 
> ä½†ç¬¬äºŒä¸ªå»¶ç»­å­—èŠ‚ä¸ä»¥ 10 å¼€å¤´ï¼Œæ‰€ä»¥æ˜¯ä¸ç¬¦åˆè§„åˆ™çš„ã€‚
> 
> 



**æç¤º:**

  * `1 <= data.length <= 2 * 10^4`
  * `0 <= data[i] <= 255`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```