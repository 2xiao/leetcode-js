# [1373. äºŒå‰æœç´¢å­æ ‘çš„æœ€å¤§é”®å€¼å’Œ](https://leetcode.com/problems/maximum-sum-bst-in-binary-tree)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/leetcode/outline/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/leetcode/outline/tag/depth-first-search.md) [`äºŒå‰æœç´¢æ ‘`](/leetcode/outline/tag/binary-search-tree.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) [`äºŒå‰æ ‘`](/leetcode/outline/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/maximum-sum-bst-in-binary-tree)


## é¢˜ç›®

Given a **binary tree** `root`, return _the maximum sum of all keys of**any**
sub-tree which is also a Binary Search Tree (BST)_.

Assume a BST is defined as follows:

  * The left subtree of a node contains only nodes with keys **less than** the node's key.
  * The right subtree of a node contains only nodes with keys **greater than** the node's key.
  * Both the left and right subtrees must also be binary search trees.



**Example 1:**

![](https://assets.leetcode.com/uploads/2020/01/30/sample_1_1709.png)

> Input: root = [1,4,3,2,4,2,5,null,null,null,null,null,null,4,6]
> 
> Output: 20
> 
> Explanation: Maximum sum in a valid Binary search tree is obtained in root node with key equal to 3.

**Example 2:**

![](https://assets.leetcode.com/uploads/2020/01/30/sample_2_1709.png)

> Input: root = [4,3,null,1,2]
> 
> Output: 2
> 
> Explanation: Maximum sum in a valid Binary search tree is obtained in a single root node with key equal to 2.

**Example 3:**

> Input: root = [-4,-2,-5]
> 
> Output: 0
> 
> Explanation: All values are negatives. Return an empty BST.

**Constraints:**

  * The number of nodes in the tree is in the range `[1, 4 * 104]`.
  * `-4 * 104 <= Node.val <= 4 * 10^4`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€æ£µä»¥ `root` ä¸ºæ ¹çš„ **äºŒå‰æ ‘** ï¼Œè¯·ä½ è¿”å› **ä»»æ„** äºŒå‰æœç´¢å­æ ‘çš„æœ€å¤§é”®å€¼å’Œã€‚

äºŒå‰æœç´¢æ ‘çš„å®šä¹‰å¦‚ä¸‹ï¼š

  * ä»»æ„èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸­çš„é”®å€¼éƒ½ **å°äº** æ­¤èŠ‚ç‚¹çš„é”®å€¼ã€‚
  * ä»»æ„èŠ‚ç‚¹çš„å³å­æ ‘ä¸­çš„é”®å€¼éƒ½ **å¤§äº** æ­¤èŠ‚ç‚¹çš„é”®å€¼ã€‚
  * ä»»æ„èŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode-cn.com/aliyun-lc-
upload/uploads/2020/03/07/sample_1_1709.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** root = [1,4,3,2,4,2,5,null,null,null,null,null,null,4,6]
> 
> **è¾“å‡ºï¼š** 20
> 
> **è§£é‡Šï¼š** é”®å€¼ä¸º 3 çš„å­æ ‘æ˜¯å’Œæœ€å¤§çš„äºŒå‰æœç´¢æ ‘ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode-cn.com/aliyun-lc-
upload/uploads/2020/03/07/sample_2_1709.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** root = [4,3,null,1,2]
> 
> **è¾“å‡ºï¼š** 2
> 
> **è§£é‡Šï¼š** é”®å€¼ä¸º 2 çš„å•èŠ‚ç‚¹å­æ ‘æ˜¯å’Œæœ€å¤§çš„äºŒå‰æœç´¢æ ‘ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** root = [-4,-2,-5]
> 
> **è¾“å‡ºï¼š** 0
> 
> **è§£é‡Šï¼š** æ‰€æœ‰èŠ‚ç‚¹é”®å€¼éƒ½ä¸ºè´Ÿæ•°ï¼Œå’Œæœ€å¤§çš„äºŒå‰æœç´¢æ ‘ä¸ºç©ºã€‚
> 
> 

**ç¤ºä¾‹ 4ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** root = [2,1,3]
> 
> **è¾“å‡ºï¼š** 6
> 
> 

**ç¤ºä¾‹ 5ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** root = [5,4,8,3,null,6,3]
> 
> **è¾“å‡ºï¼š** 7
> 
> 

**æç¤ºï¼š**

  * æ¯æ£µæ ‘æœ‰ `1` åˆ° `40000` ä¸ªèŠ‚ç‚¹ã€‚
  * æ¯ä¸ªèŠ‚ç‚¹çš„é”®å€¼åœ¨ `[-4 * 10^4 , 4 * 10^4]` ä¹‹é—´ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```