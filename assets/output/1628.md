---
title: 1628. 设计带解析函数的表达式树 🔒
description: LeetCode 1628. 设计带解析函数的表达式树 🔒题解，Design an Expression Tree With Evaluate Function，包含解题思路、复杂度分析以及完整的 JavaScript 代码实现。
keywords:
  - LeetCode
  - 1628. 设计带解析函数的表达式树 🔒
  - 设计带解析函数的表达式树
  - Design an Expression Tree With Evaluate Function
  - 解题思路
  - 栈
  - 树
  - 设计
  - 数组
  - 数学
  - 二叉树
---

# 1628. 设计带解析函数的表达式树 🔒

🟠 <font color=#ffb800>Medium</font>&emsp; 🔖&ensp; [`栈`](/tag/stack.md) [`树`](/tag/tree.md) [`设计`](/tag/design.md) [`数组`](/tag/array.md) [`数学`](/tag/math.md) [`二叉树`](/tag/binary-tree.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/design-an-expression-tree-with-evaluate-function) [`LeetCode`](https://leetcode.com/problems/design-an-expression-tree-with-evaluate-function)

## 题目

Given the `postfix` tokens of an arithmetic expression, build and return _the
binary expression tree that represents this expression._

**Postfix** notation is a notation for writing arithmetic expressions in which
the operands (numbers) appear before their operators. For example, the postfix
tokens of the expression `4*(5-(7+2))` are represented in the array `postfix =
["4","5","7","2","+","-","*"]`.

The class `Node` is an interface you should use to implement the binary
expression tree. The returned tree will be tested using the `evaluate`
function, which is supposed to evaluate the tree's value. You should not
remove the `Node` class; however, you can modify it as you wish, and you can
define other classes to implement it if needed.

A **[binary expression
tree](https://en.wikipedia.org/wiki/Binary_expression_tree)** is a kind of
binary tree used to represent arithmetic expressions. Each node of a binary
expression tree has either zero or two children. Leaf nodes (nodes with 0
children) correspond to operands (numbers), and internal nodes (nodes with two
children) correspond to the operators `'+'` (addition), `'-'` (subtraction),
`'*'` (multiplication), and `'/'` (division).

It's guaranteed that no subtree will yield a value that exceeds `10^9` in
absolute value, and all the operations are valid (i.e., no division by zero).

**Follow up:** Could you design the expression tree such that it is more
modular? For example, is your design able to support additional operators
without making changes to your existing `evaluate` implementation?



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1628.Design%20an%20Expression%20Tree%20With%20Evaluate%20Function/images/untitled-
diagram.png)

> Input: s = ["3","4","+","2","*","7","/"]
> 
> Output: 2
> 
> Explanation: this expression evaluates to the above binary tree with expression ((3+4)*2)/7) = 14/7 = 2.

**Example 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1628.Design%20an%20Expression%20Tree%20With%20Evaluate%20Function/images/untitled-
diagram2.png)

> Input: s = ["4","5","2","7","+","-","*"]
> 
> Output: -16
> 
> Explanation: this expression evaluates to the above binary tree with expression 4*(5-(2+7)) = 4*(-4) = -16.

**Constraints:**

  * `1 <= s.length < 100`
  * `s.length` is odd.
  * `s` consists of numbers and the characters `'+'`, `'-'`, `'*'`, and `'/'`.
  * If `s[i]` is a number, its integer representation is no more than `10^5`.
  * It is guaranteed that `s` is a valid expression.
  * The absolute value of the result and intermediate values will not exceed `10^9`.
  * It is guaranteed that no expression will include division by zero.


## 题目大意

给定一个算术表达式的后缀表示法的标记（token） `postfix` ，构造并返回该表达式对应的二叉表达式树。

**后缀** 表示法是一种将操作数写在运算符之前的表示法。例如，表达式 `4*(5-(2+7))` 的后缀表示法表示为数组 `postfix =
["4","5","7","2","+","-","*"]` 。

抽象类 `Node` 需要用于实现二叉表达式树。我们将通过 `evaluate` 函数来测试返回的树是否能够解析树中的值。你不可以移除 `Node`
类，但你可以按需修改此类，也可以定义其他类来实现它。

[**二叉表达式树**](https://en.wikipedia.org/wiki/Binary_expression_tree)是一种表达算术表达式的二叉树。二叉表达式树中的每一个节点都有零个或两个子节点。
叶节点（有 0 个子节点的节点）表示操作数，非叶节点（有 2 个子节点的节点）表示运算符： `'+'` （加）、 `'-'` （减）、 `'*'` （乘）和
`'/'` （除）。

我们保证任何子树对应值的绝对值不超过 `10^9` ，且所有操作都是有效的（即没有除以零的操作）

**进阶：**  你可以将表达式树设计得更模块化吗？例如，你的设计能够不修改现有的 `evaluate` 的实现就能支持更多的操作符吗？



**示例 1:**

**![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1628.Design%20an%20Expression%20Tree%20With%20Evaluate%20Function/images/untitled-
diagram.png)**

> 
> 
> 
> 
> 
> **输入：** s = ["3","4","+","2","*","7","/"]
> 
> **输出：** 2
> 
> **解释：** 此表达式可解析为上述二叉树，其对应表达式为 ((3+4)*2)/7) = 14/7 = 2.
> 
> 

**示例 2:**

**![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1628.Design%20an%20Expression%20Tree%20With%20Evaluate%20Function/images/untitled-
diagram2.png)**

> 
> 
> 
> 
> 
> **输入:** s = ["4","5","7","2","+","-","*"]
> 
> **输出:** -16
> 
> **解释:** 此表达式可解析为上述二叉树，其对应表达式为 4*(5-(2+7)) = 4*(-4) = -16.
> 
> 



**提示:**

  * `1 <= s.length < 100`
  * `s.length` 是奇数。
  * `s` 包含数字和字符 `'+'` 、 `'-'` 、 `'*'` 以及 `'/'` 。
  * 如果 `s[i]` 是数，则对应的整数不超过 `10^5` 。
  * `s` 保证是一个有效的表达式。
  * 结果值和所有过程值的绝对值均不超过 `10^9` 。
  * 保证表达式不包含除以零的操作。


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 | 力扣 |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 2313 | 二叉树中得到结果所需的最少翻转次数 🔒 |  |  [`树`](/tag/tree.md) [`深度优先搜索`](/tag/depth-first-search.md) [`动态规划`](/tag/dynamic-programming.md) `1+` | 🔴 | [🀄️](https://leetcode.cn/problems/minimum-flips-in-binary-tree-to-get-result) [🔗](https://leetcode.com/problems/minimum-flips-in-binary-tree-to-get-result) |
| 2331 | 计算布尔二叉树的值 | [[✓]](/problem/2331.md) |  [`树`](/tag/tree.md) [`深度优先搜索`](/tag/depth-first-search.md) [`二叉树`](/tag/binary-tree.md) | 🟢 | [🀄️](https://leetcode.cn/problems/evaluate-boolean-binary-tree) [🔗](https://leetcode.com/problems/evaluate-boolean-binary-tree) |