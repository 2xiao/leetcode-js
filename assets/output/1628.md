# [1628. è®¾è®¡å¸¦è§£æå‡½æ•°çš„è¡¨è¾¾å¼æ ‘ ğŸ”’](https://2xiao.github.io/leetcode-js/problem/1628.html)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`æ ‘`](/tag/tree.md) [`è®¾è®¡`](/tag/design.md) [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/design-an-expression-tree-with-evaluate-function) [`LeetCode`](https://leetcode.com/problems/design-an-expression-tree-with-evaluate-function)

## é¢˜ç›®

Given the `postfix` tokens of an arithmetic expression, build and return _the
binary expression tree that represents this expression._

**Postfix** notation is a notation for writing arithmetic expressions in which
the operands (numbers) appear before their operators. For example, the postfix
tokens of the expression `4*(5-(7+2))` are represented in the array `postfix =
["4","5","7","2","+","-","*"]`.

The class `Node` is an interface you should use to implement the binary
expression tree. The returned tree will be tested using the `evaluate`
function, which is supposed to evaluate the tree's value. You should not
remove the `Node` class; however, you can modify it as you wish, and you can
define other classes to implement it if needed.

A **[binary expression
tree](https://en.wikipedia.org/wiki/Binary_expression_tree)** is a kind of
binary tree used to represent arithmetic expressions. Each node of a binary
expression tree has either zero or two children. Leaf nodes (nodes with 0
children) correspond to operands (numbers), and internal nodes (nodes with two
children) correspond to the operators `'+'` (addition), `'-'` (subtraction),
`'*'` (multiplication), and `'/'` (division).

It's guaranteed that no subtree will yield a value that exceeds `10^9` in
absolute value, and all the operations are valid (i.e., no division by zero).

**Follow up:** Could you design the expression tree such that it is more
modular? For example, is your design able to support additional operators
without making changes to your existing `evaluate` implementation?



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1628.Design%20an%20Expression%20Tree%20With%20Evaluate%20Function/images/untitled-
diagram.png)

> Input: s = ["3","4","+","2","*","7","/"]
> 
> Output: 2
> 
> Explanation: this expression evaluates to the above binary tree with expression ((3+4)*2)/7) = 14/7 = 2.

**Example 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1628.Design%20an%20Expression%20Tree%20With%20Evaluate%20Function/images/untitled-
diagram2.png)

> Input: s = ["4","5","2","7","+","-","*"]
> 
> Output: -16
> 
> Explanation: this expression evaluates to the above binary tree with expression 4*(5-(2+7)) = 4*(-4) = -16.

**Constraints:**

  * `1 <= s.length < 100`
  * `s.length` is odd.
  * `s` consists of numbers and the characters `'+'`, `'-'`, `'*'`, and `'/'`.
  * If `s[i]` is a number, its integer representation is no more than `10^5`.
  * It is guaranteed that `s` is a valid expression.
  * The absolute value of the result and intermediate values will not exceed `10^9`.
  * It is guaranteed that no expression will include division by zero.


## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªç®—æœ¯è¡¨è¾¾å¼çš„åç¼€è¡¨ç¤ºæ³•çš„æ ‡è®°ï¼ˆtokenï¼‰ `postfix` ï¼Œæ„é€ å¹¶è¿”å›è¯¥è¡¨è¾¾å¼å¯¹åº”çš„äºŒå‰è¡¨è¾¾å¼æ ‘ã€‚

**åç¼€** è¡¨ç¤ºæ³•æ˜¯ä¸€ç§å°†æ“ä½œæ•°å†™åœ¨è¿ç®—ç¬¦ä¹‹å‰çš„è¡¨ç¤ºæ³•ã€‚ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ `4*(5-(2+7))` çš„åç¼€è¡¨ç¤ºæ³•è¡¨ç¤ºä¸ºæ•°ç»„ `postfix =
["4","5","7","2","+","-","*"]` ã€‚

æŠ½è±¡ç±» `Node` éœ€è¦ç”¨äºå®ç°äºŒå‰è¡¨è¾¾å¼æ ‘ã€‚æˆ‘ä»¬å°†é€šè¿‡ `evaluate` å‡½æ•°æ¥æµ‹è¯•è¿”å›çš„æ ‘æ˜¯å¦èƒ½å¤Ÿè§£ææ ‘ä¸­çš„å€¼ã€‚ä½ ä¸å¯ä»¥ç§»é™¤ `Node`
ç±»ï¼Œä½†ä½ å¯ä»¥æŒ‰éœ€ä¿®æ”¹æ­¤ç±»ï¼Œä¹Ÿå¯ä»¥å®šä¹‰å…¶ä»–ç±»æ¥å®ç°å®ƒã€‚

[**äºŒå‰è¡¨è¾¾å¼æ ‘**](https://en.wikipedia.org/wiki/Binary_expression_tree)æ˜¯ä¸€ç§è¡¨è¾¾ç®—æœ¯è¡¨è¾¾å¼çš„äºŒå‰æ ‘ã€‚äºŒå‰è¡¨è¾¾å¼æ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æœ‰é›¶ä¸ªæˆ–ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚
å¶èŠ‚ç‚¹ï¼ˆæœ‰ 0 ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼‰è¡¨ç¤ºæ“ä½œæ•°ï¼Œéå¶èŠ‚ç‚¹ï¼ˆæœ‰ 2 ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼‰è¡¨ç¤ºè¿ç®—ç¬¦ï¼š `'+'` ï¼ˆåŠ ï¼‰ã€ `'-'` ï¼ˆå‡ï¼‰ã€ `'*'` ï¼ˆä¹˜ï¼‰å’Œ
`'/'` ï¼ˆé™¤ï¼‰ã€‚

æˆ‘ä»¬ä¿è¯ä»»ä½•å­æ ‘å¯¹åº”å€¼çš„ç»å¯¹å€¼ä¸è¶…è¿‡ `10^9` ï¼Œä¸”æ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ‰æ•ˆçš„ï¼ˆå³æ²¡æœ‰é™¤ä»¥é›¶çš„æ“ä½œï¼‰

**è¿›é˜¶ï¼š**  ä½ å¯ä»¥å°†è¡¨è¾¾å¼æ ‘è®¾è®¡å¾—æ›´æ¨¡å—åŒ–å—ï¼Ÿä¾‹å¦‚ï¼Œä½ çš„è®¾è®¡èƒ½å¤Ÿä¸ä¿®æ”¹ç°æœ‰çš„ `evaluate` çš„å®ç°å°±èƒ½æ”¯æŒæ›´å¤šçš„æ“ä½œç¬¦å—ï¼Ÿ



**ç¤ºä¾‹ 1:**

**![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1628.Design%20an%20Expression%20Tree%20With%20Evaluate%20Function/images/untitled-
diagram.png)**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** s = ["3","4","+","2","*","7","/"]
> 
> **è¾“å‡ºï¼š** 2
> 
> **è§£é‡Šï¼š** æ­¤è¡¨è¾¾å¼å¯è§£æä¸ºä¸Šè¿°äºŒå‰æ ‘ï¼Œå…¶å¯¹åº”è¡¨è¾¾å¼ä¸º ((3+4)*2)/7) = 14/7 = 2.
> 
> 

**ç¤ºä¾‹ 2:**

**![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1628.Design%20an%20Expression%20Tree%20With%20Evaluate%20Function/images/untitled-
diagram2.png)**

> 
> 
> 
> 
> 
> **è¾“å…¥:** s = ["4","5","7","2","+","-","*"]
> 
> **è¾“å‡º:** -16
> 
> **è§£é‡Š:** æ­¤è¡¨è¾¾å¼å¯è§£æä¸ºä¸Šè¿°äºŒå‰æ ‘ï¼Œå…¶å¯¹åº”è¡¨è¾¾å¼ä¸º 4*(5-(2+7)) = 4*(-4) = -16.
> 
> 



**æç¤º:**

  * `1 <= s.length < 100`
  * `s.length` æ˜¯å¥‡æ•°ã€‚
  * `s` åŒ…å«æ•°å­—å’Œå­—ç¬¦ `'+'` ã€ `'-'` ã€ `'*'` ä»¥åŠ `'/'` ã€‚
  * å¦‚æœ `s[i]` æ˜¯æ•°ï¼Œåˆ™å¯¹åº”çš„æ•´æ•°ä¸è¶…è¿‡ `10^5` ã€‚
  * `s` ä¿è¯æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„è¡¨è¾¾å¼ã€‚
  * ç»“æœå€¼å’Œæ‰€æœ‰è¿‡ç¨‹å€¼çš„ç»å¯¹å€¼å‡ä¸è¶…è¿‡ `10^9` ã€‚
  * ä¿è¯è¡¨è¾¾å¼ä¸åŒ…å«é™¤ä»¥é›¶çš„æ“ä½œã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2313 | [äºŒå‰æ ‘ä¸­å¾—åˆ°ç»“æœæ‰€éœ€çš„æœ€å°‘ç¿»è½¬æ¬¡æ•° ğŸ”’](https://leetcode.com/problems/minimum-flips-in-binary-tree-to-get-result) |  |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) `1+` | <font color=#ff334b>Hard</font> |
| 2331 | [è®¡ç®—å¸ƒå°”äºŒå‰æ ‘çš„å€¼](https://leetcode.com/problems/evaluate-boolean-binary-tree) |  |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md) | <font color=#15bd66>Easy</font> |