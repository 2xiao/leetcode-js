# [2438. äºŒçš„å¹‚æ•°ç»„ä¸­æŸ¥è¯¢èŒƒå›´å†…çš„ä¹˜ç§¯](https://leetcode.com/problems/range-product-queries-of-powers)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/outline/tag/bit-manipulation.md) [`æ•°ç»„`](/outline/tag/array.md) [`å‰ç¼€å’Œ`](/outline/tag/prefix-sum.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/range-product-queries-of-powers)

## é¢˜ç›®

Given a positive integer `n`, there exists a **0-indexed** array called
`powers`, composed of the **minimum** number of powers of `2` that sum to `n`.
The array is sorted in **non-decreasing** order, and there is **only one** way
to form the array.

You are also given a **0-indexed** 2D integer array `queries`, where
`queries[i] = [lefti, righti]`. Each `queries[i]` represents a query where you
have to find the product of all `powers[j]` with `lefti <= j <= righti`.

Return _an array_`answers` _, equal in length to_`queries` _,
where_`answers[i]`_is the answer to the_`ith` _query_. Since the answer to the
`ith` query may be too large, each `answers[i]` should be returned **modulo**
`109 + 7`.



**Example 1:**

> Input: n = 15, queries = [[0,1],[2,2],[0,3]]
> 
> Output: [2,4,64]
> 
> Explanation:
> 
> For n = 15, powers = [1,2,4,8]. It can be shown that powers cannot be a smaller size.
> 
> Answer to 1st query: powers[0] * powers[1] = 1 * 2 = 2.
> 
> Answer to 2nd query: powers[2] = 4.
> 
> Answer to 3rd query: powers[0] * powers[1] * powers[2] * powers[3] = 1 * 2 * 4 * 8 = 64.
> 
> Each answer modulo 109 + 7 yields the same answer, so [2,4,64] is returned.

**Example 2:**

> Input: n = 2, queries = [[0,0]]
> 
> Output: [2]
> 
> Explanation:
> 
> For n = 2, powers = [2].
> 
> The answer to the only query is powers[0] = 2. The answer modulo 109 + 7 is the same, so [2] is returned.

**Constraints:**

  * `1 <= n <= 10^9`
  * `1 <= queries.length <= 10^5`
  * `0 <= starti <= endi < powers.length`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° `n` ï¼Œä½ éœ€è¦æ‰¾åˆ°ä¸€ä¸ªä¸‹æ ‡ä» **0**  å¼€å§‹çš„æ•°ç»„ `powers` ï¼Œå®ƒåŒ…å« **æœ€å°‘**  æ•°ç›®çš„ `2` çš„å¹‚ï¼Œä¸”å®ƒä»¬çš„å’Œä¸º
`n` ã€‚`powers` æ•°ç»„æ˜¯ **éé€’å‡**  é¡ºåºçš„ã€‚æ ¹æ®å‰é¢æè¿°ï¼Œæ„é€  `powers` æ•°ç»„çš„æ–¹æ³•æ˜¯å”¯ä¸€çš„ã€‚

åŒæ—¶ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0**  å¼€å§‹çš„äºŒç»´æ•´æ•°æ•°ç»„ `queries` ï¼Œå…¶ä¸­ `queries[i] = [lefti, righti]` ï¼Œå…¶ä¸­
`queries[i]` è¡¨ç¤ºè¯·ä½ æ±‚å‡ºæ»¡è¶³ `lefti <= j <= righti` çš„æ‰€æœ‰ `powers[j]` çš„ä¹˜ç§¯ã€‚

è¯·ä½ è¿”å›ä¸€ä¸ªæ•°ç»„ _ _`answers` ï¼Œé•¿åº¦ä¸ _ _`queries` çš„é•¿åº¦ç›¸åŒï¼Œå…¶ä¸­ _ _`answers[i]`æ˜¯ç¬¬ _ _`i`
ä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆã€‚ç”±äºæŸ¥è¯¢çš„ç»“æœå¯èƒ½éå¸¸å¤§ï¼Œè¯·ä½ å°†æ¯ä¸ª `answers[i]` éƒ½å¯¹ `109 + 7` **å–ä½™**  ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 15, queries = [[0,1],[2,2],[0,3]]
> 
> **è¾“å‡ºï¼š**[2,4,64]
> 
> **è§£é‡Šï¼š**
> 
> å¯¹äº n = 15 ï¼Œå¾—åˆ° powers = [1,2,4,8] ã€‚æ²¡æ³•å¾—åˆ°å…ƒç´ æ•°ç›®æ›´å°‘çš„æ•°ç»„ã€‚
> 
> ç¬¬ 1 ä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆï¼špowers[0] * powers[1] = 1 * 2 = 2 ã€‚
> 
> ç¬¬ 2 ä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆï¼špowers[2] = 4 ã€‚
> 
> ç¬¬ 3 ä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆï¼špowers[0] * powers[1] * powers[2] * powers[3] = 1 * 2 * 4 * 8 = 64 ã€‚
> 
> æ¯ä¸ªç­”æ¡ˆå¯¹ 109 + 7 å¾—åˆ°çš„ç»“æœéƒ½ç›¸åŒï¼Œæ‰€ä»¥è¿”å› [2,4,64] ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 2, queries = [[0,0]]
> 
> **è¾“å‡ºï¼š**[2]
> 
> **è§£é‡Šï¼š**
> 
> å¯¹äº n = 2, powers = [2] ã€‚
> 
> å”¯ä¸€ä¸€ä¸ªæŸ¥è¯¢çš„ç­”æ¡ˆæ˜¯ powers[0] = 2 ã€‚ç­”æ¡ˆå¯¹ 109 + 7 å–ä½™åç»“æœç›¸åŒï¼Œæ‰€ä»¥è¿”å› [2] ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= n <= 10^9`
  * `1 <= queries.length <= 10^5`
  * `0 <= starti <= endi < powers.length`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```