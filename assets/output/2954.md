---
title: 2954. ç»Ÿè®¡æ„Ÿå†’åºåˆ—çš„æ•°ç›®
description: LeetCode,2954. ç»Ÿè®¡æ„Ÿå†’åºåˆ—çš„æ•°ç›®,ç»Ÿè®¡æ„Ÿå†’åºåˆ—çš„æ•°ç›®,Count the Number of Infection Sequences,è§£é¢˜æ€è·¯,æ•°ç»„,æ•°å­¦,ç»„åˆæ•°å­¦
keywords:
  - LeetCode
  - 2954. ç»Ÿè®¡æ„Ÿå†’åºåˆ—çš„æ•°ç›®
  - ç»Ÿè®¡æ„Ÿå†’åºåˆ—çš„æ•°ç›®
  - Count the Number of Infection Sequences
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - æ•°å­¦
  - ç»„åˆæ•°å­¦
---

# 2954. ç»Ÿè®¡æ„Ÿå†’åºåˆ—çš„æ•°ç›®

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`ç»„åˆæ•°å­¦`](/tag/combinatorics.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/count-the-number-of-infection-sequences) [`LeetCode`](https://leetcode.com/problems/count-the-number-of-infection-sequences)

## é¢˜ç›®

You are given an integer `n` and an array `sick` sorted in increasing order,
representing positions of infected people in a line of `n` people.

At each step, **one** uninfected person **adjacent** to an infected person
gets infected. This process continues until everyone is infected.

An **infection sequence** is the order in which uninfected people become
infected, excluding those initially infected.

Return the number of different infection sequences possible, modulo `109+7`.



**Example 1:**

**Input:** n = 5, sick = [0,4]

**Output:** 4

**Explanation:**

There is a total of 6 different sequences overall.

  * Valid infection sequences are `[1,2,3]`, `[1,3,2]`, `[3,2,1]` and `[3,1,2]`.
  * `[2,3,1]` and `[2,1,3]` are not valid infection sequences because the person at index 2 cannot be infected at the first step.

**Example 2:**

**Input:** n = 4, sick = [1]

**Output:** 3

**Explanation:**

There is a total of 6 different sequences overall.

  * Valid infection sequences are `[0,2,3]`, `[2,0,3]` and `[2,3,0]`.
  * `[3,2,0]`, `[3,0,2]`, and `[0,3,2]` are not valid infection sequences because the infection starts at the person at index 1, then the order of infection is 2, then 3, and hence 3 cannot be infected earlier than 2.



**Constraints:**

  * `2 <= n <= 10^5`
  * `1 <= sick.length <= n - 1`
  * `0 <= sick[i] <= n - 1`
  * `sick` is sorted in increasing order.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` å’Œä¸€ä¸ªä¸‹æ ‡ä» **0**  å¼€å§‹çš„æ•´æ•°æ•°ç»„ `sick` ï¼Œæ•°ç»„æŒ‰ **å‡åº**  æ’åºã€‚

æœ‰ `n` ä½å°æœ‹å‹ç«™æˆä¸€æ’ï¼ŒæŒ‰é¡ºåºç¼–å·ä¸º `0` åˆ° `n - 1` ã€‚æ•°ç»„ `sick` åŒ…å«ä¸€å¼€å§‹å¾—äº†æ„Ÿå†’çš„å°æœ‹å‹çš„ä½ç½®ã€‚å¦‚æœä½ç½®ä¸º `i`
çš„å°æœ‹å‹å¾—äº†æ„Ÿå†’ï¼Œä»–ä¼šä¼ æŸ“ç»™ä¸‹æ ‡ä¸º `i - 1` æˆ–è€… `i + 1` çš„å°æœ‹å‹ï¼Œ**å‰æ** æ˜¯è¢«ä¼ æŸ“çš„å°æœ‹å‹å­˜åœ¨ä¸”è¿˜æ²¡æœ‰å¾—æ„Ÿå†’ã€‚æ¯ä¸€ç§’ä¸­ï¼Œ
**è‡³å¤šä¸€ä½**  è¿˜æ²¡æ„Ÿå†’çš„å°æœ‹å‹ä¼šè¢«ä¼ æŸ“ã€‚

ç»è¿‡æœ‰é™çš„ç§’æ•°åï¼Œé˜Ÿåˆ—ä¸­æ‰€æœ‰å°æœ‹å‹éƒ½ä¼šæ„Ÿå†’ã€‚**æ„Ÿå†’åºåˆ—**  æŒ‡çš„æ˜¯ **æ‰€æœ‰**
ä¸€å¼€å§‹æ²¡æœ‰æ„Ÿå†’çš„å°æœ‹å‹æœ€åå¾—æ„Ÿå†’çš„é¡ºåºåºåˆ—ã€‚è¯·ä½ è¿”å›æ‰€æœ‰æ„Ÿå†’åºåˆ—çš„æ•°ç›®ã€‚

ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¯·ä½ å°†ç­”æ¡ˆå¯¹ `109 + 7` å–ä½™åè¿”å›ã€‚

**æ³¨æ„** ï¼Œæ„Ÿå†’åºåˆ— **ä¸** åŒ…å«ä¸€å¼€å§‹å°±å¾—äº†æ„Ÿå†’çš„å°æœ‹å‹çš„ä¸‹æ ‡ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 5, sick = [0,4]
> 
> **è¾“å‡ºï¼š** 4
> 
> **è§£é‡Šï¼š** ä¸€å¼€å§‹ï¼Œä¸‹æ ‡ä¸º 1 ï¼Œ2 å’Œ 3 çš„å°æœ‹å‹æ²¡æœ‰æ„Ÿå†’ã€‚æ€»å…±æœ‰ 4 ä¸ªå¯èƒ½çš„æ„Ÿå†’åºåˆ—ï¼š
> - ä¸€å¼€å§‹ï¼Œä¸‹æ ‡ä¸º 1 å’Œ 3 çš„å°æœ‹å‹å¯ä»¥è¢«ä¼ æŸ“ï¼Œå› ä¸ºä»–ä»¬åˆ†åˆ«æŒ¨ç€æœ‰æ„Ÿå†’çš„å°æœ‹å‹ 0 å’Œ 4 ï¼Œä»¤ä¸‹æ ‡ä¸º 1 çš„å°æœ‹å‹å…ˆè¢«ä¼ æŸ“ã€‚
> 
> ç„¶åï¼Œä¸‹æ ‡ä¸º 2 çš„å°æœ‹å‹æŒ¨ç€æ„Ÿå†’çš„å°æœ‹å‹ 1 ï¼Œä¸‹æ ‡ä¸º 3 çš„å°æœ‹å‹æŒ¨ç€æ„Ÿå†’çš„å°æœ‹å‹ 4 ï¼Œä¸¤ä½å°æœ‹å‹éƒ½å¯ä»¥è¢«ä¼ æŸ“ï¼Œä»¤ä¸‹æ ‡ä¸º 2 çš„å°æœ‹å‹è¢«ä¼ æŸ“ã€‚
> 
> æœ€åï¼Œä¸‹æ ‡ä¸º 3 çš„å°æœ‹å‹è¢«ä¼ æŸ“ï¼Œå› ä¸ºä»–æŒ¨ç€æ„Ÿå†’çš„å°æœ‹å‹ 2 å’Œ 4 ï¼Œæ„Ÿå†’åºåˆ—ä¸º [1,2,3] ã€‚
> - ä¸€å¼€å§‹ï¼Œä¸‹æ ‡ä¸º 1 å’Œ 3 çš„å°æœ‹å‹å¯ä»¥è¢«ä¼ æŸ“ï¼Œå› ä¸ºä»–ä»¬åˆ†åˆ«æŒ¨ç€æ„Ÿå†’çš„å°æœ‹å‹ 0 å’Œ 4 ï¼Œä»¤ä¸‹æ ‡ä¸º 1 çš„å°æœ‹å‹å…ˆè¢«ä¼ æŸ“ã€‚
> 
> ç„¶åï¼Œä¸‹æ ‡ä¸º 2 çš„å°æœ‹å‹æŒ¨ç€æ„Ÿå†’çš„å°æœ‹å‹ 1 ï¼Œä¸‹æ ‡ä¸º 3 çš„å°æœ‹å‹æŒ¨ç€æ„Ÿå†’çš„å°æœ‹å‹ 4 ï¼Œä¸¤ä½å°æœ‹å‹éƒ½å¯ä»¥è¢«ä¼ æŸ“ï¼Œä»¤ä¸‹æ ‡ä¸º 3 çš„å°æœ‹å‹è¢«ä¼ æŸ“ã€‚
> 
> æœ€åï¼Œä¸‹æ ‡ä¸º 2 çš„å°æœ‹å‹è¢«ä¼ æŸ“ï¼Œå› ä¸ºä»–æŒ¨ç€æ„Ÿå†’çš„å°æœ‹å‹ 1 å’Œ 3 ï¼Œæ„Ÿå†’åºåˆ—ä¸º  [1,3,2] ã€‚
> - æ„Ÿå†’åºåˆ— [3,1,2] ï¼Œè¢«ä¼ æŸ“çš„é¡ºåºï¼š[**_0_** ,1,2,3,**_4_**] => [**_0_** ,1,2,**_3_** ,**_4_**] => [**_0_** ,**_1_** ,2,_**3**_ ,**_4_**] => [**_0_** ,**_1_** ,**_2_** ,**_3_** ,**_4_**] ã€‚
> - æ„Ÿå†’åºåˆ— [3,2,1] ï¼Œè¢«ä¼ æŸ“çš„é¡ºåºï¼š[**_0_** ,1,2,3,**_4_**] => [**_0_** ,1,2,**_3_** ,**_4_**] => [**_0_** ,1,**_2_** ,**_3_** ,**_4_**] => [**_0_** ,**_1_** ,**_2_** ,**_3_** ,**_4_**] ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 4, sick = [1]
> 
> **è¾“å‡ºï¼š** 3
> 
> **è§£é‡Šï¼š** ä¸€å¼€å§‹ï¼Œä¸‹æ ‡ä¸º 0 ï¼Œ2 å’Œ 3 çš„å°æœ‹å‹æ²¡æœ‰æ„Ÿå†’ã€‚æ€»å…±æœ‰ 3 ä¸ªå¯èƒ½çš„æ„Ÿå†’åºåˆ—ï¼š
> - æ„Ÿå†’åºåˆ— [0,2,3] ï¼Œè¢«ä¼ æŸ“çš„é¡ºåºï¼š[0,**_1_** ,2,3] => [**_0_** ,**_1_** ,2,3] => [**_0_** ,**_1_** ,**_2_** ,3] => [**_0_** ,**_1_** ,**_2_** ,**_3_**] ã€‚
> - æ„Ÿå†’åºåˆ— [2,0,3] ï¼Œè¢«ä¼ æŸ“çš„é¡ºåºï¼š[0,**_1_** ,2,3] => [0,**_1_** ,**_2_** ,3] => [**_0_** ,**_1_** ,**_2_** ,3] => [**_0_** ,**_1_** ,**_2_** ,**_3_**] ã€‚
> - æ„Ÿå†’åºåˆ— [2,3,0] ï¼Œè¢«ä¼ æŸ“çš„é¡ºåºï¼š[0,**_1_** ,2,3] => [0,**_1_** ,**_2_** ,3] => [0,**_1_** ,**_2_** ,**_3_**] => [**_0_** ,**_1_** ,**_2_** ,**_3_**] ã€‚
> 
> 



**æç¤ºï¼š**

  * `2 <= n <= 10^5`
  * `1 <= sick.length <= n - 1`
  * `0 <= sick[i] <= n - 1`
  * `sick` æŒ‰å‡åºæ’åˆ—ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------ | :------: |
| 749 | éš”ç¦»ç—…æ¯’ |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`æ•°ç»„`](/tag/array.md) `2+` | <font color=#ff334b>Hard</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/contain-virus) [ğŸ”—](https://leetcode.com/problems/contain-virus) |
| 2385 | æ„ŸæŸ“äºŒå‰æ ‘éœ€è¦çš„æ€»æ—¶é—´ |  |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) `2+` | <font color=#ffb800>Medium</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/amount-of-time-for-binary-tree-to-be-infected) [ğŸ”—](https://leetcode.com/problems/amount-of-time-for-binary-tree-to-be-infected) |