# [606. æ ¹æ®äºŒå‰æ ‘åˆ›å»ºå­—ç¬¦ä¸²](https://leetcode.com/problems/construct-string-from-binary-tree)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/leetcode/outline/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/leetcode/outline/tag/depth-first-search.md) [`å­—ç¬¦ä¸²`](/leetcode/outline/tag/string.md) [`äºŒå‰æ ‘`](/leetcode/outline/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/construct-string-from-binary-tree)

## é¢˜ç›®

Given the `root` node of a binary tree, your task is to create a string
representation of the tree following a specific set of formatting rules. The
representation should be based on a preorder traversal of the binary tree and
must adhere to the following guidelines:

- **Node Representation** : Each node in the tree should be represented by its integer value.

- **Parentheses for Children** : If a node has at least one child (either left or right), its children should be represented inside parentheses. Specifically:

> - If a node has a left child, the value of the left child should be enclosed in parentheses immediately following the node's value.
>
> - If a node has a right child, the value of the right child should also be enclosed in parentheses. The parentheses for the right child should follow those of the left child.

- **Omitting Empty Parentheses** : Any empty parentheses pairs (i.e., `()`) should be omitted from the final string representation of the tree, with one specific exception: when a node has a right child but no left child. In such cases, you must include an empty pair of parentheses to indicate the absence of the left child. This ensures that the one-to-one mapping between the string representation and the original binary tree structure is maintained.

In summary, empty parentheses pairs should be omitted when a node has only a
left child or no children. However, when a node has a right child but no left
child, an empty pair of parentheses must precede the representation of the
right child to reflect the tree's structure accurately.

**Example 1:**

![](https://assets.leetcode.com/uploads/2021/05/03/cons1-tree.jpg)

> Input: root = [1,2,3,4]
>
> Output: "1(2(4))(3)"
>
> Explanation: Originally, it needs to be "1(2(4)())(3()())", but you need to omit all the empty parenthesis pairs. And it will be "1(2(4))(3)".

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/05/03/cons2-tree.jpg)

> Input: root = [1,2,3,null,4]
>
> Output: "1(2()(4))(3)"
>
> Explanation: Almost the same as the first example, except the () after 2 is necessary to indicate the absence of a left child for 2 and the presence of a right child.

**Constraints:**

- The number of nodes in the tree is in the range `[1, 10^4]`.
- `-1000 <= Node.val <= 1000`

## é¢˜ç›®å¤§æ„

ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¯·ä½ é‡‡ç”¨å‰åºéå†çš„æ–¹å¼ï¼Œå°†äºŒå‰æ ‘è½¬åŒ–ä¸ºä¸€ä¸ªç”±æ‹¬å·å’Œæ•´æ•°ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ„é€ å‡ºçš„å­—ç¬¦ä¸²ã€‚

ç©ºèŠ‚ç‚¹ä½¿ç”¨ä¸€å¯¹ç©ºæ‹¬å·å¯¹ `"()"` è¡¨ç¤ºï¼Œè½¬åŒ–åéœ€è¦çœç•¥æ‰€æœ‰ä¸å½±å“å­—ç¬¦ä¸²ä¸åŸå§‹äºŒå‰æ ‘ä¹‹é—´çš„ä¸€å¯¹ä¸€æ˜ å°„å…³ç³»çš„ç©ºæ‹¬å·å¯¹ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/05/03/cons1-tree.jpg)

> **è¾“å…¥ï¼š** root = [1,2,3,4]
>
> **è¾“å‡ºï¼š** "1(2(4))(3)"
>
> **è§£é‡Šï¼š** åˆæ­¥è½¬åŒ–åå¾—åˆ° "1(2(4)())(3()())" ï¼Œä½†çœç•¥æ‰€æœ‰ä¸å¿…è¦çš„ç©ºæ‹¬å·å¯¹åï¼Œå­—ç¬¦ä¸²åº”è¯¥æ˜¯"1(2(4))(3)" ã€‚

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/05/03/cons2-tree.jpg)

> **è¾“å…¥ï¼š** root = [1,2,3,null,4]
>
> **è¾“å‡ºï¼š** "1(2()(4))(3)"
>
> **è§£é‡Šï¼š** å’Œç¬¬ä¸€ä¸ªç¤ºä¾‹ç±»ä¼¼ï¼Œä½†æ˜¯æ— æ³•çœç•¥ç¬¬ä¸€ä¸ªç©ºæ‹¬å·å¯¹ï¼Œå¦åˆ™ä¼šç ´åè¾“å…¥ä¸è¾“å‡ºä¸€ä¸€æ˜ å°„çš„å…³ç³»ã€‚

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ `[1, 10^4]`
- `-1000 <= Node.val <= 1000`

## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 536 | [ä»å­—ç¬¦ä¸²ç”ŸæˆäºŒå‰æ ‘](https://leetcode.com/problems/construct-binary-tree-from-string) |  |  [`æ ˆ`](/leetcode/outline/tag/stack.md) [`æ ‘`](/leetcode/outline/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/leetcode/outline/tag/depth-first-search.md) `2+` | <font color=#ffb800>Medium</font> |
| 652 | [å¯»æ‰¾é‡å¤çš„å­æ ‘](https://leetcode.com/problems/find-duplicate-subtrees) |  |  [`æ ‘`](/leetcode/outline/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/leetcode/outline/tag/depth-first-search.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) `1+` | <font color=#ffb800>Medium</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
