---
title: 1919. å…´è¶£ç›¸åŒçš„æœ‹å‹ ğŸ”’
description: LeetCode,1919. å…´è¶£ç›¸åŒçš„æœ‹å‹ ğŸ”’,å…´è¶£ç›¸åŒçš„æœ‹å‹,Leetcodify Similar Friends,è§£é¢˜æ€è·¯,æ•°æ®åº“
keywords:
  - LeetCode
  - 1919. å…´è¶£ç›¸åŒçš„æœ‹å‹ ğŸ”’
  - å…´è¶£ç›¸åŒçš„æœ‹å‹
  - Leetcodify Similar Friends
  - è§£é¢˜æ€è·¯
  - æ•°æ®åº“
---

# 1919. å…´è¶£ç›¸åŒçš„æœ‹å‹ ğŸ”’

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°æ®åº“`](/tag/database.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/leetcodify-similar-friends) [`LeetCode`](https://leetcode.com/problems/leetcodify-similar-friends)

## é¢˜ç›®

Table: `Listens`

> 
> 
> 
> 
> 
> +-------------+---------+
> 
> | Column Name | Type> 
> |
> 
> +-------------+---------+
> 
> | user_id> 
>  | int> 
>  |
> 
> | song_id> 
>  | int> 
>  |
> 
> | day> 
> > 
>  | date> 
> |
> 
> +-------------+---------+
> 
> This table may contain duplicate rows.
> 
> Each row of this table indicates that the user user_id listened to the song song_id on the day day.
> 
> 



Table: `Friendship`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | user1_id> 
>   | int> 
>  |
> 
> | user2_id> 
>   | int> 
>  |
> 
> +---------------+---------+
> 
> (user1_id, user2_id) is the primary key (combination of columns with unique values) for this table.
> 
> Each row of this table indicates that the users user1_id and user2_id are friends.
> 
> Note that user1_id < user2_id.
> 
> 



Write a solution to report the similar friends of Leetcodify users. A user `x`
and user `y` are similar friends if:

  * Users `x` and `y` are friends, and
  * Users `x` and `y` listened to the same three or more different songs **on the same day**.

Return the result table in **any order**. Note that you must return the
similar pairs of friends the same way they were represented in the input
(i.e., always `user1_id < user2_id`).

The result format is in the following example.



**Example 1:**

> Input: 
> 
> Listens table:
> 
> +---------+---------+------------+
> 
> | user_id | song_id | day> 
> > 
> |
> 
> +---------+---------+------------+
> 
> | 1> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 1> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 1> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 13> 
>   | 2021-03-15 |
> 
> | 5> 
>    | 10> 
>   | 2021-03-16 |
> 
> | 5> 
>    | 11> 
>   | 2021-03-16 |
> 
> | 5> 
>    | 12> 
>   | 2021-03-16 |
> 
> +---------+---------+------------+
> 
> Friendship table:
> 
> +----------+----------+
> 
> | user1_id | user2_id |
> 
> +----------+----------+
> 
> | 1> 
> > 
> | 2> 
> > 
> |
> 
> | 2> 
> > 
> | 4> 
> > 
> |
> 
> | 2> 
> > 
> | 5> 
> > 
> |
> 
> +----------+----------+
> 
> Output: 
> 
> +----------+----------+
> 
> | user1_id | user2_id |
> 
> +----------+----------+
> 
> | 1> 
> > 
> | 2> 
> > 
> |
> 
> +----------+----------+
> 
> Explanation: 
> 
> Users 1 and 2 are friends, and they listened to songs 10, 11, and 12 on the same day. They are similar friends.
> 
> Users 1 and 3 listened to songs 10, 11, and 12 on the same day, but they are not friends.
> 
> Users 2 and 4 are friends, but they did not listen to the same three different songs.
> 
> Users 2 and 5 are friends and listened to songs 10, 11, and 12, but they did not listen to them on the same day.
> 
> 


## é¢˜ç›®å¤§æ„

è¡¨: `Listens`

> 
> 
> 
> 
> 
> +-------------+---------+
> 
> | Column Name | Type> 
> |
> 
> +-------------+---------+
> 
> | user_id> 
>  | int> 
>  |
> 
> | song_id> 
>  | int> 
>  |
> 
> | day> 
> > 
>  | date> 
> |
> 
> +-------------+---------+
> 
> è¯¥è¡¨æ²¡æœ‰ä¸»é”®ï¼Œå› æ­¤ä¼šå­˜åœ¨é‡å¤çš„è¡Œã€‚
> 
> è¯¥è¡¨çš„æ¯ä¸€è¡Œæ‰€ä»£è¡¨çš„å«ä¹‰æ˜¯ï¼šç”¨æˆ·ï¼ˆuser_idï¼‰åœ¨æŸå¤©ï¼ˆdayï¼‰å¬äº†æŸé¦–æ­Œæ›²ï¼ˆsong_idï¼‰ã€‚
> 
> 



è¡¨: `Friendship`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | user1_id> 
>   | int> 
>  |
> 
> | user2_id> 
>   | int> 
>  |
> 
> +---------------+---------+
> 
> (user1_id, user2_id) æ˜¯è¯¥è¡¨çš„ä¸»é”®ã€‚
> 
> è¯¥è¡¨çš„æ¯ä¸€è¡Œæ‰€ä»£è¡¨çš„å«ä¹‰æ˜¯ï¼Œç”¨æˆ·ï¼ˆuser1_id, user2_idï¼‰æ˜¯æœ‹å‹ã€‚
> 
> æ³¨æ„ï¼šuser1_id < user2_idã€‚
> 
> 



è¯·å†™ä¸€æ®µSQLæŸ¥è¯¢è·å–åˆ°å…´è¶£ç›¸åŒçš„æœ‹å‹ã€‚ç”¨æˆ· `x` å’Œ ç”¨æˆ· `y` æ˜¯å…´è¶£ç›¸åŒçš„æœ‹å‹ï¼Œéœ€æ»¡è¶³ä¸‹è¿°æ¡ä»¶ï¼š

  * ç”¨æˆ· `x` å’Œ `y` æ˜¯æœ‹å‹ï¼Œå¹¶ä¸”
  * ç”¨æˆ· `x` and `y` åœ¨åŒä¸€å¤©å†…å¬è¿‡ç›¸åŒçš„æ­Œæ›²ï¼Œä¸”æ•°é‡å¤§äºç­‰äºä¸‰é¦–.

ç»“æœè¡¨ **æ— éœ€æ’åº  **ã€‚æ³¨æ„ï¼šè¿”å›çš„ç»“æœéœ€è¦å’Œæºæ•°æ®è¡¨çš„å‘ˆç°æ–¹å¼ç›¸åŒ ï¼ˆä¾‹å¦‚ï¼Œ éœ€æ»¡è¶³ `user1_id < user2_id`ï¼‰ã€‚

ç»“æœè¡¨çš„æ ¼å¼å¦‚ä¸‹ä¾‹ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> Listens table:
> 
> +---------+---------+------------+
> 
> | user_id | song_id | day> 
> > 
> |
> 
> +---------+---------+------------+
> 
> | 1> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 1> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 1> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 13> 
>   | 2021-03-15 |
> 
> | 5> 
>    | 10> 
>   | 2021-03-16 |
> 
> | 5> 
>    | 11> 
>   | 2021-03-16 |
> 
> | 5> 
>    | 12> 
>   | 2021-03-16 |
> 
> +---------+---------+------------+
> 
> Friendship table:
> 
> +----------+----------+
> 
> | user1_id | user2_id |
> 
> +----------+----------+
> 
> | 1> 
> > 
> | 2> 
> > 
> |
> 
> | 2> 
> > 
> | 4> 
> > 
> |
> 
> | 2> 
> > 
> | 5> 
> > 
> |
> 
> +----------+----------+
> 
> **è¾“å‡ºï¼š**
> 
> +----------+----------+
> 
> | user1_id | user2_id |
> 
> +----------+----------+
> 
> | 1> 
> > 
> | 2> 
> > 
> |
> 
> +----------+----------+
> 
> **è§£é‡Šï¼š**
> 
> ç”¨æˆ· 1 å’Œ 2 æ˜¯æœ‹å‹, å¹¶ä¸”ä»–ä»¬åœ¨åŒä¸€å¤©å†…éƒ½å¬äº†10ã€11ã€12çš„æ­Œæ›²ã€‚æ‰€ä»¥ï¼Œä»–ä»¬æ˜¯å…´è¶£ç›¸åŒçš„æœ‹å‹ã€‚
> 
> ç”¨æˆ· 1 å’Œ 3 åœ¨åŒä¸€å¤©å†…éƒ½å¬äº†10ã€11ã€12çš„æ­Œæ›²ï¼Œä½†ä»–ä»¬ä¸æ˜¯æœ‹å‹ã€‚
> 
> ç”¨æˆ· 2 å’Œ 4 æ˜¯æœ‹å‹ï¼Œä½†ä»–ä»¬åŒä¸€å¤©å†…å¬è¿‡ç›¸åŒçš„æ­Œæ›²çš„æ•°é‡å°äº3ã€‚
> 
> ç”¨æˆ· 2 å’Œ 5 æ˜¯æœ‹å‹ï¼Œå¹¶ä¸”åœ¨éƒ½å¬äº†äº†10ã€11ã€12çš„æ­Œæ›²ï¼Œä½†ä¸åœ¨åŒä¸€å¤©å†…ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1917 | Leetcodify å¥½å‹æ¨è ğŸ”’ |  |  [`æ•°æ®åº“`](/tag/database.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/leetcodify-friends-recommendations) [ğŸ”—](https://leetcode.com/problems/leetcodify-friends-recommendations) |