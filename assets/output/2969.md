# [2969. è´­ä¹°æ°´æœéœ€è¦çš„æœ€å°‘é‡‘å¸æ•° II ğŸ”’](https://2xiao.github.io/leetcode-js/problem/2969.html)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`é˜Ÿåˆ—`](/tag/queue.md) [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`å•è°ƒé˜Ÿåˆ—`](/tag/monotonic-queue.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/minimum-number-of-coins-for-fruits-ii) [`LeetCode`](https://leetcode.com/problems/minimum-number-of-coins-for-fruits-ii)

## é¢˜ç›®

You are at a fruit market with different types of exotic fruits on display.

You are given a **1-indexed** array `prices`, where `prices[i]` denotes the
number of coins needed to purchase the `ith` fruit.

The fruit market has the following offer:

  * If you purchase the `ith` fruit at `prices[i]` coins, you can get the next `i` fruits for free.

**Note** that even if you **can** take fruit `j` for free, you can still
purchase it for `prices[j]` coins to receive a new offer.

Return _the**minimum** number of coins needed to acquire all the fruits_.



**Example 1:**

> Input: prices = [3,1,2]
> 
> Output: 4
> 
> Explanation: You can acquire the fruits as follows:
> - Purchase the 1st fruit with 3 coins, and you are allowed to take the 2nd fruit for free.
> - Purchase the 2nd fruit with 1 coin, and you are allowed to take the 3rd fruit for free.
> - Take the 3rd fruit for free.
> 
> Note that even though you were allowed to take the 2nd fruit for free, you purchased it because it is more optimal.
> 
> It can be proven that 4 is the minimum number of coins needed to acquire all the fruits.

**Example 2:**

> Input: prices = [1,10,1,1]
> 
> Output: 2
> 
> Explanation: You can acquire the fruits as follows:
> - Purchase the 1st fruit with 1 coin, and you are allowed to take the 2nd fruit for free.
> - Take the 2nd fruit for free.
> - Purchase the 3rd fruit for 1 coin, and you are allowed to take the 4th fruit for free.
> - Take the 4th fruit for free.
> 
> It can be proven that 2 is the minimum number of coins needed to acquire all the fruits.

**Constraints:**

  * `1 <= prices.length <= 10^5`
  * `1 <= prices[i] <= 10^5`


## é¢˜ç›®å¤§æ„

ä½ åœ¨ä¸€ä¸ªæ°´æœè¶…å¸‚é‡Œï¼Œè´§æ¶ä¸Šæ‘†æ»¡äº†ç²ç…æ»¡ç›®çš„å¥‡çå¼‚æœã€‚

ç»™ä½ ä¸€ä¸ª **ä¸‹æ ‡ä» 1 å¼€å§‹**  çš„æ•°ç»„ `prices`ï¼Œå…¶ä¸­ `prices[i]` è¡¨ç¤ºä½ è´­ä¹°ç¬¬ `i` ä¸ªæ°´æœæ‰€éœ€çš„ç¡¬å¸æ•°é‡ã€‚

æ°´æœå¸‚åœºæœ‰ä»¥ä¸‹ä¼˜æƒ æ´»åŠ¨ï¼š

  * å¦‚æœä½ ç”¨ `prices[i]` ä¸ªç¡¬å¸è´­ä¹°ç¬¬ `i` ä¸ªæ°´æœï¼Œ é‚£ä¹ˆæ¥ä¸‹æ¥çš„ i ä¸ªæ°´æœä½ éƒ½å¯ä»¥å…è´¹è·å¾—ã€‚

**è¯·æ³¨æ„**  å³ä½¿ä½  **å¯ä»¥** å…è´¹è·å¾—ç¬¬ `j` ä¸ªæ°´æœï¼Œä½ ä»ç„¶å¯ä»¥ç”¨ `prices[j]` ä¸ªç¡¬å¸æ¥è´­ä¹°å®ƒï¼Œä»¥è·å–æ–°çš„ä¼˜æƒ ã€‚

è¿”å› _è·å¾—æ‰€æœ‰æ°´æœæ‰€éœ€çš„**æœ€å°** ç¡¬å¸æ•°é‡ã€‚_



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** prices = [3,1,2]
> 
> **è¾“å‡ºï¼š** 4
> 
> **è§£é‡Šï¼š** ä½ å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼è·å–æ°´æœï¼š
> - ç”¨3ä¸ªç¡¬å¸è´­ä¹°ç¬¬1ä¸ªæ°´æœï¼Œå¹¶ä¸”å¯ä»¥å…è´¹è·å¾—ç¬¬2ä¸ªæ°´æœã€‚
> - ç”¨1ä¸ªç¡¬å¸è´­ä¹°ç¬¬2ä¸ªæ°´æœï¼Œå¹¶ä¸”å¯ä»¥å…è´¹è·å¾—ç¬¬3ä¸ªæ°´æœã€‚
> - å…è´¹è·å¾—ç¬¬ä¸‰ä¸ªæ°´æœã€‚
> 
> è¯·æ³¨æ„ï¼Œå³ä½¿ä½ å¯ä»¥å…è´¹è·å¾—ç¬¬2ä¸ªæ°´æœï¼Œä½ è¿˜æ˜¯è´­ä¹°äº†å®ƒï¼Œå› ä¸ºè¿™æ˜¯æ›´ä¼˜çš„é€‰æ‹©ã€‚
> 
> å¯ä»¥è¯æ˜4æ˜¯è·å–æ‰€æœ‰æ°´æœæ‰€éœ€çš„æœ€å°ç¡¬å¸æ•°é‡ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> è¾“å…¥ï¼šprices = [1,10,1,1]
> 
> è¾“å‡ºï¼š2
> 
> è§£é‡Šï¼šä½ å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼è·å–æ°´æœï¼š
> - ç”¨1ä¸ªç¡¬å¸è´­ä¹°ç¬¬1ä¸ªæ°´æœï¼Œå¹¶ä¸”å¯ä»¥å…è´¹è·å¾—ç¬¬2ä¸ªæ°´æœã€‚
> - å…è´¹è·å¾—ç¬¬2ä¸ªæ°´æœã€‚
> - ç”¨1ä¸ªç¡¬å¸è´­ä¹°ç¬¬3ä¸ªæ°´æœï¼Œå¹¶ä¸”å¯ä»¥å…è´¹è·å¾—ç¬¬4ä¸ªæ°´æœã€‚
> - å…è´¹è·å¾—ç¬¬4ä¸ªæ°´æœã€‚
> 
> å¯ä»¥è¯æ˜2æ˜¯è·å–æ‰€æœ‰æ°´æœæ‰€éœ€çš„æœ€å°ç¡¬å¸æ•°é‡ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= prices.length <= 10^5`
  * `1 <= prices[i] <= 10^5`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```