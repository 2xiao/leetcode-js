# [2276. ç»Ÿè®¡åŒºé—´ä¸­çš„æ•´æ•°æ•°ç›®](https://leetcode.com/problems/count-integers-in-intervals)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`çº¿æ®µæ ‘`](/leetcode/outline/tag/segment-tree.md) [`æœ‰åºé›†åˆ`](/leetcode/outline/tag/ordered-set.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/count-integers-in-intervals)


## é¢˜ç›®

Given an **empty** set of intervals, implement a data structure that can:

  * **Add** an interval to the set of intervals.
  * **Count** the number of integers that are present in **at least one** interval.

Implement the `CountIntervals` class:

  * `CountIntervals()` Initializes the object with an empty set of intervals.
  * `void add(int left, int right)` Adds the interval `[left, right]` to the set of intervals.
  * `int count()` Returns the number of integers that are present in **at least one** interval.

**Note** that an interval `[left, right]` denotes all the integers `x` where
`left <= x <= right`.



**Example 1:**

> 
> 
> 
> 
> 
> **Input**
> 
> ["CountIntervals", "add", "add", "count", "add", "count"]
> 
> [[], [2, 3], [7, 10], [], [5, 8], []]
> 
> **Output**
> 
> [null, null, null, 6, null, 8]
> 
> 
> 
> **Explanation**
> 
> CountIntervals countIntervals = new CountIntervals(); // initialize the object with an empty set of intervals. 
> 
> countIntervals.add(2, 3);  // add [2, 3] to the set of intervals.
> 
> countIntervals.add(7, 10); // add [7, 10] to the set of intervals.
> 
> countIntervals.count();> 
> // return 6
> 
> > 
> > 
> > 
> > 
> > 
> > 
>    // the integers 2 and 3 are present in the interval [2, 3].
> 
> > 
> > 
> > 
> > 
> > 
> > 
>    // the integers 7, 8, 9, and 10 are present in the interval [7, 10].
> 
> countIntervals.add(5, 8);  // add [5, 8] to the set of intervals.
> 
> countIntervals.count();> 
> // return 8
> 
> > 
> > 
> > 
> > 
> > 
> > 
>    // the integers 2 and 3 are present in the interval [2, 3].
> 
> > 
> > 
> > 
> > 
> > 
> > 
>    // the integers 5 and 6 are present in the interval [5, 8].
> 
> > 
> > 
> > 
> > 
> > 
> > 
>    // the integers 7 and 8 are present in the intervals [5, 8] and [7, 10].
> 
> > 
> > 
> > 
> > 
> > 
> > 
>    // the integers 9 and 10 are present in the interval [7, 10].

**Constraints:**

  * `1 <= left <= right <= 10^9`
  * At most `10^5` calls **in total** will be made to `add` and `count`.
  * At least **one** call will be made to `count`.


## é¢˜ç›®å¤§æ„

ç»™ä½ åŒºé—´çš„ **ç©º** é›†ï¼Œè¯·ä½ è®¾è®¡å¹¶å®ç°æ»¡è¶³è¦æ±‚çš„æ•°æ®ç»“æ„ï¼š

  * **æ–°å¢ï¼š** æ·»åŠ ä¸€ä¸ªåŒºé—´åˆ°è¿™ä¸ªåŒºé—´é›†åˆä¸­ã€‚
  * **ç»Ÿè®¡ï¼š** è®¡ç®—å‡ºç°åœ¨ **è‡³å°‘ä¸€ä¸ª** åŒºé—´ä¸­çš„æ•´æ•°ä¸ªæ•°ã€‚

å®ç° `CountIntervals` ç±»ï¼š

  * `CountIntervals()` ä½¿ç”¨åŒºé—´çš„ç©ºé›†åˆå§‹åŒ–å¯¹è±¡
  * `void add(int left, int right)` æ·»åŠ åŒºé—´ `[left, right]` åˆ°åŒºé—´é›†åˆä¹‹ä¸­ã€‚
  * `int count()` è¿”å›å‡ºç°åœ¨ **è‡³å°‘ä¸€ä¸ª** åŒºé—´ä¸­çš„æ•´æ•°ä¸ªæ•°ã€‚

**æ³¨æ„ï¼š** åŒºé—´ `[left, right]` è¡¨ç¤ºæ»¡è¶³ `left <= x <= right` çš„æ‰€æœ‰æ•´æ•° `x` ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥**
> 
> ["CountIntervals", "add", "add", "count", "add", "count"]
> 
> [[], [2, 3], [7, 10], [], [5, 8], []]
> 
> **è¾“å‡º**
> 
> [null, null, null, 6, null, 8]
> 
> 
> 
> **è§£é‡Š**
> 
> CountIntervals countIntervals = new CountIntervals(); // ç”¨ä¸€ä¸ªåŒºé—´ç©ºé›†åˆå§‹åŒ–å¯¹è±¡
> 
> countIntervals.add(2, 3);  // å°† [2, 3] æ·»åŠ åˆ°åŒºé—´é›†åˆä¸­
> 
> countIntervals.add(7, 10); // å°† [7, 10] æ·»åŠ åˆ°åŒºé—´é›†åˆä¸­
> 
> countIntervals.count();> 
> // è¿”å› 6
> 
> > 
> > 
> > 
> > 
> > 
> > 
>    // æ•´æ•° 2 å’Œ 3 å‡ºç°åœ¨åŒºé—´ [2, 3] ä¸­
> 
> > 
> > 
> > 
> > 
> > 
> > 
>    // æ•´æ•° 7ã€8ã€9ã€10 å‡ºç°åœ¨åŒºé—´ [7, 10] ä¸­
> 
> countIntervals.add(5, 8);  // å°† [5, 8] æ·»åŠ åˆ°åŒºé—´é›†åˆä¸­
> 
> countIntervals.count();> 
> // è¿”å› 8
> 
> > 
> > 
> > 
> > 
> > 
> > 
>    // æ•´æ•° 2 å’Œ 3 å‡ºç°åœ¨åŒºé—´ [2, 3] ä¸­
> 
> > 
> > 
> > 
> > 
> > 
> > 
>    // æ•´æ•° 5 å’Œ 6 å‡ºç°åœ¨åŒºé—´ [5, 8] ä¸­
> 
> > 
> > 
> > 
> > 
> > 
> > 
>    // æ•´æ•° 7 å’Œ 8 å‡ºç°åœ¨åŒºé—´ [5, 8] å’ŒåŒºé—´ [7, 10] ä¸­
> 
> > 
> > 
> > 
> > 
> > 
> > 
>    // æ•´æ•° 9 å’Œ 10 å‡ºç°åœ¨åŒºé—´ [7, 10] ä¸­



**æç¤ºï¼š**

  * `1 <= left <= right <= 10^9`
  * æœ€å¤šè°ƒç”¨  `add` å’Œ `count` æ–¹æ³• **æ€»è®¡** `10^5` æ¬¡
  * è°ƒç”¨ `count` æ–¹æ³•è‡³å°‘ä¸€æ¬¡


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®
- [56. åˆå¹¶åŒºé—´](./0056.md)
- [57. æ’å…¥åŒºé—´](./0057.md)
- [352. å°†æ•°æ®æµå˜ä¸ºå¤šä¸ªä¸ç›¸äº¤åŒºé—´](https://leetcode.com/problems/data-stream-as-disjoint-intervals)
- [732. æˆ‘çš„æ—¥ç¨‹å®‰æ’è¡¨ III](https://leetcode.com/problems/my-calendar-iii)

::::
