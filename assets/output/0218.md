# [218. å¤©é™…çº¿é—®é¢˜](https://leetcode.com/problems/the-skyline-problem)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ‘çŠ¶æ•°ç»„`](/outline/tag/binary-indexed-tree.md) [`çº¿æ®µæ ‘`](/outline/tag/segment-tree.md) [`æ•°ç»„`](/outline/tag/array.md) [`åˆ†æ²»`](/outline/tag/divide-and-conquer.md) [`æœ‰åºé›†åˆ`](/outline/tag/ordered-set.md) [`æ‰«æçº¿`](/outline/tag/line-sweep.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/outline/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/the-skyline-problem)

## é¢˜ç›®

A city's **skyline** is the outer contour of the silhouette formed by all the
buildings in that city when viewed from a distance. Given the locations and
heights of all the buildings, return _the**skyline** formed by these buildings
collectively_.

The geometric information of each building is given in the array `buildings`
where `buildings[i] = [lefti, righti, heighti]`:

  * `lefti` is the x coordinate of the left edge of the `ith` building.
  * `righti` is the x coordinate of the right edge of the `ith` building.
  * `heighti` is the height of the `ith` building.

You may assume all buildings are perfect rectangles grounded on an absolutely
flat surface at height `0`.

The **skyline** should be represented as a list of "key points" **sorted by
their x-coordinate** in the form `[[x1,y1],[x2,y2],...]`. Each key point is
the left endpoint of some horizontal segment in the skyline except the last
point in the list, which always has a y-coordinate `0` and is used to mark the
skyline's termination where the rightmost building ends. Any ground between
the leftmost and rightmost buildings should be part of the skyline's contour.

**Note:** There must be no consecutive horizontal lines of equal height in the
output skyline. For instance, `[...,[2 3],[4 5],[7 5],[11 5],[12 7],...]` is
not acceptable; the three lines of height 5 should be merged into one in the
final output as such: `[...,[2 3],[4 5],[12 7],...]`



**Example 1:**

![](https://assets.leetcode.com/uploads/2020/12/01/merged.jpg)

> Input: buildings = [[2,9,10],[3,7,15],[5,12,12],[15,20,10],[19,24,8]]
> 
> Output: [[2,10],[3,15],[7,12],[12,0],[15,10],[20,8],[24,0]]
> 
> Explanation:
> 
> Figure A shows the buildings of the input.
> 
> Figure B shows the skyline formed by those buildings. The red points in figure B represent the key points in the output list.

**Example 2:**

> Input: buildings = [[0,2,3],[2,5,3]]
> 
> Output: [[0,3],[5,0]]

**Constraints:**

  * `1 <= buildings.length <= 10^4`
  * `0 <= lefti < righti <= 231 - 1`
  * `1 <= heighti <= 231 - 1`
  * `buildings` is sorted by `lefti` in non-decreasing order.


## é¢˜ç›®å¤§æ„

åŸå¸‚çš„ **å¤©é™…çº¿** æ˜¯ä»è¿œå¤„è§‚çœ‹è¯¥åŸå¸‚ä¸­æ‰€æœ‰å»ºç­‘ç‰©å½¢æˆçš„è½®å»“çš„å¤–éƒ¨è½®å»“ã€‚ç»™ä½ æ‰€æœ‰å»ºç­‘ç‰©çš„ä½ç½®å’Œé«˜åº¦ï¼Œè¯·è¿”å› _ç”±è¿™äº›å»ºç­‘ç‰©å½¢æˆçš„**å¤©é™…çº¿**_ ã€‚

æ¯ä¸ªå»ºç­‘ç‰©çš„å‡ ä½•ä¿¡æ¯ç”±æ•°ç»„ `buildings` è¡¨ç¤ºï¼Œå…¶ä¸­ä¸‰å…ƒç»„ `buildings[i] = [lefti, righti, heighti]`
è¡¨ç¤ºï¼š

  * `lefti` æ˜¯ç¬¬ `i` åº§å»ºç­‘ç‰©å·¦è¾¹ç¼˜çš„ `x` åæ ‡ã€‚
  * `righti` æ˜¯ç¬¬ `i` åº§å»ºç­‘ç‰©å³è¾¹ç¼˜çš„ `x` åæ ‡ã€‚
  * `heighti` æ˜¯ç¬¬ `i` åº§å»ºç­‘ç‰©çš„é«˜åº¦ã€‚

ä½ å¯ä»¥å‡è®¾æ‰€æœ‰çš„å»ºç­‘éƒ½æ˜¯å®Œç¾çš„é•¿æ–¹å½¢ï¼Œåœ¨é«˜åº¦ä¸º `0` çš„ç»å¯¹å¹³å¦çš„è¡¨é¢ä¸Šã€‚

**å¤©é™…çº¿** åº”è¯¥è¡¨ç¤ºä¸ºç”± â€œå…³é”®ç‚¹â€ ç»„æˆçš„åˆ—è¡¨ï¼Œæ ¼å¼ `[[x1,y1],[x2,y2],...]` ï¼Œå¹¶æŒ‰ **x åæ ‡** è¿›è¡Œ **æ’åº**
ã€‚**å…³é”®ç‚¹æ˜¯æ°´å¹³çº¿æ®µçš„å·¦ç«¯ç‚¹** ã€‚åˆ—è¡¨ä¸­æœ€åä¸€ä¸ªç‚¹æ˜¯æœ€å³ä¾§å»ºç­‘ç‰©çš„ç»ˆç‚¹ï¼Œ`y` åæ ‡å§‹ç»ˆä¸º `0`
ï¼Œä»…ç”¨äºæ ‡è®°å¤©é™…çº¿çš„ç»ˆç‚¹ã€‚æ­¤å¤–ï¼Œä»»ä½•ä¸¤ä¸ªç›¸é‚»å»ºç­‘ç‰©ä¹‹é—´çš„åœ°é¢éƒ½åº”è¢«è§†ä¸ºå¤©é™…çº¿è½®å»“çš„ä¸€éƒ¨åˆ†ã€‚

**æ³¨æ„ï¼š** è¾“å‡ºå¤©é™…çº¿ä¸­ä¸å¾—æœ‰è¿ç»­çš„ç›¸åŒé«˜åº¦çš„æ°´å¹³çº¿ã€‚ä¾‹å¦‚ `[...[2 3], [4 5], [7 5], [11 5], [12 7]...]`
æ˜¯ä¸æ­£ç¡®çš„ç­”æ¡ˆï¼›ä¸‰æ¡é«˜åº¦ä¸º 5 çš„çº¿åº”è¯¥åœ¨æœ€ç»ˆè¾“å‡ºä¸­åˆå¹¶ä¸ºä¸€ä¸ªï¼š`[...[2 3], [4 5], [12 7], ...]`



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/12/01/merged.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** buildings = [[2,9,10],[3,7,15],[5,12,12],[15,20,10],[19,24,8]]
> 
> **è¾“å‡ºï¼š**[[2,10],[3,15],[7,12],[12,0],[15,10],[20,8],[24,0]]
> 
> **è§£é‡Šï¼š**
> 
> å›¾ A**** æ˜¾ç¤ºè¾“å…¥çš„æ‰€æœ‰å»ºç­‘ç‰©çš„ä½ç½®å’Œé«˜åº¦ï¼Œ
> 
> å›¾ B æ˜¾ç¤ºç”±è¿™äº›å»ºç­‘ç‰©å½¢æˆçš„å¤©é™…çº¿ã€‚å›¾ B ä¸­çš„çº¢ç‚¹è¡¨ç¤ºè¾“å‡ºåˆ—è¡¨ä¸­çš„å…³é”®ç‚¹ã€‚

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** buildings = [[0,2,3],[2,5,3]]
> 
> **è¾“å‡ºï¼š**[[0,3],[5,0]]
> 
> 



**æç¤ºï¼š**

  * `1 <= buildings.length <= 10^4`
  * `0 <= lefti < righti <= 231 - 1`
  * `1 <= heighti <= 231 - 1`
  * `buildings` æŒ‰ `lefti` éé€’å‡æ’åº


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 699 | [æ‰è½çš„æ–¹å—](https://leetcode.com/problems/falling-squares) |  |  [`çº¿æ®µæ ‘`](/outline/tag/segment-tree.md) [`æ•°ç»„`](/outline/tag/array.md) [`æœ‰åºé›†åˆ`](/outline/tag/ordered-set.md) | <font color=#ff334b>Hard</font> |
| 2381 | [å­—æ¯ç§»ä½ II](https://leetcode.com/problems/shifting-letters-ii) |  |  [`æ•°ç»„`](/outline/tag/array.md) [`å­—ç¬¦ä¸²`](/outline/tag/string.md) [`å‰ç¼€å’Œ`](/outline/tag/prefix-sum.md) | <font color=#ffb800>Medium</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
