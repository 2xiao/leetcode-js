# [1932. åˆå¹¶å¤šæ£µäºŒå‰æœç´¢æ ‘](https://leetcode.com/problems/merge-bsts-to-create-single-bst)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/merge-bsts-to-create-single-bst)

## é¢˜ç›®

You are given `n` **BST (binary search tree) root nodes** for `n` separate
BSTs stored in an array `trees` (**0-indexed**). Each BST in `trees` has **at
most 3 nodes** , and no two roots have the same value. In one operation, you
can:

  * Select two **distinct** indices `i` and `j` such that the value stored at one of the **leaves** of `trees[i]` is equal to the **root value** of `trees[j]`.
  * Replace the leaf node in `trees[i]` with `trees[j]`.
  * Remove `trees[j]` from `trees`.

Return _the**root** of the resulting BST if it is possible to form a valid BST
after performing _`n - 1` _operations, or_ __`null` _if it is impossible to
create a valid BST_.

A BST (binary search tree) is a binary tree where each node satisfies the
following property:

  * Every node in the node's left subtree has a value **strictly less**  than the node's value.
  * Every node in the node's right subtree has a value **strictly greater**  than the node's value.

A leaf is a node that has no children.



**Example 1:**

![](https://assets.leetcode.com/uploads/2021/06/08/d1.png)

> Input: trees = [[2,1],[3,2,5],[5,4]]
> 
> Output: [3,2,5,1,null,4]
> 
> Explanation:
> 
> In the first operation, pick i=1 and j=0, and merge trees[0] into trees[1].
> 
> Delete trees[0], so trees = [[3,2,5,1],[5,4]].
> 
> ![](https://assets.leetcode.com/uploads/2021/06/24/diagram.png)
> 
> In the second operation, pick i=0 and j=1, and merge trees[1] into trees[0].
> 
> Delete trees[1], so trees = [[3,2,5,1,null,4]].
> 
> ![](https://assets.leetcode.com/uploads/2021/06/24/diagram-2.png)
> 
> The resulting tree, shown above, is a valid BST, so return its root.

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/06/08/d2.png)

> Input: trees = [[5,3,8],[3,2,6]]
> 
> Output: []
> 
> Explanation:
> 
> Pick i=0 and j=1 and merge trees[1] into trees[0].
> 
> Delete trees[1], so trees = [[5,3,8,2,6]].
> 
> ![](https://assets.leetcode.com/uploads/2021/06/24/diagram-3.png)
> 
> The resulting tree is shown above. This is the only valid operation that can be performed, but the resulting tree is not a valid BST, so return null.

**Example 3:**

![](https://assets.leetcode.com/uploads/2021/06/08/d3.png)

> Input: trees = [[5,4],[3]]
> 
> Output: []
> 
> Explanation: It is impossible to perform any operations.

**Constraints:**

  * `n == trees.length`
  * `1 <= n <= 5 * 10^4`
  * The number of nodes in each tree is in the range `[1, 3]`.
  * Each node in the input may have children but no grandchildren.
  * No two roots of `trees` have the same value.
  * All the trees in the input are **valid BSTs**.
  * `1 <= TreeNode.val <= 5 * 10^4`.


## é¢˜ç›®å¤§æ„

ç»™ä½  `n` ä¸ª **äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹** ï¼Œå­˜å‚¨åœ¨æ•°ç»„ `trees` ä¸­ï¼ˆ**ä¸‹æ ‡ä» 0 å¼€å§‹** ï¼‰ï¼Œå¯¹åº” `n`
æ£µä¸åŒçš„äºŒå‰æœç´¢æ ‘ã€‚`trees` ä¸­çš„æ¯æ£µäºŒå‰æœç´¢æ ‘ **æœ€å¤šæœ‰ 3 ä¸ªèŠ‚ç‚¹** ï¼Œä¸”ä¸å­˜åœ¨å€¼ç›¸åŒçš„ä¸¤ä¸ªæ ¹èŠ‚ç‚¹ã€‚åœ¨ä¸€æ­¥æ“ä½œä¸­ï¼Œå°†ä¼šå®Œæˆä¸‹è¿°æ­¥éª¤ï¼š

  * é€‰æ‹©ä¸¤ä¸ª **ä¸åŒçš„** ä¸‹æ ‡ `i` å’Œ `j` ï¼Œè¦æ±‚æ»¡è¶³åœ¨ `trees[i]` ä¸­çš„æŸä¸ª **å¶èŠ‚ç‚¹** çš„å€¼ç­‰äº `trees[j]` çš„ **æ ¹èŠ‚ç‚¹çš„å€¼** ã€‚
  * ç”¨ `trees[j]` æ›¿æ¢ `trees[i]` ä¸­çš„é‚£ä¸ªå¶èŠ‚ç‚¹ã€‚
  * ä» `trees` ä¸­ç§»é™¤ `trees[j]` ã€‚

å¦‚æœåœ¨æ‰§è¡Œ `n - 1` æ¬¡æ“ä½œåï¼Œèƒ½å½¢æˆä¸€æ£µæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ï¼Œåˆ™è¿”å›ç»“æœäºŒå‰æ ‘çš„ **æ ¹èŠ‚ç‚¹** ï¼›å¦‚æœæ— æ³•æ„é€ ä¸€æ£µæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ _ï¼Œ_ è¿”å›
__`null` ã€‚

äºŒå‰æœç´¢æ ‘æ˜¯ä¸€ç§äºŒå‰æ ‘ï¼Œä¸”æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹å‡æ»¡è¶³ä¸‹è¿°å±æ€§ï¼š

  * ä»»æ„èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸­çš„å€¼éƒ½ **ä¸¥æ ¼å°äº**  æ­¤èŠ‚ç‚¹çš„å€¼ã€‚
  * ä»»æ„èŠ‚ç‚¹çš„å³å­æ ‘ä¸­çš„å€¼éƒ½ **ä¸¥æ ¼å¤§äº**  æ­¤èŠ‚ç‚¹çš„å€¼ã€‚

å¶èŠ‚ç‚¹æ˜¯ä¸å«å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/06/08/d1.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** trees = [[2,1],[3,2,5],[5,4]]
> 
> **è¾“å‡ºï¼š**[3,2,5,1,null,4]
> 
> **è§£é‡Šï¼š**
> 
> ç¬¬ä¸€æ­¥æ“ä½œä¸­ï¼Œé€‰å‡º i=1 å’Œ j=0 ï¼Œå¹¶å°† trees[0] åˆå¹¶åˆ° trees[1] ä¸­ã€‚
> 
> åˆ é™¤ trees[0] ï¼Œtrees = [[3,2,5,1],[5,4]] ã€‚
> 
> ![](https://assets.leetcode.com/uploads/2021/06/24/diagram.png)
> 
> åœ¨ç¬¬äºŒæ­¥æ“ä½œä¸­ï¼Œé€‰å‡º i=0 å’Œ j=1 ï¼Œå°† trees[1] åˆå¹¶åˆ° trees[0] ä¸­ã€‚
> 
> åˆ é™¤ trees[1] ï¼Œtrees = [[3,2,5,1,null,4]] ã€‚
> 
> ![](https://assets.leetcode.com/uploads/2021/06/24/diagram-2.png)
> 
> ç»“æœæ ‘å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸ºä¸€æ£µæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ï¼Œæ‰€ä»¥è¿”å›è¯¥æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/06/08/d2.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** trees = [[5,3,8],[3,2,6]]
> 
> **è¾“å‡ºï¼š**[]
> 
> **è§£é‡Šï¼š**
> 
> é€‰å‡º i=0 å’Œ j=1 ï¼Œç„¶åå°† trees[1] åˆå¹¶åˆ° trees[0] ä¸­ã€‚
> 
> åˆ é™¤ trees[1] ï¼Œtrees = [[5,3,8,2,6]] ã€‚
> 
> ![](https://assets.leetcode.com/uploads/2021/06/24/diagram-3.png)
> 
> ç»“æœæ ‘å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ä»…èƒ½æ‰§è¡Œä¸€æ¬¡æœ‰æ•ˆçš„æ“ä½œï¼Œä½†ç»“æœæ ‘ä¸æ˜¯ä¸€æ£µæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ï¼Œæ‰€ä»¥è¿”å› null ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

![](https://assets.leetcode.com/uploads/2021/06/08/d3.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** trees = [[5,4],[3]]
> 
> **è¾“å‡ºï¼š**[]
> 
> **è§£é‡Šï¼š** æ— æ³•æ‰§è¡Œä»»ä½•æ“ä½œã€‚
> 
> 



**æç¤ºï¼š**

  * `n == trees.length`
  * `1 <= n <= 5 * 10^4`
  * æ¯æ£µæ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ `[1, 3]` å†…ã€‚
  * è¾“å…¥æ•°æ®çš„æ¯ä¸ªèŠ‚ç‚¹å¯èƒ½æœ‰å­èŠ‚ç‚¹ä½†ä¸å­˜åœ¨å­èŠ‚ç‚¹çš„å­èŠ‚ç‚¹
  * `trees` ä¸­ä¸å­˜åœ¨ä¸¤æ£µæ ‘æ ¹èŠ‚ç‚¹å€¼ç›¸åŒçš„æƒ…å†µã€‚
  * è¾“å…¥ä¸­çš„æ‰€æœ‰æ ‘éƒ½æ˜¯ **æœ‰æ•ˆçš„äºŒå‰æ ‘æœç´¢æ ‘** ã€‚
  * `1 <= TreeNode.val <= 5 * 10^4`.


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```