# [351. å®‰å“ç³»ç»Ÿæ‰‹åŠ¿è§£é” ğŸ”’](https://2xiao.github.io/leetcode-js/problem/0351.html)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`å›æº¯`](/tag/backtracking.md) [`çŠ¶æ€å‹ç¼©`](/tag/bitmask.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/android-unlock-patterns) [`LeetCode`](https://leetcode.com/problems/android-unlock-patterns)

## é¢˜ç›®

Android devices have a special lock screen with a `3 x 3` grid of dots. Users
can set an "unlock pattern" by connecting the dots in a specific sequence,
forming a series of joined line segments where each segment's endpoints are
two consecutive dots in the sequence. A sequence of `k` dots is a **valid**
unlock pattern if both of the following are true:

  * All the dots in the sequence are **distinct**.
  * If the line segment connecting two consecutive dots in the sequence passes through the **center** of any other dot, the other dot **must have previously appeared** in the sequence. No jumps through the center non-selected dots are allowed. 
> 
> * For example, connecting dots `2` and `9` without dots `5` or `6` appearing beforehand is valid because the line from dot `2` to dot `9` does not pass through the center of either dot `5` or `6`.
> 
> * However, connecting dots `1` and `3` without dot `2` appearing beforehand is invalid because the line from dot `1` to dot `3` passes through the center of dot `2`.

Here are some example valid and invalid unlock patterns:

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0300-0399/0351.Android%20Unlock%20Patterns/images/android-
unlock.png)

  * The 1st pattern `[4,1,3,6]` is invalid because the line connecting dots `1` and `3` pass through dot `2`, but dot `2` did not previously appear in the sequence.
  * The 2nd pattern `[4,1,9,2]` is invalid because the line connecting dots `1` and `9` pass through dot `5`, but dot `5` did not previously appear in the sequence.
  * The 3rd pattern `[2,4,1,3,6]` is valid because it follows the conditions. The line connecting dots `1` and `3` meets the condition because dot `2` previously appeared in the sequence.
  * The 4th pattern `[6,5,4,1,9,2]` is valid because it follows the conditions. The line connecting dots `1` and `9` meets the condition because dot `5` previously appeared in the sequence.

Given two integers `m` and `n`, return _the**number of unique and valid unlock
patterns** of the Android grid lock screen that consist of **at least** _`m`
_keys and**at most** _`n` _keys._

Two unlock patterns are considered **unique** if there is a dot in one
sequence that is not in the other, or the order of the dots is different.



**Example 1:**

> Input: m = 1, n = 1
> 
> Output: 9

**Example 2:**

> Input: m = 1, n = 2
> 
> Output: 65

**Constraints:**

  * `1 <= m, n <= 9`


## é¢˜ç›®å¤§æ„

æˆ‘ä»¬éƒ½çŸ¥é“å®‰å“æœ‰ä¸ªæ‰‹åŠ¿è§£é”çš„ç•Œé¢ï¼Œæ˜¯ä¸€ä¸ª `3 x 3`**** çš„ç‚¹æ‰€ç»˜åˆ¶å‡ºæ¥çš„ç½‘æ ¼ã€‚ç”¨æˆ·å¯ä»¥è®¾ç½®ä¸€ä¸ª â€œè§£é”æ¨¡å¼â€
ï¼Œé€šè¿‡è¿æ¥ç‰¹å®šåºåˆ—ä¸­çš„ç‚¹ï¼Œå½¢æˆä¸€ç³»åˆ—å½¼æ­¤è¿æ¥çš„çº¿æ®µï¼Œæ¯ä¸ªçº¿æ®µçš„ç«¯ç‚¹éƒ½æ˜¯åºåˆ—ä¸­ä¸¤ä¸ªè¿ç»­çš„ç‚¹ã€‚å¦‚æœæ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼Œåˆ™ `k` ç‚¹åºåˆ—æ˜¯æœ‰æ•ˆçš„è§£é”æ¨¡å¼ï¼š

  * è§£é”æ¨¡å¼ä¸­çš„æ‰€æœ‰ç‚¹ **äº’ä¸ç›¸åŒ** ã€‚
  * å‡å¦‚æ¨¡å¼ä¸­ä¸¤ä¸ªè¿ç»­ç‚¹çš„çº¿æ®µéœ€è¦ç»è¿‡å…¶ä»–ç‚¹çš„ **ä¸­å¿ƒ** ï¼Œé‚£ä¹ˆè¦ç»è¿‡çš„ç‚¹ **å¿…é¡»æå‰å‡ºç°** åœ¨åºåˆ—ä¸­ï¼ˆå·²ç»ç»è¿‡ï¼‰ï¼Œä¸èƒ½è·¨è¿‡ä»»ä½•è¿˜æœªè¢«ç»è¿‡çš„ç‚¹ã€‚ 
> 
> * ä¾‹å¦‚ï¼Œç‚¹ `5` æˆ– `6` æ²¡æœ‰æå‰å‡ºç°çš„æƒ…å†µä¸‹è¿æ¥ç‚¹ `2` å’Œ `9` æ˜¯æœ‰æ•ˆçš„ï¼Œå› ä¸ºä»ç‚¹ `2` åˆ°ç‚¹ `9` çš„çº¿æ²¡æœ‰ç©¿è¿‡ç‚¹ `5` æˆ– `6` çš„ä¸­å¿ƒã€‚
> 
> * ç„¶è€Œï¼Œç‚¹ `2` æ²¡æœ‰æå‰å‡ºç°çš„æƒ…å†µä¸‹è¿æ¥ç‚¹ `1` å’Œ `3` æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºä»åœ†ç‚¹ `1` åˆ°åœ†ç‚¹ `3` çš„ç›´çº¿ç©¿è¿‡åœ†ç‚¹ `2` çš„ä¸­å¿ƒã€‚

ä»¥ä¸‹æ˜¯ä¸€äº›æœ‰æ•ˆå’Œæ— æ•ˆè§£é”æ¨¡å¼çš„ç¤ºä¾‹ï¼š

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0300-0399/0351.Android%20Unlock%20Patterns/images/android-
unlock.png)

  * **æ— æ•ˆæ‰‹åŠ¿ï¼š**`[4,1,3,6]` ï¼Œè¿æ¥ç‚¹ 1 å’Œç‚¹ 3 æ—¶ç»è¿‡äº†æœªè¢«è¿æ¥è¿‡çš„ 2 å·ç‚¹ã€‚
  * **æ— æ•ˆæ‰‹åŠ¿ï¼š**`[4,1,9,2]` ï¼Œè¿æ¥ç‚¹ 1 å’Œç‚¹ 9 æ—¶ç»è¿‡äº†æœªè¢«è¿æ¥è¿‡çš„ 5 å·ç‚¹ã€‚
  * **æœ‰æ•ˆæ‰‹åŠ¿ï¼š**`[2,4,1,3,6]` ï¼Œè¿æ¥ç‚¹ 1 å’Œç‚¹ 3 æ˜¯æœ‰æ•ˆçš„ï¼Œå› ä¸ºè™½ç„¶å®ƒç»è¿‡äº†ç‚¹ 2 ï¼Œä½†æ˜¯ç‚¹ 2 åœ¨è¯¥æ‰‹åŠ¿ä¸­ä¹‹å‰å·²ç»è¢«è¿è¿‡äº†ã€‚
  * **æœ‰æ•ˆæ‰‹åŠ¿ï¼š**`[6,5,4,1,9,2]` ï¼Œè¿æ¥ç‚¹ 1 å’Œç‚¹ 9 æ˜¯æœ‰æ•ˆçš„ï¼Œå› ä¸ºè™½ç„¶å®ƒç»è¿‡äº†æŒ‰é”® 5 ï¼Œä½†æ˜¯ç‚¹ 5 åœ¨è¯¥æ‰‹åŠ¿ä¸­ä¹‹å‰å·²ç»è¢«è¿è¿‡äº†ã€‚

ç»™ä½ ä¸¤ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«ä¸º â€‹â€‹`m` å’Œ `n` ï¼Œé‚£ä¹ˆè¯·è¿”å›æœ‰å¤šå°‘ç§ **ä¸åŒä¸”æœ‰æ•ˆçš„è§£é”æ¨¡å¼** ï¼Œæ˜¯ **è‡³å°‘** éœ€è¦ç»è¿‡ `m` ä¸ªç‚¹ï¼Œä½†æ˜¯
**ä¸è¶…è¿‡** `n` ä¸ªç‚¹çš„ã€‚

ä¸¤ä¸ªè§£é”æ¨¡å¼ **ä¸åŒ** éœ€æ»¡è¶³ï¼šç»è¿‡çš„ç‚¹ä¸åŒæˆ–è€…ç»è¿‡ç‚¹çš„é¡ºåºä¸åŒã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** m = 1, n = 1
> 
> **è¾“å‡ºï¼š** 9
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** m = 1, n = 2
> 
> **è¾“å‡ºï¼š** 65
> 
> 



**æç¤ºï¼š**

  * `1 <= m, n <= 9`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```