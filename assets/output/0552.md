# [552. å­¦ç”Ÿå‡ºå‹¤è®°å½• II](https://leetcode.com/problems/student-attendance-record-ii)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/student-attendance-record-ii)

## é¢˜ç›®

An attendance record for a student can be represented as a string where each
character signifies whether the student was absent, late, or present on that
day. The record only contains the following three characters:

  * `'A'`: Absent.
  * `'L'`: Late.
  * `'P'`: Present.

Any student is eligible for an attendance award if they meet **both** of the
following criteria:

  * The student was absent (`'A'`) for **strictly** fewer than 2 days **total**.
  * The student was **never** late (`'L'`) for 3 or more **consecutive** days.

Given an integer `n`, return _the**number** of possible attendance records of
length_ `n` _that make a student eligible for an attendance award. The answer
may be very large, so return it**modulo** _`109 + 7`.



**Example 1:**

> Input: n = 2
> 
> Output: 8
> 
> Explanation: There are 8 records with length 2 that are eligible for an award:
> 
> "PP", "AP", "PA", "LP", "PL", "AL", "LA", "LL"
> 
> Only "AA" is not eligible because there are 2 absences (there need to be fewer than 2).

**Example 2:**

> Input: n = 1
> 
> Output: 3

**Example 3:**

> Input: n = 10101
> 
> Output: 183236316

**Constraints:**

  * `1 <= n <= 10^5`


## é¢˜ç›®å¤§æ„

å¯ä»¥ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºä¸€ä¸ªå­¦ç”Ÿçš„å‡ºå‹¤è®°å½•ï¼Œå…¶ä¸­çš„æ¯ä¸ªå­—ç¬¦ç”¨æ¥æ ‡è®°å½“å¤©çš„å‡ºå‹¤æƒ…å†µï¼ˆç¼ºå‹¤ã€è¿Ÿåˆ°ã€åˆ°åœºï¼‰ã€‚è®°å½•ä¸­åªå«ä¸‹é¢ä¸‰ç§å­—ç¬¦ï¼š

  * `'A'`ï¼šAbsentï¼Œç¼ºå‹¤
  * `'L'`ï¼šLateï¼Œè¿Ÿåˆ°
  * `'P'`ï¼šPresentï¼Œåˆ°åœº

å¦‚æœå­¦ç”Ÿèƒ½å¤Ÿ **åŒæ—¶** æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ï¼Œåˆ™å¯ä»¥è·å¾—å‡ºå‹¤å¥–åŠ±ï¼š

  * æŒ‰ **æ€»å‡ºå‹¤** è®¡ï¼Œå­¦ç”Ÿç¼ºå‹¤ï¼ˆ`'A'`ï¼‰**ä¸¥æ ¼** å°‘äºä¸¤å¤©ã€‚
  * å­¦ç”Ÿ **ä¸ä¼š** å­˜åœ¨ **è¿ç»­** 3 å¤©æˆ– **è¿ç»­** 3 å¤©ä»¥ä¸Šçš„è¿Ÿåˆ°ï¼ˆ`'L'`ï¼‰è®°å½•ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¡¨ç¤ºå‡ºå‹¤è®°å½•çš„é•¿åº¦ï¼ˆæ¬¡æ•°ï¼‰ã€‚è¯·ä½ è¿”å›è®°å½•é•¿åº¦ä¸º `n` æ—¶ï¼Œå¯èƒ½è·å¾—å‡ºå‹¤å¥–åŠ±çš„è®°å½•æƒ…å†µ **æ•°é‡** ã€‚ç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥è¿”å›å¯¹
`109 + 7` **å–ä½™** çš„ç»“æœã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 2
> 
> **è¾“å‡ºï¼š** 8
> 
> **è§£é‡Šï¼š** æœ‰ 8 ç§é•¿åº¦ä¸º 2 çš„è®°å½•å°†è¢«è§†ä¸ºå¯å¥–åŠ±ï¼š
> 
> "PP" , "AP", "PA", "LP", "PL", "AL", "LA", "LL" 
> 
> åªæœ‰"AA"ä¸ä¼šè¢«è§†ä¸ºå¯å¥–åŠ±ï¼Œå› ä¸ºç¼ºå‹¤æ¬¡æ•°ä¸º 2 æ¬¡ï¼ˆéœ€è¦å°‘äº 2 æ¬¡ï¼‰ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 1
> 
> **è¾“å‡ºï¼š** 3
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 10101
> 
> **è¾“å‡ºï¼š** 183236316
> 
> 



**æç¤ºï¼š**

  * `1 <= n <= 10^5`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 551 | [å­¦ç”Ÿå‡ºå‹¤è®°å½• I](https://leetcode.com/problems/student-attendance-record-i) |  |  [`å­—ç¬¦ä¸²`](/leetcode/outline/tag/string.md) | <font color=#15bd66>Easy</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
