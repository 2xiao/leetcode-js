# [2106. æ‘˜æ°´æœ](https://leetcode.com/problems/maximum-fruits-harvested-after-at-most-k-steps)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/maximum-fruits-harvested-after-at-most-k-steps)

## é¢˜ç›®

Fruits are available at some positions on an infinite x-axis. You are given a
2D integer array `fruits` where `fruits[i] = [positioni, amounti]` depicts
`amounti` fruits at the position `positioni`. `fruits` is already **sorted**
by `positioni` in **ascending order** , and each `positioni` is **unique**.

You are also given an integer `startPos` and an integer `k`. Initially, you
are at the position `startPos`. From any position, you can either walk to the
**left or right**. It takes **one step** to move **one unit** on the x-axis,
and you can walk **at most** `k` steps in total. For every position you reach,
you harvest all the fruits at that position, and the fruits will disappear
from that position.

Return _the**maximum total number** of fruits you can harvest_.



**Example 1:**

![](https://assets.leetcode.com/uploads/2021/11/21/1.png)

> Input: fruits = [[2,8],[6,3],[8,6]], startPos = 5, k = 4
> 
> Output: 9
> 
> Explanation: 
> 
> The optimal way is to:
> - Move right to position 6 and harvest 3 fruits
> - Move right to position 8 and harvest 6 fruits
> 
> You moved 3 steps and harvested 3 + 6 = 9 fruits in total.

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/11/21/2.png)

> Input: fruits = [[0,9],[4,1],[5,7],[6,2],[7,4],[10,9]], startPos = 5, k = 4
> 
> Output: 14
> 
> Explanation: 
> 
> You can move at most k = 4 steps, so you cannot reach position 0 nor 10.
> 
> The optimal way is to:
> - Harvest the 7 fruits at the starting position 5
> - Move left to position 4 and harvest 1 fruit
> - Move right to position 6 and harvest 2 fruits
> - Move right to position 7 and harvest 4 fruits
> 
> You moved 1 + 3 = 4 steps and harvested 7 + 1 + 2 + 4 = 14 fruits in total.

**Example 3:**

![](https://assets.leetcode.com/uploads/2021/11/21/3.png)

> Input: fruits = [[0,3],[6,4],[8,5]], startPos = 3, k = 2
> 
> Output: 0
> 
> Explanation:
> 
> You can move at most k = 2 steps and cannot reach any position with fruits.

**Constraints:**

  * `1 <= fruits.length <= 10^5`
  * `fruits[i].length == 2`
  * `0 <= startPos, positioni <= 2 * 10^5`
  * `positioni-1 < positioni` for any `i > 0` (**0-indexed**)
  * `1 <= amounti <= 10^4`
  * `0 <= k <= 2 * 10^5`


## é¢˜ç›®å¤§æ„

åœ¨ä¸€ä¸ªæ— é™çš„ x åæ ‡è½´ä¸Šï¼Œæœ‰è®¸å¤šæ°´æœåˆ†å¸ƒåœ¨å…¶ä¸­æŸäº›ä½ç½®ã€‚ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `fruits` ï¼Œå…¶ä¸­ `fruits[i] = [positioni,
amounti]` è¡¨ç¤ºå…±æœ‰ `amounti` ä¸ªæ°´æœæ”¾ç½®åœ¨ `positioni` ä¸Šã€‚`fruits` å·²ç»æŒ‰ `positioni`
**å‡åºæ’åˆ—** ï¼Œæ¯ä¸ª `positioni` **äº’ä¸ç›¸åŒ** ã€‚

å¦ç»™ä½ ä¸¤ä¸ªæ•´æ•° `startPos` å’Œ `k` ã€‚æœ€åˆï¼Œä½ ä½äº `startPos` ã€‚ä»ä»»ä½•ä½ç½®ï¼Œä½ å¯ä»¥é€‰æ‹© **å‘å·¦æˆ–è€…å‘å³** èµ°ã€‚åœ¨ x
è½´ä¸Šæ¯ç§»åŠ¨ **ä¸€ä¸ªå•ä½** ï¼Œå°±è®°ä½œ **ä¸€æ­¥** ã€‚ä½ æ€»å…±å¯ä»¥èµ° **æœ€å¤š** `k`
æ­¥ã€‚ä½ æ¯è¾¾åˆ°ä¸€ä¸ªä½ç½®ï¼Œéƒ½ä¼šæ‘˜æ‰å…¨éƒ¨çš„æ°´æœï¼Œæ°´æœä¹Ÿå°†ä»è¯¥ä½ç½®æ¶ˆå¤±ï¼ˆä¸ä¼šå†ç”Ÿï¼‰ã€‚

è¿”å›ä½ å¯ä»¥æ‘˜åˆ°æ°´æœçš„ **æœ€å¤§æ€»æ•°** ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/11/21/1.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** fruits = [[2,8],[6,3],[8,6]], startPos = 5, k = 4
> 
> **è¾“å‡ºï¼š** 9
> 
> **è§£é‡Šï¼š**
> 
> æœ€ä½³è·¯çº¿ä¸ºï¼š
> - å‘å³ç§»åŠ¨åˆ°ä½ç½® 6 ï¼Œæ‘˜åˆ° 3 ä¸ªæ°´æœ
> - å‘å³ç§»åŠ¨åˆ°ä½ç½® 8 ï¼Œæ‘˜åˆ° 6 ä¸ªæ°´æœ
> 
> ç§»åŠ¨ 3 æ­¥ï¼Œå…±æ‘˜åˆ° 3 + 6 = 9 ä¸ªæ°´æœ
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/11/21/2.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** fruits = [[0,9],[4,1],[5,7],[6,2],[7,4],[10,9]], startPos = 5, k = 4
> 
> **è¾“å‡ºï¼š** 14
> 
> **è§£é‡Šï¼š**
> 
> å¯ä»¥ç§»åŠ¨æœ€å¤š k = 4 æ­¥ï¼Œæ‰€ä»¥æ— æ³•åˆ°è¾¾ä½ç½® 0 å’Œä½ç½® 10 ã€‚
> 
> æœ€ä½³è·¯çº¿ä¸ºï¼š
> - åœ¨åˆå§‹ä½ç½® 5 ï¼Œæ‘˜åˆ° 7 ä¸ªæ°´æœ
> - å‘å·¦ç§»åŠ¨åˆ°ä½ç½® 4 ï¼Œæ‘˜åˆ° 1 ä¸ªæ°´æœ
> - å‘å³ç§»åŠ¨åˆ°ä½ç½® 6 ï¼Œæ‘˜åˆ° 2 ä¸ªæ°´æœ
> - å‘å³ç§»åŠ¨åˆ°ä½ç½® 7 ï¼Œæ‘˜åˆ° 4 ä¸ªæ°´æœ
> 
> ç§»åŠ¨ 1 + 3 = 4 æ­¥ï¼Œå…±æ‘˜åˆ° 7 + 1 + 2 + 4 = 14 ä¸ªæ°´æœ
> 
> 

**ç¤ºä¾‹ 3ï¼š**

![](https://assets.leetcode.com/uploads/2021/11/21/3.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** fruits = [[0,3],[6,4],[8,5]], startPos = 3, k = 2
> 
> **è¾“å‡ºï¼š** 0
> 
> **è§£é‡Šï¼š**
> 
> æœ€å¤šå¯ä»¥ç§»åŠ¨ k = 2 æ­¥ï¼Œæ— æ³•åˆ°è¾¾ä»»ä¸€æœ‰æ°´æœçš„åœ°æ–¹
> 
> 



**æç¤ºï¼š**

  * `1 <= fruits.length <= 10^5`
  * `fruits[i].length == 2`
  * `0 <= startPos, positioni <= 2 * 10^5`
  * å¯¹äºä»»æ„ `i > 0` ï¼Œ`positioni-1 < positioni` å‡æˆç«‹ï¼ˆä¸‹æ ‡ä» **0** å¼€å§‹è®¡æ•°ï¼‰
  * `1 <= amounti <= 10^4`
  * `0 <= k <= 2 * 10^5`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 1383 | [æœ€å¤§çš„å›¢é˜Ÿè¡¨ç°å€¼](https://leetcode.com/problems/maximum-performance-of-a-team) |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) [`æ’åº`](/tag/sorting.md) `1+` | <font color=#ff334b>Hard</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
