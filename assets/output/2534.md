# [2534. é€šè¿‡é—¨çš„æ—¶é—´ ğŸ”’](https://2xiao.github.io/leetcode-js/problem/2534.html)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`é˜Ÿåˆ—`](/tag/queue.md) [`æ•°ç»„`](/tag/array.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/time-taken-to-cross-the-door) [`LeetCode`](https://leetcode.com/problems/time-taken-to-cross-the-door)

## é¢˜ç›®

There are `n` persons numbered from `0` to `n - 1` and a door. Each person can
enter or exit through the door once, taking one second.

You are given a **non-decreasing** integer array `arrival` of size `n`, where
`arrival[i]` is the arrival time of the `ith` person at the door. You are also
given an array `state` of size `n`, where `state[i]` is `0` if person `i`
wants to enter through the door or `1` if they want to exit through the door.

If two or more persons want to use the door at the **same** time, they follow
the following rules:

  * If the door was **not** used in the previous second, then the person who wants to **exit** goes first.
  * If the door was used in the previous second for **entering** , the person who wants to enter goes first.
  * If the door was used in the previous second for **exiting** , the person who wants to **exit** goes first.
  * If multiple persons want to go in the same direction, the person with the **smallest** index goes first.

Return _an array_`answer` _of size_`n` _where_`answer[i]`_is the second at
which the_`ith` _person crosses the door_.

**Note** that:

  * Only one person can cross the door at each second.
  * A person may arrive at the door and wait without entering or exiting to follow the mentioned rules.



**Example 1:**

> Input: arrival = [0,1,1,2,4], state = [0,1,0,0,1]
> 
> Output: [0,3,1,2,4]
> 
> Explanation: At each second we have the following:
> - At t = 0: Person 0 is the only one who wants to enter, so they just enter through the door.
> - At t = 1: Person 1 wants to exit, and person 2 wants to enter. Since the door was used the previous second for entering, person 2 enters.
> - At t = 2: Person 1 still wants to exit, and person 3 wants to enter. Since the door was used the previous second for entering, person 3 enters.
> - At t = 3: Person 1 is the only one who wants to exit, so they just exit through the door.
> - At t = 4: Person 4 is the only one who wants to exit, so they just exit through the door.

**Example 2:**

> Input: arrival = [0,0,0], state = [1,0,1]
> 
> Output: [0,2,1]
> 
> Explanation: At each second we have the following:
> - At t = 0: Person 1 wants to enter while persons 0 and 2 want to exit. Since the door was not used in the previous second, the persons who want to exit get to go first. Since person 0 has a smaller index, they exit first.
> - At t = 1: Person 1 wants to enter, and person 2 wants to exit. Since the door was used in the previous second for exiting, person 2 exits.
> - At t = 2: Person 1 is the only one who wants to enter, so they just enter through the door.

**Constraints:**

  * `n == arrival.length == state.length`
  * `1 <= n <= 10^5`
  * `0 <= arrival[i] <= n`
  * `arrival` is sorted in **non-decreasing** order.
  * `state[i]` is either `0` or `1`.


## é¢˜ç›®å¤§æ„

`n` ä¸ªäººï¼ŒæŒ‰ä» `0` åˆ° `n - 1` ç¼–å·ã€‚ç°åœ¨æœ‰ä¸€æ‰‡é—¨ï¼Œæ¯ä¸ªäººåªèƒ½é€šè¿‡é—¨è¿›å…¥æˆ–ç¦»å¼€ä¸€æ¬¡ï¼Œè€—æ—¶ä¸€ç§’ã€‚

ç»™ä½ ä¸€ä¸ª **éé€’å‡é¡ºåº** æ’åˆ—çš„æ•´æ•°æ•°ç»„ `arrival` ï¼Œæ•°ç»„é•¿åº¦ä¸º `n` ï¼Œå…¶ä¸­ `arrival[i]` æ˜¯ç¬¬ `i`
ä¸ªäººåˆ°è¾¾é—¨å‰çš„æ—¶é—´ã€‚å¦ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ `state` ï¼Œå…¶ä¸­ `state[i]` æ˜¯ `0` åˆ™è¡¨ç¤ºç¬¬ `i` ä¸ªäººå¸Œæœ›è¿›å…¥è¿™æ‰‡é—¨ï¼Œæ˜¯
`1` åˆ™è¡¨ç¤º TA æƒ³è¦ç¦»å¼€è¿™æ‰‡é—¨ã€‚

å¦‚æœ **åŒæ—¶** æœ‰ä¸¤ä¸ªæˆ–æ›´å¤šäººæƒ³è¦ä½¿ç”¨è¿™æ‰‡é—¨ï¼Œåˆ™å¿…é¡»éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š

  * å¦‚æœå‰ä¸€ç§’ **æ²¡æœ‰** ä½¿ç”¨é—¨ï¼Œé‚£ä¹ˆæƒ³è¦ **ç¦»å¼€** çš„äººä¼šå…ˆç¦»å¼€ã€‚
  * å¦‚æœå‰ä¸€ç§’ä½¿ç”¨é—¨ **è¿›å…¥** ï¼Œé‚£ä¹ˆæƒ³è¦ **è¿›å…¥** çš„äººä¼šå…ˆè¿›å…¥ã€‚
  * å¦‚æœå‰ä¸€ç§’ä½¿ç”¨é—¨ **ç¦»å¼€** ï¼Œé‚£ä¹ˆæƒ³è¦ **ç¦»å¼€** çš„äººä¼šå…ˆç¦»å¼€ã€‚
  * å¦‚æœå¤šä¸ªäººéƒ½æƒ³æœåŒä¸€æ–¹å‘èµ°ï¼ˆéƒ½è¿›å…¥æˆ–éƒ½ç¦»å¼€ï¼‰ï¼Œç¼–å·æœ€å°çš„äººä¼šå…ˆé€šè¿‡é—¨ã€‚

è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ __`answer` __ ï¼Œå…¶ä¸­ __`answer[i]`__ æ˜¯ç¬¬ `i` ä¸ªäººé€šè¿‡é—¨çš„æ—¶åˆ»ï¼ˆç§’ï¼‰ã€‚

**æ³¨æ„ï¼š**

  * æ¯ç§’åªæœ‰ä¸€ä¸ªäººå¯ä»¥é€šè¿‡é—¨ã€‚
  * ä¸ºéµå¾ªä¸Šè¿°è§„åˆ™ï¼Œä¸€ä¸ªäººå¯ä»¥åœ¨åˆ°è¾¾é—¨é™„è¿‘åç­‰å¾…ï¼Œè€Œä¸é€šè¿‡é—¨è¿›å…¥æˆ–ç¦»å¼€ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** arrival = [0,1,1,2,4], state = [0,1,0,0,1]
> 
> **è¾“å‡ºï¼š**[0,3,1,2,4]
> 
> **è§£é‡Šï¼š** æ¯ç§’å‘ç”Ÿçš„æƒ…å†µå¦‚ä¸‹ï¼š
> - t = 0 ï¼šç¬¬ 0 ä¸ªäººæ˜¯å”¯ä¸€ä¸€ä¸ªæƒ³è¦è¿›å…¥çš„äººï¼Œæ‰€ä»¥ TA å¯ä»¥ç›´æ¥è¿›å…¥ã€‚
> - t = 1 ï¼šç¬¬ 1 ä¸ªäººæƒ³è¦ç¦»å¼€ï¼Œç¬¬ 2 ä¸ªäººæƒ³è¦è¿›å…¥ã€‚å› ä¸ºå‰ä¸€ç§’æœ‰äººä½¿ç”¨é—¨è¿›å…¥ï¼Œæ‰€ä»¥ç¬¬ 2 ä¸ªäººå…ˆè¿›å…¥ã€‚
> - t = 2 ï¼šç¬¬ 1 ä¸ªäººè¿˜æ˜¯æƒ³è¦ç¦»å¼€ï¼Œç¬¬ 3 ä¸ªäººæƒ³è¦è¿›å…¥ã€‚å› ä¸ºå‰ä¸€ç§’æœ‰äººä½¿ç”¨é—¨è¿›å…¥ï¼Œæ‰€ä»¥ç¬¬ 3 ä¸ªäººå…ˆè¿›å…¥ã€‚
> - t = 3 ï¼šç¬¬ 1 ä¸ªäººæ˜¯å”¯ä¸€ä¸€ä¸ªæƒ³è¦ç¦»å¼€çš„äººï¼Œæ‰€ä»¥ TA å¯ä»¥ç›´æ¥ç¦»å¼€ã€‚
> - t = 4 ï¼šç¬¬ 4 ä¸ªäººæ˜¯å”¯ä¸€ä¸€ä¸ªæƒ³è¦è¿›å…¥çš„äººï¼Œæ‰€ä»¥ TA å¯ä»¥ç›´æ¥ç¦»å¼€ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** arrival = [0,0,0], state = [1,0,1]
> 
> **è¾“å‡ºï¼š**[0,2,1]
> 
> **è§£é‡Šï¼š** æ¯ç§’å‘ç”Ÿçš„æƒ…å†µå¦‚ä¸‹ï¼š
> - t = 0 ï¼šç¬¬ 1 ä¸ªäººæƒ³è¦è¿›å…¥ï¼Œä½†æ˜¯ç¬¬ 0 ä¸ªäººå’Œç¬¬ 2 ä¸ªäººéƒ½æƒ³è¦ç¦»å¼€ã€‚å› ä¸ºå‰ä¸€ç§’æ²¡æœ‰ä½¿ç”¨é—¨ï¼Œæ‰€ä»¥æƒ³è¦ç¦»å¼€çš„äººä¼šå…ˆç¦»å¼€ã€‚åˆå› ä¸ºç¬¬ 0 ä¸ªäººçš„ç¼–å·æ›´å°ï¼Œæ‰€ä»¥ TA å…ˆç¦»å¼€ã€‚
> - t = 1 ï¼šç¬¬ 1 ä¸ªäººæƒ³è¦è¿›å…¥ï¼Œç¬¬ 2 ä¸ªäººæƒ³è¦ç¦»å¼€ã€‚å› ä¸ºå‰ä¸€ç§’æœ‰äººä½¿ç”¨é—¨ç¦»å¼€ï¼Œæ‰€ä»¥ç¬¬ 2 ä¸ªäººå…ˆç¦»å¼€ã€‚
> - t = 2 ï¼šç¬¬ 1 ä¸ªäººæ˜¯å”¯ä¸€ä¸€ä¸ªæƒ³è¦è¿›å…¥çš„äººï¼Œæ‰€ä»¥ TA å¯ä»¥ç›´æ¥è¿›å…¥ã€‚
> 
> 



**æç¤ºï¼š**

  * `n == arrival.length == state.length`
  * `1 <= n <= 10^5`
  * `0 <= arrival[i] <= n`
  * `arrival` æŒ‰ **éé€’å‡é¡ºåº** æ’åˆ—
  * `state[i]` ä¸º `0` æˆ– `1`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2332 | [åä¸Šå…¬äº¤çš„æœ€æ™šæ—¶é—´](https://leetcode.com/problems/the-latest-time-to-catch-a-bus) |  |  [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) `1+` | <font color=#ffb800>Medium</font> |