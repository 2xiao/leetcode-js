# [3004. ç›¸åŒé¢œè‰²çš„æœ€å¤§å­æ ‘ ğŸ”’](https://2xiao.github.io/leetcode-js/problem/3004.html)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/maximum-subtree-of-the-same-color) [`LeetCode`](https://leetcode.com/problems/maximum-subtree-of-the-same-color)

## é¢˜ç›®

You are given a 2D integer array `edges` representing a tree with `n` nodes,
numbered from `0` to `n - 1`, rooted at node `0`, where `edges[i] = [ui, vi]`
means there is an edge between the nodes `vi` and `ui`.

You are also given a **0-indexed** integer array `colors` of size `n`, where
`colors[i]` is the color assigned to node `i`.

We want to find a node `v` such that every node in the subtree of `v` has the
**same** color.

Return _the size of such subtree with the**maximum** number of nodes
possible._



**![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/3000-3099/3004.Maximum%20Subtree%20of%20the%20Same%20Color/images/20231216-134026.png)**

**Example 1:**

> Input: edges = [[0,1],[0,2],[0,3]], colors = [1,1,2,3]
> 
> Output: 1
> 
> Explanation: Each color is represented as: 1 -> Red, 2 -> Green, 3 -> Blue. We can see that the subtree rooted at node 0 has children with different colors. Any other subtree is of the same color and has a size of 1. Hence, we return 1.

**Example 2:**

> Input: edges = [[0,1],[0,2],[0,3]], colors = [1,1,1,1]
> 
> Output: 4
> 
> Explanation: The whole tree has the same color, and the subtree rooted at node 0 has the most number of nodes which is 4. Hence, we return 4.
> 
> 

**![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/3000-3099/3004.Maximum%20Subtree%20of%20the%20Same%20Color/images/20231216-134017.png)**

**Example 3:**

> Input: edges = [[0,1],[0,2],[2,3],[2,4]], colors = [1,2,3,3,3]
> 
> Output: 3
> 
> Explanation: Each color is represented as: 1 -> Red, 2 -> Green, 3 -> Blue. We can see that the subtree rooted at node 0 has children with different colors. Any other subtree is of the same color, but the subtree rooted at node 2 has a size of 3 which is the maximum. Hence, we return 3.

**Constraints:**

  * `n == edges.length + 1`
  * `1 <= n <= 5 * 10^4`
  * `edges[i] == [ui, vi]`
  * `0 <= ui, vi < n`
  * `colors.length == n`
  * `1 <= colors[i] <= 10^5`
  * The input is generated such that the graph represented by `edges` is a tree.


## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `edges`ï¼Œè¡¨ç¤ºä¸€ä¸ªæœ‰ `n` ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼ŒèŠ‚ç‚¹ç¼–å·ä» `0` åˆ° `n - 1`ï¼Œä»¥èŠ‚ç‚¹ `0` ä¸ºæ ¹ï¼Œå…¶ä¸­ `edges[i]
= [ui, vi]` è¡¨ç¤ºèŠ‚ç‚¹ `vi` å’Œ `ui` ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ã€‚

è¿˜ç»™å®šä¸€ä¸ª **ä¸‹æ ‡ä» 0  å¼€å§‹**ï¼Œå¤§å°ä¸º `n` çš„æ•´æ•°æ•°ç»„ `colors`ï¼Œå…¶ä¸­ `colors[i]` è¡¨ç¤ºèŠ‚ç‚¹ `i` åˆ†é…çš„é¢œè‰²ã€‚

æˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªèŠ‚ç‚¹ `v`ï¼Œä½¿å¾— `v` çš„å­æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å…·æœ‰ **ç›¸åŒ** çš„é¢œè‰²ã€‚

è¿”å› _å…·æœ‰**å°½å¯èƒ½å¤š** èŠ‚ç‚¹ ä¸” ç¬¦åˆä¸Šè¿°è¦æ±‚çš„å­æ ‘å¤§å°ã€‚_



**![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/3000-3099/3004.Maximum%20Subtree%20of%20the%20Same%20Color/images/20231216-134026.png)**

**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** edges = [[0,1],[0,2],[0,3]], colors = [1,1,2,3]
> 
> **è¾“å‡ºï¼š** 1
> 
> **è§£é‡Šï¼š** æ¯ç§é¢œè‰²åˆ†åˆ«å¯¹åº”ä¸ºï¼š1 -> çº¢è‰²ï¼Œ2 -> ç»¿è‰²ï¼Œ3 -> è“è‰²ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»¥èŠ‚ç‚¹ 0 ä¸ºæ ¹çš„å­æ ‘å…·æœ‰ä¸åŒé¢œè‰²çš„å­èŠ‚ç‚¹ã€‚ä»»ä½•å…¶ä»–å­æ ‘éƒ½æ˜¯ç›¸åŒé¢œè‰²çš„ï¼Œå¹¶ä¸”å¤§å°ä¸º 1ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿”å› 1ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** edges = [[0,1],[0,2],[0,3]], colors = [1,1,1,1]
> 
> **è¾“å‡ºï¼š** 4
> 
> **è§£é‡Šï¼š** æ•´ä¸ªæ ‘å…·æœ‰ç›¸åŒçš„é¢œè‰²ï¼Œä»¥èŠ‚ç‚¹ 0 ä¸ºæ ¹çš„å­æ ‘å…·æœ‰èŠ‚ç‚¹æ•°æœ€å¤šï¼Œä¸º 4ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿”å› 4ã€‚
> 
> 

**![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/3000-3099/3004.Maximum%20Subtree%20of%20the%20Same%20Color/images/20231216-134017.png)**

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** edges = [[0,1],[0,2],[2,3],[2,4]], colors = [1,2,3,3,3]
> 
> **è¾“å‡ºï¼š** 3
> 
> **è§£é‡Šï¼š** æ¯ç§é¢œè‰²åˆ†åˆ«å¯¹åº”ä¸ºï¼š1 -> çº¢è‰²ï¼Œ2 -> ç»¿è‰²ï¼Œ3 -> è“è‰²ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»¥èŠ‚ç‚¹ 0 ä¸ºæ ¹çš„å­æ ‘æœ‰ä¸åŒé¢œè‰²çš„å­èŠ‚ç‚¹ã€‚å…¶ä»–ä»»ä½•å­æ ‘éƒ½æ˜¯ç›¸åŒé¢œè‰²çš„ï¼Œä½†ä»¥èŠ‚ç‚¹ 2 ä¸ºæ ¹çš„å­æ ‘çš„å¤§å°ä¸º 3ï¼Œè¿™æ˜¯æœ€å¤§çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿”å› 3ã€‚
> 
> 



**æç¤ºï¼š**

  * `n == edges.length + 1`
  * `1 <= n <= 5 * 10^4`
  * `edges[i] == [ui, vi]`
  * `0 <= ui, vi < n`
  * `colors.length == n`
  * `1 <= colors[i] <= 10^5`
  * è¾“å…¥è¢«ç”Ÿæˆï¼Œä½¿å¾—ç”± `edges` è¡¨ç¤ºçš„å›¾æ˜¯ä¸€æ£µæ ‘ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```