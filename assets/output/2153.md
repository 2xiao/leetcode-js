---
title: 2153. æ¯è¾†è½¦çš„ä¹˜å®¢äººæ•° II ğŸ”’
description: LeetCode,2153. æ¯è¾†è½¦çš„ä¹˜å®¢äººæ•° II ğŸ”’,æ¯è¾†è½¦çš„ä¹˜å®¢äººæ•° II,The Number of Passengers in Each Bus II,è§£é¢˜æ€è·¯,æ•°æ®åº“
keywords:
  - LeetCode
  - 2153. æ¯è¾†è½¦çš„ä¹˜å®¢äººæ•° II ğŸ”’
  - æ¯è¾†è½¦çš„ä¹˜å®¢äººæ•° II
  - The Number of Passengers in Each Bus II
  - è§£é¢˜æ€è·¯
  - æ•°æ®åº“
---

# 2153. æ¯è¾†è½¦çš„ä¹˜å®¢äººæ•° II ğŸ”’

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°æ®åº“`](/tag/database.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/the-number-of-passengers-in-each-bus-ii) [`LeetCode`](https://leetcode.com/problems/the-number-of-passengers-in-each-bus-ii)

## é¢˜ç›®

Table: `Buses`

> 
> 
> 
> 
> 
> +--------------+------+
> 
> | Column Name  | Type |
> 
> +--------------+------+
> 
> | bus_id> 
>    | int  |
> 
> | arrival_time | int  |
> 
> | capacity> 
>  | int  |
> 
> +--------------+------+
> 
> bus_id contains unique values.
> 
> Each row of this table contains information about the arrival time of a bus at the LeetCode station and its capacity (the number of empty seats it has).
> 
> No two buses will arrive at the same time and all bus capacities will be positive integers.
> 
> 



Table: `Passengers`

> 
> 
> 
> 
> 
> +--------------+------+
> 
> | Column Name  | Type |
> 
> +--------------+------+
> 
> | passenger_id | int  |
> 
> | arrival_time | int  |
> 
> +--------------+------+
> 
> passenger_id contains unique values.
> 
> Each row of this table contains information about the arrival time of a passenger at the LeetCode station.
> 
> 



Buses and passengers arrive at the LeetCode station. If a bus arrives at the
station at a time `tbus` and a passenger arrived at a time `tpassenger` where
`tpassenger <= tbus` and the passenger did not catch any bus, the passenger
will use that bus. In addition, each bus has a capacity. If at the moment the
bus arrives at the station there are more passengers waiting than its capacity
`capacity`, only `capacity` passengers will use the bus.

Write a solution to report the number of users that used each bus.

Return the result table ordered by `bus_id` in **ascending order**.

The result format is in the following example.



**Example 1:**

> Input: 
> 
> Buses table:
> 
> +--------+--------------+----------+
> 
> | bus_id | arrival_time | capacity |
> 
> +--------+--------------+----------+
> 
> | 1> 
>   | 2> 
> > 
> > 
> | 1> 
> > 
> |
> 
> | 2> 
>   | 4> 
> > 
> > 
> | 10> 
>    |
> 
> | 3> 
>   | 7> 
> > 
> > 
> | 2> 
> > 
> |
> 
> +--------+--------------+----------+
> 
> Passengers table:
> 
> +--------------+--------------+
> 
> | passenger_id | arrival_time |
> 
> +--------------+--------------+
> 
> | 11> 
> > 
>    | 1> 
> > 
> > 
> |
> 
> | 12> 
> > 
>    | 1> 
> > 
> > 
> |
> 
> | 13> 
> > 
>    | 5> 
> > 
> > 
> |
> 
> | 14> 
> > 
>    | 6> 
> > 
> > 
> |
> 
> | 15> 
> > 
>    | 7> 
> > 
> > 
> |
> 
> +--------------+--------------+
> 
> Output: 
> 
> +--------+----------------+
> 
> | bus_id | passengers_cnt |
> 
> +--------+----------------+
> 
> | 1> 
>   | 1> 
> > 
> > 
>   |
> 
> | 2> 
>   | 1> 
> > 
> > 
>   |
> 
> | 3> 
>   | 2> 
> > 
> > 
>   |
> 
> +--------+----------------+
> 
> Explanation: 
> - Passenger 11 arrives at time 1.
> - Passenger 12 arrives at time 1.
> - Bus 1 arrives at time 2 and collects passenger 11 as it has one empty seat.
> 
> 
> - Bus 2 arrives at time 4 and collects passenger 12 as it has ten empty seats.
> 
> 
> - Passenger 12 arrives at time 5.
> - Passenger 13 arrives at time 6.
> - Passenger 14 arrives at time 7.
> - Bus 3 arrives at time 7 and collects passengers 12 and 13 as it has two empty seats.
> 
> 


## é¢˜ç›®å¤§æ„

è¡¨: `Buses`

> 
> 
> 
> 
> 
> +--------------+------+
> 
> | Column Name  | Type |
> 
> +--------------+------+
> 
> | bus_id> 
>    | int  |
> 
> | arrival_time | int  |
> 
> | capacity> 
>  | int  |
> 
> +--------------+------+
> 
> bus_id åŒ…å«å”¯ä¸€çš„å€¼ã€‚
> 
> è¯¥è¡¨çš„æ¯ä¸€è¡Œéƒ½åŒ…å«å…³äºå…¬äº¤è½¦åˆ°è¾¾ LeetCode ç«™ç‚¹çš„æ—¶é—´å’Œå®ƒçš„å®¹é‡ (ç©ºåº§ä½çš„æ•°é‡) çš„ä¿¡æ¯ã€‚
> 
> ä¸ä¼šå‡ºç°ä¸¤è¾†å…¬äº¤è½¦åŒæ—¶åˆ°è¾¾ï¼Œæ‰€æœ‰å…¬äº¤è½¦çš„å®¹é‡éƒ½æ˜¯æ­£æ•´æ•°ã€‚
> 
> 



è¡¨: `Passengers`

> 
> 
> 
> 
> 
> +--------------+------+
> 
> | Column Name  | Type |
> 
> +--------------+------+
> 
> | passenger_id | int  |
> 
> | arrival_time | int  |
> 
> +--------------+------+
> 
> passenger_id åŒ…å«å”¯ä¸€çš„å€¼ã€‚
> 
> è¯¥è¡¨çš„æ¯ä¸€è¡Œéƒ½åŒ…å«ä¹˜å®¢åˆ°è¾¾ LeetCode ç«™çš„æ—¶é—´ä¿¡æ¯ã€‚
> 
> 



å…¬äº¤è½¦å’Œä¹˜å®¢åˆ°è¾¾ LeetCode ç«™ã€‚å¦‚æœä¸€è¾†å…¬äº¤è½¦åœ¨ `tbus` æ—¶é—´ç‚¹åˆ°è¾¾è½¦ç«™ï¼Œä¹˜å®¢åœ¨ `tpassenger` åˆ°è¾¾è½¦ç«™ï¼Œå…¶ä¸­
`tpassenger <=
tbus`ï¼Œè€Œè¯¥ä¹˜å®¢æ²¡æœ‰èµ¶ä¸Šä»»ä½•å…¬äº¤è½¦ï¼Œåˆ™è¯¥ä¹˜å®¢å°†æ­ä¹˜è¯¥å…¬äº¤è½¦ã€‚æ­¤å¤–ï¼Œæ¯è¾†å…¬äº¤è½¦éƒ½æœ‰ä¸€ä¸ªå®¹é‡ã€‚å¦‚æœåœ¨å…¬äº¤è½¦åˆ°ç«™çš„é‚£ä¸€åˆ»ï¼Œç­‰å¾…çš„ä¹˜å®¢è¶…è¿‡äº†å®ƒçš„è½½å®¢é‡
`capacity`ï¼Œåªæœ‰ `capacity` ä¸ªä¹˜å®¢æ‰ä¼šæ­ä¹˜è¯¥å…¬äº¤è½¦ã€‚

ç¼–å†™è§£å†³æ–¹æ¡ˆï¼ŒæŠ¥å‘Šä½¿ç”¨æ¯æ¡æ€»çº¿çš„ç”¨æˆ·æ•°é‡ã€‚

è¿”å›æŒ‰ `bus_id` **å‡åºæ’åº  **çš„ç»“æœè¡¨ã€‚

ç»“æœæ ¼å¼å¦‚ä¸‹æ‰€ç¤ºã€‚



**ç¤ºä¾‹ 1:**

> 
> 
> 
> 
> 
> **è¾“å…¥:** 
> 
> Buses è¡¨:
> 
> +--------+--------------+----------+
> 
> | bus_id | arrival_time | capacity |
> 
> +--------+--------------+----------+
> 
> | 1> 
>   | 2> 
> > 
> > 
> | 1> 
> > 
> |
> 
> | 2> 
>   | 4> 
> > 
> > 
> | 10> 
>    |
> 
> | 3> 
>   | 7> 
> > 
> > 
> | 2> 
> > 
> |
> 
> +--------+--------------+----------+
> 
> Passengers è¡¨:
> 
> +--------------+--------------+
> 
> | passenger_id | arrival_time |
> 
> +--------------+--------------+
> 
> | 11> 
> > 
>    | 1> 
> > 
> > 
> |
> 
> | 12> 
> > 
>    | 1> 
> > 
> > 
> |
> 
> | 13> 
> > 
>    | 5> 
> > 
> > 
> |
> 
> | 14> 
> > 
>    | 6> 
> > 
> > 
> |
> 
> | 15> 
> > 
>    | 7> 
> > 
> > 
> |
> 
> +--------------+--------------+
> 
> **è¾“å‡º:** 
> 
> +--------+----------------+
> 
> | bus_id | passengers_cnt |
> 
> +--------+----------------+
> 
> | 1> 
>   | 1> 
> > 
> > 
>   |
> 
> | 2> 
>   | 1> 
> > 
> > 
>   |
> 
> | 3> 
>   | 2> 
> > 
> > 
>   |
> 
> +--------+----------------+
> 
> **è§£é‡Š:** 
> - 11 å·ä¹˜å®¢åœ¨æ—¶é—´ 1 åˆ°è¾¾ã€‚
> - 12 å·ä¹˜å®¢åœ¨æ—¶é—´ 1 åˆ°è¾¾ã€‚
> - 1 å·å…¬äº¤è½¦åˆ°è¾¾æ—¶é—´ä¸º 2ï¼Œå› ä¸ºæœ‰ä¸€ä¸ªç©ºåº§ä½ï¼Œæ‰€ä»¥æ­è½½äº† 11 å·ä¹˜å®¢ã€‚
> 
> 
> - 2 å·å…¬äº¤è½¦åœ¨æ—¶é—´ 4 åˆ°è¾¾ï¼Œæ­è½½äº†12 å·ä¹˜å®¢ï¼Œå› ä¸ºå®ƒæœ‰ 10 ä¸ªç©ºåº§ä½ã€‚
> 
> 
> - 13 å·ä¹˜å®¢åœ¨æ—¶é—´ 5 åˆ°è¾¾ã€‚
> - 14 å·ä¹˜å®¢åœ¨æ—¶é—´ 6 åˆ°è¾¾ã€‚
> - 15 å·ä¹˜å®¢åœ¨æ—¶é—´ 7 åˆ°è¾¾ã€‚
> - 3 å·å…¬äº¤è½¦åœ¨æ—¶é—´ 7 åˆ°è¾¾ï¼Œè½¦ä¸Šæœ‰ä¸¤ä¸ªç©ºåº§ä½ï¼Œæ­è½½äº† 12 å·å’Œ 13 å·ä¹˜å®¢ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```