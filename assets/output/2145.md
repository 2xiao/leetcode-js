# [2145. ç»Ÿè®¡éšè—æ•°ç»„æ•°ç›®](https://leetcode.com/problems/count-the-hidden-sequences)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å‰ç¼€å’Œ`](/leetcode/outline/tag/prefix-sum.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/count-the-hidden-sequences)


## é¢˜ç›®

You are given a **0-indexed** array of `n` integers `differences`, which
describes the **differences** between each pair of **consecutive** integers of
a **hidden** sequence of length `(n + 1)`. More formally, call the hidden
sequence `hidden`, then we have that `differences[i] = hidden[i + 1] -
hidden[i]`.

You are further given two integers `lower` and `upper` that describe the
**inclusive** range of values `[lower, upper]` that the hidden sequence can
contain.

  * For example, given `differences = [1, -3, 4]`, `lower = 1`, `upper = 6`, the hidden sequence is a sequence of length `4` whose elements are in between `1` and `6` (**inclusive**). 
> 
> * `[3, 4, 1, 5]` and `[4, 5, 2, 6]` are possible hidden sequences.
> 
> * `[5, 6, 3, 7]` is not possible since it contains an element greater than `6`.
> 
> * `[1, 2, 3, 4]` is not possible since the differences are not correct.

Return _the number of**possible** hidden sequences there are._ If there are no
possible sequences, return `0`.



**Example 1:**

> Input: differences = [1,-3,4], lower = 1, upper = 6
> 
> Output: 2
> 
> Explanation: The possible hidden sequences are:
> - [3, 4, 1, 5]
> - [4, 5, 2, 6]
> 
> Thus, we return 2.

**Example 2:**

> Input: differences = [3,-4,5,1,-2], lower = -4, upper = 5
> 
> Output: 4
> 
> Explanation: The possible hidden sequences are:
> - [-3, 0, -4, 1, 2, 0]
> - [-2, 1, -3, 2, 3, 1]
> - [-1, 2, -2, 3, 4, 2]
> - [0, 3, -1, 4, 5, 3]
> 
> Thus, we return 4.

**Example 3:**

> Input: differences = [4,-7,2], lower = 3, upper = 6
> 
> Output: 0
> 
> Explanation: There are no possible hidden sequences. Thus, we return 0.

**Constraints:**

  * `n == differences.length`
  * `1 <= n <= 10^5`
  * `-10^5 <= differences[i] <= 10^5`
  * `-10^5 <= lower <= upper <= 10^5`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0**  å¼€å§‹ä¸”é•¿åº¦ä¸º `n` çš„æ•´æ•°æ•°ç»„ `differences` ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªé•¿åº¦ä¸º `n + 1` çš„ **éšè—**  æ•°ç»„
**ç›¸é‚»**  å…ƒç´ ä¹‹é—´çš„ **å·®å€¼**  ã€‚æ›´æ­£å¼çš„è¡¨è¿°ä¸ºï¼šæˆ‘ä»¬å°†éšè—æ•°ç»„è®°ä½œ `hidden` ï¼Œé‚£ä¹ˆ `differences[i] =
hidden[i + 1] - hidden[i]` ã€‚

åŒæ—¶ç»™ä½ ä¸¤ä¸ªæ•´æ•° `lower` å’Œ `upper` ï¼Œå®ƒä»¬è¡¨ç¤ºéšè—æ•°ç»„ä¸­æ‰€æœ‰æ•°å­—çš„å€¼éƒ½åœ¨ **é—­**  åŒºé—´ `[lower, upper]` ä¹‹é—´ã€‚

  * æ¯”æ–¹è¯´ï¼Œ`differences = [1, -3, 4]` ï¼Œ`lower = 1` ï¼Œ`upper = 6` ï¼Œé‚£ä¹ˆéšè—æ•°ç»„æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º `4` ä¸”æ‰€æœ‰å€¼éƒ½åœ¨ `1` å’Œ `6` ï¼ˆåŒ…å«ä¸¤è€…ï¼‰ä¹‹é—´çš„æ•°ç»„ã€‚ 
> 
> * `[3, 4, 1, 5]` å’Œ `[4, 5, 2, 6]` éƒ½æ˜¯ç¬¦åˆè¦æ±‚çš„éšè—æ•°ç»„ã€‚
> 
> * `[5, 6, 3, 7]` ä¸ç¬¦åˆè¦æ±‚ï¼Œå› ä¸ºå®ƒåŒ…å«å¤§äº `6` çš„å…ƒç´ ã€‚
> 
> * `[1, 2, 3, 4]` ä¸ç¬¦åˆè¦æ±‚ï¼Œå› ä¸ºç›¸é‚»å…ƒç´ çš„å·®å€¼ä¸ç¬¦åˆç»™å®šæ•°æ®ã€‚

è¯·ä½ è¿”å› **ç¬¦åˆ**  è¦æ±‚çš„éšè—æ•°ç»„çš„æ•°ç›®ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆè¦æ±‚çš„éšè—æ•°ç»„ï¼Œè¯·è¿”å› `0` ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** differences = [1,-3,4], lower = 1, upper = 6
> 
> **è¾“å‡ºï¼š** 2
> 
> **è§£é‡Šï¼š** ç¬¦åˆè¦æ±‚çš„éšè—æ•°ç»„ä¸ºï¼š
> - [3, 4, 1, 5]
> - [4, 5, 2, 6]
> 
> æ‰€ä»¥è¿”å› 2 ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** differences = [3,-4,5,1,-2], lower = -4, upper = 5
> 
> **è¾“å‡ºï¼š** 4
> 
> **è§£é‡Šï¼š** ç¬¦åˆè¦æ±‚çš„éšè—æ•°ç»„ä¸ºï¼š
> - [-3, 0, -4, 1, 2, 0]
> - [-2, 1, -3, 2, 3, 1]
> - [-1, 2, -2, 3, 4, 2]
> - [0, 3, -1, 4, 5, 3]
> 
> æ‰€ä»¥è¿”å› 4 ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** differences = [4,-7,2], lower = 3, upper = 6
> 
> **è¾“å‡ºï¼š** 0
> 
> **è§£é‡Šï¼š** æ²¡æœ‰ç¬¦åˆè¦æ±‚çš„éšè—æ•°ç»„ï¼Œæ‰€ä»¥è¿”å› 0 ã€‚
> 
> 



**æç¤ºï¼š**

  * `n == differences.length`
  * `1 <= n <= 10^5`
  * `-10^5 <= differences[i] <= 10^5`
  * `-10^5 <= lower <= upper <= 10^5`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```