---
title: 1279. çº¢ç»¿ç¯è·¯å£ ğŸ”’
description: LeetCode,1279. çº¢ç»¿ç¯è·¯å£ ğŸ”’,çº¢ç»¿ç¯è·¯å£,Traffic Light Controlled Intersection,è§£é¢˜æ€è·¯,å¤šçº¿ç¨‹
keywords:
  - LeetCode
  - 1279. çº¢ç»¿ç¯è·¯å£ ğŸ”’
  - çº¢ç»¿ç¯è·¯å£
  - Traffic Light Controlled Intersection
  - è§£é¢˜æ€è·¯
  - å¤šçº¿ç¨‹
---

# 1279. çº¢ç»¿ç¯è·¯å£ ğŸ”’

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`å¤šçº¿ç¨‹`](/tag/concurrency.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/traffic-light-controlled-intersection) [`LeetCode`](https://leetcode.com/problems/traffic-light-controlled-intersection)

## é¢˜ç›®

There is an intersection of two roads. First road is road A where cars travel
from North to South in direction 1 and from South to North in direction 2.
Second road is road B where cars travel from West to East in direction 3 and
from East to West in direction 4.

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1200-1299/1279.Traffic%20Light%20Controlled%20Intersection/images/exp.png)

There is a traffic light located on each road before the intersection. A
traffic light can either be green or red.

  1. **Green** means cars can cross the intersection in both directions of the road.
  2. **Red** means cars in both directions cannot cross the intersection and must wait until the light turns green.

The traffic lights cannot be green on both roads at the same time. That means
when the light is green on road A, it is red on road B and when the light is
green on road B, it is red on road A.

Initially, the traffic light is **green** on road A and **red**  on road B.
When the light is green on one road, all cars can cross the intersection in
both directions until the light becomes green on the other road. No two cars
traveling on different roads should cross at the same time.

Design a deadlock-free traffic light controlled system at this intersection.

Implement the function `void carArrived(carId, roadId, direction, turnGreen,
crossCar)` where:

  * `carId` is the id of the car that arrived.
  * `roadId` is the id of the road that the car travels on.
  * `direction` is the direction of the car.
  * `turnGreen` is a function you can call to turn the traffic light to green on the current road.
  * `crossCar` is a function you can call to let the current car cross the intersection.

Your answer is considered correct if it avoids cars deadlock in the
intersection. Turning the light green on a road when it was already green is
considered a wrong answer.



**Example 1:**

> Input: cars = [1,3,5,2,4], directions = [2,1,2,4,3], arrivalTimes = [10,20,30,40,50]
> 
> Output: [
> 
> "Car 1 Has Passed Road A In Direction 2",> 
> // Traffic light on road A is green, car 1 can cross the intersection.
> 
> "Car 3 Has Passed Road A In Direction 1",> 
> // Car 3 crosses the intersection as the light is still green.
> 
> "Car 5 Has Passed Road A In Direction 2",> 
> // Car 5 crosses the intersection as the light is still green.
> 
> "Traffic Light On Road B Is Green",> 
> > 
>   // Car 2 requests green light for road B.
> 
> "Car 2 Has Passed Road B In Direction 4",> 
> // Car 2 crosses as the light is green on road B now.
> 
> "Car 4 Has Passed Road B In Direction 3"> 
>  // Car 4 crosses the intersection as the light is still green.
> 
> ]

**Example 2:**

> Input: cars = [1,2,3,4,5], directions = [2,4,3,3,1], arrivalTimes = [10,20,30,40,40]
> 
> Output: [
> 
> "Car 1 Has Passed Road A In Direction 2",> 
> // Traffic light on road A is green, car 1 can cross the intersection.
> 
> "Traffic Light On Road B Is Green",> 
> > 
>   // Car 2 requests green light for road B.
> 
> "Car 2 Has Passed Road B In Direction 4",> 
> // Car 2 crosses as the light is green on road B now.
> 
> "Car 3 Has Passed Road B In Direction 3",> 
> // Car 3 crosses as the light is green on road B now.
> 
> "Traffic Light On Road A Is Green",> 
> > 
>   // Car 5 requests green light for road A.
> 
> "Car 5 Has Passed Road A In Direction 1",> 
> // Car 5 crosses as the light is green on road A now.
> 
> "Traffic Light On Road B Is Green",> 
> > 
>   // Car 4 requests green light for road B. Car 4 blocked until car 5 crosses and then traffic light is green on road B.
> 
> "Car 4 Has Passed Road B In Direction 3"> 
>  // Car 4 crosses as the light is green on road B now.
> 
> ]
> 
> Explanation: This is a dead-lock free scenario. Note that the scenario when car 4 crosses before turning light into green on road A and allowing car 5 to pass is also **correct** and **Accepted** scenario.

**Constraints:**

  * `1 <= cars.length <= 20`
  * `cars.length = directions.length`
  * `cars.length = arrivalTimes.length`
  * All values of `cars` are unique
  * `1 <= directions[i] <= 4`
  * `arrivalTimes` is non-decreasing


## é¢˜ç›®å¤§æ„

è¿™æ˜¯ä¸¤æ¡è·¯çš„äº¤å‰è·¯å£ã€‚ç¬¬ä¸€æ¡è·¯æ˜¯ A è·¯ï¼Œè½¦è¾†å¯æ²¿ 1 å·æ–¹å‘ç”±åŒ—å‘å—è¡Œé©¶ï¼Œä¹Ÿå¯æ²¿ 2 å·æ–¹å‘ç”±å—å‘åŒ—è¡Œé©¶ã€‚ç¬¬äºŒæ¡è·¯æ˜¯ B è·¯ï¼Œè½¦è¾†å¯æ²¿ 3
å·æ–¹å‘ç”±è¥¿å‘ä¸œè¡Œé©¶ï¼Œä¹Ÿå¯æ²¿ 4 å·æ–¹å‘ç”±ä¸œå‘è¥¿è¡Œé©¶ã€‚

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1200-1299/1279.Traffic%20Light%20Controlled%20Intersection/images/exp.png)

æ¯æ¡è·¯åœ¨è·¯å£å‰éƒ½æœ‰ä¸€ä¸ªçº¢ç»¿ç¯ã€‚çº¢ç»¿ç¯å¯ä»¥äº®èµ·çº¢ç¯æˆ–ç»¿ç¯ã€‚

  1. **ç»¿ç¯** è¡¨ç¤ºä¸¤ä¸ªæ–¹å‘çš„è½¦è¾†éƒ½å¯é€šè¿‡è·¯å£ã€‚
  2. **çº¢ç¯** è¡¨ç¤ºä¸¤ä¸ªæ–¹å‘çš„è½¦è¾†éƒ½ä¸å¯ä»¥é€šè¿‡è·¯å£ï¼Œå¿…é¡»ç­‰å¾…ç»¿ç¯äº®èµ·ã€‚

ä¸¤æ¡è·¯ä¸Šçš„çº¢ç»¿ç¯ä¸å¯ä»¥åŒæ—¶ä¸ºç»¿ç¯ã€‚è¿™æ„å‘³ç€ï¼Œå½“ A è·¯ä¸Šçš„ç»¿ç¯äº®èµ·æ—¶ï¼ŒB è·¯ä¸Šçš„çº¢ç¯ä¼šäº®èµ·ï¼›å½“ B è·¯ä¸Šçš„ç»¿ç¯äº®èµ·æ—¶ï¼ŒA è·¯ä¸Šçš„çº¢ç¯ä¼šäº®èµ·.

å¼€å§‹æ—¶ï¼ŒA è·¯ä¸Šçš„**ç»¿ç¯** äº®èµ·ï¼ŒB è·¯ä¸Šçš„**çº¢ç¯**
äº®èµ·ã€‚å½“ä¸€æ¡è·¯ä¸Šçš„ç»¿ç¯äº®èµ·æ—¶ï¼Œæ‰€æœ‰è½¦è¾†éƒ½å¯ä»¥ä»ä»»æ„ä¸¤ä¸ªæ–¹å‘é€šè¿‡è·¯å£ï¼Œç›´åˆ°å¦ä¸€æ¡è·¯ä¸Šçš„ç»¿ç¯äº®èµ·ã€‚ä¸åŒè·¯ä¸Šçš„è½¦è¾†ä¸å¯ä»¥åŒæ—¶é€šè¿‡è·¯å£ã€‚

ç»™è¿™ä¸ªè·¯å£è®¾è®¡ä¸€ä¸ªæ²¡æœ‰æ­»é”çš„çº¢ç»¿ç¯æ§åˆ¶ç³»ç»Ÿã€‚

å®ç°å‡½æ•° `void carArrived(carId, roadId, direction, turnGreen, crossCar)` :

  * `carId` ä¸ºåˆ°è¾¾è½¦è¾†çš„ç¼–å·ã€‚
  * `roadId` ä¸ºè½¦è¾†æ‰€åœ¨é“è·¯çš„ç¼–å·ã€‚
  * `direction` ä¸ºè½¦è¾†çš„è¡Œè¿›æ–¹å‘ã€‚
  * `turnGreen` æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨æ­¤å‡½æ•°ä¼šä½¿å½“å‰é“è·¯ä¸Šçš„ç»¿ç¯äº®èµ·ã€‚
  * `crossCar` æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨æ­¤å‡½æ•°ä¼šå…è®¸è½¦è¾†é€šè¿‡è·¯å£ã€‚

å½“ä½ çš„ç­”æ¡ˆé¿å…äº†è½¦è¾†åœ¨è·¯å£å‡ºç°æ­»é”ï¼Œæ­¤ç­”æ¡ˆä¼šè¢«è®¤å®šä¸ºæ­£ç¡®çš„ã€‚å½“è·¯å£å·²ç»äº®èµ·ç»¿ç¯æ—¶ä»æ‰“å¼€ç»¿ç¯ï¼Œæ­¤ç­”æ¡ˆä¼šè¢«è®¤å®šä¸ºé”™è¯¯çš„ã€‚



**ç¤ºä¾‹ 1:**

> 
> 
> 
> 
> 
> **è¾“å…¥:** cars = [1,3,5,2,4], directions = [2,1,2,4,3], arrivalTimes = [10,20,30,40,50]
> 
> **è¾“å‡º:** [
> 
> "Car 1 Has Passed Road A In Direction 2",> 
> // A è·¯ä¸Šçš„çº¢ç»¿ç¯ä¸ºç»¿è‰²ï¼Œ1 å·è½¦å¯é€šè¿‡è·¯å£ã€‚
> 
> "Car 3 Has Passed Road A In Direction 1",> 
> // çº¢ç»¿ç¯ä»ä¸ºç»¿è‰²ï¼Œ3 å·è½¦é€šè¿‡è·¯å£ã€‚
> 
> "Car 5 Has Passed Road A In Direction 2",> 
> // çº¢ç»¿ç¯ä»ä¸ºç»¿è‰²ï¼Œ5 å·è½¦é€šè¿‡è·¯å£ã€‚
> 
> "Traffic Light On Road B Is Green",> 
> > 
>   // 2 å·è½¦åœ¨ B è·¯è¯·æ±‚ç»¿ç¯ã€‚
> 
> "Car 2 Has Passed Road B In Direction 4",> 
> // B è·¯ä¸Šçš„ç»¿ç¯ç°å·²äº®èµ·ï¼Œ2 å·è½¦é€šè¿‡è·¯å£ã€‚
> 
> "Car 4 Has Passed Road B In Direction 3"> 
>  // çº¢ç»¿ç¯ä»ä¸ºç»¿è‰²ï¼Œ4 å·è½¦é€šè¿‡è·¯å£ã€‚
> 
> ]
> 
> 

**ç¤ºä¾‹ 2:**

> 
> 
> 
> 
> 
> **è¾“å…¥:** cars = [1,2,3,4,5], directions = [2,4,3,3,1], arrivalTimes = [10,20,30,40,40]
> 
> **è¾“å‡º:** [
> 
> "Car 1 Has Passed Road A In Direction 2",> 
> // A è·¯ä¸Šçš„çº¢ç»¿ç¯ä¸ºç»¿è‰²ï¼Œ1 å·è½¦å¯é€šè¿‡è·¯å£ã€‚
> 
> "Traffic Light On Road B Is Green",> 
> > 
>   // 2 å·è½¦åœ¨ B è·¯è¯·æ±‚ç»¿ç¯ã€‚
> 
> "Car 2 Has Passed Road B In Direction 4",> 
> // B è·¯ä¸Šçš„ç»¿ç¯ç°å·²äº®èµ·ï¼Œ2 å·è½¦é€šè¿‡è·¯å£ã€‚
> 
> "Car 3 Has Passed Road B In Direction 3",> 
> // B è·¯ä¸Šçš„ç»¿ç¯ç°å·²äº®èµ·ï¼Œ3 å·è½¦é€šè¿‡è·¯å£ã€‚
> 
> "Traffic Light On Road A Is Green",> 
> > 
>   // 5 å·è½¦åœ¨ A è·¯è¯·æ±‚ç»¿ç¯ã€‚
> 
> "Car 5 Has Passed Road A In Direction 1",> 
> // A è·¯ä¸Šçš„ç»¿ç¯ç°å·²äº®èµ·ï¼Œ5 å·è½¦é€šè¿‡è·¯å£ã€‚
> 
> "Traffic Light On Road B Is Green",> 
> > 
>   // 4 å·è½¦åœ¨ B è·¯è¯·æ±‚ç»¿ç¯ã€‚4 å·è½¦åœ¨è·¯å£ç­‰ç¯ï¼Œç›´åˆ° 5 å·è½¦é€šè¿‡è·¯å£ï¼ŒB è·¯çš„ç»¿ç¯äº®èµ·ã€‚
> 
> "Car 4 Has Passed Road B In Direction 3"> 
>  // B è·¯ä¸Šçš„ç»¿ç¯ç°å·²äº®èµ·ï¼Œ4 å·è½¦é€šè¿‡è·¯å£ã€‚
> 
> ]
> 
> **è§£é‡Š:** è¿™æ˜¯ä¸€ä¸ªæ— æ­»é”çš„æ–¹æ¡ˆã€‚æ³¨æ„ï¼Œåœ¨ A è·¯ä¸Šçš„ç»¿ç¯äº®èµ·ã€5 å·è½¦é€šè¿‡å‰è®© 4 å·è½¦é€šè¿‡ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª**æ­£ç¡®** ä¸”**å¯****è¢«æ¥å—** çš„æ–¹æ¡ˆã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= cars.length <= 20`
  * `cars.length = directions.length`
  * `cars.length = arrivalTimes.length`
  * `cars` ä¸­çš„æ‰€æœ‰å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚
  * `1 <= directions[i] <= 4`
  * `arrivalTimes` æ˜¯éé€’å‡çš„ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```