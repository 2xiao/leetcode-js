# [3104. æŸ¥æ‰¾æœ€é•¿çš„è‡ªåŒ…å«å­ä¸² ğŸ”’](https://2xiao.github.io/leetcode-js/problem/3104.html)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/find-longest-self-contained-substring) [`LeetCode`](https://leetcode.com/problems/find-longest-self-contained-substring)

## é¢˜ç›®

Given a string `s`, your task is to find the length of the **longest self-
contained** substring of `s`.

A substring `t` of a string `s` is called **self-contained** if `t != s` and
for every character in `t`, it doesn't exist in the _rest_ of `s`.

Return the length of the _longest**** self-contained _substring of `s` if it
exists, otherwise, return -1.



**Example 1:**

**Input:** s = "abba"

**Output:** 2

**Explanation:**  
Let's check the substring `"bb"`. You can see that no other `"b"` is outside
of this substring. Hence the answer is 2.

**Example 2:**

**Input:** s = "abab"

**Output:** -1

**Explanation:**  
Every substring we choose does not satisfy the described property (there is
some character which is inside and outside of that substring). So the answer
would be -1.

**Example 3:**

**Input:** s = "abacd"

**Output:** 4

**Explanation:**  
Let's check the substring `"abac"`. There is only one character outside of
this substring and that is `"d"`. There is no `"d"` inside the chosen
substring, so it satisfies the condition and the answer is 4.



**Constraints:**

  * `2 <= s.length <= 5 * 10^4`
  * `s` consists only of lowercase English letters.


## é¢˜ç›®å¤§æ„

ç»™å®šå­—ç¬¦ä¸² `s`ï¼Œä½ éœ€è¦æ‰¾åˆ° `s` çš„ **æœ€é•¿è‡ªåŒ…å«**  å­ä¸² çš„é•¿åº¦ã€‚

å¦‚æœ `s` çš„ä¸€ä¸ªå­ä¸² `t` æ»¡è¶³ `t != s` ä¸” `t` ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦åœ¨ `s` çš„å‰©ä½™éƒ¨åˆ†éƒ½ä¸å­˜åœ¨ï¼Œåˆ™è¢«ç§°ä¸ºæ˜¯ **è‡ªåŒ…å«**  çš„ã€‚

å¦‚æœå­˜åœ¨  `s` çš„æœ€é•¿è‡ªåŒ…å«å­ä¸²ï¼Œè¿”å›å®ƒçš„é•¿åº¦ï¼Œå¦åˆ™è¿”å› -1ã€‚



**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** s = "abba"

**è¾“å‡ºï¼š** 2

**è§£é‡Šï¼š**  
è®©æˆ‘ä»¬æ£€æŸ¥å­ä¸² `"bb"`ã€‚ä½ å¯ä»¥å‘ç°å­ä¸²å¤–æ²¡æœ‰å…¶å®ƒ `"b"`ã€‚å› æ­¤ç­”æ¡ˆä¸º 2ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** s = "abab"

**è¾“å‡ºï¼š** -1

**è§£é‡Šï¼š**  
æˆ‘ä»¬é€‰æ‹©çš„æ¯ä¸€ä¸ªå­ä¸²éƒ½ä¸æ»¡è¶³æè¿°çš„ç‰¹ç‚¹ï¼ˆå­ä¸²å†…å¤–åŒ…å«æœ‰ä¸€äº›å­—æ¯ï¼‰ã€‚æ‰€ä»¥ç­”æ¡ˆæ˜¯ -1ã€‚

**ç¤ºä¾‹ 3ï¼š**

**è¾“å…¥ï¼š** s = "abacd"

**è¾“å‡ºï¼š** 4

**è§£é‡Šï¼š**  
è®©æˆ‘ä»¬æ£€æŸ¥å­ä¸² `"abac"`ã€‚å­ä¸²ä¹‹å¤–åªæœ‰ä¸€ä¸ªå­—æ¯ `"d"`ã€‚å­ä¸²å†…æ²¡æœ‰ `"d"`ï¼Œæ‰€ä»¥å®ƒæ»¡è¶³æ¡ä»¶å¹¶ä¸”ç­”æ¡ˆä¸º 4ã€‚



**æç¤ºï¼š**

  * `2 <= s.length <= 5 * 10^4`
  * `s` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```