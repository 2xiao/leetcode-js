# [1555. é“¶è¡Œè´¦æˆ·æ¦‚è¦](https://leetcode.com/problems/bank-account-summary)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°æ®åº“`](/tag/database.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/bank-account-summary)

## é¢˜ç›®

Table: `Users`

> 
> 
> 
> 
> 
> +--------------+---------+
> 
> | Column Name  | Type> 
> |
> 
> +--------------+---------+
> 
> | user_id> 
>   | int> 
>  |
> 
> | user_name> 
> | varchar |
> 
> | credit> 
>    | int> 
>  |
> 
> +--------------+---------+
> 
> user_id is the primary key (column with unique values) for this table.
> 
> Each row of this table contains the current credit information for each user.
> 
> 



Table: `Transactions`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | trans_id> 
>   | int> 
>  |
> 
> | paid_by> 
>    | int> 
>  |
> 
> | paid_to> 
>    | int> 
>  |
> 
> | amount> 
> > 
> | int> 
>  |
> 
> | transacted_on | date> 
> |
> 
> +---------------+---------+
> 
> trans_id is the primary key (column with unique values) for this table.
> 
> Each row of this table contains information about the transaction in the bank.
> 
> User with id (paid_by) transfer money to user with id (paid_to).
> 
> 



Leetcode Bank (LCB) helps its coders in making virtual payments. Our bank
records all transactions in the table _Transaction_ , we want to find out the
current balance of all users and check whether they have breached their credit
limit (If their current credit is less than `0`).

Write a solution to report.

  * `user_id`,
  * `user_name`,
  * `credit`, current balance after performing transactions, and
  * `credit_limit_breached`, check credit_limit (`"Yes"` or `"No"`)

Return the result table in **any** order.

The result format is in the following example.



**Example 1:**

> Input: 
> 
> Users table:
> 
> +------------+--------------+-------------+
> 
> | user_id> 
> | user_name> 
> | credit> 
>   |
> 
> +------------+--------------+-------------+
> 
> | 1> 
> > 
>   | Moustafa> 
>  | 100> 
> > 
>  |
> 
> | 2> 
> > 
>   | Jonathan> 
>  | 200> 
> > 
>  |
> 
> | 3> 
> > 
>   | Winston> 
>   | 10000> 
>    |
> 
> | 4> 
> > 
>   | Luis> 
> > 
>  | 800> 
> > 
>  | 
> 
> +------------+--------------+-------------+
> 
> Transactions table:
> 
> +------------+------------+------------+----------+---------------+
> 
> | trans_id   | paid_by> 
> | paid_to> 
> | amount   | transacted_on |
> 
> +------------+------------+------------+----------+---------------+
> 
> | 1> 
> > 
>   | 1> 
> > 
>   | 3> 
> > 
>   | 400> 
>   | 2020-08-01> 
> |
> 
> | 2> 
> > 
>   | 3> 
> > 
>   | 2> 
> > 
>   | 500> 
>   | 2020-08-02> 
> |
> 
> | 3> 
> > 
>   | 2> 
> > 
>   | 1> 
> > 
>   | 200> 
>   | 2020-08-03> 
> |
> 
> +------------+------------+------------+----------+---------------+
> 
> Output: 
> 
> +------------+------------+------------+-----------------------+
> 
> | user_id> 
> | user_name  | credit> 
>  | credit_limit_breached |
> 
> +------------+------------+------------+-----------------------+
> 
> | 1> 
> > 
>   | Moustafa   | -100> 
>    | Yes> 
> > 
> > 
> > 
>    | 
> 
> | 2> 
> > 
>   | Jonathan   | 500> 
> > 
> | No> 
> > 
> > 
> > 
> > 
> |
> 
> | 3> 
> > 
>   | Winston> 
> | 9900> 
>    | No> 
> > 
> > 
> > 
> > 
> |
> 
> | 4> 
> > 
>   | Luis> 
>    | 800> 
> > 
> | No> 
> > 
> > 
> > 
> > 
> |
> 
> +------------+------------+------------+-----------------------+
> 
> Explanation: 
> 
> Moustafa paid $400 on "2020-08-01" and received $200 on "2020-08-03", credit (100 -400 +200) = -$100
> 
> Jonathan received $500 on "2020-08-02" and paid $200 on "2020-08-08", credit (200 +500 -200) = $500
> 
> Winston received $400 on "2020-08-01" and paid $500 on "2020-08-03", credit (10000 +400 -500) = $9990
> 
> Luis did not received any transfer, credit = $800
> 
> 


## é¢˜ç›®å¤§æ„

ç”¨æˆ·è¡¨ï¼š `Users`

> 
> 
> 
> 
> 
> +--------------+---------+
> 
> | Column Name  | Type> 
> |
> 
> +--------------+---------+
> 
> | user_id> 
>   | int> 
>  |
> 
> | user_name> 
> | varchar |
> 
> | credit> 
>    | int> 
>  |
> 
> +--------------+---------+
> 
> user_id æ˜¯è¿™ä¸ªè¡¨çš„ä¸»é”®ï¼ˆå…·æœ‰å”¯ä¸€å€¼çš„åˆ—ï¼‰ã€‚
> 
> è¡¨ä¸­çš„æ¯ä¸€åˆ—åŒ…å«æ¯ä¸€ä¸ªç”¨æˆ·å½“å‰çš„é¢åº¦ä¿¡æ¯ã€‚



äº¤æ˜“è¡¨ï¼š`Transactions`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | trans_id> 
>   | int> 
>  |
> 
> | paid_by> 
>    | int> 
>  |
> 
> | paid_to> 
>    | int> 
>  |
> 
> | amount> 
> > 
> | int> 
>  |
> 
> | transacted_on | date> 
> |
> 
> +---------------+---------+
> 
> trans_id æ˜¯è¿™ä¸ªè¡¨çš„ä¸»é”®ï¼ˆå…·æœ‰å”¯ä¸€å€¼çš„åˆ—ï¼‰ã€‚
> 
> è¡¨ä¸­çš„æ¯ä¸€åˆ—åŒ…å«é“¶è¡Œçš„äº¤æ˜“ä¿¡æ¯ã€‚
> 
> ID ä¸º paid_by çš„ç”¨æˆ·ç»™ ID ä¸º paid_to çš„ç”¨æˆ·è½¬è´¦ã€‚
> 
> 



åŠ›æ‰£é“¶è¡Œ (LCB) å¸®åŠ©ç¨‹åºå‘˜ä»¬å®Œæˆè™šæ‹Ÿæ”¯ä»˜ã€‚æˆ‘ä»¬çš„é“¶è¡Œåœ¨è¡¨ _Transaction_
ä¸­è®°å½•æ¯æ¡äº¤æ˜“ä¿¡æ¯ï¼Œæˆ‘ä»¬è¦æŸ¥è¯¢æ¯ä¸ªç”¨æˆ·çš„å½“å‰ä½™é¢ï¼Œå¹¶æ£€æŸ¥ä»–ä»¬æ˜¯å¦å·²é€æ”¯ï¼ˆå½“å‰é¢åº¦å°äº 0ï¼‰ã€‚

ç¼–å†™è§£å†³æ–¹æ¡ˆæŠ¥å‘Šï¼š

  * `user_id` ç”¨æˆ· ID
  * `user_name` ç”¨æˆ·å
  * `credit` å®Œæˆäº¤æ˜“åçš„ä½™é¢
  * `credit_limit_breached` æ£€æŸ¥æ˜¯å¦é€æ”¯ ï¼ˆ"Yes" æˆ– "No"ï¼‰

ä»¥**ä»»æ„** é¡ºåºè¿”å›ç»“æœè¡¨ã€‚

ç»“æœæ ¼å¼è§å¦‚ä¸‹æ‰€ç¤ºã€‚



**ç¤ºä¾‹ 1:**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> Users è¡¨ï¼š
> 
> +------------+--------------+-------------+
> 
> | user_id> 
> | user_name> 
> | credit> 
>   |
> 
> +------------+--------------+-------------+
> 
> | 1> 
> > 
>   | Moustafa> 
>  | 100> 
> > 
>  |
> 
> | 2> 
> > 
>   | Jonathan> 
>  | 200> 
> > 
>  |
> 
> | 3> 
> > 
>   | Winston> 
>   | 10000> 
>    |
> 
> | 4> 
> > 
>   | Luis> 
> > 
>  | 800> 
> > 
>  | 
> 
> +------------+--------------+-------------+
> 
> 
> 
> Transactions è¡¨ï¼š
> 
> +------------+------------+------------+----------+---------------+
> 
> | trans_id   | paid_by> 
> | paid_to> 
> | amount   | transacted_on |
> 
> +------------+------------+------------+----------+---------------+
> 
> | 1> 
> > 
>   | 1> 
> > 
>   | 3> 
> > 
>   | 400> 
>   | 2020-08-01> 
> |
> 
> | 2> 
> > 
>   | 3> 
> > 
>   | 2> 
> > 
>   | 500> 
>   | 2020-08-02> 
> |
> 
> | 3> 
> > 
>   | 2> 
> > 
>   | 1> 
> > 
>   | 200> 
>   | 2020-08-03> 
> |
> 
> +------------+------------+------------+----------+---------------+
> 
> 
> 
> **è¾“å‡ºï¼š**
> 
> +------------+------------+------------+-----------------------+
> 
> | user_id> 
> | user_name  | credit> 
>  | credit_limit_breached |
> 
> +------------+------------+------------+-----------------------+
> 
> | 1> 
> > 
>   | Moustafa   | -100> 
>    | Yes> 
> > 
> > 
> > 
>    | 
> 
> | 2> 
> > 
>   | Jonathan   | 500> 
> > 
> | No> 
> > 
> > 
> > 
> > 
> |
> 
> | 3> 
> > 
>   | Winston> 
> | 9900> 
>    | No> 
> > 
> > 
> > 
> > 
> |
> 
> | 4> 
> > 
>   | Luis> 
>    | 800> 
> > 
> | No> 
> > 
> > 
> > 
> > 
> |
> 
> +------------+------------+------------+-----------------------+
> 
> Moustafa åœ¨ "2020-08-01" æ”¯ä»˜äº† $400 å¹¶åœ¨ "2020-08-03" æ”¶åˆ°äº† $200 ï¼Œå½“å‰é¢åº¦ (100 -400 +200) = -$100
> 
> Jonathan åœ¨ "2020-08-02" æ”¶åˆ°äº† $500 å¹¶åœ¨ "2020-08-08" æ”¯ä»˜äº† $200 ï¼Œå½“å‰é¢åº¦ (200 +500 -200) = $500
> 
> Winston åœ¨ "2020-08-01" æ”¶åˆ°äº† $400 å¹¶åœ¨ "2020-08-03" æ”¯ä»˜äº† $500 ï¼Œå½“å‰é¢åº¦ (10000 +400 -500) = $9900
> 
> Luis æœªæ”¶åˆ°ä»»ä½•è½¬è´¦ä¿¡æ¯ï¼Œé¢åº¦ = $800


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```