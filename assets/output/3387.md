---
title: 3387. 两天自由外汇交易后的最大货币数
description: LeetCode 3387. 两天自由外汇交易后的最大货币数题解，Maximize Amount After Two Days of Conversions，包含解题思路、复杂度分析以及完整的 JavaScript 代码实现。
keywords:
  - LeetCode
  - 3387. 两天自由外汇交易后的最大货币数
  - 两天自由外汇交易后的最大货币数
  - Maximize Amount After Two Days of Conversions
  - 解题思路
  - 深度优先搜索
  - 广度优先搜索
  - 图
  - 数组
  - 字符串
---

# 3387. 两天自由外汇交易后的最大货币数

🟠 <font color=#ffb800>Medium</font>&emsp; 🔖&ensp; [`深度优先搜索`](/tag/depth-first-search.md) [`广度优先搜索`](/tag/breadth-first-search.md) [`图`](/tag/graph.md) [`数组`](/tag/array.md) [`字符串`](/tag/string.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/maximize-amount-after-two-days-of-conversions) [`LeetCode`](https://leetcode.com/problems/maximize-amount-after-two-days-of-conversions)

## 题目

You are given a string `initialCurrency`, and you start with `1.0` of
`initialCurrency`.

You are also given four arrays with currency pairs (strings) and rates (real
numbers):

  * `pairs1[i] = [startCurrencyi, targetCurrencyi]` denotes that you can convert from `startCurrencyi` to `targetCurrencyi` at a rate of `rates1[i]` on **day 1**.
  * `pairs2[i] = [startCurrencyi, targetCurrencyi]` denotes that you can convert from `startCurrencyi` to `targetCurrencyi` at a rate of `rates2[i]` on **day 2**.
  * Also, each `targetCurrency` can be converted back to its corresponding `startCurrency` at a rate of `1 / rate`.

You can perform **any** number of conversions, **including zero** , using
`rates1` on day 1, **followed** by any number of additional conversions,
**including zero** , using `rates2` on day 2.

Return the **maximum** amount of `initialCurrency` you can have after
performing any number of conversions on both days **in order**.

**Note:** Conversion rates are valid, and there will be no contradictions in
the rates for either day. The rates for the days are independent of each
other.



**Example 1:**

**Input:** initialCurrency = "EUR", pairs1 = [["EUR","USD"],["USD","JPY"]],
rates1 = [2.0,3.0], pairs2 = [["JPY","USD"],["USD","CHF"],["CHF","EUR"]],
rates2 = [4.0,5.0,6.0]

**Output:** 720.00000

**Explanation:**

To get the maximum amount of **EUR** , starting with 1.0 **EUR** :

  * On Day 1: 
> 
> * Convert **EUR** to **USD** to get 2.0 **USD**.
> 
> * Convert **USD** to **JPY** to get 6.0 **JPY**.
  * On Day 2: 
> 
> * Convert **JPY** to **USD** to get 24.0 **USD**.
> 
> * Convert **USD** to **CHF** to get 120.0 **CHF**.
> 
> * Finally, convert **CHF** to **EUR** to get 720.0 **EUR**.

**Example 2:**

**Input:** initialCurrency = "NGN", pairs1 = [["NGN","EUR"]], rates1 = [9.0],
pairs2 = [["NGN","EUR"]], rates2 = [6.0]

**Output:** 1.50000

**Explanation:**

Converting **NGN** to **EUR** on day 1 and **EUR** to **NGN** using the
inverse rate on day 2 gives the maximum amount.

**Example 3:**

**Input:** initialCurrency = "USD", pairs1 = [["USD","EUR"]], rates1 = [1.0],
pairs2 = [["EUR","JPY"]], rates2 = [10.0]

**Output:** 1.00000

**Explanation:**

In this example, there is no need to make any conversions on either day.



**Constraints:**

  * `1 <= initialCurrency.length <= 3`
  * `initialCurrency` consists only of uppercase English letters.
  * `1 <= n == pairs1.length <= 10`
  * `1 <= m == pairs2.length <= 10`
  * `pairs1[i] == [startCurrencyi, targetCurrencyi]`
  * `pairs2[i] == [startCurrencyi, targetCurrencyi]`
  * `1 <= startCurrencyi.length, targetCurrencyi.length <= 3`
  * `startCurrencyi` and `targetCurrencyi` consist only of uppercase English letters.
  * `rates1.length == n`
  * `rates2.length == m`
  * `1.0 <= rates1[i], rates2[i] <= 10.0`
  * The input is generated such that there are no contradictions or cycles in the conversion graphs for either day.
  * The input is generated such that the output is **at most** `5 * 1010`.


## 题目大意

给你一个字符串 `initialCurrency`，表示初始货币类型，并且你一开始拥有 `1.0` 单位的 `initialCurrency`。

另给你四个数组，分别表示货币对（字符串）和汇率（实数）：

  * `pairs1[i] = [startCurrencyi, targetCurrencyi]` 表示在 **第 1 天** ，可以按照汇率 `rates1[i]` 将 `startCurrencyi` 转换为 `targetCurrencyi`。
  * `pairs2[i] = [startCurrencyi, targetCurrencyi]` 表示在 **第 2 天** ，可以按照汇率 `rates2[i]` 将 `startCurrencyi` 转换为 `targetCurrencyi`。
  * 此外，每种 `targetCurrency` 都可以以汇率 `1 / rate` 转换回对应的 `startCurrency`。

你可以在 **第 1 天  **使用 `rates1` 进行任意次数的兑换（包括 0 次），然后在 **第 2 天  **使用 `rates2`
再进行任意次数的兑换（包括 0 次）。

返回在两天兑换后，最大可能拥有的 `initialCurrency` 的数量。

**注意：** 汇率是有效的，并且第 1 天和第 2 天的汇率之间相互独立，不会产生矛盾。



**示例 1：**

**输入：** initialCurrency = "EUR", pairs1 = [["EUR","USD"],["USD","JPY"]],
rates1 = [2.0,3.0], pairs2 = [["JPY","USD"],["USD","CHF"],["CHF","EUR"]],
rates2 = [4.0,5.0,6.0]

**输出：** 720.00000

**解释：**

根据题目要求，需要最大化最终的 **EUR** 数量，从 1.0 **EUR** 开始：

  * **第 1 天：**
> 
> * 将 **EUR** 换成 **USD** ，得到 2.0 **USD** 。
> 
> * 将 **USD** 换成 **JPY** ，得到 6.0 **JPY** 。
  * **第 2 天：**
> 
> * 将 **JPY** 换成 **USD** ，得到 24.0 **USD** 。
> 
> * 将 **USD** 换成 **CHF** ，得到 120.0 **CHF** 。
> 
> * 最后将 **CHF** 换回 **EUR** ，得到 720.0 **EUR** 。

**示例 2：**

**输入：** initialCurrency = "NGN", pairs1 = [["NGN","EUR"]], rates1 = [9.0],
pairs2 = [["NGN","EUR"]], rates2 = [6.0]

**输出：** 1.50000

**解释：**

在第 1 天将 **NGN** 换成 **EUR** ，并在第 2 天用反向汇率将 **EUR** 换回 **NGN** ，可以最大化最终的 **NGN**
数量。

**示例 3：**

**输入：** initialCurrency = "USD", pairs1 = [["USD","EUR"]], rates1 = [1.0],
pairs2 = [["EUR","JPY"]], rates2 = [10.0]

**输出：** 1.00000

**解释：**

在这个例子中，不需要在任何一天进行任何兑换。



**提示：**

  * `1 <= initialCurrency.length <= 3`
  * `initialCurrency` 仅由大写英文字母组成。
  * `1 <= n == pairs1.length <= 10`
  * `1 <= m == pairs2.length <= 10`
  * `pairs1[i] == [startCurrencyi, targetCurrencyi]`
  * `pairs2[i] == [startCurrencyi, targetCurrencyi]`
  * `1 <= startCurrencyi.length, targetCurrencyi.length <= 3`
  * `startCurrencyi` 和 `targetCurrencyi` 仅由大写英文字母组成。
  * `rates1.length == n`
  * `rates2.length == m`
  * `1.0 <= rates1[i], rates2[i] <= 10.0`
  * 输入保证两个转换图在各自的天数中没有矛盾或循环。
  * 输入保证输出 **最大**  为 `5 * 1010`。


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 | 力扣 |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 399 | 除法求值 | [[✓]](/problem/0399.md) |  [`深度优先搜索`](/tag/depth-first-search.md) [`广度优先搜索`](/tag/breadth-first-search.md) [`并查集`](/tag/union-find.md) `4+` | 🟠 | [🀄️](https://leetcode.cn/problems/evaluate-division) [🔗](https://leetcode.com/problems/evaluate-division) |