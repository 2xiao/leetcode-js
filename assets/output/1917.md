---
title: 1917. Leetcodify å¥½å‹æ¨è ğŸ”’
description: LeetCode 1917. Leetcodify å¥½å‹æ¨è ğŸ”’é¢˜è§£ï¼ŒLeetcodify Friends Recommendationsï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1917. Leetcodify å¥½å‹æ¨è ğŸ”’
  - Leetcodify å¥½å‹æ¨è
  - Leetcodify Friends Recommendations
  - è§£é¢˜æ€è·¯
  - æ•°æ®åº“
---

# 1917. Leetcodify å¥½å‹æ¨è ğŸ”’

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°æ®åº“`](/tag/database.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/leetcodify-friends-recommendations) [`LeetCode`](https://leetcode.com/problems/leetcodify-friends-recommendations)

## é¢˜ç›®

Table: `Listens`

> 
> 
> 
> 
> 
> +-------------+---------+
> 
> | Column Name | Type> 
> |
> 
> +-------------+---------+
> 
> | user_id> 
>  | int> 
>  |
> 
> | song_id> 
>  | int> 
>  |
> 
> | day> 
> > 
>  | date> 
> |
> 
> +-------------+---------+
> 
> This table may contain duplicates (In other words, there is no primary key for this table in SQL).
> 
> Each row of this table indicates that the user user_id listened to the song song_id on the day day.
> 
> 



Table: `Friendship`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | user1_id> 
>   | int> 
>  |
> 
> | user2_id> 
>   | int> 
>  |
> 
> +---------------+---------+
> 
> In SQL,(user1_id, user2_id) is the primary key for this table.
> 
> Each row of this table indicates that the users user1_id and user2_id are friends.
> 
> Note that user1_id < user2_id.
> 
> 



Recommend friends to Leetcodify users. We recommend user `x` to user `y` if:

  * Users `x` and `y` are not friends, and
  * Users `x` and `y` listened to the same three or more different songs **on the same day**.

Note that friend recommendations are **unidirectional** , meaning if user `x`
and user `y` should be recommended to each other, the result table should have
both user `x` recommended to user `y` and user `y` recommended to user `x`.
Also, note that the result table should not contain duplicates (i.e., user `y`
should not be recommended to user `x` multiple times.).

Return the result table in **any order**.

The result format is in the following example.



**Example 1:**

> Input: 
> 
> Listens table:
> 
> +---------+---------+------------+
> 
> | user_id | song_id | day> 
> > 
> |
> 
> +---------+---------+------------+
> 
> | 1> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 1> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 1> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 13> 
>   | 2021-03-15 |
> 
> | 5> 
>    | 10> 
>   | 2021-03-16 |
> 
> | 5> 
>    | 11> 
>   | 2021-03-16 |
> 
> | 5> 
>    | 12> 
>   | 2021-03-16 |
> 
> +---------+---------+------------+
> 
> Friendship table:
> 
> +----------+----------+
> 
> | user1_id | user2_id |
> 
> +----------+----------+
> 
> | 1> 
> > 
> | 2> 
> > 
> |
> 
> +----------+----------+
> 
> Output: 
> 
> +---------+----------------+
> 
> | user_id | recommended_id |
> 
> +---------+----------------+
> 
> | 1> 
>    | 3> 
> > 
> > 
>   |
> 
> | 2> 
>    | 3> 
> > 
> > 
>   |
> 
> | 3> 
>    | 1> 
> > 
> > 
>   |
> 
> | 3> 
>    | 2> 
> > 
> > 
>   |
> 
> +---------+----------------+
> 
> Explanation: 
> 
> Users 1 and 2 listened to songs 10, 11, and 12 on the same day, but they are already friends.
> 
> Users 1 and 3 listened to songs 10, 11, and 12 on the same day. Since they are not friends, we recommend them to each other.
> 
> Users 1 and 4 did not listen to the same three songs.
> 
> Users 1 and 5 listened to songs 10, 11, and 12, but on different days.
> 
> 
> 
> Similarly, we can see that users 2 and 3 listened to songs 10, 11, and 12 on the same day and are not friends, so we recommend them to each other.
> 
> 


## é¢˜ç›®å¤§æ„

è¡¨ï¼š `Listens`

> 
> 
> 
> 
> 
> +-------------+---------+
> 
> | Column Name | Type> 
> |
> 
> +-------------+---------+
> 
> | user_id> 
>  | int> 
>  |
> 
> | song_id> 
>  | int> 
>  |
> 
> | day> 
> > 
>  | date> 
> |
> 
> +-------------+---------+
> 
> è¿™ä¸ªè¡¨æ²¡æœ‰ä¸»é”®ï¼Œå¯èƒ½å­˜åœ¨é‡å¤é¡¹ã€‚
> 
> è¡¨ä¸­çš„æ¯ä¸€è¡Œè¡¨ç¤ºç”¨æˆ· user_id åœ¨ day è¿™ä¸€å¤©æ”¶å¬çš„æ­Œæ›² song_idã€‚
> 
> 



è¡¨ï¼š `Friendship`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | user1_id> 
>   | int> 
>  |
> 
> | user2_id> 
>   | int> 
>  |
> 
> +---------------+---------+
> 
> (user1_id, user2_id) æ˜¯è¿™ä¸ªè¡¨çš„ä¸»é”®ã€‚
> 
> è¡¨ä¸­çš„æ¯ä¸€è¡Œè¡¨ç¤º user1_id å’Œ user2_id æ˜¯å¥½å‹ã€‚
> 
> æ³¨æ„ï¼Œuser1_id < user2_idã€‚
> 
> 



å†™å‡º SQL è¯­å¥ï¼Œä¸º Leetcodify ç”¨æˆ·æ¨èå¥½å‹ã€‚æˆ‘ä»¬å°†ç¬¦åˆä¸‹åˆ—æ¡ä»¶çš„ç”¨æˆ· `x` æ¨èç»™ç”¨æˆ· `y` ï¼š

  * ç”¨æˆ· `x` å’Œ `y` ä¸æ˜¯å¥½å‹ï¼Œä¸”
  * ç”¨æˆ· `x` å’Œ `y` åœ¨**åŒä¸€å¤©** æ”¶å¬äº†ç›¸åŒçš„ä¸‰é¦–æˆ–æ›´å¤šä¸åŒæ­Œæ›²ã€‚

æ³¨æ„ï¼Œå¥½å‹æ¨èæ˜¯**å•å‘** çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœç”¨æˆ· `x` å’Œç”¨æˆ· `y` éœ€è¦äº’ç›¸æ¨èç»™å¯¹æ–¹ï¼Œç»“æœè¡¨éœ€è¦å°†ç”¨æˆ· `x` æ¨èç»™ç”¨æˆ· `y` å¹¶å°†ç”¨æˆ·
`y` æ¨èç»™ç”¨æˆ· `x`ã€‚å¦å¤–ï¼Œç»“æœè¡¨ä¸å¾—å‡ºç°é‡å¤é¡¹ï¼ˆå³ï¼Œç”¨æˆ· `y` ä¸å¯å¤šæ¬¡æ¨èç»™ç”¨æˆ· `x` ï¼‰ã€‚

æŒ‰**ä»»æ„é¡ºåº** è¿”å›ç»“æœè¡¨ã€‚

æŸ¥è¯¢æ ¼å¼å¦‚ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š



**ç¤ºä¾‹ 1:**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> Listens è¡¨ï¼š
> 
> +---------+---------+------------+
> 
> | user_id | song_id | day> 
> > 
> |
> 
> +---------+---------+------------+
> 
> | 1> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 1> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 1> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 13> 
>   | 2021-03-15 |
> 
> | 5> 
>    | 10> 
>   | 2021-03-16 |
> 
> | 5> 
>    | 11> 
>   | 2021-03-16 |
> 
> | 5> 
>    | 12> 
>   | 2021-03-16 |
> 
> +---------+---------+------------+
> 
> Friendship è¡¨ï¼š
> 
> +----------+----------+
> 
> | user1_id | user2_id |
> 
> +----------+----------+
> 
> | 1> 
> > 
> | 2> 
> > 
> |
> 
> +----------+----------+
> 
> **è¾“å‡ºï¼š**
> 
> +---------+----------------+
> 
> | user_id | recommended_id |
> 
> +---------+----------------+
> 
> | 1> 
>    | 3> 
> > 
> > 
>   |
> 
> | 2> 
>    | 3> 
> > 
> > 
>   |
> 
> | 3> 
>    | 1> 
> > 
> > 
>   |
> 
> | 3> 
>    | 2> 
> > 
> > 
>   |
> 
> +---------+----------------+
> 
> **è§£é‡Š**
> 
> ç”¨æˆ· 1 å’Œ 2 åœ¨åŒä¸€å¤©æ”¶å¬äº†æ­Œæ›² 10ã€11 å’Œ 12ï¼Œä½†ä»–ä»¬å·²ç»æ˜¯å¥½å‹äº†ã€‚
> 
> ç”¨æˆ· 1 å’Œ 3 åœ¨åŒä¸€å¤©æ”¶å¬äº†æ­Œæ›² 10ã€11 å’Œ 12ã€‚ç”±äºä»–ä»¬ä¸æ˜¯å¥½å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»™ä»–ä»¬äº’ç›¸æ¨èä¸ºå¥½å‹ã€‚
> 
> ç”¨æˆ· 1 å’Œ 4 æ²¡æœ‰æ”¶å¬ä¸‰é¦–ç›¸åŒçš„æ­Œæ›²ã€‚
> 
> ç”¨æˆ· 1 å’Œ 5 æ”¶å¬äº†æ­Œæ›² 10ã€11 å’Œ 12ï¼Œä½†ä¸æ˜¯åœ¨åŒä¸€å¤©æ”¶å¬çš„ã€‚
> 
> 
> 
> ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ç”¨æˆ· 2 å’Œ 3 åœ¨åŒä¸€å¤©æ”¶å¬äº†æ­Œæ›² 10ã€11 å’Œ 12ï¼Œä¸”ä»–ä»¬ä¸æ˜¯å¥½å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»™ä»–ä»¬äº’ç›¸æ¨èä¸ºå¥½å‹ã€‚
> 
> 


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1919 | å…´è¶£ç›¸åŒçš„æœ‹å‹ ğŸ”’ |  |  [`æ•°æ®åº“`](/tag/database.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/leetcodify-similar-friends) [ğŸ”—](https://leetcode.com/problems/leetcodify-similar-friends) |
| 1949 | åšå®šçš„å‹è°Š ğŸ”’ |  |  [`æ•°æ®åº“`](/tag/database.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/strong-friendship) [ğŸ”—](https://leetcode.com/problems/strong-friendship) |