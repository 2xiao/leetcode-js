---
title: 3472. 至多 K 次操作后的最长回文子序列
description: LeetCode 3472. 至多 K 次操作后的最长回文子序列题解，Longest Palindromic Subsequence After at Most K Operations，包含解题思路、复杂度分析以及完整的 JavaScript 代码实现。
keywords:
  - LeetCode
  - 3472. 至多 K 次操作后的最长回文子序列
  - 至多 K 次操作后的最长回文子序列
  - Longest Palindromic Subsequence After at Most K Operations
  - 解题思路
  - 字符串
  - 动态规划
---

# 3472. 至多 K 次操作后的最长回文子序列

🟠 <font color=#ffb800>Medium</font>&emsp; 🔖&ensp; [`字符串`](/tag/string.md) [`动态规划`](/tag/dynamic-programming.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/longest-palindromic-subsequence-after-at-most-k-operations) [`LeetCode`](https://leetcode.com/problems/longest-palindromic-subsequence-after-at-most-k-operations)

## 题目

You are given a string `s` and an integer `k`.

In one operation, you can replace the character at any position with the next
or previous letter in the alphabet (wrapping around so that `'a'` is after
`'z'`). For example, replacing `'a'` with the next letter results in `'b'`,
and replacing `'a'` with the previous letter results in `'z'`. Similarly,
replacing `'z'` with the next letter results in `'a'`, and replacing `'z'`
with the previous letter results in `'y'`.

Return the length of the **longest palindromic subsequence** of `s` that can
be obtained after performing **at most** `k` operations.



**Example 1:**

**Input:** s = "abced", k = 2

**Output:** 3

**Explanation:**

  * Replace `s[1]` with the next letter, and `s` becomes `"acced"`.
  * Replace `s[4]` with the previous letter, and `s` becomes `"accec"`.

The subsequence `"ccc"` forms a palindrome of length 3, which is the maximum.

**Example 2:**

**Input:** s = "aaazzz", k = 4

**Output:** 6

**Explanation:**

  * Replace `s[0]` with the previous letter, and `s` becomes `"zaazzz"`.
  * Replace `s[4]` with the next letter, and `s` becomes `"zaazaz"`.
  * Replace `s[3]` with the next letter, and `s` becomes `"zaaaaz"`.

The entire string forms a palindrome of length 6.



**Constraints:**

  * `1 <= s.length <= 200`
  * `1 <= k <= 200`
  * `s` consists of only lowercase English letters.


## 题目大意

给你一个字符串 `s` 和一个整数 `k`。

在一次操作中，你可以将任意位置的字符替换为字母表中相邻的字符（字母表是循环的，因此 `'z'` 的下一个字母是 `'a'`）。例如，将 `'a'`
替换为下一个字母结果是 `'b'`，将 `'a'` 替换为上一个字母结果是 `'z'`；同样，将 `'z'` 替换为下一个字母结果是
`'a'`，替换为上一个字母结果是 `'y'`。

返回在进行 **最多** `k` 次操作后，`s` 的 **最长回文子序列  **的长度。

**子序列  **是一个 **非空  **字符串，可以通过删除原字符串中的某些字符（或不删除任何字符）并保持剩余字符的相对顺序得到。

**回文  **是正着读和反着读都相同的字符串。



**示例 1：**

**输入:** s = "abced", k = 2

**输出:** 3

**解释:**

  * 将 `s[1]` 替换为下一个字母，得到 `"acced"`。
  * 将 `s[4]` 替换为上一个字母，得到 `"accec"`。

子序列 `"ccc"` 形成一个长度为 3 的回文，这是最长的回文子序列。

**示例 2：**

**输入:** s = "aaazzz", k = 4

**输出:** 6

**解释:**

  * 将 `s[0]` 替换为上一个字母，得到 `"zaazzz"`。
  * 将 `s[4]` 替换为下一个字母，得到 `"zaazaz"`。
  * 将 `s[3]` 替换为下一个字母，得到 `"zaaaaz"`。

整个字符串形成一个长度为 6 的回文。



**提示:**

  * `1 <= s.length <= 200`
  * `1 <= k <= 200`
  * `s` 仅由小写英文字母组成。


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```