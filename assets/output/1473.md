---
title: 1473. ç²‰åˆ·æˆ¿å­ III
description: LeetCode,1473. ç²‰åˆ·æˆ¿å­ III,ç²‰åˆ·æˆ¿å­ III,Paint House III,è§£é¢˜æ€è·¯,æ•°ç»„,åŠ¨æ€è§„åˆ’
keywords:
  - LeetCode
  - 1473. ç²‰åˆ·æˆ¿å­ III
  - ç²‰åˆ·æˆ¿å­ III
  - Paint House III
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - åŠ¨æ€è§„åˆ’
---

# 1473. ç²‰åˆ·æˆ¿å­ III

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/paint-house-iii) [`LeetCode`](https://leetcode.com/problems/paint-house-iii)

## é¢˜ç›®

There is a row of `m` houses in a small city, each house must be painted with
one of the `n` colors (labeled from `1` to `n`), some houses that have been
painted last summer should not be painted again.

A neighborhood is a maximal group of continuous houses that are painted with
the same color.

  * For example: `houses = [1,2,2,3,3,2,1,1]` contains `5` neighborhoods `[{1}, {2,2}, {3,3}, {2}, {1,1}]`.

Given an array `houses`, an `m x n` matrix `cost` and an integer `target`
where:

  * `houses[i]`: is the color of the house `i`, and `0` if the house is not painted yet.
  * `cost[i][j]`: is the cost of paint the house `i` with the color `j + 1`.

Return _the minimum cost of painting all the remaining houses in such a way
that there are exactly_ `target` _neighborhoods_. If it is not possible,
return `-1`.



**Example 1:**

> Input: houses = [0,0,0,0,0], cost = [[1,10],[10,1],[10,1],[1,10],[5,1]], m = 5, n = 2, target = 3
> 
> Output: 9
> 
> Explanation: Paint houses of this way [1,2,2,1,1]
> 
> This array contains target = 3 neighborhoods, [{1}, {2,2}, {1,1}].
> 
> Cost of paint all houses (1 + 1 + 1 + 1 + 5) = 9.

**Example 2:**

> Input: houses = [0,2,1,2,0], cost = [[1,10],[10,1],[10,1],[1,10],[5,1]], m = 5, n = 2, target = 3
> 
> Output: 11
> 
> Explanation: Some houses are already painted, Paint the houses of this way [2,2,1,2,2]
> 
> This array contains target = 3 neighborhoods, [{2,2}, {1}, {2,2}]. 
> 
> Cost of paint the first and last house (10 + 1) = 11.

**Example 3:**

> Input: houses = [3,1,2,3], cost = [[1,1,1],[1,1,1],[1,1,1],[1,1,1]], m = 4, n = 3, target = 3
> 
> Output: -1
> 
> Explanation: Houses are already painted with a total of 4 neighborhoods [{3},{1},{2},{3}] different of target = 3.

**Constraints:**

  * `m == houses.length == cost.length`
  * `n == cost[i].length`
  * `1 <= m <= 100`
  * `1 <= n <= 20`
  * `1 <= target <= m`
  * `0 <= houses[i] <= n`
  * `1 <= cost[i][j] <= 10^4`


## é¢˜ç›®å¤§æ„

åœ¨ä¸€ä¸ªå°åŸå¸‚é‡Œï¼Œæœ‰ `m` ä¸ªæˆ¿å­æ’æˆä¸€æ’ï¼Œä½ éœ€è¦ç»™æ¯ä¸ªæˆ¿å­æ¶‚ä¸Š `n` ç§é¢œè‰²ä¹‹ä¸€ï¼ˆé¢œè‰²ç¼–å·ä¸º `1` åˆ° `n`
ï¼‰ã€‚æœ‰çš„æˆ¿å­å»å¹´å¤å¤©å·²ç»æ¶‚è¿‡é¢œè‰²äº†ï¼Œæ‰€ä»¥è¿™äº›æˆ¿å­ä¸å¯ä»¥è¢«é‡æ–°æ¶‚è‰²ã€‚

æˆ‘ä»¬å°†è¿ç»­ç›¸åŒé¢œè‰²å°½å¯èƒ½å¤šçš„æˆ¿å­ç§°ä¸ºä¸€ä¸ªè¡—åŒºã€‚ï¼ˆæ¯”æ–¹è¯´ `houses = [1,2,2,3,3,2,1,1]` ï¼Œå®ƒåŒ…å« 5 ä¸ªè¡—åŒº ` [{1},
{2,2}, {3,3}, {2}, {1,1}]` ã€‚ï¼‰

ç»™ä½ ä¸€ä¸ªæ•°ç»„ `houses` ï¼Œä¸€ä¸ª `m * n` çš„çŸ©é˜µ `cost` å’Œä¸€ä¸ªæ•´æ•° `target` ï¼Œå…¶ä¸­ï¼š

  * `houses[i]`ï¼šæ˜¯ç¬¬ `i` ä¸ªæˆ¿å­çš„é¢œè‰²ï¼Œ**0** è¡¨ç¤ºè¿™ä¸ªæˆ¿å­è¿˜æ²¡æœ‰è¢«æ¶‚è‰²ã€‚
  * `cost[i][j]`ï¼šæ˜¯å°†ç¬¬ `i` ä¸ªæˆ¿å­æ¶‚æˆé¢œè‰² `j+1` çš„èŠ±è´¹ã€‚

è¯·ä½ è¿”å›æˆ¿å­æ¶‚è‰²æ–¹æ¡ˆçš„æœ€å°æ€»èŠ±è´¹ï¼Œä½¿å¾—æ¯ä¸ªæˆ¿å­éƒ½è¢«æ¶‚è‰²åï¼Œæ°å¥½ç»„æˆ `target` ä¸ªè¡—åŒºã€‚å¦‚æœæ²¡æœ‰å¯ç”¨çš„æ¶‚è‰²æ–¹æ¡ˆï¼Œè¯·è¿”å› **-1** ã€‚

**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** houses = [0,0,0,0,0], cost = [[1,10],[10,1],[10,1],[1,10],[5,1]], m = 5, n = 2, target = 3
> 
> **è¾“å‡ºï¼š** 9
> 
> **è§£é‡Šï¼š** æˆ¿å­æ¶‚è‰²æ–¹æ¡ˆä¸º [1,2,2,1,1]
> 
> æ­¤æ–¹æ¡ˆåŒ…å« target = 3 ä¸ªè¡—åŒºï¼Œåˆ†åˆ«æ˜¯ [{1}, {2,2}, {1,1}]ã€‚
> 
> æ¶‚è‰²çš„æ€»èŠ±è´¹ä¸º (1 + 1 + 1 + 1 + 5) = 9ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** houses = [0,2,1,2,0], cost = [[1,10],[10,1],[10,1],[1,10],[5,1]], m = 5, n = 2, target = 3
> 
> **è¾“å‡ºï¼š** 11
> 
> **è§£é‡Šï¼š** æœ‰çš„æˆ¿å­å·²ç»è¢«æ¶‚è‰²äº†ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ¶‚è‰²æ–¹æ¡ˆä¸º [2,2,1,2,2]
> 
> æ­¤æ–¹æ¡ˆåŒ…å« target = 3 ä¸ªè¡—åŒºï¼Œåˆ†åˆ«æ˜¯ [{2,2}, {1}, {2,2}]ã€‚
> 
> ç»™ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªæˆ¿å­æ¶‚è‰²çš„èŠ±è´¹ä¸º (10 + 1) = 11ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** houses = [0,0,0,0,0], cost = [[1,10],[10,1],[1,10],[10,1],[1,10]], m = 5, n = 2, target = 5
> 
> **è¾“å‡ºï¼š** 5
> 
> 

**ç¤ºä¾‹ 4ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** houses = [3,1,2,3], cost = [[1,1,1],[1,1,1],[1,1,1],[1,1,1]], m = 4, n = 3, target = 3
> 
> **è¾“å‡ºï¼š** -1
> 
> **è§£é‡Šï¼š** æˆ¿å­å·²ç»è¢«æ¶‚è‰²å¹¶ç»„æˆäº† 4 ä¸ªè¡—åŒºï¼Œåˆ†åˆ«æ˜¯ [{3},{1},{2},{3}] ï¼Œæ— æ³•å½¢æˆ target = 3 ä¸ªè¡—åŒºã€‚
> 
> 

**æç¤ºï¼š**

  * `m == houses.length == cost.length`
  * `n == cost[i].length`
  * `1 <= m <= 100`
  * `1 <= n <= 20`
  * `1 <= target <= m`
  * `0 <= houses[i] <= n`
  * `1 <= cost[i][j] <= 10^4`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2318 | [ä¸åŒéª°å­åºåˆ—çš„æ•°ç›®](https://leetcode.com/problems/number-of-distinct-roll-sequences) |  |  [`è®°å¿†åŒ–æœç´¢`](/tag/memoization.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ff334b>Hard</font> |