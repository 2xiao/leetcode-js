# [636. å‡½æ•°çš„ç‹¬å æ—¶é—´](https://leetcode.com/problems/exclusive-time-of-functions)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`æ•°ç»„`](/tag/array.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/exclusive-time-of-functions)

## é¢˜ç›®

On a **single-threaded** CPU, we execute a program containing `n` functions.
Each function has a unique ID between `0` and `n-1`.

Function calls are **stored in a[call
stack](https://en.wikipedia.org/wiki/Call_stack)**: when a function call
starts, its ID is pushed onto the stack, and when a function call ends, its ID
is popped off the stack. The function whose ID is at the top of the stack is
**the current function being executed**. Each time a function starts or ends,
we write a log with the ID, whether it started or ended, and the timestamp.

You are given a list `logs`, where `logs[i]` represents the `ith` log message formatted as a string `"{function_id}:{"start" | "end"}:{timestamp}"`. For example, `"0:start:3"` means a function call with function ID `0` **started at the beginning** of timestamp `3`, and `"1:end:2"` means a function call with function ID `1` **ended at the end** of timestamp `2`. Note that a function can be called **multiple times, possibly recursively**.

A function's **exclusive time** is the sum of execution times for all function
calls in the program. For example, if a function is called twice, one call
executing for `2` time units and another call executing for `1` time unit, the
**exclusive time** is `2 + 1 = 3`.

Return _the**exclusive time** of each function in an array, where the value at
the _`ith` _index represents the exclusive time for the function with ID_`i`.



**Example 1:**

![](https://assets.leetcode.com/uploads/2019/04/05/diag1b.png)

> Input: n = 2, logs = ["0:start:0","1:start:2","1:end:5","0:end:6"]
> 
> Output: [3,4]
> 
> Explanation:
> 
> Function 0 starts at the beginning of time 0, then it executes 2 for units of time and reaches the end of time 1.
> 
> Function 1 starts at the beginning of time 2, executes for 4 units of time, and ends at the end of time 5.
> 
> Function 0 resumes execution at the beginning of time 6 and executes for 1 unit of time.
> 
> So function 0 spends 2 + 1 = 3 units of total time executing, and function 1 spends 4 units of total time executing.

**Example 2:**

> Input: n = 1, logs = ["0:start:0","0:start:2","0:end:5","0:start:6","0:end:6","0:end:7"]
> 
> Output: [8]
> 
> Explanation:
> 
> Function 0 starts at the beginning of time 0, executes for 2 units of time, and recursively calls itself.
> 
> Function 0 (recursive call) starts at the beginning of time 2 and executes for 4 units of time.
> 
> Function 0 (initial call) resumes execution then immediately calls itself again.
> 
> Function 0 (2nd recursive call) starts at the beginning of time 6 and executes for 1 unit of time.
> 
> Function 0 (initial call) resumes execution at the beginning of time 7 and executes for 1 unit of time.
> 
> So function 0 spends 2 + 4 + 1 + 1 = 8 units of total time executing.

**Example 3:**

> Input: n = 2, logs = ["0:start:0","0:start:2","0:end:5","1:start:6","1:end:6","0:end:7"]
> 
> Output: [7,1]
> 
> Explanation:
> 
> Function 0 starts at the beginning of time 0, executes for 2 units of time, and recursively calls itself.
> 
> Function 0 (recursive call) starts at the beginning of time 2 and executes for 4 units of time.
> 
> Function 0 (initial call) resumes execution then immediately calls function 1.
> 
> Function 1 starts at the beginning of time 6, executes 1 unit of time, and ends at the end of time 6.
> 
> Function 0 resumes execution at the beginning of time 6 and executes for 2 units of time.
> 
> So function 0 spends 2 + 4 + 1 = 7 units of total time executing, and function 1 spends 1 unit of total time executing.

**Constraints:**

  * `1 <= n <= 100`
  * `1 <= logs.length <= 500`
  * `0 <= function_id < n`
  * `0 <= timestamp <= 10^9`
  * No two start events will happen at the same timestamp.
  * No two end events will happen at the same timestamp.
  * Each function has an `"end"` log for each `"start"` log.


## é¢˜ç›®å¤§æ„

æœ‰ä¸€ä¸ª **å•çº¿ç¨‹** CPU æ­£åœ¨è¿è¡Œä¸€ä¸ªå«æœ‰ `n` é“å‡½æ•°çš„ç¨‹åºã€‚æ¯é“å‡½æ•°éƒ½æœ‰ä¸€ä¸ªä½äº  `0` å’Œ `n-1` ä¹‹é—´çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚

å‡½æ•°è°ƒç”¨
**å­˜å‚¨åœ¨ä¸€ä¸ª[è°ƒç”¨æ ˆ](https://baike.baidu.com/item/%E8%B0%83%E7%94%A8%E6%A0%88/22718047?fr=aladdin)
ä¸Š** ï¼šå½“ä¸€ä¸ªå‡½æ•°è°ƒç”¨å¼€å§‹æ—¶ï¼Œå®ƒçš„æ ‡è¯†ç¬¦å°†ä¼šæ¨å…¥æ ˆä¸­ã€‚è€Œå½“ä¸€ä¸ªå‡½æ•°è°ƒç”¨ç»“æŸæ—¶ï¼Œå®ƒçš„æ ‡è¯†ç¬¦å°†ä¼šä»æ ˆä¸­å¼¹å‡ºã€‚æ ‡è¯†ç¬¦ä½äºæ ˆé¡¶çš„å‡½æ•°æ˜¯ **å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°**
ã€‚æ¯å½“ä¸€ä¸ªå‡½æ•°å¼€å§‹æˆ–è€…ç»“æŸæ—¶ï¼Œå°†ä¼šè®°å½•ä¸€æ¡æ—¥å¿—ï¼ŒåŒ…æ‹¬å‡½æ•°æ ‡è¯†ç¬¦ã€æ˜¯å¼€å§‹è¿˜æ˜¯ç»“æŸã€ä»¥åŠç›¸åº”çš„æ—¶é—´æˆ³ã€‚

ç»™ä½ ä¸€ä¸ªç”±æ—¥å¿—ç»„æˆçš„åˆ—è¡¨ `logs` ï¼Œå…¶ä¸­ `logs[i]` è¡¨ç¤ºç¬¬ `i` æ¡æ—¥å¿—æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯æ˜¯ä¸€ä¸ªæŒ‰ `"{function_id}:{"start" | "end"}:{timestamp}"` è¿›è¡Œæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œ`"0:start:3"` æ„å‘³ç€æ ‡è¯†ç¬¦ä¸º `0` çš„å‡½æ•°è°ƒç”¨åœ¨æ—¶é—´æˆ³ `3` çš„ **èµ·å§‹å¼€å§‹æ‰§è¡Œ** ï¼›è€Œ `"1:end:2"` æ„å‘³ç€æ ‡è¯†ç¬¦ä¸º `1` çš„å‡½æ•°è°ƒç”¨åœ¨æ—¶é—´æˆ³ `2` çš„ **æœ«å°¾ç»“æŸæ‰§è¡Œ** ã€‚æ³¨æ„ï¼Œå‡½æ•°å¯ä»¥ **è°ƒç”¨å¤šæ¬¡ï¼Œå¯èƒ½å­˜åœ¨é€’å½’è°ƒç”¨** ã€‚

å‡½æ•°çš„ **ç‹¬å æ—¶é—´**
å®šä¹‰æ˜¯åœ¨è¿™ä¸ªå‡½æ•°åœ¨ç¨‹åºæ‰€æœ‰å‡½æ•°è°ƒç”¨ä¸­æ‰§è¡Œæ—¶é—´çš„æ€»å’Œï¼Œè°ƒç”¨å…¶ä»–å‡½æ•°èŠ±è´¹çš„æ—¶é—´ä¸ç®—è¯¥å‡½æ•°çš„ç‹¬å æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨ä¸¤æ¬¡ï¼Œä¸€æ¬¡è°ƒç”¨æ‰§è¡Œ `2`
å•ä½æ—¶é—´ï¼Œå¦ä¸€æ¬¡è°ƒç”¨æ‰§è¡Œ `1` å•ä½æ—¶é—´ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°çš„ **ç‹¬å æ—¶é—´** ä¸º `2 + 1 = 3` ã€‚

ä»¥æ•°ç»„å½¢å¼è¿”å›æ¯ä¸ªå‡½æ•°çš„ **ç‹¬å æ—¶é—´** ï¼Œå…¶ä¸­ç¬¬ `i` ä¸ªä¸‹æ ‡å¯¹åº”çš„å€¼è¡¨ç¤ºæ ‡è¯†ç¬¦ `i` çš„å‡½æ•°çš„ç‹¬å æ—¶é—´ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2019/04/05/diag1b.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 2, logs = ["0:start:0","1:start:2","1:end:5","0:end:6"]
> 
> **è¾“å‡ºï¼š**[3,4]
> 
> **è§£é‡Šï¼š**
> 
> å‡½æ•° 0 åœ¨æ—¶é—´æˆ³ 0 çš„èµ·å§‹å¼€å§‹æ‰§è¡Œï¼Œæ‰§è¡Œ 2 ä¸ªå•ä½æ—¶é—´ï¼Œäºæ—¶é—´æˆ³ 1 çš„æœ«å°¾ç»“æŸæ‰§è¡Œã€‚ 
> 
> å‡½æ•° 1 åœ¨æ—¶é—´æˆ³ 2 çš„èµ·å§‹å¼€å§‹æ‰§è¡Œï¼Œæ‰§è¡Œ 4 ä¸ªå•ä½æ—¶é—´ï¼Œäºæ—¶é—´æˆ³ 5 çš„æœ«å°¾ç»“æŸæ‰§è¡Œã€‚ 
> 
> å‡½æ•° 0 åœ¨æ—¶é—´æˆ³ 6 çš„å¼€å§‹æ¢å¤æ‰§è¡Œï¼Œæ‰§è¡Œ 1 ä¸ªå•ä½æ—¶é—´ã€‚ 
> 
> æ‰€ä»¥å‡½æ•° 0 æ€»å…±æ‰§è¡Œ 2 + 1 = 3 ä¸ªå•ä½æ—¶é—´ï¼Œå‡½æ•° 1 æ€»å…±æ‰§è¡Œ 4 ä¸ªå•ä½æ—¶é—´ã€‚ 
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 1, logs = ["0:start:0","0:start:2","0:end:5","0:start:6","0:end:6","0:end:7"]
> 
> **è¾“å‡ºï¼š**[8]
> 
> **è§£é‡Šï¼š**
> 
> å‡½æ•° 0 åœ¨æ—¶é—´æˆ³ 0 çš„èµ·å§‹å¼€å§‹æ‰§è¡Œï¼Œæ‰§è¡Œ 2 ä¸ªå•ä½æ—¶é—´ï¼Œå¹¶é€’å½’è°ƒç”¨å®ƒè‡ªèº«ã€‚
> 
> å‡½æ•° 0ï¼ˆé€’å½’è°ƒç”¨ï¼‰åœ¨æ—¶é—´æˆ³ 2 çš„èµ·å§‹å¼€å§‹æ‰§è¡Œï¼Œæ‰§è¡Œ 4 ä¸ªå•ä½æ—¶é—´ã€‚
> 
> å‡½æ•° 0ï¼ˆåˆå§‹è°ƒç”¨ï¼‰æ¢å¤æ‰§è¡Œï¼Œå¹¶ç«‹åˆ»å†æ¬¡è°ƒç”¨å®ƒè‡ªèº«ã€‚
> 
> å‡½æ•° 0ï¼ˆç¬¬äºŒæ¬¡é€’å½’è°ƒç”¨ï¼‰åœ¨æ—¶é—´æˆ³ 6 çš„èµ·å§‹å¼€å§‹æ‰§è¡Œï¼Œæ‰§è¡Œ 1 ä¸ªå•ä½æ—¶é—´ã€‚
> 
> å‡½æ•° 0ï¼ˆåˆå§‹è°ƒç”¨ï¼‰åœ¨æ—¶é—´æˆ³ 7 çš„èµ·å§‹æ¢å¤æ‰§è¡Œï¼Œæ‰§è¡Œ 1 ä¸ªå•ä½æ—¶é—´ã€‚
> 
> æ‰€ä»¥å‡½æ•° 0 æ€»å…±æ‰§è¡Œ 2 + 4 + 1 + 1 = 8 ä¸ªå•ä½æ—¶é—´ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 2, logs = ["0:start:0","0:start:2","0:end:5","1:start:6","1:end:6","0:end:7"]
> 
> **è¾“å‡ºï¼š**[7,1]
> 
> **è§£é‡Šï¼š**
> 
> å‡½æ•° 0 åœ¨æ—¶é—´æˆ³ 0 çš„èµ·å§‹å¼€å§‹æ‰§è¡Œï¼Œæ‰§è¡Œ 2 ä¸ªå•ä½æ—¶é—´ï¼Œå¹¶é€’å½’è°ƒç”¨å®ƒè‡ªèº«ã€‚
> 
> å‡½æ•° 0ï¼ˆé€’å½’è°ƒç”¨ï¼‰åœ¨æ—¶é—´æˆ³ 2 çš„èµ·å§‹å¼€å§‹æ‰§è¡Œï¼Œæ‰§è¡Œ 4 ä¸ªå•ä½æ—¶é—´ã€‚
> 
> å‡½æ•° 0ï¼ˆåˆå§‹è°ƒç”¨ï¼‰æ¢å¤æ‰§è¡Œï¼Œå¹¶ç«‹åˆ»è°ƒç”¨å‡½æ•° 1 ã€‚
> 
> å‡½æ•° 1åœ¨æ—¶é—´æˆ³ 6 çš„èµ·å§‹å¼€å§‹æ‰§è¡Œï¼Œæ‰§è¡Œ 1 ä¸ªå•ä½æ—¶é—´ï¼Œäºæ—¶é—´æˆ³ 6 çš„æœ«å°¾ç»“æŸæ‰§è¡Œã€‚
> 
> å‡½æ•° 0ï¼ˆåˆå§‹è°ƒç”¨ï¼‰åœ¨æ—¶é—´æˆ³ 7 çš„èµ·å§‹æ¢å¤æ‰§è¡Œï¼Œæ‰§è¡Œ 1 ä¸ªå•ä½æ—¶é—´ï¼Œäºæ—¶é—´æˆ³ 7 çš„æœ«å°¾ç»“æŸæ‰§è¡Œã€‚
> 
> æ‰€ä»¥å‡½æ•° 0 æ€»å…±æ‰§è¡Œ 2 + 4 + 1 = 7 ä¸ªå•ä½æ—¶é—´ï¼Œå‡½æ•° 1 æ€»å…±æ‰§è¡Œ 1 ä¸ªå•ä½æ—¶é—´ã€‚ 



**æç¤ºï¼š**

  * `1 <= n <= 100`
  * `1 <= logs.length <= 500`
  * `0 <= function_id < n`
  * `0 <= timestamp <= 10^9`
  * ä¸¤ä¸ªå¼€å§‹äº‹ä»¶ä¸ä¼šåœ¨åŒä¸€æ—¶é—´æˆ³å‘ç”Ÿ
  * ä¸¤ä¸ªç»“æŸäº‹ä»¶ä¸ä¼šåœ¨åŒä¸€æ—¶é—´æˆ³å‘ç”Ÿ
  * æ¯é“å‡½æ•°éƒ½æœ‰ä¸€ä¸ªå¯¹åº” `"start"` æ—¥å¿—çš„ `"end"` æ—¥å¿—


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```