# [2925. åœ¨æ ‘ä¸Šæ‰§è¡Œæ“ä½œä»¥åå¾—åˆ°çš„æœ€å¤§åˆ†æ•°](https://leetcode.com/problems/maximum-score-after-applying-operations-on-a-tree)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/leetcode/outline/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/leetcode/outline/tag/depth-first-search.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/maximum-score-after-applying-operations-on-a-tree)


## é¢˜ç›®

There is an undirected tree with `n` nodes labeled from `0` to `n - 1`, and
rooted at node `0`. You are given a 2D integer array `edges` of length `n -
1`, where `edges[i] = [ai, bi]` indicates that there is an edge between nodes
`ai` and `bi` in the tree.

You are also given a **0-indexed** integer array `values` of length `n`, where
`values[i]` is the **value** associated with the `ith` node.

You start with a score of `0`. In one operation, you can:

  * Pick any node `i`.
  * Add `values[i]` to your score.
  * Set `values[i]` to `0`.

A tree is **healthy** if the sum of values on the path from the root to any
leaf node is different than zero.

Return _the**maximum score** you can obtain after performing these operations
on the tree any number of times so that it remains **healthy**._



**Example 1:**

![](https://assets.leetcode.com/uploads/2023/10/11/graph-13-1.png)

> Input: edges = [[0,1],[0,2],[0,3],[2,4],[4,5]], values = [5,2,5,2,1,1]
> 
> Output: 11
> 
> Explanation: We can choose nodes 1, 2, 3, 4, and 5. The value of the root is non-zero. Hence, the sum of values on the path from the root to any leaf is different than zero. Therefore, the tree is healthy and the score is values[1] + values[2] + values[3] + values[4] + values[5] = 11.
> 
> It can be shown that 11 is the maximum score obtainable after any number of operations on the tree.

**Example 2:**

![](https://assets.leetcode.com/uploads/2023/10/11/graph-14-2.png)

> Input: edges = [[0,1],[0,2],[1,3],[1,4],[2,5],[2,6]], values = [20,10,9,7,4,3,5]
> 
> Output: 40
> 
> Explanation: We can choose nodes 0, 2, 3, and 4.
> - The sum of values on the path from 0 to 4 is equal to 10.
> - The sum of values on the path from 0 to 3 is equal to 10.
> - The sum of values on the path from 0 to 5 is equal to 3.
> - The sum of values on the path from 0 to 6 is equal to 5.
> 
> Therefore, the tree is healthy and the score is values[0] + values[2] + values[3] + values[4] = 40.
> 
> It can be shown that 40 is the maximum score obtainable after any number of operations on the tree.

**Constraints:**

  * `2 <= n <= 2 * 10^4`
  * `edges.length == n - 1`
  * `edges[i].length == 2`
  * `0 <= ai, bi < n`
  * `values.length == n`
  * `1 <= values[i] <= 10^9`
  * The input is generated such that `edges` represents a valid tree.


## é¢˜ç›®å¤§æ„

æœ‰ä¸€æ£µ `n` ä¸ªèŠ‚ç‚¹çš„æ— å‘æ ‘ï¼ŒèŠ‚ç‚¹ç¼–å·ä¸º `0` åˆ° `n - 1` ï¼Œæ ¹èŠ‚ç‚¹ç¼–å·ä¸º `0` ã€‚ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n - 1` çš„äºŒç»´æ•´æ•°æ•°ç»„
`edges` è¡¨ç¤ºè¿™æ£µæ ‘ï¼Œå…¶ä¸­ `edges[i] = [ai, bi]` è¡¨ç¤ºæ ‘ä¸­èŠ‚ç‚¹ `ai` å’Œ `bi` æœ‰ä¸€æ¡è¾¹ã€‚

åŒæ—¶ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` ä¸‹æ ‡ä» **0**  å¼€å§‹çš„æ•´æ•°æ•°ç»„ `values` ï¼Œå…¶ä¸­ `values[i]` è¡¨ç¤ºç¬¬ `i` ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚

ä¸€å¼€å§‹ä½ çš„åˆ†æ•°ä¸º `0` ï¼Œæ¯æ¬¡æ“ä½œä¸­ï¼Œä½ å°†æ‰§è¡Œï¼š

  * é€‰æ‹©èŠ‚ç‚¹ `i` ã€‚
  * å°† `values[i]` åŠ å…¥ä½ çš„åˆ†æ•°ã€‚
  * å°† `values[i]` å˜ä¸º `0` ã€‚

å¦‚æœä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œåˆ°ä»»æ„å¶å­èŠ‚ç‚¹ç»è¿‡çš„è·¯å¾„ä¸Šçš„èŠ‚ç‚¹å€¼ä¹‹å’Œéƒ½ä¸ç­‰äº 0 ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°è¿™æ£µæ ‘æ˜¯ **å¥åº·çš„**  ã€‚

ä½ å¯ä»¥å¯¹è¿™æ£µæ ‘æ‰§è¡Œä»»æ„æ¬¡æ“ä½œï¼Œä½†è¦æ±‚æ‰§è¡Œå®Œæ‰€æœ‰æ“ä½œä»¥åæ ‘æ˜¯ **å¥åº·çš„**  ï¼Œè¯·ä½ è¿”å›ä½ å¯ä»¥è·å¾—çš„ **æœ€å¤§åˆ†æ•°**  ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2023/10/11/graph-13-1.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** edges = [[0,1],[0,2],[0,3],[2,4],[4,5]], values = [5,2,5,2,1,1]
> 
> **è¾“å‡ºï¼š** 11
> 
> **è§£é‡Šï¼š** æˆ‘ä»¬å¯ä»¥é€‰æ‹©èŠ‚ç‚¹ 1 ï¼Œ2 ï¼Œ3 ï¼Œ4 å’Œ 5 ã€‚æ ¹èŠ‚ç‚¹çš„å€¼æ˜¯é 0 çš„ã€‚æ‰€ä»¥ä»æ ¹å‡ºå‘åˆ°ä»»æ„å¶å­èŠ‚ç‚¹è·¯å¾„ä¸ŠèŠ‚ç‚¹å€¼ä¹‹å’Œéƒ½ä¸ä¸º 0 ã€‚æ‰€ä»¥æ ‘æ˜¯å¥åº·çš„ã€‚ä½ çš„å¾—åˆ†ä¹‹å’Œä¸º values[1] + values[2] + values[3] + values[4] + values[5] = 11 ã€‚
> 
> 11 æ˜¯ä½ å¯¹æ ‘æ‰§è¡Œä»»æ„æ¬¡æ“ä½œä»¥åå¯ä»¥è·å¾—çš„æœ€å¤§å¾—åˆ†ä¹‹å’Œã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2023/10/11/graph-14-2.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** edges = [[0,1],[0,2],[1,3],[1,4],[2,5],[2,6]], values = [20,10,9,7,4,3,5]
> 
> **è¾“å‡ºï¼š** 40
> 
> **è§£é‡Šï¼š** æˆ‘ä»¬é€‰æ‹©èŠ‚ç‚¹ 0 ï¼Œ2 ï¼Œ3 å’Œ 4 ã€‚
> - ä» 0 åˆ° 4 çš„èŠ‚ç‚¹å€¼ä¹‹å’Œä¸º 10 ã€‚
> - ä» 0 åˆ° 3 çš„èŠ‚ç‚¹å€¼ä¹‹å’Œä¸º 10 ã€‚
> - ä» 0 åˆ° 5 çš„èŠ‚ç‚¹å€¼ä¹‹å’Œä¸º 3 ã€‚
> - ä» 0 åˆ° 6 çš„èŠ‚ç‚¹å€¼ä¹‹å’Œä¸º 5 ã€‚
> 
> æ‰€ä»¥æ ‘æ˜¯å¥åº·çš„ã€‚ä½ çš„å¾—åˆ†ä¹‹å’Œä¸º values[0] + values[2] + values[3] + values[4] = 40 ã€‚
> 
> 40 æ˜¯ä½ å¯¹æ ‘æ‰§è¡Œä»»æ„æ¬¡æ“ä½œä»¥åå¯ä»¥è·å¾—çš„æœ€å¤§å¾—åˆ†ä¹‹å’Œã€‚
> 
> 



**æç¤ºï¼š**

  * `2 <= n <= 2 * 10^4`
  * `edges.length == n - 1`
  * `edges[i].length == 2`
  * `0 <= ai, bi < n`
  * `values.length == n`
  * `1 <= values[i] <= 10^9`
  * è¾“å…¥ä¿è¯ `edges` æ„æˆä¸€æ£µåˆæ³•çš„æ ‘ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 834 | [æ ‘ä¸­è·ç¦»ä¹‹å’Œ](https://leetcode.com/problems/sum-of-distances-in-tree) |  |  [`æ ‘`](/leetcode/outline/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/leetcode/outline/tag/depth-first-search.md) [`å›¾`](/leetcode/outline/tag/graph.md) `1+` | <font color=#ff334b>Hard</font> |
| 2603 | [æ”¶é›†æ ‘ä¸­é‡‘å¸](https://leetcode.com/problems/collect-coins-in-a-tree) |  |  [`æ ‘`](/leetcode/outline/tag/tree.md) [`å›¾`](/leetcode/outline/tag/graph.md) [`æ‹“æ‰‘æ’åº`](/leetcode/outline/tag/topological-sort.md) `1+` | <font color=#ff334b>Hard</font> |
| 3068 | [æœ€å¤§èŠ‚ç‚¹ä»·å€¼ä¹‹å’Œ](https://leetcode.com/problems/find-the-maximum-sum-of-node-values) |  |  [`è´ªå¿ƒ`](/leetcode/outline/tag/greedy.md) [`ä½è¿ç®—`](/leetcode/outline/tag/bit-manipulation.md) [`æ ‘`](/leetcode/outline/tag/tree.md) `3+` | <font color=#ff334b>Hard</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
