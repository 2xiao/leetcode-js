---
title: 716. æœ€å¤§æ ˆ ğŸ”’
description: LeetCode 716. æœ€å¤§æ ˆ ğŸ”’é¢˜è§£ï¼ŒMax Stackï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 716. æœ€å¤§æ ˆ ğŸ”’
  - æœ€å¤§æ ˆ
  - Max Stack
  - è§£é¢˜æ€è·¯
  - æ ˆ
  - è®¾è®¡
  - é“¾è¡¨
  - åŒå‘é“¾è¡¨
  - æœ‰åºé›†åˆ
---

# 716. æœ€å¤§æ ˆ ğŸ”’

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`è®¾è®¡`](/tag/design.md) [`é“¾è¡¨`](/tag/linked-list.md) [`åŒå‘é“¾è¡¨`](/tag/doubly-linked-list.md) [`æœ‰åºé›†åˆ`](/tag/ordered-set.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/max-stack) [`LeetCode`](https://leetcode.com/problems/max-stack)

## é¢˜ç›®

Design a max stack data structure that supports the stack operations and
supports finding the stack's maximum element.

Implement the `MaxStack` class:

  * `MaxStack()` Initializes the stack object.
  * `void push(int x)` Pushes element `x` onto the stack.
  * `int pop()` Removes the element on top of the stack and returns it.
  * `int top()` Gets the element on the top of the stack without removing it.
  * `int peekMax()` Retrieves the maximum element in the stack without removing it.
  * `int popMax()` Retrieves the maximum element in the stack and removes it. If there is more than one maximum element, only remove the **top-most** one.

You must come up with a solution that supports `O(1)` for each `top` call and
`O(logn)` for each other call.



**Example 1:**

> 
> 
> 
> 
> 
> **Input**
> 
> ["MaxStack", "push", "push", "push", "top", "popMax", "top", "peekMax", "pop", "top"]
> 
> [[], [5], [1], [5], [], [], [], [], [], []]
> 
> **Output**
> 
> [null, null, null, null, 5, 5, 1, 5, 1, 5]
> 
> 
> 
> **Explanation**
> 
> MaxStack stk = new MaxStack();
> 
> stk.push(5);   // [**_5_**] the top of the stack and the maximum number is 5.
> 
> stk.push(1);   // [_5_ , **1**] the top of the stack is 1, but the maximum is 5.
> 
> stk.push(5);   // [5, 1, **_5_**] the top of the stack is 5, which is also the maximum, because it is the top most one.
> 
> stk.top();> 
>  // return 5, [5, 1, **_5_**] the stack did not change.
> 
> stk.popMax();  // return 5, [_5_ , **1**] the stack is changed now, and the top is different from the max.
> 
> stk.top();> 
>  // return 1, [_5_ , **1**] the stack did not change.
> 
> stk.peekMax(); // return 5, [_5_ , **1**] the stack did not change.
> 
> stk.pop();> 
>  // return 1, [**_5_**] the top of the stack and the max element is now 5.
> 
> stk.top();> 
>  // return 5, [**_5_**] the stack did not change.

**Constraints:**

  * `-10^7 <= x <= 10^7`
  * At most `10^5` calls will be made to `push`, `pop`, `top`, `peekMax`, and `popMax`.
  * There will be **at least one element** in the stack when `pop`, `top`, `peekMax`, or `popMax` is called.


## é¢˜ç›®å¤§æ„

è®¾è®¡ä¸€ä¸ªæœ€å¤§æ ˆæ•°æ®ç»“æ„ï¼Œæ—¢æ”¯æŒæ ˆæ“ä½œï¼Œåˆæ”¯æŒæŸ¥æ‰¾æ ˆä¸­æœ€å¤§å…ƒç´ ã€‚

å®ç° `MaxStack` ç±»ï¼š

  * `MaxStack()` åˆå§‹åŒ–æ ˆå¯¹è±¡
  * `void push(int x)` å°†å…ƒç´  x å‹å…¥æ ˆä¸­ã€‚
  * `int pop()` ç§»é™¤æ ˆé¡¶å…ƒç´ å¹¶è¿”å›è¿™ä¸ªå…ƒç´ ã€‚
  * `int top()` è¿”å›æ ˆé¡¶å…ƒç´ ï¼Œæ— éœ€ç§»é™¤ã€‚
  * `int peekMax()` æ£€ç´¢å¹¶è¿”å›æ ˆä¸­æœ€å¤§å…ƒç´ ï¼Œæ— éœ€ç§»é™¤ã€‚
  * `int popMax()` æ£€ç´¢å¹¶è¿”å›æ ˆä¸­æœ€å¤§å…ƒç´ ï¼Œå¹¶å°†å…¶ç§»é™¤ã€‚å¦‚æœæœ‰å¤šä¸ªæœ€å¤§å…ƒç´ ï¼Œåªè¦ç§»é™¤ **æœ€é è¿‘æ ˆé¡¶** çš„é‚£ä¸ªã€‚

**ç¤ºä¾‹ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥**
> 
> ["MaxStack", "push", "push", "push", "top", "popMax", "top", "peekMax", "pop", "top"]
> 
> [[], [5], [1], [5], [], [], [], [], [], []]
> 
> **è¾“å‡º**
> 
> [null, null, null, null, 5, 5, 1, 5, 1, 5]
> 
> 
> 
> **è§£é‡Š**
> 
> MaxStack stk = new MaxStack();
> 
> stk.push(5);   // [**5**] - 5 æ—¢æ˜¯æ ˆé¡¶å…ƒç´ ï¼Œä¹Ÿæ˜¯æœ€å¤§å…ƒç´ 
> 
> stk.push(1);   // [**5** , **1**] - æ ˆé¡¶å…ƒç´ æ˜¯ 1ï¼Œæœ€å¤§å…ƒç´ æ˜¯ 5
> 
> stk.push(5);   // [5, 1, **5**] - 5 æ—¢æ˜¯æ ˆé¡¶å…ƒç´ ï¼Œä¹Ÿæ˜¯æœ€å¤§å…ƒç´ 
> 
> stk.top();> 
>  // è¿”å› 5ï¼Œ[5, 1, **5**] - æ ˆæ²¡æœ‰æ”¹å˜
> 
> stk.popMax();  // è¿”å› 5ï¼Œ[**5** , **1**] - æ ˆå‘ç”Ÿæ”¹å˜ï¼Œæ ˆé¡¶å…ƒç´ ä¸å†æ˜¯æœ€å¤§å…ƒç´ 
> 
> stk.top();> 
>  // è¿”å› 1ï¼Œ[**5** , **1**] - æ ˆæ²¡æœ‰æ”¹å˜
> 
> stk.peekMax(); // è¿”å› 5ï¼Œ[**5** , **1**] - æ ˆæ²¡æœ‰æ”¹å˜
> 
> stk.pop();> 
>  // è¿”å› 1ï¼Œ[**5**] - æ­¤æ“ä½œåï¼Œ5 æ—¢æ˜¯æ ˆé¡¶å…ƒç´ ï¼Œä¹Ÿæ˜¯æœ€å¤§å…ƒç´ 
> 
> stk.top();> 
>  // è¿”å› 5ï¼Œ[**5**] - æ ˆæ²¡æœ‰æ”¹å˜
> 
> 

**æç¤ºï¼š**

  * `-10^7 <= x <= 10^7`
  * æœ€å¤šè°ƒç”¨ `10^4` æ¬¡ `push`ã€`pop`ã€`top`ã€`peekMax` å’Œ `popMax`
  * è°ƒç”¨ `pop`ã€`top`ã€`peekMax` æˆ– `popMax` æ—¶ï¼Œæ ˆä¸­ **è‡³å°‘å­˜åœ¨ä¸€ä¸ªå…ƒç´ **

**è¿›é˜¶ï¼š**

  * è¯•ç€è®¾è®¡è§£å†³æ–¹æ¡ˆï¼šè°ƒç”¨ `top` æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(1)` ï¼Œè°ƒç”¨å…¶ä»–æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(logn)` ã€‚ 


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 155 | æœ€å°æ ˆ | [[âœ“]](/problem/0155.md) |  [`æ ˆ`](/tag/stack.md) [`è®¾è®¡`](/tag/design.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/min-stack) [ğŸ”—](https://leetcode.com/problems/min-stack) |