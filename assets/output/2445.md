# [2445. å€¼ä¸º 1 çš„èŠ‚ç‚¹æ•°](https://leetcode.com/problems/number-of-nodes-with-value-one)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/number-of-nodes-with-value-one)

## é¢˜ç›®

There is an **undirected** connected tree with `n` nodes labeled from `1` to
`n` and `n - 1` edges. You are given the integer `n`. The parent node of a
node with a label `v` is the node with the label `floor (v / 2)`. The root of
the tree is the node with the label `1`.

  * For example, if `n = 7`, then the node with the label `3` has the node with the label `floor(3 / 2) = 1` as its parent, and the node with the label `7` has the node with the label `floor(7 / 2) = 3` as its parent.

You are also given an integer array `queries`. Initially, every node has a
value `0` on it. For each query `queries[i]`, you should flip all values in
the subtree of the node with the label `queries[i]`.

Return _the total number of nodes with the value_`1` _**after processing all
the queries**_.

**Note** that:

  * Flipping the value of a node means that the node with the value `0` becomes `1` and vice versa.
  * `floor(x)` is equivalent to rounding `x` down to the nearest integer.



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2400-2499/2445.Number%20of%20Nodes%20With%20Value%20One/images/ex1.jpg)

> Input: n = 5 , queries = [1,2,5]
> 
> Output: 3
> 
> Explanation: The diagram above shows the tree structure and its status after performing the queries. The blue node represents the value 0, and the red node represents the value 1.
> 
> After processing the queries, there are three red nodes (nodes with value 1): 1, 3, and 5.

**Example 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2400-2499/2445.Number%20of%20Nodes%20With%20Value%20One/images/ex2.jpg)

> Input: n = 3, queries = [2,3,3]
> 
> Output: 1
> 
> Explanation: The diagram above shows the tree structure and its status after performing the queries. The blue node represents the value 0, and the red node represents the value 1.
> 
> After processing the queries, there are one red node (node with value 1): 2.

**Constraints:**

  * `1 <= n <= 10^5`
  * `1 <= queries.length <= 10^5`
  * `1 <= queries[i] <= n`


## é¢˜ç›®å¤§æ„

æœ‰ä¸€ä¸ª **æ— å‘  **æ ‘ï¼Œæœ‰ `n` ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹æ ‡è®°ä¸ºä» `1` åˆ° `n` ï¼Œè¿˜æœ‰ `n - 1` æ¡è¾¹ã€‚ç»™å®šæ•´æ•° `n`ã€‚æ ‡è®°ä¸º `v`
çš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯æ ‡è®°ä¸º `floor (v / 2)` çš„èŠ‚ç‚¹ã€‚æ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯æ ‡è®°ä¸º `1` çš„èŠ‚ç‚¹ã€‚

  * ä¾‹å¦‚ï¼Œå¦‚æœ `n = 7`ï¼Œé‚£ä¹ˆæ ‡è®°ä¸º `3` çš„èŠ‚ç‚¹å°†æ ‡è®° `floor(3 / 2) = 1` çš„èŠ‚ç‚¹ä½œä¸ºå…¶çˆ¶èŠ‚ç‚¹ï¼Œæ ‡è®°ä¸º `7` çš„èŠ‚ç‚¹å°†æ ‡è®° `floor(7 / 2) = 3` çš„èŠ‚ç‚¹ä½œä¸ºå…¶çˆ¶èŠ‚ç‚¹ã€‚

ä½ è¿˜å¾—åˆ°ä¸€ä¸ªæ•´æ•°æ•°ç»„ `queries`ã€‚æœ€åˆï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯ `0`ã€‚å¯¹äºæ¯ä¸ªæŸ¥è¯¢ `queries[i]`ï¼Œæ‚¨åº”è¯¥ç¿»è½¬èŠ‚ç‚¹æ ‡è®°ä¸º
`queries[i]` çš„å­æ ‘ä¸­çš„æ‰€æœ‰å€¼ã€‚

åœ¨ **å¤„ç†å®Œæ‰€æœ‰æŸ¥è¯¢å** ï¼Œè¿”å› _å€¼ä¸º`1` çš„èŠ‚ç‚¹æ€»æ•°ã€‚_

**æ³¨æ„** :

  * ç¿»è½¬èŠ‚ç‚¹çš„å€¼æ„å‘³ç€å€¼ä¸º `0` çš„èŠ‚ç‚¹å˜ä¸º `1`ï¼Œåä¹‹äº¦ç„¶ã€‚
  * `floor(x)` ç›¸å½“äºå°† `x` èˆå…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ã€‚



**ç¤ºä¾‹ 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2400-2499/2445.Number%20of%20Nodes%20With%20Value%20One/images/ex1.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥:** n = 5 , queries = [1,2,5]
> 
> **è¾“å‡º:** 3
> 
> **è§£é‡Š:** ä¸Šå›¾æ˜¾ç¤ºäº†æ‰§è¡ŒæŸ¥è¯¢åçš„æ ‘ç»“æ„åŠå…¶çŠ¶æ€ã€‚è“è‰²èŠ‚ç‚¹è¡¨ç¤ºå€¼ 0ï¼Œçº¢è‰²èŠ‚ç‚¹è¡¨ç¤ºå€¼ 1ã€‚
> 
> åœ¨å¤„ç†æŸ¥è¯¢ä¹‹åï¼Œæœ‰ä¸‰ä¸ªçº¢è‰²èŠ‚ç‚¹ (å€¼ä¸º 1 çš„èŠ‚ç‚¹): 1ã€3ã€5ã€‚
> 
> 

**ç¤ºä¾‹ 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2400-2499/2445.Number%20of%20Nodes%20With%20Value%20One/images/ex2.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥:** n = 3, queries = [2,3,3]
> 
> **è¾“å‡º:** 1
> 
> **è§£é‡Š:** ä¸Šå›¾æ˜¾ç¤ºäº†æ‰§è¡ŒæŸ¥è¯¢åçš„æ ‘ç»“æ„åŠå…¶çŠ¶æ€ã€‚è“è‰²èŠ‚ç‚¹è¡¨ç¤ºå€¼ 0ï¼Œçº¢è‰²èŠ‚ç‚¹è¡¨ç¤ºå€¼ 1ã€‚
> 
> åœ¨å¤„ç†æŸ¥è¯¢ä¹‹åï¼Œæœ‰ä¸€ä¸ªçº¢è‰²èŠ‚ç‚¹ (å€¼ä¸º 1 çš„èŠ‚ç‚¹): 2ã€‚
> 
> 



**æç¤º:**

  * `1 <= n <= 10^5`
  * `1 <= queries.length <= 10^5`
  * `1 <= queries[i] <= n`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```