# [1322. å¹¿å‘Šæ•ˆæœ](https://leetcode.com/problems/ads-performance)

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ•°æ®åº“`](/tag/database.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/ads-performance)

## é¢˜ç›®

Table: `Ads`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | ad_id> 
> > 
>  | int> 
>  |
> 
> | user_id> 
>    | int> 
>  |
> 
> | action> 
> > 
> | enum> 
> |
> 
> +---------------+---------+
> 
> (ad_id, user_id) is the primary key (combination of columns with unique values) for this table.
> 
> Each row of this table contains the ID of an Ad, the ID of a user, and the action taken by this user regarding this Ad.
> 
> The action column is an ENUM (category) type of ('Clicked', 'Viewed', 'Ignored').
> 
> 



A company is running Ads and wants to calculate the performance of each Ad.

Performance of the Ad is measured using Click-Through Rate (CTR) where:

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1300-1399/1322.Ads%20Performance/images/sql1.png)

Write a solution to find the `ctr` of each Ad. **Round** `ctr` to **two
decimal points**.

Return the result table ordered by `ctr` in **descending order** and by
`ad_id` in **ascending order** in case of a tie.

The result format is in the following example.



**Example 1:**

> Input: 
> 
> Ads table:
> 
> +-------+---------+---------+
> 
> | ad_id | user_id | action  |
> 
> +-------+---------+---------+
> 
> | 1> 
>  | 1> 
>    | Clicked |
> 
> | 2> 
>  | 2> 
>    | Clicked |
> 
> | 3> 
>  | 3> 
>    | Viewed  |
> 
> | 5> 
>  | 5> 
>    | Ignored |
> 
> | 1> 
>  | 7> 
>    | Ignored |
> 
> | 2> 
>  | 7> 
>    | Viewed  |
> 
> | 3> 
>  | 5> 
>    | Clicked |
> 
> | 1> 
>  | 4> 
>    | Viewed  |
> 
> | 2> 
>  | 11> 
>   | Viewed  |
> 
> | 1> 
>  | 2> 
>    | Clicked |
> 
> +-------+---------+---------+
> 
> Output: 
> 
> +-------+-------+
> 
> | ad_id | ctr   |
> 
> +-------+-------+
> 
> | 1> 
>  | 66.67 |
> 
> | 3> 
>  | 50.00 |
> 
> | 2> 
>  | 33.33 |
> 
> | 5> 
>  | 0.00  |
> 
> +-------+-------+
> 
> Explanation: 
> 
> for ad_id = 1, ctr = (2/(2+1)) * 100 = 66.67
> 
> for ad_id = 2, ctr = (1/(1+2)) * 100 = 33.33
> 
> for ad_id = 3, ctr = (1/(1+1)) * 100 = 50.00
> 
> for ad_id = 5, ctr = 0.00, Note that ad_id = 5 has no clicks or views.
> 
> Note that we do not care about Ignored Ads.
> 
> 


## é¢˜ç›®å¤§æ„

è¡¨: `Ads`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | ad_id> 
> > 
>  | int> 
>  |
> 
> | user_id> 
>    | int> 
>  |
> 
> | action> 
> > 
> | enum> 
> |
> 
> +---------------+---------+
> 
> (ad_id, user_id) æ˜¯è¯¥è¡¨çš„ä¸»é”®(å…·æœ‰å”¯ä¸€å€¼çš„åˆ—çš„ç»„åˆ)
> 
> è¯¥è¡¨çš„æ¯ä¸€è¡ŒåŒ…å«ä¸€æ¡å¹¿å‘Šçš„ ID(ad_id)ï¼Œç”¨æˆ·çš„ ID(user_id) å’Œç”¨æˆ·å¯¹å¹¿å‘Šé‡‡å–çš„è¡Œä¸º (action)
> 
> action åˆ—æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ ('Clicked', 'Viewed', 'Ignored') ã€‚
> 
> 



ä¸€å®¶å…¬å¸æ­£åœ¨è¿è¥è¿™äº›å¹¿å‘Šå¹¶æƒ³è®¡ç®—æ¯æ¡å¹¿å‘Šçš„æ•ˆæœã€‚

å¹¿å‘Šæ•ˆæœç”¨ç‚¹å‡»é€šè¿‡ç‡ï¼ˆClick-Through Rateï¼šCTRï¼‰æ¥è¡¡é‡ï¼Œå…¬å¼å¦‚ä¸‹:

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1300-1399/1322.Ads%20Performance/images/sql1.png)

ç¼–å†™è§£å†³æ–¹æ¡ˆæ‰¾å‡ºæ¯ä¸€æ¡å¹¿å‘Šçš„ `ctr` ï¼Œ`ctr` è¦ **ä¿ç•™ä¸¤ä½å°æ•°** ã€‚

è¿”å›ç»“æœéœ€è¦æŒ‰ `ctr` **é™åº** ã€æŒ‰ `ad_id` **å‡åº  **è¿›è¡Œæ’åºã€‚

è¿”å›ç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼š



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> Ads è¡¨:
> 
> +-------+---------+---------+
> 
> | ad_id | user_id | action  |
> 
> +-------+---------+---------+
> 
> | 1> 
>  | 1> 
>    | Clicked |
> 
> | 2> 
>  | 2> 
>    | Clicked |
> 
> | 3> 
>  | 3> 
>    | Viewed  |
> 
> | 5> 
>  | 5> 
>    | Ignored |
> 
> | 1> 
>  | 7> 
>    | Ignored |
> 
> | 2> 
>  | 7> 
>    | Viewed  |
> 
> | 3> 
>  | 5> 
>    | Clicked |
> 
> | 1> 
>  | 4> 
>    | Viewed  |
> 
> | 2> 
>  | 11> 
>   | Viewed  |
> 
> | 1> 
>  | 2> 
>    | Clicked |
> 
> +-------+---------+---------+
> 
> **è¾“å‡ºï¼š**
> 
> +-------+-------+
> 
> | ad_id | ctr   |
> 
> +-------+-------+
> 
> | 1> 
>  | 66.67 |
> 
> | 3> 
>  | 50.00 |
> 
> | 2> 
>  | 33.33 |
> 
> | 5> 
>  | 0.00  |
> 
> +-------+-------+
> 
> **è§£é‡Šï¼š**
> 
> å¯¹äº ad_id = 1, ctr = (2/(2+1)) * 100 = 66.67
> 
> å¯¹äº ad_id = 2, ctr = (1/(1+2)) * 100 = 33.33
> 
> å¯¹äº ad_id = 3, ctr = (1/(1+1)) * 100 = 50.00
> 
> å¯¹äº ad_id = 5, ctr = 0.00, æ³¨æ„ ad_id = 5 æ²¡æœ‰è¢«ç‚¹å‡» (Clicked) æˆ–æŸ¥çœ‹ (Viewed) è¿‡
> 
> æ³¨æ„æˆ‘ä»¬ä¸å…³å¿ƒ action ä¸º Ingnored çš„å¹¿å‘Š
> 
> 


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```