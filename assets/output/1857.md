# [1857. æœ‰å‘å›¾ä¸­æœ€å¤§é¢œè‰²å€¼](https://leetcode.com/problems/largest-color-value-in-a-directed-graph)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å›¾`](/leetcode/outline/tag/graph.md) [`æ‹“æ‰‘æ’åº`](/leetcode/outline/tag/topological-sort.md) [`è®°å¿†åŒ–æœç´¢`](/leetcode/outline/tag/memoization.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) [`è®¡æ•°`](/leetcode/outline/tag/counting.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/largest-color-value-in-a-directed-graph)


## é¢˜ç›®

There is a **directed graph** of `n` colored nodes and `m` edges. The nodes
are numbered from `0` to `n - 1`.

You are given a string `colors` where `colors[i]` is a lowercase English
letter representing the **color** of the `ith` node in this graph
(**0-indexed**). You are also given a 2D array `edges` where `edges[j] = [aj,
bj]` indicates that there is a **directed edge** from node `aj` to node `bj`.

A valid **path** in the graph is a sequence of nodes `x1 -> x2 -> x3 -> ... ->
xk` such that there is a directed edge from `xi` to `xi+1` for every `1 <= i <
k`. The **color value** of the path is the number of nodes that are colored
the **most frequently** occurring color along that path.

Return _the**largest color value** of any valid path in the given graph, or
_`-1` _if the graph contains a cycle_.



**Example 1:**

![](https://assets.leetcode.com/uploads/2021/04/21/leet1.png)

> 
> 
> 
> 
> 
> **Input:** colors = "abaca", edges = [[0,1],[0,2],[2,3],[3,4]]
> 
> Output: 3
> 
> Explanation: The path 0 -> 2 -> 3 -> 4 contains 3 nodes that are colored "a" (red in the above image).

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/04/21/leet2.png)

> 
> 
> 
> 
> 
> **Input:** colors = "a", edges = [[0,0]]
> 
> Output: -1
> 
> Explanation: There is a cycle from 0 to 0.

**Constraints:**

  * `n == colors.length`
  * `m == edges.length`
  * `1 <= n <= 10^5`
  * `0 <= m <= 10^5`
  * `colors` consists of lowercase English letters.
  * `0 <= aj, bj < n`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ª **æœ‰å‘å›¾** ï¼Œå®ƒå«æœ‰ `n` ä¸ªèŠ‚ç‚¹å’Œ `m` æ¡è¾¹ã€‚èŠ‚ç‚¹ç¼–å·ä» `0` åˆ° `n - 1` ã€‚

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `colors` ï¼Œå…¶ä¸­ `colors[i]` æ˜¯å°å†™è‹±æ–‡å­—æ¯ï¼Œè¡¨ç¤ºå›¾ä¸­ç¬¬ `i` ä¸ªèŠ‚ç‚¹çš„ **é¢œè‰²** ï¼ˆä¸‹æ ‡ä» **0**
å¼€å§‹ï¼‰ã€‚åŒæ—¶ç»™ä½ ä¸€ä¸ªäºŒç»´æ•°ç»„ `edges` ï¼Œå…¶ä¸­ `edges[j] = [aj, bj]` è¡¨ç¤ºä»èŠ‚ç‚¹ `aj` åˆ°èŠ‚ç‚¹ `bj` æœ‰ä¸€æ¡
**æœ‰å‘è¾¹** ã€‚

å›¾ä¸­ä¸€æ¡æœ‰æ•ˆ **è·¯å¾„** æ˜¯ä¸€ä¸ªç‚¹åºåˆ— `x1 -> x2 -> x3 -> ... -> xk` ï¼Œå¯¹äºæ‰€æœ‰ `1 <= i < k` ï¼Œä» `xi`
åˆ° `xi+1` åœ¨å›¾ä¸­æœ‰ä¸€æ¡æœ‰å‘è¾¹ã€‚è·¯å¾„çš„ **é¢œè‰²å€¼** æ˜¯è·¯å¾„ä¸­ **å‡ºç°æ¬¡æ•°æœ€å¤š** é¢œè‰²çš„èŠ‚ç‚¹æ•°ç›®ã€‚

è¯·ä½ è¿”å›ç»™å®šå›¾ä¸­æœ‰æ•ˆè·¯å¾„é‡Œé¢çš„ **æœ€å¤§é¢œè‰²å€¼****ã€‚** å¦‚æœå›¾ä¸­å«æœ‰ç¯ï¼Œè¯·è¿”å› `-1` ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/04/21/leet1.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** colors = "abaca", edges = [[0,1],[0,2],[2,3],[3,4]]
> 
> **è¾“å‡ºï¼š** 3
> 
> **è§£é‡Šï¼š** è·¯å¾„ 0 -> 2 -> 3 -> 4 å«æœ‰ 3 ä¸ªé¢œè‰²ä¸º "a" çš„èŠ‚ç‚¹ï¼ˆä¸Šå›¾ä¸­çš„çº¢è‰²èŠ‚ç‚¹ï¼‰ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/04/21/leet2.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** colors = "a", edges = [[0,0]]
> 
> **è¾“å‡ºï¼š** -1
> 
> **è§£é‡Šï¼š** ä» 0 åˆ° 0 æœ‰ä¸€ä¸ªç¯ã€‚
> 
> 

**æç¤ºï¼š**

  * `n == colors.length`
  * `m == edges.length`
  * `1 <= n <= 10^5`
  * `0 <= m <= 10^5`
  * `colors` åªå«æœ‰å°å†™è‹±æ–‡å­—æ¯ã€‚
  * `0 <= aj, bj < n`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```