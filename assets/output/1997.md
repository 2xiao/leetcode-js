# [1997. è®¿é—®å®Œæ‰€æœ‰æˆ¿é—´çš„ç¬¬ä¸€å¤©](https://leetcode.com/problems/first-day-where-you-have-been-in-all-the-rooms)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/outline/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/outline/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/first-day-where-you-have-been-in-all-the-rooms)

## é¢˜ç›®

There are `n` rooms you need to visit, labeled from `0` to `n - 1`. Each day
is labeled, starting from `0`. You will go in and visit one room a day.

Initially on day `0`, you visit room `0`. The **order** you visit the rooms
for the coming days is determined by the following **rules** and a given
**0-indexed** array `nextVisit` of length `n`:

  * Assuming that on a day, you visit room `i`,
  * if you have been in room `i` an **odd** number of times (**including** the current visit), on the **next** day you will visit a room with a **lower or equal room number** specified by `nextVisit[i]` where `0 <= nextVisit[i] <= i`;
  * if you have been in room `i` an **even** number of times (**including** the current visit), on the **next** day you will visit room `(i + 1) mod n`.

Return _the label of the**first** day where you have been in **all** the
rooms_. It can be shown that such a day exists. Since the answer may be very
large, return it **modulo** `109 + 7`.



**Example 1:**

> Input: nextVisit = [0,0]
> 
> Output: 2
> 
> Explanation:
> - On day 0, you visit room 0. The total times you have been in room 0 is 1, which is odd.
> 
>   On the next day you will visit room nextVisit[0] = 0
> - On day 1, you visit room 0, The total times you have been in room 0 is 2, which is even.
> 
>   On the next day you will visit room (0 + 1) mod 2 = 1
> - On day 2, you visit room 1. This is the first day where you have been in all the rooms.

**Example 2:**

> Input: nextVisit = [0,0,2]
> 
> Output: 6
> 
> Explanation:
> 
> Your room visiting order for each day is: [0,0,1,0,0,1,2,...].
> 
> Day 6 is the first day where you have been in all the rooms.

**Example 3:**

> Input: nextVisit = [0,1,2,0]
> 
> Output: 6
> 
> Explanation:
> 
> Your room visiting order for each day is: [0,0,1,1,2,2,3,...].
> 
> Day 6 is the first day where you have been in all the rooms.

**Constraints:**

  * `n == nextVisit.length`
  * `2 <= n <= 10^5`
  * `0 <= nextVisit[i] <= i`


## é¢˜ç›®å¤§æ„

ä½ éœ€è¦è®¿é—® `n` ä¸ªæˆ¿é—´ï¼Œæˆ¿é—´ä» `0` åˆ° `n - 1` ç¼–å·ã€‚åŒæ—¶ï¼Œæ¯ä¸€å¤©éƒ½æœ‰ä¸€ä¸ªæ—¥æœŸç¼–å·ï¼Œä» `0` å¼€å§‹ï¼Œä¾å¤©æ•°é€’å¢ã€‚ä½ æ¯å¤©éƒ½ä¼šè®¿é—®ä¸€ä¸ªæˆ¿é—´ã€‚

æœ€å¼€å§‹çš„ç¬¬ `0` å¤©ï¼Œä½ è®¿é—® `0` å·æˆ¿é—´ã€‚ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` ä¸” **ä¸‹æ ‡ä» 0 å¼€å§‹** çš„æ•°ç»„ `nextVisit`
ã€‚åœ¨æ¥ä¸‹æ¥çš„å‡ å¤©ä¸­ï¼Œä½ è®¿é—®æˆ¿é—´çš„ **æ¬¡åº** å°†æ ¹æ®ä¸‹é¢çš„ **è§„åˆ™** å†³å®šï¼š

  * å‡è®¾æŸä¸€å¤©ï¼Œä½ è®¿é—® `i` å·æˆ¿é—´ã€‚
  * å¦‚æœç®—ä¸Šæœ¬æ¬¡è®¿é—®ï¼Œè®¿é—® `i` å·æˆ¿é—´çš„æ¬¡æ•°ä¸º **å¥‡æ•°** ï¼Œé‚£ä¹ˆ **ç¬¬äºŒå¤©** éœ€è¦è®¿é—® `nextVisit[i]` æ‰€æŒ‡å®šçš„æˆ¿é—´ï¼Œå…¶ä¸­ `0 <= nextVisit[i] <= i` ã€‚
  * å¦‚æœç®—ä¸Šæœ¬æ¬¡è®¿é—®ï¼Œè®¿é—® `i` å·æˆ¿é—´çš„æ¬¡æ•°ä¸º **å¶æ•°** ï¼Œé‚£ä¹ˆ **ç¬¬äºŒå¤©** éœ€è¦è®¿é—® `(i + 1) mod n` å·æˆ¿é—´ã€‚

è¯·è¿”å›ä½ è®¿é—®å®Œæ‰€æœ‰æˆ¿é—´çš„ç¬¬ä¸€å¤©çš„æ—¥æœŸç¼–å·ã€‚é¢˜ç›®æ•°æ®ä¿è¯æ€»æ˜¯å­˜åœ¨è¿™æ ·çš„ä¸€å¤©ã€‚ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¿”å›å¯¹ `109 + 7` å–ä½™åçš„ç»“æœã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nextVisit = [0,0]
> 
> **è¾“å‡ºï¼š** 2
> 
> **è§£é‡Šï¼š**
> - ç¬¬ 0 å¤©ï¼Œä½ è®¿é—®æˆ¿é—´ 0 ã€‚è®¿é—® 0 å·æˆ¿é—´çš„æ€»æ¬¡æ•°ä¸º 1 ï¼Œæ¬¡æ•°ä¸ºå¥‡æ•°ã€‚
> 
>   ä¸‹ä¸€å¤©ä½ éœ€è¦è®¿é—®æˆ¿é—´çš„ç¼–å·æ˜¯ nextVisit[0] = 0
> - ç¬¬ 1 å¤©ï¼Œä½ è®¿é—®æˆ¿é—´ 0 ã€‚è®¿é—® 0 å·æˆ¿é—´çš„æ€»æ¬¡æ•°ä¸º 2 ï¼Œæ¬¡æ•°ä¸ºå¶æ•°ã€‚
> 
>   ä¸‹ä¸€å¤©ä½ éœ€è¦è®¿é—®æˆ¿é—´çš„ç¼–å·æ˜¯ (0 + 1) mod 2 = 1
> - ç¬¬ 2 å¤©ï¼Œä½ è®¿é—®æˆ¿é—´ 1 ã€‚è¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡å®Œæˆè®¿é—®æ‰€æœ‰æˆ¿é—´çš„é‚£å¤©ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nextVisit = [0,0,2]
> 
> **è¾“å‡ºï¼š** 6
> 
> **è§£é‡Šï¼š**
> 
> ä½ æ¯å¤©è®¿é—®æˆ¿é—´çš„æ¬¡åºæ˜¯ [0,0,1,0,0,1,2,...] ã€‚
> 
> ç¬¬ 6 å¤©æ˜¯ä½ è®¿é—®å®Œæ‰€æœ‰æˆ¿é—´çš„ç¬¬ä¸€å¤©ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nextVisit = [0,1,2,0]
> 
> **è¾“å‡ºï¼š** 6
> 
> **è§£é‡Šï¼š**
> 
> ä½ æ¯å¤©è®¿é—®æˆ¿é—´çš„æ¬¡åºæ˜¯ [0,0,1,1,2,2,3,...] ã€‚
> 
> ç¬¬ 6 å¤©æ˜¯ä½ è®¿é—®å®Œæ‰€æœ‰æˆ¿é—´çš„ç¬¬ä¸€å¤©ã€‚
> 
> 



**æç¤ºï¼š**

  * `n == nextVisit.length`
  * `2 <= n <= 10^5`
  * `0 <= nextVisit[i] <= i`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```