# [1807. æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„æ‹¬å·å†…å®¹](https://leetcode.com/problems/evaluate-the-bracket-pairs-of-a-string)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/leetcode/outline/tag/string.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/evaluate-the-bracket-pairs-of-a-string)


## é¢˜ç›®

You are given a string `s` that contains some bracket pairs, with each pair
containing a **non-empty** key.

  * For example, in the string `"(name)is(age)yearsold"`, there are **two** bracket pairs that contain the keys `"name"` and `"age"`.

You know the values of a wide range of keys. This is represented by a 2D
string array `knowledge` where each `knowledge[i] = [keyi, valuei]` indicates
that key `keyi` has a value of `valuei`.

You are tasked to evaluate **all** of the bracket pairs. When you evaluate a
bracket pair that contains some key `keyi`, you will:

  * Replace `keyi` and the bracket pair with the key's corresponding `valuei`.
  * If you do not know the value of the key, you will replace `keyi` and the bracket pair with a question mark `"?"` (without the quotation marks).

Each key will appear at most once in your `knowledge`. There will not be any
nested brackets in `s`.

Return _the resulting string after evaluating**all** of the bracket pairs._



**Example 1:**

> Input: s = "(name)is(age)yearsold", knowledge = [["name","bob"],["age","two"]]
> 
> Output: "bobistwoyearsold"
> 
> Explanation:
> 
> The key "name" has a value of "bob", so replace "(name)" with "bob".
> 
> The key "age" has a value of "two", so replace "(age)" with "two".

**Example 2:**

> Input: s = "hi(name)", knowledge = [["a","b"]]
> 
> Output: "hi?"
> 
> Explanation: As you do not know the value of the key "name", replace "(name)" with "?".

**Example 3:**

> Input: s = "(a)(a)(a)aaa", knowledge = [["a","yes"]]
> 
> Output: "yesyesyesaaa"
> 
> Explanation: The same key can appear multiple times.
> 
> The key "a" has a value of "yes", so replace all occurrences of "(a)" with "yes".
> 
> Notice that the "a"s not in a bracket pair are not evaluated.

**Constraints:**

  * `1 <= s.length <= 10^5`
  * `0 <= knowledge.length <= 10^5`
  * `knowledge[i].length == 2`
  * `1 <= keyi.length, valuei.length <= 10`
  * `s` consists of lowercase English letters and round brackets `'('` and `')'`.
  * Every open bracket `'('` in `s` will have a corresponding close bracket `')'`.
  * The key in each bracket pair of `s` will be non-empty.
  * There will not be any nested bracket pairs in `s`.
  * `keyi` and `valuei` consist of lowercase English letters.
  * Each `keyi` in `knowledge` is unique.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œå®ƒåŒ…å«ä¸€äº›æ‹¬å·å¯¹ï¼Œæ¯ä¸ªæ‹¬å·ä¸­åŒ…å«ä¸€ä¸ª **éç©º**  çš„é”®ã€‚

  * æ¯”æ–¹è¯´ï¼Œå­—ç¬¦ä¸² `"(name)is(age)yearsold"` ä¸­ï¼Œæœ‰ **ä¸¤ä¸ª**  æ‹¬å·å¯¹ï¼Œåˆ†åˆ«åŒ…å«é”® `"name"` å’Œ `"age"` ã€‚

ä½ çŸ¥é“è®¸å¤šé”®å¯¹åº”çš„å€¼ï¼Œè¿™äº›å…³ç³»ç”±äºŒç»´å­—ç¬¦ä¸²æ•°ç»„ `knowledge` è¡¨ç¤ºï¼Œå…¶ä¸­ `knowledge[i] = [keyi, valuei]` ï¼Œè¡¨ç¤ºé”®
`keyi` å¯¹åº”çš„å€¼ä¸º `valuei` ã€‚

ä½ éœ€è¦æ›¿æ¢ **æ‰€æœ‰**  çš„æ‹¬å·å¯¹ã€‚å½“ä½ æ›¿æ¢ä¸€ä¸ªæ‹¬å·å¯¹ï¼Œä¸”å®ƒåŒ…å«çš„é”®ä¸º `keyi` æ—¶ï¼Œä½ éœ€è¦ï¼š

  * å°† `keyi` å’Œæ‹¬å·ç”¨å¯¹åº”çš„å€¼ `valuei` æ›¿æ¢ã€‚
  * å¦‚æœä» `knowledge` ä¸­æ— æ³•å¾—çŸ¥æŸä¸ªé”®å¯¹åº”çš„å€¼ï¼Œä½ éœ€è¦å°† `keyi` å’Œæ‹¬å·ç”¨é—®å· `"?"` æ›¿æ¢ï¼ˆä¸éœ€è¦å¼•å·ï¼‰ã€‚

`knowledge` ä¸­æ¯ä¸ªé”®æœ€å¤šåªä¼šå‡ºç°ä¸€æ¬¡ã€‚`s` ä¸­ä¸ä¼šæœ‰åµŒå¥—çš„æ‹¬å·ã€‚

è¯·ä½ è¿”å›æ›¿æ¢ **æ‰€æœ‰**  æ‹¬å·å¯¹åçš„ç»“æœå­—ç¬¦ä¸²ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** s = "(name)is(age)yearsold", knowledge = [["name","bob"],["age","two"]]
> 
> **è¾“å‡ºï¼š** "bobistwoyearsold"
> 
> **è§£é‡Šï¼š**
> 
> é”® "name" å¯¹åº”çš„å€¼ä¸º "bob" ï¼Œæ‰€ä»¥å°† "(name)" æ›¿æ¢ä¸º "bob" ã€‚
> 
> é”® "age" å¯¹åº”çš„å€¼ä¸º "two" ï¼Œæ‰€ä»¥å°† "(age)" æ›¿æ¢ä¸º "two" ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** s = "hi(name)", knowledge = [["a","b"]]
> 
> **è¾“å‡ºï¼š** "hi?"
> 
> **è§£é‡Šï¼š** ç”±äºä¸çŸ¥é“é”® "name" å¯¹åº”çš„å€¼ï¼Œæ‰€ä»¥ç”¨ "?" æ›¿æ¢ "(name)" ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** s = "(a)(a)(a)aaa", knowledge = [["a","yes"]]
> 
> **è¾“å‡ºï¼š** "yesyesyesaaa"
> 
> **è§£é‡Šï¼š** ç›¸åŒçš„é”®åœ¨ s ä¸­å¯èƒ½ä¼šå‡ºç°å¤šæ¬¡ã€‚
> 
> é”® "a" å¯¹åº”çš„å€¼ä¸º "yes" ï¼Œæ‰€ä»¥å°†æ‰€æœ‰çš„ "(a)" æ›¿æ¢ä¸º "yes" ã€‚
> 
> æ³¨æ„ï¼Œä¸åœ¨æ‹¬å·é‡Œçš„ "a" ä¸éœ€è¦è¢«æ›¿æ¢ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= s.length <= 10^5`
  * `0 <= knowledge.length <= 10^5`
  * `knowledge[i].length == 2`
  * `1 <= keyi.length, valuei.length <= 10`
  * `s` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯å’Œåœ†æ‹¬å· `'('` å’Œ `')'` ã€‚
  * `s` ä¸­æ¯ä¸€ä¸ªå·¦åœ†æ‹¬å· `'('` éƒ½æœ‰å¯¹åº”çš„å³åœ†æ‹¬å· `')'` ã€‚
  * `s` ä¸­æ¯å¯¹æ‹¬å·å†…çš„é”®éƒ½ä¸ä¼šä¸ºç©ºã€‚
  * `s` ä¸­ä¸ä¼šæœ‰åµŒå¥—æ‹¬å·å¯¹ã€‚
  * `keyi` å’Œ `valuei` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚
  * `knowledge` ä¸­çš„ `keyi` ä¸ä¼šé‡å¤ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```