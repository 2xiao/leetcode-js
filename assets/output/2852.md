# [2852. æ‰€æœ‰å•å…ƒæ ¼çš„è¿œç¦»ç¨‹åº¦ä¹‹å’Œ ğŸ”’](https://2xiao.github.io/leetcode-js/problem/2852.html)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å¹¶æŸ¥é›†`](/tag/union-find.md) [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`çŸ©é˜µ`](/tag/matrix.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/sum-of-remoteness-of-all-cells) [`LeetCode`](https://leetcode.com/problems/sum-of-remoteness-of-all-cells)

## é¢˜ç›®

You are given a **0-indexed** matrix `grid` of order `n * n`. Each cell in
this matrix has a value `grid[i][j]`, which is either a **positive** integer
or `-1` representing a blocked cell.

You can move from a non-blocked cell to any non-blocked cell that shares an
edge.

For any cell `(i, j)`, we represent its **remoteness** as `R[i][j]` which is
defined as the following:

  * If the cell `(i, j)` is a **non-blocked** cell, `R[i][j]` is the sum of the values `grid[x][y]` such that there is **no path** from the **non-blocked** cell `(x, y)` to the cell `(i, j)`.
  * For blocked cells, `R[i][j] == 0`.

Return _the sum of_`R[i][j]`_over all cells._



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2800-2899/2852.Sum%20of%20Remoteness%20of%20All%20Cells/images/1-new.png)

> Input: grid = [[-1,1,-1],[5,-1,4],[-1,3,-1]]
> 
> Output: 39
> 
> Explanation: In the picture above, there are four grids. The top-left grid contains the initial values in the grid. Blocked cells are colored black, and other cells get their values as it is in the input. In the top-right grid, you can see the value of R[i][j] for all cells. So the answer would be the sum of them. That is: 0 + 12 + 0 + 8 + 0 + 9 + 0 + 10 + 0 = 39.
> 
> Let's jump on the bottom-left grid in the above picture and calculate R[0][1] (the target cell is colored green). We should sum up the value of cells that can't be reached by the cell (0, 1). These cells are colored yellow in this grid. So R[0][1] = 5 + 4 + 3 = 12.
> 
> Now let's jump on the bottom-right grid in the above picture and calculate R[1][2] (the target cell is colored green). We should sum up the value of cells that can't be reached by the cell (1, 2). These cells are colored yellow in this grid. So R[1][2] = 1 + 5 + 3 = 9.
> 
> 

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2800-2899/2852.Sum%20of%20Remoteness%20of%20All%20Cells/images/2.png)

**Example 2:**

> Input: grid = [[-1,3,4],[-1,-1,-1],[3,-1,-1]]
> 
> Output: 13
> 
> Explanation: In the picture above, there are four grids. The top-left grid contains the initial values in the grid. Blocked cells are colored black, and other cells get their values as it is in the input. In the top-right grid, you can see the value of R[i][j] for all cells. So the answer would be the sum of them. That is: 3 + 3 + 0 + 0 + 0 + 0 + 7 + 0 + 0 = 13.
> 
> Let's jump on the bottom-left grid in the above picture and calculate R[0][2] (the target cell is colored green). We should sum up the value of cells that can't be reached by the cell (0, 2). This cell is colored yellow in this grid. So R[0][2] = 3.
> 
> Now let's jump on the bottom-right grid in the above picture and calculate R[2][0] (the target cell is colored green). We should sum up the value of cells that can't be reached by the cell (2, 0). These cells are colored yellow in this grid. So R[2][0] = 3 + 4 = 7.

**Example 3:**

> Input: grid = [[1]]
> 
> Output: 0
> 
> Explanation: Since there are no other cells than (0, 0), R[0][0] is equal to 0. So the sum of R[i][j] over all cells would be 0.

**Constraints:**

  * `1 <= n <= 300`
  * `1 <= grid[i][j] <= 10^6` or `grid[i][j] == -1`


## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹çš„å¤§å°ä¸º `n * n` çš„çŸ©é˜µ `grid`ï¼Œå…¶ä¸­æ¯ä¸ªå•å…ƒæ ¼çš„å€¼ `grid[i][j]` è¦ä¹ˆæ˜¯ **æ­£æ•´æ•°**
ï¼Œè¦ä¹ˆæ˜¯è¡¨ç¤ºé˜»å¡å•å…ƒæ ¼çš„å€¼ `-1` ã€‚

ä½ å¯ä»¥ä»ä¸€ä¸ªéé˜»å¡å•å…ƒæ ¼ç§»åŠ¨åˆ°ä¸å…¶å…±äº«è¾¹çš„ä»»ä½•éé˜»å¡å•å…ƒæ ¼ã€‚

å¯¹äºä»»ä½•å•å…ƒæ ¼ `(i, j)`ï¼Œæˆ‘ä»¬å®šä¹‰å…¶ **è¿œç¦»ç¨‹åº¦** `R[i][j]` å¦‚ä¸‹ï¼š

  * å¦‚æœå•å…ƒæ ¼ `(i, j)` æ˜¯ **éé˜»å¡** å•å…ƒæ ¼ï¼Œåˆ™ `R[i][j]` æ˜¯å€¼ `grid[x][y]` çš„æ€»å’Œï¼Œå…¶ä¸­ **æ²¡æœ‰** ä» **éé˜»å¡** å•å…ƒæ ¼ `(x, y)` åˆ°å•å…ƒæ ¼ `(i, j)` çš„è·¯å¾„ã€‚
  * å¯¹äºé˜»å¡å•å…ƒæ ¼ï¼Œ`R[i][j] == 0`ã€‚

è¿”å›æ‰€æœ‰å•å…ƒæ ¼çš„ `R[i][j]` ä¹‹å’Œã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2800-2899/2852.Sum%20of%20Remoteness%20of%20All%20Cells/images/1-new.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** grid = [[-1,1,-1],[5,-1,4],[-1,3,-1]]
> 
> **è¾“å‡ºï¼š** 39
> 
> **è§£é‡Šï¼š** åœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­ï¼Œæœ‰å››ä¸ªçŸ©é˜µã€‚å·¦ä¸Šè§’çš„çŸ©é˜µæ˜¯é¢˜ç›®ç»™å®šçŸ©é˜µçš„åˆå§‹å€¼ã€‚è¢«é˜»å¡çš„å•å…ƒæ ¼æ˜¯é»‘è‰²çš„ï¼Œå…¶ä»–å•å…ƒæ ¼çš„å€¼ä¸è¾“å…¥ç›¸åŒã€‚åœ¨å³ä¸Šæ–¹çš„ç½‘æ ¼ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰å•å…ƒæ ¼çš„å€¼ä¹Ÿå°±æ˜¯ R[i][j] çš„å€¼ã€‚ç­”æ¡ˆæ˜¯å®ƒä»¬çš„å’Œã€‚å³:0 + 12 + 0 + 8 + 0 + 9 + 0 + 10 + 0 = 39ã€‚
> 
> åœ¨ä¸Šå›¾å·¦ä¸‹è§’çš„çŸ©é˜µï¼Œè®¡ç®— R[0][1] (ç›®æ ‡å•å…ƒæ ¼ä¸ºç»¿è‰²)ã€‚æˆ‘ä»¬åº”è¯¥å°†å•å…ƒæ ¼ (0,1) æ— æ³•åˆ°è¾¾çš„å•å…ƒæ ¼çš„å€¼ç›¸åŠ ã€‚è¿™äº›å•å…ƒæ ¼åœ¨è¿™ä¸ªçŸ©é˜µä¸­æ˜¯é»„è‰²çš„ã€‚æ‰€ä»¥ R[0][1] = 5 + 4 + 3 = 12ã€‚
> 
> åœ¨ä¸Šå›¾å³ä¸‹è§’çš„çŸ©é˜µï¼Œè®¡ç®— R[1][2] (ç›®æ ‡å•å…ƒæ ¼ä¸ºç»¿è‰²)ã€‚æˆ‘ä»¬åº”è¯¥æŠŠå•å…ƒæ ¼ (1,2) æ— æ³•åˆ°è¾¾çš„å•å…ƒæ ¼çš„å€¼ç›¸åŠ ã€‚è¿™äº›å•å…ƒæ ¼åœ¨è¿™ä¸ªçŸ©é˜µä¸­æ˜¯é»„è‰²çš„ã€‚æ‰€ä»¥ R[1][2] = 1 + 5 + 3 = 9ã€‚
> 
> 

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2800-2899/2852.Sum%20of%20Remoteness%20of%20All%20Cells/images/2.png)

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** grid = [[-1,3,4],[-1,-1,-1],[3,-1,-1]]
> 
> **è¾“å‡ºï¼š** 13
> 
> **è§£é‡Šï¼š** åœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­ï¼Œæœ‰å››ä¸ªçŸ©é˜µã€‚å·¦ä¸Šè§’çš„çŸ©é˜µæ˜¯ç»™å®šçŸ©é˜µçš„åˆå§‹å€¼ã€‚è¢«é˜»å¡çš„å•å…ƒæ ¼æ˜¯é»‘è‰²çš„ï¼Œå…¶ä»–å•å…ƒæ ¼çš„å€¼ä¸è¾“å…¥ç›¸åŒã€‚åœ¨å³ä¸Šæ–¹çš„ç½‘æ ¼ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰å•å…ƒæ ¼çš„å€¼ä¹Ÿå°±æ˜¯ R[i][j] çš„å€¼ã€‚ç­”æ¡ˆæ˜¯å®ƒä»¬çš„å’Œã€‚å³:3 + 3 + 0 + 0 + 0 + 0 + 7 + 0 + 0 = 13ã€‚
> 
> åœ¨ä¸Šå›¾å·¦ä¸‹è§’çš„çŸ©é˜µä¸Šï¼Œè®¡ç®— R[0][2] (ç›®æ ‡å•å…ƒæ ¼ä¸ºç»¿è‰²)ã€‚å°†å•å…ƒæ ¼ (0,2) æ— æ³•åˆ°è¾¾çš„å•å…ƒæ ¼çš„å€¼ç›¸åŠ ã€‚è¿™ä¸ªå•å…ƒæ ¼åœ¨è¿™ä¸ªçŸ©é˜µä¸­æ˜¯é»„è‰²çš„ã€‚æ‰€ä»¥ R[0][2] = 3ã€‚
> 
> åœ¨ä¸Šå›¾å³ä¸‹è§’çš„çŸ©é˜µä¸Šï¼Œè®¡ç®— R[2][0] (ç›®æ ‡å•å…ƒæ ¼ä¸ºç»¿è‰²)ã€‚å°†å•å…ƒæ ¼ (2,0) æ— æ³•åˆ°è¾¾çš„å•å…ƒæ ¼çš„å€¼ç›¸åŠ ï¼Œè¿™äº›å•å…ƒæ ¼åœ¨è¿™ä¸ªçŸ©é˜µä¸­æ˜¯é»„è‰²çš„ã€‚æ‰€ä»¥ R[2][0] = 3 + 4 = 7ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** grid = [[1]]
> 
> **è¾“å‡ºï¼š** 0
> 
> **è§£é‡Šï¼š** å› ä¸ºé™¤äº† (0,0) æ²¡æœ‰å…¶ä»–å•å…ƒæ ¼ï¼Œæ‰€ä»¥ R[0][0] ç­‰äº 0ã€‚æ‰€ä»¥æ‰€æœ‰å•å…ƒæ ¼çš„å’Œæ˜¯ 0ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= n <= 300`
  * `1 <= grid[i][j] <= 10^6` æˆ– `grid[i][j] == -1`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```