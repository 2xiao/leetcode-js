---
title: 1892. é¡µé¢æ¨èâ…¡ ğŸ”’
description: LeetCode,1892. é¡µé¢æ¨èâ…¡ ğŸ”’,é¡µé¢æ¨èâ…¡,Page Recommendations II,è§£é¢˜æ€è·¯,æ•°æ®åº“
keywords:
  - LeetCode
  - 1892. é¡µé¢æ¨èâ…¡ ğŸ”’
  - é¡µé¢æ¨èâ…¡
  - Page Recommendations II
  - è§£é¢˜æ€è·¯
  - æ•°æ®åº“
---

# 1892. é¡µé¢æ¨èâ…¡ ğŸ”’

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°æ®åº“`](/tag/database.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/page-recommendations-ii) [`LeetCode`](https://leetcode.com/problems/page-recommendations-ii)

## é¢˜ç›®

Table: `Friendship`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | user1_id> 
>   | int> 
>  |
> 
> | user2_id> 
>   | int> 
>  |
> 
> +---------------+---------+
> 
> (user1_id, user2_id) is the primary key (combination of columns with unique values) for this table.
> 
> Each row of this table indicates that the users user1_id and user2_id are friends.
> 
> 



Table: `Likes`

> 
> 
> 
> 
> 
> +-------------+---------+
> 
> | Column Name | Type> 
> |
> 
> +-------------+---------+
> 
> | user_id> 
>  | int> 
>  |
> 
> | page_id> 
>  | int> 
>  |
> 
> +-------------+---------+
> 
> (user_id, page_id) is the primary key (combination of columns with unique values) for this table.
> 
> Each row of this table indicates that user_id likes page_id.
> 
> 



You are implementing a page recommendation system for a social media website.
Your system will **recommend** a page to `user_id` if the page is **liked** by
**at least one** friend of `user_id` and is **not liked** by `user_id`.

Write a solution to find all the possible **page recommendations** for every
user. Each recommendation should appear as a row in the result table with
these columns:

  * `user_id`: The ID of the user that your system is making the recommendation to.
  * `page_id`: The ID of the page that will be recommended to `user_id`.
  * `friends_likes`: The number of the friends of `user_id` that like `page_id`.

Return the result table in **any order**.

The result format is in the following example.



**Example 1:**

> Input: 
> 
> Friendship table:
> 
> +----------+----------+
> 
> | user1_id | user2_id |
> 
> +----------+----------+
> 
> | 1> 
> > 
> | 2> 
> > 
> |
> 
> | 1> 
> > 
> | 3> 
> > 
> |
> 
> | 1> 
> > 
> | 4> 
> > 
> |
> 
> | 2> 
> > 
> | 3> 
> > 
> |
> 
> | 2> 
> > 
> | 4> 
> > 
> |
> 
> | 2> 
> > 
> | 5> 
> > 
> |
> 
> | 6> 
> > 
> | 1> 
> > 
> |
> 
> +----------+----------+
> 
> Likes table:
> 
> +---------+---------+
> 
> | user_id | page_id |
> 
> +---------+---------+
> 
> | 1> 
>    | 88> 
>   |
> 
> | 2> 
>    | 23> 
>   |
> 
> | 3> 
>    | 24> 
>   |
> 
> | 4> 
>    | 56> 
>   |
> 
> | 5> 
>    | 11> 
>   |
> 
> | 6> 
>    | 33> 
>   |
> 
> | 2> 
>    | 77> 
>   |
> 
> | 3> 
>    | 77> 
>   |
> 
> | 6> 
>    | 88> 
>   |
> 
> +---------+---------+
> 
> Output: 
> 
> +---------+---------+---------------+
> 
> | user_id | page_id | friends_likes |
> 
> +---------+---------+---------------+
> 
> | 1> 
>    | 77> 
>   | 2> 
> > 
> > 
>  |
> 
> | 1> 
>    | 23> 
>   | 1> 
> > 
> > 
>  |
> 
> | 1> 
>    | 24> 
>   | 1> 
> > 
> > 
>  |
> 
> | 1> 
>    | 56> 
>   | 1> 
> > 
> > 
>  |
> 
> | 1> 
>    | 33> 
>   | 1> 
> > 
> > 
>  |
> 
> | 2> 
>    | 24> 
>   | 1> 
> > 
> > 
>  |
> 
> | 2> 
>    | 56> 
>   | 1> 
> > 
> > 
>  |
> 
> | 2> 
>    | 11> 
>   | 1> 
> > 
> > 
>  |
> 
> | 2> 
>    | 88> 
>   | 1> 
> > 
> > 
>  |
> 
> | 3> 
>    | 88> 
>   | 1> 
> > 
> > 
>  |
> 
> | 3> 
>    | 23> 
>   | 1> 
> > 
> > 
>  |
> 
> | 4> 
>    | 88> 
>   | 1> 
> > 
> > 
>  |
> 
> | 4> 
>    | 77> 
>   | 1> 
> > 
> > 
>  |
> 
> | 4> 
>    | 23> 
>   | 1> 
> > 
> > 
>  |
> 
> | 5> 
>    | 77> 
>   | 1> 
> > 
> > 
>  |
> 
> | 5> 
>    | 23> 
>   | 1> 
> > 
> > 
>  |
> 
> +---------+---------+---------------+
> 
> Explanation: 
> 
> Take user 1 as an example:
  > - User 1 is friends with users 2, 3, 4, and 6.
  > - Recommended pages are 23 (user 2 liked it), 24 (user 3 liked it), 56 (user 3 liked it), 33 (user 6 liked it), and 77 (user 2 and user 3 liked it).
  > - Note that page 88 is not recommended because user 1 already liked it.
> 
> 
> 
> Another example is user 6:
  > - User 6 is friends with user 1.
  > - User 1 only liked page 88, but user 6 already liked it. Hence, user 6 has no recommendations.
> 
> 
> 
> You can recommend pages for users 2, 3, 4, and 5 using a similar process.
> 
> 


## é¢˜ç›®å¤§æ„

è¡¨ï¼š `Friendship`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | user1_id> 
>   | int> 
>  |
> 
> | user2_id> 
>   | int> 
>  |
> 
> +---------------+---------+
> 
> (user1_id,user2_id) æ˜¯ Friendship è¡¨çš„ä¸»é”®(å…·æœ‰å”¯ä¸€å€¼çš„åˆ—çš„ç»„åˆ)ã€‚
> 
> è¯¥è¡¨çš„æ¯ä¸€è¡Œè¡¨ç¤ºç”¨æˆ·user1_idå’Œuser2_idæ˜¯å¥½å‹ã€‚
> 
> 



è¡¨ï¼š `Likes`

> 
> 
> 
> 
> 
> +-------------+---------+
> 
> | Column Name | Type> 
> |
> 
> +-------------+---------+
> 
> | user_id> 
>  | int> 
>  |
> 
> | page_id> 
>  | int> 
>  |
> 
> +-------------+---------+
> 
> (user_id,page_id) æ˜¯ Likes è¡¨çš„ä¸»é”®(å…·æœ‰å”¯ä¸€å€¼çš„åˆ—)ã€‚
> 
> è¯¥è¡¨çš„æ¯ä¸€è¡Œè¡¨ç¤ºuser_idå–œæ¬¢page_idã€‚
> 
> 



æ‚¨æ­£åœ¨ä¸ºä¸€ä¸ªç¤¾äº¤åª’ä½“ç½‘ç«™å®æ–½ä¸€ä¸ªé¡µé¢æ¨èç³»ç»Ÿã€‚å¦‚æœé¡µé¢è¢«`user_id`çš„ **è‡³å°‘ä¸€ä¸ªæœ‹å‹å–œæ¬¢  **ï¼Œè€Œ **ä¸è¢«**`user_id`**å–œæ¬¢
**ï¼Œä½ çš„ç³»ç»Ÿå°† **æ¨è  **ä¸€ä¸ªé¡µé¢åˆ°`user_id`ã€‚

ç¼–å†™ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ¥æŸ¥æ‰¾é’ˆå¯¹æ¯ä¸ªç”¨æˆ·çš„æ‰€æœ‰å¯èƒ½çš„ **é¡µé¢å»ºè®®  **ã€‚æ¯ä¸ªå»ºè®®åº”è¯¥åœ¨ç»“æœè¡¨ä¸­æ˜¾ç¤ºä¸ºä¸€è¡Œï¼ŒåŒ…å«ä»¥ä¸‹åˆ—:

  * `user_id`: ç³»ç»Ÿå‘å…¶æå‡ºå»ºè®®çš„ç”¨æˆ·çš„IDã€‚
  * `page_id`: æ¨èä¸º `user_id` çš„é¡µé¢IDã€‚.
  * `friends_likes`:  `user_id` å¯¹åº” `page_id` çš„å¥½å‹æ•°ã€‚

ä»¥ **ä»»æ„é¡ºåº  **è¿”å›ç»“æœè¡¨ã€‚

è¿”å›ç»“æœæ ¼å¼ç¤ºä¾‹å¦‚ä¸‹ã€‚



**ç¤ºä¾‹ 1:**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> Friendship è¡¨:
> 
> +----------+----------+
> 
> | user1_id | user2_id |
> 
> +----------+----------+
> 
> | 1> 
> > 
> | 2> 
> > 
> |
> 
> | 1> 
> > 
> | 3> 
> > 
> |
> 
> | 1> 
> > 
> | 4> 
> > 
> |
> 
> | 2> 
> > 
> | 3> 
> > 
> |
> 
> | 2> 
> > 
> | 4> 
> > 
> |
> 
> | 2> 
> > 
> | 5> 
> > 
> |
> 
> | 6> 
> > 
> | 1> 
> > 
> |
> 
> +----------+----------+
> 
> Likes è¡¨:
> 
> +---------+---------+
> 
> | user_id | page_id |
> 
> +---------+---------+
> 
> | 1> 
>    | 88> 
>   |
> 
> | 2> 
>    | 23> 
>   |
> 
> | 3> 
>    | 24> 
>   |
> 
> | 4> 
>    | 56> 
>   |
> 
> | 5> 
>    | 11> 
>   |
> 
> | 6> 
>    | 33> 
>   |
> 
> | 2> 
>    | 77> 
>   |
> 
> | 3> 
>    | 77> 
>   |
> 
> | 6> 
>    | 88> 
>   |
> 
> +---------+---------+
> 
> **è¾“å‡ºï¼š**
> 
> +---------+---------+---------------+
> 
> | user_id | page_id | friends_likes |
> 
> +---------+---------+---------------+
> 
> | 1> 
>    | 77> 
>   | 2> 
> > 
> > 
>  |
> 
> | 1> 
>    | 23> 
>   | 1> 
> > 
> > 
>  |
> 
> | 1> 
>    | 24> 
>   | 1> 
> > 
> > 
>  |
> 
> | 1> 
>    | 56> 
>   | 1> 
> > 
> > 
>  |
> 
> | 1> 
>    | 33> 
>   | 1> 
> > 
> > 
>  |
> 
> | 2> 
>    | 24> 
>   | 1> 
> > 
> > 
>  |
> 
> | 2> 
>    | 56> 
>   | 1> 
> > 
> > 
>  |
> 
> | 2> 
>    | 11> 
>   | 1> 
> > 
> > 
>  |
> 
> | 2> 
>    | 88> 
>   | 1> 
> > 
> > 
>  |
> 
> | 3> 
>    | 88> 
>   | 1> 
> > 
> > 
>  |
> 
> | 3> 
>    | 23> 
>   | 1> 
> > 
> > 
>  |
> 
> | 4> 
>    | 88> 
>   | 1> 
> > 
> > 
>  |
> 
> | 4> 
>    | 77> 
>   | 1> 
> > 
> > 
>  |
> 
> | 4> 
>    | 23> 
>   | 1> 
> > 
> > 
>  |
> 
> | 5> 
>    | 77> 
>   | 1> 
> > 
> > 
>  |
> 
> | 5> 
>    | 23> 
>   | 1> 
> > 
> > 
>  |
> 
> +---------+---------+---------------+
> 
> **è§£é‡Šï¼š**
> 
> ä»¥ç”¨æˆ·1ä¸ºä¾‹:
> 
> â€”ç”¨æˆ·1æ˜¯ç”¨æˆ·2ã€3ã€4ã€6çš„å¥½å‹ã€‚
> 
> -æ¨èé¡µé¢æœ‰23(ç”¨æˆ·2å–œæ¬¢)ï¼Œ24(ç”¨æˆ·3å–œæ¬¢)ï¼Œ56(ç”¨æˆ·3å–œæ¬¢)ï¼Œ33(ç”¨æˆ·6å–œæ¬¢)ï¼Œ77(ç”¨æˆ·2å’Œç”¨æˆ·3å–œæ¬¢)ã€‚
> 
> -è¯·æ³¨æ„ï¼Œç¬¬88é¡µä¸æ¨èï¼Œå› ä¸ºç”¨æˆ·1å·²ç»å–œæ¬¢å®ƒã€‚
> 
> 
> 
> å¦ä¸€ä¸ªä¾‹å­æ˜¯ç”¨æˆ·6:
> 
> â€”ç”¨æˆ·6æ˜¯ç”¨æˆ·1çš„å¥½å‹ã€‚
> 
> -ç”¨æˆ·1åªå–œæ¬¢äº†88é¡µï¼Œä½†ç”¨æˆ·6å·²ç»å–œæ¬¢äº†ã€‚å› æ­¤ï¼Œç”¨æˆ·6æ²¡æœ‰æ¨èã€‚
> 
> 
> 
> æ‚¨å¯ä»¥ä½¿ç”¨ç±»ä¼¼çš„è¿‡ç¨‹ä¸ºç”¨æˆ·2ã€3ã€4å’Œ5æ¨èé¡µé¢ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 1264 | [é¡µé¢æ¨è ğŸ”’](https://leetcode.com/problems/page-recommendations) |  |  [`æ•°æ®åº“`](/tag/database.md) | <font color=#ffb800>Medium</font> |
| 1949 | [åšå®šçš„å‹è°Š ğŸ”’](https://leetcode.com/problems/strong-friendship) |  |  [`æ•°æ®åº“`](/tag/database.md) | <font color=#ffb800>Medium</font> |