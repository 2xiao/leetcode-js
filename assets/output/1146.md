# [1146. å¿«ç…§æ•°ç»„](https://leetcode.com/problems/snapshot-array)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`äºŒåˆ†æŸ¥æ‰¾`](/leetcode/outline/tag/binary-search.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/snapshot-array)


## é¢˜ç›®

Implement a SnapshotArray that supports the following interface:

  * `SnapshotArray(int length)` initializes an array-like data structure with the given length. **Initially, each element equals 0**.
  * `void set(index, val)` sets the element at the given `index` to be equal to `val`.
  * `int snap()` takes a snapshot of the array and returns the `snap_id`: the total number of times we called `snap()` minus `1`.
  * `int get(index, snap_id)` returns the value at the given `index`, at the time we took the snapshot with the given `snap_id`



**Example 1:**

> Input: ["SnapshotArray","set","snap","set","get"]
> 
> [[3],[0,5],[],[0,6],[0,0]]
> 
> Output: [null,null,0,null,5]
> 
> Explanation:
> 
> SnapshotArray snapshotArr = new SnapshotArray(3); // set the length to be 3
> 
> snapshotArr.set(0,5);  // Set array[0] = 5
> 
> snapshotArr.snap();  // Take a snapshot, return snap_id = 0
> 
> snapshotArr.set(0,6);
> 
> snapshotArr.get(0,0);  // Get the value of array[0] with snap_id = 0, return 5



**Constraints:**

  * `1 <= length <= 5 * 10^4`
  * `0 <= index < length`
  * `0 <= val <= 10^9`
  * `0 <= snap_id < `(the total number of times we call `snap()`)
  * At most `5 * 10^4` calls will be made to `set`, `snap`, and `get`.


## é¢˜ç›®å¤§æ„

å®ç°æ”¯æŒä¸‹åˆ—æ¥å£çš„ã€Œå¿«ç…§æ•°ç»„ã€- SnapshotArrayï¼š

  * `SnapshotArray(int length)` \- åˆå§‹åŒ–ä¸€ä¸ªä¸æŒ‡å®šé•¿åº¦ç›¸ç­‰çš„ ç±»æ•°ç»„ çš„æ•°æ®ç»“æ„ã€‚**åˆå§‹æ—¶ï¼Œæ¯ä¸ªå…ƒç´ éƒ½ç­‰äº****  0**ã€‚
  * `void set(index, val)` \- ä¼šå°†æŒ‡å®šç´¢å¼• `index` å¤„çš„å…ƒç´ è®¾ç½®ä¸º `val`ã€‚
  * `int snap()` \- è·å–è¯¥æ•°ç»„çš„å¿«ç…§ï¼Œå¹¶è¿”å›å¿«ç…§çš„ç¼–å· `snap_id`ï¼ˆå¿«ç…§å·æ˜¯è°ƒç”¨ `snap()` çš„æ€»æ¬¡æ•°å‡å» `1`ï¼‰ã€‚
  * `int get(index, snap_id)` \- æ ¹æ®æŒ‡å®šçš„ `snap_id` é€‰æ‹©å¿«ç…§ï¼Œå¹¶è¿”å›è¯¥å¿«ç…§æŒ‡å®šç´¢å¼• `index` çš„å€¼ã€‚



**ç¤ºä¾‹ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**["SnapshotArray","set","snap","set","get"]
> 
> > 
>  [[3],[0,5],[],[0,6],[0,0]]
> 
> **è¾“å‡ºï¼š**[null,null,0,null,5]
> 
> **è§£é‡Šï¼š** SnapshotArray snapshotArr = new SnapshotArray(3); // åˆå§‹åŒ–ä¸€ä¸ªé•¿åº¦ä¸º 3 çš„å¿«ç…§æ•°ç»„
> 
> snapshotArr.set(0,5);  // ä»¤ array[0] = 5
> 
> snapshotArr.snap();  // è·å–å¿«ç…§ï¼Œè¿”å› snap_id = 0
> 
> snapshotArr.set(0,6);
> 
> snapshotArr.get(0,0);  // è·å– snap_id = 0 çš„å¿«ç…§ä¸­ array[0] çš„å€¼ï¼Œè¿”å› 5



**æç¤ºï¼š**

  * `1 <= length <= 50000`
  * é¢˜ç›®æœ€å¤šè¿›è¡Œ`50000` æ¬¡`set`ï¼Œ`snap`ï¼Œå’Œ `get`çš„è°ƒç”¨ ã€‚
  * `0 <= index < length`
  * `0 <= snap_id < `æˆ‘ä»¬è°ƒç”¨ `snap()` çš„æ€»æ¬¡æ•°
  * `0 <= val <= 10^9`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```