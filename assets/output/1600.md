# [1600. ç‹ä½ç»§æ‰¿é¡ºåº](https://leetcode.com/problems/throne-inheritance)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/leetcode/outline/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/leetcode/outline/tag/depth-first-search.md) [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/throne-inheritance)


## é¢˜ç›®

A kingdom consists of a king, his children, his grandchildren, and so on.
Every once in a while, someone in the family dies or a child is born.

The kingdom has a well-defined order of inheritance that consists of the king
as the first member. Let's define the recursive function `Successor(x,
curOrder)`, which given a person `x` and the inheritance order so far, returns
who should be the next person after `x` in the order of inheritance.

> 
> 
> 
> 
> 
> Successor(x, curOrder):
> 
> > 
> if x has no children or all of x's children are in curOrder:
> 
> > 
> > 
> if x is the king return null
> 
> > 
> > 
> else return Successor(x's parent, curOrder)
> 
> > 
> else return x's oldest child who's not in curOrder
> 
> 

For example, assume we have a kingdom that consists of the king, his children
Alice and Bob (Alice is older than Bob), and finally Alice's son Jack.

  1. In the beginning, `curOrder` will be `["king"]`.
  2. Calling `Successor(king, curOrder)` will return Alice, so we append to `curOrder` to get `["king", "Alice"]`.
  3. Calling `Successor(Alice, curOrder)` will return Jack, so we append to `curOrder` to get `["king", "Alice", "Jack"]`.
  4. Calling `Successor(Jack, curOrder)` will return Bob, so we append to `curOrder` to get `["king", "Alice", "Jack", "Bob"]`.
  5. Calling `Successor(Bob, curOrder)` will return `null`. Thus the order of inheritance will be `["king", "Alice", "Jack", "Bob"]`.

Using the above function, we can always obtain a unique order of inheritance.

Implement the `ThroneInheritance` class:

  * `ThroneInheritance(string kingName)` Initializes an object of the `ThroneInheritance` class. The name of the king is given as part of the constructor.
  * `void birth(string parentName, string childName)` Indicates that `parentName` gave birth to `childName`.
  * `void death(string name)` Indicates the death of `name`. The death of the person doesn't affect the `Successor` function nor the current inheritance order. You can treat it as just marking the person as dead.
  * `string[] getInheritanceOrder()` Returns a list representing the current order of inheritance **excluding** dead people.



**Example 1:**

> 
> 
> 
> 
> 
> **Input**
> 
> ["ThroneInheritance", "birth", "birth", "birth", "birth", "birth", "birth", "getInheritanceOrder", "death", "getInheritanceOrder"]
> 
> [["king"], ["king", "andy"], ["king", "bob"], ["king", "catherine"], ["andy", "matthew"], ["bob", "alex"], ["bob", "asha"], [null], ["bob"], [null]]
> 
> **Output**
> 
> [null, null, null, null, null, null, null, ["king", "andy", "matthew", "bob", "alex", "asha", "catherine"], null, ["king", "andy", "matthew", "alex", "asha", "catherine"]]
> 
> 
> 
> **Explanation**
> 
> ThroneInheritance t= new ThroneInheritance("king"); // order: **king**
> 
> t.birth("king", "andy"); // order: king > **andy**
> 
> t.birth("king", "bob"); // order: king > andy > **bob**
> 
> t.birth("king", "catherine"); // order: king > andy > bob > **catherine**
> 
> t.birth("andy", "matthew"); // order: king > andy > **matthew** > bob > catherine
> 
> t.birth("bob", "alex"); // order: king > andy > matthew > bob > **alex** > catherine
> 
> t.birth("bob", "asha"); // order: king > andy > matthew > bob > alex > **asha** > catherine
> 
> t.getInheritanceOrder(); // return ["king", "andy", "matthew", "bob", "alex", "asha", "catherine"]
> 
> t.death("bob"); // order: king > andy > matthew > **~~bob~~** > alex > asha > catherine
> 
> t.getInheritanceOrder(); // return ["king", "andy", "matthew", "alex", "asha", "catherine"]

**Constraints:**

  * `1 <= kingName.length, parentName.length, childName.length, name.length <= 15`
  * `kingName`, `parentName`, `childName`, and `name` consist of lowercase English letters only.
  * All arguments `childName` and `kingName` are **distinct**.
  * All `name` arguments of `death` will be passed to either the constructor or as `childName` to `birth` first.
  * For each call to `birth(parentName, childName)`, it is guaranteed that `parentName` is alive.
  * At most `10^5` calls will be made to `birth` and `death`.
  * At most `10` calls will be made to `getInheritanceOrder`.


## é¢˜ç›®å¤§æ„

ä¸€ä¸ªç‹å›½é‡Œä½ç€å›½ç‹ã€ä»–çš„å­©å­ä»¬ã€ä»–çš„å­™å­ä»¬ç­‰ç­‰ã€‚æ¯ä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œè¿™ä¸ªå®¶åº­é‡Œæœ‰äººå‡ºç”Ÿä¹Ÿæœ‰äººæ­»äº¡ã€‚

è¿™ä¸ªç‹å›½æœ‰ä¸€ä¸ªæ˜ç¡®è§„å®šçš„ç‹ä½ç»§æ‰¿é¡ºåºï¼Œç¬¬ä¸€ç»§æ‰¿äººæ€»æ˜¯å›½ç‹è‡ªå·±ã€‚æˆ‘ä»¬å®šä¹‰é€’å½’å‡½æ•° `Successor(x, curOrder)` ï¼Œç»™å®šä¸€ä¸ªäºº `x`
å’Œå½“å‰çš„ç»§æ‰¿é¡ºåºï¼Œè¯¥å‡½æ•°è¿”å› `x` çš„ä¸‹ä¸€ç»§æ‰¿äººã€‚

> 
> 
> 
> 
> 
> Successor(x, curOrder):
> 
> > 
> å¦‚æœ x æ²¡æœ‰å­©å­æˆ–è€…æ‰€æœ‰ x çš„å­©å­éƒ½åœ¨ curOrder ä¸­ï¼š
> 
> > 
> > 
> å¦‚æœ x æ˜¯å›½ç‹ï¼Œé‚£ä¹ˆè¿”å› null
> 
> > 
> > 
> å¦åˆ™ï¼Œè¿”å› Successor(x çš„çˆ¶äº², curOrder)
> 
> > 
> å¦åˆ™ï¼Œè¿”å› x ä¸åœ¨ curOrder ä¸­æœ€å¹´é•¿çš„å­©å­
> 
> 

æ¯”æ–¹è¯´ï¼Œå‡è®¾ç‹å›½ç”±å›½ç‹ï¼Œä»–çš„å­©å­ Alice å’Œ Bob ï¼ˆAlice æ¯” Bob å¹´é•¿ï¼‰å’Œ Alice çš„å­©å­ Jack ç»„æˆã€‚

  1. ä¸€å¼€å§‹ï¼Œ `curOrder` ä¸º `["king"]`.
  2. è°ƒç”¨ `Successor(king, curOrder)` ï¼Œè¿”å› Alice ï¼Œæ‰€ä»¥æˆ‘ä»¬å°† Alice æ”¾å…¥ `curOrder` ä¸­ï¼Œå¾—åˆ° `["king", "Alice"]` ã€‚
  3. è°ƒç”¨ `Successor(Alice, curOrder)` ï¼Œè¿”å› Jack ï¼Œæ‰€ä»¥æˆ‘ä»¬å°† Jack æ”¾å…¥ `curOrder` ä¸­ï¼Œå¾—åˆ° `["king", "Alice", "Jack"]` ã€‚
  4. è°ƒç”¨ `Successor(Jack, curOrder)` ï¼Œè¿”å› Bob ï¼Œæ‰€ä»¥æˆ‘ä»¬å°† Bob æ”¾å…¥ `curOrder` ä¸­ï¼Œå¾—åˆ° `["king", "Alice", "Jack", "Bob"]` ã€‚
  5. è°ƒç”¨ `Successor(Bob, curOrder)` ï¼Œè¿”å› `null` ã€‚æœ€ç»ˆå¾—åˆ°ç»§æ‰¿é¡ºåºä¸º `["king", "Alice", "Jack", "Bob"]` ã€‚

é€šè¿‡ä»¥ä¸Šçš„å‡½æ•°ï¼Œæˆ‘ä»¬æ€»æ˜¯èƒ½å¾—åˆ°ä¸€ä¸ªå”¯ä¸€çš„ç»§æ‰¿é¡ºåºã€‚

è¯·ä½ å®ç° `ThroneInheritance` ç±»ï¼š

  * `ThroneInheritance(string kingName)` åˆå§‹åŒ–ä¸€ä¸ª `ThroneInheritance` ç±»çš„å¯¹è±¡ã€‚å›½ç‹çš„åå­—ä½œä¸ºæ„é€ å‡½æ•°çš„å‚æ•°ä¼ å…¥ã€‚
  * `void birth(string parentName, string childName)` è¡¨ç¤º `parentName` æ–°æ‹¥æœ‰äº†ä¸€ä¸ªåä¸º `childName` çš„å­©å­ã€‚
  * `void death(string name)` è¡¨ç¤ºåä¸º `name` çš„äººæ­»äº¡ã€‚ä¸€ä¸ªäººçš„æ­»äº¡ä¸ä¼šå½±å“ `Successor` å‡½æ•°ï¼Œä¹Ÿä¸ä¼šå½±å“å½“å‰çš„ç»§æ‰¿é¡ºåºã€‚ä½ å¯ä»¥åªå°†è¿™ä¸ªäººæ ‡è®°ä¸ºæ­»äº¡çŠ¶æ€ã€‚
  * `string[] getInheritanceOrder()` è¿”å› **é™¤å»**  æ­»äº¡äººå‘˜çš„å½“å‰ç»§æ‰¿é¡ºåºåˆ—è¡¨ã€‚



**ç¤ºä¾‹ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> ["ThroneInheritance", "birth", "birth", "birth", "birth", "birth", "birth", "getInheritanceOrder", "death", "getInheritanceOrder"]
> 
> [["king"], ["king", "andy"], ["king", "bob"], ["king", "catherine"], ["andy", "matthew"], ["bob", "alex"], ["bob", "asha"], [null], ["bob"], [null]]
> 
> **è¾“å‡ºï¼š**
> 
> [null, null, null, null, null, null, null, ["king", "andy", "matthew", "bob", "alex", "asha", "catherine"], null, ["king", "andy", "matthew", "alex", "asha", "catherine"]]
> 
> 
> 
> **è§£é‡Šï¼š**
> 
> ThroneInheritance t= new ThroneInheritance("king"); // ç»§æ‰¿é¡ºåºï¼š**king**
> 
> t.birth("king", "andy"); // ç»§æ‰¿é¡ºåºï¼šking > **andy**
> 
> t.birth("king", "bob"); // ç»§æ‰¿é¡ºåºï¼šking > andy > **bob**
> 
> t.birth("king", "catherine"); // ç»§æ‰¿é¡ºåºï¼šking > andy > bob > **catherine**
> 
> t.birth("andy", "matthew"); // ç»§æ‰¿é¡ºåºï¼šking > andy > **matthew** > bob > catherine
> 
> t.birth("bob", "alex"); // ç»§æ‰¿é¡ºåºï¼šking > andy > matthew > bob > **alex** > catherine
> 
> t.birth("bob", "asha"); // ç»§æ‰¿é¡ºåºï¼šking > andy > matthew > bob > alex > **asha** > catherine
> 
> t.getInheritanceOrder(); // è¿”å› ["king", "andy", "matthew", "bob", "alex", "asha", "catherine"]
> 
> t.death("bob"); // ç»§æ‰¿é¡ºåºï¼šking > andy > matthew > **bobï¼ˆå·²ç»å»ä¸–ï¼‰** > alex > asha > catherine
> 
> t.getInheritanceOrder(); // è¿”å› ["king", "andy", "matthew", "alex", "asha", "catherine"]
> 
> 



**æç¤ºï¼š**

  * `1 <= kingName.length, parentName.length, childName.length, name.length <= 15`
  * `kingName`ï¼Œ`parentName`ï¼Œ `childName` å’Œ `name` ä»…åŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚
  * æ‰€æœ‰çš„å‚æ•° `childName` å’Œ `kingName` **äº’ä¸ç›¸åŒ** ã€‚
  * æ‰€æœ‰ `death` å‡½æ•°ä¸­çš„æ­»äº¡åå­— `name` è¦ä¹ˆæ˜¯å›½ç‹ï¼Œè¦ä¹ˆæ˜¯å·²ç»å‡ºç”Ÿäº†çš„äººå‘˜åå­—ã€‚
  * æ¯æ¬¡è°ƒç”¨ `birth(parentName, childName)` æ—¶ï¼Œæµ‹è¯•ç”¨ä¾‹éƒ½ä¿è¯ `parentName` å¯¹åº”çš„äººå‘˜æ˜¯æ´»ç€çš„ã€‚
  * æœ€å¤šè°ƒç”¨ `10^5` æ¬¡`birth` å’Œ `death` ã€‚
  * æœ€å¤šè°ƒç”¨ `10` æ¬¡ `getInheritanceOrder` ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®
- [æ ‘ä¸Šçš„æ“ä½œ](https://leetcode.com/problems/operations-on-tree)

::::
