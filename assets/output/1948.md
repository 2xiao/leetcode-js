# [1948. åˆ é™¤ç³»ç»Ÿä¸­çš„é‡å¤æ–‡ä»¶å¤¹](https://leetcode.com/problems/delete-duplicate-folders-in-system)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å­—å…¸æ ‘`](/tag/trie.md) [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`å“ˆå¸Œå‡½æ•°`](/tag/hash-function.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/delete-duplicate-folders-in-system)

## é¢˜ç›®

Due to a bug, there are many duplicate folders in a file system. You are given
a 2D array `paths`, where `paths[i]` is an array representing an absolute path
to the `ith` folder in the file system.

  * For example, `["one", "two", "three"]` represents the path `"/one/two/three"`.

Two folders (not necessarily on the same level) are **identical** if they
contain the **same non-empty** set of identical subfolders and underlying
subfolder structure. The folders **do not** need to be at the root level to be
identical. If two or more folders are **identical** , then **mark** the
folders as well as all their subfolders.

  * For example, folders `"/a"` and `"/b"` in the file structure below are identical. They (as well as their subfolders) should **all** be marked: 
> 
> * `/a`
> 
> * `/a/x`
> 
> * `/a/x/y`
> 
> * `/a/z`
> 
> * `/b`
> 
> * `/b/x`
> 
> * `/b/x/y`
> 
> * `/b/z`
  * However, if the file structure also included the path `"/b/w"`, then the folders `"/a"` and `"/b"` would not be identical. Note that `"/a/x"` and `"/b/x"` would still be considered identical even with the added folder.

Once all the identical folders and their subfolders have been marked, the file
system will **delete** all of them. The file system only runs the deletion
once, so any folders that become identical after the initial deletion are not
deleted.

Return _the 2D array_`ans` _containing the paths of the**remaining** folders
after deleting all the marked folders. The paths may be returned in **any**
order_.



**Example 1:**

![](https://assets.leetcode.com/uploads/2021/07/19/lc-dupfolder1.jpg)

> Input: paths = [["a"],["c"],["d"],["a","b"],["c","b"],["d","a"]]
> 
> Output: [["d"],["d","a"]]
> 
> Explanation: The file structure is as shown.
> 
> Folders "/a" and "/c" (and their subfolders) are marked for deletion because they both contain an empty
> 
> folder named "b".

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/07/19/lc-dupfolder2.jpg)

> Input: paths = [["a"],["c"],["a","b"],["c","b"],["a","b","x"],["a","b","x","y"],["w"],["w","y"]]
> 
> Output: [["c"],["c","b"],["a"],["a","b"]]
> 
> Explanation: The file structure is as shown. 
> 
> Folders "/a/b/x" and "/w" (and their subfolders) are marked for deletion because they both contain an empty folder named "y".
> 
> Note that folders "/a" and "/c" are identical after the deletion, but they are not deleted because they were not marked beforehand.

**Example 3:**

![](https://assets.leetcode.com/uploads/2021/07/19/lc-dupfolder3.jpg)

> Input: paths = [["a","b"],["c","d"],["c"],["a"]]
> 
> Output: [["c"],["c","d"],["a"],["a","b"]]
> 
> Explanation: All folders are unique in the file system.
> 
> Note that the returned array can be in a different order as the order does not matter.

**Constraints:**

  * `1 <= paths.length <= 2 * 10^4`
  * `1 <= paths[i].length <= 500`
  * `1 <= paths[i][j].length <= 10`
  * `1 <= sum(paths[i][j].length) <= 2 * 10^5`
  * `path[i][j]` consists of lowercase English letters.
  * No two paths lead to the same folder.
  * For any folder not at the root level, its parent folder will also be in the input.


## é¢˜ç›®å¤§æ„

ç”±äºä¸€ä¸ªæ¼æ´ï¼Œæ–‡ä»¶ç³»ç»Ÿä¸­å­˜åœ¨è®¸å¤šé‡å¤æ–‡ä»¶å¤¹ã€‚ç»™ä½ ä¸€ä¸ªäºŒç»´æ•°ç»„ `paths`ï¼Œå…¶ä¸­ `paths[i]` æ˜¯ä¸€ä¸ªè¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿä¸­ç¬¬ `i`
ä¸ªæ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„çš„æ•°ç»„ã€‚

  * ä¾‹å¦‚ï¼Œ`["one", "two", "three"]` è¡¨ç¤ºè·¯å¾„ `"/one/two/three"` ã€‚

å¦‚æœä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼ˆä¸éœ€è¦åœ¨åŒä¸€å±‚çº§ï¼‰åŒ…å« **éç©ºä¸”****ç›¸åŒçš„  **å­æ–‡ä»¶å¤¹ **é›†åˆ**
å¹¶å…·æœ‰ç›¸åŒçš„å­æ–‡ä»¶å¤¹ç»“æ„ï¼Œåˆ™è®¤ä¸ºè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹æ˜¯ç›¸åŒæ–‡ä»¶å¤¹ã€‚ç›¸åŒæ–‡ä»¶å¤¹çš„æ ¹å±‚çº§ **ä¸** éœ€è¦ç›¸åŒã€‚å¦‚æœå­˜åœ¨ä¸¤ä¸ªï¼ˆæˆ–ä¸¤ä¸ªä»¥ä¸Šï¼‰**ç›¸åŒ**
æ–‡ä»¶å¤¹ï¼Œåˆ™éœ€è¦å°†è¿™äº›æ–‡ä»¶å¤¹å’Œæ‰€æœ‰å®ƒä»¬çš„å­æ–‡ä»¶å¤¹ **æ ‡è®°** ä¸ºå¾…åˆ é™¤ã€‚

  * ä¾‹å¦‚ï¼Œä¸‹é¢æ–‡ä»¶ç»“æ„ä¸­çš„æ–‡ä»¶å¤¹ `"/a"` å’Œ `"/b"` ç›¸åŒã€‚å®ƒä»¬ï¼ˆä»¥åŠå®ƒä»¬çš„å­æ–‡ä»¶å¤¹ï¼‰åº”è¯¥è¢« **å…¨éƒ¨** æ ‡è®°ä¸ºå¾…åˆ é™¤ï¼š 
> 
> * `/a`
> 
> * `/a/x`
> 
> * `/a/x/y`
> 
> * `/a/z`
> 
> * `/b`
> 
> * `/b/x`
> 
> * `/b/x/y`
> 
> * `/b/z`
  * ç„¶è€Œï¼Œå¦‚æœæ–‡ä»¶ç»“æ„ä¸­è¿˜åŒ…å«è·¯å¾„ `"/b/w"` ï¼Œé‚£ä¹ˆæ–‡ä»¶å¤¹ `"/a"` å’Œ `"/b"` å°±ä¸ç›¸åŒã€‚æ³¨æ„ï¼Œå³ä¾¿æ·»åŠ äº†æ–°çš„æ–‡ä»¶å¤¹ `"/b/w"` ï¼Œä»ç„¶è®¤ä¸º `"/a/x"` å’Œ `"/b/x"` ç›¸åŒã€‚

ä¸€æ—¦æ‰€æœ‰çš„ç›¸åŒæ–‡ä»¶å¤¹å’Œå®ƒä»¬çš„å­æ–‡ä»¶å¤¹éƒ½è¢«æ ‡è®°ä¸ºå¾…åˆ é™¤ï¼Œæ–‡ä»¶ç³»ç»Ÿå°†ä¼š **åˆ é™¤**
æ‰€æœ‰ä¸Šè¿°æ–‡ä»¶å¤¹ã€‚æ–‡ä»¶ç³»ç»Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡åˆ é™¤æ“ä½œã€‚æ‰§è¡Œå®Œè¿™ä¸€æ¬¡åˆ é™¤æ“ä½œåï¼Œä¸ä¼šåˆ é™¤æ–°å‡ºç°çš„ç›¸åŒæ–‡ä»¶å¤¹ã€‚

è¿”å›äºŒç»´æ•°ç»„ __`ans` ï¼Œè¯¥æ•°ç»„åŒ…å«åˆ é™¤æ‰€æœ‰æ ‡è®°æ–‡ä»¶å¤¹ä¹‹åå‰©ä½™æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚è·¯å¾„å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/07/19/lc-dupfolder1.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** paths = [["a"],["c"],["d"],["a","b"],["c","b"],["d","a"]]
> 
> **è¾“å‡ºï¼š**[["d"],["d","a"]]
> 
> **è§£é‡Šï¼š** æ–‡ä»¶ç»“æ„å¦‚ä¸Šæ‰€ç¤ºã€‚
> 
> æ–‡ä»¶å¤¹ "/a" å’Œ "/c"ï¼ˆä»¥åŠå®ƒä»¬çš„å­æ–‡ä»¶å¤¹ï¼‰éƒ½ä¼šè¢«æ ‡è®°ä¸ºå¾…åˆ é™¤ï¼Œå› ä¸ºå®ƒä»¬éƒ½åŒ…å«åä¸º "b" çš„ç©ºæ–‡ä»¶å¤¹ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/07/19/lc-dupfolder2.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** paths = [["a"],["c"],["a","b"],["c","b"],["a","b","x"],["a","b","x","y"],["w"],["w","y"]]
> 
> **è¾“å‡ºï¼š**[["c"],["c","b"],["a"],["a","b"]]
> 
> **è§£é‡Šï¼š** æ–‡ä»¶ç»“æ„å¦‚ä¸Šæ‰€ç¤ºã€‚
> 
> æ–‡ä»¶å¤¹ "/a/b/x" å’Œ "/w"ï¼ˆä»¥åŠå®ƒä»¬çš„å­æ–‡ä»¶å¤¹ï¼‰éƒ½ä¼šè¢«æ ‡è®°ä¸ºå¾…åˆ é™¤ï¼Œå› ä¸ºå®ƒä»¬éƒ½åŒ…å«åä¸º "y" çš„ç©ºæ–‡ä»¶å¤¹ã€‚
> 
> æ³¨æ„ï¼Œæ–‡ä»¶å¤¹ "/a" å’Œ "/c" åœ¨åˆ é™¤åå˜ä¸ºç›¸åŒæ–‡ä»¶å¤¹ï¼Œä½†è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸ä¼šè¢«åˆ é™¤ï¼Œå› ä¸ºåˆ é™¤åªä¼šè¿›è¡Œä¸€æ¬¡ï¼Œä¸”å®ƒä»¬æ²¡æœ‰åœ¨åˆ é™¤å‰è¢«æ ‡è®°ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

![](https://assets.leetcode.com/uploads/2021/07/19/lc-dupfolder3.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** paths = [["a","b"],["c","d"],["c"],["a"]]
> 
> **è¾“å‡ºï¼š**[["c"],["c","d"],["a"],["a","b"]]
> 
> **è§£é‡Šï¼š** æ–‡ä»¶ç³»ç»Ÿä¸­æ‰€æœ‰æ–‡ä»¶å¤¹äº’ä¸ç›¸åŒã€‚
> 
> æ³¨æ„ï¼Œè¿”å›çš„æ•°ç»„å¯ä»¥æŒ‰ä¸åŒé¡ºåºè¿”å›æ–‡ä»¶å¤¹è·¯å¾„ï¼Œå› ä¸ºé¢˜ç›®å¯¹é¡ºåºæ²¡æœ‰è¦æ±‚ã€‚
> 
> 

**ç¤ºä¾‹ 4ï¼š**

![](https://assets.leetcode.com/uploads/2021/07/19/lc-dupfolder4_.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** paths = [["a"],["a","x"],["a","x","y"],["a","z"],["b"],["b","x"],["b","x","y"],["b","z"]]
> 
> **è¾“å‡ºï¼š**[]
> 
> **è§£é‡Šï¼š** æ–‡ä»¶ç»“æ„å¦‚ä¸Šæ‰€ç¤ºã€‚
> 
> æ–‡ä»¶å¤¹ "/a/x" å’Œ "/b/x"ï¼ˆä»¥åŠå®ƒä»¬çš„å­æ–‡ä»¶å¤¹ï¼‰éƒ½ä¼šè¢«æ ‡è®°ä¸ºå¾…åˆ é™¤ï¼Œå› ä¸ºå®ƒä»¬éƒ½åŒ…å«åä¸º "y" çš„ç©ºæ–‡ä»¶å¤¹ã€‚
> 
> æ–‡ä»¶å¤¹ "/a" å’Œ "/b"ï¼ˆä»¥åŠå®ƒä»¬çš„å­æ–‡ä»¶å¤¹ï¼‰éƒ½ä¼šè¢«æ ‡è®°ä¸ºå¾…åˆ é™¤ï¼Œå› ä¸ºå®ƒä»¬éƒ½åŒ…å«ä¸€ä¸ªåä¸º "z" çš„ç©ºæ–‡ä»¶å¤¹ä»¥åŠä¸Šé¢æåˆ°çš„æ–‡ä»¶å¤¹ "x" ã€‚
> 
> 

**ç¤ºä¾‹ 5ï¼š**

![](https://assets.leetcode.com/uploads/2021/07/19/lc-dupfolder5_.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** paths = [["a"],["a","x"],["a","x","y"],["a","z"],["b"],["b","x"],["b","x","y"],["b","z"],["b","w"]]
> 
> **è¾“å‡ºï¼š**[["b"],["b","w"],["b","z"],["a"],["a","z"]]
> 
> **è§£é‡Šï¼š** æœ¬ä¾‹ä¸ä¸Šä¾‹çš„ç»“æ„åŸºæœ¬ç›¸åŒï¼Œé™¤äº†æ–°å¢ "/b/w" æ–‡ä»¶å¤¹ã€‚
> 
> æ–‡ä»¶å¤¹ "/a/x" å’Œ "/b/x" ä»ç„¶ä¼šè¢«æ ‡è®°ï¼Œä½† "/a" å’Œ "/b" ä¸å†è¢«æ ‡è®°ï¼Œå› ä¸º "/b" ä¸­æœ‰åä¸º "w" çš„ç©ºæ–‡ä»¶å¤¹è€Œ "/a" æ²¡æœ‰ã€‚
> 
> æ³¨æ„ï¼Œ"/a/z" å’Œ "/b/z" ä¸ä¼šè¢«æ ‡è®°ï¼Œå› ä¸ºç›¸åŒå­æ–‡ä»¶å¤¹çš„é›†åˆå¿…é¡»æ˜¯éç©ºé›†åˆï¼Œä½†è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯ç©ºçš„ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= paths.length <= 2 * 10^4`
  * `1 <= paths[i].length <= 500`
  * `1 <= paths[i][j].length <= 10`
  * `1 <= sum(paths[i][j].length) <= 2 * 10^5`
  * `path[i][j]` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
  * ä¸ä¼šå­˜åœ¨ä¸¤ä¸ªè·¯å¾„éƒ½æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶å¤¹çš„æƒ…å†µ
  * å¯¹äºä¸åœ¨æ ¹å±‚çº§çš„ä»»æ„æ–‡ä»¶å¤¹ï¼Œå…¶çˆ¶æ–‡ä»¶å¤¹ä¹Ÿä¼šåŒ…å«åœ¨è¾“å…¥ä¸­


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 609 | [åœ¨ç³»ç»Ÿä¸­æŸ¥æ‰¾é‡å¤æ–‡ä»¶](https://leetcode.com/problems/find-duplicate-file-in-system) |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) | <font color=#ffb800>Medium</font> |
| 652 | [å¯»æ‰¾é‡å¤çš„å­æ ‘](https://leetcode.com/problems/find-duplicate-subtrees) |  |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) `1+` | <font color=#ffb800>Medium</font> |