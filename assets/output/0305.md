---
title: 305. å²›å±¿æ•°é‡ II ğŸ”’
description: LeetCode,305. å²›å±¿æ•°é‡ II ğŸ”’,å²›å±¿æ•°é‡ II,Number of Islands II,è§£é¢˜æ€è·¯,å¹¶æŸ¥é›†,æ•°ç»„,å“ˆå¸Œè¡¨
keywords:
  - LeetCode
  - 305. å²›å±¿æ•°é‡ II ğŸ”’
  - å²›å±¿æ•°é‡ II
  - Number of Islands II
  - è§£é¢˜æ€è·¯
  - å¹¶æŸ¥é›†
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
---

# 305. å²›å±¿æ•°é‡ II ğŸ”’

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å¹¶æŸ¥é›†`](/tag/union-find.md) [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/number-of-islands-ii) [`LeetCode`](https://leetcode.com/problems/number-of-islands-ii)

## é¢˜ç›®

You are given an empty 2D binary grid `grid` of size `m x n`. The grid
represents a map where `0`'s represent water and `1`'s represent land.
Initially, all the cells of `grid` are water cells (i.e., all the cells are
`0`'s).

We may perform an add land operation which turns the water at position into a
land. You are given an array `positions` where `positions[i] = [ri, ci]` is
the position `(ri, ci)` at which we should operate the `ith` operation.

Return _an array of integers_ `answer` _where_ `answer[i]` _is the number of
islands after turning the cell_ `(ri, ci)` _into a land_.

An **island** is surrounded by water and is formed by connecting adjacent
lands horizontally or vertically. You may assume all four edges of the grid
are all surrounded by water.



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0300-0399/0305.Number%20of%20Islands%20II/images/tmp-
grid.jpg)

> Input: m = 3, n = 3, positions = [[0,0],[0,1],[1,2],[2,1]]
> 
> Output: [1,1,2,3]
> 
> Explanation:
> 
> Initially, the 2d grid is filled with water.
> - Operation #1: addLand(0, 0) turns the water at grid[0][0] into a land. We have 1 island.
> - Operation #2: addLand(0, 1) turns the water at grid[0][1] into a land. We still have 1 island.
> - Operation #3: addLand(1, 2) turns the water at grid[1][2] into a land. We have 2 islands.
> - Operation #4: addLand(2, 1) turns the water at grid[2][1] into a land. We have 3 islands.

**Example 2:**

> Input: m = 1, n = 1, positions = [[0,0]]
> 
> Output: [1]

**Constraints:**

  * `1 <= m, n, positions.length <= 10^4`
  * `1 <= m * n <= 10^4`
  * `positions[i].length == 2`
  * `0 <= ri < m`
  * `0 <= ci < n`



**Follow up:** Could you solve it in time complexity `O(k log(mn))`, where `k
== positions.length`?


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º `m x n` çš„äºŒç»´äºŒè¿›åˆ¶ç½‘æ ¼ `grid` ã€‚ç½‘æ ¼è¡¨ç¤ºä¸€ä¸ªåœ°å›¾ï¼Œå…¶ä¸­ï¼Œ`0` è¡¨ç¤ºæ°´ï¼Œ`1` è¡¨ç¤ºé™†åœ°ã€‚æœ€åˆï¼Œ`grid`
ä¸­çš„æ‰€æœ‰å•å…ƒæ ¼éƒ½æ˜¯æ°´å•å…ƒæ ¼ï¼ˆå³ï¼Œæ‰€æœ‰å•å…ƒæ ¼éƒ½æ˜¯ `0`ï¼‰ã€‚

å¯ä»¥é€šè¿‡æ‰§è¡Œ `addLand` æ“ä½œï¼Œå°†æŸä¸ªä½ç½®çš„æ°´è½¬æ¢æˆé™†åœ°ã€‚ç»™ä½ ä¸€ä¸ªæ•°ç»„ `positions` ï¼Œå…¶ä¸­ `positions[i] = [ri,
ci]` æ˜¯è¦æ‰§è¡Œç¬¬ `i` æ¬¡æ“ä½œçš„ä½ç½® `(ri, ci)` ã€‚

è¿”å›ä¸€ä¸ªæ•´æ•°æ•°ç»„ `answer` ï¼Œå…¶ä¸­ `answer[i]` æ˜¯å°†å•å…ƒæ ¼ `(ri, ci)` è½¬æ¢ä¸ºé™†åœ°åï¼Œåœ°å›¾ä¸­å²›å±¿çš„æ•°é‡ã€‚

**å²›å±¿** çš„å®šä¹‰æ˜¯è¢«ã€Œæ°´ã€åŒ…å›´çš„ã€Œé™†åœ°ã€ï¼Œé€šè¿‡æ°´å¹³æ–¹å‘æˆ–è€…å‚ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿æ¥è€Œæˆã€‚ä½ å¯ä»¥å‡è®¾åœ°å›¾ç½‘æ ¼çš„å››è¾¹å‡è¢«æ— è¾¹æ— é™…çš„ã€Œæ°´ã€æ‰€åŒ…å›´ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0300-0399/0305.Number%20of%20Islands%20II/images/tmp-
grid.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** m = 3, n = 3, positions = [[0,0],[0,1],[1,2],[2,1]]
> 
> **è¾“å‡ºï¼š**[1,1,2,3]
> 
> **è§£é‡Šï¼š**
> 
> èµ·åˆï¼ŒäºŒç»´ç½‘æ ¼ grid è¢«å…¨éƒ¨æ³¨å…¥ã€Œæ°´ã€ã€‚ï¼ˆ0 ä»£è¡¨ã€Œæ°´ã€ï¼Œ1 ä»£è¡¨ã€Œé™†åœ°ã€ï¼‰
> - æ“ä½œ #1ï¼šaddLand(0, 0) å°† grid[0][0] çš„æ°´å˜ä¸ºé™†åœ°ã€‚æ­¤æ—¶å­˜åœ¨ 1 ä¸ªå²›å±¿ã€‚
> - æ“ä½œ #2ï¼šaddLand(0, 1) å°† grid[0][1] çš„æ°´å˜ä¸ºé™†åœ°ã€‚æ­¤æ—¶å­˜åœ¨ 1 ä¸ªå²›å±¿ã€‚
> - æ“ä½œ #3ï¼šaddLand(1, 2) å°† grid[1][2] çš„æ°´å˜ä¸ºé™†åœ°ã€‚æ­¤æ—¶å­˜åœ¨ 2 ä¸ªå²›å±¿ã€‚
> - æ“ä½œ #4ï¼šaddLand(2, 1) å°† grid[2][1] çš„æ°´å˜ä¸ºé™†åœ°ã€‚æ­¤æ—¶å­˜åœ¨ 3 ä¸ªå²›å±¿ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** m = 1, n = 1, positions = [[0,0]]
> 
> **è¾“å‡ºï¼š**[1]
> 
> 



**æç¤ºï¼š**

  * `1 <= m, n, positions.length <= 10^4`
  * `1 <= m * n <= 10^4`
  * `positions[i].length == 2`
  * `0 <= ri < m`
  * `0 <= ci < n`



**è¿›é˜¶ï¼š** ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ `O(k log(mn))` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜å—ï¼Ÿï¼ˆå…¶ä¸­ `k == positions.length`ï¼‰


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 200 | [å²›å±¿æ•°é‡](https://leetcode.com/problems/number-of-islands) | [[âœ“]](/problem/0200.md) |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å¹¶æŸ¥é›†`](/tag/union-find.md) `2+` | <font color=#ffb800>Medium</font> |
| 2076 | [å¤„ç†å«é™åˆ¶æ¡ä»¶çš„å¥½å‹è¯·æ±‚](https://leetcode.com/problems/process-restricted-friend-requests) |  |  [`å¹¶æŸ¥é›†`](/tag/union-find.md) [`å›¾`](/tag/graph.md) | <font color=#ff334b>Hard</font> |