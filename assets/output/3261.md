# [3261. ç»Ÿè®¡æ»¡è¶³ K çº¦æŸçš„å­å­—ç¬¦ä¸²æ•°é‡ II](https://leetcode.com/problems/count-substrings-that-satisfy-k-constraint-ii)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/outline/tag/array.md) [`å­—ç¬¦ä¸²`](/outline/tag/string.md) [`äºŒåˆ†æŸ¥æ‰¾`](/outline/tag/binary-search.md) [`å‰ç¼€å’Œ`](/outline/tag/prefix-sum.md) [`æ»‘åŠ¨çª—å£`](/outline/tag/sliding-window.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/count-substrings-that-satisfy-k-constraint-ii)

## é¢˜ç›®

You are given a **binary** string `s` and an integer `k`.

You are also given a 2D integer array `queries`, where `queries[i] = [li,
ri]`.

A **binary string** satisfies the **k-constraint** if **either** of the
following conditions holds:

  * The number of `0`'s in the string is at most `k`.
  * The number of `1`'s in the string is at most `k`.

Return an integer array `answer`, where `answer[i]` is the number of
substrings of `s[li..ri]` that satisfy the **k-constraint**.



**Example 1:**

**Input:** s = "0001111", k = 2, queries = [[0,6]]

**Output:** [26]

**Explanation:**

For the query `[0, 6]`, all substrings of `s[0..6] = "0001111"` satisfy the
k-constraint except for the substrings `s[0..5] = "000111"` and `s[0..6] =
"0001111"`.

**Example 2:**

**Input:** s = "010101", k = 1, queries = [[0,5],[1,4],[2,3]]

**Output:** [15,9,3]

**Explanation:**

The substrings of `s` with a length greater than 3 do not satisfy the
k-constraint.



**Constraints:**

  * `1 <= s.length <= 10^5`
  * `s[i]` is either `'0'` or `'1'`.
  * `1 <= k <= s.length`
  * `1 <= queries.length <= 10^5`
  * `queries[i] == [li, ri]`
  * `0 <= li <= ri < s.length`
  * All queries are distinct.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ª **äºŒè¿›åˆ¶** å­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªæ•´æ•° `k`ã€‚

å¦ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `queries` ï¼Œå…¶ä¸­ `queries[i] = [li, ri]` ã€‚

å¦‚æœä¸€ä¸ª **äºŒè¿›åˆ¶å­—ç¬¦ä¸²** æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œåˆ™è®¤ä¸ºè¯¥å­—ç¬¦ä¸²æ»¡è¶³ **k çº¦æŸ** ï¼š

  * å­—ç¬¦ä¸²ä¸­ `0` çš„æ•°é‡æœ€å¤šä¸º `k`ã€‚
  * å­—ç¬¦ä¸²ä¸­ `1` çš„æ•°é‡æœ€å¤šä¸º `k`ã€‚

è¿”å›ä¸€ä¸ªæ•´æ•°æ•°ç»„ `answer` ï¼Œå…¶ä¸­ `answer[i]` è¡¨ç¤º `s[li..ri]` ä¸­æ»¡è¶³ **k çº¦æŸ** çš„ å­å­—ç¬¦ä¸² çš„æ•°é‡ã€‚



**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** s = "0001111", k = 2, queries = [[0,6]]

**è¾“å‡ºï¼š**[26]

**è§£é‡Šï¼š**

å¯¹äºæŸ¥è¯¢ `[0, 6]`ï¼Œ `s[0..6] = "0001111"` çš„æ‰€æœ‰å­å­—ç¬¦ä¸²ä¸­ï¼Œé™¤ `s[0..5] = "000111"` å’Œ
`s[0..6] = "0001111"` å¤–ï¼Œå…¶ä½™å­å­—ç¬¦ä¸²éƒ½æ»¡è¶³ k çº¦æŸã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** s = "010101", k = 1, queries = [[0,5],[1,4],[2,3]]

**è¾“å‡ºï¼š**[15,9,3]

**è§£é‡Šï¼š**

`s` çš„æ‰€æœ‰å­å­—ç¬¦ä¸²ä¸­ï¼Œé•¿åº¦å¤§äº 3 çš„å­å­—ç¬¦ä¸²éƒ½ä¸æ»¡è¶³ k çº¦æŸã€‚



**æç¤ºï¼š**

  * `1 <= s.length <= 10^5`
  * `s[i]` æ˜¯ `'0'` æˆ– `'1'`
  * `1 <= k <= s.length`
  * `1 <= queries.length <= 10^5`
  * `queries[i] == [li, ri]`
  * `0 <= li <= ri < s.length`
  * æ‰€æœ‰æŸ¥è¯¢äº’ä¸ç›¸åŒ


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```