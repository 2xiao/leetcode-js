# [1172. é¤ç›˜æ ˆ](https://leetcode.com/problems/dinner-plate-stacks)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/leetcode/outline/tag/stack.md) [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/leetcode/outline/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/dinner-plate-stacks)


## é¢˜ç›®

You have an infinite number of stacks arranged in a row and numbered (left to
right) from `0`, each of the stacks has the same maximum capacity.

Implement the `DinnerPlates` class:

  * `DinnerPlates(int capacity)` Initializes the object with the maximum capacity of the stacks `capacity`.
  * `void push(int val)` Pushes the given integer `val` into the leftmost stack with a size less than `capacity`.
  * `int pop()` Returns the value at the top of the rightmost non-empty stack and removes it from that stack, and returns `-1` if all the stacks are empty.
  * `int popAtStack(int index)` Returns the value at the top of the stack with the given index `index` and removes it from that stack or returns `-1` if the stack with that given index is empty.



**Example 1:**

> 
> 
> 
> 
> 
> **Input**
> 
> ["DinnerPlates", "push", "push", "push", "push", "push", "popAtStack", "push", "push", "popAtStack", "popAtStack", "pop", "pop", "pop", "pop", "pop"]
> 
> [[2], [1], [2], [3], [4], [5], [0], [20], [21], [0], [2], [], [], [], [], []]
> 
> **Output**
> 
> [null, null, null, null, null, null, 2, null, null, 20, 21, 5, 4, 3, 1, -1]
> 
> 
> 
> Explanation: 
> 
> DinnerPlates D = DinnerPlates(2);  // Initialize with capacity = 2
> 
> D.push(1);
> 
> D.push(2);
> 
> D.push(3);
> 
> D.push(4);
> 
> D.push(5);> 
> > 
>  // The stacks are now:  2  4
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    1  3  5
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    ï¹ˆ ï¹ˆ ï¹ˆ
> 
> D.popAtStack(0);   // Returns 2.  The stacks are now:> 
>  4
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    1  3  5
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    ï¹ˆ ï¹ˆ ï¹ˆ
> 
> D.push(20);> 
> > 
> // The stacks are now: 20  4
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    1  3  5
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    ï¹ˆ ï¹ˆ ï¹ˆ
> 
> D.push(21);> 
> > 
> // The stacks are now: 20  4 21
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    1  3  5
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    ï¹ˆ ï¹ˆ ï¹ˆ
> 
> D.popAtStack(0);   // Returns 20.  The stacks are now:> 
>  4 21
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> 1  3  5
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> ï¹ˆ ï¹ˆ ï¹ˆ
> 
> D.popAtStack(2);   // Returns 21.  The stacks are now:> 
>  4
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> 1  3  5
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> ï¹ˆ ï¹ˆ ï¹ˆ 
> 
> D.pop()> 
> > 
> > 
> // Returns 5.  The stacks are now:> 
>   4
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> 1  3 
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> ï¹ˆ ï¹ˆ  
> 
> D.pop()> 
> > 
> > 
> // Returns 4.  The stacks are now:   1  3 
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> ï¹ˆ ï¹ˆ   
> 
> D.pop()> 
> > 
> > 
> // Returns 3.  The stacks are now:   1 
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> ï¹ˆ   
> 
> D.pop()> 
> > 
> > 
> // Returns 1.  There are no stacks.
> 
> D.pop()> 
> > 
> > 
> // Returns -1.  There are still no stacks.

**Constraints:**

  * `1 <= capacity <= 2 * 10^4`
  * `1 <= val <= 2 * 10^4`
  * `0 <= index <= 10^5`
  * At most `2 * 10^5` calls will be made to `push`, `pop`, and `popAtStack`.


## é¢˜ç›®å¤§æ„

æˆ‘ä»¬æŠŠæ— é™æ•°é‡ âˆ çš„æ ˆæ’æˆä¸€è¡Œï¼ŒæŒ‰ä»å·¦åˆ°å³çš„æ¬¡åºä» 0 å¼€å§‹ç¼–å·ã€‚æ¯ä¸ªæ ˆçš„çš„æœ€å¤§å®¹é‡ `capacity` éƒ½ç›¸åŒã€‚

å®ç°ä¸€ä¸ªå«ã€Œé¤ç›˜ã€çš„ç±» `DinnerPlates`ï¼š

  * `DinnerPlates(int capacity)` \- ç»™å‡ºæ ˆçš„æœ€å¤§å®¹é‡ `capacity`ã€‚
  * `void push(int val)` \- å°†ç»™å‡ºçš„æ­£æ•´æ•° `val` æ¨å…¥ **ä»å·¦å¾€å³ç¬¬ä¸€ä¸ª  **æ²¡æœ‰æ»¡çš„æ ˆã€‚
  * `int pop()` \- è¿”å› **ä»å³å¾€å·¦ç¬¬ä¸€ä¸ª  **éç©ºæ ˆé¡¶éƒ¨çš„å€¼ï¼Œå¹¶å°†å…¶ä»æ ˆä¸­åˆ é™¤ï¼›å¦‚æœæ‰€æœ‰çš„æ ˆéƒ½æ˜¯ç©ºçš„ï¼Œè¯·è¿”å› `-1`ã€‚
  * `int popAtStack(int index)` \- è¿”å›ç¼–å· `index` çš„æ ˆé¡¶éƒ¨çš„å€¼ï¼Œå¹¶å°†å…¶ä»æ ˆä¸­åˆ é™¤ï¼›å¦‚æœç¼–å· `index` çš„æ ˆæ˜¯ç©ºçš„ï¼Œè¯·è¿”å› `-1`ã€‚



**ç¤ºä¾‹ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> ["DinnerPlates","push","push","push","push","push","popAtStack","push","push","popAtStack","popAtStack","pop","pop","pop","pop","pop"]
> 
> [[2],[1],[2],[3],[4],[5],[0],[20],[21],[0],[2],[],[],[],[],[]]
> 
> **è¾“å‡ºï¼š**
> 
> [null,null,null,null,null,null,2,null,null,20,21,5,4,3,1,-1]
> 
> 
> 
> **è§£é‡Šï¼š**
> 
> DinnerPlates D = DinnerPlates(2);  // åˆå§‹åŒ–ï¼Œæ ˆæœ€å¤§å®¹é‡ capacity = 2
> 
> D.push(1);
> 
> D.push(2);
> 
> D.push(3);
> 
> D.push(4);
> 
> D.push(5);> 
> > 
>  // æ ˆçš„ç°çŠ¶ä¸ºï¼š> 
> 2  4
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> 1  3  5
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> ï¹ˆ ï¹ˆ ï¹ˆ
> 
> D.popAtStack(0);   // è¿”å› 2ã€‚æ ˆçš„ç°çŠ¶ä¸ºï¼š> 
>   4
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>   1  3  5
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>   ï¹ˆ ï¹ˆ ï¹ˆ
> 
> D.push(20);> 
> > 
> // æ ˆçš„ç°çŠ¶ä¸ºï¼š  20  4
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    1  3  5
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    ï¹ˆ ï¹ˆ ï¹ˆ
> 
> D.push(21);> 
> > 
> // æ ˆçš„ç°çŠ¶ä¸ºï¼š  20  4 21
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    1  3  5
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    ï¹ˆ ï¹ˆ ï¹ˆ
> 
> D.popAtStack(0);   // è¿”å› 20ã€‚æ ˆçš„ç°çŠ¶ä¸ºï¼š> 
>    4 21
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> 1  3  5
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> ï¹ˆ ï¹ˆ ï¹ˆ
> 
> D.popAtStack(2);   // è¿”å› 21ã€‚æ ˆçš„ç°çŠ¶ä¸ºï¼š> 
>    4
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> 1  3  5
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> ï¹ˆ ï¹ˆ ï¹ˆ 
> 
> D.pop()> 
> > 
> > 
> // è¿”å› 5ã€‚æ ˆçš„ç°çŠ¶ä¸ºï¼š> 
> > 
> 4
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> 1  3 
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> ï¹ˆ ï¹ˆ  
> 
> D.pop()> 
> > 
> > 
> // è¿”å› 4ã€‚æ ˆçš„ç°çŠ¶ä¸ºï¼š> 
> 1  3 
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    ï¹ˆ ï¹ˆ   
> 
> D.pop()> 
> > 
> > 
> // è¿”å› 3ã€‚æ ˆçš„ç°çŠ¶ä¸ºï¼š> 
> 1 
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    ï¹ˆ   
> 
> D.pop()> 
> > 
> > 
> // è¿”å› 1ã€‚ç°åœ¨æ²¡æœ‰æ ˆã€‚
> 
> D.pop()> 
> > 
> > 
> // è¿”å› -1ã€‚ä»ç„¶æ²¡æœ‰æ ˆã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= capacity <= 20000`
  * `1 <= val <= 20000`
  * `0 <= index <= 100000`
  * æœ€å¤šä¼šå¯¹ `push`ï¼Œ`pop`ï¼Œå’Œ `popAtStack` è¿›è¡Œ `200000` æ¬¡è°ƒç”¨ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```