---
title: 2876. æœ‰å‘å›¾è®¿é—®è®¡æ•°
description: LeetCode 2876. æœ‰å‘å›¾è®¿é—®è®¡æ•°é¢˜è§£ï¼ŒCount Visited Nodes in a Directed Graphï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2876. æœ‰å‘å›¾è®¿é—®è®¡æ•°
  - æœ‰å‘å›¾è®¿é—®è®¡æ•°
  - Count Visited Nodes in a Directed Graph
  - è§£é¢˜æ€è·¯
  - å›¾
  - è®°å¿†åŒ–æœç´¢
  - åŠ¨æ€è§„åˆ’
---

# 2876. æœ‰å‘å›¾è®¿é—®è®¡æ•°

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å›¾`](/tag/graph.md) [`è®°å¿†åŒ–æœç´¢`](/tag/memoization.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/count-visited-nodes-in-a-directed-graph) [`LeetCode`](https://leetcode.com/problems/count-visited-nodes-in-a-directed-graph)

## é¢˜ç›®

There is a **directed** graph consisting of `n` nodes numbered from `0` to `n
- 1` and `n` directed edges.

You are given a **0-indexed** array `edges` where `edges[i]` indicates that
there is an edge from node `i` to node `edges[i]`.

Consider the following process on the graph:

  * You start from a node `x` and keep visiting other nodes through edges until you reach a node that you have already visited before on this **same** process.

Return _an array_`answer` _where_`answer[i]`_is the number of**different**
nodes that you will visit if you perform the process starting from node _`i`.



**Example 1:**

![](https://assets.leetcode.com/uploads/2023/08/31/graaphdrawio-1.png)

> Input: edges = [1,2,0,0]
> 
> Output: [3,3,3,4]
> 
> Explanation: We perform the process starting from each node in the following way:
> - Starting from node 0, we visit the nodes 0 -> 1 -> 2 -> 0. The number of different nodes we visit is 3.
> - Starting from node 1, we visit the nodes 1 -> 2 -> 0 -> 1. The number of different nodes we visit is 3.
> - Starting from node 2, we visit the nodes 2 -> 0 -> 1 -> 2. The number of different nodes we visit is 3.
> - Starting from node 3, we visit the nodes 3 -> 0 -> 1 -> 2 -> 0. The number of different nodes we visit is 4.

**Example 2:**

![](https://assets.leetcode.com/uploads/2023/08/31/graaph2drawio.png)

> Input: edges = [1,2,3,4,0]
> 
> Output: [5,5,5,5,5]
> 
> Explanation: Starting from any node we can visit every node in the graph in the process.

**Constraints:**

  * `n == edges.length`
  * `2 <= n <= 10^5`
  * `0 <= edges[i] <= n - 1`
  * `edges[i] != i`


## é¢˜ç›®å¤§æ„

ç°æœ‰ä¸€ä¸ªæœ‰å‘å›¾ï¼Œå…¶ä¸­åŒ…å« `n` ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ç¼–å·ä» `0` åˆ° `n - 1` ã€‚æ­¤å¤–ï¼Œè¯¥å›¾è¿˜åŒ…å«äº† `n` æ¡æœ‰å‘è¾¹ã€‚

ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹çš„æ•°ç»„ `edges` ï¼Œå…¶ä¸­ `edges[i]` è¡¨ç¤ºå­˜åœ¨ä¸€æ¡ä»èŠ‚ç‚¹ `i` åˆ°èŠ‚ç‚¹ `edges[i]` çš„è¾¹ã€‚

æƒ³è±¡åœ¨å›¾ä¸Šå‘ç”Ÿä»¥ä¸‹è¿‡ç¨‹ï¼š

  * ä½ ä»èŠ‚ç‚¹ `x` å¼€å§‹ï¼Œé€šè¿‡è¾¹è®¿é—®å…¶ä»–èŠ‚ç‚¹ï¼Œç›´åˆ°ä½ åœ¨**æ­¤è¿‡ç¨‹** ä¸­å†æ¬¡è®¿é—®åˆ°ä¹‹å‰å·²ç»è®¿é—®è¿‡çš„èŠ‚ç‚¹ã€‚

è¿”å›æ•°ç»„ `answer` ä½œä¸ºç­”æ¡ˆï¼Œå…¶ä¸­ `answer[i]` è¡¨ç¤ºå¦‚æœä»èŠ‚ç‚¹ `i` å¼€å§‹æ‰§è¡Œè¯¥è¿‡ç¨‹ï¼Œä½ å¯ä»¥è®¿é—®åˆ°çš„ä¸åŒèŠ‚ç‚¹æ•°ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2023/08/31/graaphdrawio-1.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** edges = [1,2,0,0]
> 
> **è¾“å‡ºï¼š**[3,3,3,4]
> 
> **è§£é‡Šï¼š** ä»æ¯ä¸ªèŠ‚ç‚¹å¼€å§‹æ‰§è¡Œè¯¥è¿‡ç¨‹ï¼Œè®°å½•å¦‚ä¸‹ï¼š
> - ä»èŠ‚ç‚¹ 0 å¼€å§‹ï¼Œè®¿é—®èŠ‚ç‚¹ 0 -> 1 -> 2 -> 0 ã€‚è®¿é—®çš„ä¸åŒèŠ‚ç‚¹æ•°æ˜¯ 3 ã€‚
> - ä»èŠ‚ç‚¹ 1 å¼€å§‹ï¼Œè®¿é—®èŠ‚ç‚¹ 1 -> 2 -> 0 -> 1 ã€‚è®¿é—®çš„ä¸åŒèŠ‚ç‚¹æ•°æ˜¯ 3 ã€‚
> - ä»èŠ‚ç‚¹ 2 å¼€å§‹ï¼Œè®¿é—®èŠ‚ç‚¹ 2 -> 0 -> 1 -> 2 ã€‚è®¿é—®çš„ä¸åŒèŠ‚ç‚¹æ•°æ˜¯ 3 ã€‚
> - ä»èŠ‚ç‚¹ 3 å¼€å§‹ï¼Œè®¿é—®èŠ‚ç‚¹ 3 -> 0 -> 1 -> 2 -> 0 ã€‚è®¿é—®çš„ä¸åŒèŠ‚ç‚¹æ•°æ˜¯ 4 ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2023/08/31/graaph2drawio.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** edges = [1,2,3,4,0]
> 
> **è¾“å‡ºï¼š**[5,5,5,5,5]
> 
> **è§£é‡Šï¼š** æ— è®ºä»å“ªä¸ªèŠ‚ç‚¹å¼€å§‹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œéƒ½å¯ä»¥è®¿é—®åˆ°å›¾ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚
> 
> 



**æç¤ºï¼š**

  * `n == edges.length`
  * `2 <= n <= 10^5`
  * `0 <= edges[i] <= n - 1`
  * `edges[i] != i`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```