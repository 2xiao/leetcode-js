# [710. é»‘åå•ä¸­çš„éšæœºæ•°](https://2xiao.github.io/leetcode-js/problem/0710.html)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ•°å­¦`](/tag/math.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`æ’åº`](/tag/sorting.md) [`éšæœºåŒ–`](/tag/randomized.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/random-pick-with-blacklist) [`LeetCode`](https://leetcode.com/problems/random-pick-with-blacklist)

## é¢˜ç›®

You are given an integer `n` and an array of **unique** integers `blacklist`.
Design an algorithm to pick a random integer in the range `[0, n - 1]` that is
**not** in `blacklist`. Any integer that is in the mentioned range and not in
`blacklist` should be **equally likely** to be returned.

Optimize your algorithm such that it minimizes the number of calls to the
**built-in** random function of your language.

Implement the `Solution` class:

  * `Solution(int n, int[] blacklist)` Initializes the object with the integer `n` and the blacklisted integers `blacklist`.
  * `int pick()` Returns a random integer in the range `[0, n - 1]` and not in `blacklist`.



**Example 1:**

> 
> 
> 
> 
> 
> **Input**
> 
> ["Solution", "pick", "pick", "pick", "pick", "pick", "pick", "pick"]
> 
> [[7, [2, 3, 5]], [], [], [], [], [], [], []]
> 
> **Output**
> 
> [null, 0, 4, 1, 6, 1, 0, 4]
> 
> 
> 
> **Explanation**
> 
> Solution solution = new Solution(7, [2, 3, 5]);
> 
> solution.pick(); // return 0, any integer from [0,1,4,6] should be ok. Note that for every call of pick,
> 
> > 
> > 
> > 
> > 
>  // 0, 1, 4, and 6 must be equally likely to be returned (i.e., with probability 1/4).
> 
> solution.pick(); // return 4
> 
> solution.pick(); // return 1
> 
> solution.pick(); // return 6
> 
> solution.pick(); // return 1
> 
> solution.pick(); // return 0
> 
> solution.pick(); // return 4

**Constraints:**

  * `1 <= n <= 10^9`
  * `0 <= blacklist.length <= min(105, n - 1)`
  * `0 <= blacklist[i] < n`
  * All the values of `blacklist` are **unique**.
  * At most `2 * 10^4` calls will be made to `pick`.


## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªæ•´æ•° `n` å’Œä¸€ä¸ª **æ— é‡å¤** é»‘åå•æ•´æ•°æ•°ç»„ `blacklist` ã€‚è®¾è®¡ä¸€ç§ç®—æ³•ï¼Œä» `[0, n - 1]`
èŒƒå›´å†…çš„ä»»æ„æ•´æ•°ä¸­é€‰å–ä¸€ä¸ª **æœªåŠ å…¥  **é»‘åå• `blacklist` çš„æ•´æ•°ã€‚ä»»ä½•åœ¨ä¸Šè¿°èŒƒå›´å†…ä¸”ä¸åœ¨é»‘åå• `blacklist` ä¸­çš„æ•´æ•°éƒ½åº”è¯¥æœ‰
**åŒç­‰çš„å¯èƒ½æ€§** è¢«è¿”å›ã€‚

ä¼˜åŒ–ä½ çš„ç®—æ³•ï¼Œä½¿å®ƒæœ€å°åŒ–è°ƒç”¨è¯­è¨€ **å†…ç½®** éšæœºå‡½æ•°çš„æ¬¡æ•°ã€‚

å®ç° `Solution` ç±»:

  * `Solution(int n, int[] blacklist)` åˆå§‹åŒ–æ•´æ•° `n` å’Œè¢«åŠ å…¥é»‘åå• `blacklist` çš„æ•´æ•°
  * `int pick()` è¿”å›ä¸€ä¸ªèŒƒå›´ä¸º `[0, n - 1]` ä¸”ä¸åœ¨é»‘åå• `blacklist` ä¸­çš„éšæœºæ•´æ•°



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥**
> 
> ["Solution", "pick", "pick", "pick", "pick", "pick", "pick", "pick"]
> 
> [[7, [2, 3, 5]], [], [], [], [], [], [], []]
> 
> **è¾“å‡º**
> 
> [null, 0, 4, 1, 6, 1, 0, 4]
> 
> 
> 
> **è§£é‡Š** Solution solution = new Solution(7, [2, 3, 5]);
> 
> solution.pick(); // è¿”å›0ï¼Œä»»ä½•[0,1,4,6]çš„æ•´æ•°éƒ½å¯ä»¥ã€‚æ³¨æ„ï¼Œå¯¹äºæ¯ä¸€ä¸ªpickçš„è°ƒç”¨ï¼Œ
> 
> > 
> > 
> > 
> > 
>  // 0ã€1ã€4å’Œ6çš„è¿”å›æ¦‚ç‡å¿…é¡»ç›¸ç­‰(å³æ¦‚ç‡ä¸º1/4)ã€‚
> 
> solution.pick(); // è¿”å› 4
> 
> solution.pick(); // è¿”å› 1
> 
> solution.pick(); // è¿”å› 6
> 
> solution.pick(); // è¿”å› 1
> 
> solution.pick(); // è¿”å› 0
> 
> solution.pick(); // è¿”å› 4
> 
> 



**æç¤º:**

  * `1 <= n <= 10^9`
  * `0 <= blacklist.length <= min(105, n - 1)`
  * `0 <= blacklist[i] < n`
  * `blacklist` ä¸­æ‰€æœ‰å€¼éƒ½ **ä¸åŒ**
  *  `pick` æœ€å¤šè¢«è°ƒç”¨ `2 * 10^4` æ¬¡


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 398 | [éšæœºæ•°ç´¢å¼•](https://leetcode.com/problems/random-pick-index) |  |  [`æ°´å¡˜æŠ½æ ·`](/tag/reservoir-sampling.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ•°å­¦`](/tag/math.md) `1+` | <font color=#ffb800>Medium</font> |
| 528 | [æŒ‰æƒé‡éšæœºé€‰æ‹©](https://leetcode.com/problems/random-pick-with-weight) |  |  [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) `2+` | <font color=#ffb800>Medium</font> |
| 1980 | [æ‰¾å‡ºä¸åŒçš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²](https://leetcode.com/problems/find-unique-binary-string) |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `1+` | <font color=#ffb800>Medium</font> |