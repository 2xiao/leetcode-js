# [2424. æœ€é•¿ä¸Šä¼ å‰ç¼€](https://leetcode.com/problems/longest-uploaded-prefix)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å¹¶æŸ¥é›†`](/leetcode/outline/tag/union-find.md) [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`æ ‘çŠ¶æ•°ç»„`](/leetcode/outline/tag/binary-indexed-tree.md) [`çº¿æ®µæ ‘`](/leetcode/outline/tag/segment-tree.md) [`äºŒåˆ†æŸ¥æ‰¾`](/leetcode/outline/tag/binary-search.md) [`æœ‰åºé›†åˆ`](/leetcode/outline/tag/ordered-set.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/leetcode/outline/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/longest-uploaded-prefix)


## é¢˜ç›®

You are given a stream of `n` videos, each represented by a **distinct**
number from `1` to `n` that you need to "upload" to a server. You need to
implement a data structure that calculates the length of the **longest
uploaded prefix** at various points in the upload process.

We consider `i` to be an uploaded prefix if all videos in the range `1` to `i`
(**inclusive**) have been uploaded to the server. The longest uploaded prefix
is the **maximum** value of `i` that satisfies this definition.  
  
Implement the `LUPrefix `class:

  * `LUPrefix(int n)` Initializes the object for a stream of `n` videos.
  * `void upload(int video)` Uploads `video` to the server.
  * `int longest()` Returns the length of the **longest uploaded prefix** defined above.



**Example 1:**

> 
> 
> 
> 
> 
> **Input**
> 
> ["LUPrefix", "upload", "longest", "upload", "longest", "upload", "longest"]
> 
> [[4], [3], [], [1], [], [2], []]
> 
> **Output**
> 
> [null, null, 0, null, 1, null, 3]
> 
> 
> 
> **Explanation**
> 
> LUPrefix server = new LUPrefix(4);   // Initialize a stream of 4 videos.
> 
> server.upload(3);> 
> > 
> > 
> > 
> > 
> // Upload video 3.
> 
> server.longest();> 
> > 
> > 
> > 
> > 
> // Since video 1 has not been uploaded yet, there is no prefix.
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>  // So, we return 0.
> 
> server.upload(1);> 
> > 
> > 
> > 
> > 
> // Upload video 1.
> 
> server.longest();> 
> > 
> > 
> > 
> > 
> // The prefix [1] is the longest uploaded prefix, so we return 1.
> 
> server.upload(2);> 
> > 
> > 
> > 
> > 
> // Upload video 2.
> 
> server.longest();> 
> > 
> > 
> > 
> > 
> // The prefix [1,2,3] is the longest uploaded prefix, so we return 3.

**Constraints:**

  * `1 <= n <= 10^5`
  * `1 <= video <= n`
  * All values of `video` are **distinct**.
  * At most `2 * 10^5` calls **in total** will be made to `upload` and `longest`.
  * At least one call will be made to `longest`.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ª `n` ä¸ªè§†é¢‘çš„ä¸Šä¼ åºåˆ—ï¼Œæ¯ä¸ªè§†é¢‘ç¼–å·ä¸º `1` åˆ° `n` ä¹‹é—´çš„ **ä¸åŒ**
æ•°å­—ï¼Œä½ éœ€è¦ä¾æ¬¡å°†è¿™äº›è§†é¢‘ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚è¯·ä½ å®ç°ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œåœ¨ä¸Šä¼ çš„è¿‡ç¨‹ä¸­è®¡ç®— **æœ€é•¿ä¸Šä¼ å‰ç¼€**  ã€‚

å¦‚æœ **é—­åŒºé—´**  `1` åˆ° `i` ä¹‹é—´çš„è§†é¢‘å…¨éƒ¨éƒ½å·²ç»è¢«ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§° `i` æ˜¯ä¸Šä¼ å‰ç¼€ã€‚æœ€é•¿ä¸Šä¼ å‰ç¼€æŒ‡çš„æ˜¯ç¬¦åˆå®šä¹‰çš„ `i` ä¸­çš„
**æœ€å¤§å€¼**  ã€‚  
  
è¯·ä½ å®ç° `LUPrefix` ç±»ï¼š

  * `LUPrefix(int n)` åˆå§‹åŒ–ä¸€ä¸ª `n` ä¸ªè§†é¢‘çš„æµå¯¹è±¡ã€‚
  * `void upload(int video)` ä¸Šä¼  `video` åˆ°æœåŠ¡å™¨ã€‚
  * `int longest()` è¿”å›ä¸Šè¿°å®šä¹‰çš„ **æœ€é•¿ä¸Šä¼ å‰ç¼€**  çš„é•¿åº¦ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> ["LUPrefix", "upload", "longest", "upload", "longest", "upload", "longest"]
> 
> [[4], [3], [], [1], [], [2], []]
> 
> **è¾“å‡ºï¼š**
> 
> [null, null, 0, null, 1, null, 3]
> 
> 
> 
> **è§£é‡Šï¼š**
> 
> LUPrefix server = new LUPrefix(4);   // åˆå§‹åŒ– 4ä¸ªè§†é¢‘çš„ä¸Šä¼ æµ
> 
> server.upload(3);> 
> > 
> > 
> > 
> > 
> // ä¸Šä¼ è§†é¢‘ 3 ã€‚
> 
> server.longest();> 
> > 
> > 
> > 
> > 
> // ç”±äºè§†é¢‘ 1 è¿˜æ²¡æœ‰è¢«ä¸Šä¼ ï¼Œæœ€é•¿ä¸Šä¼ å‰ç¼€æ˜¯ 0 ã€‚
> 
> server.upload(1);> 
> > 
> > 
> > 
> > 
> // ä¸Šä¼ è§†é¢‘ 1 ã€‚
> 
> server.longest();> 
> > 
> > 
> > 
> > 
> // å‰ç¼€ [1] æ˜¯æœ€é•¿ä¸Šä¼ å‰ç¼€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› 1 ã€‚
> 
> server.upload(2);> 
> > 
> > 
> > 
> > 
> // ä¸Šä¼ è§†é¢‘ 2 ã€‚
> 
> server.longest();> 
> > 
> > 
> > 
> > 
> // å‰ç¼€ [1,2,3] æ˜¯æœ€é•¿ä¸Šä¼ å‰ç¼€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› 3 ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= n <= 10^5`
  * `1 <= video <= 10^5`
  * `video` ä¸­æ‰€æœ‰å€¼ **äº’ä¸ç›¸åŒ**  ã€‚
  * `upload` å’Œ `longest` **æ€»è°ƒç”¨** æ¬¡æ•°è‡³å¤šä¸è¶…è¿‡ `2 * 10^5` æ¬¡ã€‚
  * è‡³å°‘ä¼šè°ƒç”¨ `longest` ä¸€æ¬¡ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®
- [è®¾è®¡æœ‰åºæµ](https://leetcode.com/problems/design-an-ordered-stream)

::::
