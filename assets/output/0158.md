---
title: 158. ç”¨ Read4 è¯»å– N ä¸ªå­—ç¬¦ II - å¤šæ¬¡è°ƒç”¨ ğŸ”’
description: LeetCode 158. ç”¨ Read4 è¯»å– N ä¸ªå­—ç¬¦ II - å¤šæ¬¡è°ƒç”¨ ğŸ”’é¢˜è§£ï¼ŒRead N Characters Given read4 II - Call Multiple Timesï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 158. ç”¨ Read4 è¯»å– N ä¸ªå­—ç¬¦ II - å¤šæ¬¡è°ƒç”¨ ğŸ”’
  - ç”¨ Read4 è¯»å– N ä¸ªå­—ç¬¦ II - å¤šæ¬¡è°ƒç”¨
  - Read N Characters Given read4 II - Call Multiple Times
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - äº¤äº’
  - æ¨¡æ‹Ÿ
---

# 158. ç”¨ Read4 è¯»å– N ä¸ªå­—ç¬¦ II - å¤šæ¬¡è°ƒç”¨ ğŸ”’

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`äº¤äº’`](/tag/interactive.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/read-n-characters-given-read4-ii-call-multiple-times) [`LeetCode`](https://leetcode.com/problems/read-n-characters-given-read4-ii-call-multiple-times)

## é¢˜ç›®

Given a `file` and assume that you can only read the file using a given method
`read4`, implement a method `read` to read `n` characters. Your method `read`
may be **called multiple times**.

**Method read4:**

The API `read4` reads **four consecutive characters** from `file`, then writes
those characters into the buffer array `buf4`.

The return value is the number of actual characters read.

Note that `read4()` has its own file pointer, much like `FILE *fp` in C.

**Definition of read4:**

> 
> 
> 
> 
> 
> > 
> Parameter:  char[] buf4
> 
> > 
> Returns:> 
> int
> 
> 
> 
> buf4[] is a destination, not a source. The results from read4 will be copied to buf4[].
> 
> 

Below is a high-level example of how `read4` works:

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0100-0199/0158.Read%20N%20Characters%20Given%20read4%20II%20-%20Call%20Multiple%20Times/images/157_example.png)

> 
> 
> 
> 
> 
> File file("abcde"); // File is "abcde", initially file pointer (fp) points to 'a'
> 
> char[] buf4 = new char[4]; // Create buffer with enough space to store characters
> 
> read4(buf4); // read4 returns 4. Now buf4 = "abcd", fp points to 'e'
> 
> read4(buf4); // read4 returns 1. Now buf4 = "e", fp points to end of file
> 
> read4(buf4); // read4 returns 0. Now buf4 = "", fp points to end of file
> 
> 



**Method read:**

By using the `read4` method, implement the method read that reads `n`
characters from `file` and store it in the buffer array `buf`. Consider that
you cannot manipulate `file` directly.

The return value is the number of actual characters read.

**Definition of read:**

> 
> 
> 
> 
> 
> > 
> Parameters:	char[] buf, int n
> 
> > 
> Returns:	int
> 
> 
> 
> buf[] is a destination, not a source. You will need to write the results to buf[].
> 
> 

**Note:**

  * Consider that you cannot manipulate the file directly. The file is only accessible for `read4` but not for `read`.
  * The read function may be **called multiple times**.
  * Please remember to **RESET** your class variables declared in Solution, as static/class variables are persisted across multiple test cases. Please see [here](https://leetcode.com/faq/) for more details.
  * You may assume the destination buffer array, `buf`, is guaranteed to have enough space for storing `n` characters.
  * It is guaranteed that in a given test case the same buffer `buf` is called by `read`.



**Example 1:**

> Input: file = "abc", queries = [1,2,1]
> 
> Output: [1,2,0]
> 
> Explanation: The test case represents the following scenario:
> 
> File file("abc");
> 
> Solution sol;
> 
> sol.read(buf, 1); // After calling your read method, buf should contain "a". We read a total of 1 character from the file, so return 1.
> 
> sol.read(buf, 2); // Now buf should contain "bc". We read a total of 2 characters from the file, so return 2.
> 
> sol.read(buf, 1); // We have reached the end of file, no more characters can be read. So return 0.
> 
> Assume buf is allocated and guaranteed to have enough space for storing all characters from the file.

**Example 2:**

> Input: file = "abc", queries = [4,1]
> 
> Output: [3,0]
> 
> Explanation: The test case represents the following scenario:
> 
> File file("abc");
> 
> Solution sol;
> 
> sol.read(buf, 4); // After calling your read method, buf should contain "abc". We read a total of 3 characters from the file, so return 3.
> 
> sol.read(buf, 1); // We have reached the end of file, no more characters can be read. So return 0.

**Constraints:**

  * `1 <= file.length <= 500`
  * `file` consist of English letters and digits.
  * `1 <= queries.length <= 10`
  * `1 <= queries[i] <= 500`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ–‡ä»¶ `file` ï¼Œå¹¶ä¸”è¯¥æ–‡ä»¶åªèƒ½é€šè¿‡ç»™å®šçš„ `read4` æ–¹æ³•æ¥è¯»å–ï¼Œè¯·å®ç°ä¸€ä¸ªæ–¹æ³•ä½¿å…¶èƒ½å¤Ÿä½¿ `read` è¯»å– `n`
ä¸ªå­—ç¬¦ã€‚**æ³¨æ„ï¼šä½ çš„**  **`read` æ–¹æ³•å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡ã€‚**

**read4 çš„å®šä¹‰ï¼š**

`read4` API ä»æ–‡ä»¶ä¸­è¯»å–**4 ä¸ªè¿ç»­çš„å­—ç¬¦** ï¼Œç„¶åå°†è¿™äº›å­—ç¬¦å†™å…¥ç¼“å†²åŒºæ•°ç»„ `buf4` ã€‚

è¿”å›å€¼æ˜¯è¯»å–çš„å®é™…å­—ç¬¦æ•°ã€‚

è¯·æ³¨æ„ï¼Œ`read4()` æœ‰å…¶è‡ªå·±çš„æ–‡ä»¶æŒ‡é’ˆï¼Œç±»ä¼¼äº C ä¸­çš„ `FILE * fp` ã€‚

> 
> 
> 
> 
> 
> > 
> å‚æ•°ç±»å‹: char[] buf4
> 
> > 
> è¿”å›ç±»å‹: int
> 
> 
> 
> æ³¨æ„: buf4[] æ˜¯ç›®æ ‡ç¼“å­˜åŒºä¸æ˜¯æºç¼“å­˜åŒºï¼Œread4 çš„è¿”å›ç»“æœå°†ä¼šå¤åˆ¶åˆ° buf4[] å½“ä¸­ã€‚
> 
> 

ä¸‹åˆ—æ˜¯ä¸€äº›ä½¿ç”¨ `read4` çš„ä¾‹å­ï¼š

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0100-0199/0158.Read%20N%20Characters%20Given%20read4%20II%20-%20Call%20Multiple%20Times/images/157_example.png)

> 
> 
> 
> 
> 
> File file("abcde"); // æ–‡ä»¶åä¸º "abcde"ï¼Œ åˆå§‹æ–‡ä»¶æŒ‡é’ˆ (fp) æŒ‡å‘ 'a' 
> 
> char[] buf4 = new char[4]; // åˆ›å»ºä¸€ä¸ªç¼“å­˜åŒºä½¿å…¶èƒ½å®¹çº³è¶³å¤Ÿçš„å­—ç¬¦
> 
> read4(buf4); // read4 è¿”å› 4ã€‚ç°åœ¨ buf4 = "abcd"ï¼Œfp æŒ‡å‘ 'e'
> 
> read4(buf4); // read4 è¿”å› 1ã€‚ç°åœ¨ buf4 = "e"ï¼Œfp æŒ‡å‘æ–‡ä»¶æœ«å°¾
> 
> read4(buf4); // read4 è¿”å› 0ã€‚ç°åœ¨ buf4 = ""ï¼Œfp æŒ‡å‘æ–‡ä»¶æœ«å°¾



**read æ–¹æ³•ï¼š**

é€šè¿‡ä½¿ç”¨ `read4` æ–¹æ³•ï¼Œå®ç° `read` æ–¹æ³•ã€‚è¯¥æ–¹æ³•å¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å– `n` ä¸ªå­—ç¬¦å¹¶å°†å…¶å­˜å‚¨åˆ°ç¼“å­˜æ•°ç»„ `buf` ä¸­ã€‚æ‚¨ **ä¸èƒ½
**ç›´æ¥æ“ä½œ `file` ã€‚

è¿”å›å€¼ä¸ºå®é™…è¯»å–çš„å­—ç¬¦ã€‚

**read  çš„å®šä¹‰ï¼š**

> 
> 
> 
> 
> 
> > 
> å‚æ•°ç±»å‹:  char[] buf, int n
> 
> > 
> è¿”å›ç±»å‹:  int
> 
> 
> 
> æ³¨æ„: buf[] æ˜¯ç›®æ ‡ç¼“å­˜åŒºä¸æ˜¯æºç¼“å­˜åŒºï¼Œä½ éœ€è¦å°†ç»“æœå†™å…¥ buf[] ä¸­ã€‚
> 
> 

**æ³¨æ„ï¼š**

  * ä½  **ä¸èƒ½** ç›´æ¥æ“ä½œè¯¥æ–‡ä»¶ï¼Œæ–‡ä»¶åªèƒ½é€šè¿‡ `read4` è·å–è€Œ **ä¸èƒ½** é€šè¿‡ `read`ã€‚
  * `read`  å‡½æ•°å¯ä»¥è¢«è°ƒç”¨ **å¤šæ¬¡** ã€‚
  * è¯·è®°å¾— **é‡ç½®  **åœ¨ Solution ä¸­å£°æ˜çš„ç±»å˜é‡ï¼ˆé™æ€å˜é‡ï¼‰ï¼Œå› ä¸ºç±»å˜é‡ä¼š **åœ¨å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­ä¿æŒä¸å˜** ï¼Œå½±å“åˆ¤é¢˜å‡†ç¡®ã€‚è¯· [æŸ¥é˜…](https://support.leetcode.cn/hc/kb/section/1071534/) è¿™é‡Œã€‚
  * ä½ å¯ä»¥å‡å®šç›®æ ‡ç¼“å­˜æ•°ç»„ `buf` ä¿è¯æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜ä¸‹ n ä¸ªå­—ç¬¦ã€‚ 
  * ä¿è¯åœ¨ä¸€ä¸ªç»™å®šæµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œ`read` å‡½æ•°ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ª `buf`ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** file = "abc"ï¼Œ queries = [1,2,1]
> 
> **è¾“å‡ºï¼š**[1,2,0]
> 
> **è§£é‡Šï¼š** æµ‹è¯•ç”¨ä¾‹è¡¨ç¤ºä»¥ä¸‹åœºæ™¯:
> 
> File file("abc");
> 
> Solution sol;
> 
> sol.read (buf, 1); // è°ƒç”¨ read æ–¹æ³•åï¼Œbuf åº”è¯¥åŒ…å« â€œaâ€ã€‚æˆ‘ä»¬ä»æ–‡ä»¶ä¸­æ€»å…±è¯»å–äº† 1 ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥è¿”å› 1ã€‚
> 
> sol.read (buf, 2); // ç°åœ¨ buf åº”è¯¥åŒ…å« "bc"ã€‚æˆ‘ä»¬ä»æ–‡ä»¶ä¸­æ€»å…±è¯»å–äº† 2 ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥è¿”å› 2ã€‚
> 
> sol.read (buf, 1); // æˆ‘ä»¬å·²ç»åˆ°è¾¾æ–‡ä»¶çš„æœ«å°¾ï¼Œä¸èƒ½è¯»å–æ›´å¤šçš„å­—ç¬¦ã€‚æ‰€ä»¥è¿”å› 0ã€‚
> 
> å‡è®¾å·²ç»åˆ†é…äº† buf ï¼Œå¹¶ä¿è¯æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜å‚¨æ–‡ä»¶ä¸­çš„æ‰€æœ‰å­—ç¬¦ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** file = "abc"ï¼Œ queries = [4,1]
> 
> **è¾“å‡ºï¼š**[3,0]
> 
> **è§£é‡Šï¼š** æµ‹è¯•ç”¨ä¾‹è¡¨ç¤ºä»¥ä¸‹åœºæ™¯:
> 
> File file("abc");
> 
> Solution sol;
> 
> sol.read (buf, 4); // è°ƒç”¨ read æ–¹æ³•åï¼Œbuf åº”è¯¥åŒ…å« â€œabcâ€ã€‚æˆ‘ä»¬ä»æ–‡ä»¶ä¸­æ€»å…±è¯»å–äº† 3 ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥è¿”å› 3ã€‚
> 
> sol.read (buf, 1); // æˆ‘ä»¬å·²ç»åˆ°è¾¾æ–‡ä»¶çš„æœ«å°¾ï¼Œä¸èƒ½è¯»å–æ›´å¤šçš„å­—ç¬¦ã€‚æ‰€ä»¥è¿”å› 0ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= file.length <= 500`
  * `file` ç”±è‹±è¯­å­—æ¯å’Œæ•°å­—ç»„æˆ
  * `1 <= queries.length <= 10`
  * `1 <= queries[i] <= 500`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 157 | ç”¨ Read4 è¯»å– N ä¸ªå­—ç¬¦ ğŸ”’ |  |  [`æ•°ç»„`](/tag/array.md) [`äº¤äº’`](/tag/interactive.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md) | ğŸŸ¢ | [ğŸ€„ï¸](https://leetcode.cn/problems/read-n-characters-given-read4) [ğŸ”—](https://leetcode.com/problems/read-n-characters-given-read4) |