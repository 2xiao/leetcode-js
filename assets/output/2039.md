# [2039. ç½‘ç»œç©ºé—²çš„æ—¶åˆ»](https://2xiao.github.io/leetcode-js/problem/2039.html)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å›¾`](/tag/graph.md) [`æ•°ç»„`](/tag/array.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/the-time-when-the-network-becomes-idle) [`LeetCode`](https://leetcode.com/problems/the-time-when-the-network-becomes-idle)

## é¢˜ç›®

There is a network of `n` servers, labeled from `0` to `n - 1`. You are given
a 2D integer array `edges`, where `edges[i] = [ui, vi]` indicates there is a
message channel between servers `ui` and `vi`, and they can pass **any**
number of messages to **each other** directly in **one** second. You are also
given a **0-indexed** integer array `patience` of length `n`.

All servers are **connected** , i.e., a message can be passed from one server
to any other server(s) directly or indirectly through the message channels.

The server labeled `0` is the **master** server. The rest are **data**
servers. Each data server needs to send its message to the master server for
processing and wait for a reply. Messages move between servers **optimally** ,
so every message takes the **least amount of time** to arrive at the master
server. The master server will process all newly arrived messages
**instantly** and send a reply to the originating server via the **reversed
path** the message had gone through.

At the beginning of second `0`, each data server sends its message to be
processed. Starting from second `1`, at the **beginning** of **every** second,
each data server will check if it has received a reply to the message it sent
(including any newly arrived replies) from the master server:

  * If it has not, it will **resend** the message periodically. The data server `i` will resend the message every `patience[i]` second(s), i.e., the data server `i` will resend the message if `patience[i]` second(s) have **elapsed** since the **last** time the message was sent from this server.
  * Otherwise, **no more resending** will occur from this server.

The network becomes **idle** when there are **no** messages passing between
servers or arriving at servers.

Return _the**earliest second** starting from which the network becomes
**idle**_.



**Example 1:**

![example 1](https://assets.leetcode.com/uploads/2021/09/22/quiet-place-
example1.png)

> Input: edges = [[0,1],[1,2]], patience = [0,2,1]
> 
> Output: 8
> 
> Explanation:
> 
> At (the beginning of) second 0,
> - Data server 1 sends its message (denoted 1A) to the master server.
> - Data server 2 sends its message (denoted 2A) to the master server.
> 
> 
> 
> At second 1,
> - Message 1A arrives at the master server. Master server processes message 1A instantly and sends a reply 1A back.
> - Server 1 has not received any reply. 1 second (1 < patience[1] = 2) elapsed since this server has sent the message, therefore it does not resend the message.
> - Server 2 has not received any reply. 1 second (1 == patience[2] = 1) elapsed since this server has sent the message, therefore it resends the message (denoted 2B).
> 
> 
> 
> At second 2,
> - The reply 1A arrives at server 1. No more resending will occur from server 1.
> - Message 2A arrives at the master server. Master server processes message 2A instantly and sends a reply 2A back.
> - Server 2 resends the message (denoted 2C).
> 
> ...
> 
> At second 4,
> - The reply 2A arrives at server 2. No more resending will occur from server 2.
> 
> ...
> 
> At second 7, reply 2D arrives at server 2.
> 
> 
> 
> Starting from the beginning of the second 8, there are no messages passing between servers or arriving at servers.
> 
> This is the time when the network becomes idle.

**Example 2:**

![example
2](https://assets.leetcode.com/uploads/2021/09/04/network_a_quiet_place_2.png)

> Input: edges = [[0,1],[0,2],[1,2]], patience = [0,10,10]
> 
> Output: 3
> 
> Explanation: Data servers 1 and 2 receive a reply back at the beginning of second 2.
> 
> From the beginning of the second 3, the network becomes idle.

**Constraints:**

  * `n == patience.length`
  * `2 <= n <= 10^5`
  * `patience[0] == 0`
  * `1 <= patience[i] <= 10^5` for `1 <= i < n`
  * `1 <= edges.length <= min(105, n * (n - 1) / 2)`
  * `edges[i].length == 2`
  * `0 <= ui, vi < n`
  * `ui != vi`
  * There are no duplicate edges.
  * Each server can directly or indirectly reach another server.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæœ‰ `n` ä¸ªæœåŠ¡å™¨çš„è®¡ç®—æœºç½‘ç»œï¼ŒæœåŠ¡å™¨ç¼–å·ä¸º `0` åˆ° `n - 1` ã€‚åŒæ—¶ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `edges` ï¼Œå…¶ä¸­ `edges[i]
= [ui, vi]` è¡¨ç¤ºæœåŠ¡å™¨ `ui` å’Œ `vi` ä¹‹é—´æœ‰ä¸€æ¡ä¿¡æ¯çº¿è·¯ï¼Œåœ¨ **ä¸€ç§’**  å†…å®ƒä»¬ä¹‹é—´å¯ä»¥ä¼ è¾“ **ä»»æ„**
æ•°ç›®çš„ä¿¡æ¯ã€‚å†ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` ä¸”ä¸‹æ ‡ä» **0**  å¼€å§‹çš„æ•´æ•°æ•°ç»„ `patience` ã€‚

é¢˜ç›®ä¿è¯æ‰€æœ‰æœåŠ¡å™¨éƒ½æ˜¯ **ç›¸é€š**  çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªä¿¡æ¯ä»ä»»æ„æœåŠ¡å™¨å‡ºå‘ï¼Œéƒ½å¯ä»¥é€šè¿‡è¿™äº›ä¿¡æ¯çº¿è·¯ç›´æ¥æˆ–é—´æ¥åœ°åˆ°è¾¾ä»»ä½•å…¶ä»–æœåŠ¡å™¨ã€‚

ç¼–å·ä¸º `0` çš„æœåŠ¡å™¨æ˜¯ **ä¸»**  æœåŠ¡å™¨ï¼Œå…¶ä»–æœåŠ¡å™¨ä¸º **æ•°æ®**  æœåŠ¡å™¨ã€‚æ¯ä¸ªæ•°æ®æœåŠ¡å™¨éƒ½è¦å‘ä¸»æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œå¹¶ç­‰å¾…å›å¤ã€‚ä¿¡æ¯åœ¨æœåŠ¡å™¨ä¹‹é—´æŒ‰
**æœ€ä¼˜**  çº¿è·¯ä¼ è¾“ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªä¿¡æ¯éƒ½ä¼šä»¥ **æœ€å°‘æ—¶é—´**  åˆ°è¾¾ä¸»æœåŠ¡å™¨ã€‚ä¸»æœåŠ¡å™¨ä¼šå¤„ç† **æ‰€æœ‰**  æ–°åˆ°è¾¾çš„ä¿¡æ¯å¹¶ **ç«‹å³**
æŒ‰ç…§æ¯æ¡ä¿¡æ¯æ¥æ—¶çš„è·¯çº¿ **åæ–¹å‘** å‘é€å›å¤ä¿¡æ¯ã€‚

åœ¨ `0` ç§’çš„å¼€å§‹ï¼Œæ‰€æœ‰æ•°æ®æœåŠ¡å™¨éƒ½ä¼šå‘é€å„è‡ªéœ€è¦å¤„ç†çš„ä¿¡æ¯ã€‚ä»ç¬¬ `1` ç§’å¼€å§‹ï¼Œ**æ¯**  ä¸€ç§’æœ€ **å¼€å§‹**
æ—¶ï¼Œæ¯ä¸ªæ•°æ®æœåŠ¡å™¨éƒ½ä¼šæ£€æŸ¥å®ƒæ˜¯å¦æ”¶åˆ°äº†ä¸»æœåŠ¡å™¨çš„å›å¤ä¿¡æ¯ï¼ˆåŒ…æ‹¬æ–°å‘å‡ºä¿¡æ¯çš„å›å¤ä¿¡æ¯ï¼‰ï¼š

  * å¦‚æœè¿˜æ²¡æ”¶åˆ°ä»»ä½•å›å¤ä¿¡æ¯ï¼Œé‚£ä¹ˆè¯¥æœåŠ¡å™¨ä¼šå‘¨æœŸæ€§ **é‡å‘**  ä¿¡æ¯ã€‚æ•°æ®æœåŠ¡å™¨ `i` æ¯ `patience[i]` ç§’éƒ½ä¼šé‡å‘ä¸€æ¡ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®æœåŠ¡å™¨ `i` åœ¨ä¸Šä¸€æ¬¡å‘é€ä¿¡æ¯ç»™ä¸»æœåŠ¡å™¨åçš„ `patience[i]` ç§’ **å**  ä¼šé‡å‘ä¸€æ¡ä¿¡æ¯ç»™ä¸»æœåŠ¡å™¨ã€‚
  * å¦åˆ™ï¼Œè¯¥æ•°æ®æœåŠ¡å™¨ **ä¸ä¼šé‡å‘**  ä¿¡æ¯ã€‚

å½“æ²¡æœ‰ä»»ä½•ä¿¡æ¯åœ¨çº¿è·¯ä¸Šä¼ è¾“æˆ–è€…åˆ°è¾¾æŸæœåŠ¡å™¨æ—¶ï¼Œè¯¥è®¡ç®—æœºç½‘ç»œå˜ä¸º **ç©ºé—²**  çŠ¶æ€ã€‚

è¯·è¿”å›è®¡ç®—æœºç½‘ç»œå˜ä¸º **ç©ºé—²**  çŠ¶æ€çš„ **æœ€æ—©ç§’æ•°**  ã€‚



**ç¤ºä¾‹ 1ï¼š**

![example 1](https://assets.leetcode.com/uploads/2021/09/22/quiet-place-
example1.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** edges = [[0,1],[1,2]], patience = [0,2,1]
> 
> **è¾“å‡ºï¼š** 8
> 
> **è§£é‡Šï¼š**
> 
> 0 ç§’æœ€å¼€å§‹æ—¶ï¼Œ
> - æ•°æ®æœåŠ¡å™¨ 1 ç»™ä¸»æœåŠ¡å™¨å‘å‡ºä¿¡æ¯ï¼ˆç”¨ 1A è¡¨ç¤ºï¼‰ã€‚
> - æ•°æ®æœåŠ¡å™¨ 2 ç»™ä¸»æœåŠ¡å™¨å‘å‡ºä¿¡æ¯ï¼ˆç”¨ 2A è¡¨ç¤ºï¼‰ã€‚
> 
> 
> 
> 1 ç§’æ—¶ï¼Œ
> - ä¿¡æ¯ 1A åˆ°è¾¾ä¸»æœåŠ¡å™¨ï¼Œä¸»æœåŠ¡å™¨ç«‹åˆ»å¤„ç†ä¿¡æ¯ 1A å¹¶å‘å‡º 1A çš„å›å¤ä¿¡æ¯ã€‚
> - æ•°æ®æœåŠ¡å™¨ 1 è¿˜æ²¡æ”¶åˆ°ä»»ä½•å›å¤ã€‚è·ç¦»ä¸Šæ¬¡å‘å‡ºä¿¡æ¯è¿‡å»äº† 1 ç§’ï¼ˆ1 < patience[1] = 2ï¼‰ï¼Œæ‰€ä»¥ä¸ä¼šé‡å‘ä¿¡æ¯ã€‚
> - æ•°æ®æœåŠ¡å™¨ 2 è¿˜æ²¡æ”¶åˆ°ä»»ä½•å›å¤ã€‚è·ç¦»ä¸Šæ¬¡å‘å‡ºä¿¡æ¯è¿‡å»äº† 1 ç§’ï¼ˆ1 == patience[2] = 1ï¼‰ï¼Œæ‰€ä»¥å®ƒé‡å‘ä¸€æ¡ä¿¡æ¯ï¼ˆç”¨ 2B è¡¨ç¤ºï¼‰ã€‚
> 
> 
> 
> 2 ç§’æ—¶ï¼Œ
> - å›å¤ä¿¡æ¯ 1A åˆ°è¾¾æœåŠ¡å™¨ 1 ï¼ŒæœåŠ¡å™¨ 1 ä¸ä¼šå†é‡å‘ä¿¡æ¯ã€‚
> - ä¿¡æ¯ 2A åˆ°è¾¾ä¸»æœåŠ¡å™¨ï¼Œä¸»æœåŠ¡å™¨ç«‹åˆ»å¤„ç†ä¿¡æ¯ 2A å¹¶å‘å‡º 2A çš„å›å¤ä¿¡æ¯ã€‚
> - æœåŠ¡å™¨ 2 é‡å‘ä¸€æ¡ä¿¡æ¯ï¼ˆç”¨ 2C è¡¨ç¤ºï¼‰ã€‚
> 
> ...
> 
> 4 ç§’æ—¶ï¼Œ
> - å›å¤ä¿¡æ¯ 2A åˆ°è¾¾æœåŠ¡å™¨ 2 ï¼ŒæœåŠ¡å™¨ 2 ä¸ä¼šå†é‡å‘ä¿¡æ¯ã€‚
> 
> ...
> 
> 7 ç§’æ—¶ï¼Œå›å¤ä¿¡æ¯ 2D åˆ°è¾¾æœåŠ¡å™¨ 2 ã€‚
> 
> 
> 
> ä»ç¬¬ 8 ç§’å¼€å§‹ï¼Œä¸å†æœ‰ä»»ä½•ä¿¡æ¯åœ¨æœåŠ¡å™¨ä¹‹é—´ä¼ è¾“ï¼Œä¹Ÿä¸å†æœ‰ä¿¡æ¯åˆ°è¾¾æœåŠ¡å™¨ã€‚
> 
> æ‰€ä»¥ç¬¬ 8 ç§’æ˜¯ç½‘ç»œå˜ç©ºé—²çš„æœ€æ—©æ—¶åˆ»ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![example
2](https://assets.leetcode.com/uploads/2021/09/04/network_a_quiet_place_2.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** edges = [[0,1],[0,2],[1,2]], patience = [0,10,10]
> 
> **è¾“å‡ºï¼š** 3
> 
> **è§£é‡Šï¼š** æ•°æ®æœåŠ¡å™¨ 1 å’Œ 2 ç¬¬ 2 ç§’åˆæ”¶åˆ°å›å¤ä¿¡æ¯ã€‚
> 
> ä»ç¬¬ 3 ç§’å¼€å§‹ï¼Œç½‘ç»œå˜ç©ºé—²ã€‚
> 
> 



**æç¤ºï¼š**

  * `n == patience.length`
  * `2 <= n <= 10^5`
  * `patience[0] == 0`
  * å¯¹äº `1 <= i < n` ï¼Œæ»¡è¶³ `1 <= patience[i] <= 10^5`
  * `1 <= edges.length <= min(105, n * (n - 1) / 2)`
  * `edges[i].length == 2`
  * `0 <= ui, vi < n`
  * `ui != vi`
  * ä¸ä¼šæœ‰é‡è¾¹ã€‚
  * æ¯ä¸ªæœåŠ¡å™¨éƒ½ç›´æ¥æˆ–é—´æ¥ä¸åˆ«çš„æœåŠ¡å™¨ç›¸è¿ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 429 | [N å‰æ ‘çš„å±‚åºéå†](https://leetcode.com/problems/n-ary-tree-level-order-traversal) |  |  [`æ ‘`](/tag/tree.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) | <font color=#ffb800>Medium</font> |
| 559 | [N å‰æ ‘çš„æœ€å¤§æ·±åº¦](https://leetcode.com/problems/maximum-depth-of-n-ary-tree) | [[âœ“]](/problem/0559.md) |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) | <font color=#15bd66>Easy</font> |
| 743 | [ç½‘ç»œå»¶è¿Ÿæ—¶é—´](https://leetcode.com/problems/network-delay-time) |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å›¾`](/tag/graph.md) `2+` | <font color=#ffb800>Medium</font> |