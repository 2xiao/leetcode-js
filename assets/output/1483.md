---
title: 1483. æ ‘èŠ‚ç‚¹çš„ç¬¬ K ä¸ªç¥–å…ˆ
description: LeetCode,1483. æ ‘èŠ‚ç‚¹çš„ç¬¬ K ä¸ªç¥–å…ˆ,æ ‘èŠ‚ç‚¹çš„ç¬¬ K ä¸ªç¥–å…ˆ,Kth Ancestor of a Tree Node,è§£é¢˜æ€è·¯,æ ‘,æ·±åº¦ä¼˜å…ˆæœç´¢,å¹¿åº¦ä¼˜å…ˆæœç´¢,è®¾è®¡,äºŒåˆ†æŸ¥æ‰¾,åŠ¨æ€è§„åˆ’
keywords:
  - LeetCode
  - 1483. æ ‘èŠ‚ç‚¹çš„ç¬¬ K ä¸ªç¥–å…ˆ
  - æ ‘èŠ‚ç‚¹çš„ç¬¬ K ä¸ªç¥–å…ˆ
  - Kth Ancestor of a Tree Node
  - è§£é¢˜æ€è·¯
  - æ ‘
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - è®¾è®¡
  - äºŒåˆ†æŸ¥æ‰¾
  - åŠ¨æ€è§„åˆ’
---

# 1483. æ ‘èŠ‚ç‚¹çš„ç¬¬ K ä¸ªç¥–å…ˆ

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`è®¾è®¡`](/tag/design.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/kth-ancestor-of-a-tree-node) [`LeetCode`](https://leetcode.com/problems/kth-ancestor-of-a-tree-node)

## é¢˜ç›®

You are given a tree with `n` nodes numbered from `0` to `n - 1` in the form
of a parent array `parent` where `parent[i]` is the parent of `ith` node. The
root of the tree is node `0`. Find the `kth` ancestor of a given node.

The `kth` ancestor of a tree node is the `kth` node in the path from that node
to the root node.

Implement the `TreeAncestor` class:

  * `TreeAncestor(int n, int[] parent)` Initializes the object with the number of nodes in the tree and the parent array.
  * `int getKthAncestor(int node, int k)` return the `kth` ancestor of the given node `node`. If there is no such ancestor, return `-1`.



**Example 1:**

![](https://assets.leetcode.com/uploads/2019/08/28/1528_ex1.png)

> 
> 
> 
> 
> 
> **Input**
> 
> ["TreeAncestor", "getKthAncestor", "getKthAncestor", "getKthAncestor"]
> 
> [[7, [-1, 0, 0, 1, 1, 2, 2]], [3, 1], [5, 2], [6, 3]]
> 
> **Output**
> 
> [null, 1, 0, -1]
> 
> 
> 
> **Explanation**
> 
> TreeAncestor treeAncestor = new TreeAncestor(7, [-1, 0, 0, 1, 1, 2, 2]);
> 
> treeAncestor.getKthAncestor(3, 1); // returns 1 which is the parent of 3
> 
> treeAncestor.getKthAncestor(5, 2); // returns 0 which is the grandparent of 5
> 
> treeAncestor.getKthAncestor(6, 3); // returns -1 because there is no such ancestor



**Constraints:**

  * `1 <= k <= n <= 5 * 10^4`
  * `parent.length == n`
  * `parent[0] == -1`
  * `0 <= parent[i] < n` for all `0 < i < n`
  * `0 <= node < n`
  * There will be at most `5 * 10^4` queries.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€æ£µæ ‘ï¼Œæ ‘ä¸Šæœ‰ `n` ä¸ªèŠ‚ç‚¹ï¼ŒæŒ‰ä» `0` åˆ° `n-1` ç¼–å·ã€‚æ ‘ä»¥çˆ¶èŠ‚ç‚¹æ•°ç»„çš„å½¢å¼ç»™å‡ºï¼Œå…¶ä¸­ `parent[i]` æ˜¯èŠ‚ç‚¹ `i`
çš„çˆ¶èŠ‚ç‚¹ã€‚æ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯ç¼–å·ä¸º `0` çš„èŠ‚ç‚¹ã€‚

æ ‘èŠ‚ç‚¹çš„ç¬¬ _`k` _ä¸ªç¥–å…ˆèŠ‚ç‚¹æ˜¯ä»è¯¥èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹è·¯å¾„ä¸Šçš„ç¬¬ `k` ä¸ªèŠ‚ç‚¹ã€‚

å®ç° `TreeAncestor` ç±»ï¼š

  * `TreeAncestorï¼ˆint nï¼Œ int[] parentï¼‰` å¯¹æ ‘å’Œçˆ¶æ•°ç»„ä¸­çš„èŠ‚ç‚¹æ•°åˆå§‹åŒ–å¯¹è±¡ã€‚
  * `getKthAncestor``(int node, int k)` è¿”å›èŠ‚ç‚¹ `node` çš„ç¬¬ `k` ä¸ªç¥–å…ˆèŠ‚ç‚¹ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ç¥–å…ˆèŠ‚ç‚¹ï¼Œè¿”å› `-1` ã€‚



**ç¤ºä¾‹ 1ï¼š**

**![](https://assets.leetcode-cn.com/aliyun-lc-
upload/uploads/2020/06/14/1528_ex1.png)**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> ["TreeAncestor","getKthAncestor","getKthAncestor","getKthAncestor"]
> 
> [[7,[-1,0,0,1,1,2,2]],[3,1],[5,2],[6,3]]
> 
> 
> 
> **è¾“å‡ºï¼š**
> 
> [null,1,0,-1]
> 
> 
> 
> **è§£é‡Šï¼š**
> 
> TreeAncestor treeAncestor = new TreeAncestor(7, [-1, 0, 0, 1, 1, 2, 2]);
> 
> 
> 
> treeAncestor.getKthAncestor(3, 1);  // è¿”å› 1 ï¼Œå®ƒæ˜¯ 3 çš„çˆ¶èŠ‚ç‚¹
> 
> treeAncestor.getKthAncestor(5, 2);  // è¿”å› 0 ï¼Œå®ƒæ˜¯ 5 çš„ç¥–çˆ¶èŠ‚ç‚¹
> 
> treeAncestor.getKthAncestor(6, 3);  // è¿”å› -1 å› ä¸ºä¸å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ç¥–å…ˆèŠ‚ç‚¹
> 
> 



**æç¤ºï¼š**

  * `1 <= k <= n <= 5 * 10^4`
  * `parent[0] == -1` è¡¨ç¤ºç¼–å·ä¸º `0` çš„èŠ‚ç‚¹æ˜¯æ ¹èŠ‚ç‚¹ã€‚
  * å¯¹äºæ‰€æœ‰çš„ `0 < i < n` ï¼Œ`0 <= parent[i] < n` æ€»æˆç«‹
  * `0 <= node < n`
  * è‡³å¤šæŸ¥è¯¢ `5 * 10^4` æ¬¡


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2846 | [è¾¹æƒé‡å‡ç­‰æŸ¥è¯¢](https://leetcode.com/problems/minimum-edge-weight-equilibrium-queries-in-a-tree) |  |  [`æ ‘`](/tag/tree.md) [`å›¾`](/tag/graph.md) [`æ•°ç»„`](/tag/array.md) `1+` | <font color=#ff334b>Hard</font> |