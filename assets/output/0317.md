---
title: 317. ç¦»å»ºç­‘ç‰©æœ€è¿‘çš„è·ç¦» ğŸ”’
description: LeetCode,317. ç¦»å»ºç­‘ç‰©æœ€è¿‘çš„è·ç¦» ğŸ”’,ç¦»å»ºç­‘ç‰©æœ€è¿‘çš„è·ç¦»,Shortest Distance from All Buildings,è§£é¢˜æ€è·¯,å¹¿åº¦ä¼˜å…ˆæœç´¢,æ•°ç»„,çŸ©é˜µ
keywords:
  - LeetCode
  - 317. ç¦»å»ºç­‘ç‰©æœ€è¿‘çš„è·ç¦» ğŸ”’
  - ç¦»å»ºç­‘ç‰©æœ€è¿‘çš„è·ç¦»
  - Shortest Distance from All Buildings
  - è§£é¢˜æ€è·¯
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - æ•°ç»„
  - çŸ©é˜µ
---

# 317. ç¦»å»ºç­‘ç‰©æœ€è¿‘çš„è·ç¦» ğŸ”’

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`æ•°ç»„`](/tag/array.md) [`çŸ©é˜µ`](/tag/matrix.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/shortest-distance-from-all-buildings) [`LeetCode`](https://leetcode.com/problems/shortest-distance-from-all-buildings)

## é¢˜ç›®

You are given an `m x n` grid `grid` of values `0`, `1`, or `2`, where:

  * each `0` marks **an empty land** that you can pass by freely,
  * each `1` marks **a building** that you cannot pass through, and
  * each `2` marks **an obstacle** that you cannot pass through.

You want to build a house on an empty land that reaches all buildings in the
**shortest total travel** distance. You can only move up, down, left, and
right.

Return _the**shortest travel distance** for such a house_. If it is not
possible to build such a house according to the above rules, return `-1`.

The **total travel distance** is the sum of the distances between the houses
of the friends and the meeting point.

The distance is calculated using [Manhattan
Distance](http://en.wikipedia.org/wiki/Taxicab_geometry), where `distance(p1,
p2) = |p2.x - p1.x| + |p2.y - p1.y|`.



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0300-0399/0317.Shortest%20Distance%20from%20All%20Buildings/images/buildings-
grid.jpg)

> Input: grid = [[1,0,2,0,1],[0,0,0,0,0],[0,0,1,0,0]]
> 
> Output: 7
> 
> Explanation: Given three buildings at (0,0), (0,4), (2,2), and an obstacle at (0,2).
> 
> The point (1,2) is an ideal empty land to build a house, as the total travel distance of 3+3+1=7 is minimal.
> 
> So return 7.

**Example 2:**

> Input: grid = [[1,0]]
> 
> Output: 1

**Example 3:**

> Input: grid = [[1]]
> 
> Output: -1

**Constraints:**

  * `m == grid.length`
  * `n == grid[i].length`
  * `1 <= m, n <= 50`
  * `grid[i][j]` is either `0`, `1`, or `2`.
  * There will be **at least one** building in the `grid`.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ª `m Ã— n` çš„ç½‘æ ¼ï¼Œå€¼ä¸º `0` ã€ `1` æˆ– `2` ï¼Œå…¶ä¸­:

  * æ¯ä¸€ä¸ª `0` ä»£è¡¨ä¸€å—ä½ å¯ä»¥è‡ªç”±é€šè¿‡çš„ **ç©ºåœ°**  
  * æ¯ä¸€ä¸ª `1` ä»£è¡¨ä¸€ä¸ªä½ ä¸èƒ½é€šè¿‡çš„ **å»ºç­‘**
  * æ¯ä¸ª `2` æ ‡è®°ä¸€ä¸ªä½ ä¸èƒ½é€šè¿‡çš„ **éšœç¢**  

ä½ æƒ³è¦åœ¨ä¸€å—ç©ºåœ°ä¸Šå»ºé€ ä¸€æ‰€æˆ¿å­ï¼Œåœ¨ **æœ€çŸ­çš„æ€»æ—…è¡Œè·ç¦»** å†…åˆ°è¾¾æ‰€æœ‰çš„å»ºç­‘ã€‚ä½ åªèƒ½ä¸Šä¸‹å·¦å³ç§»åŠ¨ã€‚

è¿”å›åˆ°è¯¥æˆ¿å­çš„ **æœ€çŸ­æ—…è¡Œè·ç¦»** ã€‚å¦‚æœæ ¹æ®ä¸Šè¿°è§„åˆ™æ— æ³•å»ºé€ è¿™æ ·çš„æˆ¿å­ï¼Œåˆ™è¿”å› `-1` ã€‚

**æ€»æ—…è¡Œè·ç¦»  **æ˜¯æœ‹å‹ä»¬å®¶åˆ°èšä¼šåœ°ç‚¹çš„è·ç¦»ä¹‹å’Œã€‚

ä½¿ç”¨ **æ›¼å“ˆé¡¿è·ç¦»**  è®¡ç®—è·ç¦»ï¼Œå…¶ä¸­è·ç¦» `(p1, p2) = |p2.x - p1.x | + | p2.y - p1.y |` ã€‚



**ç¤ºä¾‹   1ï¼š**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0300-0399/0317.Shortest%20Distance%20from%20All%20Buildings/images/buildings-
grid.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** grid = [[1,0,2,0,1],[0,0,0,0,0],[0,0,1,0,0]]
> 
> **è¾“å‡ºï¼š** 7 
> 
> **è§£æï¼š** ç»™å®šä¸‰ä¸ªå»ºç­‘ç‰© (0,0)ã€(0,4) å’Œ (2,2) ä»¥åŠä¸€ä¸ªä½äº (0,2) çš„éšœç¢ç‰©ã€‚
> 
> ç”±äºæ€»è·ç¦»ä¹‹å’Œ 3+3+1=7 æœ€ä¼˜ï¼Œæ‰€ä»¥ä½ç½® (1,2) æ˜¯ç¬¦åˆè¦æ±‚çš„æœ€ä¼˜åœ°ç‚¹ã€‚
> 
> æ•…è¿”å›7ã€‚
> 
> 

**ç¤ºä¾‹  2:**

> 
> 
> 
> 
> 
> **è¾“å…¥:** grid = [[1,0]]
> 
> **è¾“å‡º:** 1
> 
> 

**ç¤ºä¾‹ 3:**

> 
> 
> 
> 
> 
> **è¾“å…¥:** grid = [[1]]
> 
> **è¾“å‡º:** -1
> 
> 



**æç¤º:**

  * `m == grid.length`
  * `n == grid[i].length`
  * `1 <= m, n <= 50`
  * `grid[i][j]` æ˜¯ `0`, `1` æˆ– `2`
  * `grid` ä¸­ **è‡³å°‘**  æœ‰ **ä¸€å¹¢** å»ºç­‘


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 286 | [å¢™ä¸é—¨ ğŸ”’](https://leetcode.com/problems/walls-and-gates) |  |  [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`æ•°ç»„`](/tag/array.md) [`çŸ©é˜µ`](/tag/matrix.md) | <font color=#ffb800>Medium</font> |
| 296 | [æœ€ä½³çš„ç¢°å¤´åœ°ç‚¹ ğŸ”’](https://leetcode.com/problems/best-meeting-point) |  |  [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`çŸ©é˜µ`](/tag/matrix.md) `1+` | <font color=#ff334b>Hard</font> |
| 1162 | [åœ°å›¾åˆ†æ](https://leetcode.com/problems/as-far-from-land-as-possible) |  |  [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) `1+` | <font color=#ffb800>Medium</font> |