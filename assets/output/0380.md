# [380. O(1) æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ ](https://leetcode.com/problems/insert-delete-getrandom-o1)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`æ•°å­¦`](/leetcode/outline/tag/math.md) [`éšæœºåŒ–`](/leetcode/outline/tag/randomized.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/insert-delete-getrandom-o1)

## é¢˜ç›®

Implement the `RandomizedSet` class:

  * `RandomizedSet()` Initializes the `RandomizedSet` object.
  * `bool insert(int val)` Inserts an item `val` into the set if not present. Returns `true` if the item was not present, `false` otherwise.
  * `bool remove(int val)` Removes an item `val` from the set if present. Returns `true` if the item was present, `false` otherwise.
  * `int getRandom()` Returns a random element from the current set of elements (it's guaranteed that at least one element exists when this method is called). Each element must have the **same probability** of being returned.

You must implement the functions of the class such that each function works in
**average**  `O(1)` time complexity.



**Example 1:**

> 
> 
> 
> 
> 
> **Input**
> 
> ["RandomizedSet", "insert", "remove", "insert", "getRandom", "remove", "insert", "getRandom"]
> 
> [[], [1], [2], [2], [], [1], [2], []]
> 
> **Output**
> 
> [null, true, false, true, 2, true, false, 2]
> 
> 
> 
> **Explanation**
> 
> RandomizedSet randomizedSet = new RandomizedSet();
> 
> randomizedSet.insert(1); // Inserts 1 to the set. Returns true as 1 was inserted successfully.
> 
> randomizedSet.remove(2); // Returns false as 2 does not exist in the set.
> 
> randomizedSet.insert(2); // Inserts 2 to the set, returns true. Set now contains [1,2].
> 
> randomizedSet.getRandom(); // getRandom() should return either 1 or 2 randomly.
> 
> randomizedSet.remove(1); // Removes 1 from the set, returns true. Set now contains [2].
> 
> randomizedSet.insert(2); // 2 was already in the set, so return false.
> 
> randomizedSet.getRandom(); // Since 2 is the only number in the set, getRandom() will always return 2.

**Constraints:**

  * `-231 <= val <= 231 - 1`
  * At most `2 * ``10^5` calls will be made to `insert`, `remove`, and `getRandom`.
  * There will be **at least one** element in the data structure when `getRandom` is called.


## é¢˜ç›®å¤§æ„

å®ç°`RandomizedSet` ç±»ï¼š

  * `RandomizedSet()` åˆå§‹åŒ– `RandomizedSet` å¯¹è±¡
  * `bool insert(int val)` å½“å…ƒç´  `val` ä¸å­˜åœ¨æ—¶ï¼Œå‘é›†åˆä¸­æ’å…¥è¯¥é¡¹ï¼Œå¹¶è¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
  * `bool remove(int val)` å½“å…ƒç´  `val` å­˜åœ¨æ—¶ï¼Œä»é›†åˆä¸­ç§»é™¤è¯¥é¡¹ï¼Œå¹¶è¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
  * `int getRandom()` éšæœºè¿”å›ç°æœ‰é›†åˆä¸­çš„ä¸€é¡¹ï¼ˆæµ‹è¯•ç”¨ä¾‹ä¿è¯è°ƒç”¨æ­¤æ–¹æ³•æ—¶é›†åˆä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚æ¯ä¸ªå…ƒç´ åº”è¯¥æœ‰ **ç›¸åŒçš„æ¦‚ç‡** è¢«è¿”å›ã€‚

ä½ å¿…é¡»å®ç°ç±»çš„æ‰€æœ‰å‡½æ•°ï¼Œå¹¶æ»¡è¶³æ¯ä¸ªå‡½æ•°çš„ **å¹³å‡** æ—¶é—´å¤æ‚åº¦ä¸º `O(1)` ã€‚



**ç¤ºä¾‹ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥**
> 
> ["RandomizedSet", "insert", "remove", "insert", "getRandom", "remove", "insert", "getRandom"]
> 
> [[], [1], [2], [2], [], [1], [2], []]
> 
> **è¾“å‡º**
> 
> [null, true, false, true, 2, true, false, 2]
> 
> 
> 
> **è§£é‡Š**
> 
> RandomizedSet randomizedSet = new RandomizedSet();
> 
> randomizedSet.insert(1); // å‘é›†åˆä¸­æ’å…¥ 1 ã€‚è¿”å› true è¡¨ç¤º 1 è¢«æˆåŠŸåœ°æ’å…¥ã€‚
> 
> randomizedSet.remove(2); // è¿”å› false ï¼Œè¡¨ç¤ºé›†åˆä¸­ä¸å­˜åœ¨ 2 ã€‚
> 
> randomizedSet.insert(2); // å‘é›†åˆä¸­æ’å…¥ 2 ã€‚è¿”å› true ã€‚é›†åˆç°åœ¨åŒ…å« [1,2] ã€‚
> 
> randomizedSet.getRandom(); // getRandom åº”éšæœºè¿”å› 1 æˆ– 2 ã€‚
> 
> randomizedSet.remove(1); // ä»é›†åˆä¸­ç§»é™¤ 1 ï¼Œè¿”å› true ã€‚é›†åˆç°åœ¨åŒ…å« [2] ã€‚
> 
> randomizedSet.insert(2); // 2 å·²åœ¨é›†åˆä¸­ï¼Œæ‰€ä»¥è¿”å› false ã€‚
> 
> randomizedSet.getRandom(); // ç”±äº 2 æ˜¯é›†åˆä¸­å”¯ä¸€çš„æ•°å­—ï¼ŒgetRandom æ€»æ˜¯è¿”å› 2 ã€‚
> 
> 



**æç¤ºï¼š**

  * `-231 <= val <= 231 - 1`
  * æœ€å¤šè°ƒç”¨ `insert`ã€`remove` å’Œ `getRandom` å‡½æ•° `2 * ``10^5` æ¬¡
  * åœ¨è°ƒç”¨ `getRandom` æ–¹æ³•æ—¶ï¼Œæ•°æ®ç»“æ„ä¸­ **è‡³å°‘å­˜åœ¨ä¸€ä¸ª** å…ƒç´ ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 381 | [O(1) æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´  - å…è®¸é‡å¤](https://leetcode.com/problems/insert-delete-getrandom-o1-duplicates-allowed) |  |  [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) `2+` | <font color=#ff334b>Hard</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
