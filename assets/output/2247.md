# [2247. K æ¡é«˜é€Ÿå…¬è·¯çš„æœ€å¤§æ—…è¡Œè´¹ç”¨](https://leetcode.com/problems/maximum-cost-of-trip-with-k-highways)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`å›¾`](/tag/graph.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`çŠ¶æ€å‹ç¼©`](/tag/bitmask.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/maximum-cost-of-trip-with-k-highways)

## é¢˜ç›®

A series of highways connect `n` cities numbered from `0` to `n - 1`. You are
given a 2D integer array `highways` where `highways[i] = [city1i, city2i,
tolli]` indicates that there is a highway that connects `city1i` and `city2i`,
allowing a car to go from `city1i` to `city2i` and **vice versa** for a cost
of `tolli`.

You are also given an integer `k`. You are going on a trip that crosses
**exactly** `k` highways. You may start at any city, but you may only visit
each city **at most** once during your trip.

Return _the**maximum** cost of your trip. If there is no trip that meets the
requirements, return _`-1` _._



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2200-2299/2247.Maximum%20Cost%20of%20Trip%20With%20K%20Highways/images/image-20220418173304-1.png)

> Input: n = 5, highways = [[0,1,4],[2,1,3],[1,4,11],[3,2,3],[3,4,2]], k = 3
> 
> Output: 17
> 
> Explanation:
> 
> One possible trip is to go from 0 -> 1 -> 4 -> 3. The cost of this trip is 4 + 11 + 2 = 17.
> 
> Another possible trip is to go from 4 -> 1 -> 2 -> 3. The cost of this trip is 11 + 3 + 3 = 17.
> 
> It can be proven that 17 is the maximum possible cost of any valid trip.
> 
> 
> 
> Note that the trip 4 -> 1 -> 0 -> 1 is not allowed because you visit the city 1 twice.
> 
> 

**Example 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2200-2299/2247.Maximum%20Cost%20of%20Trip%20With%20K%20Highways/images/image-20220418173342-2.png)

> Input: n = 4, highways = [[0,1,3],[2,3,2]], k = 2
> 
> Output: -1
> 
> Explanation: There are no valid trips of length 2, so return -1.

**Constraints:**

  * `2 <= n <= 15`
  * `1 <= highways.length <= 50`
  * `highways[i].length == 3`
  * `0 <= city1i, city2i <= n - 1`
  * `city1i != city2i`
  * `0 <= tolli <= 100`
  * `1 <= k <= 50`
  * There are no duplicate highways.


## é¢˜ç›®å¤§æ„

ä¸€ç³»åˆ—é«˜é€Ÿå…¬è·¯è¿æ¥ä» `0` åˆ° `n - 1` çš„ `n` ä¸ªåŸå¸‚ã€‚ç»™å®šä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `highways`ï¼Œå…¶ä¸­ `highways[i] =
[city1i, city2i, tolli]` è¡¨ç¤ºæœ‰ä¸€æ¡é«˜é€Ÿå…¬è·¯è¿æ¥ `city1i` å’Œ`city2i`ï¼Œå…è®¸ä¸€è¾†æ±½è½¦ä» `city1i` å‰å¾€
`city2i`ï¼Œ**åä¹‹äº¦ç„¶** ï¼Œè´¹ç”¨ä¸º `tolli`ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `k`ï¼Œä½ è¦**æ­£å¥½** ç»è¿‡ `k` æ¡å…¬è·¯ã€‚ä½ å¯ä»¥ä»ä»»ä½•ä¸€ä¸ªåŸå¸‚å‡ºå‘ï¼Œä½†åœ¨æ—…é€”ä¸­æ¯ä¸ªåŸå¸‚**æœ€å¤š** åªèƒ½è®¿é—®ä¸€æ¬¡ã€‚

è¿”å› _æ‚¨æ—…è¡Œçš„æœ€å¤§è´¹ç”¨ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆè¦æ±‚çš„è¡Œç¨‹ï¼Œåˆ™è¿”å›`-1`ã€‚_

**ç¤ºä¾‹ 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2200-2299/2247.Maximum%20Cost%20of%20Trip%20With%20K%20Highways/images/image-20220418173304-1.png)

> 
> 
> 
> 
> 
> **è¾“å…¥:** n = 5, highways = [[0,1,4],[2,1,3],[1,4,11],[3,2,3],[3,4,2]], k = 3
> 
> **è¾“å‡º:** 17
> 
> **è§£é‡Š:**
> 
> ä¸€ä¸ªå¯èƒ½çš„è·¯å¾„æ˜¯ä» 0 -> 1 -> 4 -> 3ã€‚è¿™æ¬¡æ—…è¡Œçš„è´¹ç”¨æ˜¯ 4 + 11 + 2 = 17ã€‚
> 
> å¦ä¸€ç§å¯èƒ½çš„è·¯å¾„æ˜¯ä» 4 -> 1 -> 2 -> 3ã€‚è¿™æ¬¡æ—…è¡Œçš„è´¹ç”¨æ˜¯ 11 + 3 + 3 = 17ã€‚
> 
> å¯ä»¥è¯æ˜ï¼Œ17 æ˜¯ä»»ä½•æœ‰æ•ˆè¡Œç¨‹çš„æœ€å¤§å¯èƒ½è´¹ç”¨ã€‚
> 
> æ³¨æ„ï¼Œæ—…è¡Œ 4 -> 1 -> 0 -> 1 æ˜¯ä¸å…è®¸çš„ï¼Œå› ä¸ºä½ è®¿é—®äº†åŸå¸‚ 1 ä¸¤æ¬¡ã€‚
> 
> 



**ç¤ºä¾‹ 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2200-2299/2247.Maximum%20Cost%20of%20Trip%20With%20K%20Highways/images/image-20220418173342-2.png)

> 
> 
> 
> 
> 
> **è¾“å…¥:** n = 4, highways = [[0,1,3],[2,3,2]], k = 2
> 
> **è¾“å‡º:** -1
> 
> **è§£é‡Š:** æ²¡æœ‰é•¿åº¦ä¸º 2 çš„æœ‰æ•ˆè¡Œç¨‹ï¼Œå› æ­¤è¿”å›-1ã€‚
> 
> 



**æç¤º:**

  * `2 <= n <= 15`
  * `1 <= highways.length <= 50`
  * `highways[i].length == 3`
  * `0 <= city1i, city2i <= n - 1`
  * `city1i != city2i`
  * `0 <= tolli <= 100`
  * `1 <= k <= 50`
  * æ²¡æœ‰é‡å¤çš„é«˜é€Ÿå…¬è·¯ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 1928 | [è§„å®šæ—¶é—´å†…åˆ°è¾¾ç»ˆç‚¹çš„æœ€å°èŠ±è´¹](https://leetcode.com/problems/minimum-cost-to-reach-destination-in-time) |  |  [`å›¾`](/tag/graph.md) [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ff334b>Hard</font> |
| 2093 | [å‰å¾€ç›®æ ‡åŸå¸‚çš„æœ€å°è´¹ç”¨](https://leetcode.com/problems/minimum-cost-to-reach-city-with-discounts) |  |  [`å›¾`](/tag/graph.md) [`æœ€çŸ­è·¯`](/tag/shortest-path.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md) | <font color=#ffb800>Medium</font> |