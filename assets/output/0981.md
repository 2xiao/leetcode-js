---
title: 981. åŸºäºæ—¶é—´çš„é”®å€¼å­˜å‚¨
description: LeetCode,981. åŸºäºæ—¶é—´çš„é”®å€¼å­˜å‚¨,åŸºäºæ—¶é—´çš„é”®å€¼å­˜å‚¨,Time Based Key-Value Store,è§£é¢˜æ€è·¯,è®¾è®¡,å“ˆå¸Œè¡¨,å­—ç¬¦ä¸²,äºŒåˆ†æŸ¥æ‰¾
keywords:
  - LeetCode
  - 981. åŸºäºæ—¶é—´çš„é”®å€¼å­˜å‚¨
  - åŸºäºæ—¶é—´çš„é”®å€¼å­˜å‚¨
  - Time Based Key-Value Store
  - è§£é¢˜æ€è·¯
  - è®¾è®¡
  - å“ˆå¸Œè¡¨
  - å­—ç¬¦ä¸²
  - äºŒåˆ†æŸ¥æ‰¾
---

# 981. åŸºäºæ—¶é—´çš„é”®å€¼å­˜å‚¨

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/tag/design.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/time-based-key-value-store) [`LeetCode`](https://leetcode.com/problems/time-based-key-value-store)

## é¢˜ç›®

Design a time-based key-value data structure that can store multiple values
for the same key at different time stamps and retrieve the key's value at a
certain timestamp.

Implement the `TimeMap` class:

  * `TimeMap()` Initializes the object of the data structure.
  * `void set(String key, String value, int timestamp)` Stores the key `key` with the value `value` at the given time `timestamp`.
  * `String get(String key, int timestamp)` Returns a value such that `set` was called previously, with `timestamp_prev <= timestamp`. If there are multiple such values, it returns the value associated with the largest `timestamp_prev`. If there are no values, it returns `""`.



**Example 1:**

> 
> 
> 
> 
> 
> **Input**
> 
> ["TimeMap", "set", "get", "get", "set", "get", "get"]
> 
> [[], ["foo", "bar", 1], ["foo", 1], ["foo", 3], ["foo", "bar2", 4], ["foo", 4], ["foo", 5]]
> 
> **Output**
> 
> [null, null, "bar", "bar", null, "bar2", "bar2"]
> 
> 
> 
> **Explanation**
> 
> TimeMap timeMap = new TimeMap();
> 
> timeMap.set("foo", "bar", 1);  // store the key "foo" and value "bar" along with timestamp = 1.
> 
> timeMap.get("foo", 1);> 
> > 
>  // return "bar"
> 
> timeMap.get("foo", 3);> 
> > 
>  // return "bar", since there is no value corresponding to foo at timestamp 3 and timestamp 2, then the only value is at timestamp 1 is "bar".
> 
> timeMap.set("foo", "bar2", 4); // store the key "foo" and value "bar2" along with timestamp = 4.
> 
> timeMap.get("foo", 4);> 
> > 
>  // return "bar2"
> 
> timeMap.get("foo", 5);> 
> > 
>  // return "bar2"

**Constraints:**

  * `1 <= key.length, value.length <= 100`
  * `key` and `value` consist of lowercase English letters and digits.
  * `1 <= timestamp <= 10^7`
  * All the timestamps `timestamp` of `set` are strictly increasing.
  * At most `2 * 10^5` calls will be made to `set` and `get`.


## é¢˜ç›®å¤§æ„

è®¾è®¡ä¸€ä¸ªåŸºäºæ—¶é—´çš„é”®å€¼æ•°æ®ç»“æ„ï¼Œè¯¥ç»“æ„å¯ä»¥åœ¨ä¸åŒæ—¶é—´æˆ³å­˜å‚¨å¯¹åº”åŒä¸€ä¸ªé”®çš„å¤šä¸ªå€¼ï¼Œå¹¶é’ˆå¯¹ç‰¹å®šæ—¶é—´æˆ³æ£€ç´¢é”®å¯¹åº”çš„å€¼ã€‚

å®ç° `TimeMap` ç±»ï¼š

  * `TimeMap()` åˆå§‹åŒ–æ•°æ®ç»“æ„å¯¹è±¡
  * `void set(String key, String value, int timestamp)` å­˜å‚¨ç»™å®šæ—¶é—´æˆ³ `timestamp` æ—¶çš„é”® `key` å’Œå€¼ `value`ã€‚
  * `String get(String key, int timestamp)` è¿”å›ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼åœ¨ä¹‹å‰è°ƒç”¨äº† `set`ï¼Œå…¶ä¸­ `timestamp_prev <= timestamp` ã€‚å¦‚æœæœ‰å¤šä¸ªè¿™æ ·çš„å€¼ï¼Œå®ƒå°†è¿”å›ä¸æœ€å¤§  `timestamp_prev` å…³è”çš„å€¼ã€‚å¦‚æœæ²¡æœ‰å€¼ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ï¼ˆ`""`ï¼‰ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> ["TimeMap", "set", "get", "get", "set", "get", "get"]
> 
> [[], ["foo", "bar", 1], ["foo", 1], ["foo", 3], ["foo", "bar2", 4], ["foo", 4], ["foo", 5]]
> 
> **è¾“å‡ºï¼š**
> 
> [null, null, "bar", "bar", null, "bar2", "bar2"]
> 
> 
> 
> **è§£é‡Šï¼š**
> 
> TimeMap timeMap = new TimeMap();
> 
> timeMap.set("foo", "bar", 1);  // å­˜å‚¨é”® "foo" å’Œå€¼ "bar" ï¼Œæ—¶é—´æˆ³ timestamp = 1   
> 
> timeMap.get("foo", 1);> 
> > 
>  // è¿”å› "bar"
> 
> timeMap.get("foo", 3);> 
> > 
>  // è¿”å› "bar", å› ä¸ºåœ¨æ—¶é—´æˆ³ 3 å’Œæ—¶é—´æˆ³ 2 å¤„æ²¡æœ‰å¯¹åº” "foo" çš„å€¼ï¼Œæ‰€ä»¥å”¯ä¸€çš„å€¼ä½äºæ—¶é—´æˆ³ 1 å¤„ï¼ˆå³ "bar"ï¼‰ ã€‚
> 
> timeMap.set("foo", "bar2", 4); // å­˜å‚¨é”® "foo" å’Œå€¼ "bar2" ï¼Œæ—¶é—´æˆ³ timestamp = 4  
> 
> timeMap.get("foo", 4);> 
> > 
>  // è¿”å› "bar2"
> 
> timeMap.get("foo", 5);> 
> > 
>  // è¿”å› "bar2"
> 
> 



**æç¤ºï¼š**

  * `1 <= key.length, value.length <= 100`
  * `key` å’Œ `value` ç”±å°å†™è‹±æ–‡å­—æ¯å’Œæ•°å­—ç»„æˆ
  * `1 <= timestamp <= 10^7`
  * `set` æ“ä½œä¸­çš„æ—¶é—´æˆ³ `timestamp` éƒ½æ˜¯ä¸¥æ ¼é€’å¢çš„
  * æœ€å¤šè°ƒç”¨ `set` å’Œ `get` æ“ä½œ `2 * 10^5` æ¬¡


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2034 | [è‚¡ç¥¨ä»·æ ¼æ³¢åŠ¨](https://leetcode.com/problems/stock-price-fluctuation) |  |  [`è®¾è®¡`](/tag/design.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æ•°æ®æµ`](/tag/data-stream.md) `2+` | <font color=#ffb800>Medium</font> |