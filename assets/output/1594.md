# [1594. çŸ©é˜µçš„æœ€å¤§éè´Ÿç§¯](https://leetcode.com/problems/maximum-non-negative-product-in-a-matrix)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) [`çŸ©é˜µ`](/leetcode/outline/tag/matrix.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/maximum-non-negative-product-in-a-matrix)


## é¢˜ç›®

You are given a `m x n` matrix `grid`. Initially, you are located at the top-
left corner `(0, 0)`, and in each step, you can only **move right or down** in
the matrix.

Among all possible paths starting from the top-left corner `(0, 0)` and ending
in the bottom-right corner `(m - 1, n - 1)`, find the path with the **maximum
non-negative product**. The product of a path is the product of all integers
in the grid cells visited along the path.

Return the _maximum non-negative product**modulo** _`109 + 7`. _If the maximum
product is**negative** , return _`-1`.

Notice that the modulo is performed after getting the maximum product.



**Example 1:**

![](https://assets.leetcode.com/uploads/2021/12/23/product1.jpg)

> Input: grid = [[-1,-2,-3],[-2,-3,-3],[-3,-3,-2]]
> 
> Output: -1
> 
> Explanation: It is not possible to get non-negative product in the path from (0, 0) to (2, 2), so return -1.

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/12/23/product2.jpg)

> Input: grid = [[1,-2,1],[1,-2,1],[3,-4,1]]
> 
> Output: 8
> 
> Explanation: Maximum non-negative product is shown (1 * 1 * -2 * -4 * 1 = 8).

**Example 3:**

![](https://assets.leetcode.com/uploads/2021/12/23/product3.jpg)

> Input: grid = [[1,3],[0,-4]]
> 
> Output: 0
> 
> Explanation: Maximum non-negative product is shown (1 * 0 * -4 = 0).

**Constraints:**

  * `m == grid.length`
  * `n == grid[i].length`
  * `1 <= m, n <= 15`
  * `-4 <= grid[i][j] <= 4`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º `m x n` çš„çŸ©é˜µ `grid` ã€‚æœ€åˆï¼Œä½ ä½äºå·¦ä¸Šè§’ `(0, 0)` ï¼Œæ¯ä¸€æ­¥ï¼Œä½ å¯ä»¥åœ¨çŸ©é˜µä¸­ **å‘å³** æˆ– **å‘ä¸‹**
ç§»åŠ¨ã€‚

åœ¨ä»å·¦ä¸Šè§’ `(0, 0)` å¼€å§‹åˆ°å³ä¸‹è§’ `(m - 1, n - 1)` ç»“æŸçš„æ‰€æœ‰è·¯å¾„ä¸­ï¼Œæ‰¾å‡ºå…·æœ‰ **æœ€å¤§éè´Ÿç§¯**
çš„è·¯å¾„ã€‚è·¯å¾„çš„ç§¯æ˜¯æ²¿è·¯å¾„è®¿é—®çš„å•å…ƒæ ¼ä¸­æ‰€æœ‰æ•´æ•°çš„ä¹˜ç§¯ã€‚

è¿”å› **æœ€å¤§éè´Ÿç§¯** å¯¹** __`109 + 7`** **å–ä½™** çš„ç»“æœã€‚å¦‚æœæœ€å¤§ç§¯ä¸º **è´Ÿæ•°** ï¼Œåˆ™è¿”å› __`-1` ã€‚

**æ³¨æ„ï¼Œ** å–ä½™æ˜¯åœ¨å¾—åˆ°æœ€å¤§ç§¯ä¹‹åæ‰§è¡Œçš„ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/12/23/product1.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** grid = [[-1,-2,-3],[-2,-3,-3],[-3,-3,-2]]
> 
> **è¾“å‡ºï¼š** -1
> 
> **è§£é‡Šï¼š** ä» (0, 0) åˆ° (2, 2) çš„è·¯å¾„ä¸­æ— æ³•å¾—åˆ°éè´Ÿç§¯ï¼Œæ‰€ä»¥è¿”å› -1 ã€‚

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/12/23/product2.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** grid = [[1,-2,1],[1,-2,1],[3,-4,1]]
> 
> **è¾“å‡ºï¼š** 8
> 
> **è§£é‡Šï¼š** æœ€å¤§éè´Ÿç§¯å¯¹åº”çš„è·¯å¾„å¦‚å›¾æ‰€ç¤º (1 * 1 * -2 * -4 * 1 = 8)
> 
> 

**ç¤ºä¾‹ 3ï¼š**

![](https://assets.leetcode.com/uploads/2021/12/23/product3.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** grid = [[1,3],[0,-4]]
> 
> **è¾“å‡ºï¼š** 0
> 
> **è§£é‡Šï¼š** æœ€å¤§éè´Ÿç§¯å¯¹åº”çš„è·¯å¾„å¦‚å›¾æ‰€ç¤º (1 * 0 * -4 = 0)
> 
> 



**æç¤ºï¼š**

  * `m == grid.length`
  * `n == grid[i].length`
  * `1 <= m, n <= 15`
  * `-4 <= grid[i][j] <= 4`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```