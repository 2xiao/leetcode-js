# [3077. K ä¸ªä¸ç›¸äº¤å­æ•°ç»„çš„æœ€å¤§èƒ½é‡å€¼](https://2xiao.github.io/leetcode-js/problem/3077.html)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/maximum-strength-of-k-disjoint-subarrays) [`LeetCode`](https://leetcode.com/problems/maximum-strength-of-k-disjoint-subarrays)

## é¢˜ç›®

You are given an array of integers `nums` with length `n`, and a positive
**odd** integer `k`.

Select exactly **`k`** disjoint subarrays **`sub 1, sub2, ..., subk`** from
`nums` such that the last element of `subi` appears before the first element
of `sub{i+1}` for all `1 <= i <= k-1`. The goal is to maximize their combined
strength.

The strength of the selected subarrays is defined as:

`strength = k * sum(sub1)- (k - 1) * sum(sub2) + (k - 2) * sum(sub3) - ... - 2
* sum(sub{k-1}) + sum(subk)`

where **`sum(sub i)`** is the sum of the elements in the `i`-th subarray.

Return the **maximum** possible strength that can be obtained from selecting
exactly **`k`** disjoint subarrays from `nums`.

**Note** that the chosen subarrays **don 't** need to cover the entire array.



**Example 1:**

**Input:** nums = [1,2,3,-1,2], k = 3

**Output:** 22

**Explanation:**

The best possible way to select 3 subarrays is: nums[0..2], nums[3..3], and
nums[4..4]. The strength is calculated as follows:

`strength = 3 * (1 + 2 + 3) - 2 * (-1) + 2 = 22`



**Example 2:**

**Input:** nums = [12,-2,-2,-2,-2], k = 5

**Output:** 64

**Explanation:**

The only possible way to select 5 disjoint subarrays is: nums[0..0],
nums[1..1], nums[2..2], nums[3..3], and nums[4..4]. The strength is calculated
as follows:

`strength = 5 * 12 - 4 * (-2) + 3 * (-2) - 2 * (-2) + (-2) = 64`

**Example 3:**

**Input:** nums = [-1,-2,-3], k = 1

**Output:** -1

**Explanation:**

The best possible way to select 1 subarray is: nums[0..0]. The strength is -1.



**Constraints:**

  * `1 <= n <= 10^4`
  * `-10^9 <= nums[i] <= 10^9`
  * `1 <= k <= n`
  * `1 <= n * k <= 10^6`
  * `k` is odd.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` ä¸‹æ ‡ä» **0**  å¼€å§‹çš„æ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ª **æ­£å¥‡æ•°**  æ•´æ•° `k` ã€‚

`x` ä¸ªå­æ•°ç»„çš„èƒ½é‡å€¼å®šä¹‰ä¸º `strength = sum[1] * x - sum[2] * (x - 1) + sum[3] * (x - 2) -
sum[4] * (x - 3) + ... + sum[x] * 1` ï¼Œå…¶ä¸­ `sum[i]` æ˜¯ç¬¬ `i` ä¸ªå­æ•°ç»„çš„å’Œã€‚æ›´æ­£å¼çš„ï¼Œèƒ½é‡å€¼æ˜¯æ»¡è¶³ `1
<= i <= x` çš„æ‰€æœ‰ `i` å¯¹åº”çš„ `(-1)i+1 * sum[i] * (x - i + 1)` ä¹‹å’Œã€‚

ä½ éœ€è¦åœ¨ `nums` ä¸­é€‰æ‹© `k` ä¸ª **ä¸ç›¸äº¤****å­æ•°ç»„**  ï¼Œä½¿å¾— **èƒ½é‡å€¼æœ€å¤§**  ã€‚

è¯·ä½ è¿”å›å¯ä»¥å¾—åˆ°çš„ **æœ€å¤§****èƒ½é‡å€¼**  ã€‚

**æ³¨æ„** ï¼Œé€‰å‡ºæ¥çš„æ‰€æœ‰å­æ•°ç»„ **ä¸**  éœ€è¦è¦†ç›–æ•´ä¸ªæ•°ç»„ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [1,2,3,-1,2], k = 3
> 
> **è¾“å‡ºï¼š** 22
> 
> **è§£é‡Šï¼š** é€‰æ‹© 3 ä¸ªå­æ•°ç»„çš„æœ€å¥½æ–¹å¼æ˜¯é€‰æ‹©ï¼šnums[0..2] ï¼Œnums[3..3] å’Œ nums[4..4] ã€‚èƒ½é‡å€¼ä¸º (1 + 2 + 3) * 3 - (-1) * 2 + 2 * 1 = 22 ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [12,-2,-2,-2,-2], k = 5
> 
> **è¾“å‡ºï¼š** 64
> 
> **è§£é‡Šï¼š** å”¯ä¸€ä¸€ç§é€‰ 5 ä¸ªä¸ç›¸äº¤å­æ•°ç»„çš„æ–¹æ¡ˆæ˜¯ï¼šnums[0..0] ï¼Œnums[1..1] ï¼Œnums[2..2] ï¼Œnums[3..3] å’Œ nums[4..4] ã€‚èƒ½é‡å€¼ä¸º 12 * 5 - (-2) * 4 + (-2) * 3 - (-2) * 2 + (-2) * 1 = 64 ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [-1,-2,-3], k = 1
> 
> **è¾“å‡ºï¼š** -1
> 
> **è§£é‡Šï¼š** é€‰æ‹© 1 ä¸ªå­æ•°ç»„çš„æœ€ä¼˜æ–¹æ¡ˆæ˜¯ï¼šnums[0..0] ã€‚èƒ½é‡å€¼ä¸º -1 ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= n <= 10^4`
  * `-10^9 <= nums[i] <= 10^9`
  * `1 <= k <= n`
  * `1 <= n * k <= 10^6`
  * `k` æ˜¯å¥‡æ•°ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 915 | [åˆ†å‰²æ•°ç»„](https://leetcode.com/problems/partition-array-into-disjoint-intervals) |  |  [`æ•°ç»„`](/tag/array.md) | <font color=#ffb800>Medium</font> |
| 2708 | [ä¸€ä¸ªå°ç»„çš„æœ€å¤§å®åŠ›å€¼](https://leetcode.com/problems/maximum-strength-of-a-group) |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) `4+` | <font color=#ffb800>Medium</font> |