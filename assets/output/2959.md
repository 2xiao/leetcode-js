# [2959. å…³é—­åˆ†éƒ¨çš„å¯è¡Œé›†åˆæ•°ç›®](https://2xiao.github.io/leetcode-js/problem/2959.html)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`å›¾`](/tag/graph.md) [`æšä¸¾`](/tag/enumeration.md) [`æœ€çŸ­è·¯`](/tag/shortest-path.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/number-of-possible-sets-of-closing-branches) [`LeetCode`](https://leetcode.com/problems/number-of-possible-sets-of-closing-branches)

## é¢˜ç›®

There is a company with `n` branches across the country, some of which are
connected by roads. Initially, all branches are reachable from each other by
traveling some roads.

The company has realized that they are spending an excessive amount of time
traveling between their branches. As a result, they have decided to close down
some of these branches (**possibly none**). However, they want to ensure that
the remaining branches have a distance of at most `maxDistance` from each
other.

The **distance** between two branches is the **minimum** total traveled length
needed to reach one branch from another.

You are given integers `n`, `maxDistance`, and a **0-indexed** 2D array
`roads`, where `roads[i] = [ui, vi, wi]` represents the **undirected** road
between branches `ui` and `vi` with length `wi`.

Return _the number of possible sets of closing branches, so that any branch
has a distance of at most_`maxDistance` _from any other_.

**Note** that, after closing a branch, the company will no longer have access
to any roads connected to it.

**Note** that, multiple roads are allowed.



**Example 1:**

![](https://assets.leetcode.com/uploads/2023/11/08/example11.png)

> Input: n = 3, maxDistance = 5, roads = [[0,1,2],[1,2,10],[0,2,10]]
> 
> Output: 5
> 
> Explanation: The possible sets of closing branches are:
> - The set [2], after closing, active branches are [0,1] and they are reachable to each other within distance 2.
> - The set [0,1], after closing, the active branch is [2].
> - The set [1,2], after closing, the active branch is [0].
> - The set [0,2], after closing, the active branch is [1].
> - The set [0,1,2], after closing, there are no active branches.
> 
> It can be proven, that there are only 5 possible sets of closing branches.

**Example 2:**

![](https://assets.leetcode.com/uploads/2023/11/08/example22.png)

> Input: n = 3, maxDistance = 5, roads = [[0,1,20],[0,1,10],[1,2,2],[0,2,2]]
> 
> Output: 7
> 
> Explanation: The possible sets of closing branches are:
> - The set [], after closing, active branches are [0,1,2] and they are reachable to each other within distance 4.
> - The set [0], after closing, active branches are [1,2] and they are reachable to each other within distance 2.
> - The set [1], after closing, active branches are [0,2] and they are reachable to each other within distance 2.
> - The set [0,1], after closing, the active branch is [2].
> - The set [1,2], after closing, the active branch is [0].
> - The set [0,2], after closing, the active branch is [1].
> - The set [0,1,2], after closing, there are no active branches.
> 
> It can be proven, that there are only 7 possible sets of closing branches.

**Example 3:**

> Input: n = 1, maxDistance = 10, roads = []
> 
> Output: 2
> 
> Explanation: The possible sets of closing branches are:
> - The set [], after closing, the active branch is [0].
> - The set [0], after closing, there are no active branches.
> 
> It can be proven, that there are only 2 possible sets of closing branches.

**Constraints:**

  * `1 <= n <= 10`
  * `1 <= maxDistance <= 10^5`
  * `0 <= roads.length <= 1000`
  * `roads[i].length == 3`
  * `0 <= ui, vi <= n - 1`
  * `ui != vi`
  * `1 <= wi <= 1000`
  * All branches are reachable from each other by traveling some roads.


## é¢˜ç›®å¤§æ„

ä¸€ä¸ªå…¬å¸åœ¨å…¨å›½æœ‰ `n` ä¸ªåˆ†éƒ¨ï¼Œå®ƒä»¬ä¹‹é—´æœ‰çš„æœ‰é“è·¯è¿æ¥ã€‚ä¸€å¼€å§‹ï¼Œæ‰€æœ‰åˆ†éƒ¨é€šè¿‡è¿™äº›é“è·¯ä¸¤ä¸¤ä¹‹é—´äº’ç›¸å¯ä»¥åˆ°è¾¾ã€‚

å…¬å¸æ„è¯†åˆ°åœ¨åˆ†éƒ¨ä¹‹é—´æ—…è¡ŒèŠ±è´¹äº†å¤ªå¤šæ—¶é—´ï¼Œæ‰€ä»¥å®ƒä»¬å†³å®šå…³é—­ä¸€äº›åˆ†éƒ¨ï¼ˆ**ä¹Ÿå¯èƒ½ä¸å…³é—­ä»»ä½•åˆ†éƒ¨** ï¼‰ï¼ŒåŒæ—¶ä¿è¯å‰©ä¸‹çš„åˆ†éƒ¨ä¹‹é—´ä¸¤ä¸¤äº’ç›¸å¯ä»¥åˆ°è¾¾ä¸”æœ€è¿œè·ç¦»ä¸è¶…è¿‡
`maxDistance` ã€‚

ä¸¤ä¸ªåˆ†éƒ¨ä¹‹é—´çš„ **è·ç¦»** æ˜¯é€šè¿‡é“è·¯é•¿åº¦ä¹‹å’Œçš„ **æœ€å°å€¼**  ã€‚

ç»™ä½ æ•´æ•° `n` ï¼Œ`maxDistance` å’Œä¸‹æ ‡ä» **0**  å¼€å§‹çš„äºŒç»´æ•´æ•°æ•°ç»„ `roads` ï¼Œå…¶ä¸­ `roads[i] = [ui, vi,
wi]` è¡¨ç¤ºä¸€æ¡ä» `ui` åˆ° `vi` é•¿åº¦ä¸º `wi`çš„ **æ— å‘**  é“è·¯ã€‚

è¯·ä½ è¿”å›å…³é—­åˆ†éƒ¨çš„å¯è¡Œæ–¹æ¡ˆæ•°ç›®ï¼Œæ»¡è¶³æ¯ä¸ªæ–¹æ¡ˆé‡Œå‰©ä½™åˆ†éƒ¨ä¹‹é—´çš„æœ€è¿œè·ç¦»ä¸è¶…è¿‡ _ _`maxDistance`ã€‚

**æ³¨æ„** ï¼Œå…³é—­ä¸€ä¸ªåˆ†éƒ¨åï¼Œä¸ä¹‹ç›¸è¿çš„æ‰€æœ‰é“è·¯ä¸å¯é€šè¡Œã€‚

**æ³¨æ„** ï¼Œä¸¤ä¸ªåˆ†éƒ¨ä¹‹é—´å¯èƒ½ä¼šæœ‰å¤šæ¡é“è·¯ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2023/11/08/example11.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 3, maxDistance = 5, roads = [[0,1,2],[1,2,10],[0,2,10]]
> 
> **è¾“å‡ºï¼š** 5
> 
> **è§£é‡Šï¼š** å¯è¡Œçš„å…³é—­åˆ†éƒ¨æ–¹æ¡ˆæœ‰ï¼š
> - å…³é—­åˆ†éƒ¨é›†åˆ [2] ï¼Œå‰©ä½™åˆ†éƒ¨ä¸º [0,1] ï¼Œå®ƒä»¬ä¹‹é—´çš„è·ç¦»ä¸º 2 ã€‚
> - å…³é—­åˆ†éƒ¨é›†åˆ [0,1] ï¼Œå‰©ä½™åˆ†éƒ¨ä¸º [2] ã€‚
> - å…³é—­åˆ†éƒ¨é›†åˆ [1,2] ï¼Œå‰©ä½™åˆ†éƒ¨ä¸º [0] ã€‚
> - å…³é—­åˆ†éƒ¨é›†åˆ [0,2] ï¼Œå‰©ä½™åˆ†éƒ¨ä¸º [1] ã€‚
> - å…³é—­åˆ†éƒ¨é›†åˆ [0,1,2] ï¼Œå…³é—­åæ²¡æœ‰å‰©ä½™åˆ†éƒ¨ã€‚
> 
> æ€»å…±æœ‰ 5 ç§å¯è¡Œçš„å…³é—­æ–¹æ¡ˆã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2023/11/08/example22.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 3, maxDistance = 5, roads = [[0,1,20],[0,1,10],[1,2,2],[0,2,2]]
> 
> **è¾“å‡ºï¼š** 7
> 
> **è§£é‡Šï¼š** å¯è¡Œçš„å…³é—­åˆ†éƒ¨æ–¹æ¡ˆæœ‰ï¼š
> - å…³é—­åˆ†éƒ¨é›†åˆ [] ï¼Œå‰©ä½™åˆ†éƒ¨ä¸º [0,1,2] ï¼Œå®ƒä»¬ä¹‹é—´çš„æœ€è¿œè·ç¦»ä¸º 4 ã€‚
> - å…³é—­åˆ†éƒ¨é›†åˆ [0] ï¼Œå‰©ä½™åˆ†éƒ¨ä¸º [1,2] ï¼Œå®ƒä»¬ä¹‹é—´çš„è·ç¦»ä¸º 2 ã€‚
> - å…³é—­åˆ†éƒ¨é›†åˆ [1] ï¼Œå‰©ä½™åˆ†éƒ¨ä¸º [0,2] ï¼Œå®ƒä»¬ä¹‹é—´çš„è·ç¦»ä¸º 2 ã€‚
> - å…³é—­åˆ†éƒ¨é›†åˆ [0,1] ï¼Œå‰©ä½™åˆ†éƒ¨ä¸º [2] ã€‚
> - å…³é—­åˆ†éƒ¨é›†åˆ [1,2] ï¼Œå‰©ä½™åˆ†éƒ¨ä¸º [0] ã€‚
> - å…³é—­åˆ†éƒ¨é›†åˆ [0,2] ï¼Œå‰©ä½™åˆ†éƒ¨ä¸º [1] ã€‚
> - å…³é—­åˆ†éƒ¨é›†åˆ [0,1,2] ï¼Œå…³é—­åæ²¡æœ‰å‰©ä½™åˆ†éƒ¨ã€‚
> 
> æ€»å…±æœ‰ 7 ç§å¯è¡Œçš„å…³é—­æ–¹æ¡ˆã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 1, maxDistance = 10, roads = []
> 
> **è¾“å‡ºï¼š** 2
> 
> **è§£é‡Šï¼š** å¯è¡Œçš„å…³é—­åˆ†éƒ¨æ–¹æ¡ˆæœ‰ï¼š
> - å…³é—­åˆ†éƒ¨é›†åˆ [] ï¼Œå‰©ä½™åˆ†éƒ¨ä¸º [0] ã€‚
> - å…³é—­åˆ†éƒ¨é›†åˆ [0] ï¼Œå…³é—­åæ²¡æœ‰å‰©ä½™åˆ†éƒ¨ã€‚
> 
> æ€»å…±æœ‰ 2 ç§å¯è¡Œçš„å…³é—­æ–¹æ¡ˆã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= n <= 10`
  * `1 <= maxDistance <= 10^5`
  * `0 <= roads.length <= 1000`
  * `roads[i].length == 3`
  * `0 <= ui, vi <= n - 1`
  * `ui != vi`
  * `1 <= wi <= 1000`
  * ä¸€å¼€å§‹æ‰€æœ‰åˆ†éƒ¨ä¹‹é—´é€šè¿‡é“è·¯äº’ç›¸å¯ä»¥åˆ°è¾¾ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```