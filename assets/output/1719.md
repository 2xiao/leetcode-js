# [1719. é‡æ„ä¸€æ£µæ ‘çš„æ–¹æ¡ˆæ•°](https://leetcode.com/problems/number-of-ways-to-reconstruct-a-tree)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/outline/tag/tree.md) [`å›¾`](/outline/tag/graph.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/number-of-ways-to-reconstruct-a-tree)

## é¢˜ç›®

You are given an array `pairs`, where `pairs[i] = [xi, yi]`, and:

  * There are no duplicates.
  * `xi < yi`

Let `ways` be the number of rooted trees that satisfy the following
conditions:

  * The tree consists of nodes whose values appeared in `pairs`.
  * A pair `[xi, yi]` exists in `pairs` **if and only if** `xi` is an ancestor of `yi` or `yi` is an ancestor of `xi`.
  * **Note:** the tree does not have to be a binary tree.

Two ways are considered to be different if there is at least one node that has
different parents in both ways.

Return:

  * `0` if `ways == 0`
  * `1` if `ways == 1`
  * `2` if `ways > 1`

A **rooted tree** is a tree that has a single root node, and all edges are
oriented to be outgoing from the root.

An **ancestor** of a node is any node on the path from the root to that node
(excluding the node itself). The root has no ancestors.



**Example 1:**

![](https://assets.leetcode.com/uploads/2020/12/03/trees2.png)

> Input: pairs = [[1,2],[2,3]]
> 
> Output: 1
> 
> Explanation: There is exactly one valid rooted tree, which is shown in the above figure.

**Example 2:**

![](https://assets.leetcode.com/uploads/2020/12/03/tree.png)

> Input: pairs = [[1,2],[2,3],[1,3]]
> 
> Output: 2
> 
> Explanation: There are multiple valid rooted trees. Three of them are shown in the above figures.

**Example 3:**

> Input: pairs = [[1,2],[2,3],[2,4],[1,5]]
> 
> Output: 0
> 
> Explanation: There are no valid rooted trees.



**Constraints:**

  * `1 <= pairs.length <= 10^5`
  * `1 <= xi < yi <= 500`
  * The elements in `pairs` are unique.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•°ç»„ `pairs` ï¼Œå…¶ä¸­ `pairs[i] = [xi, yi]` ï¼Œå¹¶ä¸”æ»¡è¶³ï¼š

  * `pairs` ä¸­æ²¡æœ‰é‡å¤å…ƒç´ 
  * `xi < yi`

ä»¤ `ways` ä¸ºæ»¡è¶³ä¸‹é¢æ¡ä»¶çš„æœ‰æ ¹æ ‘çš„æ–¹æ¡ˆæ•°ï¼š

  * æ ‘æ‰€åŒ…å«çš„æ‰€æœ‰èŠ‚ç‚¹å€¼éƒ½åœ¨ `pairs` ä¸­ã€‚
  * ä¸€ä¸ªæ•°å¯¹ `[xi, yi]` å‡ºç°åœ¨ `pairs` ä¸­ **å½“ä¸”ä»…å½“******`xi` æ˜¯ `yi` çš„ç¥–å…ˆæˆ–è€… `yi` æ˜¯ `xi` çš„ç¥–å…ˆã€‚
  * **æ³¨æ„ï¼š** æ„é€ å‡ºæ¥çš„æ ‘ä¸ä¸€å®šæ˜¯äºŒå‰æ ‘ã€‚

ä¸¤æ£µæ ‘è¢«è§†ä¸ºä¸åŒçš„æ–¹æ¡ˆå½“å­˜åœ¨è‡³å°‘ä¸€ä¸ªèŠ‚ç‚¹åœ¨ä¸¤æ£µæ ‘ä¸­æœ‰ä¸åŒçš„çˆ¶èŠ‚ç‚¹ã€‚

è¯·ä½ è¿”å›ï¼š

  * å¦‚æœ `ways == 0` ï¼Œè¿”å› `0` ã€‚
  * å¦‚æœ `ways == 1` ï¼Œè¿”å› `1` ã€‚
  * å¦‚æœ `ways > 1` ï¼Œè¿”å› `2` ã€‚

ä¸€æ£µ **æœ‰æ ¹æ ‘** æŒ‡çš„æ˜¯åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹çš„æ ‘ï¼Œæ‰€æœ‰è¾¹éƒ½æ˜¯ä»æ ¹å¾€å¤–çš„æ–¹å‘ã€‚

æˆ‘ä»¬ç§°ä»æ ¹åˆ°ä¸€ä¸ªèŠ‚ç‚¹è·¯å¾„ä¸Šçš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆé™¤å»èŠ‚ç‚¹æœ¬èº«ï¼‰éƒ½æ˜¯è¯¥èŠ‚ç‚¹çš„ **ç¥–å…ˆ** ã€‚æ ¹èŠ‚ç‚¹æ²¡æœ‰ç¥–å…ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode-cn.com/aliyun-lc-
upload/uploads/2021/01/09/trees2.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** pairs = [[1,2],[2,3]]
> 
> **è¾“å‡ºï¼š** 1
> 
> **è§£é‡Šï¼š** å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªç¬¦åˆè§„å®šçš„æœ‰æ ¹æ ‘ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode-cn.com/aliyun-lc-
upload/uploads/2021/01/09/tree.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** pairs = [[1,2],[2,3],[1,3]]
> 
> **è¾“å‡ºï¼š** 2
> 
> **è§£é‡Šï¼š** æœ‰å¤šä¸ªç¬¦åˆè§„å®šçš„æœ‰æ ¹æ ‘ï¼Œå…¶ä¸­ä¸‰ä¸ªå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** pairs = [[1,2],[2,3],[2,4],[1,5]]
> 
> **è¾“å‡ºï¼š** 0
> 
> **è§£é‡Šï¼š** æ²¡æœ‰ç¬¦åˆè§„å®šçš„æœ‰æ ¹æ ‘ã€‚

**æç¤ºï¼š**

  * `1 <= pairs.length <= 10^5`
  * `1 <= xi < yi <= 500`
  * `pairs` ä¸­çš„å…ƒç´ äº’ä¸ç›¸åŒã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2196 | [æ ¹æ®æè¿°åˆ›å»ºäºŒå‰æ ‘](https://leetcode.com/problems/create-binary-tree-from-descriptions) | [[âœ“]](/problem/2196) |  [`æ ‘`](/outline/tag/tree.md) [`æ•°ç»„`](/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/outline/tag/hash-table.md) `1+` | <font color=#ffb800>Medium</font> |
| 2497 | [å›¾ä¸­æœ€å¤§æ˜Ÿå’Œ](https://leetcode.com/problems/maximum-star-sum-of-a-graph) |  |  [`è´ªå¿ƒ`](/outline/tag/greedy.md) [`å›¾`](/outline/tag/graph.md) [`æ•°ç»„`](/outline/tag/array.md) `2+` | <font color=#ffb800>Medium</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
