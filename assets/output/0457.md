# [457. ç¯å½¢æ•°ç»„æ˜¯å¦å­˜åœ¨å¾ªç¯](https://leetcode.com/problems/circular-array-loop)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`åŒæŒ‡é’ˆ`](/leetcode/outline/tag/two-pointers.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/circular-array-loop)

## é¢˜ç›®

You are playing a game involving a **circular** array of non-zero integers
`nums`. Each `nums[i]` denotes the number of indices forward/backward you must
move if you are located at index `i`:

  * If `nums[i]` is positive, move `nums[i]` steps **forward** , and
  * If `nums[i]` is negative, move `nums[i]` steps **backward**.

Since the array is **circular** , you may assume that moving forward from the
last element puts you on the first element, and moving backwards from the
first element puts you on the last element.

A **cycle** in the array consists of a sequence of indices `seq` of length `k`
where:

  * Following the movement rules above results in the repeating index sequence `seq[0] -> seq[1] -> ... -> seq[k - 1] -> seq[0] -> ...`
  * Every `nums[seq[j]]` is either **all positive** or **all negative**.
  * `k > 1`

Return `true` _if there is a**cycle** in _`nums` _, or_`false` _otherwise_.



**Example 1:**

![](https://assets.leetcode.com/uploads/2022/09/01/img1.jpg)

> Input: nums = [2,-1,1,2,2]
> 
> Output: true
> 
> Explanation: The graph shows how the indices are connected. White nodes are jumping forward, while red is jumping backward.
> 
> We can see the cycle 0 --> 2 --> 3 --> 0 --> ..., and all of its nodes are white (jumping in the same direction).

**Example 2:**

![](https://assets.leetcode.com/uploads/2022/09/01/img2.jpg)

> Input: nums = [-1,-2,-3,-4,-5,6]
> 
> Output: false
> 
> Explanation: The graph shows how the indices are connected. White nodes are jumping forward, while red is jumping backward.
> 
> The only cycle is of size 1, so we return false.

**Example 3:**

![](https://assets.leetcode.com/uploads/2022/09/01/img3.jpg)

> Input: nums = [1,-1,5,1,4]
> 
> Output: true
> 
> Explanation: The graph shows how the indices are connected. White nodes are jumping forward, while red is jumping backward.
> 
> We can see the cycle 0 --> 1 --> 0 --> ..., and while it is of size > 1, it has a node jumping forward and a node jumping backward, so **it is not a cycle**.
> 
> We can see the cycle 3 --> 4 --> 3 --> ..., and all of its nodes are white (jumping in the same direction).

**Constraints:**

  * `1 <= nums.length <= 5000`
  * `-1000 <= nums[i] <= 1000`
  * `nums[i] != 0`



**Follow up:** Could you solve it in `O(n)` time complexity and `O(1)` extra
space complexity?


## é¢˜ç›®å¤§æ„

å­˜åœ¨ä¸€ä¸ªä¸å« `0` çš„**ç¯å½¢** æ•°ç»„ `nums` ï¼Œæ¯ä¸ª `nums[i]` éƒ½è¡¨ç¤ºä½äºä¸‹æ ‡ `i` çš„è§’è‰²åº”è¯¥å‘å‰æˆ–å‘åç§»åŠ¨çš„ä¸‹æ ‡ä¸ªæ•°ï¼š

  * å¦‚æœ `nums[i]` æ˜¯æ­£æ•°ï¼Œ**å‘å‰** ï¼ˆä¸‹æ ‡é€’å¢æ–¹å‘ï¼‰ç§»åŠ¨ `|nums[i]|` æ­¥
  * å¦‚æœ `nums[i]` æ˜¯è´Ÿæ•°ï¼Œ**å‘å** ï¼ˆä¸‹æ ‡é€’å‡æ–¹å‘ï¼‰ç§»åŠ¨ `|nums[i]|` æ­¥

å› ä¸ºæ•°ç»„æ˜¯ **ç¯å½¢** çš„ï¼Œæ‰€ä»¥å¯ä»¥å‡è®¾ä»æœ€åä¸€ä¸ªå…ƒç´ å‘å‰ç§»åŠ¨ä¸€æ­¥ä¼šåˆ°è¾¾ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè€Œç¬¬ä¸€ä¸ªå…ƒç´ å‘åç§»åŠ¨ä¸€æ­¥ä¼šåˆ°è¾¾æœ€åä¸€ä¸ªå…ƒç´ ã€‚

æ•°ç»„ä¸­çš„ **å¾ªç¯** ç”±é•¿åº¦ä¸º `k` çš„ä¸‹æ ‡åºåˆ— `seq` æ ‡è¯†ï¼š

  * éµå¾ªä¸Šè¿°ç§»åŠ¨è§„åˆ™å°†å¯¼è‡´ä¸€ç»„é‡å¤ä¸‹æ ‡åºåˆ— `seq[0] -> seq[1] -> ... -> seq[k - 1] -> seq[0] -> ...`
  * æ‰€æœ‰ `nums[seq[j]]` åº”å½“ä¸æ˜¯ **å…¨æ­£** å°±æ˜¯ **å…¨è´Ÿ**
  * `k > 1`

å¦‚æœ `nums` ä¸­å­˜åœ¨å¾ªç¯ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› __`false` __ ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://pic.leetcode.cn/1723688159-qYjpWT-image.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [2,-1,1,2,2]
> 
> **è¾“å‡ºï¼š** true
> 
> **è§£é‡Šï¼š** å›¾ç‰‡å±•ç¤ºäº†èŠ‚ç‚¹é—´å¦‚ä½•è¿æ¥ã€‚ç™½è‰²èŠ‚ç‚¹å‘å‰è·³è·ƒï¼Œè€Œçº¢è‰²èŠ‚ç‚¹å‘åè·³è·ƒã€‚
> 
> æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å­˜åœ¨å¾ªç¯ï¼ŒæŒ‰ä¸‹æ ‡ 0 -> 2 -> 3 -> 0 --> ...ï¼Œå¹¶ä¸”å…¶ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ç™½è‰²ï¼ˆä»¥ç›¸åŒæ–¹å‘è·³è·ƒï¼‰ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![](https://pic.leetcode.cn/1723688183-lRSkjp-image.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [-1,-2,-3,-4,-5,6]
> 
> **è¾“å‡ºï¼š** false
> 
> **è§£é‡Šï¼š** å›¾ç‰‡å±•ç¤ºäº†èŠ‚ç‚¹é—´å¦‚ä½•è¿æ¥ã€‚ç™½è‰²èŠ‚ç‚¹å‘å‰è·³è·ƒï¼Œè€Œçº¢è‰²èŠ‚ç‚¹å‘åè·³è·ƒã€‚
> 
> å”¯ä¸€çš„å¾ªç¯é•¿åº¦ä¸º 1ï¼Œæ‰€ä»¥è¿”å› falseã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

![](https://pic.leetcode.cn/1723688199-nhaMuF-image.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [1,-1,5,1,4]
> 
> **è¾“å‡ºï¼š** true
> 
> **è§£é‡Šï¼š** å›¾ç‰‡å±•ç¤ºäº†èŠ‚ç‚¹é—´å¦‚ä½•è¿æ¥ã€‚ç™½è‰²èŠ‚ç‚¹å‘å‰è·³è·ƒï¼Œè€Œçº¢è‰²èŠ‚ç‚¹å‘åè·³è·ƒã€‚
> 
> æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å­˜åœ¨å¾ªç¯ï¼ŒæŒ‰ä¸‹æ ‡ 0 --> 1 --> 0 --> ...ï¼Œå½“å®ƒçš„å¤§å°å¤§äº 1 æ—¶ï¼Œå®ƒæœ‰ä¸€ä¸ªå‘å‰è·³çš„èŠ‚ç‚¹å’Œä¸€ä¸ªå‘åè·³çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥ **å®ƒä¸æ˜¯ä¸€ä¸ªå¾ªç¯** ã€‚
> 
> æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å­˜åœ¨å¾ªç¯ï¼ŒæŒ‰ä¸‹æ ‡ 3 --> 4 --> 3 --> ...ï¼Œå¹¶ä¸”å…¶ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ç™½è‰²ï¼ˆä»¥ç›¸åŒæ–¹å‘è·³è·ƒï¼‰ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= nums.length <= 5000`
  * `-1000 <= nums[i] <= 1000`
  * `nums[i] != 0`



**è¿›é˜¶ï¼š** ä½ èƒ½è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º `O(n)` ä¸”é¢å¤–ç©ºé—´å¤æ‚åº¦ä¸º `O(1)` çš„ç®—æ³•å—ï¼Ÿ


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```