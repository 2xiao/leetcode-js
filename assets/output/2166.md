# [2166. è®¾è®¡ä½é›†](https://leetcode.com/problems/design-bitset)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/leetcode/outline/tag/string.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/design-bitset)


## é¢˜ç›®

A **Bitset** is a data structure that compactly stores bits.

Implement the `Bitset` class:

  * `Bitset(int size)` Initializes the Bitset with `size` bits, all of which are `0`.
  * `void fix(int idx)` Updates the value of the bit at the index `idx` to `1`. If the value was already `1`, no change occurs.
  * `void unfix(int idx)` Updates the value of the bit at the index `idx` to `0`. If the value was already `0`, no change occurs.
  * `void flip()` Flips the values of each bit in the Bitset. In other words, all bits with value `0` will now have value `1` and vice versa.
  * `boolean all()` Checks if the value of **each** bit in the Bitset is `1`. Returns `true` if it satisfies the condition, `false` otherwise.
  * `boolean one()` Checks if there is **at least one** bit in the Bitset with value `1`. Returns `true` if it satisfies the condition, `false` otherwise.
  * `int count()` Returns the **total number** of bits in the Bitset which have value `1`.
  * `String toString()` Returns the current composition of the Bitset. Note that in the resultant string, the character at the `ith` index should coincide with the value at the `ith` bit of the Bitset.



**Example 1:**

> 
> 
> 
> 
> 
> **Input**
> 
> ["Bitset", "fix", "fix", "flip", "all", "unfix", "flip", "one", "unfix", "count", "toString"]
> 
> [[5], [3], [1], [], [], [0], [], [], [0], [], []]
> 
> **Output**
> 
> [null, null, null, null, false, null, null, true, null, 2, "01010"]
> 
> 
> 
> **Explanation**
> 
> Bitset bs = new Bitset(5); // bitset = "00000".
> 
> bs.fix(3);> 
>  // the value at idx = 3 is updated to 1, so bitset = "00010".
> 
> bs.fix(1);> 
>  // the value at idx = 1 is updated to 1, so bitset = "01010". 
> 
> bs.flip();> 
>  // the value of each bit is flipped, so bitset = "10101". 
> 
> bs.all();> 
>   // return False, as not all values of the bitset are 1.
> 
> bs.unfix(0);   // the value at idx = 0 is updated to 0, so bitset = "00101".
> 
> bs.flip();> 
>  // the value of each bit is flipped, so bitset = "11010". 
> 
> bs.one();> 
>   // return True, as there is at least 1 index with value 1.
> 
> bs.unfix(0);   // the value at idx = 0 is updated to 0, so bitset = "01010".
> 
> bs.count();> 
> // return 2, as there are 2 bits with value 1.
> 
> bs.toString(); // return "01010", which is the composition of bitset.

**Constraints:**

  * `1 <= size <= 10^5`
  * `0 <= idx <= size - 1`
  * At most `10^5` calls will be made **in total** to `fix`, `unfix`, `flip`, `all`, `one`, `count`, and `toString`.
  * At least one call will be made to `all`, `one`, `count`, or `toString`.
  * At most `5` calls will be made to `toString`.


## é¢˜ç›®å¤§æ„

**ä½é›† Bitset** æ˜¯ä¸€ç§èƒ½ä»¥ç´§å‡‘å½¢å¼å­˜å‚¨ä½çš„æ•°æ®ç»“æ„ã€‚

è¯·ä½ å®ç° `Bitset` ç±»ã€‚

  * `Bitset(int size)` ç”¨ `size` ä¸ªä½åˆå§‹åŒ– Bitset ï¼Œæ‰€æœ‰ä½éƒ½æ˜¯ `0` ã€‚
  * `void fix(int idx)` å°†ä¸‹æ ‡ä¸º `idx` çš„ä½ä¸Šçš„å€¼æ›´æ–°ä¸º `1` ã€‚å¦‚æœå€¼å·²ç»æ˜¯ `1` ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿä»»ä½•æ”¹å˜ã€‚
  * `void unfix(int idx)` å°†ä¸‹æ ‡ä¸º `idx` çš„ä½ä¸Šçš„å€¼æ›´æ–°ä¸º `0` ã€‚å¦‚æœå€¼å·²ç»æ˜¯ `0` ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿä»»ä½•æ”¹å˜ã€‚
  * `void flip()` ç¿»è½¬ Bitset ä¸­æ¯ä¸€ä½ä¸Šçš„å€¼ã€‚æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰å€¼ä¸º `0` çš„ä½å°†ä¼šå˜æˆ `1` ï¼Œåä¹‹äº¦ç„¶ã€‚
  * `boolean all()` æ£€æŸ¥ Bitset ä¸­ **æ¯ä¸€ä½** çš„å€¼æ˜¯å¦éƒ½æ˜¯ `1` ã€‚å¦‚æœæ»¡è¶³æ­¤æ¡ä»¶ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
  * `boolean one()` æ£€æŸ¥ Bitset ä¸­ æ˜¯å¦ **è‡³å°‘ä¸€ä½** çš„å€¼æ˜¯ `1` ã€‚å¦‚æœæ»¡è¶³æ­¤æ¡ä»¶ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
  * `int count()` è¿”å› Bitset ä¸­å€¼ä¸º 1 çš„ä½çš„ **æ€»æ•°** ã€‚
  * `String toString()` è¿”å› Bitset çš„å½“å‰ç»„æˆæƒ…å†µã€‚æ³¨æ„ï¼Œåœ¨ç»“æœå­—ç¬¦ä¸²ä¸­ï¼Œç¬¬ `i` ä¸ªä¸‹æ ‡å¤„çš„å­—ç¬¦åº”è¯¥ä¸ Bitset ä¸­çš„ç¬¬ `i` ä½ä¸€è‡´ã€‚



**ç¤ºä¾‹ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥**
> 
> ["Bitset", "fix", "fix", "flip", "all", "unfix", "flip", "one", "unfix", "count", "toString"]
> 
> [[5], [3], [1], [], [], [0], [], [], [0], [], []]
> 
> **è¾“å‡º**
> 
> [null, null, null, null, false, null, null, true, null, 2, "01010"]
> 
> 
> 
> **è§£é‡Š**
> 
> Bitset bs = new Bitset(5); // bitset = "00000".
> 
> bs.fix(3);> 
>  // å°† idx = 3 å¤„çš„å€¼æ›´æ–°ä¸º 1 ï¼Œæ­¤æ—¶ bitset = "00010" ã€‚
> 
> bs.fix(1);> 
>  // å°† idx = 1 å¤„çš„å€¼æ›´æ–°ä¸º 1 ï¼Œæ­¤æ—¶ bitset = "01010" ã€‚
> 
> bs.flip();> 
>  // ç¿»è½¬æ¯ä¸€ä½ä¸Šçš„å€¼ï¼Œæ­¤æ—¶ bitset = "10101" ã€‚
> 
> bs.all();> 
>   // è¿”å› False ï¼Œbitset ä¸­çš„å€¼ä¸å…¨ä¸º 1 ã€‚
> 
> bs.unfix(0);   // å°† idx = 0 å¤„çš„å€¼æ›´æ–°ä¸º 0 ï¼Œæ­¤æ—¶ bitset = "00101" ã€‚
> 
> bs.flip();> 
>  // ç¿»è½¬æ¯ä¸€ä½ä¸Šçš„å€¼ï¼Œæ­¤æ—¶ bitset = "11010" ã€‚
> 
> bs.one();> 
>   // è¿”å› True ï¼Œè‡³å°‘å­˜åœ¨ä¸€ä½çš„å€¼ä¸º 1 ã€‚
> 
> bs.unfix(0);   // å°† idx = 0 å¤„çš„å€¼æ›´æ–°ä¸º 0 ï¼Œæ­¤æ—¶ bitset = "01010" ã€‚
> 
> bs.count();> 
> // è¿”å› 2 ï¼Œå½“å‰æœ‰ 2 ä½çš„å€¼ä¸º 1 ã€‚
> 
> bs.toString(); // è¿”å› "01010" ï¼Œå³ bitset çš„å½“å‰ç»„æˆæƒ…å†µã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= size <= 10^5`
  * `0 <= idx <= size - 1`
  * è‡³å¤šè°ƒç”¨ `fix`ã€`unfix`ã€`flip`ã€`all`ã€`one`ã€`count` å’Œ `toString` æ–¹æ³• **æ€»å…±** `10^5` æ¬¡
  * è‡³å°‘è°ƒç”¨ `all`ã€`one`ã€`count` æˆ– `toString` æ–¹æ³•ä¸€æ¬¡
  * è‡³å¤šè°ƒç”¨ `toString` æ–¹æ³• `5` æ¬¡


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 1396 | [è®¾è®¡åœ°é“ç³»ç»Ÿ](https://leetcode.com/problems/design-underground-system) |  |  [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/leetcode/outline/tag/string.md) | <font color=#ffb800>Medium</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
