---
title: 2897. å¯¹æ•°ç»„æ‰§è¡Œæ“ä½œä½¿å¹³æ–¹å’Œæœ€å¤§
description: LeetCode,2897. å¯¹æ•°ç»„æ‰§è¡Œæ“ä½œä½¿å¹³æ–¹å’Œæœ€å¤§,å¯¹æ•°ç»„æ‰§è¡Œæ“ä½œä½¿å¹³æ–¹å’Œæœ€å¤§,Apply Operations on Array to Maximize Sum of Squares,è§£é¢˜æ€è·¯,è´ªå¿ƒ,ä½è¿ç®—,æ•°ç»„,å“ˆå¸Œè¡¨
keywords:
  - LeetCode
  - 2897. å¯¹æ•°ç»„æ‰§è¡Œæ“ä½œä½¿å¹³æ–¹å’Œæœ€å¤§
  - å¯¹æ•°ç»„æ‰§è¡Œæ“ä½œä½¿å¹³æ–¹å’Œæœ€å¤§
  - Apply Operations on Array to Maximize Sum of Squares
  - è§£é¢˜æ€è·¯
  - è´ªå¿ƒ
  - ä½è¿ç®—
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
---

# 2897. å¯¹æ•°ç»„æ‰§è¡Œæ“ä½œä½¿å¹³æ–¹å’Œæœ€å¤§

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`è´ªå¿ƒ`](/tag/greedy.md) [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/apply-operations-on-array-to-maximize-sum-of-squares) [`LeetCode`](https://leetcode.com/problems/apply-operations-on-array-to-maximize-sum-of-squares)

## é¢˜ç›®

You are given a **0-indexed** integer array `nums` and a **positive** integer
`k`.

You can do the following operation on the array **any** number of times:

  * Choose any two distinct indices `i` and `j` and **simultaneously** update the values of `nums[i]` to `(nums[i] AND nums[j])` and `nums[j]` to `(nums[i] OR nums[j])`. Here, `OR` denotes the bitwise `OR` operation, and `AND` denotes the bitwise `AND` operation.

You have to choose `k` elements from the final array and calculate the sum of
their **squares**.

Return _the**maximum** sum of squares you can achieve_.

Since the answer can be very large, return it **modulo** `109 + 7`.



**Example 1:**

> Input: nums = [2,6,5,8], k = 2
> 
> Output: 261
> 
> Explanation: We can do the following operations on the array:
> - Choose i = 0 and j = 3, then change nums[0] to (2 AND 8) = 0 and nums[3] to (2 OR 8) = 10. The resulting array is nums = [0,6,5,10].
> - Choose i = 2 and j = 3, then change nums[2] to (5 AND 10) = 0 and nums[3] to (5 OR 10) = 15. The resulting array is nums = [0,6,0,15].
> 
> We can choose the elements 15 and 6 from the final array. The sum of squares is 152 + 62 = 261.
> 
> It can be shown that this is the maximum value we can get.

**Example 2:**

> Input: nums = [4,5,4,7], k = 3
> 
> Output: 90
> 
> Explanation: We do not need to apply any operations.
> 
> We can choose the elements 7, 5, and 4 with a sum of squares: 72 + 52 + 42 = 90.
> 
> It can be shown that this is the maximum value we can get.

**Constraints:**

  * `1 <= k <= nums.length <= 10^5`
  * `1 <= nums[i] <= 10^9`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0**  å¼€å§‹çš„æ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ª **æ­£**  æ•´æ•° `k` ã€‚

ä½ å¯ä»¥å¯¹æ•°ç»„æ‰§è¡Œä»¥ä¸‹æ“ä½œ **ä»»æ„æ¬¡**  ï¼š

  * é€‰æ‹©ä¸¤ä¸ªäº’ä¸ç›¸åŒçš„ä¸‹æ ‡ `i` å’Œ `j` ï¼Œ**åŒæ—¶**  å°† `nums[i]` æ›´æ–°ä¸º `(nums[i] AND nums[j])` ä¸”å°† `nums[j]` æ›´æ–°ä¸º `(nums[i] OR nums[j])` ï¼Œ`OR` è¡¨ç¤ºæŒ‰ä½ **æˆ–**  è¿ç®—ï¼Œ`AND` è¡¨ç¤ºæŒ‰ä½ **ä¸**  è¿ç®—ã€‚

ä½ éœ€è¦ä»æœ€ç»ˆçš„æ•°ç»„é‡Œé€‰æ‹© `k` ä¸ªå…ƒç´ ï¼Œå¹¶è®¡ç®—å®ƒä»¬çš„ **å¹³æ–¹**  ä¹‹å’Œã€‚

è¯·ä½ è¿”å›ä½ å¯ä»¥å¾—åˆ°çš„ **æœ€å¤§**  å¹³æ–¹å’Œã€‚

ç”±äºç­”æ¡ˆå¯èƒ½ä¼šå¾ˆå¤§ï¼Œå°†ç­”æ¡ˆå¯¹ `109 + 7` **å–ä½™**  åè¿”å›ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [2,6,5,8], k = 2
> 
> **è¾“å‡ºï¼š** 261
> 
> **è§£é‡Šï¼š** æˆ‘ä»¬å¯ä»¥å¯¹æ•°ç»„æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
> - é€‰æ‹© i = 0 å’Œ j = 3 ï¼ŒåŒæ—¶å°† nums[0] å˜ä¸º (2 AND 8) = 0 ä¸” nums[3] å˜ä¸º (2 OR 8) = 10 ï¼Œç»“æœæ•°ç»„ä¸º nums = [0,6,5,10] ã€‚
> - é€‰æ‹© i = 2 å’Œ j = 3 ï¼ŒåŒæ—¶å°† nums[2] å˜ä¸º (5 AND 10) = 0 ä¸” nums[3] å˜ä¸º (5 OR 10) = 15 ï¼Œç»“æœæ•°ç»„ä¸º nums = [0,6,0,15] ã€‚
> 
> ä»æœ€ç»ˆæ•°ç»„é‡Œé€‰æ‹©å…ƒç´  15 å’Œ 6 ï¼Œå¹³æ–¹å’Œä¸º 152 + 62 = 261 ã€‚
> 
> 261 æ˜¯å¯ä»¥å¾—åˆ°çš„æœ€å¤§ç»“æœã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [4,5,4,7], k = 3
> 
> **è¾“å‡ºï¼š** 90
> 
> **è§£é‡Šï¼š** ä¸éœ€è¦æ‰§è¡Œä»»ä½•æ“ä½œã€‚
> 
> é€‰æ‹©å…ƒç´  7 ï¼Œ5 å’Œ 4 ï¼Œå¹³æ–¹å’Œä¸º 72 + 52 + 42 = 90 ã€‚
> 
> 90 æ˜¯å¯ä»¥å¾—åˆ°çš„æœ€å¤§ç»“æœã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= k <= nums.length <= 10^5`
  * `1 <= nums[i] <= 10^9`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------ | :------: |
| 3022 | ç»™å®šæ“ä½œæ¬¡æ•°å†…ä½¿å‰©ä½™å…ƒç´ çš„æˆ–å€¼æœ€å° |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) | <font color=#ff334b>Hard</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/minimize-or-of-remaining-elements-using-operations) [ğŸ”—](https://leetcode.com/problems/minimize-or-of-remaining-elements-using-operations) |