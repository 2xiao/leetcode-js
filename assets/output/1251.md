# [1251. å¹³å‡å”®ä»·](https://leetcode.com/problems/average-selling-price)

ğŸŸ¢ <font color=#15bd66>Easy</font>&emsp; ğŸ”–&ensp; [`æ•°æ®åº“`](/leetcode/outline/tag/database.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/average-selling-price)


## é¢˜ç›®

Table: `Prices`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | product_id> 
> | int> 
>  |
> 
> | start_date> 
> | date> 
> |
> 
> | end_date> 
>   | date> 
> |
> 
> | price> 
> > 
>  | int> 
>  |
> 
> +---------------+---------+
> 
> (product_id, start_date, end_date) is the primary key (combination of columns with unique values) for this table.
> 
> Each row of this table indicates the price of the product_id in the period from start_date to end_date.
> 
> For each product_id there will be no two overlapping periods. That means there will be no two intersecting periods for the same product_id.
> 
> 



Table: `UnitsSold`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | product_id> 
> | int> 
>  |
> 
> | purchase_date | date> 
> |
> 
> | units> 
> > 
>  | int> 
>  |
> 
> +---------------+---------+
> 
> This table may contain duplicate rows.
> 
> Each row of this table indicates the date, units, and product_id of each product sold. 
> 
> 



Write a solution to find the average selling price for each product.
`average_price` should be **rounded to 2 decimal places**. If a product does
not have any sold units, its average selling price is assumed to be 0.

Return the result table in **any order**.

The result format is in the following example.



**Example 1:**

> Input: 
> 
> Prices table:
> 
> +------------+------------+------------+--------+
> 
> | product_id | start_date | end_date   | price  |
> 
> +------------+------------+------------+--------+
> 
> | 1> 
> > 
>   | 2019-02-17 | 2019-02-28 | 5> 
>   |
> 
> | 1> 
> > 
>   | 2019-03-01 | 2019-03-22 | 20> 
>  |
> 
> | 2> 
> > 
>   | 2019-02-01 | 2019-02-20 | 15> 
>  |
> 
> | 2> 
> > 
>   | 2019-02-21 | 2019-03-31 | 30> 
>  |
> 
> +------------+------------+------------+--------+
> 
> UnitsSold table:
> 
> +------------+---------------+-------+
> 
> | product_id | purchase_date | units |
> 
> +------------+---------------+-------+
> 
> | 1> 
> > 
>   | 2019-02-25> 
> | 100   |
> 
> | 1> 
> > 
>   | 2019-03-01> 
> | 15> 
> |
> 
> | 2> 
> > 
>   | 2019-02-10> 
> | 200   |
> 
> | 2> 
> > 
>   | 2019-03-22> 
> | 30> 
> |
> 
> +------------+---------------+-------+
> 
> Output: 
> 
> +------------+---------------+
> 
> | product_id | average_price |
> 
> +------------+---------------+
> 
> | 1> 
> > 
>   | 6.96> 
> > 
>   |
> 
> | 2> 
> > 
>   | 16.96> 
> > 
>  |
> 
> +------------+---------------+
> 
> Explanation: 
> 
> Average selling price = Total Price of Product / Number of products sold.
> 
> Average selling price for product 1 = ((100 * 5) + (15 * 20)) / 115 = 6.96
> 
> Average selling price for product 2 = ((200 * 15) + (30 * 30)) / 230 = 16.96
> 
> 


## é¢˜ç›®å¤§æ„

è¡¨ï¼š`Prices`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | product_id> 
> | int> 
>  |
> 
> | start_date> 
> | date> 
> |
> 
> | end_date> 
>   | date> 
> |
> 
> | price> 
> > 
>  | int> 
>  |
> 
> +---------------+---------+
> 
> (product_idï¼Œstart_dateï¼Œend_date) æ˜¯ prices è¡¨çš„ä¸»é”®ï¼ˆå…·æœ‰å”¯ä¸€å€¼çš„åˆ—çš„ç»„åˆï¼‰ã€‚
> 
> prices è¡¨çš„æ¯ä¸€è¡Œè¡¨ç¤ºçš„æ˜¯æŸä¸ªäº§å“åœ¨ä¸€æ®µæ—¶æœŸå†…çš„ä»·æ ¼ã€‚
> 
> æ¯ä¸ªäº§å“çš„å¯¹åº”æ—¶é—´æ®µæ˜¯ä¸ä¼šé‡å çš„ï¼Œè¿™ä¹Ÿæ„å‘³ç€åŒä¸€ä¸ªäº§å“çš„ä»·æ ¼æ—¶æ®µä¸ä¼šå‡ºç°äº¤å‰ã€‚



è¡¨ï¼š`UnitsSold`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | product_id> 
> | int> 
>  |
> 
> | purchase_date | date> 
> |
> 
> | units> 
> > 
>  | int> 
>  |
> 
> +---------------+---------+
> 
> è¯¥è¡¨å¯èƒ½åŒ…å«é‡å¤æ•°æ®ã€‚
> 
> è¯¥è¡¨çš„æ¯ä¸€è¡Œè¡¨ç¤ºçš„æ˜¯æ¯ç§äº§å“çš„å‡ºå”®æ—¥æœŸï¼Œå•ä½å’Œäº§å“ idã€‚



ç¼–å†™è§£å†³æ–¹æ¡ˆä»¥æŸ¥æ‰¾æ¯ç§äº§å“çš„å¹³å‡å”®ä»·ã€‚`average_price` åº”è¯¥ **å››èˆäº”å…¥åˆ°å°æ•°ç‚¹åä¸¤ä½** ã€‚å¦‚æœäº§å“æ²¡æœ‰ä»»ä½•å”®å‡ºï¼Œåˆ™å‡è®¾å…¶å¹³å‡å”®ä»·ä¸º 0ã€‚

è¿”å›ç»“æœè¡¨ **æ— é¡ºåºè¦æ±‚** ã€‚

ç»“æœæ ¼å¼å¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> Prices table:
> 
> +------------+------------+------------+--------+
> 
> | product_id | start_date | end_date   | price  |
> 
> +------------+------------+------------+--------+
> 
> | 1> 
> > 
>   | 2019-02-17 | 2019-02-28 | 5> 
>   |
> 
> | 1> 
> > 
>   | 2019-03-01 | 2019-03-22 | 20> 
>  |
> 
> | 2> 
> > 
>   | 2019-02-01 | 2019-02-20 | 15> 
>  |
> 
> | 2> 
> > 
>   | 2019-02-21 | 2019-03-31 | 30> 
>  |
> 
> +------------+------------+------------+--------+
> 
> UnitsSold table:
> 
> +------------+---------------+-------+
> 
> | product_id | purchase_date | units |
> 
> +------------+---------------+-------+
> 
> | 1> 
> > 
>   | 2019-02-25> 
> | 100   |
> 
> | 1> 
> > 
>   | 2019-03-01> 
> | 15> 
> |
> 
> | 2> 
> > 
>   | 2019-02-10> 
> | 200   |
> 
> | 2> 
> > 
>   | 2019-03-22> 
> | 30> 
> |
> 
> +------------+---------------+-------+
> 
> **è¾“å‡ºï¼š**
> 
> +------------+---------------+
> 
> | product_id | average_price |
> 
> +------------+---------------+
> 
> | 1> 
> > 
>   | 6.96> 
> > 
>   |
> 
> | 2> 
> > 
>   | 16.96> 
> > 
>  |
> 
> +------------+---------------+
> 
> **è§£é‡Šï¼š**
> 
> å¹³å‡å”®ä»· = äº§å“æ€»ä»· / é”€å”®çš„äº§å“æ•°é‡ã€‚
> 
> äº§å“ 1 çš„å¹³å‡å”®ä»· = ((100 * 5)+(15 * 20) )/ 115 = 6.96
> 
> äº§å“ 2 çš„å¹³å‡å”®ä»· = ((200 * 15)+(30 * 30) )/ 230 = 16.96


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```