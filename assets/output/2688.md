---
title: 2688. æŸ¥æ‰¾æ´»è·ƒç”¨æˆ· ğŸ”’
description: LeetCode 2688. æŸ¥æ‰¾æ´»è·ƒç”¨æˆ· ğŸ”’é¢˜è§£ï¼ŒFind Active Usersï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 2688. æŸ¥æ‰¾æ´»è·ƒç”¨æˆ· ğŸ”’
  - æŸ¥æ‰¾æ´»è·ƒç”¨æˆ·
  - Find Active Users
  - è§£é¢˜æ€è·¯
  - æ•°æ®åº“
---

# 2688. æŸ¥æ‰¾æ´»è·ƒç”¨æˆ· ğŸ”’

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°æ®åº“`](/tag/database.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/find-active-users) [`LeetCode`](https://leetcode.com/problems/find-active-users)

## é¢˜ç›®

Table: `Users`

> 
> 
> 
> 
> 
> +-------------+----------+ 
> 
> | Column Name | Type> 
>  | 
> 
> +-------------+----------+ 
> 
> | user_id> 
>  | int> 
>   | 
> 
> | item> 
> > 
> | varchar  |
> 
> | created_at  | datetime |
> 
> | amount> 
>   | int> 
>   |
> 
> +-------------+----------+
> 
> This table may contain duplicate records. 
> 
> Each row includes the user ID, the purchased item, the date of purchase, and the purchase amount.
> 
> 

Write a solution to identify active users. An active user is a user that has
made a second purchase **within 7  days **of any other of their purchases.

For example, if the ending date is May 31, 2023. So any date between May 31,
2023, and June 7, 2023 (inclusive) would be considered "within 7 days" of May
31, 2023.

Return a list of `user_id` which denotes the list of active users in **any
order**.

The result format is in the following example.



**Example 1:**

> Input: Users table:
> 
> +---------+-------------------+------------+--------+ 
> 
> | user_id | item> 
> > 
> > 
>   | created_at | amount |  
> 
> +---------+-------------------+------------+--------+
> 
> | 5> 
>    | Smart Crock Pot   | 2021-09-18 | 698882 |
> 
> | 6> 
>    | Smart Lock> 
> > 
> | 2021-09-14 | 11487  |
> 
> | 6> 
>    | Smart Thermostat  | 2021-09-10 | 674762 |
> 
> | 8> 
>    | Smart Light Strip | 2021-09-29 | 630773 |
> 
> | 4> 
>    | Smart Cat Feeder  | 2021-09-02 | 693545 |
> 
> | 4> 
>    | Smart Bed> 
> > 
>  | 2021-09-13 | 170249 |
> 
> +---------+-------------------+------------+--------+ 
> 
> Output:
> 
> +---------+
> 
> | user_id | 
> 
> +---------+
> 
> | 6> 
>    | 
> 
> +---------+
> 
> Explanation: 
> - User with user_id 5 has only one transaction, so he is not an active user.
> - User with user_id 6 has two transaction his first transaction was on 2021-09-10 and second transation was on 2021-09-14. The distance between the first and second transactions date is <= 7 days. So he is an active user. 
> - User with user_id 8 has only one transaction, so he is not an active user.  
> - User with user_id 4 has two transaction his first transaction was on 2021-09-02 and second transation was on 2021-09-13. The distance between the first and second transactions date is > 7 days. So he is not an active user. 
> 
> 


## é¢˜ç›®å¤§æ„

`Users` è¡¨ï¼š

> 
> 
> 
> 
> 
> +-------------+----------+ 
> 
> | å­—æ®µå> 
>    | ç±»å‹> 
>   | 
> 
> +-------------+----------+ 
> 
> | user_id> 
>  | int> 
>   | 
> 
> | item> 
> > 
> | varchar  |
> 
> | created_at  | datetime |
> 
> | amount> 
>   | int> 
>   |
> 
> +-------------+----------+
> 
> åœ¨è¿™ä¸ªè¡¨å¯èƒ½åŒ…å«é‡å¤çš„è®°å½•ã€‚
> 
> æ¯ä¸€è¡ŒåŒ…æ‹¬ user_idã€è´­ä¹°çš„å•†å“ã€è´­ä¹°æ—¥æœŸå’Œè´­ä¹°é‡‘é¢ã€‚

ç¼–å†™ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæ‰¾å‡ºæ´»è·ƒç”¨æˆ·ã€‚æ´»è·ƒç”¨æˆ·æ˜¯æŒ‡åœ¨å…¶ä»»ä½•ä¸€æ¬¡è´­ä¹°ä¹‹åçš„ **ä¸ƒå¤©å†…**  è¿›è¡Œäº†ç¬¬äºŒæ¬¡è´­ä¹°çš„ç”¨æˆ·ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœç»“æŸæ—¥æœŸæ˜¯ 2023å¹´5æœˆ31æ—¥ï¼Œé‚£ä¹ˆåœ¨ 2023å¹´5æœˆ31æ—¥ å’Œ 2023å¹´6æœˆ7æ—¥ä¹‹é—´ï¼ˆåŒ…æ‹¬è¿™ä¸¤å¤©ï¼‰çš„ä»»ä½•æ—¥æœŸéƒ½è¢«è§†ä¸º"åœ¨7å¤©å†…"ã€‚

è¿”å› **ä»»æ„é¡ºåº** çš„ `user_id` åˆ—è¡¨ï¼Œè¡¨ç¤ºæ´»è·ƒç”¨æˆ·åˆ—è¡¨ã€‚

ç»“æœçš„æ ¼å¼å¦‚ä¸‹ç¤ºä¾‹ï¼š



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** Users è¡¨:
> 
> +---------+-------------------+------------+--------+ 
> 
> | user_id | item> 
> > 
> > 
>   | created_at | amount |  
> 
> +---------+-------------------+------------+--------+
> 
> | 5> 
>    | Smart Crock Pot   | 2021-09-18 | 698882 |
> 
> | 6> 
>    | Smart Lock> 
> > 
> | 2021-09-14 | 11487  |
> 
> | 6> 
>    | Smart Thermostat  | 2021-09-10 | 674762 |
> 
> | 8> 
>    | Smart Light Strip | 2021-09-29 | 630773 |
> 
> | 4> 
>    | Smart Cat Feeder  | 2021-09-02 | 693545 |
> 
> | 4> 
>    | Smart Bed> 
> > 
>  | 2021-09-13 | 170249 |
> 
> +---------+-------------------+------------+--------+ 
> 
> **è¾“å‡ºï¼š**
> 
> +---------+
> 
> | user_id | 
> 
> +---------+
> 
> | 6> 
>    | 
> 
> +---------+
> 
> **è§£é‡Šï¼š**
> 
> â€“ user_id ä¸º 5 çš„ç”¨æˆ·åªæœ‰ä¸€ç¬”äº¤æ˜“ï¼Œå› æ­¤ä»–ä¸æ˜¯æ´»è·ƒç”¨æˆ·ã€‚
> 
> â€“ user_id ä¸º 6 çš„ç”¨æˆ·æœ‰ä¸¤ç¬”äº¤æ˜“ï¼Œç¬¬ä¸€ç¬”äº¤æ˜“æ˜¯åœ¨2021å¹´9æœˆ10æ—¥ï¼Œç¬¬äºŒç¬”äº¤æ˜“æ˜¯åœ¨2021å¹´9æœˆ14æ—¥ã€‚ç¬¬ä¸€ç¬”å’Œç¬¬äºŒç¬”äº¤æ˜“ä¹‹é—´çš„æ—¶é—´é—´éš”å°äºç­‰äº7å¤©ã€‚å› æ­¤ï¼Œä»–æ˜¯ä¸€ä¸ªæ´»è·ƒç”¨æˆ·ã€‚
> 
> â€“ user_id ä¸º 8 çš„ç”¨æˆ·åªæœ‰ä¸€ç¬”äº¤æ˜“ï¼Œå› æ­¤ä»–ä¸æ˜¯æ´»è·ƒç”¨æˆ·ã€‚
> 
> â€“ user_id ä¸º 4 çš„ç”¨æˆ·æœ‰ä¸¤ç¬”äº¤æ˜“ï¼Œç¬¬ä¸€ç¬”äº¤æ˜“æ˜¯åœ¨2021å¹´9æœˆ2æ—¥ï¼Œç¬¬äºŒç¬”äº¤æ˜“æ˜¯åœ¨2021å¹´9æœˆ13æ—¥ã€‚ç¬¬ä¸€ç¬”å’Œç¬¬äºŒç¬”äº¤æ˜“ä¹‹é—´çš„æ—¶é—´é—´éš”å¤§äº7å¤©ã€‚å› æ­¤ï¼Œä»–ä¸æ˜¯æ´»è·ƒç”¨æˆ·ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```