---
title: 2205. 有资格享受折扣的用户数量 🔒
description: LeetCode 2205. 有资格享受折扣的用户数量 🔒题解，The Number of Users That Are Eligible for Discount，包含解题思路、复杂度分析以及完整的 JavaScript 代码实现。
keywords:
  - LeetCode
  - 2205. 有资格享受折扣的用户数量 🔒
  - 有资格享受折扣的用户数量
  - The Number of Users That Are Eligible for Discount
  - 解题思路
  - 数据库
---

# 2205. 有资格享受折扣的用户数量 🔒

🟢 <font color=#15bd66>Easy</font>&emsp; 🔖&ensp; [`数据库`](/tag/database.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/the-number-of-users-that-are-eligible-for-discount) [`LeetCode`](https://leetcode.com/problems/the-number-of-users-that-are-eligible-for-discount)

## 题目

Table: `Purchases`

> 
> 
> 
> 
> 
> +-------------+----------+
> 
> | Column Name | Type> 
>  |
> 
> +-------------+----------+
> 
> | user_id> 
>  | int> 
>   |
> 
> | time_stamp  | datetime |
> 
> | amount> 
>   | int> 
>   |
> 
> +-------------+----------+
> 
> (user_id, time_stamp) is the primary key (combination of columns with unique values) for this table.
> 
> Each row contains information about the purchase time and the amount paid for the user with ID user_id.
> 
> 



A user is eligible for a discount if they had a purchase in the inclusive
interval of time `[startDate, endDate]` with at least `minAmount` amount. To
convert the dates to times, both dates should be considered as the **start**
of the day (i.e., `endDate = 2022-03-05` should be considered as the time
`2022-03-05 00:00:00`).

Write a solution to report the number of users that are eligible for a
discount.

The result format is in the following example.



**Example 1:**

> Input: 
> 
> Purchases table:
> 
> +---------+---------------------+--------+
> 
> | user_id | time_stamp> 
> > 
>   | amount |
> 
> +---------+---------------------+--------+
> 
> | 1> 
>    | 2022-04-20 09:03:00 | 4416   |
> 
> | 2> 
>    | 2022-03-19 19:24:02 | 678> 
> |
> 
> | 3> 
>    | 2022-03-18 12:03:09 | 4523   |
> 
> | 3> 
>    | 2022-03-30 09:43:42 | 626> 
> |
> 
> +---------+---------------------+--------+
> 
> startDate = 2022-03-08, endDate = 2022-03-20, minAmount = 1000
> 
> Output: 
> 
> +----------+
> 
> | user_cnt |
> 
> +----------+
> 
> | 1> 
> > 
> |
> 
> +----------+
> 
> Explanation:
> 
> Out of the three users, only User 3 is eligible for a discount.
 > - User 1 had one purchase with at least minAmount amount, but not within the time interval.
 > - User 2 had one purchase within the time interval, but with less than minAmount amount.
 > - User 3 is the only user who had a purchase that satisfies both conditions.
> 
> 



**Important Note:** This problem is basically the same as [The Users That Are
Eligible for Discount](https://leetcode.com/problems/the-users-that-are-
eligible-for-discount/description/).


## 题目大意

表: `Purchases`

> 
> 
> 
> 
> 
> +-------------+----------+
> 
> | Column Name | Type> 
>  |
> 
> +-------------+----------+
> 
> | user_id> 
>  | int> 
>   |
> 
> | time_stamp  | datetime |
> 
> | amount> 
>   | int> 
>   |
> 
> +-------------+----------+
> 
> (user_id, time_stamp) 是该表的主键。
> 
> 每一行都包含 ID 为 user_id 的用户的购买时间和支付金额的信息。
> 
> 



如果用户在时间间隔 `[startDate, endDate]` 内购买了至少 `minAmount`
金额的商品，则有资格获得折扣。若要将日期转换为时间，两个日期都应该被视为一天的 **开始** (即 `endDate = 2022-03-05`
应该被视为时间 `2022-03-05 00:00:00`)。

编写一个 SQL 来查询有资格享受折扣的用户数量。

查询结果格式如下所示。



**示例 1:**

> 
> 
> 
> 
> 
> **输入:** 
> 
> Purchases 表:
> 
> +---------+---------------------+--------+
> 
> | user_id | time_stamp> 
> > 
>   | amount |
> 
> +---------+---------------------+--------+
> 
> | 1> 
>    | 2022-04-20 09:03:00 | 4416   |
> 
> | 2> 
>    | 2022-03-19 19:24:02 | 678> 
> |
> 
> | 3> 
>    | 2022-03-18 12:03:09 | 4523   |
> 
> | 3> 
>    | 2022-03-30 09:43:42 | 626> 
> |
> 
> +---------+---------------------+--------+
> 
> startDate = 2022-03-08, endDate = 2022-03-20, minAmount = 1000
> 
> **输出:** 
> 
> +----------+
> 
> | user_cnt |
> 
> +----------+
> 
> | 1> 
> > 
> |
> 
> +----------+
> 
> **解释:**
> 
> 在这三个用户中，只有用户 3 有资格享受折扣。
 > - 用户 1 有一次购买的金额大于 minAmount，但不在时间间隔内。
 > - 用户 2 在时间间隔内有一次购买，但金额小于 minAmount。
 > - 用户 3 是唯一一个购买行为同时满足这两个条件的用户。



**重要提示：** 此问题与 [2230\. 查找可享受优惠的用户](https://leetcode.cn/problems/the-users-
that-are-eligible-for-discount/) 基本相同。


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 | 力扣 |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 177 | 第N高的薪水 | [[✓]](/problem/0177.md) |  [`数据库`](/tag/database.md) | 🟠 | [🀄️](https://leetcode.cn/problems/nth-highest-salary) [🔗](https://leetcode.com/problems/nth-highest-salary) |
| 2230 | 查找可享受优惠的用户 🔒 |  |  [`数据库`](/tag/database.md) | 🟢 | [🀄️](https://leetcode.cn/problems/the-users-that-are-eligible-for-discount) [🔗](https://leetcode.com/problems/the-users-that-are-eligible-for-discount) |