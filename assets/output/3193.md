---
title: 3193. ç»Ÿè®¡é€†åºå¯¹çš„æ•°ç›®
description: LeetCode,3193. ç»Ÿè®¡é€†åºå¯¹çš„æ•°ç›®,ç»Ÿè®¡é€†åºå¯¹çš„æ•°ç›®,Count the Number of Inversions,è§£é¢˜æ€è·¯,æ•°ç»„,åŠ¨æ€è§„åˆ’
keywords:
  - LeetCode
  - 3193. ç»Ÿè®¡é€†åºå¯¹çš„æ•°ç›®
  - ç»Ÿè®¡é€†åºå¯¹çš„æ•°ç›®
  - Count the Number of Inversions
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - åŠ¨æ€è§„åˆ’
---

# 3193. ç»Ÿè®¡é€†åºå¯¹çš„æ•°ç›®

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/count-the-number-of-inversions) [`LeetCode`](https://leetcode.com/problems/count-the-number-of-inversions)

## é¢˜ç›®

You are given an integer `n` and a 2D array `requirements`, where
`requirements[i] = [endi, cnti]` represents the end index and the
**inversion** count of each requirement.

A pair of indices `(i, j)` from an integer array `nums` is called an
**inversion** if:

  * `i < j` and `nums[i] > nums[j]`

Return the number of permutations `perm` of `[0, 1, 2, ..., n - 1]` such that
for **all** `requirements[i]`, `perm[0..endi]` has exactly `cnti` inversions.

Since the answer may be very large, return it **modulo** `109 + 7`.



**Example 1:**

**Input:** n = 3, requirements = [[2,2],[0,0]]

**Output:** 2

**Explanation:**

The two permutations are:

  * `[2, 0, 1]`
> 
> * Prefix `[2, 0, 1]` has inversions `(0, 1)` and `(0, 2)`.
> 
> * Prefix `[2]` has 0 inversions.
  * `[1, 2, 0]`
> 
> * Prefix `[1, 2, 0]` has inversions `(0, 2)` and `(1, 2)`.
> 
> * Prefix `[1]` has 0 inversions.

**Example 2:**

**Input:** n = 3, requirements = [[2,2],[1,1],[0,0]]

**Output:** 1

**Explanation:**

The only satisfying permutation is `[2, 0, 1]`:

  * Prefix `[2, 0, 1]` has inversions `(0, 1)` and `(0, 2)`.
  * Prefix `[2, 0]` has an inversion `(0, 1)`.
  * Prefix `[2]` has 0 inversions.

**Example 3:**

**Input:** n = 2, requirements = [[0,0],[1,0]]

**Output:** 1

**Explanation:**

The only satisfying permutation is `[0, 1]`:

  * Prefix `[0]` has 0 inversions.
  * Prefix `[0, 1]` has an inversion `(0, 1)`.



**Constraints:**

  * `2 <= n <= 300`
  * `1 <= requirements.length <= n`
  * `requirements[i] = [endi, cnti]`
  * `0 <= endi <= n - 1`
  * `0 <= cnti <= 400`
  * The input is generated such that there is at least one `i` such that `endi == n - 1`.
  * The input is generated such that all `endi` are unique.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` å’Œä¸€ä¸ªäºŒç»´æ•°ç»„ `requirements` ï¼Œå…¶ä¸­ `requirements[i] = [endi, cnti]`
è¡¨ç¤ºè¿™ä¸ªè¦æ±‚ä¸­çš„æœ«å°¾ä¸‹æ ‡å’Œ **é€†åºå¯¹** çš„æ•°ç›®ã€‚

æ•´æ•°æ•°ç»„ `nums` ä¸­ä¸€ä¸ªä¸‹æ ‡å¯¹ `(i, j)` å¦‚æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œé‚£ä¹ˆå®ƒä»¬è¢«ç§°ä¸ºä¸€ä¸ª **é€†åºå¯¹**  ï¼š

  * `i < j` ä¸” `nums[i] > nums[j]`

è¯·ä½ è¿”å› `[0, 1, 2, ..., n - 1]` çš„ æ’åˆ— `perm` çš„æ•°ç›®ï¼Œæ»¡è¶³å¯¹ **æ‰€æœ‰**  çš„ `requirements[i]`
éƒ½æ»¡è¶³ `perm[0..endi]` ä¸­æ°å¥½æœ‰ `cnti` ä¸ªé€†åºå¯¹ã€‚

ç”±äºç­”æ¡ˆå¯èƒ½ä¼šå¾ˆå¤§ï¼Œå°†å®ƒå¯¹ `109 + 7` **å–ä½™**  åè¿”å›ã€‚



**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** n = 3, requirements = [[2,2],[0,0]]

**è¾“å‡ºï¼š** 2

**è§£é‡Šï¼š**

ä¸¤ä¸ªæ’åˆ—ä¸ºï¼š

  * `[2, 0, 1]`
> 
> * å‰ç¼€ `[2, 0, 1]` çš„é€†åºå¯¹ä¸º `(0, 1)` å’Œ `(0, 2)` ã€‚
> 
> * å‰ç¼€ `[2]` çš„é€†åºå¯¹æ•°ç›®ä¸º 0 ä¸ªã€‚
  * `[1, 2, 0]`
> 
> * å‰ç¼€ `[1, 2, 0]` çš„é€†åºå¯¹ä¸º `(0, 2)` å’Œ `(1, 2)` ã€‚
> 
> * å‰ç¼€ `[1]` çš„é€†åºå¯¹æ•°ç›®ä¸º 0 ä¸ªã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** n = 3, requirements = [[2,2],[1,1],[0,0]]

**è¾“å‡ºï¼š** 1

**è§£é‡Šï¼š**

å”¯ä¸€æ»¡è¶³è¦æ±‚çš„æ’åˆ—æ˜¯ `[2, 0, 1]` ï¼š

  * å‰ç¼€ `[2, 0, 1]` çš„é€†åºå¯¹ä¸º `(0, 1)` å’Œ `(0, 2)` ã€‚
  * å‰ç¼€ `[2, 0]` çš„é€†åºå¯¹ä¸º `(0, 1)` ã€‚
  * å‰ç¼€ `[2]` çš„é€†åºå¯¹æ•°ç›®ä¸º 0 ã€‚

**ç¤ºä¾‹ 3ï¼š**

**è¾“å…¥ï¼š** n = 2, requirements = [[0,0],[1,0]]

**è¾“å‡ºï¼š** 1

**è§£é‡Šï¼š**

å”¯ä¸€æ»¡è¶³è¦æ±‚çš„æ’åˆ—ä¸º `[0, 1]` ï¼š

  * å‰ç¼€ `[0]` çš„é€†åºå¯¹æ•°ç›®ä¸º 0 ã€‚
  * å‰ç¼€ `[0, 1]` çš„é€†åºå¯¹ä¸º `(0, 1)` ã€‚





**æç¤ºï¼š**

  * `2 <= n <= 300`
  * `1 <= requirements.length <= n`
  * `requirements[i] = [endi, cnti]`
  * `0 <= endi <= n - 1`
  * `0 <= cnti <= 400`
  * è¾“å…¥ä¿è¯è‡³å°‘æœ‰ä¸€ä¸ª `i` æ»¡è¶³ `endi == n - 1` ã€‚
  * è¾“å…¥ä¿è¯æ‰€æœ‰çš„ `endi` äº’ä¸ç›¸åŒã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------ | :------: |
| 629 | K ä¸ªé€†åºå¯¹æ•°ç»„ |  |  [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) | <font color=#ff334b>Hard</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/k-inverse-pairs-array) [ğŸ”—](https://leetcode.com/problems/k-inverse-pairs-array) |