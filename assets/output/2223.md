# [2223. æ„é€ å­—ç¬¦ä¸²çš„æ€»å¾—åˆ†å’Œ](https://leetcode.com/problems/sum-of-scores-of-built-strings)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`å­—ç¬¦ä¸²åŒ¹é…`](/tag/string-matching.md) [`åç¼€æ•°ç»„`](/tag/suffix-array.md) [`å“ˆå¸Œå‡½æ•°`](/tag/hash-function.md) [`æ»šåŠ¨å“ˆå¸Œ`](/tag/rolling-hash.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/sum-of-scores-of-built-strings)

## é¢˜ç›®

You are **building** a string `s` of length `n` **one** character at a time,
**prepending** each new character to the **front** of the string. The strings
are labeled from `1` to `n`, where the string with length `i` is labeled `si`.

  * For example, for `s = "abaca"`, `s1 == "a"`, `s2 == "ca"`, `s3 == "aca"`, etc.

The **score** of `si` is the length of the **longest common prefix** between
`si` and `sn` (Note that `s == sn`).

Given the final string `s`, return _the**sum** of the **score** of every
_`si`.



**Example 1:**

> Input: s = "babab"
> 
> Output: 9
> 
> Explanation:
> 
> For s1 == "b", the longest common prefix is "b" which has a score of 1.
> 
> For s2 == "ab", there is no common prefix so the score is 0.
> 
> For s3 == "bab", the longest common prefix is "bab" which has a score of 3.
> 
> For s4 == "abab", there is no common prefix so the score is 0.
> 
> For s5 == "babab", the longest common prefix is "babab" which has a score of 5.
> 
> The sum of the scores is 1 + 0 + 3 + 0 + 5 = 9, so we return 9.

**Example 2:**

> Input: s = "azbazbzaz"
> 
> Output: 14
> 
> Explanation: 
> 
> For s2 == "az", the longest common prefix is "az" which has a score of 2.
> 
> For s6 == "azbzaz", the longest common prefix is "azb" which has a score of 3.
> 
> For s9 == "azbazbzaz", the longest common prefix is "azbazbzaz" which has a score of 9.
> 
> For all other si, the score is 0.
> 
> The sum of the scores is 2 + 3 + 9 = 14, so we return 14.

**Constraints:**

  * `1 <= s.length <= 10^5`
  * `s` consists of lowercase English letters.


## é¢˜ç›®å¤§æ„

ä½ éœ€è¦ä»ç©ºå­—ç¬¦ä¸²å¼€å§‹ **æ„é€ ** ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„å­—ç¬¦ä¸² `s` ï¼Œæ„é€ çš„è¿‡ç¨‹ä¸ºæ¯æ¬¡ç»™å½“å‰å­—ç¬¦ä¸² **å‰é¢**  æ·»åŠ  **ä¸€ä¸ª**
å­—ç¬¦ã€‚æ„é€ è¿‡ç¨‹ä¸­å¾—åˆ°çš„æ‰€æœ‰å­—ç¬¦ä¸²ç¼–å·ä¸º `1` åˆ° `n` ï¼Œå…¶ä¸­é•¿åº¦ä¸º `i` çš„å­—ç¬¦ä¸²ç¼–å·ä¸º `si` ã€‚

  * æ¯”æ–¹è¯´ï¼Œ`s = "abaca"` ï¼Œ`s1 == "a"` ï¼Œ`s2 == "ca"` ï¼Œ`s3 == "aca"` ä¾æ¬¡ç±»æ¨ã€‚

`si` çš„ **å¾—åˆ†**  ä¸º `si` å’Œ `sn` çš„ **æœ€é•¿å…¬å…±å‰ç¼€** çš„é•¿åº¦ï¼ˆæ³¨æ„ `s == sn` ï¼‰ã€‚

ç»™ä½ æœ€ç»ˆçš„å­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ è¿”å›æ¯ä¸€ä¸ª _ _`si` çš„ **å¾—åˆ†ä¹‹å’Œ**  ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** s = "babab"
> 
> **è¾“å‡ºï¼š** 9
> 
> **è§£é‡Šï¼š**
> 
> s1 == "b" ï¼Œæœ€é•¿å…¬å…±å‰ç¼€æ˜¯ "b" ï¼Œå¾—åˆ†ä¸º 1 ã€‚
> 
> s2 == "ab" ï¼Œæ²¡æœ‰å…¬å…±å‰ç¼€ï¼Œå¾—åˆ†ä¸º 0 ã€‚
> 
> s3 == "bab" ï¼Œæœ€é•¿å…¬å…±å‰ç¼€ä¸º "bab" ï¼Œå¾—åˆ†ä¸º 3 ã€‚
> 
> s4 == "abab" ï¼Œæ²¡æœ‰å…¬å…±å‰ç¼€ï¼Œå¾—åˆ†ä¸º 0 ã€‚
> 
> s5 == "babab" ï¼Œæœ€é•¿å…¬å…±å‰ç¼€ä¸º "babab" ï¼Œå¾—åˆ†ä¸º 5 ã€‚
> 
> å¾—åˆ†å’Œä¸º 1 + 0 + 3 + 0 + 5 = 9 ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› 9 ã€‚

**ç¤ºä¾‹ 2 ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** s = "azbazbzaz"
> 
> **è¾“å‡ºï¼š** 14
> 
> **è§£é‡Šï¼š**
> 
> s2 == "az" ï¼Œæœ€é•¿å…¬å…±å‰ç¼€ä¸º "az" ï¼Œå¾—åˆ†ä¸º 2 ã€‚
> 
> s6 == "azbzaz" ï¼Œæœ€é•¿å…¬å…±å‰ç¼€ä¸º "azb" ï¼Œå¾—åˆ†ä¸º 3 ã€‚
> 
> s9 == "azbazbzaz" ï¼Œæœ€é•¿å…¬å…±å‰ç¼€ä¸º "azbazbzaz" ï¼Œå¾—åˆ†ä¸º 9 ã€‚
> 
> å…¶ä»– si å¾—åˆ†å‡ä¸º 0 ã€‚
> 
> å¾—åˆ†å’Œä¸º 2 + 3 + 9 = 14 ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› 14 ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= s.length <= 10^5`
  * `s` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 1392 | [æœ€é•¿å¿«ä¹å‰ç¼€](https://leetcode.com/problems/longest-happy-prefix) |  |  [`å­—ç¬¦ä¸²`](/tag/string.md) [`å­—ç¬¦ä¸²åŒ¹é…`](/tag/string-matching.md) [`å“ˆå¸Œå‡½æ•°`](/tag/hash-function.md) `1+` | <font color=#ff334b>Hard</font> |