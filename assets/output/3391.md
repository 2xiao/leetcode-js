---
title: 3391. 设计一个高效的层跟踪三维二进制矩阵 🔒
description: LeetCode 3391. 设计一个高效的层跟踪三维二进制矩阵 🔒题解，Design a 3D Binary Matrix with Efficient Layer Tracking，包含解题思路、复杂度分析以及完整的 JavaScript 代码实现。
keywords:
  - LeetCode
  - 3391. 设计一个高效的层跟踪三维二进制矩阵 🔒
  - 设计一个高效的层跟踪三维二进制矩阵
  - Design a 3D Binary Matrix with Efficient Layer Tracking
  - 解题思路
  - 设计
  - 数组
  - 哈希表
  - 矩阵
  - 有序集合
  - 堆（优先队列）
---

# 3391. 设计一个高效的层跟踪三维二进制矩阵 🔒

🟠 <font color=#ffb800>Medium</font>&emsp; 🔖&ensp; [`设计`](/tag/design.md) [`数组`](/tag/array.md) [`哈希表`](/tag/hash-table.md) [`矩阵`](/tag/matrix.md) [`有序集合`](/tag/ordered-set.md) [`堆（优先队列）`](/tag/heap-priority-queue.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/design-a-3d-binary-matrix-with-efficient-layer-tracking) [`LeetCode`](https://leetcode.com/problems/design-a-3d-binary-matrix-with-efficient-layer-tracking)

## 题目

You are given a `n x n x n` **binary** 3D array `matrix`.

Implement the `Matrix3D` class:

  * `Matrix3D(int n)` Initializes the object with the 3D binary array `matrix`, where **all** elements are initially set to 0.
  * `void setCell(int x, int y, int z)` Sets the value at `matrix[x][y][z]` to 1.
  * `void unsetCell(int x, int y, int z)` Sets the value at `matrix[x][y][z]` to 0.
  * `int largestMatrix()` Returns the index `x` where `matrix[x]` contains the most number of 1's. If there are multiple such indices, return the **largest** `x`.



**Example 1:**

**Input:**  
["Matrix3D", "setCell", "largestMatrix", "setCell", "largestMatrix",
"setCell", "largestMatrix"]  
[[3], [0, 0, 0], [], [1, 1, 2], [], [0, 0, 1], []]

**Output:**  
[null, null, 0, null, 1, null, 0]

**Explanation**

Matrix3D matrix3D = new Matrix3D(3); // Initializes a `3 x 3 x 3` 3D array
`matrix`, filled with all 0's.  
matrix3D.setCell(0, 0, 0); // Sets `matrix[0][0][0]` to 1.  
matrix3D.largestMatrix(); // Returns 0. `matrix[0]` has the most number of
1's.  
matrix3D.setCell(1, 1, 2); // Sets `matrix[1][1][2]` to 1.  
matrix3D.largestMatrix(); // Returns 1. `matrix[0]` and `matrix[1]` tie with
the most number of 1's, but index 1 is bigger.  
matrix3D.setCell(0, 0, 1); // Sets `matrix[0][0][1]` to 1.  
matrix3D.largestMatrix(); // Returns 0. `matrix[0]` has the most number of
1's.

**Example 2:**

**Input:**  
["Matrix3D", "setCell", "largestMatrix", "unsetCell", "largestMatrix"]  
[[4], [2, 1, 1], [], [2, 1, 1], []]

**Output:**  
[null, null, 2, null, 3]

**Explanation**

Matrix3D matrix3D = new Matrix3D(4); // Initializes a `4 x 4 x 4` 3D array
`matrix`, filled with all 0's.  
matrix3D.setCell(2, 1, 1); // Sets `matrix[2][1][1]` to 1.  
matrix3D.largestMatrix(); // Returns 2. `matrix[2]` has the most number of
1's.  
matrix3D.unsetCell(2, 1, 1); // Sets `matrix[2][1][1]` to 0.  
matrix3D.largestMatrix(); // Returns 3. All indices from 0 to 3 tie with the
same number of 1's, but index 3 is the biggest.



**Constraints:**

  * `1 <= n <= 100`
  * `0 <= x, y, z < n`
  * At most `10^5` calls are made in total to `setCell` and `unsetCell`.
  * At most `10^4` calls are made to `largestMatrix`.


## 题目大意

给定一个 `n x n x n` 的 **二进制  **三维数组 `matrix`。

实现 `Matrix3D` 类：

  * `Matrix3D(int n)` 用三维二进制数组 `matrix` 初始化对象，其中 **所有**  元素都初始化为 0。
  * `void setCell(int x, int y, int z)` 将 `matrix[x][y][z]` 的值设为 1。
  * `void unsetCell(int x, int y, int z)` 将 `matrix[x][y][z]` 的值设为 0。
  * `int largestMatrix()` 返回包含最多 1 的 `matrix[x]` 的下标 `x`。如果这样的对应值有多个，返回 **最大的**  `x`。



**示例 1：**

**输入：**  
["Matrix3D", "setCell", "largestMatrix", "setCell", "largestMatrix",
"setCell", "largestMatrix"]  
[[3], [0, 0, 0], [], [1, 1, 2], [], [0, 0, 1], []]

**输出：**  
[null, null, 0, null, 1, null, 0]

**解释：**

Matrix3D matrix3D = new Matrix3D(3); // 初始化一个 `3 x 3 x 3` 的三维数组 `matrix`，用全 0
填充。  
matrix3D.setCell(0, 0, 0); // 将 `matrix[0][0][0]` 设为 1。  
matrix3D.largestMatrix(); // 返回 0。`matrix[0]` 1 的数量最多。  
matrix3D.setCell(1, 1, 2); // 将 `matrix[1][1][2]` 设为 1。  
matrix3D.largestMatrix(); // 返回 1。`matrix[0]` 和 `matrix[1]` 1 的数量一样多，但下标 1 更大。  
matrix3D.setCell(0, 0, 1); // 将 `matrix[0][0][1]` 设为 1。  
matrix3D.largestMatrix(); // 返回 0。`matrix[0]` 1 的数量最多。

**示例 2：**

**输入：**  
["Matrix3D", "setCell", "largestMatrix", "unsetCell", "largestMatrix"]  
[[4], [2, 1, 1], [], [2, 1, 1], []]

**输出：**  
[null, null, 2, null, 3]

**解释：**

Matrix3D matrix3D = new matrix3D(4); // 初始化一个 `4 x 4 x 4` 的三维数组 `matrix`，用全 0
填充。  
matrix3D.setCell(2, 1, 1); // 将 `matrix[2][1][1]` 设为 1。  
matrix3D.largestMatrix(); // 返回 2。`matrix[2]` 1 的数量最多。  
matrix3D.unsetCell(2, 1, 1); // 将 `matrix[2][1][1]` 设为 0。  
matrix3D.largestMatrix(); // 返回 3。0 到 3 的对应值都有相同数量的 1，但下标 3 最大。



**提示：**

  * `1 <= n <= 100`
  * `0 <= x, y, z < n`
  * 最多总共调用 `10^5` 次 `setCell` 和 `unsetCell`。
  * 最多调用 `10^4` 次 `largestMatrix`。


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```