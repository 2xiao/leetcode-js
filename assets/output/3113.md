# [3113. è¾¹ç•Œå…ƒç´ æ˜¯æœ€å¤§å€¼çš„å­æ•°ç»„æ•°ç›®](https://leetcode.com/problems/find-the-number-of-subarrays-where-boundary-elements-are-maximum)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`å•è°ƒæ ˆ`](/tag/monotonic-stack.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/find-the-number-of-subarrays-where-boundary-elements-are-maximum)

## é¢˜ç›®

You are given an array of **positive** integers `nums`.

Return the number of subarrays of `nums`, where the **first** and the **last**
elements of the subarray are _equal_ to the **largest** element in the
subarray.



**Example 1:**

**Input:** nums = [1,4,3,3,2]

**Output:** 6

**Explanation:**

There are 6 subarrays which have the first and the last elements equal to the
largest element of the subarray:

  * subarray `[**_1_** ,4,3,3,2]`, with its largest element 1. The first element is 1 and the last element is also 1.
  * subarray `[1,_**4**_ ,3,3,2]`, with its largest element 4. The first element is 4 and the last element is also 4.
  * subarray `[1,4,_**3**_ ,3,2]`, with its largest element 3. The first element is 3 and the last element is also 3.
  * subarray `[1,4,3,_**3**_ ,2]`, with its largest element 3. The first element is 3 and the last element is also 3.
  * subarray `[1,4,3,3,_**2**_]`, with its largest element 2. The first element is 2 and the last element is also 2.
  * subarray `[1,4,_**3,3**_ ,2]`, with its largest element 3. The first element is 3 and the last element is also 3.

Hence, we return 6.

**Example 2:**

**Input:** nums = [3,3,3]

**Output:** 6

**Explanation:**

There are 6 subarrays which have the first and the last elements equal to the
largest element of the subarray:

  * subarray `[_**3**_ ,3,3]`, with its largest element 3. The first element is 3 and the last element is also 3.
  * subarray `[3,**_3_** ,3]`, with its largest element 3. The first element is 3 and the last element is also 3.
  * subarray `[3,3,_**3**_]`, with its largest element 3. The first element is 3 and the last element is also 3.
  * subarray `[**_3,3_** ,3]`, with its largest element 3. The first element is 3 and the last element is also 3.
  * subarray `[3,_**3,3**_]`, with its largest element 3. The first element is 3 and the last element is also 3.
  * subarray `[_**3,3,3**_]`, with its largest element 3. The first element is 3 and the last element is also 3.

Hence, we return 6.

**Example 3:**

**Input:** nums = [1]

**Output:** 1

**Explanation:**

There is a single subarray of `nums` which is `[**_1_**]`, with its largest
element 1. The first element is 1 and the last element is also 1.

Hence, we return 1.



**Constraints:**

  * `1 <= nums.length <= 10^5`
  * `1 <= nums[i] <= 10^9`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ª **æ­£**  æ•´æ•°æ•°ç»„ `nums` ã€‚

è¯·ä½ æ±‚å‡º `nums` ä¸­æœ‰å¤šå°‘ä¸ªå­æ•°ç»„ï¼Œæ»¡è¶³å­æ•°ç»„ä¸­ **ç¬¬ä¸€ä¸ª**  å’Œ **æœ€åä¸€ä¸ª**  å…ƒç´ éƒ½æ˜¯è¿™ä¸ªå­æ•°ç»„ä¸­çš„ **æœ€å¤§**  å€¼ã€‚



**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** nums = [1,4,3,3,2]

**è¾“å‡ºï¼š** 6

**è§£é‡Šï¼š**

æ€»å…±æœ‰ 6 ä¸ªå­æ•°ç»„æ»¡è¶³ç¬¬ä¸€ä¸ªå…ƒç´ å’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯å­æ•°ç»„ä¸­çš„æœ€å¤§å€¼ï¼š

  * å­æ•°ç»„ `[__**1**__ ,4,3,3,2]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 1 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 1 ã€‚
  * å­æ•°ç»„ `[1,__**4**__ ,3,3,2]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 4 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 4 ã€‚
  * å­æ•°ç»„ `[1,4,__**3**__ ,3,2]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 3 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 3 ã€‚
  * å­æ•°ç»„ `[1,4,3,__**3**__ ,2]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 3 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 3 ã€‚
  * å­æ•°ç»„ `[1,4,3,3,__**2**__]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 2 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 2 ã€‚
  * å­æ•°ç»„ `[1,4,__**3,3**__ ,2]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 3 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 3 ã€‚

æ‰€ä»¥æˆ‘ä»¬è¿”å› 6 ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** nums = [3,3,3]

**è¾“å‡ºï¼š** 6

**è§£é‡Šï¼š**

æ€»å…±æœ‰ 6 ä¸ªå­æ•°ç»„æ»¡è¶³ç¬¬ä¸€ä¸ªå…ƒç´ å’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯å­æ•°ç»„ä¸­çš„æœ€å¤§å€¼ï¼š

  * å­æ•°ç»„ `[__**3**__ ,3,3]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 3 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 3 ã€‚
  * å­æ•°ç»„ `[3,__**3**__ ,3]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 3 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 3 ã€‚
  * å­æ•°ç»„ `[3,3,__**3**__]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 3 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 3 ã€‚
  * å­æ•°ç»„ `[__**3,3**__ ,3]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 3 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 3 ã€‚
  * å­æ•°ç»„ `[3,__**3,3**__]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 3 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 3 ã€‚
  * å­æ•°ç»„ `[__**3,3,3**__]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 3 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 3 ã€‚

æ‰€ä»¥æˆ‘ä»¬è¿”å› 6 ã€‚

**ç¤ºä¾‹ 3ï¼š**

**è¾“å…¥ï¼š** nums = [1]

**è¾“å‡ºï¼š** 1

**è§£é‡Šï¼š**

`nums` ä¸­åªæœ‰ä¸€ä¸ªå­æ•°ç»„ `[_**1**_]` ï¼Œæœ€å¤§å…ƒç´ ä¸º 1 ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 1 ã€‚

æ‰€ä»¥æˆ‘ä»¬è¿”å› 1 ã€‚



**æç¤ºï¼š**

  * `1 <= nums.length <= 10^5`
  * `1 <= nums[i] <= 10^9`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 795 | [åŒºé—´å­æ•°ç»„ä¸ªæ•°](https://leetcode.com/problems/number-of-subarrays-with-bounded-maximum) |  |  [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) | <font color=#ffb800>Medium</font> |
| 2444 | [ç»Ÿè®¡å®šç•Œå­æ•°ç»„çš„æ•°ç›®](https://leetcode.com/problems/count-subarrays-with-fixed-bounds) |  |  [`é˜Ÿåˆ—`](/tag/queue.md) [`æ•°ç»„`](/tag/array.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) `1+` | <font color=#ff334b>Hard</font> |
| 2962 | [ç»Ÿè®¡æœ€å¤§å…ƒç´ å‡ºç°è‡³å°‘ K æ¬¡çš„å­æ•°ç»„](https://leetcode.com/problems/count-subarrays-where-max-element-appears-at-least-k-times) |  |  [`æ•°ç»„`](/tag/array.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) | <font color=#ffb800>Medium</font> |