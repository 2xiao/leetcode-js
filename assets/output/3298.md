# [3298. ç»Ÿè®¡é‡æ–°æ’åˆ—ååŒ…å«å¦ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­å­—ç¬¦ä¸²æ•°ç›® II](https://leetcode.com/problems/count-substrings-that-can-be-rearranged-to-contain-a-string-ii)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/leetcode/outline/tag/string.md) [`æ»‘åŠ¨çª—å£`](/leetcode/outline/tag/sliding-window.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/count-substrings-that-can-be-rearranged-to-contain-a-string-ii)


## é¢˜ç›®

You are given two strings `word1` and `word2`.

A string `x` is called **valid** if `x` can be rearranged to have `word2` as a
prefix.

Return the total number of **valid** substrings of `word1`.

**Note** that the memory limits in this problem are **smaller** than usual, so
you **must** implement a solution with a _linear_ runtime complexity.



**Example 1:**

**Input:** word1 = "bcca", word2 = "abc"

**Output:** 1

**Explanation:**

The only valid substring is `"bcca"` which can be rearranged to `"abcc"`
having `"abc"` as a prefix.

**Example 2:**

**Input:** word1 = "abcabc", word2 = "abc"

**Output:** 10

**Explanation:**

All the substrings except substrings of size 1 and size 2 are valid.

**Example 3:**

**Input:** word1 = "abcabc", word2 = "aaabc"

**Output:** 0



**Constraints:**

  * `1 <= word1.length <= 10^6`
  * `1 <= word2.length <= 10^4`
  * `word1` and `word2` consist only of lowercase English letters.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² `word1` å’Œ `word2` ã€‚

å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸² `x` é‡æ–°æ’åˆ—åï¼Œ`word2` æ˜¯é‡æ’å­—ç¬¦ä¸²çš„ å‰ç¼€ ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°å­—ç¬¦ä¸² `x` æ˜¯ **åˆæ³•çš„**  ã€‚

è¯·ä½ è¿”å› `word1` ä¸­ **åˆæ³•**  å­å­—ç¬¦ä¸² çš„æ•°ç›®ã€‚

**æ³¨æ„**  ï¼Œè¿™ä¸ªé—®é¢˜ä¸­çš„å†…å­˜é™åˆ¶æ¯”å…¶ä»–é¢˜ç›®è¦ **å°**  ï¼Œæ‰€ä»¥ä½  **å¿…é¡»**  å®ç°ä¸€ä¸ªçº¿æ€§å¤æ‚åº¦çš„è§£æ³•ã€‚



**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** word1 = "bcca", word2 = "abc"

**è¾“å‡ºï¼š** 1

**è§£é‡Šï¼š**

å”¯ä¸€åˆæ³•çš„å­å­—ç¬¦ä¸²æ˜¯ `"bcca"` ï¼Œå¯ä»¥é‡æ–°æ’åˆ—å¾—åˆ° `"abcc"` ï¼Œ`"abc"` æ˜¯å®ƒçš„å‰ç¼€ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** word1 = "abcabc", word2 = "abc"

**è¾“å‡ºï¼š** 10

**è§£é‡Šï¼š**

é™¤äº†é•¿åº¦ä¸º 1 å’Œ 2 çš„æ‰€æœ‰å­å­—ç¬¦ä¸²éƒ½æ˜¯åˆæ³•çš„ã€‚

**ç¤ºä¾‹ 3ï¼š**

**è¾“å…¥ï¼š** word1 = "abcabc", word2 = "aaabc"

**è¾“å‡ºï¼š** 0



**è§£é‡Šï¼š**

  * `1 <= word1.length <= 10^6`
  * `1 <= word2.length <= 10^4`
  * `word1` å’Œ `word2` éƒ½åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®
- [76. æœ€å°è¦†ç›–å­ä¸²](./0076.md)

::::
