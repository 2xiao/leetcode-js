# [1467. ä¸¤ä¸ªç›’å­ä¸­çƒçš„é¢œè‰²æ•°ç›¸åŒçš„æ¦‚ç‡](https://leetcode.com/problems/probability-of-a-two-boxes-having-the-same-number-of-distinct-balls)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`æ•°å­¦`](/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`å›æº¯`](/tag/backtracking.md) [`ç»„åˆæ•°å­¦`](/tag/combinatorics.md) [`æ¦‚ç‡ä¸ç»Ÿè®¡`](/tag/probability-and-statistics.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/probability-of-a-two-boxes-having-the-same-number-of-distinct-balls)

## é¢˜ç›®

Given `2n` balls of `k` distinct colors. You will be given an integer array
`balls` of size `k` where `balls[i]` is the number of balls of color `i`.

All the balls will be **shuffled uniformly at random** , then we will
distribute the first `n` balls to the first box and the remaining `n` balls to
the other box (Please read the explanation of the second example carefully).

Please note that the two boxes are considered different. For example, if we
have two balls of colors `a` and `b`, and two boxes `[]` and `()`, then the
distribution `[a] (b)` is considered different than the distribution `[b] (a)
`(Please read the explanation of the first example carefully).

Return _the probability_ that the two boxes have the same number of distinct
balls. Answers within `10-5` of the actual value will be accepted as correct.



**Example 1:**

> Input: balls = [1,1]
> 
> Output: 1.00000
> 
> Explanation: Only 2 ways to divide the balls equally:
> - A ball of color 1 to box 1 and a ball of color 2 to box 2
> - A ball of color 2 to box 1 and a ball of color 1 to box 2
> 
> In both ways, the number of distinct colors in each box is equal. The probability is 2/2 = 1

**Example 2:**

> Input: balls = [2,1,1]
> 
> Output: 0.66667
> 
> Explanation: We have the set of balls [1, 1, 2, 3]
> 
> This set of balls will be shuffled randomly and we may have one of the 12 distinct shuffles with equal probability (i.e. 1/12):
> 
> [1,1 / 2,3], [1,1 / 3,2], [1,2 / 1,3], [1,2 / 3,1], [1,3 / 1,2], [1,3 / 2,1], [2,1 / 1,3], [2,1 / 3,1], [2,3 / 1,1], [3,1 / 1,2], [3,1 / 2,1], [3,2 / 1,1]
> 
> After that, we add the first two balls to the first box and the second two balls to the second box.
> 
> We can see that 8 of these 12 possible random distributions have the same number of distinct colors of balls in each box.
> 
> Probability is 8/12 = 0.66667

**Example 3:**

> Input: balls = [1,2,1,2]
> 
> Output: 0.60000
> 
> Explanation: The set of balls is [1, 2, 2, 3, 4, 4]. It is hard to display all the 180 possible random shuffles of this set but it is easy to check that 108 of them will have the same number of distinct colors in each box.
> 
> Probability = 108 / 180 = 0.6

**Constraints:**

  * `1 <= balls.length <= 8`
  * `1 <= balls[i] <= 6`
  * `sum(balls)` is even.


## é¢˜ç›®å¤§æ„

æ¡Œé¢ä¸Šæœ‰ `2n` ä¸ªé¢œè‰²ä¸å®Œå…¨ç›¸åŒçš„çƒï¼Œçƒä¸Šçš„é¢œè‰²å…±æœ‰ `k` ç§ã€‚ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º `k` çš„æ•´æ•°æ•°ç»„ `balls` ï¼Œå…¶ä¸­ `balls[i]`
æ˜¯é¢œè‰²ä¸º `i` çš„çƒçš„æ•°é‡ã€‚

æ‰€æœ‰çš„çƒéƒ½å·²ç» **éšæœºæ‰“ä¹±é¡ºåº** ï¼Œå‰ `n` ä¸ªçƒæ”¾å…¥ç¬¬ä¸€ä¸ªç›’å­ï¼Œå `n` ä¸ªçƒæ”¾å…¥å¦ä¸€ä¸ªç›’å­ï¼ˆè¯·è®¤çœŸé˜…è¯»ç¤ºä¾‹ 2 çš„è§£é‡Šéƒ¨åˆ†ï¼‰ã€‚

**æ³¨æ„ï¼š** è¿™ä¸¤ä¸ªç›’å­æ˜¯ä¸åŒçš„ã€‚ä¾‹å¦‚ï¼Œä¸¤ä¸ªçƒé¢œè‰²åˆ†åˆ«ä¸º `a` å’Œ `b`ï¼Œç›’å­åˆ†åˆ«ä¸º `[]` å’Œ `()`ï¼Œé‚£ä¹ˆ `[a] (b)` å’Œ `[b]
(a)` è¿™ä¸¤ç§åˆ†é…æ–¹å¼æ˜¯ä¸åŒçš„ï¼ˆè¯·è®¤çœŸé˜…è¯»ç¤ºä¾‹çš„è§£é‡Šéƒ¨åˆ†ï¼‰ã€‚

è¯·è¿”å›ã€Œä¸¤ä¸ªç›’å­ä¸­çƒçš„é¢œè‰²æ•°ç›¸åŒã€çš„æƒ…å†µçš„æ¦‚ç‡ã€‚ç­”æ¡ˆä¸çœŸå®å€¼è¯¯å·®åœ¨ `10^-5` ä»¥å†…ï¼Œåˆ™è¢«è§†ä¸ºæ­£ç¡®ç­”æ¡ˆ



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** balls = [1,1]
> 
> **è¾“å‡ºï¼š** 1.00000
> 
> **è§£é‡Šï¼š** çƒå¹³å‡åˆ†é…çš„æ–¹å¼åªæœ‰ä¸¤ç§ï¼š
> - é¢œè‰²ä¸º 1 çš„çƒæ”¾å…¥ç¬¬ä¸€ä¸ªç›’å­ï¼Œé¢œè‰²ä¸º 2 çš„çƒæ”¾å…¥ç¬¬äºŒä¸ªç›’å­
> - é¢œè‰²ä¸º 2 çš„çƒæ”¾å…¥ç¬¬ä¸€ä¸ªç›’å­ï¼Œé¢œè‰²ä¸º 1 çš„çƒæ”¾å…¥ç¬¬äºŒä¸ªç›’å­
> 
> è¿™ä¸¤ç§åˆ†é…ï¼Œä¸¤ä¸ªç›’å­ä¸­çƒçš„é¢œè‰²æ•°éƒ½ç›¸åŒã€‚æ‰€ä»¥æ¦‚ç‡ä¸º 2/2 = 1 ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** balls = [2,1,1]
> 
> **è¾“å‡ºï¼š** 0.66667
> 
> **è§£é‡Šï¼š** çƒçš„åˆ—è¡¨ä¸º [1, 1, 2, 3]
> 
> éšæœºæ‰“ä¹±ï¼Œå¾—åˆ° 12 ç§ç­‰æ¦‚ç‡çš„ä¸åŒæ‰“ä¹±æ–¹æ¡ˆï¼Œæ¯ç§æ–¹æ¡ˆæ¦‚ç‡ä¸º 1/12 ï¼š
> 
> [1,1 / 2,3], [1,1 / 3,2], [1,2 / 1,3], [1,2 / 3,1], [1,3 / 1,2], [1,3 / 2,1], [2,1 / 1,3], [2,1 / 3,1], [2,3 / 1,1], [3,1 / 1,2], [3,1 / 2,1], [3,2 / 1,1]
> 
> ç„¶åï¼Œæˆ‘ä»¬å°†å‰ä¸¤ä¸ªçƒæ”¾å…¥ç¬¬ä¸€ä¸ªç›’å­ï¼Œåä¸¤ä¸ªçƒæ”¾å…¥ç¬¬äºŒä¸ªç›’å­ã€‚
> 
> è¿™ 12 ç§å¯èƒ½çš„éšæœºæ‰“ä¹±æ–¹å¼ä¸­çš„ 8 ç§æ»¡è¶³ã€Œä¸¤ä¸ªç›’å­ä¸­çƒçš„é¢œè‰²æ•°ç›¸åŒã€ã€‚
> 
> æ¦‚ç‡ = 8/12 = 0.66667
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** balls = [1,2,1,2]
> 
> **è¾“å‡ºï¼š** 0.60000
> 
> **è§£é‡Šï¼š** çƒçš„åˆ—è¡¨ä¸º [1, 2, 2, 3, 4, 4]ã€‚è¦æƒ³æ˜¾ç¤ºæ‰€æœ‰ 180 ç§éšæœºæ‰“ä¹±æ–¹æ¡ˆæ˜¯å¾ˆéš¾çš„ï¼Œä½†åªæ£€æŸ¥ã€Œä¸¤ä¸ªç›’å­ä¸­çƒçš„é¢œè‰²æ•°ç›¸åŒã€çš„ 108 ç§æƒ…å†µæ˜¯æ¯”è¾ƒå®¹æ˜“çš„ã€‚
> 
> æ¦‚ç‡ = 108 / 180 = 0.6 ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= balls.length <= 8`
  * `1 <= balls[i] <= 6`
  * `sum(balls)` æ˜¯å¶æ•°


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```