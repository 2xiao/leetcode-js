---
title: 3383. æ–½æ³•æ‰€éœ€æœ€ä½ç¬¦æ–‡æ•°é‡ ğŸ”’
description: LeetCode 3383. æ–½æ³•æ‰€éœ€æœ€ä½ç¬¦æ–‡æ•°é‡ ğŸ”’é¢˜è§£ï¼ŒMinimum Runes to Add to Cast Spellï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 3383. æ–½æ³•æ‰€éœ€æœ€ä½ç¬¦æ–‡æ•°é‡ ğŸ”’
  - æ–½æ³•æ‰€éœ€æœ€ä½ç¬¦æ–‡æ•°é‡
  - Minimum Runes to Add to Cast Spell
  - è§£é¢˜æ€è·¯
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - å¹¶æŸ¥é›†
  - å›¾
  - æ‹“æ‰‘æ’åº
  - æ•°ç»„
---

# 3383. æ–½æ³•æ‰€éœ€æœ€ä½ç¬¦æ–‡æ•°é‡ ğŸ”’

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å¹¶æŸ¥é›†`](/tag/union-find.md) [`å›¾`](/tag/graph.md) [`æ‹“æ‰‘æ’åº`](/tag/topological-sort.md) [`æ•°ç»„`](/tag/array.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/minimum-runes-to-add-to-cast-spell) [`LeetCode`](https://leetcode.com/problems/minimum-runes-to-add-to-cast-spell)

## é¢˜ç›®

Alice has just graduated from wizard school, and wishes to cast a magic spell
to celebrate. The magic spell contains certain **focus points** where magic
needs to be concentrated, and some of these focus points contain **magic
crystals** which serve as the spell's energy source. Focus points can be
linked through **directed runes** , which channel magic flow from one focus
point to another.

You are given a integer `n` denoting the _number_ of focus points and an array
of integers `crystals` where `crystals[i]` indicates a focus point which holds
a magic crystal. You are also given two integer arrays `flowFrom` and
`flowTo`, which represent the existing **directed runes**. The `ith` rune
allows magic to freely flow from focus point `flowFrom[i]` to focus point
`flowTo[i]`.

You need to find the number of directed runes Alice must add to her spell,
such that _each_ focus point either:

  * **Contains** a magic crystal.
  * **Receives** magic flow _from_ another focus point.

Return the **minimum** number of directed runes that she should add.



**Example 1:**

**Input:** n = 6, crystals = [0], flowFrom = [0,1,2,3], flowTo = [1,2,3,0]

**Output:** 2

**Explanation:**  

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/3300-3399/3383.Minimum%20Runes%20to%20Add%20to%20Cast%20Spell/images/runesexample0.png)

Add two directed runes:

  * From focus point 0 to focus point 4.
  * From focus point 0 to focus point 5.

**Example 2:**

**Input:** n = 7, crystals = [3,5], flowFrom = [0,1,2,3,5], flowTo =
[1,2,0,4,6]

**Output:** 1

**Explanation:**  

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/3300-3399/3383.Minimum%20Runes%20to%20Add%20to%20Cast%20Spell/images/runesexample1.png)

Add a directed rune from focus point 4 to focus point 2.



**Constraints:**

  * `2 <= n <= 10^5`
  * `1 <= crystals.length <= n`
  * `0 <= crystals[i] <= n - 1`
  * `1 <= flowFrom.length == flowTo.length <= min(2 * 105, (n * (n - 1)) / 2)`
  * `0 <= flowFrom[i], flowTo[i] <= n - 1`
  * `flowFrom[i] != flowTo[i]`
  * All pre-existing directed runes are **distinct**.


## é¢˜ç›®å¤§æ„

Alice åˆšåˆšä»å·«å¸ˆå­¦æ ¡æ¯•ä¸šï¼Œå¹¶ä¸”å¸Œæœ›æ–½å±•ä¸€ä¸ªé­”æ³•å’’è¯­æ¥åº†ç¥ã€‚é­”æ³•å’’è¯­åŒ…å«æŸäº›éœ€è¦é›†ä¸­é­”åŠ›çš„ç„¦ç‚¹ï¼Œå…¶ä¸­ä¸€äº›ç„¦ç‚¹å«æœ‰ä½œä¸ºå’’è¯­èƒ½é‡æºçš„é­”æ³•æ°´æ™¶ã€‚ç„¦ç‚¹å¯ä»¥é€šè¿‡
**æœ‰å‘ç¬¦æ–‡**  è¿›è¡Œè¿æ¥ï¼Œè¿™äº›ç¬¦æ–‡å°†é­”åŠ›æµä»ä¸€ä¸ªç„¦ç‚¹ä¼ è¾“åˆ°å¦ä¸€ä¸ªç„¦ç‚¹ã€‚

ç»™å®šä¸€ä¸ªæ•´æ•° `n` è¡¨ç¤ºç„¦ç‚¹çš„æ•°é‡ï¼Œä»¥åŠä¸€ä¸ªæ•´æ•°æ•°ç»„ `crystals`ï¼Œå…¶ä¸­ `crystals[i]` è¡¨ç¤ºæœ‰é­”æ³•æ°´æ™¶çš„ç„¦ç‚¹ã€‚åŒæ—¶ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„
`flowFrom` å’Œ `flowTo`ï¼Œè¡¨ç¤ºå­˜åœ¨çš„ **æœ‰å‘ç¬¦æ–‡** ã€‚ç¬¬ `ith` ä¸ªç¬¦æ–‡å…è®¸é­”åŠ›æµä»ç„¦ç‚¹ `flowFrom[i]` ä¼ è¾“åˆ°ç„¦ç‚¹
`flowTo[i]`ã€‚

ä½ éœ€è¦æ‰¾åˆ° Alice å¿…é¡»æ·»åŠ åˆ°å¥¹çš„å’’è¯­ä¸­çš„å®šå‘ç¬¦æ–‡æ•°é‡ï¼Œä½¿å¾—æ¯ä¸ªç„¦ç‚¹è¦ä¹ˆï¼š

  * **åŒ…å«**  ä¸€ä¸ªé­”æ³•æ°´æ™¶ã€‚
  * ä»å…¶å®ƒç„¦ç‚¹ **æ¥æ”¶**  é­”åŠ›æµã€‚

è¿”å›å¥¹æ‰€éœ€è¦æ·»åŠ çš„ **æœ€å°‘**  æœ‰å‘ç¬¦æ–‡æ•°é‡ã€‚



**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** n = 6, crystals = [0], flowFrom = [0,1,2,3], flowTo = [1,2,3,0]

**è¾“å‡ºï¼š** 2

**è§£é‡Šï¼š**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/3300-3399/3383.Minimum%20Runes%20to%20Add%20to%20Cast%20Spell/images/runesexample0.png)

æ·»åŠ ä¸¤ä¸ªæœ‰å‘ç¬¦æ–‡ï¼š

  * ä»ç„¦ç‚¹ 0 åˆ°ç„¦ç‚¹ 4ã€‚
  * ä»ç„¦ç‚¹ 0 åˆ°ç„¦ç‚¹ 5ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** n = 7, crystals = [3,5], flowFrom = [0,1,2,3,5], flowTo = [1,2,0,4,6]

**è¾“å‡ºï¼š** 1

**è§£é‡Šï¼š**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/3300-3399/3383.Minimum%20Runes%20to%20Add%20to%20Cast%20Spell/images/runesexample1.png)

æ·»åŠ ä»ç„¦ç‚¹ 4 åˆ°ç„¦ç‚¹ 2 çš„æœ‰å‘ç¬¦æ–‡ã€‚



**æç¤ºï¼š**

  * `2 <= n <= 10^5`
  * `1 <= crystals.length <= n`
  * `0 <= crystals[i] <= n - 1`
  * `1 <= flowFrom.length == flowTo.length <= min(2 * 105, (n * (n - 1)) / 2)`
  * `0 <= flowFrom[i], flowTo[i] <= n - 1`
  * `flowFrom[i] != flowTo[i]`
  * æ‰€æœ‰çš„æœ‰å‘ç¬¦æ–‡ **äº’ä¸ç›¸åŒ** ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1568 | ä½¿é™†åœ°åˆ†ç¦»çš„æœ€å°‘å¤©æ•° |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`æ•°ç»„`](/tag/array.md) `2+` | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/minimum-number-of-days-to-disconnect-island) [ğŸ”—](https://leetcode.com/problems/minimum-number-of-days-to-disconnect-island) |
| 2846 | è¾¹æƒé‡å‡ç­‰æŸ¥è¯¢ |  |  [`æ ‘`](/tag/tree.md) [`å›¾`](/tag/graph.md) [`æ•°ç»„`](/tag/array.md) `1+` | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/minimum-edge-weight-equilibrium-queries-in-a-tree) [ğŸ”—](https://leetcode.com/problems/minimum-edge-weight-equilibrium-queries-in-a-tree) |