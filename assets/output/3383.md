---
title: 3383. 施法所需最低符文数量 🔒
description: LeetCode 3383. 施法所需最低符文数量 🔒题解，Minimum Runes to Add to Cast Spell，包含解题思路、复杂度分析以及完整的 JavaScript 代码实现。
keywords:
  - LeetCode
  - 3383. 施法所需最低符文数量 🔒
  - 施法所需最低符文数量
  - Minimum Runes to Add to Cast Spell
  - 解题思路
  - 深度优先搜索
  - 广度优先搜索
  - 并查集
  - 图
  - 拓扑排序
  - 数组
---

# 3383. 施法所需最低符文数量 🔒

🔴 <font color=#ff334b>Hard</font>&emsp; 🔖&ensp; [`深度优先搜索`](/tag/depth-first-search.md) [`广度优先搜索`](/tag/breadth-first-search.md) [`并查集`](/tag/union-find.md) [`图`](/tag/graph.md) [`拓扑排序`](/tag/topological-sort.md) [`数组`](/tag/array.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/minimum-runes-to-add-to-cast-spell) [`LeetCode`](https://leetcode.com/problems/minimum-runes-to-add-to-cast-spell)

## 题目

Alice has just graduated from wizard school, and wishes to cast a magic spell
to celebrate. The magic spell contains certain **focus points** where magic
needs to be concentrated, and some of these focus points contain **magic
crystals** which serve as the spell's energy source. Focus points can be
linked through **directed runes** , which channel magic flow from one focus
point to another.

You are given a integer `n` denoting the _number_ of focus points and an array
of integers `crystals` where `crystals[i]` indicates a focus point which holds
a magic crystal. You are also given two integer arrays `flowFrom` and
`flowTo`, which represent the existing **directed runes**. The `ith` rune
allows magic to freely flow from focus point `flowFrom[i]` to focus point
`flowTo[i]`.

You need to find the number of directed runes Alice must add to her spell,
such that _each_ focus point either:

  * **Contains** a magic crystal.
  * **Receives** magic flow _from_ another focus point.

Return the **minimum** number of directed runes that she should add.



**Example 1:**

**Input:** n = 6, crystals = [0], flowFrom = [0,1,2,3], flowTo = [1,2,3,0]

**Output:** 2

**Explanation:**  

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/3300-3399/3383.Minimum%20Runes%20to%20Add%20to%20Cast%20Spell/images/runesexample0.png)

Add two directed runes:

  * From focus point 0 to focus point 4.
  * From focus point 0 to focus point 5.

**Example 2:**

**Input:** n = 7, crystals = [3,5], flowFrom = [0,1,2,3,5], flowTo =
[1,2,0,4,6]

**Output:** 1

**Explanation:**  

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/3300-3399/3383.Minimum%20Runes%20to%20Add%20to%20Cast%20Spell/images/runesexample1.png)

Add a directed rune from focus point 4 to focus point 2.



**Constraints:**

  * `2 <= n <= 10^5`
  * `1 <= crystals.length <= n`
  * `0 <= crystals[i] <= n - 1`
  * `1 <= flowFrom.length == flowTo.length <= min(2 * 105, (n * (n - 1)) / 2)`
  * `0 <= flowFrom[i], flowTo[i] <= n - 1`
  * `flowFrom[i] != flowTo[i]`
  * All pre-existing directed runes are **distinct**.


## 题目大意

Alice 刚刚从巫师学校毕业，并且希望施展一个魔法咒语来庆祝。魔法咒语包含某些需要集中魔力的焦点，其中一些焦点含有作为咒语能量源的魔法水晶。焦点可以通过
**有向符文**  进行连接，这些符文将魔力流从一个焦点传输到另一个焦点。

给定一个整数 `n` 表示焦点的数量，以及一个整数数组 `crystals`，其中 `crystals[i]` 表示有魔法水晶的焦点。同时给定两个整数数组
`flowFrom` 和 `flowTo`，表示存在的 **有向符文** 。第 `ith` 个符文允许魔力流从焦点 `flowFrom[i]` 传输到焦点
`flowTo[i]`。

你需要找到 Alice 必须添加到她的咒语中的定向符文数量，使得每个焦点要么：

  * **包含**  一个魔法水晶。
  * 从其它焦点 **接收**  魔力流。

返回她所需要添加的 **最少**  有向符文数量。



**示例 1：**

**输入：** n = 6, crystals = [0], flowFrom = [0,1,2,3], flowTo = [1,2,3,0]

**输出：** 2

**解释：**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/3300-3399/3383.Minimum%20Runes%20to%20Add%20to%20Cast%20Spell/images/runesexample0.png)

添加两个有向符文：

  * 从焦点 0 到焦点 4。
  * 从焦点 0 到焦点 5。

**示例 2：**

**输入：** n = 7, crystals = [3,5], flowFrom = [0,1,2,3,5], flowTo = [1,2,0,4,6]

**输出：** 1

**解释：**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/3300-3399/3383.Minimum%20Runes%20to%20Add%20to%20Cast%20Spell/images/runesexample1.png)

添加从焦点 4 到焦点 2 的有向符文。



**提示：**

  * `2 <= n <= 10^5`
  * `1 <= crystals.length <= n`
  * `0 <= crystals[i] <= n - 1`
  * `1 <= flowFrom.length == flowTo.length <= min(2 * 105, (n * (n - 1)) / 2)`
  * `0 <= flowFrom[i], flowTo[i] <= n - 1`
  * `flowFrom[i] != flowTo[i]`
  * 所有的有向符文 **互不相同** 。


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 | 力扣 |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1568 | 使陆地分离的最少天数 |  |  [`深度优先搜索`](/tag/depth-first-search.md) [`广度优先搜索`](/tag/breadth-first-search.md) [`数组`](/tag/array.md) `2+` | 🔴 | [🀄️](https://leetcode.cn/problems/minimum-number-of-days-to-disconnect-island) [🔗](https://leetcode.com/problems/minimum-number-of-days-to-disconnect-island) |
| 2846 | 边权重均等查询 |  |  [`树`](/tag/tree.md) [`图`](/tag/graph.md) [`数组`](/tag/array.md) `1+` | 🔴 | [🀄️](https://leetcode.cn/problems/minimum-edge-weight-equilibrium-queries-in-a-tree) [🔗](https://leetcode.com/problems/minimum-edge-weight-equilibrium-queries-in-a-tree) |