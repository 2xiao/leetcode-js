# [2354. ä¼˜è´¨æ•°å¯¹çš„æ•°ç›®](https://leetcode.com/problems/number-of-excellent-pairs)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/leetcode/outline/tag/bit-manipulation.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`äºŒåˆ†æŸ¥æ‰¾`](/leetcode/outline/tag/binary-search.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/number-of-excellent-pairs)


## é¢˜ç›®

You are given a **0-indexed** positive integer array `nums` and a positive
integer `k`.

A pair of numbers `(num1, num2)` is called **excellent** if the following
conditions are satisfied:

  * **Both** the numbers `num1` and `num2` exist in the array `nums`.
  * The sum of the number of set bits in `num1 OR num2` and `num1 AND num2` is greater than or equal to `k`, where `OR` is the bitwise **OR** operation and `AND` is the bitwise **AND** operation.

Return _the number of**distinct** excellent pairs_.

Two pairs `(a, b)` and `(c, d)` are considered distinct if either `a != c` or
`b != d`. For example, `(1, 2)` and `(2, 1)` are distinct.

**Note** that a pair `(num1, num2)` such that `num1 == num2` can also be
excellent if you have at least **one** occurrence of `num1` in the array.



**Example 1:**

> Input: nums = [1,2,3,1], k = 3
> 
> Output: 5
> 
> Explanation: The excellent pairs are the following:
> - (3, 3). (3 AND 3) and (3 OR 3) are both equal to (11) in binary. The total number of set bits is 2 + 2 = 4, which is greater than or equal to k = 3.
> - (2, 3) and (3, 2). (2 AND 3) is equal to (10) in binary, and (2 OR 3) is equal to (11) in binary. The total number of set bits is 1 + 2 = 3.
> - (1, 3) and (3, 1). (1 AND 3) is equal to (01) in binary, and (1 OR 3) is equal to (11) in binary. The total number of set bits is 1 + 2 = 3.
> 
> So the number of excellent pairs is 5.

**Example 2:**

> Input: nums = [5,1,1], k = 10
> 
> Output: 0
> 
> Explanation: There are no excellent pairs for this array.

**Constraints:**

  * `1 <= nums.length <= 10^5`
  * `1 <= nums[i] <= 10^9`
  * `1 <= k <= 60`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹çš„æ­£æ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ­£æ•´æ•° `k` ã€‚

å¦‚æœæ»¡è¶³ä¸‹è¿°æ¡ä»¶ï¼Œåˆ™æ•°å¯¹ `(num1, num2)` æ˜¯ **ä¼˜è´¨æ•°å¯¹** ï¼š

  * `num1` å’Œ `num2` **éƒ½** åœ¨æ•°ç»„ `nums` ä¸­å­˜åœ¨ã€‚
  * `num1 OR num2` å’Œ `num1 AND num2` çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­å€¼ä¸º **1** çš„ä½æ•°ä¹‹å’Œå¤§äºç­‰äº `k` ï¼Œå…¶ä¸­ `OR` æ˜¯æŒ‰ä½ **æˆ–** æ“ä½œï¼Œè€Œ `AND` æ˜¯æŒ‰ä½ **ä¸** æ“ä½œã€‚

è¿”å› **ä¸åŒ** ä¼˜è´¨æ•°å¯¹çš„æ•°ç›®ã€‚

å¦‚æœ `a != c` æˆ–è€… `b != d` ï¼Œåˆ™è®¤ä¸º `(a, b)` å’Œ `(c, d)` æ˜¯ä¸åŒçš„ä¸¤ä¸ªæ•°å¯¹ã€‚ä¾‹å¦‚ï¼Œ`(1, 2)` å’Œ `(2,
1)` ä¸åŒã€‚

**æ³¨æ„ï¼š** å¦‚æœ `num1` åœ¨æ•°ç»„ä¸­è‡³å°‘å‡ºç° **ä¸€æ¬¡** ï¼Œåˆ™æ»¡è¶³ `num1 == num2` çš„æ•°å¯¹ `(num1, num2)`
ä¹Ÿå¯ä»¥æ˜¯ä¼˜è´¨æ•°å¯¹ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [1,2,3,1], k = 3
> 
> **è¾“å‡ºï¼š** 5
> 
> **è§£é‡Šï¼š** æœ‰å¦‚ä¸‹å‡ ä¸ªä¼˜è´¨æ•°å¯¹ï¼š
> - (3, 3)ï¼š(3 AND 3) å’Œ (3 OR 3) çš„äºŒè¿›åˆ¶è¡¨ç¤ºéƒ½ç­‰äº (11) ã€‚å€¼ä¸º 1 çš„ä½æ•°å’Œç­‰äº 2 + 2 = 4 ï¼Œå¤§äºç­‰äº k = 3 ã€‚
> - (2, 3) å’Œ (3, 2)ï¼š (2 AND 3) çš„äºŒè¿›åˆ¶è¡¨ç¤ºç­‰äº (10) ï¼Œ(2 OR 3) çš„äºŒè¿›åˆ¶è¡¨ç¤ºç­‰äº (11) ã€‚å€¼ä¸º 1 çš„ä½æ•°å’Œç­‰äº 1 + 2 = 3 ã€‚
> - (1, 3) å’Œ (3, 1)ï¼š (1 AND 3) çš„äºŒè¿›åˆ¶è¡¨ç¤ºç­‰äº (01) ï¼Œ(1 OR 3) çš„äºŒè¿›åˆ¶è¡¨ç¤ºç­‰äº (11) ã€‚å€¼ä¸º 1 çš„ä½æ•°å’Œç­‰äº 1 + 2 = 3 ã€‚
> 
> æ‰€ä»¥ä¼˜è´¨æ•°å¯¹çš„æ•°ç›®æ˜¯ 5 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [5,1,1], k = 10
> 
> **è¾“å‡ºï¼š** 0
> 
> **è§£é‡Šï¼š** è¯¥æ•°ç»„ä¸­ä¸å­˜åœ¨ä¼˜è´¨æ•°å¯¹ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= nums.length <= 10^5`
  * `1 <= nums[i] <= 10^9`
  * `1 <= k <= 60`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 1 | [ä¸¤æ•°ä¹‹å’Œ](https://leetcode.com/problems/two-sum) | [[âœ“]](https://2xiao.github.io/leetcode-js/leetcode/problem/0001) |  [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) | <font color=#15bd66>Easy</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
