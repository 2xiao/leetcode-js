---
title: 1485. å…‹éš†å«éšæœºæŒ‡é’ˆçš„äºŒå‰æ ‘ ğŸ”’
description: LeetCode,1485. å…‹éš†å«éšæœºæŒ‡é’ˆçš„äºŒå‰æ ‘ ğŸ”’,å…‹éš†å«éšæœºæŒ‡é’ˆçš„äºŒå‰æ ‘,Clone Binary Tree With Random Pointer,è§£é¢˜æ€è·¯,æ ‘,æ·±åº¦ä¼˜å…ˆæœç´¢,å¹¿åº¦ä¼˜å…ˆæœç´¢,å“ˆå¸Œè¡¨,äºŒå‰æ ‘
keywords:
  - LeetCode
  - 1485. å…‹éš†å«éšæœºæŒ‡é’ˆçš„äºŒå‰æ ‘ ğŸ”’
  - å…‹éš†å«éšæœºæŒ‡é’ˆçš„äºŒå‰æ ‘
  - Clone Binary Tree With Random Pointer
  - è§£é¢˜æ€è·¯
  - æ ‘
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
  - å“ˆå¸Œè¡¨
  - äºŒå‰æ ‘
---

# 1485. å…‹éš†å«éšæœºæŒ‡é’ˆçš„äºŒå‰æ ‘ ğŸ”’

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/clone-binary-tree-with-random-pointer) [`LeetCode`](https://leetcode.com/problems/clone-binary-tree-with-random-pointer)

## é¢˜ç›®

A binary tree is given such that each node contains an additional random
pointer which could point to any node in the tree or null.

Return a [**deep
copy**](https://en.wikipedia.org/wiki/Object_copying#Deep_copy) of the tree.

The tree is represented in the same input/output way as normal binary trees
where each node is represented as a pair of `[val, random_index]` where:

  * `val`: an integer representing `Node.val`
  * `random_index`: the index of the node (in the input) where the random pointer points to, or `null` if it does not point to any node.

You will be given the tree in class `Node` and you should return the cloned
tree in class `NodeCopy`. `NodeCopy` class is just a clone of `Node` class
with the same attributes and constructors.



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1400-1499/1485.Clone%20Binary%20Tree%20With%20Random%20Pointer/images/clone_1.png)

> Input: root = [[1,null],null,[4,3],[7,0]]
> 
> Output: [[1,null],null,[4,3],[7,0]]
> 
> Explanation: The original binary tree is [1,null,4,7].
> 
> The random pointer of node one is null, so it is represented as [1, null].
> 
> The random pointer of node 4 is node 7, so it is represented as [4, 3] where 3 is the index of node 7 in the array representing the tree.
> 
> The random pointer of node 7 is node 1, so it is represented as [7, 0] where 0 is the index of node 1 in the array representing the tree.

**Example 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1400-1499/1485.Clone%20Binary%20Tree%20With%20Random%20Pointer/images/clone_2.png)

> Input: root = [[1,4],null,[1,0],null,[1,5],[1,5]]
> 
> Output: [[1,4],null,[1,0],null,[1,5],[1,5]]
> 
> Explanation: The random pointer of a node can be the node itself.

**Example 3:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1400-1499/1485.Clone%20Binary%20Tree%20With%20Random%20Pointer/images/clone_3.png)

> Input: root = [[1,6],[2,5],[3,4],[4,3],[5,2],[6,1],[7,0]]
> 
> Output: [[1,6],[2,5],[3,4],[4,3],[5,2],[6,1],[7,0]]

**Constraints:**

  * The number of nodes in the `tree` is in the range `[0, 1000].`
  * `1 <= Node.val <= 10^6`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½å«æœ‰ä¸€ä¸ªé™„åŠ çš„éšæœºæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆå¯ä»¥æŒ‡å‘æ ‘ä¸­çš„ä»»ä½•èŠ‚ç‚¹æˆ–è€…æŒ‡å‘ç©ºï¼ˆ`null`ï¼‰ã€‚

è¯·è¿”å›è¯¥æ ‘çš„
**[æ·±æ‹·è´](https://baike.baidu.com/item/%E6%B7%B1%E6%8B%B7%E8%B4%9D/22785317?fr=aladdin)**
ã€‚

è¯¥æ ‘çš„è¾“å…¥/è¾“å‡ºå½¢å¼ä¸æ™®é€šäºŒå‰æ ‘ç›¸åŒï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ç”¨ `[val, random_index]` è¡¨ç¤ºï¼š

  * `val`ï¼šè¡¨ç¤º `Node.val` çš„æ•´æ•°
  * `random_index`ï¼šéšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ï¼ˆåœ¨è¾“å…¥çš„æ ‘æ•°ç»„ä¸­ï¼‰çš„ä¸‹æ ‡ï¼›å¦‚æœæœªæŒ‡å‘ä»»ä½•èŠ‚ç‚¹ï¼Œåˆ™ä¸º `null` ã€‚

è¯¥æ ‘ä»¥ `Node` ç±»çš„å½¢å¼ç»™å‡ºï¼Œè€Œä½ éœ€è¦ä»¥ `NodeCopy` ç±»çš„å½¢å¼è¿”å›å…‹éš†å¾—åˆ°çš„æ ‘ã€‚`NodeCopy` ç±»å’Œ`Node` ç±»å®šä¹‰ä¸€è‡´ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1400-1499/1485.Clone%20Binary%20Tree%20With%20Random%20Pointer/images/clone_1.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** root = [[1,null],null,[4,3],[7,0]]
> 
> **è¾“å‡ºï¼š**[[1,null],null,[4,3],[7,0]]
> 
> **è§£é‡Šï¼š** åˆå§‹äºŒå‰æ ‘ä¸º [1,null,4,7] ã€‚
> 
> èŠ‚ç‚¹ 1 çš„éšæœºæŒ‡é’ˆæŒ‡å‘ nullï¼Œæ‰€ä»¥è¡¨ç¤ºä¸º [1, null] ã€‚
> 
> èŠ‚ç‚¹ 4 çš„éšæœºæŒ‡é’ˆæŒ‡å‘ 7ï¼Œæ‰€ä»¥è¡¨ç¤ºä¸º [4, 3] å…¶ä¸­ 3 æ˜¯æ ‘æ•°ç»„ä¸­èŠ‚ç‚¹ 7 å¯¹åº”çš„ä¸‹æ ‡ã€‚
> 
> èŠ‚ç‚¹ 7 çš„éšæœºæŒ‡é’ˆæŒ‡å‘ 1ï¼Œæ‰€ä»¥è¡¨ç¤ºä¸º [7, 0] å…¶ä¸­ 0 æ˜¯æ ‘æ•°ç»„ä¸­èŠ‚ç‚¹ 1 å¯¹åº”çš„ä¸‹æ ‡ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1400-1499/1485.Clone%20Binary%20Tree%20With%20Random%20Pointer/images/clone_2.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** root = [[1,4],null,[1,0],null,[1,5],[1,5]]
> 
> **è¾“å‡ºï¼š**[[1,4],null,[1,0],null,[1,5],[1,5]]
> 
> **è§£é‡Šï¼š** èŠ‚ç‚¹çš„éšæœºæŒ‡é’ˆå¯ä»¥æŒ‡å‘å®ƒè‡ªèº«ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1400-1499/1485.Clone%20Binary%20Tree%20With%20Random%20Pointer/images/e2.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** root = [[1,6],[2,5],[3,4],[4,3],[5,2],[6,1],[7,0]]
> 
> **è¾“å‡ºï¼š**[[1,6],[2,5],[3,4],[4,3],[5,2],[6,1],[7,0]]
> 
> 



**æç¤ºï¼š**

  * `tree` ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´æ˜¯ `[0, 1000]`
  * æ¯ä¸ªèŠ‚ç‚¹çš„å€¼çš„èŒƒå›´æ˜¯ `[1, 10^6]`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 133 | å…‹éš†å›¾ | [[âœ“]](/problem/0133.md) |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) [`å›¾`](/tag/graph.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/clone-graph) [ğŸ”—](https://leetcode.com/problems/clone-graph) |
| 138 | éšæœºé“¾è¡¨çš„å¤åˆ¶ | [[âœ“]](/problem/0138.md) |  [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`é“¾è¡¨`](/tag/linked-list.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/copy-list-with-random-pointer) [ğŸ”—](https://leetcode.com/problems/copy-list-with-random-pointer) |
| 1490 | å…‹éš† N å‰æ ‘ ğŸ”’ |  |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md) `1+` | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/clone-n-ary-tree) [ğŸ”—](https://leetcode.com/problems/clone-n-ary-tree) |