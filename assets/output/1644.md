---
title: 1644. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ II ğŸ”’
description: LeetCode,1644. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ II ğŸ”’,äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ II,Lowest Common Ancestor of a Binary Tree II,è§£é¢˜æ€è·¯,æ ‘,æ·±åº¦ä¼˜å…ˆæœç´¢,äºŒå‰æ ‘
keywords:
  - LeetCode
  - 1644. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ II ğŸ”’
  - äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ II
  - Lowest Common Ancestor of a Binary Tree II
  - è§£é¢˜æ€è·¯
  - æ ‘
  - æ·±åº¦ä¼˜å…ˆæœç´¢
  - äºŒå‰æ ‘
---

# 1644. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ II ğŸ”’

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree-ii) [`LeetCode`](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-ii)

## é¢˜ç›®

Given the `root` of a binary tree, return _the lowest common ancestor (LCA) of
two given nodes,_`p` _and_`q`. If either node `p` or `q` **does not exist** in
the tree, return `null`. All values of the nodes in the tree are **unique**.

According to the **[definition of LCA on
Wikipedia](https://en.wikipedia.org/wiki/Lowest_common_ancestor)** : "The
lowest common ancestor of two nodes `p` and `q` in a binary tree `T` is the
lowest node that has both `p` and `q` as **descendants** (where we allow **a
node to be a descendant of itself**)". A **descendant** of a node `x` is a
node `y` that is on the path from node `x` to some leaf node.



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1644.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20II/images/binarytree.png)

> Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1
> 
> Output: 3
> 
> Explanation: The LCA of nodes 5 and 1 is 3.

**Example 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1644.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20II/images/binarytree.png)

> Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4
> 
> Output: 5
> 
> Explanation: The LCA of nodes 5 and 4 is 5. A node can be a descendant of itself according to the definition of LCA.

**Example 3:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1644.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20II/images/binarytree.png)

> Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 10
> 
> Output: null
> 
> Explanation: Node 10 does not exist in the tree, so return null.

**Constraints:**

  * The number of nodes in the tree is in the range `[1, 104]`.
  * `-10^9 <= Node.val <= 10^9`
  * All `Node.val` are **unique**.
  * `p != q`



**Follow up:**  Can you find the LCA traversing the tree, without checking
nodes existence?


## é¢˜ç›®å¤§æ„

ç»™å®šä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root`ï¼Œè¿”å›ç»™å®šèŠ‚ç‚¹ `p` å’Œ `q` çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆLCAï¼‰èŠ‚ç‚¹ã€‚å¦‚æœ `p` æˆ– `q` ä¹‹ä¸€**ä¸å­˜åœ¨**
äºè¯¥äºŒå‰æ ‘ä¸­ï¼Œè¿”å› `null`ã€‚æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å€¼éƒ½æ˜¯äº’ä¸ç›¸åŒçš„ã€‚

æ ¹æ®[ç»´åŸºç™¾ç§‘ä¸­å¯¹æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹çš„å®šä¹‰](https://en.wikipedia.org/wiki/Lowest_common_ancestor)ï¼šâ€œä¸¤ä¸ªèŠ‚ç‚¹
`p` å’Œ `q` åœ¨äºŒå‰æ ‘ `T` ä¸­çš„æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹æ˜¯**åä»£èŠ‚ç‚¹** ä¸­æ—¢åŒ…æ‹¬ `p` åˆåŒ…æ‹¬ `q`
çš„æœ€æ·±èŠ‚ç‚¹ï¼ˆæˆ‘ä»¬å…è®¸**ä¸€ä¸ªèŠ‚ç‚¹ä¸ºè‡ªèº«çš„ä¸€ä¸ªåä»£èŠ‚ç‚¹** ï¼‰â€ã€‚ä¸€ä¸ªèŠ‚ç‚¹ `x` çš„**åä»£èŠ‚ç‚¹** æ˜¯èŠ‚ç‚¹ `x` åˆ°æŸä¸€å¶èŠ‚ç‚¹é—´çš„è·¯å¾„ä¸­çš„èŠ‚ç‚¹ `y`ã€‚



**ç¤ºä¾‹ 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1644.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20II/images/binarytree.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1
> 
> **è¾“å‡ºï¼š** 3
> 
> **è§£é‡Šï¼š** èŠ‚ç‚¹ 5 å’Œ 1 çš„å…±åŒç¥–å…ˆèŠ‚ç‚¹æ˜¯ 3ã€‚

**ç¤ºä¾‹ 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1644.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20II/images/binarytree.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4
> 
> **è¾“å‡ºï¼š** 5
> 
> **è§£é‡Šï¼š** èŠ‚ç‚¹ 5 å’Œ 4 çš„å…±åŒç¥–å…ˆèŠ‚ç‚¹æ˜¯ 5ã€‚æ ¹æ®å…±åŒç¥–å…ˆèŠ‚ç‚¹çš„å®šä¹‰ï¼Œä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥æ˜¯è‡ªèº«çš„åä»£èŠ‚ç‚¹ã€‚

**ç¤ºä¾‹ 3:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1644.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20II/images/binarytree.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 10
> 
> **è¾“å‡ºï¼š** null
> 
> **è§£é‡Šï¼š** èŠ‚ç‚¹ 10 ä¸å­˜åœ¨äºæ ‘ä¸­ï¼Œæ‰€ä»¥è¿”å› nullã€‚
> 
> 



**æç¤º:**

  * æ ‘ä¸­èŠ‚ç‚¹ä¸ªæ•°çš„èŒƒå›´æ˜¯ `[1, 104]`
  * `-10^9 <= Node.val <= 10^9`
  * æ‰€æœ‰èŠ‚ç‚¹çš„å€¼ `Node.val` **äº’ä¸ç›¸åŒ**
  * `p != q`



**è¿›é˜¶ï¼š** åœ¨ä¸æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥éå†æ ‘æ‰¾å‡ºæœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å—ï¼Ÿ


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 235 | [äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree) | [[âœ“]](/problem/0235.md) |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æœç´¢æ ‘`](/tag/binary-search-tree.md) `1+` | <font color=#ffb800>Medium</font> |
| 236 | [äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree) | [[âœ“]](/problem/0236.md) |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`äºŒå‰æ ‘`](/tag/binary-tree.md) | <font color=#ffb800>Medium</font> |
| 1650 | [äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ III ğŸ”’](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-iii) |  |  [`æ ‘`](/tag/tree.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) `1+` | <font color=#ffb800>Medium</font> |
| 1676 | [äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ IV ğŸ”’](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-iv) |  |  [`æ ‘`](/tag/tree.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) `1+` | <font color=#ffb800>Medium</font> |