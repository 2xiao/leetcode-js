---
title: 2254. è®¾è®¡è§†é¢‘å…±äº«å¹³å° ğŸ”’
description: LeetCode,2254. è®¾è®¡è§†é¢‘å…±äº«å¹³å° ğŸ”’,è®¾è®¡è§†é¢‘å…±äº«å¹³å°,Design Video Sharing Platform,è§£é¢˜æ€è·¯,æ ˆ,è®¾è®¡,å“ˆå¸Œè¡¨,æœ‰åºé›†åˆ
keywords:
  - LeetCode
  - 2254. è®¾è®¡è§†é¢‘å…±äº«å¹³å° ğŸ”’
  - è®¾è®¡è§†é¢‘å…±äº«å¹³å°
  - Design Video Sharing Platform
  - è§£é¢˜æ€è·¯
  - æ ˆ
  - è®¾è®¡
  - å“ˆå¸Œè¡¨
  - æœ‰åºé›†åˆ
---

# 2254. è®¾è®¡è§†é¢‘å…±äº«å¹³å° ğŸ”’

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/tag/stack.md) [`è®¾è®¡`](/tag/design.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æœ‰åºé›†åˆ`](/tag/ordered-set.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/design-video-sharing-platform) [`LeetCode`](https://leetcode.com/problems/design-video-sharing-platform)

## é¢˜ç›®

You have a video sharing platform where users can upload and delete videos.
Each `video` is a **string** of digits, where the `ith` digit of the string
represents the content of the video at minute `i`. For example, the first
digit represents the content at minute `0` in the video, the second digit
represents the content at minute `1` in the video, and so on. Viewers of
videos can also like and dislike videos. Internally, the platform keeps track
of the **number of views, likes, and dislikes** on each video.

When a video is uploaded, it is associated with the smallest available integer
`videoId` starting from `0`. Once a video is deleted, the `videoId` associated
with that video can be reused for another video.

Implement the `VideoSharingPlatform` class:

  * `VideoSharingPlatform()` Initializes the object.
  * `int upload(String video)` The user uploads a `video`. Return the `videoId` associated with the video.
  * `void remove(int videoId)` If there is a video associated with `videoId`, remove the video.
  * `String watch(int videoId, int startMinute, int endMinute)` If there is a video associated with `videoId`, increase the number of views on the video by `1` and return the substring of the video string starting at `startMinute` and ending at `min(endMinute, video.length - 1``)` (**inclusive**). Otherwise, return `"-1"`.
  * `void like(int videoId)` Increases the number of likes on the video associated with `videoId` by `1` if there is a video associated with `videoId`.
  * `void dislike(int videoId)` Increases the number of dislikes on the video associated with `videoId` by `1` if there is a video associated with `videoId`.
  * `int[] getLikesAndDislikes(int videoId)` Return a **0-indexed** integer array `values` of length `2` where `values[0]` is the number of likes and `values[1]` is the number of dislikes on the video associated with `videoId`. If there is no video associated with `videoId`, return `[-1]`.
  * `int getViews(int videoId)` Return the number of views on the video associated with `videoId`, if there is no video associated with `videoId`, return `-1`.



**Example 1:**

> 
> 
> 
> 
> 
> **Input**
> 
> ["VideoSharingPlatform", "upload", "upload", "remove", "remove", "upload", "watch", "watch", "like", "dislike", "dislike", "getLikesAndDislikes", "getViews"]
> 
> [[], ["123"], ["456"], [4], [0], ["789"], [1, 0, 5], [1, 0, 1], [1], [1], [1], [1], [1]]
> 
> **Output**
> 
> [null, 0, 1, null, null, 0, "456", "45", null, null, null, [1, 2], 2]
> 
> 
> 
> **Explanation**
> 
> VideoSharingPlatform videoSharingPlatform = new VideoSharingPlatform();
> 
> videoSharingPlatform.upload("123");> 
> > 
>   // The smallest available videoId is 0, so return 0.
> 
> videoSharingPlatform.upload("456");> 
> > 
>   // The smallest available videoId is 1, so return 1.
> 
> videoSharingPlatform.remove(4);> 
> > 
> > 
>   // There is no video associated with videoId 4, so do nothing.
> 
> videoSharingPlatform.remove(0);> 
> > 
> > 
>   // Remove the video associated with videoId 0.
> 
> videoSharingPlatform.upload("789");> 
> > 
>   // Since the video associated with videoId 0 was deleted,
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>  // 0 is the smallest available videoId, so return 0.
> 
> videoSharingPlatform.watch(1, 0, 5);> 
> > 
>  // The video associated with videoId 1 is "456".
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>  // The video from minute 0 to min(5, 3 - 1) = 2 is "456", so return "456".
> 
> videoSharingPlatform.watch(1, 0, 1);> 
> > 
>  // The video associated with videoId 1 is "456".
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>  // The video from minute 0 to min(1, 3 - 1) = 1 is "45", so return "45".
> 
> videoSharingPlatform.like(1);> 
> > 
> > 
> > 
> // Increase the number of likes on the video associated with videoId 1.
> 
> videoSharingPlatform.dislike(1);> 
> > 
> > 
>  // Increase the number of dislikes on the video associated with videoId 1.
> 
> videoSharingPlatform.dislike(1);> 
> > 
> > 
>  // Increase the number of dislikes on the video associated with videoId 1.
> 
> videoSharingPlatform.getLikesAndDislikes(1); // There is 1 like and 2 dislikes on the video associated with videoId 1, so return [1, 2].
> 
> videoSharingPlatform.getViews(1);> 
> > 
> > 
> // The video associated with videoId 1 has 2 views, so return 2.

**Example 2:**

> 
> 
> 
> 
> 
> **Input**
> 
> ["VideoSharingPlatform", "remove", "watch", "like", "dislike", "getLikesAndDislikes", "getViews"]
> 
> [[], [0], [0, 0, 1], [0], [0], [0], [0]]
> 
> **Output**
> 
> [null, null, "-1", null, null, [-1], -1]
> 
> 
> 
> **Explanation**
> 
> VideoSharingPlatform videoSharingPlatform = new VideoSharingPlatform();
> 
> videoSharingPlatform.remove(0);> 
> > 
> > 
>   // There is no video associated with videoId 0, so do nothing.
> 
> videoSharingPlatform.watch(0, 0, 1);> 
> > 
>  // There is no video associated with videoId 0, so return "-1".
> 
> videoSharingPlatform.like(0);> 
> > 
> > 
> > 
> // There is no video associated with videoId 0, so do nothing.
> 
> videoSharingPlatform.dislike(0);> 
> > 
> > 
>  // There is no video associated with videoId 0, so do nothing.
> 
> videoSharingPlatform.getLikesAndDislikes(0); // There is no video associated with videoId 0, so return [-1].
> 
> videoSharingPlatform.getViews(0);> 
> > 
> > 
> // There is no video associated with videoId 0, so return -1.

**Constraints:**

  * `1 <= video.length <= 10^5`
  * The sum of `video.length` over all calls to `upload` does not exceed `10^5`
  * `video` consists of digits.
  * `0 <= videoId <= 10^5`
  * `0 <= startMinute < endMinute < 10^5`
  * `startMinute < video.length`
  * The sum of `endMinute - startMinute` over all calls to `watch` does not exceed `10^5`.
  * At most `10^5` calls **in total** will be made to all functions.


## é¢˜ç›®å¤§æ„

ä½ æœ‰ä¸€ä¸ªè§†é¢‘åˆ†äº«å¹³å°ï¼Œç”¨æˆ·å¯ä»¥ä¸Šä¼ å’Œåˆ é™¤è§†é¢‘ã€‚æ¯ä¸ª `video` éƒ½æ˜¯ **å­—ç¬¦ä¸²  **ç±»å‹çš„æ•°å­—ï¼Œå…¶ä¸­å­—ç¬¦ä¸²çš„ç¬¬ `i` ä½è¡¨ç¤ºè§†é¢‘ä¸­ç¬¬ `i`
åˆ†é’Ÿçš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªæ•°å­—è¡¨ç¤ºè§†é¢‘ä¸­ç¬¬ `0` åˆ†é’Ÿçš„å†…å®¹ï¼Œç¬¬äºŒä¸ªæ•°å­—è¡¨ç¤ºè§†é¢‘ä¸­ç¬¬ `1`
åˆ†é’Ÿçš„å†…å®¹ï¼Œä»¥æ­¤ç±»æ¨ã€‚è§†é¢‘çš„è§‚ä¼—ä¹Ÿå¯ä»¥å–œæ¬¢å’Œä¸å–œæ¬¢è§†é¢‘ã€‚è¯¥å¹³å°ä¼šè·Ÿè¸ªæ¯ä¸ªè§†é¢‘çš„ **è§‚çœ‹æ¬¡æ•°** ã€**ç‚¹èµæ¬¡æ•°  **å’Œ **ä¸å–œæ¬¢æ¬¡æ•°** ã€‚

å½“è§†é¢‘ä¸Šä¼ æ—¶ï¼Œå®ƒä¸æœ€å°å¯ç”¨æ•´æ•° `videoId` ç›¸å…³è”ï¼Œ`videoId` ä» `0` å¼€å§‹çš„ã€‚ä¸€æ—¦ä¸€ä¸ªè§†é¢‘è¢«åˆ é™¤ï¼Œä¸è¯¥è§†é¢‘å…³è”çš„ `videoId`
å°±å¯ä»¥ç”¨äºå¦ä¸€ä¸ªè§†é¢‘ã€‚

å®ç° `VideoSharingPlatform` ç±»:

  * `VideoSharingPlatform()` åˆå§‹åŒ–å¯¹è±¡ã€‚
  * `int upload(String video)` ç”¨æˆ·ä¸Šä¼ ä¸€ä¸ª `video`. è¿”å›ä¸è§†é¢‘ç›¸å…³è”çš„`videoId` ã€‚
  * `void remove(int videoId)` å¦‚æœå­˜åœ¨ä¸ `videoId` ç›¸å…³è”çš„è§†é¢‘ï¼Œåˆ™åˆ é™¤è¯¥è§†é¢‘ã€‚
  * `String watch(int videoId, int startMinute, int endMinute)` å¦‚æœæœ‰ä¸€ä¸ªè§†é¢‘ä¸ `videoId` ç›¸å…³è”ï¼Œåˆ™å°†è¯¥è§†é¢‘çš„è§‚çœ‹æ¬¡æ•°å¢åŠ  `1`ï¼Œå¹¶è¿”å›è§†é¢‘å­—ç¬¦ä¸²çš„å­å­—ç¬¦ä¸²ï¼Œä» `startMinute` å¼€å§‹ï¼Œä»¥ `min(endMinute, video.length - 1``)`(å«è¾¹ç•Œ) ç»“æŸã€‚å¦åˆ™ï¼Œè¿”å› `"-1"`ã€‚
  * `void like(int videoId)` å¦‚æœå­˜åœ¨ä¸ `videoId` ç›¸å…³è”çš„è§†é¢‘ï¼Œåˆ™å°†ä¸ `videoId` ç›¸å…³è”çš„è§†é¢‘çš„ç‚¹èµæ•°å¢åŠ  `1`ã€‚
  * `void dislike(int videoId)` å¦‚æœå­˜åœ¨ä¸ `videoId` ç›¸å…³è”çš„è§†é¢‘ï¼Œåˆ™å°†ä¸ `videoId` ç›¸å…³è”çš„è§†é¢‘ä¸Šçš„ä¸å–œæ¬¢æ¬¡æ•°å¢åŠ  `1`ã€‚
  * `int[] getLikesAndDislikes(int videoId)` è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º `2` ï¼Œ**ä¸‹æ ‡ä» 0 å¼€å§‹** çš„æ•´å‹æ•°ç»„ï¼Œå…¶ä¸­ `values[0]` æ˜¯ä¸ `videoId` ç›¸å…³è”çš„è§†é¢‘ä¸Šçš„ç‚¹èµæ•°ï¼Œ`values[1]` æ˜¯ä¸å–œæ¬¢æ•°ã€‚å¦‚æœæ²¡æœ‰ä¸ `videoId` ç›¸å…³è”çš„è§†é¢‘ï¼Œåˆ™è¿”å› `[-1]`ã€‚
  * `int getViews(int videoId)` è¿”å›ä¸ `videoId` ç›¸å…³è”çš„è§†é¢‘çš„è§‚çœ‹æ¬¡æ•°ï¼Œå¦‚æœæ²¡æœ‰ä¸ `videoId` ç›¸å…³è”çš„è§†é¢‘ï¼Œè¿”å› `-1`ã€‚



**ç¤ºä¾‹ 1:**

> 
> 
> 
> 
> 
> **è¾“å…¥**
> 
> ["VideoSharingPlatform", "upload", "upload", "remove", "remove", "upload", "watch", "watch", "like", "dislike", "dislike", "getLikesAndDislikes", "getViews"]
> 
> [[], ["123"], ["456"], [4], [0], ["789"], [1, 0, 5], [1, 0, 1], [1], [1], [1], [1], [1]]
> 
> **è¾“å‡º**
> 
> [null, 0, 1, null, null, 0, "456", "45", null, null, null, [1, 2], 2]
> 
> 
> 
> **è§£é‡Š**
> 
> VideoSharingPlatform videoSharingPlatform = new VideoSharingPlatform();
> 
> videoSharingPlatform.upload("123");> 
> > 
>   // æœ€å°çš„å¯ç”¨ videoId æ˜¯ 0ï¼Œæ‰€ä»¥è¿”å› 0ã€‚
> 
> videoSharingPlatform.upload("456");> 
> > 
>   // æœ€å°çš„å¯ç”¨ videoId æ˜¯ 1ï¼Œæ‰€ä»¥è¿”å› 1ã€‚
> 
> videoSharingPlatform.remove(4);> 
> > 
> > 
>   // æ²¡æœ‰ä¸ videoId 4 ç›¸å…³è”çš„è§†é¢‘ï¼Œæ‰€ä»¥ä»€ä¹ˆéƒ½ä¸åšã€‚
> 
> videoSharingPlatform.remove(0);> 
> > 
> > 
>   // åˆ é™¤ä¸ videoId 0 å…³è”çš„è§†é¢‘ã€‚
> 
> videoSharingPlatform.upload("789");> 
> > 
>   // ç”±äºä¸ videoId 0 ç›¸å…³è”çš„è§†é¢‘è¢«åˆ é™¤ï¼Œ
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>  // 0 æ˜¯æœ€å°çš„å¯ç”¨ videoIdï¼Œæ‰€ä»¥è¿”å› 0ã€‚
> 
> videoSharingPlatform.watch(1, 0, 5);> 
> > 
>  // ä¸ videoId 1 å…³è”çš„è§†é¢‘ä¸º "456"ã€‚
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>  // ä»åˆ†é’Ÿ 0 åˆ°åˆ†é’Ÿ min(5,3 - 1)= 2 çš„è§†é¢‘ä¸º "456"ï¼Œå› æ­¤è¿”å› "456"ã€‚
> 
> videoSharingPlatform.watch(1, 0, 1);> 
> > 
>  // ä¸ videoId 1 å…³è”çš„è§†é¢‘ä¸º "456"ã€‚
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>  // ä»åˆ†é’Ÿ 0 åˆ°åˆ†é’Ÿ min(1,3 - 1)= 1 çš„è§†é¢‘ä¸º "45"ï¼Œå› æ­¤è¿”å› "45"ã€‚
> 
> videoSharingPlatform.like(1);> 
> > 
> > 
> > 
> // å¢åŠ ä¸ videoId 1 ç›¸å…³çš„è§†é¢‘çš„ç‚¹èµæ•°ã€‚
> 
> videoSharingPlatform.dislike(1);> 
> > 
> > 
>  // å¢åŠ ä¸ videoId 1 ç›¸å…³è”çš„è§†é¢‘çš„ä¸å–œæ¬¢çš„æ•°é‡ã€‚
> 
> videoSharingPlatform.dislike(1);> 
> > 
> > 
>  // å¢åŠ ä¸ videoId 1 ç›¸å…³è”çš„è§†é¢‘çš„ä¸å–œæ¬¢çš„æ•°é‡ã€‚
> 
> videoSharingPlatform.getLikesAndDislikes(1); // åœ¨ä¸ videoId 1 ç›¸å…³çš„è§†é¢‘ä¸­æœ‰ 1 ä¸ªå–œæ¬¢å’Œ 2 ä¸ªä¸å–œæ¬¢ï¼Œå› æ­¤è¿”å›[1,2]ã€‚
> 
> videoSharingPlatform.getViews(1);> 
> > 
> > 
> // ä¸ videoId 1 ç›¸å…³è”çš„è§†é¢‘æœ‰ 2 ä¸ªè§‚çœ‹æ•°ï¼Œå› æ­¤è¿”å›2ã€‚
> 
> 

**ç¤ºä¾‹  2:**

> 
> 
> 
> 
> 
> **è¾“å…¥**
> 
> ["VideoSharingPlatform", "remove", "watch", "like", "dislike", "getLikesAndDislikes", "getViews"]
> 
> [[], [0], [0, 0, 1], [0], [0], [0], [0]]
> 
> **è¾“å‡º**
> 
> [null, null, "-1", null, null, [-1], -1]
> 
> 
> 
> **è§£é‡Š**
> 
> VideoSharingPlatform videoSharingPlatform = new VideoSharingPlatform();
> 
> videoSharingPlatform.remove(0);> 
> > 
> > 
>   // æ²¡æœ‰ä¸ videoId 0 ç›¸å…³è”çš„è§†é¢‘ï¼Œæ‰€ä»¥ä»€ä¹ˆéƒ½ä¸åšã€‚
> 
> videoSharingPlatform.watch(0, 0, 1);> 
> > 
>  // æ²¡æœ‰ä¸ videoId 0 ç›¸å…³è”çš„è§†é¢‘ï¼Œå› æ­¤è¿”å› "-1"ã€‚
> 
> videoSharingPlatform.like(0);> 
> > 
> > 
> > 
> // æ²¡æœ‰ä¸ videoId 0 ç›¸å…³è”çš„è§†é¢‘ï¼Œæ‰€ä»¥ä»€ä¹ˆéƒ½ä¸åšã€‚
> 
> videoSharingPlatform.dislike(0);> 
> > 
> > 
>  // æ²¡æœ‰ä¸ videoId 0 ç›¸å…³è”çš„è§†é¢‘ï¼Œæ‰€ä»¥ä»€ä¹ˆéƒ½ä¸åšã€‚
> 
> videoSharingPlatform.getLikesAndDislikes(0); // æ²¡æœ‰ä¸ videoId 0 ç›¸å…³è”çš„è§†é¢‘ï¼Œå› æ­¤è¿”å› [-1]ã€‚
> 
> videoSharingPlatform.getViews(0);> 
> > 
> > 
> // æ²¡æœ‰è§†é¢‘ä¸ videoId 0 ç›¸å…³è”ï¼Œå› æ­¤è¿”å› -1ã€‚
> 
> 



**æç¤º:**

  * `1 <= video.length <= 10^5`
  * è°ƒç”¨ `upload` æ—¶æ‰€æœ‰ `video.length` çš„æ€»å’Œä¸ä¼šè¶…è¿‡ `10^5`
  * `video` ç”±æ•°å­—ç»„æˆ
  * `0 <= videoId <= 10^5`
  * `0 <= startMinute < endMinute < 10^5`
  * `startMinute < video.length`
  * è°ƒç”¨  `watch` æ—¶æ‰€æœ‰ `endMinute - startMinute` çš„æ€»å’Œä¸ä¼šè¶…è¿‡ `10^5`ã€‚
  * æ‰€æœ‰å‡½æ•° **æ€»å…±  **æœ€å¤šè°ƒç”¨ `10^5` æ¬¡ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 1348 | [æ¨æ–‡è®¡æ•°](https://leetcode.com/problems/tweet-counts-per-frequency) |  |  [`è®¾è®¡`](/tag/design.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) `2+` | <font color=#ffb800>Medium</font> |
| 1472 | [è®¾è®¡æµè§ˆå™¨å†å²è®°å½•](https://leetcode.com/problems/design-browser-history) | [[âœ“]](/problem/1472.md) |  [`æ ˆ`](/tag/stack.md) [`è®¾è®¡`](/tag/design.md) [`æ•°ç»„`](/tag/array.md) `3+` | <font color=#ffb800>Medium</font> |
| 2456 | [æœ€æµè¡Œçš„è§†é¢‘åˆ›ä½œè€…](https://leetcode.com/problems/most-popular-video-creator) |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `2+` | <font color=#ffb800>Medium</font> |