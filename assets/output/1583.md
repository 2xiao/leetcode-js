# [1583. ç»Ÿè®¡ä¸å¼€å¿ƒçš„æœ‹å‹](https://leetcode.com/problems/count-unhappy-friends)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`æ¨¡æ‹Ÿ`](/leetcode/outline/tag/simulation.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/count-unhappy-friends)

## é¢˜ç›®

You are given a list of `preferences` for `n` friends, where `n` is always
**even**.

For each person `i`, `preferences[i]` contains a list of friends **sorted** in
the **order of preference**. In other words, a friend earlier in the list is
more preferred than a friend later in the list. Friends in each list are
denoted by integers from `0` to `n-1`.

All the friends are divided into pairs. The pairings are given in a list
`pairs`, where `pairs[i] = [xi, yi]` denotes `xi` is paired with `yi` and `yi`
is paired with `xi`.

However, this pairing may cause some of the friends to be unhappy. A friend
`x` is unhappy if `x` is paired with `y` and there exists a friend `u` who is
paired with `v` but:

  * `x` prefers `u` over `y`, and
  * `u` prefers `x` over `v`.

Return _the number of unhappy friends_.



**Example 1:**

> Input: n = 4, preferences = [[1, 2, 3], [3, 2, 0], [3, 1, 0], [1, 2, 0]], pairs = [[0, 1], [2, 3]]
> 
> Output: 2
> 
> Explanation:
> 
> Friend 1 is unhappy because:
> - 1 is paired with 0 but prefers 3 over 0, and
> - 3 prefers 1 over 2.
> 
> Friend 3 is unhappy because:
> - 3 is paired with 2 but prefers 1 over 2, and
> - 1 prefers 3 over 0.
> 
> Friends 0 and 2 are happy.

**Example 2:**

> Input: n = 2, preferences = [[1], [0]], pairs = [[1, 0]]
> 
> Output: 0
> 
> Explanation: Both friends 0 and 1 are happy.

**Example 3:**

> Input: n = 4, preferences = [[1, 3, 2], [2, 3, 0], [1, 3, 0], [0, 2, 1]], pairs = [[1, 3], [0, 2]]
> 
> Output: 4

**Constraints:**

  * `2 <= n <= 500`
  * `n` is even.
  * `preferences.length == n`
  * `preferences[i].length == n - 1`
  * `0 <= preferences[i][j] <= n - 1`
  * `preferences[i]` does not contain `i`.
  * All values in `preferences[i]` are unique.
  * `pairs.length == n/2`
  * `pairs[i].length == 2`
  * `xi != yi`
  * `0 <= xi, yi <= n - 1`
  * Each person is contained in **exactly one** pair.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä»½ `n` ä½æœ‹å‹çš„äº²è¿‘ç¨‹åº¦åˆ—è¡¨ï¼Œå…¶ä¸­ `n` æ€»æ˜¯ **å¶æ•°** ã€‚

å¯¹æ¯ä½æœ‹å‹ `i`ï¼Œ`preferences[i]` åŒ…å«ä¸€ä»½ **æŒ‰äº²è¿‘ç¨‹åº¦ä»é«˜****åˆ°ä½æ’åˆ—** çš„æœ‹å‹åˆ—è¡¨ã€‚æ¢å¥è¯è¯´ï¼Œæ’åœ¨åˆ—è¡¨å‰é¢çš„æœ‹å‹ä¸ `i`
çš„äº²è¿‘ç¨‹åº¦æ¯”æ’åœ¨åˆ—è¡¨åé¢çš„æœ‹å‹æ›´é«˜ã€‚æ¯ä¸ªåˆ—è¡¨ä¸­çš„æœ‹å‹å‡ä»¥ `0` åˆ° `n-1` ä¹‹é—´çš„æ•´æ•°è¡¨ç¤ºã€‚

æ‰€æœ‰çš„æœ‹å‹è¢«åˆ†æˆå‡ å¯¹ï¼Œé…å¯¹æƒ…å†µä»¥åˆ—è¡¨ `pairs` ç»™å‡ºï¼Œå…¶ä¸­ `pairs[i] = [xi, yi]` è¡¨ç¤º `xi` ä¸ `yi` é…å¯¹ï¼Œä¸”
`yi` ä¸ `xi` é…å¯¹ã€‚

ä½†æ˜¯ï¼Œè¿™æ ·çš„é…å¯¹æƒ…å†µå¯èƒ½ä¼šä½¿å…¶ä¸­éƒ¨åˆ†æœ‹å‹æ„Ÿåˆ°ä¸å¼€å¿ƒã€‚åœ¨ `x` ä¸ `y` é…å¯¹ä¸” `u` ä¸ `v` é…å¯¹çš„æƒ…å†µä¸‹ï¼Œå¦‚æœåŒæ—¶æ»¡è¶³ä¸‹è¿°ä¸¤ä¸ªæ¡ä»¶ï¼Œ`x`
å°±ä¼šä¸å¼€å¿ƒï¼š

  * `x` ä¸ `u` çš„äº²è¿‘ç¨‹åº¦èƒœè¿‡ `x` ä¸ `y`ï¼Œä¸”
  * `u` ä¸ `x` çš„äº²è¿‘ç¨‹åº¦èƒœè¿‡ `u` ä¸ `v`

è¿”å› **ä¸å¼€å¿ƒçš„æœ‹å‹çš„æ•°ç›®** ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 4, preferences = [[1, 2, 3], [3, 2, 0], [3, 1, 0], [1, 2, 0]], pairs = [[0, 1], [2, 3]]
> 
> **è¾“å‡ºï¼š** 2
> 
> **è§£é‡Šï¼š**
> 
> æœ‹å‹ 1 ä¸å¼€å¿ƒï¼Œå› ä¸ºï¼š
> - **1 ä¸ 0** é…å¯¹ï¼Œä½† **1 ä¸ 3** çš„äº²è¿‘ç¨‹åº¦æ¯” **1 ä¸ 0** é«˜ï¼Œä¸”
> - **3 ä¸ 1** çš„äº²è¿‘ç¨‹åº¦æ¯” **3 ä¸ 2** é«˜ã€‚
> 
> æœ‹å‹ 3 ä¸å¼€å¿ƒï¼Œå› ä¸ºï¼š
> - 3 ä¸ 2 é…å¯¹ï¼Œä½† **3 ä¸ 1** çš„äº²è¿‘ç¨‹åº¦æ¯” **3 ä¸ 2** é«˜ï¼Œä¸”
> - **1 ä¸ 3** çš„äº²è¿‘ç¨‹åº¦æ¯” **1 ä¸ 0** é«˜ã€‚
> 
> æœ‹å‹ 0 å’Œ 2 éƒ½æ˜¯å¼€å¿ƒçš„ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 2, preferences = [[1], [0]], pairs = [[1, 0]]
> 
> **è¾“å‡ºï¼š** 0
> 
> **è§£é‡Šï¼š** æœ‹å‹ 0 å’Œ 1 éƒ½å¼€å¿ƒã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 4, preferences = [[1, 3, 2], [2, 3, 0], [1, 3, 0], [0, 2, 1]], pairs = [[1, 3], [0, 2]]
> 
> **è¾“å‡ºï¼š** 4
> 
> 



**æç¤ºï¼š**

  * `2 <= n <= 500`
  * `n` æ˜¯å¶æ•°
  * `preferences.length == n`
  * `preferences[i].length == n - 1`
  * `0 <= preferences[i][j] <= n - 1`
  * `preferences[i]` ä¸åŒ…å« `i`
  * `preferences[i]` ä¸­çš„æ‰€æœ‰å€¼éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„
  * `pairs.length == n/2`
  * `pairs[i].length == 2`
  * `xi != yi`
  * `0 <= xi, yi <= n - 1`
  * æ¯ä½æœ‹å‹éƒ½ **æ°å¥½** è¢«åŒ…å«åœ¨ä¸€å¯¹ä¸­


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```