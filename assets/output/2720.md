# [2720. å—æ¬¢è¿åº¦ç™¾åˆ†æ¯”](https://leetcode.com/problems/popularity-percentage)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°æ®åº“`](/tag/database.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/popularity-percentage)

## é¢˜ç›®

Table: `Friends`

> 
> 
> 
> 
> 
> +-------------+------+
> 
> | Column Name | Type |
> 
> +-------------+------+
> 
> | user1> 
>    | int  |
> 
> | user2> 
>    | int  |
> 
> +-------------+------+
> 
> (user1, user2) is the primary key (combination of unique values) of this table.
> 
> Each row contains information about friendship where user1 and user2 are friends.
> 
> 

Write a solution to find the popularity percentage for each user on
Meta/Facebook. The popularity percentage is defined as the total number of
friends the user has divided by the total number of users on the platform,
then converted into a percentage by multiplying by 100, **rounded to 2 decimal
places**.

Return _the result table ordered by_ `user1` _in**ascending** order._

The result format is in the following example.



**Example 1:**

> Input:  
> 
> Friends table:
> 
> +-------+-------+
> 
> | user1 | user2 | 
> 
> +-------+-------+
> 
> | 2> 
>  | 1> 
>  | 
> 
> | 1> 
>  | 3> 
>  | 
> 
> | 4> 
>  | 1> 
>  | 
> 
> | 1> 
>  | 5> 
>  | 
> 
> | 1> 
>  | 6> 
>  |
> 
> | 2> 
>  | 6> 
>  | 
> 
> | 7> 
>  | 2> 
>  | 
> 
> | 8> 
>  | 3> 
>  | 
> 
> | 3> 
>  | 9> 
>  |  
> 
> +-------+-------+
> 
> Output:  
> 
> +-------+-----------------------+
> 
> | user1 | percentage_popularity |
> 
> +-------+-----------------------+
> 
> | 1> 
>  | 55.56> 
> > 
> > 
> > 
>  |
> 
> | 2> 
>  | 33.33> 
> > 
> > 
> > 
>  |
> 
> | 3> 
>  | 33.33> 
> > 
> > 
> > 
>  |
> 
> | 4> 
>  | 11.11> 
> > 
> > 
> > 
>  |
> 
> | 5> 
>  | 11.11> 
> > 
> > 
> > 
>  |
> 
> | 6> 
>  | 22.22> 
> > 
> > 
> > 
>  |
> 
> | 7> 
>  | 11.11> 
> > 
> > 
> > 
>  |
> 
> | 8> 
>  | 11.11> 
> > 
> > 
> > 
>  |
> 
> | 9> 
>  | 11.11> 
> > 
> > 
> > 
>  |
> 
> +-------+-----------------------+
> 
> Explanation:  
> 
> There are total 9 users on the platform.
> - User "1" has friendships with 2, 3, 4, 5 and 6. Therefore, the percentage popularity for user 1 would be calculated as (5/9) * 100 = 55.56.
> - User "2" has friendships with 1, 6 and 7. Therefore, the percentage popularity for user 2 would be calculated as (3/9) * 100 = 33.33.
> - User "3" has friendships with 1, 8 and 9. Therefore, the percentage popularity for user 3 would be calculated as (3/9) * 100 = 33.33.
> - User "4" has friendships with 1. Therefore, the percentage popularity for user 4 would be calculated as (1/9) * 100 = 11.11.
> - User "5" has friendships with 1. Therefore, the percentage popularity for user 5 would be calculated as (1/9) * 100 = 11.11.
> - User "6" has friendships with 1 and 2. Therefore, the percentage popularity for user 6 would be calculated as (2/9) * 100 = 22.22.
> - User "7" has friendships with 2. Therefore, the percentage popularity for user 7 would be calculated as (1/9) * 100 = 11.11.
> - User "8" has friendships with 3. Therefore, the percentage popularity for user 8 would be calculated as (1/9) * 100 = 11.11.
> - User "9" has friendships with 3. Therefore, the percentage popularity for user 9 would be calculated as (1/9) * 100 = 11.11.
> 
> user1 is sorted in ascending order.
> 
> 


## é¢˜ç›®å¤§æ„

è¡¨ï¼š`Friends`

> 
> 
> 
> 
> 
> +-------------+------+
> 
> | åˆ—å> 
> > 
> | ç±»å‹  |
> 
> +-------------+------+
> 
> | user1> 
>    | int  |
> 
> | user2> 
>    | int  |
> 
> +-------------+------+
> 
> (user1, user2) æ˜¯è¯¥è¡¨çš„ä¸»é”®(å…·æœ‰å”¯ä¸€å€¼çš„åˆ—)ã€‚ 
> 
> æ¯ä¸€è¡ŒåŒ…å«å…³äºæœ‹å‹å…³ç³»çš„ä¿¡æ¯ï¼Œå…¶ä¸­ user1 å’Œ user2 æ˜¯æœ‹å‹ã€‚ 
> 
> 

ç¼–å†™ä¸€æ¡ SQL æŸ¥è¯¢ï¼Œæ‰¾å‡º Meta/Facebook
å¹³å°ä¸Šæ¯ä¸ªç”¨æˆ·çš„å—æ¬¢è¿åº¦çš„ç™¾åˆ†æ¯”ã€‚å—æ¬¢è¿åº¦ç™¾åˆ†æ¯”å®šä¹‰ä¸ºç”¨æˆ·æ‹¥æœ‰çš„æœ‹å‹æ€»æ•°é™¤ä»¥å¹³å°ä¸Šçš„æ€»ç”¨æˆ·æ•°ï¼Œç„¶åä¹˜ä»¥ 100ï¼Œå¹¶ **å››èˆäº”å…¥ä¿ç•™ 2 ä½å°æ•°  **ã€‚

è¿”å›æŒ‰ç…§ `user1` **å‡åº** æ’åºçš„ç»“æœè¡¨ã€‚

æŸ¥è¯¢ç»“æœæ ¼å¼å¦‚ä¸‹ç¤ºä¾‹æ‰€ç¤ºã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**  
> 
> Friends è¡¨:
> 
> +-------+-------+
> 
> | user1 | user2 | 
> 
> +-------+-------+
> 
> | 2> 
>  | 1> 
>  | 
> 
> | 1> 
>  | 3> 
>  | 
> 
> | 4> 
>  | 1> 
>  | 
> 
> | 1> 
>  | 5> 
>  | 
> 
> | 1> 
>  | 6> 
>  |
> 
> | 2> 
>  | 6> 
>  | 
> 
> | 7> 
>  | 2> 
>  | 
> 
> | 8> 
>  | 3> 
>  | 
> 
> | 3> 
>  | 9> 
>  |  
> 
> +-------+-------+
> 
> **è¾“å‡ºï¼š**
> 
> +-------+-----------------------+
> 
> | user1 | percentage_popularity |
> 
> +-------+-----------------------+
> 
> | 1> 
>  | 55.56> 
> > 
> > 
> > 
>  |
> 
> | 2> 
>  | 33.33> 
> > 
> > 
> > 
>  |
> 
> | 3> 
>  | 33.33> 
> > 
> > 
> > 
>  |
> 
> | 4> 
>  | 11.11> 
> > 
> > 
> > 
>  |
> 
> | 5> 
>  | 11.11> 
> > 
> > 
> > 
>  |
> 
> | 6> 
>  | 22.22> 
> > 
> > 
> > 
>  |
> 
> | 7> 
>  | 11.11> 
> > 
> > 
> > 
>  |
> 
> | 8> 
>  | 11.11> 
> > 
> > 
> > 
>  |
> 
> | 9> 
>  | 11.11> 
> > 
> > 
> > 
>  |
> 
> +-------+-----------------------+
> 
> **è§£é‡Šï¼š**
> 
> å¹³å°ä¸Šæ€»å…±æœ‰ 9 ä¸ªç”¨æˆ·ã€‚
> - ç”¨æˆ· "1" ä¸ 2ã€3ã€4ã€5 å’Œ 6 æ˜¯æœ‹å‹ã€‚å› æ­¤ï¼Œç”¨æˆ· 1 çš„å—æ¬¢è¿åº¦ç™¾åˆ†æ¯”è®¡ç®—ä¸ºï¼ˆ5/9ï¼‰* 100 = 55.56ã€‚
> - ç”¨æˆ· "2" ä¸ 1ã€6 å’Œ 7 æ˜¯æœ‹å‹ã€‚å› æ­¤ï¼Œç”¨æˆ· 2 çš„å—æ¬¢è¿åº¦ç™¾åˆ†æ¯”è®¡ç®—ä¸ºï¼ˆ3/9ï¼‰* 100 = 33.33ã€‚
> - ç”¨æˆ· "3" ä¸ 1ã€8 å’Œ 9 æ˜¯æœ‹å‹ã€‚å› æ­¤ï¼Œç”¨æˆ· 3 çš„å—æ¬¢è¿åº¦ç™¾åˆ†æ¯”è®¡ç®—ä¸ºï¼ˆ3/9ï¼‰* 100 = 33.33ã€‚
> - ç”¨æˆ· "4" ä¸ 1 æ˜¯æœ‹å‹ã€‚å› æ­¤ï¼Œç”¨æˆ· 4 çš„å—æ¬¢è¿åº¦ç™¾åˆ†æ¯”è®¡ç®—ä¸ºï¼ˆ1/9ï¼‰* 100 = 11.11ã€‚
> - ç”¨æˆ· "5" ä¸ 1 æ˜¯æœ‹å‹ã€‚å› æ­¤ï¼Œç”¨æˆ· 5 çš„å—æ¬¢è¿åº¦ç™¾åˆ†æ¯”è®¡ç®—ä¸ºï¼ˆ1/9ï¼‰* 100 = 11.11ã€‚
> - ç”¨æˆ· "6" ä¸ 1 å’Œ 2 æ˜¯æœ‹å‹ã€‚å› æ­¤ï¼Œç”¨æˆ· 6 çš„å—æ¬¢è¿åº¦ç™¾åˆ†æ¯”è®¡ç®—ä¸ºï¼ˆ2/9ï¼‰* 100 = 22.22ã€‚
> - ç”¨æˆ· "7" ä¸ 2 æ˜¯æœ‹å‹ã€‚å› æ­¤ï¼Œç”¨æˆ· 7 çš„å—æ¬¢è¿åº¦ç™¾åˆ†æ¯”è®¡ç®—ä¸ºï¼ˆ1/9ï¼‰* 100 = 11.11ã€‚
> - ç”¨æˆ· "8" ä¸ 3 æ˜¯æœ‹å‹ã€‚å› æ­¤ï¼Œç”¨æˆ· 8 çš„å—æ¬¢è¿åº¦ç™¾åˆ†æ¯”è®¡ç®—ä¸ºï¼ˆ1/9ï¼‰* 100 = 11.11ã€‚
> - ç”¨æˆ· "9" ä¸ 3 æ˜¯æœ‹å‹ã€‚å› æ­¤ï¼Œç”¨æˆ· 9 çš„å—æ¬¢è¿åº¦ç™¾åˆ†æ¯”è®¡ç®—ä¸ºï¼ˆ1/9ï¼‰* 100 = 11.11ã€‚ 
> 
> user1 æŒ‰å‡åºæ’åºã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```