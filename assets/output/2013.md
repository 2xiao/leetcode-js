# [2013. æ£€æµ‹æ­£æ–¹å½¢](https://leetcode.com/problems/detect-squares)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/leetcode/outline/tag/design.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å“ˆå¸Œè¡¨`](/leetcode/outline/tag/hash-table.md) [`è®¡æ•°`](/leetcode/outline/tag/counting.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/detect-squares)


## é¢˜ç›®

You are given a stream of points on the X-Y plane. Design an algorithm that:

  * **Adds** new points from the stream into a data structure. **Duplicate** points are allowed and should be treated as different points.
  * Given a query point, **counts** the number of ways to choose three points from the data structure such that the three points and the query point form an **axis-aligned square** with **positive area**.

An **axis-aligned square** is a square whose edges are all the same length and
are either parallel or perpendicular to the x-axis and y-axis.

Implement the `DetectSquares` class:

  * `DetectSquares()` Initializes the object with an empty data structure.
  * `void add(int[] point)` Adds a new point `point = [x, y]` to the data structure.
  * `int count(int[] point)` Counts the number of ways to form **axis-aligned squares** with point `point = [x, y]` as described above.



**Example 1:**

![](https://assets.leetcode.com/uploads/2021/09/01/image.png)

> 
> 
> 
> 
> 
> **Input**
> 
> ["DetectSquares", "add", "add", "add", "count", "count", "add", "count"]
> 
> [[], [[3, 10]], [[11, 2]], [[3, 2]], [[11, 10]], [[14, 8]], [[11, 2]], [[11, 10]]]
> 
> **Output**
> 
> [null, null, null, null, 1, 0, null, 2]
> 
> 
> 
> **Explanation**
> 
> DetectSquares detectSquares = new DetectSquares();
> 
> detectSquares.add([3, 10]);
> 
> detectSquares.add([11, 2]);
> 
> detectSquares.add([3, 2]);
> 
> detectSquares.count([11, 10]); // return 1. You can choose:
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    //   - The first, second, and third points
> 
> detectSquares.count([14, 8]);  // return 0. The query point cannot form a square with any points in the data structure.
> 
> detectSquares.add([11, 2]);> 
> // Adding duplicate points is allowed.
> 
> detectSquares.count([11, 10]); // return 2. You can choose:
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    //   - The first, second, and third points
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    //   - The first, third, and fourth points

**Constraints:**

  * `point.length == 2`
  * `0 <= x, y <= 1000`
  * At most `3000` calls **in total** will be made to `add` and `count`.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªåœ¨ X-Y å¹³é¢ä¸Šçš„ç‚¹æ„æˆçš„æ•°æ®æµã€‚è®¾è®¡ä¸€ä¸ªæ»¡è¶³ä¸‹è¿°è¦æ±‚çš„ç®—æ³•ï¼š

  * **æ·»åŠ ** ä¸€ä¸ªåœ¨æ•°æ®æµä¸­çš„æ–°ç‚¹åˆ°æŸä¸ªæ•°æ®ç»“æ„ä¸­**ã€‚** å¯ä»¥æ·»åŠ  **é‡å¤** çš„ç‚¹ï¼Œå¹¶ä¼šè§†ä½œä¸åŒçš„ç‚¹è¿›è¡Œå¤„ç†ã€‚
  * ç»™ä½ ä¸€ä¸ªæŸ¥è¯¢ç‚¹ï¼Œè¯·ä½ ä»æ•°æ®ç»“æ„ä¸­é€‰å‡ºä¸‰ä¸ªç‚¹ï¼Œä½¿è¿™ä¸‰ä¸ªç‚¹å’ŒæŸ¥è¯¢ç‚¹ä¸€åŒæ„æˆä¸€ä¸ª **é¢ç§¯ä¸ºæ­£** çš„ **è½´å¯¹é½æ­£æ–¹å½¢** ï¼Œ**ç»Ÿè®¡** æ»¡è¶³è¯¥è¦æ±‚çš„æ–¹æ¡ˆæ•°ç›®**ã€‚**

**è½´å¯¹é½æ­£æ–¹å½¢** æ˜¯ä¸€ä¸ªæ­£æ–¹å½¢ï¼Œé™¤å››æ¡è¾¹é•¿åº¦ç›¸åŒå¤–ï¼Œè¿˜æ»¡è¶³æ¯æ¡è¾¹éƒ½ä¸ x-è½´ æˆ– y-è½´ å¹³è¡Œæˆ–å‚ç›´ã€‚

å®ç° `DetectSquares` ç±»ï¼š

  * `DetectSquares()` ä½¿ç”¨ç©ºæ•°æ®ç»“æ„åˆå§‹åŒ–å¯¹è±¡
  * `void add(int[] point)` å‘æ•°æ®ç»“æ„æ·»åŠ ä¸€ä¸ªæ–°çš„ç‚¹ `point = [x, y]`
  * `int count(int[] point)` ç»Ÿè®¡æŒ‰ä¸Šè¿°æ–¹å¼ä¸ç‚¹ `point = [x, y]` å…±åŒæ„é€  **è½´å¯¹é½æ­£æ–¹å½¢** çš„æ–¹æ¡ˆæ•°ã€‚



**ç¤ºä¾‹ï¼š**

![](https://assets.leetcode.com/uploads/2021/09/01/image.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> ["DetectSquares", "add", "add", "add", "count", "count", "add", "count"]
> 
> [[], [[3, 10]], [[11, 2]], [[3, 2]], [[11, 10]], [[14, 8]], [[11, 2]], [[11, 10]]]
> 
> **è¾“å‡ºï¼š**
> 
> [null, null, null, null, 1, 0, null, 2]
> 
> 
> 
> **è§£é‡Šï¼š**
> 
> DetectSquares detectSquares = new DetectSquares();
> 
> detectSquares.add([3, 10]);
> 
> detectSquares.add([11, 2]);
> 
> detectSquares.add([3, 2]);
> 
> detectSquares.count([11, 10]); // è¿”å› 1 ã€‚ä½ å¯ä»¥é€‰æ‹©ï¼š
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    //   - ç¬¬ä¸€ä¸ªï¼Œç¬¬äºŒä¸ªï¼Œå’Œç¬¬ä¸‰ä¸ªç‚¹
> 
> detectSquares.count([14, 8]);  // è¿”å› 0 ã€‚æŸ¥è¯¢ç‚¹æ— æ³•ä¸æ•°æ®ç»“æ„ä¸­çš„è¿™äº›ç‚¹æ„æˆæ­£æ–¹å½¢ã€‚
> 
> detectSquares.add([11, 2]);> 
> // å…è®¸æ·»åŠ é‡å¤çš„ç‚¹ã€‚
> 
> detectSquares.count([11, 10]); // è¿”å› 2 ã€‚ä½ å¯ä»¥é€‰æ‹©ï¼š
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    //   - ç¬¬ä¸€ä¸ªï¼Œç¬¬äºŒä¸ªï¼Œå’Œç¬¬ä¸‰ä¸ªç‚¹
> 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
>    //   - ç¬¬ä¸€ä¸ªï¼Œç¬¬ä¸‰ä¸ªï¼Œå’Œç¬¬å››ä¸ªç‚¹
> 
> 



**æç¤ºï¼š**

  * `point.length == 2`
  * `0 <= x, y <= 1000`
  * è°ƒç”¨ `add` å’Œ `count` çš„ **æ€»æ¬¡æ•°** æœ€å¤šä¸º `5000`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```