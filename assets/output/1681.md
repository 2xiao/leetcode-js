---
title: 1681. æœ€å°ä¸å…¼å®¹æ€§
description: LeetCode 1681. æœ€å°ä¸å…¼å®¹æ€§é¢˜è§£ï¼ŒMinimum Incompatibilityï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1681. æœ€å°ä¸å…¼å®¹æ€§
  - æœ€å°ä¸å…¼å®¹æ€§
  - Minimum Incompatibility
  - è§£é¢˜æ€è·¯
  - ä½è¿ç®—
  - æ•°ç»„
  - åŠ¨æ€è§„åˆ’
  - çŠ¶æ€å‹ç¼©
---

# 1681. æœ€å°ä¸å…¼å®¹æ€§

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`çŠ¶æ€å‹ç¼©`](/tag/bitmask.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/minimum-incompatibility) [`LeetCode`](https://leetcode.com/problems/minimum-incompatibility)

## é¢˜ç›®

You are given an integer array `nums`â€‹â€‹â€‹ and an integer `k`. You are asked to
distribute this array into `k` subsets of **equal size** such that there are
no two equal elements in the same subset.

A subset's **incompatibility** is the difference between the maximum and
minimum elements in that array.

Return _the**minimum possible sum of incompatibilities** of the _`k` _subsets
after distributing the array optimally, or return_`-1` _if it is not
possible._

A subset is a group integers that appear in the array with no particular
order.



**Example 1:**

> Input: nums = [1,2,1,4], k = 2
> 
> Output: 4
> 
> Explanation: The optimal distribution of subsets is [1,2] and [1,4].
> 
> The incompatibility is (2-1) + (4-1) = 4.
> 
> Note that [1,1] and [2,4] would result in a smaller sum, but the first subset contains 2 equal elements.

**Example 2:**

> Input: nums = [6,3,8,1,3,1,2,2], k = 4
> 
> Output: 6
> 
> Explanation: The optimal distribution of subsets is [1,2], [2,3], [6,8], and [1,3].
> 
> The incompatibility is (2-1) + (3-2) + (8-6) + (3-1) = 6.

**Example 3:**

> Input: nums = [5,3,3,6,3,3], k = 3
> 
> Output: -1
> 
> Explanation: It is impossible to distribute nums into 3 subsets where no two elements are equal in the same subset.

**Constraints:**

  * `1 <= k <= nums.length <= 16`
  * `nums.length` is divisible by `k`
  * `1 <= nums[i] <= nums.length`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`â€‹â€‹â€‹ å’Œä¸€ä¸ªæ•´æ•° `k` ã€‚ä½ éœ€è¦å°†è¿™ä¸ªæ•°ç»„åˆ’åˆ†åˆ° `k` ä¸ªç›¸åŒå¤§å°çš„å­é›†ä¸­ï¼Œä½¿å¾—åŒä¸€ä¸ªå­é›†é‡Œé¢æ²¡æœ‰ä¸¤ä¸ªç›¸åŒçš„å…ƒç´ ã€‚

ä¸€ä¸ªå­é›†çš„ **ä¸å…¼å®¹æ€§** æ˜¯è¯¥å­é›†é‡Œé¢æœ€å¤§å€¼å’Œæœ€å°å€¼çš„å·®ã€‚

è¯·ä½ è¿”å›å°†æ•°ç»„åˆ†æˆ `k` ä¸ªå­é›†åï¼Œå„å­é›† **ä¸å…¼å®¹æ€§** çš„**å’Œ** çš„ **æœ€å°å€¼** ï¼Œå¦‚æœæ— æ³•åˆ†æˆåˆ†æˆ `k` ä¸ªå­é›†ï¼Œè¿”å› `-1` ã€‚

å­é›†çš„å®šä¹‰æ˜¯æ•°ç»„ä¸­ä¸€äº›æ•°å­—çš„é›†åˆï¼Œå¯¹æ•°å­—é¡ºåºæ²¡æœ‰è¦æ±‚ã€‚

**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [1,2,1,4], k = 2
> 
> **è¾“å‡ºï¼š** 4
> 
> **è§£é‡Šï¼š** æœ€ä¼˜çš„åˆ†é…æ˜¯ [1,2] å’Œ [1,4] ã€‚
> 
> ä¸å…¼å®¹æ€§å’Œä¸º (2-1) + (4-1) = 4 ã€‚
> 
> æ³¨æ„åˆ° [1,1] å’Œ [2,4] å¯ä»¥å¾—åˆ°æ›´å°çš„å’Œï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªé›†åˆæœ‰ 2 ä¸ªç›¸åŒçš„å…ƒç´ ï¼Œæ‰€ä»¥ä¸å¯è¡Œã€‚

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [6,3,8,1,3,1,2,2], k = 4
> 
> **è¾“å‡ºï¼š** 6
> 
> **è§£é‡Šï¼š** æœ€ä¼˜çš„å­é›†åˆ†é…ä¸º [1,2]ï¼Œ[2,3]ï¼Œ[6,8] å’Œ [1,3] ã€‚
> 
> ä¸å…¼å®¹æ€§å’Œä¸º (2-1) + (3-2) + (8-6) + (3-1) = 6 ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [5,3,3,6,3,3], k = 3
> 
> **è¾“å‡ºï¼š** -1
> 
> **è§£é‡Šï¼š** æ²¡åŠæ³•å°†è¿™äº›æ•°å­—åˆ†é…åˆ° 3 ä¸ªå­é›†ä¸”æ»¡è¶³æ¯ä¸ªå­é›†é‡Œæ²¡æœ‰ç›¸åŒæ•°å­—ã€‚
> 
> 

**æç¤ºï¼š**

  * `1 <= k <= nums.length <= 16`
  * `nums.length` èƒ½è¢« `k` æ•´é™¤ã€‚
  * `1 <= nums[i] <= nums.length`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```