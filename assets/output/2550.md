# [2550. çŒ´å­ç¢°æ’çš„æ–¹æ³•æ•°](https://leetcode.com/problems/count-collisions-of-monkeys-on-a-polygon)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`é€’å½’`](/leetcode/outline/tag/recursion.md) [`æ•°å­¦`](/leetcode/outline/tag/math.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/count-collisions-of-monkeys-on-a-polygon)


## é¢˜ç›®

There is a regular convex polygon with `n` vertices. The vertices are labeled
from `0` to `n - 1` in a clockwise direction, and each vertex has **exactly
one monkey**. The following figure shows a convex polygon of `6` vertices.

![](https://assets.leetcode.com/uploads/2023/01/22/hexagon.jpg)

Simultaneously, each monkey moves to a neighboring vertex. A **collision**
happens if at least two monkeys reside on the same vertex after the movement
or intersect on an edge.

Return the number of ways the monkeys can move so that at least **one
collision** happens. Since the answer may be very large, return it modulo `109
+ 7`.



**Example 1:**

**Input:** n = 3

**Output:** 6

**Explanation:**

There are 8 total possible movements.  
Two ways such that they collide at some point are:

  * Monkey 1 moves in a clockwise direction; monkey 2 moves in an anticlockwise direction; monkey 3 moves in a clockwise direction. Monkeys 1 and 2 collide.
  * Monkey 1 moves in an anticlockwise direction; monkey 2 moves in an anticlockwise direction; monkey 3 moves in a clockwise direction. Monkeys 1 and 3 collide.

**Example 2:**

**Input:** n = 4

**Output:** 14



**Constraints:**

  * `3 <= n <= 10^9`


## é¢˜ç›®å¤§æ„

ç°åœ¨æœ‰ä¸€ä¸ªæ­£å‡¸å¤šè¾¹å½¢ï¼Œå…¶ä¸Šå…±æœ‰ `n` ä¸ªé¡¶ç‚¹ã€‚é¡¶ç‚¹æŒ‰é¡ºæ—¶é’ˆæ–¹å‘ä» `0` åˆ° `n - 1` ä¾æ¬¡ç¼–å·ã€‚æ¯ä¸ªé¡¶ç‚¹ä¸Š **æ­£å¥½æœ‰ä¸€åªçŒ´å­** ã€‚ä¸‹å›¾ä¸­æ˜¯ä¸€ä¸ª
6 ä¸ªé¡¶ç‚¹çš„å‡¸å¤šè¾¹å½¢ã€‚

![](https://assets.leetcode.com/uploads/2023/01/22/hexagon.jpg)

æ¯ä¸ªçŒ´å­åŒæ—¶ç§»åŠ¨åˆ°ç›¸é‚»çš„é¡¶ç‚¹ã€‚é¡¶ç‚¹ `i` çš„ç›¸é‚»é¡¶ç‚¹å¯ä»¥æ˜¯ï¼š

  * é¡ºæ—¶é’ˆæ–¹å‘çš„é¡¶ç‚¹ `(i + 1) % n` ï¼Œæˆ–
  * é€†æ—¶é’ˆæ–¹å‘çš„é¡¶ç‚¹ `(i - 1 + n) % n` ã€‚

å¦‚æœç§»åŠ¨åè‡³å°‘æœ‰ä¸¤åªçŒ´å­åœç•™åœ¨åŒä¸€ä¸ªé¡¶ç‚¹ä¸Šæˆ–è€…ç›¸äº¤åœ¨ä¸€æ¡è¾¹ä¸Šï¼Œåˆ™ä¼šå‘ç”Ÿ **ç¢°æ’** ã€‚

è¿”å›çŒ´å­è‡³å°‘å‘ç”Ÿ **ä¸€æ¬¡ç¢°æ’** çš„ç§»åŠ¨æ–¹æ³•æ•°ã€‚ç”±äºç­”æ¡ˆå¯èƒ½éå¸¸å¤§ï¼Œè¯·è¿”å›å¯¹ `109+7` å–ä½™åçš„ç»“æœã€‚

**æ³¨æ„** ï¼Œæ¯åªçŒ´å­åªèƒ½ç§»åŠ¨ä¸€æ¬¡ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 3
> 
> **è¾“å‡ºï¼š** 6
> 
> **è§£é‡Šï¼š** å…±è®¡ 8 ç§ç§»åŠ¨æ–¹å¼ã€‚
> 
> ä¸‹é¢åˆ—å‡ºä¸¤ç§ä¼šå‘ç”Ÿç¢°æ’çš„æ–¹å¼ï¼š
> - çŒ´å­ 1 é¡ºæ—¶é’ˆç§»åŠ¨ï¼›çŒ´å­ 2 é€†æ—¶é’ˆç§»åŠ¨ï¼›çŒ´å­ 3 é¡ºæ—¶é’ˆç§»åŠ¨ã€‚çŒ´å­ 1 å’ŒçŒ´å­ 2 ç¢°æ’ã€‚
> - çŒ´å­ 1 é€†æ—¶é’ˆç§»åŠ¨ï¼›çŒ´å­ 2 é€†æ—¶é’ˆç§»åŠ¨ï¼›çŒ´å­ 3 é¡ºæ—¶é’ˆç§»åŠ¨ã€‚çŒ´å­ 1 å’ŒçŒ´å­ 3 ç¢°æ’ã€‚
> 
> å¯ä»¥è¯æ˜ï¼Œæœ‰ 6 ç§è®©çŒ´å­ç¢°æ’çš„æ–¹æ³•ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 4
> 
> **è¾“å‡ºï¼š** 14
> 
> **è§£é‡Šï¼š** å¯ä»¥è¯æ˜ï¼Œæœ‰ 14 ç§è®©çŒ´å­ç¢°æ’çš„æ–¹æ³•ã€‚



**æç¤ºï¼š**

  * `3 <= n <= 10^9`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 50 | [Pow(x, n)](https://leetcode.com/problems/powx-n) | [[âœ“]](https://2xiao.github.io/leetcode-js/leetcode/problem/0050) |  [`é€’å½’`](/leetcode/outline/tag/recursion.md) [`æ•°å­¦`](/leetcode/outline/tag/math.md) | <font color=#ffb800>Medium</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
