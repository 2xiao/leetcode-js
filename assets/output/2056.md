# [2056. æ£‹ç›˜ä¸Šæœ‰æ•ˆç§»åŠ¨ç»„åˆçš„æ•°ç›®](https://leetcode.com/problems/number-of-valid-move-combinations-on-chessboard)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å­—ç¬¦ä¸²`](/leetcode/outline/tag/string.md) [`å›æº¯`](/leetcode/outline/tag/backtracking.md) [`æ¨¡æ‹Ÿ`](/leetcode/outline/tag/simulation.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/number-of-valid-move-combinations-on-chessboard)

## é¢˜ç›®

There is an `8 x 8` chessboard containing `n` pieces (rooks, queens, or
bishops). You are given a string array `pieces` of length `n`, where
`pieces[i]` describes the type (rook, queen, or bishop) of the `ith` piece. In
addition, you are given a 2D integer array `positions` also of length `n`,
where `positions[i] = [ri, ci]` indicates that the `ith` piece is currently at
the **1-based** coordinate `(ri, ci)` on the chessboard.

When making a **move** for a piece, you choose a **destination** square that
the piece will travel toward and stop on.

  * A rook can only travel **horizontally or vertically** from `(r, c)` to the direction of `(r+1, c)`, `(r-1, c)`, `(r, c+1)`, or `(r, c-1)`.
  * A queen can only travel **horizontally, vertically, or diagonally** from `(r, c)` to the direction of `(r+1, c)`, `(r-1, c)`, `(r, c+1)`, `(r, c-1)`, `(r+1, c+1)`, `(r+1, c-1)`, `(r-1, c+1)`, `(r-1, c-1)`.
  * A bishop can only travel **diagonally** from `(r, c)` to the direction of `(r+1, c+1)`, `(r+1, c-1)`, `(r-1, c+1)`, `(r-1, c-1)`.

You must make a **move** for every piece on the board simultaneously. A **move
combination** consists of all the **moves** performed on all the given pieces.
Every second, each piece will instantaneously travel **one square** towards
their destination if they are not already at it. All pieces start traveling at
the `0th` second. A move combination is **invalid** if, at a given time, **two
or more** pieces occupy the same square.

Return _the number of**valid** move combinations_â€‹â€‹â€‹â€‹â€‹.

**Notes:**

  * **No two pieces** will start in the**same** square.
  * You may choose the square a piece is already on as its **destination**.
  * If two pieces are **directly adjacent** to each other, it is valid for them to **move past each other** and swap positions in one second.



**Example 1:**

![](https://assets.leetcode.com/uploads/2021/09/23/a1.png)

> Input: pieces = ["rook"], positions = [[1,1]]
> 
> Output: 15
> 
> Explanation: The image above shows the possible squares the piece can move to.

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/09/23/a2.png)

> Input: pieces = ["queen"], positions = [[1,1]]
> 
> Output: 22
> 
> Explanation: The image above shows the possible squares the piece can move to.

**Example 3:**

![](https://assets.leetcode.com/uploads/2021/09/23/a3.png)

> Input: pieces = ["bishop"], positions = [[4,3]]
> 
> Output: 12
> 
> Explanation: The image above shows the possible squares the piece can move to.

**Constraints:**

  * `n == pieces.length `
  * `n == positions.length`
  * `1 <= n <= 4`
  * `pieces` only contains the strings `"rook"`, `"queen"`, and `"bishop"`.
  * There will be at most one queen on the chessboard.
  * `1 <= xi, yi <= 8`
  * Each `positions[i]` is distinct.


## é¢˜ç›®å¤§æ„

æœ‰ä¸€ä¸ª `8 x 8` çš„æ£‹ç›˜ï¼Œå®ƒåŒ…å« `n` ä¸ªæ£‹å­ï¼ˆæ£‹å­åŒ…æ‹¬è½¦ï¼Œåå’Œè±¡ä¸‰ç§ï¼‰ã€‚ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„å­—ç¬¦ä¸²æ•°ç»„ `pieces` ï¼Œå…¶ä¸­
`pieces[i]` è¡¨ç¤ºç¬¬ `i` ä¸ªæ£‹å­çš„ç±»å‹ï¼ˆè½¦ï¼Œåæˆ–è±¡ï¼‰ã€‚é™¤æ­¤ä»¥å¤–ï¼Œè¿˜ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„äºŒç»´æ•´æ•°æ•°ç»„ `positions` ï¼Œå…¶ä¸­
`positions[i] = [ri, ci]` è¡¨ç¤ºç¬¬ `i` ä¸ªæ£‹å­ç°åœ¨åœ¨æ£‹ç›˜ä¸Šçš„ä½ç½®ä¸º `(ri, ci)` ï¼Œæ£‹ç›˜ä¸‹æ ‡ä» **1**  å¼€å§‹ã€‚

æ£‹ç›˜ä¸Šæ¯ä¸ªæ£‹å­éƒ½å¯ä»¥ç§»åŠ¨ **è‡³å¤šä¸€æ¬¡**  ã€‚æ¯ä¸ªæ£‹å­çš„ç§»åŠ¨ä¸­ï¼Œé¦–å…ˆé€‰æ‹©ç§»åŠ¨çš„ **æ–¹å‘**  ï¼Œç„¶åé€‰æ‹© **ç§»åŠ¨çš„æ­¥æ•°**
ï¼ŒåŒæ—¶ä½ è¦ç¡®ä¿ç§»åŠ¨è¿‡ç¨‹ä¸­æ£‹å­ä¸èƒ½ç§»åˆ°æ£‹ç›˜ä»¥å¤–çš„åœ°æ–¹ã€‚æ£‹å­éœ€æŒ‰ç…§ä»¥ä¸‹è§„åˆ™ç§»åŠ¨ï¼š

  * è½¦å¯ä»¥ **æ°´å¹³æˆ–è€…ç«–ç›´**  ä» `(r, c)` æ²¿ç€æ–¹å‘ `(r+1, c)`ï¼Œ`(r-1, c)`ï¼Œ`(r, c+1)` æˆ–è€… `(r, c-1)` ç§»åŠ¨ã€‚
  * åå¯ä»¥ **æ°´å¹³ç«–ç›´æˆ–è€…æ–œå¯¹è§’**  ä» `(r, c)` æ²¿ç€æ–¹å‘ `(r+1, c)`ï¼Œ`(r-1, c)`ï¼Œ`(r, c+1)`ï¼Œ`(r, c-1)`ï¼Œ`(r+1, c+1)`ï¼Œ`(r+1, c-1)`ï¼Œ`(r-1, c+1)`ï¼Œ`(r-1, c-1)` ç§»åŠ¨ã€‚
  * è±¡å¯ä»¥ **æ–œå¯¹è§’**  ä» `(r, c)` æ²¿ç€æ–¹å‘ `(r+1, c+1)`ï¼Œ`(r+1, c-1)`ï¼Œ`(r-1, c+1)`ï¼Œ`(r-1, c-1)` ç§»åŠ¨ã€‚

**ç§»åŠ¨ç»„åˆ**  åŒ…å«æ‰€æœ‰æ£‹å­çš„ **ç§»åŠ¨**  ã€‚æ¯ä¸€ç§’ï¼Œæ¯ä¸ªæ£‹å­éƒ½æ²¿ç€å®ƒä»¬é€‰æ‹©çš„æ–¹å‘å¾€å‰ç§»åŠ¨ **ä¸€æ­¥**  ï¼Œç›´åˆ°å®ƒä»¬åˆ°è¾¾ç›®æ ‡ä½ç½®ã€‚æ‰€æœ‰æ£‹å­ä»æ—¶åˆ»
`0` å¼€å§‹ç§»åŠ¨ã€‚å¦‚æœåœ¨æŸä¸ªæ—¶åˆ»ï¼Œä¸¤ä¸ªæˆ–è€…æ›´å¤šæ£‹å­å æ®äº†åŒä¸€ä¸ªæ ¼å­ï¼Œé‚£ä¹ˆè¿™ä¸ªç§»åŠ¨ç»„åˆ **ä¸æœ‰æ•ˆ**  ã€‚

è¯·ä½ è¿”å› **æœ‰æ•ˆ**  ç§»åŠ¨ç»„åˆçš„æ•°ç›®ã€‚

**æ³¨æ„ï¼š**

  * åˆå§‹æ—¶ï¼Œ**ä¸ä¼šæœ‰ä¸¤ä¸ªæ£‹å­**  åœ¨ **åŒä¸€ä¸ªä½ç½® ã€‚**
  * æœ‰å¯èƒ½åœ¨ä¸€ä¸ªç§»åŠ¨ç»„åˆä¸­ï¼Œæœ‰æ£‹å­ä¸ç§»åŠ¨ã€‚
  * å¦‚æœä¸¤ä¸ªæ£‹å­ **ç›´æ¥ç›¸é‚»**  ä¸”ä¸¤ä¸ªæ£‹å­ä¸‹ä¸€ç§’è¦äº’ç›¸å æ®å¯¹æ–¹çš„ä½ç½®ï¼Œå¯ä»¥å°†å®ƒä»¬åœ¨åŒä¸€ç§’å†… **äº¤æ¢ä½ç½®**  ã€‚



**ç¤ºä¾‹ 1:**

![](https://assets.leetcode.com/uploads/2021/09/23/a1.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** pieces = ["rook"], positions = [[1,1]]
> 
> **è¾“å‡ºï¼š** 15
> 
> **è§£é‡Šï¼š** ä¸Šå›¾å±•ç¤ºäº†æ£‹å­æ‰€æœ‰å¯èƒ½çš„ç§»åŠ¨ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/09/23/a2.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** pieces = ["queen"], positions = [[1,1]]
> 
> **è¾“å‡ºï¼š** 22
> 
> **è§£é‡Šï¼š** ä¸Šå›¾å±•ç¤ºäº†æ£‹å­æ‰€æœ‰å¯èƒ½çš„ç§»åŠ¨ã€‚
> 
> 

**ç¤ºä¾‹ 3:**

![](https://assets.leetcode.com/uploads/2021/09/23/a3.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** pieces = ["bishop"], positions = [[4,3]]
> 
> **è¾“å‡ºï¼š** 12
> 
> **è§£é‡Šï¼š** ä¸Šå›¾å±•ç¤ºäº†æ£‹å­æ‰€æœ‰å¯èƒ½çš„ç§»åŠ¨ã€‚
> 
> 

**ç¤ºä¾‹ 4:**

![](https://assets.leetcode.com/uploads/2021/09/23/a4.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** pieces = ["rook","rook"], positions = [[1,1],[8,8]]
> 
> **è¾“å‡ºï¼š** 223
> 
> **è§£é‡Šï¼š** æ¯ä¸ªè½¦æœ‰ 15 ç§ç§»åŠ¨ï¼Œæ‰€ä»¥æ€»å…±æœ‰ 15 * 15 = 225 ç§ç§»åŠ¨ç»„åˆã€‚
> 
> ä½†æ˜¯ï¼Œæœ‰ä¸¤ä¸ªæ˜¯ä¸æœ‰æ•ˆçš„ç§»åŠ¨ç»„åˆï¼š
> - å°†ä¸¤ä¸ªè½¦éƒ½ç§»åŠ¨åˆ° (8, 1) ï¼Œä¼šå¯¼è‡´å®ƒä»¬åœ¨åŒä¸€ä¸ªæ ¼å­ç›¸é‡ã€‚
> - å°†ä¸¤ä¸ªè½¦éƒ½ç§»åŠ¨åˆ° (1, 8) ï¼Œä¼šå¯¼è‡´å®ƒä»¬åœ¨åŒä¸€ä¸ªæ ¼å­ç›¸é‡ã€‚
> 
> æ‰€ä»¥ï¼Œæ€»å…±æœ‰ 225 - 2 = 223 ç§æœ‰æ•ˆç§»åŠ¨ç»„åˆã€‚
> 
> æ³¨æ„ï¼Œæœ‰ä¸¤ç§æœ‰æ•ˆçš„ç§»åŠ¨ç»„åˆï¼Œåˆ†åˆ«æ˜¯ä¸€ä¸ªè½¦åœ¨ (1, 8) ï¼Œå¦ä¸€ä¸ªè½¦åœ¨ (8, 1) ã€‚
> 
> å³ä½¿æ£‹ç›˜çŠ¶æ€æ˜¯ç›¸åŒçš„ï¼Œè¿™ä¸¤ä¸ªç§»åŠ¨ç»„åˆè¢«è§†ä¸ºä¸åŒçš„ï¼Œå› ä¸ºæ¯ä¸ªæ£‹å­ç§»åŠ¨æ“ä½œæ˜¯ä¸ç›¸åŒçš„ã€‚
> 
> 

**ç¤ºä¾‹ 5ï¼š**

![](https://assets.leetcode.com/uploads/2021/09/23/a5.png)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** pieces = ["queen","bishop"], positions = [[5,7],[3,4]]
> 
> **è¾“å‡ºï¼š** 281
> 
> **è§£é‡Šï¼š** æ€»å…±æœ‰ 12 * 24 = 288 ç§ç§»åŠ¨ç»„åˆã€‚
> 
> ä½†æ˜¯ï¼Œæœ‰ä¸€äº›ä¸æœ‰æ•ˆçš„ç§»åŠ¨ç»„åˆï¼š
> - å¦‚æœååœåœ¨ (6, 7) ï¼Œå®ƒä¼šé˜»æŒ¡è±¡åˆ°è¾¾ (6, 7) æˆ–è€… (7, 8) ã€‚
> - å¦‚æœååœåœ¨ (5, 6) ï¼Œå®ƒä¼šé˜»æŒ¡è±¡åˆ°è¾¾ (5, 6) ï¼Œ(6, 7) æˆ–è€… (7, 8) ã€‚
> - å¦‚æœè±¡åœåœ¨ (5, 2) ï¼Œå®ƒä¼šé˜»æŒ¡ååˆ°è¾¾ (5, 2) æˆ–è€… (5, 1) ã€‚
> 
> åœ¨ 288 ä¸ªç§»åŠ¨ç»„åˆå½“ä¸­ï¼Œ281 ä¸ªæ˜¯æœ‰æ•ˆçš„ã€‚
> 
> 



**æç¤ºï¼š**

  * `n == pieces.length `
  * `n == positions.length`
  * `1 <= n <= 4`
  * `pieces` åªåŒ…å«å­—ç¬¦ä¸² `"rook"` ï¼Œ`"queen"` å’Œ `"bishop"` ã€‚
  * æ£‹ç›˜ä¸Šæ€»å…±æœ€å¤šåªæœ‰ä¸€ä¸ªåã€‚
  * `1 <= xi, yi <= 8`
  * æ¯ä¸€ä¸ª `positions[i]` äº’ä¸ç›¸åŒã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```