# [3045. ç»Ÿè®¡å‰åç¼€ä¸‹æ ‡å¯¹ II](https://leetcode.com/problems/count-prefix-and-suffix-pairs-ii)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`å­—å…¸æ ‘`](/leetcode/outline/tag/trie.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å­—ç¬¦ä¸²`](/leetcode/outline/tag/string.md) [`å­—ç¬¦ä¸²åŒ¹é…`](/leetcode/outline/tag/string-matching.md) [`å“ˆå¸Œå‡½æ•°`](/leetcode/outline/tag/hash-function.md) [`æ»šåŠ¨å“ˆå¸Œ`](/leetcode/outline/tag/rolling-hash.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/count-prefix-and-suffix-pairs-ii)


## é¢˜ç›®

You are given a **0-indexed** string array `words`.

Let's define a **boolean** function `isPrefixAndSuffix` that takes two
strings, `str1` and `str2`:

  * `isPrefixAndSuffix(str1, str2)` returns `true` if `str1` is **both** a prefix and a suffix of `str2`, and `false` otherwise.

For example, `isPrefixAndSuffix("aba", "ababa")` is `true` because `"aba"` is
a prefix of `"ababa"` and also a suffix, but `isPrefixAndSuffix("abc",
"abcd")` is `false`.

Return _an integer denoting the**number** of index pairs _`(i _,_ j)`_such
that_`i < j` _, and_`isPrefixAndSuffix(words[i], words[j])`_is_`true` _._



**Example 1:**

> Input: words = ["a","aba","ababa","aa"]
> 
> Output: 4
> 
> Explanation: In this example, the counted index pairs are:
> 
> i = 0 and j = 1 because isPrefixAndSuffix("a", "aba") is true.
> 
> i = 0 and j = 2 because isPrefixAndSuffix("a", "ababa") is true.
> 
> i = 0 and j = 3 because isPrefixAndSuffix("a", "aa") is true.
> 
> i = 1 and j = 2 because isPrefixAndSuffix("aba", "ababa") is true.
> 
> Therefore, the answer is 4.

**Example 2:**

> Input: words = ["pa","papa","ma","mama"]
> 
> Output: 2
> 
> Explanation: In this example, the counted index pairs are:
> 
> i = 0 and j = 1 because isPrefixAndSuffix("pa", "papa") is true.
> 
> i = 2 and j = 3 because isPrefixAndSuffix("ma", "mama") is true.
> 
> Therefore, the answer is 2.  

**Example 3:**

> Input: words = ["abab","ab"]
> 
> Output: 0
> 
> Explanation: In this example, the only valid index pair is i = 0 and j = 1, and isPrefixAndSuffix("abab", "ab") is false.
> 
> Therefore, the answer is 0.



**Constraints:**

  * `1 <= words.length <= 10^5`
  * `1 <= words[i].length <= 10^5`
  * `words[i]` consists only of lowercase English letters.
  * The sum of the lengths of all `words[i]` does not exceed `5 * 10^5`.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹çš„å­—ç¬¦ä¸²æ•°ç»„ `words` ã€‚

å®šä¹‰ä¸€ä¸ª **å¸ƒå°”** å‡½æ•° `isPrefixAndSuffix` ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå­—ç¬¦ä¸²å‚æ•° `str1` å’Œ `str2` ï¼š

  * å½“ `str1` åŒæ—¶æ˜¯ `str2` çš„å‰ç¼€ï¼ˆprefixï¼‰å’Œåç¼€ï¼ˆsuffixï¼‰æ—¶ï¼Œ`isPrefixAndSuffix(str1, str2)` è¿”å› `true`ï¼Œå¦åˆ™è¿”å› `false`ã€‚

ä¾‹å¦‚ï¼Œ`isPrefixAndSuffix("aba", "ababa")` è¿”å› `true`ï¼Œå› ä¸º `"aba"` æ—¢æ˜¯ `"ababa"`
çš„å‰ç¼€ï¼Œä¹Ÿæ˜¯ `"ababa"` çš„åç¼€ï¼Œä½†æ˜¯ `isPrefixAndSuffix("abc", "abcd")` è¿”å›` false`ã€‚

ä»¥æ•´æ•°å½¢å¼ï¼Œè¿”å›æ»¡è¶³ `i < j` ä¸” `isPrefixAndSuffix(words[i], words[j])` ä¸º `true` çš„ä¸‹æ ‡å¯¹
`(i, j)` çš„**æ•°é‡** ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** words = ["a","aba","ababa","aa"]
> 
> **è¾“å‡ºï¼š** 4
> 
> **è§£é‡Šï¼š** åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œè®¡æ•°çš„ä¸‹æ ‡å¯¹åŒ…æ‹¬ï¼š
> 
> i = 0 ä¸” j = 1 ï¼Œå› ä¸º isPrefixAndSuffix("a", "aba") ä¸º true ã€‚
> 
> i = 0 ä¸” j = 2 ï¼Œå› ä¸º isPrefixAndSuffix("a", "ababa") ä¸º true ã€‚
> 
> i = 0 ä¸” j = 3 ï¼Œå› ä¸º isPrefixAndSuffix("a", "aa") ä¸º true ã€‚
> 
> i = 1 ä¸” j = 2 ï¼Œå› ä¸º isPrefixAndSuffix("aba", "ababa") ä¸º true ã€‚
> 
> å› æ­¤ï¼Œç­”æ¡ˆæ˜¯ 4 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** words = ["pa","papa","ma","mama"]
> 
> **è¾“å‡ºï¼š** 2
> 
> **è§£é‡Šï¼š** åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œè®¡æ•°çš„ä¸‹æ ‡å¯¹åŒ…æ‹¬ï¼š
> 
> i = 0 ä¸” j = 1 ï¼Œå› ä¸º isPrefixAndSuffix("pa", "papa") ä¸º true ã€‚
> 
> i = 2 ä¸” j = 3 ï¼Œå› ä¸º isPrefixAndSuffix("ma", "mama") ä¸º true ã€‚
> 
> å› æ­¤ï¼Œç­”æ¡ˆæ˜¯ 2 ã€‚

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** words = ["abab","ab"]
> 
> **è¾“å‡ºï¼š** 0
> 
> **è§£é‡Šï¼š** åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œå”¯ä¸€æœ‰æ•ˆçš„ä¸‹æ ‡å¯¹æ˜¯ i = 0 ä¸” j = 1 ï¼Œä½†æ˜¯ isPrefixAndSuffix("abab", "ab") ä¸º false ã€‚
> 
> å› æ­¤ï¼Œç­”æ¡ˆæ˜¯ 0 ã€‚



**æç¤ºï¼š**

  * `1 <= words.length <= 10^5`
  * `1 <= words[i].length <= 10^5`
  * `words[i]` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆã€‚
  * æ‰€æœ‰ `words[i]` çš„é•¿åº¦ä¹‹å’Œä¸è¶…è¿‡ `5 * 10^5` ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®
- [208. å®ç° Trie (å‰ç¼€æ ‘)](./0208.md)
- [211. æ·»åŠ ä¸æœç´¢å•è¯ - æ•°æ®ç»“æ„è®¾è®¡](./0211.md)

::::
