# [756. é‡‘å­—å¡”è½¬æ¢çŸ©é˜µ](https://leetcode.com/problems/pyramid-transition-matrix)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/tag/bit-manipulation.md) [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/tag/depth-first-search.md) [`å¹¿åº¦ä¼˜å…ˆæœç´¢`](/tag/breadth-first-search.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/pyramid-transition-matrix)

## é¢˜ç›®

You are stacking blocks to form a pyramid. Each block has a color, which is
represented by a single letter. Each row of blocks contains **one less block**
than the row beneath it and is centered on top.

To make the pyramid aesthetically pleasing, there are only specific
**triangular patterns** that are allowed. A triangular pattern consists of a
**single block** stacked on top of **two blocks**. The patterns are given as a
list of three-letter strings `allowed`, where the first two characters of a
pattern represent the left and right bottom blocks respectively, and the third
character is the top block.

  * For example, `"ABC"` represents a triangular pattern with a `'C'` block stacked on top of an `'A'` (left) and `'B'` (right) block. Note that this is different from `"BAC"` where `'B'` is on the left bottom and `'A'` is on the right bottom.

You start with a bottom row of blocks `bottom`, given as a single string, that
you **must** use as the base of the pyramid.

Given `bottom` and `allowed`, return `true` _if you can build the pyramid all
the way to the top such that**every triangular pattern** in the pyramid is in
_`allowed` _, or_`false` _otherwise_.



**Example 1:**

![](https://assets.leetcode.com/uploads/2021/08/26/pyramid1-grid.jpg)

> Input: bottom = "BCD", allowed = ["BCC","CDE","CEA","FFF"]
> 
> Output: true
> 
> Explanation: The allowed triangular patterns are shown on the right.
> 
> Starting from the bottom (level 3), we can build "CE" on level 2 and then build "A" on level 1.
> 
> There are three triangular patterns in the pyramid, which are "BCC", "CDE", and "CEA". All are allowed.

**Example 2:**

![](https://assets.leetcode.com/uploads/2021/08/26/pyramid2-grid.jpg)

> Input: bottom = "AAAA", allowed = ["AAB","AAC","BCD","BBE","DEF"]
> 
> Output: false
> 
> Explanation: The allowed triangular patterns are shown on the right.
> 
> Starting from the bottom (level 4), there are multiple ways to build level 3, but trying all the possibilites, you will get always stuck before building level 1.

**Constraints:**

  * `2 <= bottom.length <= 6`
  * `0 <= allowed.length <= 216`
  * `allowed[i].length == 3`
  * The letters in all input strings are from the set `{'A', 'B', 'C', 'D', 'E', 'F'}`.
  * All the values of `allowed` are **unique**.


## é¢˜ç›®å¤§æ„

ä½ æ­£åœ¨æŠŠç§¯æœ¨å †æˆé‡‘å­—å¡”ã€‚æ¯ä¸ªå—éƒ½æœ‰ä¸€ä¸ªé¢œè‰²ï¼Œç”¨ä¸€ä¸ªå­—æ¯è¡¨ç¤ºã€‚æ¯ä¸€è¡Œçš„å—æ¯”å®ƒä¸‹é¢çš„è¡Œ **å°‘ä¸€ä¸ªå—** ï¼Œå¹¶ä¸”å±…ä¸­ã€‚

ä¸ºäº†ä½¿é‡‘å­—å¡”ç¾è§‚ï¼Œåªæœ‰ç‰¹å®šçš„ **ä¸‰è§’å½¢å›¾æ¡ˆ** æ˜¯å…è®¸çš„ã€‚ä¸€ä¸ªä¸‰è§’å½¢çš„å›¾æ¡ˆç”± **ä¸¤ä¸ªå—**  å’Œå åœ¨ä¸Šé¢çš„ **å•ä¸ªå—**
ç»„æˆã€‚æ¨¡å¼æ˜¯ä»¥ä¸‰ä¸ªå­—æ¯å­—ç¬¦ä¸²çš„åˆ—è¡¨å½¢å¼ `allowed` ç»™å‡ºçš„ï¼Œå…¶ä¸­æ¨¡å¼çš„å‰ä¸¤ä¸ªå­—ç¬¦åˆ†åˆ«è¡¨ç¤ºå·¦å³åº•éƒ¨å—ï¼Œç¬¬ä¸‰ä¸ªå­—ç¬¦è¡¨ç¤ºé¡¶éƒ¨å—ã€‚

  * ä¾‹å¦‚ï¼Œ`"ABC"` è¡¨ç¤ºä¸€ä¸ªä¸‰è§’å½¢å›¾æ¡ˆï¼Œå…¶ä¸­ä¸€ä¸ª `â€œCâ€` å—å †å åœ¨ä¸€ä¸ª `'A'` å—(å·¦)å’Œä¸€ä¸ª `'B'` å—(å³)ä¹‹ä¸Šã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ `"BAC"` ä¸åŒï¼Œ`"B"` åœ¨å·¦ä¸‹è§’ï¼Œ`"A"` åœ¨å³ä¸‹è§’ã€‚

ä½ ä»ä½œä¸ºå•ä¸ªå­—ç¬¦ä¸²ç»™å‡ºçš„åº•éƒ¨çš„ä¸€æ’ç§¯æœ¨ `bottom` å¼€å§‹ï¼Œ**å¿…é¡»**  å°†å…¶ä½œä¸ºé‡‘å­—å¡”çš„åº•éƒ¨ã€‚

åœ¨ç»™å®š `bottom` å’Œ `allowed` çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä½ èƒ½ä¸€ç›´æ„å»ºåˆ°é‡‘å­—å¡”é¡¶éƒ¨ï¼Œä½¿é‡‘å­—å¡”ä¸­çš„ **æ¯ä¸ªä¸‰è§’å½¢å›¾æ¡ˆ** éƒ½æ˜¯åœ¨ `allowed`
ä¸­çš„ï¼Œåˆ™è¿”å› `true` ï¼Œå¦åˆ™è¿”å› `false` ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/08/26/pyramid1-grid.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** bottom = "BCD", allowed = ["BCC","CDE","CEA","FFF"]
> 
> **è¾“å‡ºï¼š** true
> 
> **è§£é‡Šï¼š** å…è®¸çš„ä¸‰è§’å½¢å›¾æ¡ˆæ˜¾ç¤ºåœ¨å³è¾¹ã€‚
> 
> ä»æœ€åº•å±‚(ç¬¬ 3 å±‚)å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¬¬ 2 å±‚æ„å»ºâ€œCEâ€ï¼Œç„¶ååœ¨ç¬¬ 1 å±‚æ„å»ºâ€œEâ€ã€‚
> 
> é‡‘å­—å¡”ä¸­æœ‰ä¸‰ç§ä¸‰è§’å½¢å›¾æ¡ˆï¼Œåˆ†åˆ«æ˜¯ â€œBCCâ€ã€â€œCDEâ€ å’Œ â€œCEAâ€ã€‚éƒ½æ˜¯å…è®¸çš„ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2021/08/26/pyramid2-grid.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** bottom = "AAAA", allowed = ["AAB","AAC","BCD","BBE","DEF"]
> 
> **è¾“å‡ºï¼š** false
> 
> **è§£é‡Šï¼š** å…è®¸çš„ä¸‰è§’å½¢å›¾æ¡ˆæ˜¾ç¤ºåœ¨å³è¾¹ã€‚
> 
> ä»æœ€åº•å±‚(å³ç¬¬ 4 å±‚)å¼€å§‹ï¼Œåˆ›é€ ç¬¬ 3 å±‚æœ‰å¤šç§æ–¹æ³•ï¼Œä½†å¦‚æœå°è¯•æ‰€æœ‰å¯èƒ½æ€§ï¼Œä½ ä¾¿ä¼šåœ¨åˆ›é€ ç¬¬ 1 å±‚å‰é™·å…¥å›°å¢ƒã€‚
> 
> 



**æç¤ºï¼š**

  * `2 <= bottom.length <= 6`
  * `0 <= allowed.length <= 216`
  * `allowed[i].length == 3`
  * æ‰€æœ‰è¾“å…¥å­—ç¬¦ä¸²ä¸­çš„å­—æ¯æ¥è‡ªé›†åˆ `{'A', 'B', 'C', 'D', 'E', 'F'}`ã€‚
  *  `allowed` ä¸­æ‰€æœ‰å€¼éƒ½æ˜¯ **å”¯ä¸€çš„**


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```