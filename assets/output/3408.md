---
title: 3408. è®¾è®¡ä»»åŠ¡ç®¡ç†å™¨
description: LeetCode 3408. è®¾è®¡ä»»åŠ¡ç®¡ç†å™¨é¢˜è§£ï¼ŒDesign Task Managerï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 3408. è®¾è®¡ä»»åŠ¡ç®¡ç†å™¨
  - è®¾è®¡ä»»åŠ¡ç®¡ç†å™¨
  - Design Task Manager
  - è§£é¢˜æ€è·¯
  - è®¾è®¡
  - å“ˆå¸Œè¡¨
  - æœ‰åºé›†åˆ
  - å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
---

# 3408. è®¾è®¡ä»»åŠ¡ç®¡ç†å™¨

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/tag/design.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`æœ‰åºé›†åˆ`](/tag/ordered-set.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/design-task-manager) [`LeetCode`](https://leetcode.com/problems/design-task-manager)

## é¢˜ç›®

There is a task management system that allows users to manage their tasks,
each associated with a priority. The system should efficiently handle adding,
modifying, executing, and removing tasks.

Implement the `TaskManager` class:

  * `TaskManager(vector<vector<int>>& tasks)` initializes the task manager with a list of user-task-priority triples. Each element in the input list is of the form `[userId, taskId, priority]`, which adds a task to the specified user with the given priority.

  * `void add(int userId, int taskId, int priority)` adds a task with the specified `taskId` and `priority` to the user with `userId`. It is **guaranteed** that `taskId` does not _exist_ in the system.

  * `void edit(int taskId, int newPriority)` updates the priority of the existing `taskId` to `newPriority`. It is **guaranteed** that `taskId` _exists_ in the system.

  * `void rmv(int taskId)` removes the task identified by `taskId` from the system. It is **guaranteed** that `taskId` _exists_ in the system.

  * `int execTop()` executes the task with the **highest** priority across all users. If there are multiple tasks with the same **highest** priority, execute the one with the highest `taskId`. After executing, the****`taskId`**** is **removed** from the system. Return the `userId` associated with the executed task. If no tasks are available, return -1.

**Note** that a user may be assigned multiple tasks.



**Example 1:**

**Input:**  
["TaskManager", "add", "edit", "execTop", "rmv", "add", "execTop"]  
[[[[1, 101, 10], [2, 102, 20], [3, 103, 15]]], [4, 104, 5], [102, 8], [],
[101], [5, 105, 15], []]

**Output:**  
[null, null, null, 3, null, null, 5]

**Explanation**

TaskManager taskManager = new TaskManager([[1, 101, 10], [2, 102, 20], [3,
103, 15]]); // Initializes with three tasks for Users 1, 2, and 3.  
taskManager.add(4, 104, 5); // Adds task 104 with priority 5 for User 4.  
taskManager.edit(102, 8); // Updates priority of task 102 to 8.  
taskManager.execTop(); // return 3. Executes task 103 for User 3.  
taskManager.rmv(101); // Removes task 101 from the system.  
taskManager.add(5, 105, 15); // Adds task 105 with priority 15 for User 5.  
taskManager.execTop(); // return 5. Executes task 105 for User 5.



**Constraints:**

  * `1 <= tasks.length <= 10^5`
  * `0 <= userId <= 10^5`
  * `0 <= taskId <= 10^5`
  * `0 <= priority <= 10^9`
  * `0 <= newPriority <= 10^9`
  * At most `2 * 10^5` calls will be made in **total** to `add`, `edit`, `rmv`, and `execTop` methods.
  * The input is generated such that `taskId` will be valid.


## é¢˜ç›®å¤§æ„

ä¸€ä¸ªä»»åŠ¡ç®¡ç†å™¨ç³»ç»Ÿå¯ä»¥è®©ç”¨æˆ·ç®¡ç†ä»–ä»¬çš„ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ã€‚è¿™ä¸ªç³»ç»Ÿéœ€è¦é«˜æ•ˆåœ°å¤„ç†æ·»åŠ ã€ä¿®æ”¹ã€æ‰§è¡Œå’Œåˆ é™¤ä»»åŠ¡çš„æ“ä½œã€‚

è¯·ä½ è®¾è®¡ä¸€ä¸ª `TaskManager` ç±»ï¼š

  * `TaskManager(vector<vector<int>>& tasks)` åˆå§‹åŒ–ä»»åŠ¡ç®¡ç†å™¨ï¼Œåˆå§‹åŒ–çš„æ•°ç»„æ ¼å¼ä¸º `[userId, taskId, priority]` ï¼Œè¡¨ç¤ºç»™ `userId` æ·»åŠ ä¸€ä¸ªä¼˜å…ˆçº§ä¸º `priority` çš„ä»»åŠ¡ `taskId` ã€‚

  * `void add(int userId, int taskId, int priority)` è¡¨ç¤ºç»™ç”¨æˆ· `userId` æ·»åŠ ä¸€ä¸ªä¼˜å…ˆçº§ä¸º `priority` çš„ä»»åŠ¡ `taskId` ï¼Œè¾“å…¥ **ä¿è¯  **`taskId` ä¸åœ¨ç³»ç»Ÿä¸­ã€‚

  * `void edit(int taskId, int newPriority)` æ›´æ–°å·²ç»å­˜åœ¨çš„ä»»åŠ¡ `taskId` çš„ä¼˜å…ˆçº§ä¸º `newPriority` ã€‚è¾“å…¥ **ä¿è¯**  `taskId` å­˜åœ¨äºç³»ç»Ÿä¸­ã€‚

  * `void rmv(int taskId)` ä»ç³»ç»Ÿä¸­åˆ é™¤ä»»åŠ¡ `taskId` ã€‚è¾“å…¥ **ä¿è¯**  `taskId` å­˜åœ¨äºç³»ç»Ÿä¸­ã€‚

  * `int execTop()` æ‰§è¡Œæ‰€æœ‰ç”¨æˆ·çš„ä»»åŠ¡ä¸­ä¼˜å…ˆçº§ **æœ€é«˜**  çš„ä»»åŠ¡ï¼Œå¦‚æœæœ‰å¤šä¸ªä»»åŠ¡ä¼˜å…ˆçº§ç›¸åŒä¸”éƒ½ä¸º **æœ€é«˜**  ï¼Œæ‰§è¡Œ `taskId` æœ€å¤§çš„ä¸€ä¸ªä»»åŠ¡ã€‚æ‰§è¡Œå®Œä»»åŠ¡åï¼Œ`taskId`** ** ä»ç³»ç»Ÿä¸­ **åˆ é™¤**  ã€‚åŒæ—¶è¯·ä½ è¿”å›è¿™ä¸ªä»»åŠ¡æ‰€å±çš„ç”¨æˆ· `userId` ã€‚å¦‚æœä¸å­˜åœ¨ä»»ä½•ä»»åŠ¡ï¼Œè¿”å› -1 ã€‚

**æ³¨æ„** ï¼Œä¸€ä¸ªç”¨æˆ·å¯èƒ½è¢«å®‰æ’å¤šä¸ªä»»åŠ¡ã€‚



**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š**  
["TaskManager", "add", "edit", "execTop", "rmv", "add", "execTop"]  
[[[[1, 101, 10], [2, 102, 20], [3, 103, 15]]], [4, 104, 5], [102, 8], [],
[101], [5, 105, 15], []]

**è¾“å‡ºï¼š**  
[null, null, null, 3, null, null, 5]

**è§£é‡Šï¼š**

TaskManager taskManager = new TaskManager([[1, 101, 10], [2, 102, 20], [3,
103, 15]]); // åˆ†åˆ«ç»™ç”¨æˆ· 1 ï¼Œ2 å’Œ 3 åˆå§‹åŒ–ä¸€ä¸ªä»»åŠ¡ã€‚  
taskManager.add(4, 104, 5); // ç»™ç”¨æˆ· 4 æ·»åŠ ä¼˜å…ˆçº§ä¸º 5 çš„ä»»åŠ¡ 104 ã€‚  
taskManager.edit(102, 8); // æ›´æ–°ä»»åŠ¡ 102 çš„ä¼˜å…ˆçº§ä¸º 8 ã€‚  
taskManager.execTop(); // è¿”å› 3 ã€‚æ‰§è¡Œç”¨æˆ· 3 çš„ä»»åŠ¡ 103 ã€‚  
taskManager.rmv(101); // å°†ç³»ç»Ÿä¸­çš„ä»»åŠ¡ 101 åˆ é™¤ã€‚  
taskManager.add(5, 105, 15); // ç»™ç”¨æˆ· 5 æ·»åŠ ä¼˜å…ˆçº§ä¸º 15 çš„ä»»åŠ¡ 105 ã€‚  
taskManager.execTop(); // è¿”å› 5 ã€‚æ‰§è¡Œç”¨æˆ· 5 çš„ä»»åŠ¡ 105 ã€‚



**æç¤ºï¼š**

  * `1 <= tasks.length <= 10^5`
  * `0 <= userId <= 10^5`
  * `0 <= taskId <= 10^5`
  * `0 <= priority <= 10^9`
  * `0 <= newPriority <= 10^9`
  * `add` ï¼Œ`edit` ï¼Œ`rmv` å’Œ `execTop` çš„æ€»æ“ä½œæ¬¡æ•° **åŠ èµ·æ¥**  ä¸è¶…è¿‡ `2 * 10^5` æ¬¡ã€‚
  * è¾“å…¥ä¿è¯ `taskId` æ˜¯åˆæ³•çš„ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```