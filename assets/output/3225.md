# [3225. ç½‘æ ¼å›¾æ“ä½œåçš„æœ€å¤§åˆ†æ•°](https://leetcode.com/problems/maximum-score-from-grid-operations)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) [`çŸ©é˜µ`](/leetcode/outline/tag/matrix.md) [`å‰ç¼€å’Œ`](/leetcode/outline/tag/prefix-sum.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/maximum-score-from-grid-operations)


## é¢˜ç›®

You are given a 2D matrix `grid` of size `n x n`. Initially, all cells of the
grid are colored white. In one operation, you can select any cell of indices
`(i, j)`, and color black all the cells of the `jth` column starting from the
top row down to the `ith` row.

The grid score is the sum of all `grid[i][j]` such that cell `(i, j)` is white
and it has a horizontally adjacent black cell.

Return the **maximum** score that can be achieved after some number of
operations.



**Example 1:**

**Input:** grid =
[[0,0,0,0,0],[0,0,3,0,0],[0,1,0,0,0],[5,0,0,3,0],[0,0,0,0,2]]

**Output:** 11

**Explanation:**

![](https://assets.leetcode.com/uploads/2024/05/11/one.png)

In the first operation, we color all cells in column 1 down to row 3, and in
the second operation, we color all cells in column 4 down to the last row. The
score of the resulting grid is `grid[3][0] + grid[1][2] + grid[3][3]` which is
equal to 11.

**Example 2:**

**Input:** grid =
[[10,9,0,0,15],[7,1,0,8,0],[5,20,0,11,0],[0,0,0,1,2],[8,12,1,10,3]]

**Output:** 94

**Explanation:**

![](https://assets.leetcode.com/uploads/2024/05/11/two-1.png)

We perform operations on 1, 2, and 3 down to rows 1, 4, and 0, respectively.
The score of the resulting grid is `grid[0][0] + grid[1][0] + grid[2][1] +
grid[4][1] + grid[1][3] + grid[2][3] + grid[3][3] + grid[4][3] + grid[0][4]`
which is equal to 94.



**Constraints:**

  * `1 <= n == grid.length <= 100`
  * `n == grid[i].length`
  * `0 <= grid[i][j] <= 10^9`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º `n x n` çš„äºŒç»´çŸ©é˜µ `grid` ï¼Œä¸€å¼€å§‹æ‰€æœ‰æ ¼å­éƒ½æ˜¯ç™½è‰²çš„ã€‚ä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ å¯ä»¥é€‰æ‹©ä»»æ„ä¸‹æ ‡ä¸º `(i, j)` çš„æ ¼å­ï¼Œå¹¶å°†ç¬¬
`j` åˆ—ä¸­ä»æœ€ä¸Šé¢åˆ°ç¬¬ `i` è¡Œæ‰€æœ‰æ ¼å­æ”¹æˆé»‘è‰²ã€‚

å¦‚æœæ ¼å­ `(i, j)` ä¸ºç™½è‰²ï¼Œä¸”å·¦è¾¹æˆ–è€…å³è¾¹çš„æ ¼å­è‡³å°‘ä¸€ä¸ªæ ¼å­ä¸ºé»‘è‰²ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°† `grid[i][j]` åŠ åˆ°æœ€åç½‘æ ¼å›¾çš„æ€»åˆ†ä¸­å»ã€‚

è¯·ä½ è¿”å›æ‰§è¡Œä»»æ„æ¬¡æ“ä½œä»¥åï¼Œæœ€ç»ˆç½‘æ ¼å›¾çš„ **æœ€å¤§**  æ€»åˆ†æ•°ã€‚



**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** grid = [[0,0,0,0,0],[0,0,3,0,0],[0,1,0,0,0],[5,0,0,3,0],[0,0,0,0,2]]

**è¾“å‡ºï¼š** 11

**è§£é‡Šï¼š**

![](https://assets.leetcode.com/uploads/2024/05/11/one.png)

ç¬¬ä¸€æ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬å°†ç¬¬ 1 åˆ—ä¸­ï¼Œæœ€ä¸Šé¢çš„æ ¼å­åˆ°ç¬¬ 3 è¡Œçš„æ ¼å­æŸ“æˆé»‘è‰²ã€‚ç¬¬äºŒæ¬¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬å°†ç¬¬ 4
åˆ—ä¸­ï¼Œæœ€ä¸Šé¢çš„æ ¼å­åˆ°æœ€åä¸€è¡Œçš„æ ¼å­æŸ“æˆé»‘è‰²ã€‚æœ€åç½‘æ ¼å›¾æ€»åˆ†ä¸º `grid[3][0] + grid[1][2] + grid[3][3]` ç­‰äº 11 ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** grid =
[[10,9,0,0,15],[7,1,0,8,0],[5,20,0,11,0],[0,0,0,1,2],[8,12,1,10,3]]

**è¾“å‡ºï¼š** 94

**è§£é‡Šï¼š**

![](https://assets.leetcode.com/uploads/2024/05/11/two-1.png)

æˆ‘ä»¬å¯¹ç¬¬ 1 ï¼Œ2 ï¼Œ3 åˆ—åˆ†åˆ«ä»ä¸Šå¾€ä¸‹æŸ“é»‘è‰²åˆ°ç¬¬ 1 ï¼Œ4ï¼Œ 0 è¡Œã€‚æœ€åç½‘æ ¼å›¾æ€»åˆ†ä¸º `grid[0][0] + grid[1][0] +
grid[2][1] + grid[4][1] + grid[1][3] + grid[2][3] + grid[3][3] + grid[4][3] +
grid[0][4]` ç­‰äº 94 ã€‚



**æç¤ºï¼š**

  * `1 <= n == grid.length <= 100`
  * `n == grid[i].length`
  * `0 <= grid[i][j] <= 10^9`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®
- [çŸ©é˜µä¸­çš„æœ€å¤§å¾—åˆ†](https://leetcode.com/problems/maximum-difference-score-in-a-grid)

::::
