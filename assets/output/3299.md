# [3299. è¿ç»­å­åºåˆ—çš„å’Œ](https://leetcode.com/problems/sum-of-consecutive-subsequences)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/sum-of-consecutive-subsequences)

## é¢˜ç›®

We call an array `arr` of length `n` **consecutive** if one of the following
holds:

  * `arr[i] - arr[i - 1] == 1` for _all_ `1 <= i < n`.
  * `arr[i] - arr[i - 1] == -1` for _all_ `1 <= i < n`.

The **value** of an array is the sum of its elements.

For example, `[3, 4, 5]` is a consecutive array of value 12 and `[9, 8]` is
another of value 17. While `[3, 4, 3]` and `[8, 6]` are not consecutive.

Given an array of integers `nums`, return the _sum_ of the **values** of all
**consecutive** _non-empty_ subsequences.

Since the answer may be very large, return it **modulo** `109 + 7.`

**Note** that an array of length 1 is also considered consecutive.



**Example 1:**

**Input:** nums = [1,2]

**Output:** 6

**Explanation:**

The consecutive subsequences are: `[1]`, `[2]`, `[1, 2]`.

**Example 2:**

**Input:** nums = [1,4,2,3]

**Output:** 31

**Explanation:**

The consecutive subsequences are: `[1]`, `[4]`, `[2]`, `[3]`, `[1, 2]`, `[2,
3]`, `[4, 3]`, `[1, 2, 3]`.



**Constraints:**

  * `1 <= nums.length <= 10^5`
  * `1 <= nums[i] <= 10^5`


## é¢˜ç›®å¤§æ„

å¦‚æœä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ `arr` ç¬¦åˆä¸‹é¢å…¶ä¸­ä¸€ä¸ªæ¡ä»¶ï¼Œå¯ä»¥ç§°å®ƒ **è¿ç»­** ï¼š

  * å¯¹äºæ‰€æœ‰çš„ `1 <= i < n`ï¼Œ`arr[i] - arr[i - 1] == 1`ã€‚
  * å¯¹äºæ‰€æœ‰çš„ `1 <= i < n`ï¼Œ`arr[i] - arr[i - 1] == -1`ã€‚

æ•°ç»„çš„ **å€¼** æ˜¯å…¶å…ƒç´ çš„å’Œã€‚

ä¾‹å¦‚ï¼Œ`[3, 4, 5]` æ˜¯ä¸€ä¸ªå€¼ä¸º 12 çš„è¿ç»­æ•°ç»„ï¼Œå¹¶ä¸” `[9, 8]` æ˜¯å¦ä¸€ä¸ªå€¼ä¸º 17 çš„è¿ç»­æ•°ç»„ã€‚è€Œ `[3, 4, 3]` å’Œ `[8,
6]` éƒ½ä¸è¿ç»­ã€‚

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œè¿”å›æ‰€æœ‰ **è¿ç»­**  éç©º å­åºåˆ— çš„ **å€¼**  ä¹‹å’Œã€‚

ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¿”å›å®ƒå¯¹ `109 + 7` **å–æ¨¡**  çš„å€¼ã€‚

**æ³¨æ„**  é•¿åº¦ä¸º 1 çš„æ•°ç»„ä¹Ÿè¢«è®¤ä¸ºæ˜¯è¿ç»­çš„ã€‚



**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** nums = [1,2]

**è¾“å‡ºï¼š** 6

**è§£é‡Šï¼š**

è¿ç»­å­åºåˆ—ä¸º `[1]`ï¼Œ`[2]`ï¼Œ`[1, 2]`ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** nums = [1,4,2,3]

**è¾“å‡ºï¼š** 31

**è§£é‡Šï¼š**

è¿ç»­å­åºåˆ—ä¸ºï¼š`[1]`ï¼Œ`[4]`ï¼Œ`[2]`ï¼Œ`[3]`ï¼Œ`[1, 2]`ï¼Œ`[2, 3]`ï¼Œ`[4, 3]`ï¼Œ`[1, 2, 3]`ã€‚



**æç¤ºï¼š**

  * `1 <= nums.length <= 10^5`
  * `1 <= nums[i] <= 10^5`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```