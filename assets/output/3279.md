---
title: 3279. æ´»å¡å æ®çš„æœ€å¤§æ€»åŒºåŸŸ ğŸ”’
description: LeetCode,3279. æ´»å¡å æ®çš„æœ€å¤§æ€»åŒºåŸŸ ğŸ”’,æ´»å¡å æ®çš„æœ€å¤§æ€»åŒºåŸŸ,Maximum Total Area Occupied by Pistons,è§£é¢˜æ€è·¯,æ•°ç»„,å“ˆå¸Œè¡¨,å­—ç¬¦ä¸²,è®¡æ•°,å‰ç¼€å’Œ,æ¨¡æ‹Ÿ
keywords:
  - LeetCode
  - 3279. æ´»å¡å æ®çš„æœ€å¤§æ€»åŒºåŸŸ ğŸ”’
  - æ´»å¡å æ®çš„æœ€å¤§æ€»åŒºåŸŸ
  - Maximum Total Area Occupied by Pistons
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - å“ˆå¸Œè¡¨
  - å­—ç¬¦ä¸²
  - è®¡æ•°
  - å‰ç¼€å’Œ
  - æ¨¡æ‹Ÿ
---

# 3279. æ´»å¡å æ®çš„æœ€å¤§æ€»åŒºåŸŸ ğŸ”’

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`è®¡æ•°`](/tag/counting.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/maximum-total-area-occupied-by-pistons) [`LeetCode`](https://leetcode.com/problems/maximum-total-area-occupied-by-pistons)

## é¢˜ç›®

There are several pistons in an old car engine, and we want to calculate the
**maximum** possible area **under** the pistons.

You are given:

  * An integer `height`, representing the **maximum** height a piston can reach.
  * An integer array `positions`, where `positions[i]` is the current position of piston `i`, which is equal to the current area **under** it.
  * A string `directions`, where `directions[i]` is the current moving direction of piston `i`, `'U'` for up, and `'D'` for down.

Each second:

  * Every piston moves in its current direction 1 unit. e.g., if the direction is up, `positions[i]` is incremented by 1.
  * If a piston has reached one of the ends, i.e., `positions[i] == 0` or `positions[i] == height`, its direction will change.

Return the _maximum possible area_ under all the pistons.



**Example 1:**

**Input:** height = 5, positions = [2,5], directions = "UD"

**Output:** 7

**Explanation:**

The current position of the pistons has the maximum possible area under it.

**Example 2:**

**Input:** height = 6, positions = [0,0,6,3], directions = "UUDU"

**Output:** 15

**Explanation:**

After 3 seconds, the pistons will be in positions `[3, 3, 3, 6]`, which has
the maximum possible area under it.



**Constraints:**

  * `1 <= height <= 10^6`
  * `1 <= positions.length == directions.length <= 10^5`
  * `0 <= positions[i] <= height`
  * `directions[i]` is either `'U'` or `'D'`.


## é¢˜ç›®å¤§æ„

ä¸€å°æ—§è½¦çš„å¼•æ“ä¸­æœ‰ä¸€äº›æ´»å¡ï¼Œæˆ‘ä»¬æƒ³è¦è®¡ç®—æ´»å¡ **ä¸‹æ–¹** çš„ **æœ€å¤§** åŒºåŸŸã€‚

ç»™å®šï¼š

  * ä¸€ä¸ªæ•´æ•° `height`ï¼Œè¡¨ç¤ºæ´»å¡ **æœ€å¤§** å¯åˆ°è¾¾çš„é«˜åº¦ã€‚
  * ä¸€ä¸ªæ•´æ•°æ•°ç»„ `positions`ï¼Œå…¶ä¸­ `positions[i]` æ˜¯æ´»å¡ `i` çš„å½“å‰ä½ç½®ï¼Œç­‰äºå…¶ **ä¸‹æ–¹**  çš„å½“å‰åŒºåŸŸã€‚
  * ä¸€ä¸ªå­—ç¬¦ä¸² `directions`ï¼Œå…¶ä¸­ `directions[i]` æ˜¯æ´»å¡ `i` çš„å½“å‰ç§»åŠ¨æ–¹å‘ï¼Œ`'U'` è¡¨ç¤ºå‘ä¸Šï¼Œ`'D'` è¡¨ç¤ºå‘ä¸‹ã€‚

æ¯ä¸€ç§’ï¼š

  * æ¯ä¸ªæ´»å¡å‘å®ƒçš„å½“å‰æ–¹å‘ç§»åŠ¨ 1 å•ä½ã€‚å³å¦‚æœæ–¹å‘å‘ä¸Šï¼Œ`positions[i]` å¢åŠ  1ã€‚
  * å¦‚æœä¸€ä¸ªæ´»å¡åˆ°è¾¾äº†å…¶ä¸­ä¸€ä¸ªç»ˆç‚¹ï¼Œå³ `positions[i] == 0` æˆ– `positions[i] == height`ï¼Œå®ƒçš„æ–¹å‘å°†ä¼šæ”¹å˜ã€‚

è¿”å›æ‰€æœ‰æ´»å¡ä¸‹æ–¹çš„æœ€å¤§å¯èƒ½åŒºåŸŸã€‚



**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š** height = 5, positions = [2,5], directions = "UD"

**è¾“å‡ºï¼š** 7

**è§£é‡Šï¼š**

å½“å‰æ´»å¡çš„ä½ç½®ä¸‹æ–¹åŒºåŸŸæœ€å¤§ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š** height = 6, positions = [0,0,6,3], directions = "UUDU"

**è¾“å‡ºï¼š** 15

**è§£é‡Šï¼š**

ä¸‰ç§’åï¼Œæ´»å¡å°†ä¼šä½äº `[3, 3, 3, 6]`ï¼Œæ­¤æ—¶ä¸‹æ–¹åŒºåŸŸæœ€å¤§ã€‚



**æç¤ºï¼š**

  * `1 <= height <= 10^6`
  * `1 <= positions.length == directions.length <= 10^5`
  * `0 <= positions[i] <= height`
  * `directions[i]` ä¸º `'U'` æˆ– `'D'`ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```