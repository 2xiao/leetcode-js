# [1923. æœ€é•¿å…¬å…±å­è·¯å¾„](https://leetcode.com/problems/longest-common-subpath)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/outline/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/outline/tag/binary-search.md) [`åç¼€æ•°ç»„`](/outline/tag/suffix-array.md) [`å“ˆå¸Œå‡½æ•°`](/outline/tag/hash-function.md) [`æ»šåŠ¨å“ˆå¸Œ`](/outline/tag/rolling-hash.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/longest-common-subpath)

## é¢˜ç›®

There is a country of `n` cities numbered from `0` to `n - 1`. In this
country, there is a road connecting **every pair** of cities.

There are `m` friends numbered from `0` to `m - 1` who are traveling through
the country. Each one of them will take a path consisting of some cities. Each
path is represented by an integer array that contains the visited cities in
order. The path may contain a city **more than once** , but the same city will
not be listed consecutively.

Given an integer `n` and a 2D integer array `paths` where `paths[i]` is an
integer array representing the path of the `ith` friend, return _the length of
the**longest common subpath** that is shared by **every** friend's path, or
_`0` _if there is no common subpath at all_.

A **subpath** of a path is a contiguous sequence of cities within that path.



**Example 1:**

> Input: n = 5, paths = [[0,1,_2,3_ ,4],
> 
> > 
> > 
> > 
> > 
> > 
>    [_2,3_ ,4],
> 
> > 
> > 
> > 
> > 
> > 
>    [4,0,1,_2,3_]]
> 
> Output: 2
> 
> Explanation: The longest common subpath is [2,3].

**Example 2:**

> Input: n = 3, paths = [[0],[1],[2]]
> 
> Output: 0
> 
> Explanation: There is no common subpath shared by the three paths.

**Example 3:**

> Input: n = 5, paths = [[_0_ ,1,2,3,4],
> 
> > 
> > 
> > 
> > 
> > 
>    [4,3,2,1,_0_]]
> 
> Output: 1
> 
> Explanation: The possible longest common subpaths are [0], [1], [2], [3], and [4]. All have a length of 1.



**Constraints:**

  * `1 <= n <= 10^5`
  * `m == paths.length`
  * `2 <= m <= 10^5`
  * `sum(paths[i].length) <= 10^5`
  * `0 <= paths[i][j] < n`
  * The same city is not listed multiple times consecutively in `paths[i]`.


## é¢˜ç›®å¤§æ„

ä¸€ä¸ªå›½å®¶ç”± `n` ä¸ªç¼–å·ä¸º `0` åˆ° `n - 1` çš„åŸå¸‚ç»„æˆã€‚åœ¨è¿™ä¸ªå›½å®¶é‡Œï¼Œ**æ¯ä¸¤ä¸ª** åŸå¸‚ä¹‹é—´éƒ½æœ‰ä¸€æ¡é“è·¯è¿æ¥ã€‚

æ€»å…±æœ‰ `m` ä¸ªç¼–å·ä¸º `0` åˆ° `m - 1`
çš„æœ‹å‹æƒ³åœ¨è¿™ä¸ªå›½å®¶æ—…æ¸¸ã€‚ä»–ä»¬æ¯ä¸€ä¸ªäººçš„è·¯å¾„éƒ½ä¼šåŒ…å«ä¸€äº›åŸå¸‚ã€‚æ¯æ¡è·¯å¾„éƒ½ç”±ä¸€ä¸ªæ•´æ•°æ•°ç»„è¡¨ç¤ºï¼Œæ¯ä¸ªæ•´æ•°æ•°ç»„è¡¨ç¤ºä¸€ä¸ªæœ‹å‹æŒ‰é¡ºåºè®¿é—®è¿‡çš„åŸå¸‚åºåˆ—ã€‚åŒä¸€ä¸ªåŸå¸‚åœ¨ä¸€æ¡è·¯å¾„ä¸­å¯èƒ½
**é‡å¤** å‡ºç°ï¼Œä½†åŒä¸€ä¸ªåŸå¸‚åœ¨ä¸€æ¡è·¯å¾„ä¸­ä¸ä¼šè¿ç»­å‡ºç°ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` å’ŒäºŒç»´æ•°ç»„ `paths` ï¼Œå…¶ä¸­ `paths[i]` æ˜¯ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œè¡¨ç¤ºç¬¬ `i` ä¸ªæœ‹å‹èµ°è¿‡çš„è·¯å¾„ï¼Œè¯·ä½ è¿”å› **æ¯ä¸€ä¸ª**
æœ‹å‹éƒ½èµ°è¿‡çš„ **æœ€é•¿å…¬å…±å­è·¯å¾„** çš„é•¿åº¦ï¼Œå¦‚æœä¸å­˜åœ¨å…¬å…±å­è·¯å¾„ï¼Œè¯·ä½ è¿”å› `0` ã€‚

ä¸€ä¸ª **å­è·¯å¾„** æŒ‡çš„æ˜¯ä¸€æ¡è·¯å¾„ä¸­è¿ç»­çš„åŸå¸‚åºåˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 5, paths = [[0,1,**2,3** ,4],
> 
> > 
> > 
> > 
> > 
> > 
>  [**2,3** ,4],
> 
> > 
> > 
> > 
> > 
> > 
>  [4,0,1,**2,3**]]
> 
> **è¾“å‡ºï¼š** 2
> 
> **è§£é‡Šï¼š** æœ€é•¿å…¬å…±å­è·¯å¾„ä¸º [2,3] ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 3, paths = [[0],[1],[2]]
> 
> **è¾“å‡ºï¼š** 0
> 
> **è§£é‡Šï¼š** ä¸‰æ¡è·¯å¾„æ²¡æœ‰å…¬å…±å­è·¯å¾„ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** n = 5, paths = [[**0** ,1,2,3,4],
> 
> > 
> > 
> > 
> > 
> > 
>  [4,3,2,1,**0**]]
> 
> **è¾“å‡ºï¼š** 1
> 
> **è§£é‡Šï¼š** æœ€é•¿å…¬å…±å­è·¯å¾„ä¸º [0]ï¼Œ[1]ï¼Œ[2]ï¼Œ[3] å’Œ [4] ã€‚å®ƒä»¬é•¿åº¦éƒ½ä¸º 1 ã€‚

**æç¤ºï¼š**

  * `1 <= n <= 10^5`
  * `m == paths.length`
  * `2 <= m <= 10^5`
  * `sum(paths[i].length) <= 10^5`
  * `0 <= paths[i][j] < n`
  * `paths[i]` ä¸­åŒä¸€ä¸ªåŸå¸‚ä¸ä¼šè¿ç»­é‡å¤å‡ºç°ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 332 | [é‡æ–°å®‰æ’è¡Œç¨‹](https://leetcode.com/problems/reconstruct-itinerary) |  |  [`æ·±åº¦ä¼˜å…ˆæœç´¢`](/outline/tag/depth-first-search.md) [`å›¾`](/outline/tag/graph.md) [`æ¬§æ‹‰å›è·¯`](/outline/tag/eulerian-circuit.md) | <font color=#ff334b>Hard</font> |
| 718 | [æœ€é•¿é‡å¤å­æ•°ç»„](https://leetcode.com/problems/maximum-length-of-repeated-subarray) |  |  [`æ•°ç»„`](/outline/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/outline/tag/binary-search.md) [`åŠ¨æ€è§„åˆ’`](/outline/tag/dynamic-programming.md) `3+` | <font color=#ffb800>Medium</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
