---
title: 741. æ‘˜æ¨±æ¡ƒ
description: LeetCode,741. æ‘˜æ¨±æ¡ƒ,æ‘˜æ¨±æ¡ƒ,Cherry Pickup,è§£é¢˜æ€è·¯,æ•°ç»„,åŠ¨æ€è§„åˆ’,çŸ©é˜µ
keywords:
  - LeetCode
  - 741. æ‘˜æ¨±æ¡ƒ
  - æ‘˜æ¨±æ¡ƒ
  - Cherry Pickup
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - åŠ¨æ€è§„åˆ’
  - çŸ©é˜µ
---

# 741. æ‘˜æ¨±æ¡ƒ

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`çŸ©é˜µ`](/tag/matrix.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/cherry-pickup) [`LeetCode`](https://leetcode.com/problems/cherry-pickup)

## é¢˜ç›®

You are given an `n x n` `grid` representing a field of cherries, each cell is
one of three possible integers.

  * `0` means the cell is empty, so you can pass through,
  * `1` means the cell contains a cherry that you can pick up and pass through, or
  * `-1` means the cell contains a thorn that blocks your way.

Return _the maximum number of cherries you can collect by following the rules
below_ :

  * Starting at the position `(0, 0)` and reaching `(n - 1, n - 1)` by moving right or down through valid path cells (cells with value `0` or `1`).
  * After reaching `(n - 1, n - 1)`, returning to `(0, 0)` by moving left or up through valid path cells.
  * When passing through a path cell containing a cherry, you pick it up, and the cell becomes an empty cell `0`.
  * If there is no valid path between `(0, 0)` and `(n - 1, n - 1)`, then no cherries can be collected.



**Example 1:**

![](https://assets.leetcode.com/uploads/2020/12/14/grid.jpg)

> Input: grid = [[0,1,-1],[1,0,-1],[1,1,1]]
> 
> Output: 5
> 
> Explanation: The player started at (0, 0) and went down, down, right right to reach (2, 2).
> 
> 4 cherries were picked up during this single trip, and the matrix becomes [[0,1,-1],[0,0,-1],[0,0,0]].
> 
> Then, the player went left, up, up, left to return home, picking up one more cherry.
> 
> The total number of cherries picked up is 5, and this is the maximum possible.

**Example 2:**

> Input: grid = [[1,1,-1],[1,-1,1],[-1,1,1]]
> 
> Output: 0

**Constraints:**

  * `n == grid.length`
  * `n == grid[i].length`
  * `1 <= n <= 50`
  * `grid[i][j]` is `-1`, `0`, or `1`.
  * `grid[0][0] != -1`
  * `grid[n - 1][n - 1] != -1`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ª `n x n` çš„ç½‘æ ¼ `grid` ï¼Œä»£è¡¨ä¸€å—æ¨±æ¡ƒåœ°ï¼Œæ¯ä¸ªæ ¼å­ç”±ä»¥ä¸‹ä¸‰ç§æ•°å­—çš„ä¸€ç§æ¥è¡¨ç¤ºï¼š

  * `0` è¡¨ç¤ºè¿™ä¸ªæ ¼å­æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç©¿è¿‡å®ƒã€‚
  * `1` è¡¨ç¤ºè¿™ä¸ªæ ¼å­é‡Œè£…ç€ä¸€ä¸ªæ¨±æ¡ƒï¼Œä½ å¯ä»¥æ‘˜åˆ°æ¨±æ¡ƒç„¶åç©¿è¿‡å®ƒã€‚
  * `-1` è¡¨ç¤ºè¿™ä¸ªæ ¼å­é‡Œæœ‰è†æ£˜ï¼ŒæŒ¡ç€ä½ çš„è·¯ã€‚

è¯·ä½ ç»Ÿè®¡å¹¶è¿”å›ï¼šåœ¨éµå®ˆä¸‹åˆ—è§„åˆ™çš„æƒ…å†µä¸‹ï¼Œèƒ½æ‘˜åˆ°çš„æœ€å¤šæ¨±æ¡ƒæ•°ï¼š

  * ä»ä½ç½® `(0, 0)` å‡ºå‘ï¼Œæœ€ååˆ°è¾¾ `(n - 1, n - 1)` ï¼Œåªèƒ½å‘ä¸‹æˆ–å‘å³èµ°ï¼Œå¹¶ä¸”åªèƒ½ç©¿è¶Šæœ‰æ•ˆçš„æ ¼å­ï¼ˆå³åªå¯ä»¥ç©¿è¿‡å€¼ä¸º `0` æˆ–è€… `1` çš„æ ¼å­ï¼‰ï¼›
  * å½“åˆ°è¾¾ `(n - 1, n - 1)` åï¼Œä½ è¦ç»§ç»­èµ°ï¼Œç›´åˆ°è¿”å›åˆ° `(0, 0) `ï¼Œåªèƒ½å‘ä¸Šæˆ–å‘å·¦èµ°ï¼Œå¹¶ä¸”åªèƒ½ç©¿è¶Šæœ‰æ•ˆçš„æ ¼å­ï¼›
  * å½“ä½ ç»è¿‡ä¸€ä¸ªæ ¼å­ä¸”è¿™ä¸ªæ ¼å­åŒ…å«ä¸€ä¸ªæ¨±æ¡ƒæ—¶ï¼Œä½ å°†æ‘˜åˆ°æ¨±æ¡ƒå¹¶ä¸”è¿™ä¸ªæ ¼å­ä¼šå˜æˆç©ºçš„ï¼ˆå€¼å˜ä¸º `0` ï¼‰ï¼›
  * å¦‚æœåœ¨ `(0, 0)` å’Œ `(n - 1, n - 1)` ä¹‹é—´ä¸å­˜åœ¨ä¸€æ¡å¯ç»è¿‡çš„è·¯å¾„ï¼Œåˆ™æ— æ³•æ‘˜åˆ°ä»»ä½•ä¸€ä¸ªæ¨±æ¡ƒã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/12/14/grid.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** grid = [[0,1,-1],[1,0,-1],[1,1,1]]
> 
> **è¾“å‡ºï¼š** 5
> 
> **è§£é‡Šï¼š** ç©å®¶ä» (0, 0) å‡ºå‘ï¼šå‘ä¸‹ã€å‘ä¸‹ã€å‘å³ã€å‘å³ç§»åŠ¨è‡³ (2, 2) ã€‚
> 
> åœ¨è¿™ä¸€æ¬¡è¡Œç¨‹ä¸­æ¡åˆ° 4 ä¸ªæ¨±æ¡ƒï¼ŒçŸ©é˜µå˜æˆ [[0,1,-1],[0,0,-1],[0,0,0]] ã€‚
> 
> ç„¶åï¼Œç©å®¶å‘å·¦ã€å‘ä¸Šã€å‘ä¸Šã€å‘å·¦è¿”å›èµ·ç‚¹ï¼Œå†æ¡åˆ° 1 ä¸ªæ¨±æ¡ƒã€‚
> 
> æ€»å…±æ¡åˆ° 5 ä¸ªæ¨±æ¡ƒï¼Œè¿™æ˜¯æœ€å¤§å¯èƒ½å€¼ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** grid = [[1,1,-1],[1,-1,1],[-1,1,1]]
> 
> **è¾“å‡ºï¼š** 0
> 
> 



**æç¤ºï¼š**

  * `n == grid.length`
  * `n == grid[i].length`
  * `1 <= n <= 50`
  * `grid[i][j]` ä¸º `-1`ã€`0` æˆ– `1`
  * `grid[0][0] != -1`
  * `grid[n - 1][n - 1] != -1`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 64 | æœ€å°è·¯å¾„å’Œ | [[âœ“]](/problem/0064.md) |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`çŸ©é˜µ`](/tag/matrix.md) | ğŸŸ  | [ğŸ€„ï¸](https://leetcode.cn/problems/minimum-path-sum) [ğŸ”—](https://leetcode.com/problems/minimum-path-sum) |
| 174 | åœ°ä¸‹åŸæ¸¸æˆ | [[âœ“]](/problem/0174.md) |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`çŸ©é˜µ`](/tag/matrix.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/dungeon-game) [ğŸ”—](https://leetcode.com/problems/dungeon-game) |
| 2065 | æœ€å¤§åŒ–ä¸€å¼ å›¾ä¸­çš„è·¯å¾„ä»·å€¼ |  |  [`å›¾`](/tag/graph.md) [`æ•°ç»„`](/tag/array.md) [`å›æº¯`](/tag/backtracking.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/maximum-path-quality-of-a-graph) [ğŸ”—](https://leetcode.com/problems/maximum-path-quality-of-a-graph) |
| 2435 | çŸ©é˜µä¸­å’Œèƒ½è¢« K æ•´é™¤çš„è·¯å¾„ |  |  [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md) [`çŸ©é˜µ`](/tag/matrix.md) | ğŸ”´ | [ğŸ€„ï¸](https://leetcode.cn/problems/paths-in-matrix-whose-sum-is-divisible-by-k) [ğŸ”—](https://leetcode.com/problems/paths-in-matrix-whose-sum-is-divisible-by-k) |