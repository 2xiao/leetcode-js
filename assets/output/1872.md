# [1872. çŸ³å­æ¸¸æˆ VIII](https://leetcode.com/problems/stone-game-viii)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`æ•°å­¦`](/leetcode/outline/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) [`åšå¼ˆ`](/leetcode/outline/tag/game-theory.md) [`å‰ç¼€å’Œ`](/leetcode/outline/tag/prefix-sum.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/stone-game-viii)


## é¢˜ç›®

Alice and Bob take turns playing a game, with **Alice starting first**.

There are `n` stones arranged in a row. On each player's turn, while the
number of stones is **more than one** , they will do the following:

  1. Choose an integer `x > 1`, and **remove** the leftmost `x` stones from the row.
  2. Add the **sum** of the **removed** stones' values to the player's score.
  3. Place a **new stone** , whose value is equal to that sum, on the left side of the row.

The game stops when **only** **one** stone is left in the row.

The **score difference** between Alice and Bob is `(Alice's score - Bob's
score)`. Alice's goal is to **maximize** the score difference, and Bob's goal
is the **minimize** the score difference.

Given an integer array `stones` of length `n` where `stones[i]` represents the
value of the `ith` stone **from the left** , return _the**score difference**
between Alice and Bob if they both play **optimally**._



**Example 1:**

> 
> 
> 
> 
> 
> **Input:** stones = [-1,2,-3,4,-5]
> 
> Output: 5
> 
> Explanation:
> - Alice removes the first 4 stones, adds (-1) + 2 + (-3) + 4 = 2 to her score, and places a stone of
> 
>   value 2 on the left. stones = [2,-5].
> - Bob removes the first 2 stones, adds 2 + (-5) = -3 to his score, and places a stone of value -3 on
> 
>   the left. stones = [-3].
> 
> The difference between their scores is 2 - (-3) = 5.

**Example 2:**

> 
> 
> 
> 
> 
> **Input:** stones = [7,-6,5,10,5,-2,-6]
> 
> Output: 13
> 
> Explanation:
> - Alice removes all stones, adds 7 + (-6) + 5 + 10 + 5 + (-2) + (-6) = 13 to her score, and places a
> 
>   stone of value 13 on the left. stones = [13].
> 
> The difference between their scores is 13 - 0 = 13.

**Example 3:**

> 
> 
> 
> 
> 
> **Input:** stones = [-10,-12]
> 
> Output: -22
> 
> Explanation:
> - Alice can only make one move, which is to remove both stones. She adds (-10) + (-12) = -22 to her
> 
>   score and places a stone of value -22 on the left. stones = [-22].
> 
> The difference between their scores is (-22) - 0 = -22.

**Constraints:**

  * `n == stones.length`
  * `2 <= n <= 10^5`
  * `-10^4 <= stones[i] <= 10^4`


## é¢˜ç›®å¤§æ„

Alice å’Œ Bob ç©ä¸€ä¸ªæ¸¸æˆï¼Œä¸¤äººè½®æµæ“ä½œï¼Œ **Alice å…ˆæ‰‹** ã€‚

æ€»å…±æœ‰ `n` ä¸ªçŸ³å­æ’æˆä¸€è¡Œã€‚è½®åˆ°æŸä¸ªç©å®¶çš„å›åˆæ—¶ï¼Œå¦‚æœçŸ³å­çš„æ•°ç›® **å¤§äº 1** ï¼Œä»–å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

  1. é€‰æ‹©ä¸€ä¸ªæ•´æ•° `x > 1` ï¼Œå¹¶ä¸” **ç§»é™¤** æœ€å·¦è¾¹çš„ `x` ä¸ªçŸ³å­ã€‚
  2. å°†**ç§»é™¤** çš„çŸ³å­ä»·å€¼ä¹‹ **å’Œ** ç´¯åŠ åˆ°è¯¥ç©å®¶çš„åˆ†æ•°ä¸­ã€‚
  3. å°†ä¸€ä¸ª **æ–°çš„çŸ³å­** æ”¾åœ¨æœ€å·¦è¾¹ï¼Œä¸”æ–°çŸ³å­çš„å€¼ä¸ºè¢«ç§»é™¤çŸ³å­å€¼ä¹‹å’Œã€‚

å½“åªå‰©ä¸‹ **ä¸€ä¸ª** çŸ³å­æ—¶ï¼Œæ¸¸æˆç»“æŸã€‚

Alice å’Œ Bob çš„ **åˆ†æ•°ä¹‹å·®** ä¸º `(Alice çš„åˆ†æ•° - Bob çš„åˆ†æ•°)` ã€‚ Alice çš„ç›®æ ‡æ˜¯**æœ€å¤§åŒ–** åˆ†æ•°å·®ï¼ŒBob
çš„ç›®æ ‡æ˜¯ **æœ€å°åŒ–** åˆ†æ•°å·®ã€‚

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•´æ•°æ•°ç»„ `stones` ï¼Œå…¶ä¸­ `stones[i]` æ˜¯ **ä»å·¦è¾¹èµ·** ç¬¬ `i` ä¸ªçŸ³å­çš„ä»·å€¼ã€‚è¯·ä½ è¿”å›åœ¨åŒæ–¹éƒ½é‡‡ç”¨
**æœ€ä¼˜** ç­–ç•¥çš„æƒ…å†µä¸‹ï¼ŒAlice å’Œ Bob çš„ **åˆ†æ•°ä¹‹å·®** ã€‚

**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** stones = [-1,2,-3,4,-5]
> 
> **è¾“å‡ºï¼š** 5
> 
> **è§£é‡Šï¼š**
> - Alice ç§»é™¤æœ€å·¦è¾¹çš„ 4 ä¸ªçŸ³å­ï¼Œå¾—åˆ†å¢åŠ  (-1) + 2 + (-3) + 4 = 2 ï¼Œå¹¶ä¸”å°†ä¸€ä¸ªä»·å€¼ä¸º 2 çš„çŸ³å­æ”¾åœ¨æœ€å·¦è¾¹ã€‚stones = [2,-5] ã€‚
> - Bob ç§»é™¤æœ€å·¦è¾¹çš„ 2 ä¸ªçŸ³å­ï¼Œå¾—åˆ†å¢åŠ  2 + (-5) = -3 ï¼Œå¹¶ä¸”å°†ä¸€ä¸ªä»·å€¼ä¸º -3 çš„çŸ³å­æ”¾åœ¨æœ€å·¦è¾¹ã€‚stones = [-3] ã€‚
> 
> ä¸¤è€…åˆ†æ•°ä¹‹å·®ä¸º 2 - (-3) = 5 ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** stones = [7,-6,5,10,5,-2,-6]
> 
> **è¾“å‡ºï¼š** 13
> 
> **è§£é‡Šï¼š**
> - Alice ç§»é™¤æ‰€æœ‰çŸ³å­ï¼Œå¾—åˆ†å¢åŠ  7 + (-6) + 5 + 10 + 5 + (-2) + (-6) = 13 ï¼Œå¹¶ä¸”å°†ä¸€ä¸ªä»·å€¼ä¸º 13 çš„çŸ³å­æ”¾åœ¨æœ€å·¦è¾¹ã€‚stones = [13] ã€‚
> 
> ä¸¤è€…åˆ†æ•°ä¹‹å·®ä¸º 13 - 0 = 13 ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** stones = [-10,-12]
> 
> **è¾“å‡ºï¼š** -22
> 
> **è§£é‡Šï¼š**
> - Alice åªæœ‰ä¸€ç§æ“ä½œï¼Œå°±æ˜¯ç§»é™¤æ‰€æœ‰çŸ³å­ã€‚å¾—åˆ†å¢åŠ  (-10) + (-12) = -22 ï¼Œå¹¶ä¸”å°†ä¸€ä¸ªä»·å€¼ä¸º -22 çš„çŸ³å­æ”¾åœ¨æœ€å·¦è¾¹ã€‚stones = [-22] ã€‚
> 
> ä¸¤è€…åˆ†æ•°ä¹‹å·®ä¸º (-22) - 0 = -22 ã€‚
> 
> 

**æç¤ºï¼š**

  * `n == stones.length`
  * `2 <= n <= 10^5`
  * `-10^4 <= stones[i] <= 10^4`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 877 | [çŸ³å­æ¸¸æˆ](https://leetcode.com/problems/stone-game) |  |  [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`æ•°å­¦`](/leetcode/outline/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) `1+` | <font color=#ffb800>Medium</font> |
| 1140 | [çŸ³å­æ¸¸æˆ II](https://leetcode.com/problems/stone-game-ii) |  |  [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`æ•°å­¦`](/leetcode/outline/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) `2+` | <font color=#ffb800>Medium</font> |
| 1406 | [çŸ³å­æ¸¸æˆ III](https://leetcode.com/problems/stone-game-iii) |  |  [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`æ•°å­¦`](/leetcode/outline/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) `1+` | <font color=#ff334b>Hard</font> |
| 1510 | [çŸ³å­æ¸¸æˆ IV](https://leetcode.com/problems/stone-game-iv) |  |  [`æ•°å­¦`](/leetcode/outline/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) [`åšå¼ˆ`](/leetcode/outline/tag/game-theory.md) | <font color=#ff334b>Hard</font> |
| 1563 | [çŸ³å­æ¸¸æˆ V](https://leetcode.com/problems/stone-game-v) |  |  [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`æ•°å­¦`](/leetcode/outline/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) `1+` | <font color=#ff334b>Hard</font> |
| 1686 | [çŸ³å­æ¸¸æˆ VI](https://leetcode.com/problems/stone-game-vi) |  |  [`è´ªå¿ƒ`](/leetcode/outline/tag/greedy.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`æ•°å­¦`](/leetcode/outline/tag/math.md) `3+` | <font color=#ffb800>Medium</font> |
| 1690 | [çŸ³å­æ¸¸æˆ VII](https://leetcode.com/problems/stone-game-vii) |  |  [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`æ•°å­¦`](/leetcode/outline/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) `1+` | <font color=#ffb800>Medium</font> |
| 1872 | [çŸ³å­æ¸¸æˆ VIII](https://leetcode.com/problems/stone-game-viii) |  |  [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`æ•°å­¦`](/leetcode/outline/tag/math.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) `2+` | <font color=#ff334b>Hard</font> |
| 2029 | [çŸ³å­æ¸¸æˆ IX](https://leetcode.com/problems/stone-game-ix) |  |  [`è´ªå¿ƒ`](/leetcode/outline/tag/greedy.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`æ•°å­¦`](/leetcode/outline/tag/math.md) `2+` | <font color=#ffb800>Medium</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
