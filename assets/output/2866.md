# [2866. ç¾ä¸½å¡” II](https://leetcode.com/problems/beautiful-towers-ii)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ ˆ`](/leetcode/outline/tag/stack.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å•è°ƒæ ˆ`](/leetcode/outline/tag/monotonic-stack.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/beautiful-towers-ii)

## é¢˜ç›®

You are given a **0-indexed** array `maxHeights` of `n` integers.

You are tasked with building `n` towers in the coordinate line. The `ith`
tower is built at coordinate `i` and has a height of `heights[i]`.

A configuration of towers is **beautiful** if the following conditions hold:

  1. `1 <= heights[i] <= maxHeights[i]`
  2. `heights` is a **mountain** array.

Array `heights` is a **mountain** if there exists an index `i` such that:

  * For all `0 < j <= i`, `heights[j - 1] <= heights[j]`
  * For all `i <= k < n - 1`, `heights[k + 1] <= heights[k]`

Return _the**maximum possible sum of heights** of a beautiful configuration of
towers_.



**Example 1:**

> Input: maxHeights = [5,3,4,1,1]
> 
> Output: 13
> 
> Explanation: One beautiful configuration with a maximum sum is heights = [5,3,3,1,1]. This configuration is beautiful since:
> - 1 <= heights[i] <= maxHeights[i]  
> - heights is a mountain of peak i = 0.
> 
> It can be shown that there exists no other beautiful configuration with a sum of heights greater than 13.

**Example 2:**

> Input: maxHeights = [6,5,3,9,2,7]
> 
> Output: 22
> 
> Explanation: One beautiful configuration with a maximum sum is heights = [3,3,3,9,2,2]. This configuration is beautiful since:
> - 1 <= heights[i] <= maxHeights[i]
> - heights is a mountain of peak i = 3.
> 
> It can be shown that there exists no other beautiful configuration with a sum of heights greater than 22.

**Example 3:**

> Input: maxHeights = [3,2,5,5,2,3]
> 
> Output: 18
> 
> Explanation: One beautiful configuration with a maximum sum is heights = [2,2,5,5,2,2]. This configuration is beautiful since:
> - 1 <= heights[i] <= maxHeights[i]
> - heights is a mountain of peak i = 2. 
> 
> Note that, for this configuration, i = 3 can also be considered a peak.
> 
> It can be shown that there exists no other beautiful configuration with a sum of heights greater than 18.

**Constraints:**

  * `1 <= n == maxHeights.length <= 10^5`
  * `1 <= maxHeights[i] <= 10^9`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` ä¸‹æ ‡ä» **0**  å¼€å§‹çš„æ•´æ•°æ•°ç»„ `maxHeights` ã€‚

ä½ çš„ä»»åŠ¡æ˜¯åœ¨åæ ‡è½´ä¸Šå»º `n` åº§å¡”ã€‚ç¬¬ `i` åº§å¡”çš„ä¸‹æ ‡ä¸º `i` ï¼Œé«˜åº¦ä¸º `heights[i]` ã€‚

å¦‚æœä»¥ä¸‹æ¡ä»¶æ»¡è¶³ï¼Œæˆ‘ä»¬ç§°è¿™äº›å¡”æ˜¯ **ç¾ä¸½**  çš„ï¼š

  1. `1 <= heights[i] <= maxHeights[i]`
  2. `heights` æ˜¯ä¸€ä¸ª **å±±è„‰** æ•°ç»„ã€‚

å¦‚æœå­˜åœ¨ä¸‹æ ‡ `i` æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°æ•°ç»„ `heights` æ˜¯ä¸€ä¸ª **å±±è„‰** æ•°ç»„ï¼š

  * å¯¹äºæ‰€æœ‰ `0 < j <= i` ï¼Œéƒ½æœ‰ `heights[j - 1] <= heights[j]`
  * å¯¹äºæ‰€æœ‰ `i <= k < n - 1` ï¼Œéƒ½æœ‰ `heights[k + 1] <= heights[k]`

è¯·ä½ è¿”å›æ»¡è¶³ **ç¾ä¸½å¡”**  è¦æ±‚çš„æ–¹æ¡ˆä¸­ï¼Œ**é«˜åº¦å’Œçš„æœ€å¤§å€¼**  ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** maxHeights = [5,3,4,1,1]
> 
> **è¾“å‡ºï¼š** 13
> 
> **è§£é‡Šï¼š** å’Œæœ€å¤§çš„ç¾ä¸½å¡”æ–¹æ¡ˆä¸º heights = [5,3,3,1,1] ï¼Œè¿™æ˜¯ä¸€ä¸ªç¾ä¸½å¡”æ–¹æ¡ˆï¼Œå› ä¸ºï¼š
> - 1 <= heights[i] <= maxHeights[i]  
> - heights æ˜¯ä¸ªå±±è„‰æ•°ç»„ï¼Œå³°å€¼åœ¨ i = 0 å¤„ã€‚
> 
> 13 æ˜¯æ‰€æœ‰ç¾ä¸½å¡”æ–¹æ¡ˆä¸­çš„æœ€å¤§é«˜åº¦å’Œã€‚

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** maxHeights = [6,5,3,9,2,7]
> 
> **è¾“å‡ºï¼š** 22
> 
> **è§£é‡Šï¼š** å’Œæœ€å¤§çš„ç¾ä¸½å¡”æ–¹æ¡ˆä¸º heights = [3,3,3,9,2,2] ï¼Œè¿™æ˜¯ä¸€ä¸ªç¾ä¸½å¡”æ–¹æ¡ˆï¼Œå› ä¸ºï¼š
> - 1 <= heights[i] <= maxHeights[i]
> - heights æ˜¯ä¸ªå±±è„‰æ•°ç»„ï¼Œå³°å€¼åœ¨ i = 3 å¤„ã€‚
> 
> 22 æ˜¯æ‰€æœ‰ç¾ä¸½å¡”æ–¹æ¡ˆä¸­çš„æœ€å¤§é«˜åº¦å’Œã€‚

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** maxHeights = [3,2,5,5,2,3]
> 
> **è¾“å‡ºï¼š** 18
> 
> **è§£é‡Šï¼š** å’Œæœ€å¤§çš„ç¾ä¸½å¡”æ–¹æ¡ˆä¸º heights = [2,2,5,5,2,2] ï¼Œè¿™æ˜¯ä¸€ä¸ªç¾ä¸½å¡”æ–¹æ¡ˆï¼Œå› ä¸ºï¼š
> - 1 <= heights[i] <= maxHeights[i]
> - heights æ˜¯ä¸ªå±±è„‰æ•°ç»„ï¼Œæœ€å¤§å€¼åœ¨ i = 2 å¤„ã€‚
> 
> æ³¨æ„ï¼Œåœ¨è¿™ä¸ªæ–¹æ¡ˆä¸­ï¼Œi = 3 ä¹Ÿæ˜¯ä¸€ä¸ªå³°å€¼ã€‚
> 
> 18 æ˜¯æ‰€æœ‰ç¾ä¸½å¡”æ–¹æ¡ˆä¸­çš„æœ€å¤§é«˜åº¦å’Œã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= n == maxHeights <= 10^5`
  * `1 <= maxHeights[i] <= 10^9`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 1671 | [å¾—åˆ°å±±å½¢æ•°ç»„çš„æœ€å°‘åˆ é™¤æ¬¡æ•°](https://leetcode.com/problems/minimum-number-of-removals-to-make-mountain-array) |  |  [`è´ªå¿ƒ`](/leetcode/outline/tag/greedy.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/leetcode/outline/tag/binary-search.md) `1+` | <font color=#ff334b>Hard</font> |
| 2355 | [ä½ èƒ½æ‹¿èµ°çš„æœ€å¤§å›¾ä¹¦æ•°é‡](https://leetcode.com/problems/maximum-number-of-books-you-can-take) |  |  [`æ ˆ`](/leetcode/outline/tag/stack.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) `1+` | <font color=#ff334b>Hard</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
