# [2931. è´­ä¹°ç‰©å“çš„æœ€å¤§å¼€é”€](https://leetcode.com/problems/maximum-spending-after-buying-items)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`è´ªå¿ƒ`](/leetcode/outline/tag/greedy.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`çŸ©é˜µ`](/leetcode/outline/tag/matrix.md) [`æ’åº`](/leetcode/outline/tag/sorting.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/leetcode/outline/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/maximum-spending-after-buying-items)

## é¢˜ç›®

You are given a **0-indexed** `m * n` integer matrix `values`, representing
the values of `m * n` different items in `m` different shops. Each shop has
`n` items where the `jth` item in the `ith` shop has a value of
`values[i][j]`. Additionally, the items in the `ith` shop are sorted in non-
increasing order of value. That is, `values[i][j] >= values[i][j + 1]` for all
`0 <= j < n - 1`.

On each day, you would like to buy a single item from one of the shops.
Specifically, On the `dth` day you can:

  * Pick any shop `i`.
  * Buy the rightmost available item `j` for the price of `values[i][j] * d`. That is, find the greatest index `j` such that item `j` was never bought before, and buy it for the price of `values[i][j] * d`.

**Note** that all items are pairwise different. For example, if you have
bought item `0` from shop `1`, you can still buy item `0` from any other shop.

Return _the**maximum amount of money that can be spent** on buying all _ `m *
n` _products_.



**Example 1:**

> Input: values = [[8,5,2],[6,4,1],[9,7,3]]
> 
> Output: 285
> 
> Explanation: On the first day, we buy product 2 from shop 1 for a price of values[1][2] * 1 = 1.
> 
> On the second day, we buy product 2 from shop 0 for a price of values[0][2] * 2 = 4.
> 
> On the third day, we buy product 2 from shop 2 for a price of values[2][2] * 3 = 9.
> 
> On the fourth day, we buy product 1 from shop 1 for a price of values[1][1] * 4 = 16.
> 
> On the fifth day, we buy product 1 from shop 0 for a price of values[0][1] * 5 = 25.
> 
> On the sixth day, we buy product 0 from shop 1 for a price of values[1][0] * 6 = 36.
> 
> On the seventh day, we buy product 1 from shop 2 for a price of values[2][1] * 7 = 49.
> 
> On the eighth day, we buy product 0 from shop 0 for a price of values[0][0] * 8 = 64.
> 
> On the ninth day, we buy product 0 from shop 2 for a price of values[2][0] * 9 = 81.
> 
> Hence, our total spending is equal to 285.
> 
> It can be shown that 285 is the maximum amount of money that can be spent buying all m * n products. 

**Example 2:**

> Input: values = [[10,8,6,4,2],[9,7,5,3,2]]
> 
> Output: 386
> 
> Explanation: On the first day, we buy product 4 from shop 0 for a price of values[0][4] * 1 = 2.
> 
> On the second day, we buy product 4 from shop 1 for a price of values[1][4] * 2 = 4.
> 
> On the third day, we buy product 3 from shop 1 for a price of values[1][3] * 3 = 9.
> 
> On the fourth day, we buy product 3 from shop 0 for a price of values[0][3] * 4 = 16.
> 
> On the fifth day, we buy product 2 from shop 1 for a price of values[1][2] * 5 = 25.
> 
> On the sixth day, we buy product 2 from shop 0 for a price of values[0][2] * 6 = 36.
> 
> On the seventh day, we buy product 1 from shop 1 for a price of values[1][1] * 7 = 49.
> 
> On the eighth day, we buy product 1 from shop 0 for a price of values[0][1] * 8 = 64
> 
> On the ninth day, we buy product 0 from shop 1 for a price of values[1][0] * 9 = 81.
> 
> On the tenth day, we buy product 0 from shop 0 for a price of values[0][0] * 10 = 100.
> 
> Hence, our total spending is equal to 386.
> 
> It can be shown that 386 is the maximum amount of money that can be spent buying all m * n products.

**Constraints:**

  * `1 <= m == values.length <= 10`
  * `1 <= n == values[i].length <= 10^4`
  * `1 <= values[i][j] <= 10^6`
  * `values[i]` are sorted in non-increasing order.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0**  å¼€å§‹å¤§å°ä¸º `m * n` çš„æ•´æ•°çŸ©é˜µ `values` ï¼Œè¡¨ç¤º `m` ä¸ªä¸åŒå•†åº—é‡Œ `m * n`
ä»¶ä¸åŒçš„ç‰©å“ã€‚æ¯ä¸ªå•†åº—æœ‰ `n` ä»¶ç‰©å“ï¼Œç¬¬ `i` ä¸ªå•†åº—çš„ç¬¬ `j` ä»¶ç‰©å“çš„ä»·å€¼ä¸º `values[i][j]` ã€‚é™¤æ­¤ä»¥å¤–ï¼Œç¬¬ `i`
ä¸ªå•†åº—çš„ç‰©å“å·²ç»æŒ‰ç…§ä»·å€¼éé€’å¢æ’å¥½åºäº†ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºæ‰€æœ‰ `0 <= j < n - 1` éƒ½æœ‰ `values[i][j] >= values[i][j
+ 1]` ã€‚

æ¯ä¸€å¤©ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªå•†åº—é‡Œè´­ä¹°ä¸€ä»¶ç‰©å“ã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨ç¬¬ `d` å¤©ï¼Œä½ å¯ä»¥ï¼š

  * é€‰æ‹©å•†åº— `i` ã€‚
  * è´­ä¹°æ•°ç»„ä¸­æœ€å³è¾¹çš„ç‰©å“ `j` ï¼Œå¼€é”€ä¸º `values[i][j] * d` ã€‚æ¢å¥è¯è¯´ï¼Œé€‰æ‹©è¯¥å•†åº—ä¸­è¿˜æ²¡è´­ä¹°è¿‡çš„ç‰©å“ä¸­æœ€å¤§çš„ä¸‹æ ‡ `j` ï¼Œå¹¶ä¸”èŠ±è´¹ `values[i][j] * d` å»è´­ä¹°ã€‚

**æ³¨æ„** ï¼Œæ‰€æœ‰ç‰©å“éƒ½è§†ä¸ºä¸åŒçš„ç‰©å“ã€‚æ¯”æ–¹è¯´å¦‚æœä½ å·²ç»ä»å•†åº— `1` è´­ä¹°äº†ç‰©å“ `0` ï¼Œä½ è¿˜å¯ä»¥åœ¨åˆ«çš„å•†åº—é‡Œè´­ä¹°å…¶ä»–å•†åº—çš„ç‰©å“ `0` ã€‚

è¯·ä½ è¿”å›è´­ä¹°æ‰€æœ‰ `m * n` ä»¶ç‰©å“éœ€è¦çš„ **æœ€å¤§å¼€é”€**  ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** values = [[8,5,2],[6,4,1],[9,7,3]]
> 
> **è¾“å‡ºï¼š** 285
> 
> **è§£é‡Šï¼š** ç¬¬ä¸€å¤©ï¼Œä»å•†åº— 1 è´­ä¹°ç‰©å“ 2 ï¼Œå¼€é”€ä¸º values[1][2] * 1 = 1 ã€‚
> 
> ç¬¬äºŒå¤©ï¼Œä»å•†åº— 0 è´­ä¹°ç‰©å“ 2 ï¼Œå¼€é”€ä¸º values[0][2] * 2 = 4 ã€‚
> 
> ç¬¬ä¸‰å¤©ï¼Œä»å•†åº— 2 è´­ä¹°ç‰©å“ 2 ï¼Œå¼€é”€ä¸º values[2][2] * 3 = 9 ã€‚
> 
> ç¬¬å››å¤©ï¼Œä»å•†åº— 1 è´­ä¹°ç‰©å“ 1 ï¼Œå¼€é”€ä¸º values[1][1] * 4 = 16 ã€‚
> 
> ç¬¬äº”å¤©ï¼Œä»å•†åº— 0 è´­ä¹°ç‰©å“ 1 ï¼Œå¼€é”€ä¸º values[0][1] * 5 = 25 ã€‚
> 
> ç¬¬å…­å¤©ï¼Œä»å•†åº— 1 è´­ä¹°ç‰©å“ 0 ï¼Œå¼€é”€ä¸º values[1][0] * 6 = 36 ã€‚
> 
> ç¬¬ä¸ƒå¤©ï¼Œä»å•†åº— 2 è´­ä¹°ç‰©å“ 1 ï¼Œå¼€é”€ä¸º values[2][1] * 7 = 49 ã€‚
> 
> ç¬¬å…«å¤©ï¼Œä»å•†åº— 0 è´­ä¹°ç‰©å“ 0 ï¼Œå¼€é”€ä¸º values[0][0] * 8 = 64 ã€‚
> 
> ç¬¬ä¹å¤©ï¼Œä»å•†åº— 2 è´­ä¹°ç‰©å“ 0 ï¼Œå¼€é”€ä¸º values[2][0] * 9 = 81 ã€‚
> 
> æ‰€ä»¥æ€»å¼€é”€ä¸º 285 ã€‚
> 
> 285 æ˜¯è´­ä¹°æ‰€æœ‰ m * n ä»¶ç‰©å“çš„æœ€å¤§æ€»å¼€é”€ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** values = [[10,8,6,4,2],[9,7,5,3,2]]
> 
> **è¾“å‡ºï¼š** 386
> 
> **è§£é‡Šï¼š** ç¬¬ä¸€å¤©ï¼Œä»å•†åº— 0 è´­ä¹°ç‰©å“ 4 ï¼Œå¼€é”€ä¸º values[0][4] * 1 = 2 ã€‚
> 
> ç¬¬äºŒå¤©ï¼Œä»å•†åº— 1 è´­ä¹°ç‰©å“ 4 ï¼Œå¼€é”€ä¸º values[1][4] * 2 = 4 ã€‚
> 
> ç¬¬ä¸‰å¤©ï¼Œä»å•†åº— 1 è´­ä¹°ç‰©å“ 3 ï¼Œå¼€é”€ä¸º values[1][3] * 3 = 9 ã€‚
> 
> ç¬¬å››å¤©ï¼Œä»å•†åº— 0 è´­ä¹°ç‰©å“ 3 ï¼Œå¼€é”€ä¸º values[0][3] * 4 = 16 ã€‚
> 
> ç¬¬äº”å¤©ï¼Œä»å•†åº— 1 è´­ä¹°ç‰©å“ 2 ï¼Œå¼€é”€ä¸º values[1][2] * 5 = 25 ã€‚
> 
> ç¬¬å…­å¤©ï¼Œä»å•†åº— 0 è´­ä¹°ç‰©å“ 2 ï¼Œå¼€é”€ä¸º values[0][2] * 6 = 36 ã€‚
> 
> ç¬¬ä¸ƒå¤©ï¼Œä»å•†åº— 1 è´­ä¹°ç‰©å“ 1 ï¼Œå¼€é”€ä¸º values[1][1] * 7 = 49 ã€‚
> 
> ç¬¬å…«å¤©ï¼Œä»å•†åº— 0 è´­ä¹°ç‰©å“ 1 ï¼Œå¼€é”€ä¸º values[0][1] * 8 = 64 ã€‚
> 
> ç¬¬ä¹å¤©ï¼Œä»å•†åº— 1 è´­ä¹°ç‰©å“ 0 ï¼Œå¼€é”€ä¸º values[1][0] * 9 = 81 ã€‚
> 
> ç¬¬åå¤©ï¼Œä»å•†åº— 0 è´­ä¹°ç‰©å“ 0 ï¼Œå¼€é”€ä¸º values[0][0] * 10 = 100 ã€‚
> 
> æ‰€ä»¥æ€»å¼€é”€ä¸º 386 ã€‚
> 
> 386 æ˜¯è´­ä¹°æ‰€æœ‰ m * n ä»¶ç‰©å“çš„æœ€å¤§æ€»å¼€é”€ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= m == values.length <= 10`
  * `1 <= n == values[i].length <= 10^4`
  * `1 <= values[i][j] <= 10^6`
  * `values[i]` æŒ‰ç…§éé€’å¢é¡ºåºæ’åºã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 1423 | [å¯è·å¾—çš„æœ€å¤§ç‚¹æ•°](https://leetcode.com/problems/maximum-points-you-can-obtain-from-cards) |  |  [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`å‰ç¼€å’Œ`](/leetcode/outline/tag/prefix-sum.md) [`æ»‘åŠ¨çª—å£`](/leetcode/outline/tag/sliding-window.md) | <font color=#ffb800>Medium</font> |
| 1770 | [æ‰§è¡Œä¹˜æ³•è¿ç®—çš„æœ€å¤§åˆ†æ•°](https://leetcode.com/problems/maximum-score-from-performing-multiplication-operations) |  |  [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) | <font color=#ff334b>Hard</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
