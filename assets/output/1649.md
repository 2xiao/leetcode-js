# [1649. é€šè¿‡æŒ‡ä»¤åˆ›å»ºæœ‰åºæ•°ç»„](https://leetcode.com/problems/create-sorted-array-through-instructions)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ‘çŠ¶æ•°ç»„`](/tag/binary-indexed-tree.md) [`çº¿æ®µæ ‘`](/tag/segment-tree.md) [`æ•°ç»„`](/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/tag/binary-search.md) [`åˆ†æ²»`](/tag/divide-and-conquer.md) [`æœ‰åºé›†åˆ`](/tag/ordered-set.md) [`å½’å¹¶æ’åº`](/tag/merge-sort.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/create-sorted-array-through-instructions)

## é¢˜ç›®

Given an integer array `instructions`, you are asked to create a sorted array
from the elements in `instructions`. You start with an empty container `nums`.
For each element from **left to right** in `instructions`, insert it into
`nums`. The **cost** of each insertion is the **minimum** of the following:

  * The number of elements currently in `nums` that are **strictly less than** `instructions[i]`.
  * The number of elements currently in `nums` that are **strictly greater than** `instructions[i]`.

For example, if inserting element `3` into `nums = [1,2,3,5]`, the **cost** of
insertion is `min(2, 1)` (elements `1` and `2` are less than `3`, element `5`
is greater than `3`) and `nums` will become `[1,2,3,3,5]`.

Return _the**total cost** to insert all elements from _`instructions`
_into_`nums`. Since the answer may be large, return it **modulo** `109 + 7`



**Example 1:**

> 
> 
> 
> 
> 
> **Input:** instructions = [1,5,6,2]
> 
> Output: 1
> 
> Explanation: Begin with nums = [].
> 
> Insert 1 with cost min(0, 0) = 0, now nums = [1].
> 
> Insert 5 with cost min(1, 0) = 0, now nums = [1,5].
> 
> Insert 6 with cost min(2, 0) = 0, now nums = [1,5,6].
> 
> Insert 2 with cost min(1, 2) = 1, now nums = [1,2,5,6].
> 
> The total cost is 0 + 0 + 0 + 1 = 1.

**Example 2:**

> 
> 
> 
> 
> 
> **Input:** instructions = [1,2,3,6,5,4]
> 
> Output: 3
> 
> Explanation: Begin with nums = [].
> 
> Insert 1 with cost min(0, 0) = 0, now nums = [1].
> 
> Insert 2 with cost min(1, 0) = 0, now nums = [1,2].
> 
> Insert 3 with cost min(2, 0) = 0, now nums = [1,2,3].
> 
> Insert 6 with cost min(3, 0) = 0, now nums = [1,2,3,6].
> 
> Insert 5 with cost min(3, 1) = 1, now nums = [1,2,3,5,6].
> 
> Insert 4 with cost min(3, 2) = 2, now nums = [1,2,3,4,5,6].
> 
> The total cost is 0 + 0 + 0 + 0 + 1 + 2 = 3.

**Example 3:**

> 
> 
> 
> 
> 
> **Input:** instructions = [1,3,3,3,2,4,2,1,2]
> 
> Output: 4
> 
> Explanation: Begin with nums = [].
> 
> Insert 1 with cost min(0, 0) = 0, now nums = [1].
> 
> Insert 3 with cost min(1, 0) = 0, now nums = [1,3].
> 
> Insert 3 with cost min(1, 0) = 0, now nums = [1,3,3].
> 
> Insert 3 with cost min(1, 0) = 0, now nums = [1,3,3,3].
> 
> Insert 2 with cost min(1, 3) = 1, now nums = [1,2,3,3,3].
> 
> Insert 4 with cost min(5, 0) = 0, now nums = [1,2,3,3,3,4].
> 
> â€‹â€‹â€‹â€‹â€‹â€‹â€‹Insert 2 with cost min(1, 4) = 1, now nums = [1,2,2,3,3,3,4].
> 
> â€‹â€‹â€‹â€‹â€‹â€‹â€‹Insert 1 with cost min(0, 6) = 0, now nums = [1,1,2,2,3,3,3,4].
> 
> â€‹â€‹â€‹â€‹â€‹â€‹â€‹Insert 2 with cost min(2, 4) = 2, now nums = [1,1,2,2,2,3,3,3,4].
> 
> The total cost is 0 + 0 + 0 + 0 + 1 + 0 + 1 + 0 + 2 = 4.

**Constraints:**

  * `1 <= instructions.length <= 10^5`
  * `1 <= instructions[i] <= 10^5`


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `instructions` ï¼Œä½ éœ€è¦æ ¹æ® `instructions` ä¸­çš„å…ƒç´ åˆ›å»ºä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚ä¸€å¼€å§‹ä½ æœ‰ä¸€ä¸ªç©ºçš„æ•°ç»„ `nums`
ï¼Œä½ éœ€è¦ **ä»å·¦åˆ°å³** éå† `instructions` ä¸­çš„å…ƒç´ ï¼Œå°†å®ƒä»¬ä¾æ¬¡æ’å…¥ `nums` æ•°ç»„ä¸­ã€‚æ¯ä¸€æ¬¡æ’å…¥æ“ä½œçš„ **ä»£ä»·** æ˜¯ä»¥ä¸‹ä¸¤è€…çš„
**è¾ƒå°å€¼** ï¼š

  * `nums` ä¸­ **ä¸¥æ ¼å°äº** `instructions[i]` çš„æ•°å­—æ•°ç›®ã€‚
  * `nums` ä¸­ **ä¸¥æ ¼å¤§äº** `instructions[i]` çš„æ•°å­—æ•°ç›®ã€‚

æ¯”æ–¹è¯´ï¼Œå¦‚æœè¦å°† `3` æ’å…¥åˆ° `nums = [1,2,3,5]` ï¼Œé‚£ä¹ˆæ’å…¥æ“ä½œçš„ **ä»£ä»·** ä¸º `min(2, 1)` (å…ƒç´  `1` å’Œ
`2` å°äº `3` ï¼Œå…ƒç´  `5` å¤§äº `3` ï¼‰ï¼Œæ’å…¥å `nums` å˜æˆ `[1,2,3,3,5]` ã€‚

è¯·ä½ è¿”å›å°† `instructions` ä¸­æ‰€æœ‰å…ƒç´ ä¾æ¬¡æ’å…¥ `nums` åçš„ **æ€»æœ€å°ä»£ä»·** ã€‚ç”±äºç­”æ¡ˆä¼šå¾ˆå¤§ï¼Œè¯·å°†å®ƒå¯¹ `109 + 7`
**å–ä½™** åè¿”å›ã€‚

**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** instructions = [1,5,6,2]
> 
> **è¾“å‡ºï¼š** 1
> 
> **è§£é‡Šï¼š** ä¸€å¼€å§‹ nums = [] ã€‚
> 
> æ’å…¥ 1 ï¼Œä»£ä»·ä¸º min(0, 0) = 0 ï¼Œç°åœ¨ nums = [1] ã€‚
> 
> æ’å…¥ 5 ï¼Œä»£ä»·ä¸º min(1, 0) = 0 ï¼Œç°åœ¨ nums = [1,5] ã€‚
> 
> æ’å…¥ 6 ï¼Œä»£ä»·ä¸º min(2, 0) = 0 ï¼Œç°åœ¨ nums = [1,5,6] ã€‚
> 
> æ’å…¥ 2 ï¼Œä»£ä»·ä¸º min(1, 2) = 1 ï¼Œç°åœ¨ nums = [1,2,5,6] ã€‚
> 
> æ€»ä»£ä»·ä¸º 0 + 0 + 0 + 1 = 1 ã€‚

**ç¤ºä¾‹ 2:**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** instructions = [1,2,3,6,5,4]
> 
> **è¾“å‡ºï¼š** 3
> 
> **è§£é‡Šï¼š** ä¸€å¼€å§‹ nums = [] ã€‚
> 
> æ’å…¥ 1 ï¼Œä»£ä»·ä¸º min(0, 0) = 0 ï¼Œç°åœ¨ nums = [1] ã€‚
> 
> æ’å…¥ 2 ï¼Œä»£ä»·ä¸º min(1, 0) = 0 ï¼Œç°åœ¨ nums = [1,2] ã€‚
> 
> æ’å…¥ 3 ï¼Œä»£ä»·ä¸º min(2, 0) = 0 ï¼Œç°åœ¨ nums = [1,2,3] ã€‚
> 
> æ’å…¥ 6 ï¼Œä»£ä»·ä¸º min(3, 0) = 0 ï¼Œç°åœ¨ nums = [1,2,3,6] ã€‚
> 
> æ’å…¥ 5 ï¼Œä»£ä»·ä¸º min(3, 1) = 1 ï¼Œç°åœ¨ nums = [1,2,3,5,6] ã€‚
> 
> æ’å…¥ 4 ï¼Œä»£ä»·ä¸º min(3, 2) = 2 ï¼Œç°åœ¨ nums = [1,2,3,4,5,6] ã€‚
> 
> æ€»ä»£ä»·ä¸º 0 + 0 + 0 + 0 + 1 + 2 = 3 ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** instructions = [1,3,3,3,2,4,2,1,2]
> 
> **è¾“å‡ºï¼š** 4
> 
> **è§£é‡Šï¼š** ä¸€å¼€å§‹ nums = [] ã€‚
> 
> æ’å…¥ 1 ï¼Œä»£ä»·ä¸º min(0, 0) = 0 ï¼Œç°åœ¨ nums = [1] ã€‚
> 
> æ’å…¥ 3 ï¼Œä»£ä»·ä¸º min(1, 0) = 0 ï¼Œç°åœ¨ nums = [1,3] ã€‚
> 
> æ’å…¥ 3 ï¼Œä»£ä»·ä¸º min(1, 0) = 0 ï¼Œç°åœ¨ nums = [1,3,3] ã€‚
> 
> æ’å…¥ 3 ï¼Œä»£ä»·ä¸º min(1, 0) = 0 ï¼Œç°åœ¨ nums = [1,3,3,3] ã€‚
> 
> æ’å…¥ 2 ï¼Œä»£ä»·ä¸º min(1, 3) = 1 ï¼Œç°åœ¨ nums = [1,2,3,3,3] ã€‚
> 
> æ’å…¥ 4 ï¼Œä»£ä»·ä¸º min(5, 0) = 0 ï¼Œç°åœ¨ nums = [1,2,3,3,3,4] ã€‚
> 
> â€‹â€‹â€‹â€‹â€‹æ’å…¥ 2 ï¼Œä»£ä»·ä¸º min(1, 4) = 1 ï¼Œç°åœ¨ nums = [1,2,2,3,3,3,4] ã€‚
> 
> æ’å…¥ 1 ï¼Œä»£ä»·ä¸º min(0, 6) = 0 ï¼Œç°åœ¨ nums = [1,1,2,2,3,3,3,4] ã€‚
> 
> æ’å…¥ 2 ï¼Œä»£ä»·ä¸º min(2, 4) = 2 ï¼Œç°åœ¨ nums = [1,1,2,2,2,3,3,3,4] ã€‚
> 
> æ€»ä»£ä»·ä¸º 0 + 0 + 0 + 0 + 1 + 0 + 1 + 0 + 2 = 4 ã€‚
> 
> 

**æç¤ºï¼š**

  * `1 <= instructions.length <= 10^5`
  * `1 <= instructions[i] <= 10^5`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 2179 | [ç»Ÿè®¡æ•°ç»„ä¸­å¥½ä¸‰å…ƒç»„æ•°ç›®](https://leetcode.com/problems/count-good-triplets-in-an-array) |  |  [`æ ‘çŠ¶æ•°ç»„`](/tag/binary-indexed-tree.md) [`çº¿æ®µæ ‘`](/tag/segment-tree.md) [`æ•°ç»„`](/tag/array.md) `4+` | <font color=#ff334b>Hard</font> |
| 2213 | [ç”±å•ä¸ªå­—ç¬¦é‡å¤çš„æœ€é•¿å­å­—ç¬¦ä¸²](https://leetcode.com/problems/longest-substring-of-one-repeating-character) |  |  [`çº¿æ®µæ ‘`](/tag/segment-tree.md) [`æ•°ç»„`](/tag/array.md) [`å­—ç¬¦ä¸²`](/tag/string.md) `1+` | <font color=#ff334b>Hard</font> |
| 2459 | [é€šè¿‡ç§»åŠ¨é¡¹ç›®åˆ°ç©ºç™½åŒºåŸŸæ¥æ’åºæ•°ç»„](https://leetcode.com/problems/sort-array-by-moving-items-to-empty-space) |  |  [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) [`æ’åº`](/tag/sorting.md) | <font color=#ff334b>Hard</font> |