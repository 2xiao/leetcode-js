# [1434. æ¯ä¸ªäººæˆ´ä¸åŒå¸½å­çš„æ–¹æ¡ˆæ•°](https://leetcode.com/problems/number-of-ways-to-wear-different-hats-to-each-other)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`ä½è¿ç®—`](/leetcode/outline/tag/bit-manipulation.md) [`æ•°ç»„`](/leetcode/outline/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/leetcode/outline/tag/dynamic-programming.md) [`çŠ¶æ€å‹ç¼©`](/leetcode/outline/tag/bitmask.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/number-of-ways-to-wear-different-hats-to-each-other)


## é¢˜ç›®

There are `n` people and `40` types of hats labeled from `1` to `40`.

Given a 2D integer array `hats`, where `hats[i]` is a list of all hats
preferred by the `ith` person.

Return _the number of ways that the`n` people wear different hats to each
other_.

Since the answer may be too large, return it modulo `109 + 7`.



**Example 1:**

> Input: hats = [[3,4],[4,5],[5]]
> 
> Output: 1
> 
> Explanation: There is only one way to choose hats given the conditions. 
> 
> First person choose hat 3, Second person choose hat 4 and last one hat 5.

**Example 2:**

> Input: hats = [[3,5,1],[3,5]]
> 
> Output: 4
> 
> Explanation: There are 4 ways to choose hats:
> 
> (3,5), (5,3), (1,3) and (1,5)

**Example 3:**

> Input: hats = [[1,2,3,4],[1,2,3,4],[1,2,3,4],[1,2,3,4]]
> 
> Output: 24
> 
> Explanation: Each person can choose hats labeled from 1 to 4.
> 
> Number of Permutations of (1,2,3,4) = 24.

**Constraints:**

  * `n == hats.length`
  * `1 <= n <= 10`
  * `1 <= hats[i].length <= 40`
  * `1 <= hats[i][j] <= 40`
  * `hats[i]` contains a list of **unique** integers.


## é¢˜ç›®å¤§æ„

æ€»å…±æœ‰ `n` ä¸ªäººå’Œ `40` ç§ä¸åŒçš„å¸½å­ï¼Œå¸½å­ç¼–å·ä» `1` åˆ° `40` ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•°åˆ—è¡¨çš„åˆ—è¡¨ `hats` ï¼Œå…¶ä¸­ `hats[i]` æ˜¯ç¬¬ `i` ä¸ªäººæ‰€æœ‰å–œæ¬¢å¸½å­çš„åˆ—è¡¨ã€‚

è¯·ä½ ç»™æ¯ä¸ªäººå®‰æ’ä¸€é¡¶ä»–å–œæ¬¢çš„å¸½å­ï¼Œç¡®ä¿æ¯ä¸ªäººæˆ´çš„å¸½å­è·Ÿåˆ«äººéƒ½ä¸ä¸€æ ·ï¼Œå¹¶è¿”å›æ–¹æ¡ˆæ•°ã€‚

ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¯·è¿”å›å®ƒå¯¹ `10^9 + 7` å–ä½™åçš„ç»“æœã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** hats = [[3,4],[4,5],[5]]
> 
> **è¾“å‡ºï¼š** 1
> 
> **è§£é‡Šï¼š** ç»™å®šæ¡ä»¶ä¸‹åªæœ‰ä¸€ç§æ–¹æ³•é€‰æ‹©å¸½å­ã€‚
> 
> ç¬¬ä¸€ä¸ªäººé€‰æ‹©å¸½å­ 3ï¼Œç¬¬äºŒä¸ªäººé€‰æ‹©å¸½å­ 4ï¼Œæœ€åä¸€ä¸ªäººé€‰æ‹©å¸½å­ 5ã€‚

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** hats = [[3,5,1],[3,5]]
> 
> **è¾“å‡ºï¼š** 4
> 
> **è§£é‡Šï¼š** æ€»å…±æœ‰ 4 ç§å®‰æ’å¸½å­çš„æ–¹æ³•ï¼š
> 
> (3,5)ï¼Œ(5,3)ï¼Œ(1,3) å’Œ (1,5)
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** hats = [[1,2,3,4],[1,2,3,4],[1,2,3,4],[1,2,3,4]]
> 
> **è¾“å‡ºï¼š** 24
> 
> **è§£é‡Šï¼š** æ¯ä¸ªäººéƒ½å¯ä»¥ä»ç¼–å·ä¸º 1 åˆ° 4 çš„å¸½å­ä¸­é€‰ã€‚
> 
> (1,2,3,4) 4 ä¸ªå¸½å­çš„æ’åˆ—æ–¹æ¡ˆæ•°ä¸º 24 ã€‚
> 
> 

**ç¤ºä¾‹ 4ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** hats = [[1,2,3],[2,3,5,6],[1,3,7,9],[1,8,9],[2,5,7]]
> 
> **è¾“å‡ºï¼š** 111
> 
> 



**æç¤ºï¼š**

  * `n == hats.length`
  * `1 <= n <= 10`
  * `1 <= hats[i].length <= 40`
  * `1 <= hats[i][j] <= 40`
  * `hats[i]` åŒ…å«ä¸€ä¸ªæ•°å­—äº’ä¸ç›¸åŒçš„æ•´æ•°åˆ—è¡¨ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

:::: md-demo ç›¸å…³é¢˜ç›®
- [1994. å¥½å­é›†çš„æ•°ç›®](https://leetcode.com/problems/the-number-of-good-subsets)

::::
