---
title: 588. 设计内存文件系统 🔒
description: LeetCode 588. 设计内存文件系统 🔒题解，Design In-Memory File System，包含解题思路、复杂度分析以及完整的 JavaScript 代码实现。
keywords:
  - LeetCode
  - 588. 设计内存文件系统 🔒
  - 设计内存文件系统
  - Design In-Memory File System
  - 解题思路
  - 设计
  - 字典树
  - 哈希表
  - 字符串
  - 排序
---

# 588. 设计内存文件系统 🔒

🔴 <font color=#ff334b>Hard</font>&emsp; 🔖&ensp; [`设计`](/tag/design.md) [`字典树`](/tag/trie.md) [`哈希表`](/tag/hash-table.md) [`字符串`](/tag/string.md) [`排序`](/tag/sorting.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/design-in-memory-file-system) [`LeetCode`](https://leetcode.com/problems/design-in-memory-file-system)

## 题目

Design a data structure that simulates an in-memory file system.

Implement the FileSystem class:

  * `FileSystem()` Initializes the object of the system.
  * `List<String> ls(String path)`
> 
> * If `path` is a file path, returns a list that only contains this file's name.
> 
> * If `path` is a directory path, returns the list of file and directory names **in this directory**.
The answer should in **lexicographic order**.

  * `void mkdir(String path)` Makes a new directory according to the given `path`. The given directory path does not exist. If the middle directories in the path do not exist, you should create them as well.
  * `void addContentToFile(String filePath, String content)`
> 
> * If `filePath` does not exist, creates that file containing given `content`.
> 
> * If `filePath` already exists, appends the given `content` to original content.
  * `String readContentFromFile(String filePath)` Returns the content in the file at `filePath`.



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0500-0599/0588.Design%20In-
Memory%20File%20System/images/filesystem.png)

> 
> 
> 
> 
> 
> **Input**
> 
> ["FileSystem", "ls", "mkdir", "addContentToFile", "ls", "readContentFromFile"]
> 
> [[], ["/"], ["/a/b/c"], ["/a/b/c/d", "hello"], ["/"], ["/a/b/c/d"]]
> 
> **Output**
> 
> [null, [], null, null, ["a"], "hello"]
> 
> 
> 
> **Explanation**
> 
> FileSystem fileSystem = new FileSystem();
> 
> fileSystem.ls("/"); // return []
> 
> fileSystem.mkdir("/a/b/c");
> 
> fileSystem.addContentToFile("/a/b/c/d", "hello");
> 
> fileSystem.ls("/"); // return ["a"]
> 
> fileSystem.readContentFromFile("/a/b/c/d"); // return "hello"
> 
> 

**Constraints:**

  * `1 <= path.length, filePath.length <= 100`
  * `path` and `filePath` are absolute paths which begin with `'/'` and do not end with `'/'` except that the path is just `"/"`.
  * You can assume that all directory names and file names only contain lowercase letters, and the same names will not exist in the same directory.
  * You can assume that all operations will be passed valid parameters, and users will not attempt to retrieve file content or list a directory or file that does not exist.
  * You can assume that the parent directory for the file in `addContentToFile` will exist.
  * `1 <= content.length <= 50`
  * At most `300` calls will be made to `ls`, `mkdir`, `addContentToFile`, and `readContentFromFile`.


## 题目大意

设计一个内存文件系统，模拟以下功能：

实现文件系统类:

  * `FileSystem()` 初始化系统对象
  * `List<String> ls(String path)`
> 
> * 如果 `path` 是一个文件路径，则返回一个仅包含该文件名称的列表。
> 
> * 如果 `path` 是一个目录路径，则返回该目录中文件和 **目录名** 的列表。

> 
> > 
>   答案应该 按**字典顺序** 排列。

  * `void mkdir(String path)` 根据给定的路径创建一个新目录。给定的目录路径不存在。如果路径中的中间目录不存在，您也应该创建它们。
  * `void addContentToFile(String filePath, String content)`
> 
> * 如果 `filePath` 不存在，则创建包含给定内容 `content`的文件。
> 
> * 如果 `filePath` 已经存在，将给定的内容 `content`附加到原始内容。
  * `String readContentFromFile(String filePath)` 返回 `filePath`下的文件内容。



**示例 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0500-0599/0588.Design%20In-
Memory%20File%20System/images/filesystem.png)

> 
> 
> 
> 
> 
> **输入:** 
> 
> ["FileSystem","ls","mkdir","addContentToFile","ls","readContentFromFile"]
> 
> [[],["/"],["/a/b/c"],["/a/b/c/d","hello"],["/"],["/a/b/c/d"]]
> 
> **输出:**
> 
> [null,[],null,null,["a"],"hello"]
> 
> 
> 
> **解释:**
> 
> FileSystem fileSystem = new FileSystem();
> 
> fileSystem.ls("/");> 
> > 
> > 
> > 
> > 
> > 
>  // 返回 []
> 
> fileSystem.mkdir("/a/b/c");
> 
> fileSystem.addContentToFile("/a/b/c/d", "hello");
> 
> fileSystem.ls("/");> 
> > 
> > 
> > 
> > 
> > 
>  // 返回 ["a"]
> 
> fileSystem.readContentFromFile("/a/b/c/d"); // 返回 "hello"



**注意:**

  * `1 <= path.length, filePath.length <= 100`
  * `path` 和 `filePath` 都是绝对路径，除非是根目录 `‘/’` 自身，其他路径都是以 `‘/’` 开头且 **不** 以 `‘/’` 结束。
  * 你可以假定所有操作的参数都是有效的，即用户不会获取不存在文件的内容，或者获取不存在文件夹和文件的列表。
  * 你可以假定所有文件夹名字和文件名字都只包含小写字母，且同一文件夹下不会有相同名字的文件夹或文件。
  * 你可以假定 `addContentToFile` 中的文件的父目录都存在。
  * `1 <= content.length <= 50`
  * `ls`, `mkdir`, `addContentToFile`, and `readContentFromFile` 最多被调用 `300` 次


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 | 力扣 |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 146 | LRU 缓存 | [[✓]](/problem/0146.md) |  [`设计`](/tag/design.md) [`哈希表`](/tag/hash-table.md) [`链表`](/tag/linked-list.md) `1+` | 🟠 | [🀄️](https://leetcode.cn/problems/lru-cache) [🔗](https://leetcode.com/problems/lru-cache) |
| 460 | LFU 缓存 | [[✓]](/problem/0460.md) |  [`设计`](/tag/design.md) [`哈希表`](/tag/hash-table.md) [`链表`](/tag/linked-list.md) `1+` | 🔴 | [🀄️](https://leetcode.cn/problems/lfu-cache) [🔗](https://leetcode.com/problems/lfu-cache) |
| 635 | 设计日志存储系统 🔒 |  |  [`设计`](/tag/design.md) [`哈希表`](/tag/hash-table.md) [`字符串`](/tag/string.md) `1+` | 🟠 | [🀄️](https://leetcode.cn/problems/design-log-storage-system) [🔗](https://leetcode.com/problems/design-log-storage-system) |