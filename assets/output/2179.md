# [2179. ç»Ÿè®¡æ•°ç»„ä¸­å¥½ä¸‰å…ƒç»„æ•°ç›®](https://leetcode.com/problems/count-good-triplets-in-an-array)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ ‘çŠ¶æ•°ç»„`](/outline/tag/binary-indexed-tree.md) [`çº¿æ®µæ ‘`](/outline/tag/segment-tree.md) [`æ•°ç»„`](/outline/tag/array.md) [`äºŒåˆ†æŸ¥æ‰¾`](/outline/tag/binary-search.md) [`åˆ†æ²»`](/outline/tag/divide-and-conquer.md) [`æœ‰åºé›†åˆ`](/outline/tag/ordered-set.md) [`å½’å¹¶æ’åº`](/outline/tag/merge-sort.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.com/problems/count-good-triplets-in-an-array)

## é¢˜ç›®

You are given two **0-indexed** arrays `nums1` and `nums2` of length `n`, both
of which are **permutations** of `[0, 1, ..., n - 1]`.

A **good triplet** is a set of `3` **distinct** values which are present in
**increasing order** by position both in `nums1` and `nums2`. In other words,
if we consider `pos1v` as the index of the value `v` in `nums1` and `pos2v` as
the index of the value `v` in `nums2`, then a good triplet will be a set `(x,
y, z)` where `0 <= x, y, z <= n - 1`, such that `pos1x < pos1y < pos1z` and
`pos2x < pos2y < pos2z`.

Return _the**total number** of good triplets_.



**Example 1:**

> Input: nums1 = [2,0,1,3], nums2 = [0,1,2,3]
> 
> Output: 1
> 
> Explanation: 
> 
> There are 4 triplets (x,y,z) such that pos1x < pos1y < pos1z. They are (2,0,1), (2,0,3), (2,1,3), and (0,1,3). 
> 
> Out of those triplets, only the triplet (0,1,3) satisfies pos2x < pos2y < pos2z. Hence, there is only 1 good triplet.

**Example 2:**

> Input: nums1 = [4,0,1,3,2], nums2 = [4,1,0,2,3]
> 
> Output: 4
> 
> Explanation: The 4 good triplets are (4,0,3), (4,0,2), (4,1,3), and (4,1,2).

**Constraints:**

  * `n == nums1.length == nums2.length`
  * `3 <= n <= 10^5`
  * `0 <= nums1[i], nums2[i] <= n - 1`
  * `nums1` and `nums2` are permutations of `[0, 1, ..., n - 1]`.


## é¢˜ç›®å¤§æ„

ç»™ä½ ä¸¤ä¸ªä¸‹æ ‡ä» **0**  å¼€å§‹ä¸”é•¿åº¦ä¸º `n` çš„æ•´æ•°æ•°ç»„ `nums1` å’Œ `nums2` ï¼Œä¸¤è€…éƒ½æ˜¯ `[0, 1, ..., n - 1]` çš„
**æ’åˆ—**  ã€‚

**å¥½ä¸‰å…ƒç»„  **æŒ‡çš„æ˜¯ `3` ä¸ª **äº’ä¸ç›¸åŒ**  çš„å€¼ï¼Œä¸”å®ƒä»¬åœ¨æ•°ç»„ `nums1` å’Œ `nums2` ä¸­å‡ºç°é¡ºåºä¿æŒä¸€è‡´ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬å°†
`pos1v` è®°ä¸ºå€¼ `v` åœ¨ `nums1` ä¸­å‡ºç°çš„ä½ç½®ï¼Œ`pos2v` ä¸ºå€¼ `v` åœ¨ `nums2` ä¸­çš„ä½ç½®ï¼Œé‚£ä¹ˆä¸€ä¸ªå¥½ä¸‰å…ƒç»„å®šä¹‰ä¸º `0
<= x, y, z <= n - 1` ï¼Œä¸” `pos1x < pos1y < pos1z` å’Œ `pos2x < pos2y < pos2z` éƒ½æˆç«‹çš„
`(x, y, z)` ã€‚

è¯·ä½ è¿”å›å¥½ä¸‰å…ƒç»„çš„ **æ€»æ•°ç›®**  ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums1 = [2,0,1,3], nums2 = [0,1,2,3]
> 
> **è¾“å‡ºï¼š** 1
> 
> **è§£é‡Šï¼š**
> 
> æ€»å…±æœ‰ 4 ä¸ªä¸‰å…ƒç»„ (x,y,z) æ»¡è¶³ pos1x < pos1y < pos1z ï¼Œåˆ†åˆ«æ˜¯ (2,0,1) ï¼Œ(2,0,3) ï¼Œ(2,1,3) å’Œ (0,1,3) ã€‚
> 
> è¿™äº›ä¸‰å…ƒç»„ä¸­ï¼Œåªæœ‰ (0,1,3) æ»¡è¶³ pos2x < pos2y < pos2z ã€‚æ‰€ä»¥åªæœ‰ 1 ä¸ªå¥½ä¸‰å…ƒç»„ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums1 = [4,0,1,3,2], nums2 = [4,1,0,2,3]
> 
> **è¾“å‡ºï¼š** 4
> 
> **è§£é‡Šï¼š** æ€»å…±æœ‰ 4 ä¸ªå¥½ä¸‰å…ƒç»„ (4,0,3) ï¼Œ(4,0,2) ï¼Œ(4,1,3) å’Œ (4,1,2) ã€‚
> 
> 



**æç¤ºï¼š**

  * `n == nums1.length == nums2.length`
  * `3 <= n <= 10^5`
  * `0 <= nums1[i], nums2[i] <= n - 1`
  * `nums1` å’Œ `nums2` æ˜¯ `[0, 1, ..., n - 1]` çš„æ’åˆ—ã€‚


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 315 | [è®¡ç®—å³ä¾§å°äºå½“å‰å…ƒç´ çš„ä¸ªæ•°](https://leetcode.com/problems/count-of-smaller-numbers-after-self) |  |  [`æ ‘çŠ¶æ•°ç»„`](/outline/tag/binary-indexed-tree.md) [`çº¿æ®µæ ‘`](/outline/tag/segment-tree.md) [`æ•°ç»„`](/outline/tag/array.md) `4+` | <font color=#ff334b>Hard</font> |
| 334 | [é€’å¢çš„ä¸‰å…ƒå­åºåˆ—](https://leetcode.com/problems/increasing-triplet-subsequence) |  |  [`è´ªå¿ƒ`](/outline/tag/greedy.md) [`æ•°ç»„`](/outline/tag/array.md) | <font color=#ffb800>Medium</font> |
| 1649 | [é€šè¿‡æŒ‡ä»¤åˆ›å»ºæœ‰åºæ•°ç»„](https://leetcode.com/problems/create-sorted-array-through-instructions) |  |  [`æ ‘çŠ¶æ•°ç»„`](/outline/tag/binary-indexed-tree.md) [`çº¿æ®µæ ‘`](/outline/tag/segment-tree.md) [`æ•°ç»„`](/outline/tag/array.md) `4+` | <font color=#ff334b>Hard</font> |
| 2421 | [å¥½è·¯å¾„çš„æ•°ç›®](https://leetcode.com/problems/number-of-good-paths) |  |  [`æ ‘`](/outline/tag/tree.md) [`å¹¶æŸ¥é›†`](/outline/tag/union-find.md) [`å›¾`](/outline/tag/graph.md) `3+` | <font color=#ff334b>Hard</font> |
| 2552 | [ç»Ÿè®¡ä¸Šå‡å››å…ƒç»„](https://leetcode.com/problems/count-increasing-quadruplets) |  |  [`æ ‘çŠ¶æ•°ç»„`](/outline/tag/binary-indexed-tree.md) [`æ•°ç»„`](/outline/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/outline/tag/dynamic-programming.md) `2+` | <font color=#ff334b>Hard</font> |

<style>
.blue {
    background-color: #096dd9;
    padding: 0.25rem 0.5rem;
    margin: 0;
    font-size: 0.85em;
    border-radius: 3px;
    color: white;
    font-weight: 500;
}
table th:first-of-type { width: 10%; }
table th:nth-of-type(2) { width: 35%; }
table th:nth-of-type(3) { width: 10%; }
table th:nth-of-type(4) { width: 35%; }
table th:nth-of-type(5) { width: 10%; }
</style>
