---
title: 635. è®¾è®¡æ—¥å¿—å­˜å‚¨ç³»ç»Ÿ ğŸ”’
description: LeetCode,635. è®¾è®¡æ—¥å¿—å­˜å‚¨ç³»ç»Ÿ ğŸ”’,è®¾è®¡æ—¥å¿—å­˜å‚¨ç³»ç»Ÿ,Design Log Storage System,è§£é¢˜æ€è·¯,è®¾è®¡,å“ˆå¸Œè¡¨,å­—ç¬¦ä¸²,æœ‰åºé›†åˆ
keywords:
  - LeetCode
  - 635. è®¾è®¡æ—¥å¿—å­˜å‚¨ç³»ç»Ÿ ğŸ”’
  - è®¾è®¡æ—¥å¿—å­˜å‚¨ç³»ç»Ÿ
  - Design Log Storage System
  - è§£é¢˜æ€è·¯
  - è®¾è®¡
  - å“ˆå¸Œè¡¨
  - å­—ç¬¦ä¸²
  - æœ‰åºé›†åˆ
---

# 635. è®¾è®¡æ—¥å¿—å­˜å‚¨ç³»ç»Ÿ ğŸ”’

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è®¾è®¡`](/tag/design.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å­—ç¬¦ä¸²`](/tag/string.md) [`æœ‰åºé›†åˆ`](/tag/ordered-set.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/design-log-storage-system) [`LeetCode`](https://leetcode.com/problems/design-log-storage-system)

## é¢˜ç›®

You are given several logs, where each log contains a unique ID and timestamp.
Timestamp is a string that has the following format:
`Year:Month:Day:Hour:Minute:Second`, for example, `2017:01:01:23:59:59`. All
domains are zero-padded decimal numbers.

Implement the `LogSystem` class:

  * `LogSystem()` Initializes the `LogSystem`**** object.
  * `void put(int id, string timestamp)` Stores the given log `(id, timestamp)` in your storage system.
  * `int[] retrieve(string start, string end, string granularity)` Returns the IDs of the logs whose timestamps are within the range from `start` to `end` inclusive. `start` and `end` all have the same format as `timestamp`, and `granularity` means how precise the range should be (i.e. to the exact `Day`, `Minute`, etc.). For example, `start = "2017:01:01:23:59:59"`, `end = "2017:01:02:23:59:59"`, and `granularity = "Day"` means that we need to find the logs within the inclusive range from **Jan. 1st 2017** to **Jan. 2nd 2017** , and the `Hour`, `Minute`, and `Second` for each log entry can be ignored.



**Example 1:**

> 
> 
> 
> 
> 
> **Input**
> 
> ["LogSystem", "put", "put", "put", "retrieve", "retrieve"]
> 
> [[], [1, "2017:01:01:23:59:59"], [2, "2017:01:01:22:59:59"], [3, "2016:01:01:00:00:00"], ["2016:01:01:01:01:01", "2017:01:01:23:00:00", "Year"], ["2016:01:01:01:01:01", "2017:01:01:23:00:00", "Hour"]]
> 
> **Output**
> 
> [null, null, null, null, [3, 2, 1], [2, 1]]
> 
> 
> 
> **Explanation**
> 
> LogSystem logSystem = new LogSystem();
> 
> logSystem.put(1, "2017:01:01:23:59:59");
> 
> logSystem.put(2, "2017:01:01:22:59:59");
> 
> logSystem.put(3, "2016:01:01:00:00:00");
> 
> 
> 
> // return [3,2,1], because you need to return all logs between 2016 and 2017.
> 
> logSystem.retrieve("2016:01:01:01:01:01", "2017:01:01:23:00:00", "Year");
> 
> 
> 
> // return [2,1], because you need to return all logs between Jan. 1, 2016 01:XX:XX and Jan. 1, 2017 23:XX:XX.
> 
> // Log 3 is not returned because Jan. 1, 2016 00:00:00 comes before the start of the range.
> 
> logSystem.retrieve("2016:01:01:01:01:01", "2017:01:01:23:00:00", "Hour");

**Constraints:**

  * `1 <= id <= 500`
  * `2000 <= Year <= 2017`
  * `1 <= Month <= 12`
  * `1 <= Day <= 31`
  * `0 <= Hour <= 23`
  * `0 <= Minute, Second <= 59`
  * `granularity` is one of the values `["Year", "Month", "Day", "Hour", "Minute", "Second"]`.
  * At most `500` calls will be made to `put` and `retrieve`.


## é¢˜ç›®å¤§æ„

ä½ å°†è·å¾—å¤šæ¡æ—¥å¿—ï¼Œæ¯æ¡æ—¥å¿—éƒ½æœ‰å”¯ä¸€çš„ `id` å’Œ `timestamp` ï¼Œ`timestamp` æ˜¯å½¢å¦‚
`Year:Month:Day:Hour:Minute:Second` çš„å­—ç¬¦ä¸²ï¼Œ`2017:01:01:23:59:59`
ï¼Œæ‰€æœ‰å€¼åŸŸéƒ½æ˜¯é›¶å¡«å……çš„åè¿›åˆ¶æ•°ã€‚

å®ç° `LogSystem` ç±»ï¼š

  * `LogSystem()` åˆå§‹åŒ– `LogSystem`**** å¯¹è±¡
  * `void put(int id, string timestamp)` ç»™å®šæ—¥å¿—çš„ `id` å’Œ `timestamp` ï¼Œå°†è¿™ä¸ªæ—¥å¿—å­˜å…¥ä½ çš„å­˜å‚¨ç³»ç»Ÿä¸­ã€‚
  * `int[] retrieve(string start, string end, string granularity)` è¿”å›åœ¨ç»™å®šæ—¶é—´åŒºé—´ `[start, end]` ï¼ˆåŒ…å«ä¸¤ç«¯ï¼‰å†…çš„æ‰€æœ‰æ—¥å¿—çš„ `id` ã€‚`start` ã€`end` å’Œ `timestamp` çš„æ ¼å¼ç›¸åŒï¼Œ`granularity` è¡¨ç¤ºè€ƒè™‘çš„æ—¶é—´ç²’åº¦ï¼ˆä¾‹å¦‚ï¼Œç²¾ç¡®åˆ° `Day`ã€`Minute` ç­‰ï¼‰ã€‚ä¾‹å¦‚ `start = "2017:01:01:23:59:59"`ã€`end = "2017:01:02:23:59:59"` ä¸” `granularity = "Day"` æ„å‘³ç€éœ€è¦æŸ¥æ‰¾ä» **Jan. 1st 2017** åˆ° **Jan. 2nd 2017** èŒƒå›´å†…çš„æ—¥å¿—ï¼Œå¯ä»¥å¿½ç•¥æ—¥å¿—çš„ `Hour`ã€`Minute` å’Œ `Second` ã€‚

**ç¤ºä¾‹ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š**
> 
> ["LogSystem", "put", "put", "put", "retrieve", "retrieve"]
> 
> [[], [1, "2017:01:01:23:59:59"], [2, "2017:01:01:22:59:59"], [3, "2016:01:01:00:00:00"], ["2016:01:01:01:01:01", "2017:01:01:23:00:00", "Year"], ["2016:01:01:01:01:01", "2017:01:01:23:00:00", "Hour"]]
> 
> **è¾“å‡ºï¼š**
> 
> [null, null, null, null, [3, 2, 1], [2, 1]]
> 
> 
> 
> **è§£é‡Šï¼š**
> 
> LogSystem logSystem = new LogSystem();
> 
> logSystem.put(1, "2017:01:01:23:59:59");
> 
> logSystem.put(2, "2017:01:01:22:59:59");
> 
> logSystem.put(3, "2016:01:01:00:00:00");
> 
> 
> 
> // è¿”å› [3,2,1]ï¼Œè¿”å›ä» 2016 å¹´åˆ° 2017 å¹´æ‰€æœ‰çš„æ—¥å¿—ã€‚
> 
> logSystem.retrieve("2016:01:01:01:01:01", "2017:01:01:23:00:00", "Year");
> 
> 
> 
> // è¿”å› [2,1]ï¼Œè¿”å›ä» Jan. 1, 2016 01:XX:XX åˆ° Jan. 1, 2017 23:XX:XX ä¹‹é—´çš„æ‰€æœ‰æ—¥å¿—
> 
> // ä¸è¿”å›æ—¥å¿— 3 å› ä¸ºè®°å½•æ—¶é—´ Jan. 1, 2016 00:00:00 è¶…è¿‡èŒƒå›´çš„èµ·å§‹æ—¶é—´
> 
> logSystem.retrieve("2016:01:01:01:01:01", "2017:01:01:23:00:00", "Hour");
> 
> 

**æç¤ºï¼š**

  * `1 <= id <= 500`
  * `2000 <= Year <= 2017`
  * `1 <= Month <= 12`
  * `1 <= Day <= 31`
  * `0 <= Hour <= 23`
  * `0 <= Minute, Second <= 59`
  * `granularity` æ˜¯è¿™äº›å€¼ `["Year", "Month", "Day", "Hour", "Minute", "Second"]` ä¹‹ä¸€
  * æœ€å¤šè°ƒç”¨ `500` æ¬¡ `put` å’Œ `retrieve`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------ | :------: |
| 588 | è®¾è®¡å†…å­˜æ–‡ä»¶ç³»ç»Ÿ ğŸ”’ |  |  [`è®¾è®¡`](/tag/design.md) [`å­—å…¸æ ‘`](/tag/trie.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) `2+` | <font color=#ff334b>Hard</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/design-in-memory-file-system) [ğŸ”—](https://leetcode.com/problems/design-in-memory-file-system) |