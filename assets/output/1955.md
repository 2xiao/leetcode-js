---
title: 1955. ç»Ÿè®¡ç‰¹æ®Šå­åºåˆ—çš„æ•°ç›®
description: LeetCode 1955. ç»Ÿè®¡ç‰¹æ®Šå­åºåˆ—çš„æ•°ç›®é¢˜è§£ï¼ŒCount Number of Special Subsequencesï¼ŒåŒ…å«è§£é¢˜æ€è·¯ã€å¤æ‚åº¦åˆ†æä»¥åŠå®Œæ•´çš„ JavaScript ä»£ç å®ç°ã€‚
keywords:
  - LeetCode
  - 1955. ç»Ÿè®¡ç‰¹æ®Šå­åºåˆ—çš„æ•°ç›®
  - ç»Ÿè®¡ç‰¹æ®Šå­åºåˆ—çš„æ•°ç›®
  - Count Number of Special Subsequences
  - è§£é¢˜æ€è·¯
  - æ•°ç»„
  - åŠ¨æ€è§„åˆ’
---

# 1955. ç»Ÿè®¡ç‰¹æ®Šå­åºåˆ—çš„æ•°ç›®

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`åŠ¨æ€è§„åˆ’`](/tag/dynamic-programming.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/count-number-of-special-subsequences) [`LeetCode`](https://leetcode.com/problems/count-number-of-special-subsequences)

## é¢˜ç›®

A sequence is **special** if it consists of a **positive** number of `0`s,
followed by a **positive** number of `1`s, then a **positive** number of `2`s.

  * For example, `[0,1,2]` and `[0,0,1,1,1,2]` are special.
  * In contrast, `[2,1,0]`, `[1]`, and `[0,1,2,0]` are not special.

Given an array `nums` (consisting of **only** integers `0`, `1`, and `2`),
return _the**number of different subsequences** that are special_. Since the
answer may be very large, **return it modulo**`109 + 7`.

A **subsequence** of an array is a sequence that can be derived from the array
by deleting some or no elements without changing the order of the remaining
elements. Two subsequences are **different** if the **set of indices** chosen
are different.



**Example 1:**

> Input: nums = [0,1,2,2]
> 
> Output: 3
> 
> Explanation: The special subsequences are bolded [**_0_** ,**_1_** ,**_2_** ,2], [**_0_** ,**_1_** ,2,**_2_**], and [**_0_** ,**_1_** ,**_2_** ,**_2_**].

**Example 2:**

> Input: nums = [2,2,0,0]
> 
> Output: 0
> 
> Explanation: There are no special subsequences in [2,2,0,0].

**Example 3:**

> Input: nums = [0,1,2,0,1,2]
> 
> Output: 7
> 
> Explanation: The special subsequences are bolded:
> - [**_0_** ,**_1_** ,**_2_** ,0,1,2]
> - [**_0_** ,**_1_** ,2,0,1,**_2_**]
> - [**_0_** ,**_1_** ,**_2_** ,0,1,**_2_**]
> - [**_0_** ,**_1_** ,2,0,**_1_** ,**_2_**]
> - [**_0_** ,1,2,**_0_** ,**_1_** ,**_2_**]
> - [**_0_** ,1,2,0,**_1_** ,**_2_**]
> - [0,1,2,**_0_** ,**_1_** ,**_2_**]

**Constraints:**

  * `1 <= nums.length <= 10^5`
  * `0 <= nums[i] <= 2`


## é¢˜ç›®å¤§æ„

**ç‰¹æ®Šåºåˆ—** æ˜¯ç”± **æ­£æ•´æ•°**  ä¸ª `0` ï¼Œç´§æ¥ç€ **æ­£æ•´æ•°**  ä¸ª `1` ï¼Œæœ€å **æ­£æ•´æ•°**  ä¸ª `2` ç»„æˆçš„åºåˆ—ã€‚

  * æ¯”æ–¹è¯´ï¼Œ`[0,1,2]` å’Œ `[0,0,1,1,1,2]` æ˜¯ç‰¹æ®Šåºåˆ—ã€‚
  * ç›¸åï¼Œ`[2,1,0]` ï¼Œ`[1]` å’Œ `[0,1,2,0]` å°±ä¸æ˜¯ç‰¹æ®Šåºåˆ—ã€‚

ç»™ä½ ä¸€ä¸ªæ•°ç»„ `nums` ï¼ˆ**ä»…**  åŒ…å«æ•´æ•° `0`ï¼Œ`1` å’Œ `2`ï¼‰ï¼Œè¯·ä½ è¿”å› **ä¸åŒç‰¹æ®Šå­åºåˆ—çš„æ•°ç›®**  ã€‚ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¯·ä½ å°†å®ƒå¯¹
`109 + 7` **å–ä½™** åè¿”å›ã€‚

ä¸€ä¸ªæ•°ç»„çš„ **å­åºåˆ—**  æ˜¯ä»åŸæ•°ç»„ä¸­åˆ é™¤é›¶ä¸ªæˆ–è€…è‹¥å¹²ä¸ªå…ƒç´ åï¼Œå‰©ä¸‹å…ƒç´ ä¸æ”¹å˜é¡ºåºå¾—åˆ°çš„åºåˆ—ã€‚å¦‚æœä¸¤ä¸ªå­åºåˆ—çš„ **ä¸‹æ ‡é›†åˆ**
ä¸åŒï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå­åºåˆ—æ˜¯ **ä¸åŒçš„**  ã€‚



**ç¤ºä¾‹ 1ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [0,1,2,2]
> 
> **è¾“å‡ºï¼š** 3
> 
> **è§£é‡Šï¼š** ç‰¹æ®Šå­åºåˆ—ä¸º [**0** ,**1** ,**2** ,2]ï¼Œ[**0** ,**1** ,2,**2**] å’Œ [**0** ,**1** ,**2** ,**2**] ã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [2,2,0,0]
> 
> **è¾“å‡ºï¼š** 0
> 
> **è§£é‡Šï¼š** æ•°ç»„ [2,2,0,0] ä¸­æ²¡æœ‰ç‰¹æ®Šå­åºåˆ—ã€‚
> 
> 

**ç¤ºä¾‹ 3ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** nums = [0,1,2,0,1,2]
> 
> **è¾“å‡ºï¼š** 7
> 
> **è§£é‡Šï¼š** ç‰¹æ®Šå­åºåˆ—åŒ…æ‹¬ï¼š
> - [**0** ,**1** ,**2** ,0,1,2]
> - [**0** ,**1** ,2,0,1,**2**]
> - [**0** ,**1** ,**2** ,0,1,**2**]
> - [**0** ,**1** ,2,0,**1** ,**2**]
> - [**0** ,1,2,**0** ,**1** ,**2**]
> - [**0** ,1,2,0,**1** ,**2**]
> - [0,1,2,**0** ,**1** ,**2**]
> 
> 



**æç¤ºï¼š**

  * `1 <= nums.length <= 10^5`
  * `0 <= nums[i] <= 2`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```