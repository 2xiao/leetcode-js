---
title: 2015. æ¯æ®µå»ºç­‘ç‰©çš„å¹³å‡é«˜åº¦ ğŸ”’
description: LeetCode,2015. æ¯æ®µå»ºç­‘ç‰©çš„å¹³å‡é«˜åº¦ ğŸ”’,æ¯æ®µå»ºç­‘ç‰©çš„å¹³å‡é«˜åº¦,Average Height of Buildings in Each Segment,è§£é¢˜æ€è·¯,è´ªå¿ƒ,æ•°ç»„,æ’åº,å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
keywords:
  - LeetCode
  - 2015. æ¯æ®µå»ºç­‘ç‰©çš„å¹³å‡é«˜åº¦ ğŸ”’
  - æ¯æ®µå»ºç­‘ç‰©çš„å¹³å‡é«˜åº¦
  - Average Height of Buildings in Each Segment
  - è§£é¢˜æ€è·¯
  - è´ªå¿ƒ
  - æ•°ç»„
  - æ’åº
  - å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
---

# 2015. æ¯æ®µå»ºç­‘ç‰©çš„å¹³å‡é«˜åº¦ ğŸ”’

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) [`æ’åº`](/tag/sorting.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/average-height-of-buildings-in-each-segment) [`LeetCode`](https://leetcode.com/problems/average-height-of-buildings-in-each-segment)

## é¢˜ç›®

A perfectly straight street is represented by a number line. The street has
building(s) on it and is represented by a 2D integer array `buildings`, where
`buildings[i] = [starti, endi, heighti]`. This means that there is a building
with `heighti` in the **half-closed segment** `[starti, endi)`.

You want to **describe** the heights of the buildings on the street with the
**minimum** number of non-overlapping **segments**. The street can be
represented by the 2D integer array `street` where `street[j] = [leftj,
rightj, averagej]` describes a **half-closed segment** `[leftj, rightj)` of
the road where the **average** heights of the buildings in the**segment** is
`averagej`.

  * For example, if `buildings = [[1,5,2],[3,10,4]],` the street could be represented by `street = [[1,3,2],[3,5,3],[5,10,4]]` because: 
> 
> * From 1 to 3, there is only the first building with an average height of `2 / 1 = 2`.
> 
> * From 3 to 5, both the first and the second building are there with an average height of `(2+4) / 2 = 3`.
> 
> * From 5 to 10, there is only the second building with an average height of `4 / 1 = 4`.

Given `buildings`, return _the 2D integer array_`street` _as described above
(**excluding** any areas of the street where there are no buldings). You may
return the array in **any order**_.

The **average** of `n` elements is the **sum** of the `n` elements divided
(**integer division**) by `n`.

A **half-closed segment** `[a, b)` is the section of the number line between
points `a` and `b` **including** point `a` and **not including** point `b`.



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2000-2099/2015.Average%20Height%20of%20Buildings%20in%20Each%20Segment/images/image-20210921224001-2.png)

> Input: buildings = [[1,4,2],[3,9,4]]
> 
> Output: [[1,3,2],[3,4,3],[4,9,4]]
> 
> Explanation:
> 
> From 1 to 3, there is only the first building with an average height of 2 / 1 = 2.
> 
> From 3 to 4, both the first and the second building are there with an average height of (2+4) / 2 = 3.
> 
> From 4 to 9, there is only the second building with an average height of 4 / 1 = 4.

**Example 2:**

> Input: buildings = [[1,3,2],[2,5,3],[2,8,3]]
> 
> Output: [[1,3,2],[3,8,3]]
> 
> Explanation:
> 
> From 1 to 2, there is only the first building with an average height of 2 / 1 = 2.
> 
> From 2 to 3, all three buildings are there with an average height of (2+3+3) / 3 = 2.
> 
> From 3 to 5, both the second and the third building are there with an average height of (3+3) / 2 = 3.
> 
> From 5 to 8, there is only the last building with an average height of 3 / 1 = 3.
> 
> The average height from 1 to 3 is the same so we can group them into one segment.
> 
> The average height from 3 to 8 is the same so we can group them into one segment.

**Example 3:**

> Input: buildings = [[1,2,1],[5,6,1]]
> 
> Output: [[1,2,1],[5,6,1]]
> 
> Explanation:
> 
> From 1 to 2, there is only the first building with an average height of 1 / 1 = 1.
> 
> From 2 to 5, there are no buildings, so it is not included in the output.
> 
> From 5 to 6, there is only the second building with an average height of 1 / 1 = 1.
> 
> We cannot group the segments together because an empty space with no buildings seperates the segments.

**Constraints:**

  * `1 <= buildings.length <= 10^5`
  * `buildings[i].length == 3`
  * `0 <= starti < endi <= 10^8`
  * `1 <= heighti <= 10^5`


## é¢˜ç›®å¤§æ„

ä¸€æ¡å®Œå…¨ç¬”ç›´çš„è¡—é“ç”±ä¸€æ¡æ•°å­—çº¿è¡¨ç¤ºã€‚è¡—é“ä¸Šæœ‰å»ºç­‘ç‰©ï¼Œç”±äºŒç»´æ•´æ•°é˜µåˆ— `buildings` è¡¨ç¤ºï¼Œå…¶ä¸­ `buildings[i] = [starti,
endi, heighti]`ã€‚è¿™æ„å‘³ç€åœ¨ **åŠå°é—­çš„ä½ç½®**`[startiï¼Œendi)` æœ‰ä¸€åº§é«˜åº¦ä¸º `heighti` çš„å»ºç­‘ã€‚  
ä½ æƒ³ç”¨ **æœ€å°‘** æ•°é‡çš„éé‡å  **éƒ¨åˆ†** æ¥ **æè¿°** è¡—é“ä¸Šå»ºç­‘ç‰©çš„é«˜åº¦ã€‚è¡—é“å¯ä»¥ç”¨2Dæ•´æ•°æ•°ç»„ `street` æ¥è¡¨ç¤ºï¼Œå…¶ä¸­
`street[j] = [leftj, rightj, averagej]` æè¿°äº†é“è·¯çš„ **åŠå°é—­åŒºåŸŸ**  `[leftj, rightj)`
ï¼Œè¯¥æ®µä¸­å»ºç­‘ç‰©çš„ **å¹³å‡** é«˜åº¦ä¸º `averagej` ã€‚

  * ä¾‹å¦‚ï¼Œå¦‚æœ `buildings = [[1,5,2],[3,10,4]]` ï¼Œ `street = [[1,3,2],[3,5,3],[5,10,4]]` å¯ä»¥è¡¨ç¤ºè¡—é“ï¼Œå› ä¸ºï¼š 
> 
> * ä» 1 åˆ° 3 ï¼Œåªæœ‰ç¬¬ä¸€æ ‹å»ºç­‘çš„å¹³å‡é«˜åº¦ä¸º `2 / 1 = 2` ã€‚
> 
> * ä» 3 åˆ° 5 ï¼Œç¬¬ä¸€å’Œç¬¬äºŒæ ‹å»ºç­‘çš„å¹³å‡é«˜åº¦å‡ä¸º `ï¼ˆ2+4ï¼‰ / 2 = 3 `ã€‚
> 
> * ä» 5 åˆ° 10 ï¼Œåªæœ‰ç¬¬äºŒæ ‹å»ºç­‘çš„å¹³å‡é«˜åº¦ä¸º `4 / 1 = 4` ã€‚

ç»™å®š `buildings` ï¼Œè¿”å›å¦‚ä¸Šæ‰€è¿°çš„äºŒç»´æ•´æ•°çŸ©é˜µ _ _`street` _ _ ï¼ˆ **ä¸åŒ…æ‹¬** è¡—é“ä¸Šæ²¡æœ‰å»ºç­‘ç‰©çš„ä»»ä½•åŒºåŸŸï¼‰ã€‚æ‚¨å¯ä»¥æŒ‰
**ä»»ä½•é¡ºåº** è¿”å›æ•°ç»„ã€‚  
`n` ä¸ªå…ƒç´ çš„ **å¹³å‡å€¼** æ˜¯ `n` ä¸ªå…ƒç´ é™¤ä»¥ `n` çš„ **æ€»å’Œ** ï¼ˆ**æ•´æ•°é™¤æ³•** ï¼‰ã€‚  
**åŠé—­åˆæ®µ**  `[a, b)` æ˜¯ç‚¹ `a` å’Œ `b` ä¹‹é—´çš„æ•°å­—çº¿çš„æˆªé¢ï¼Œ**åŒ…æ‹¬** ç‚¹ `a` ï¼Œ**ä¸åŒ…æ‹¬  **ç‚¹ `b` ã€‚



**ç¤ºä¾‹1ï¼š**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/2000-2099/2015.Average%20Height%20of%20Buildings%20in%20Each%20Segment/images/image-20210921224001-2.png)

> 
> 
> 
> 
> 
> **è¾“å…¥:** buildings = [[1,4,2],[3,9,4]]
> 
> **è¾“å‡º:** [[1,3,2],[3,4,3],[4,9,4]]
> 
> **è§£é‡Š:**
> 
> ä» 1 åˆ° 3 ï¼Œåªæœ‰ç¬¬ä¸€æ ‹å»ºç­‘çš„å¹³å‡é«˜åº¦ä¸º 2 / 1 = 2ã€‚
> 
> ä» 3 åˆ° 4 ï¼Œç¬¬ä¸€å’Œç¬¬äºŒæ ‹å»ºç­‘çš„å¹³å‡é«˜åº¦å‡ä¸ºï¼ˆ2+4ï¼‰/ 2 = 3ã€‚
> 
> ä» 4 åˆ° 9 ï¼Œåªæœ‰ç¬¬äºŒæ ‹å»ºç­‘çš„å¹³å‡é«˜åº¦ä¸º 4 / 1 = 4ã€‚
> 
> 

**ç¤ºä¾‹ 2:**

> 
> 
> 
> 
> 
> **è¾“å…¥:** buildings = [[1,3,2],[2,5,3],[2,8,3]]
> 
> **è¾“å‡º:** [[1,3,2],[3,8,3]]
> 
> **è§£é‡Š:**
> 
> ä» 1 åˆ° 2 ï¼Œåªæœ‰ç¬¬ä¸€æ ‹å»ºç­‘çš„å¹³å‡é«˜åº¦ä¸º 2 / 1 = 2ã€‚
> 
> ä» 2 åˆ° 3 ï¼Œè¿™ä¸‰åº§å»ºç­‘çš„å¹³å‡é«˜åº¦å‡ä¸º ï¼ˆ2+3+3ï¼‰ / 3 = 2ã€‚
> 
> ä» 3 åˆ° 5 ï¼Œç¬¬äºŒå’Œç¬¬ä¸‰æ ‹æ¥¼éƒ½åœ¨é‚£é‡Œï¼Œå¹³å‡é«˜åº¦ä¸º ï¼ˆ3+3ï¼‰ / 2 = 3ã€‚
> 
> ä» 5 åˆ° 8 ï¼Œåªæœ‰æœ€åä¸€æ ‹å»ºç­‘çš„å¹³å‡é«˜åº¦ä¸º 3 / 1 = 3ã€‚
> 
> ä» 1 åˆ° 3 çš„å¹³å‡é«˜åº¦æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬åˆ†æˆä¸€ä¸ªéƒ¨åˆ†ã€‚
> 
> ä» 3 åˆ° 8 çš„å¹³å‡é«˜åº¦æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬åˆ†æˆä¸€ä¸ªéƒ¨åˆ†ã€‚
> 
> 

**ç¤ºä¾‹ 3:**

> 
> 
> 
> 
> 
> **è¾“å…¥:** buildings = [[1,2,1],[5,6,1]]
> 
> **è¾“å‡º:** [[1,2,1],[5,6,1]]
> 
> **è§£é‡Š:**
> 
> ä» 1 åˆ° 2 ï¼Œåªæœ‰ç¬¬ä¸€æ ‹å»ºç­‘çš„å¹³å‡é«˜åº¦ä¸º 1 / 1 = 1ã€‚
> 
> ä» 2 åˆ° 5 ï¼Œæ²¡æœ‰å»ºç­‘ç‰©ï¼Œå› æ­¤ä¸åŒ…æ‹¬åœ¨è¾“å‡ºä¸­ã€‚
> 
> ä» 5 åˆ° 6 ï¼Œåªæœ‰ç¬¬äºŒæ ‹å»ºç­‘çš„å¹³å‡é«˜åº¦ä¸º 1 / 1 = 1ã€‚
> 
> æˆ‘ä»¬æ— æ³•å°†è¿™äº›éƒ¨åˆ†ç»„åˆåœ¨ä¸€èµ·ï¼Œå› ä¸ºæ²¡æœ‰å»ºç­‘çš„ç©ºç™½ç©ºé—´å°†è¿™äº›éƒ¨åˆ†éš”å¼€ã€‚
> 
> 



**æç¤º:**

  * `1 <= buildings.length <= 10^5`
  * `buildings[i].length == 3`
  * `0 <= starti < endi <= 10^8`
  * `1 <= heighti <= 10^5`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ |
| :------: | :------ | :------: | :------ | :------ |
| 1701 | [å¹³å‡ç­‰å¾…æ—¶é—´](https://leetcode.com/problems/average-waiting-time) |  |  [`æ•°ç»„`](/tag/array.md) [`æ¨¡æ‹Ÿ`](/tag/simulation.md) | <font color=#ffb800>Medium</font> |
| 1943 | [æè¿°ç»˜ç”»ç»“æœ](https://leetcode.com/problems/describe-the-painting) |  |  [`æ•°ç»„`](/tag/array.md) [`å“ˆå¸Œè¡¨`](/tag/hash-table.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md) `1+` | <font color=#ffb800>Medium</font> |
| 2158 | [æ¯å¤©ç»˜åˆ¶æ–°åŒºåŸŸçš„æ•°é‡ ğŸ”’](https://leetcode.com/problems/amount-of-new-area-painted-each-day) |  |  [`çº¿æ®µæ ‘`](/tag/segment-tree.md) [`æ•°ç»„`](/tag/array.md) [`æœ‰åºé›†åˆ`](/tag/ordered-set.md) | <font color=#ff334b>Hard</font> |
| 2406 | [å°†åŒºé—´åˆ†ä¸ºæœ€å°‘ç»„æ•°](https://leetcode.com/problems/divide-intervals-into-minimum-number-of-groups) | [[âœ“]](/problem/2406.md) |  [`è´ªå¿ƒ`](/tag/greedy.md) [`æ•°ç»„`](/tag/array.md) [`åŒæŒ‡é’ˆ`](/tag/two-pointers.md) `3+` | <font color=#ffb800>Medium</font> |