---
title: 3428. 最多 K 个元素的子序列的最值之和
description: LeetCode 3428. 最多 K 个元素的子序列的最值之和题解，Maximum and Minimum Sums of at Most Size K Subsequences，包含解题思路、复杂度分析以及完整的 JavaScript 代码实现。
keywords:
  - LeetCode
  - 3428. 最多 K 个元素的子序列的最值之和
  - 最多 K 个元素的子序列的最值之和
  - Maximum and Minimum Sums of at Most Size K Subsequences
  - 解题思路
  - 数组
  - 数学
  - 动态规划
  - 组合数学
  - 排序
---

# 3428. 最多 K 个元素的子序列的最值之和

🟠 <font color=#ffb800>Medium</font>&emsp; 🔖&ensp; [`数组`](/tag/array.md) [`数学`](/tag/math.md) [`动态规划`](/tag/dynamic-programming.md) [`组合数学`](/tag/combinatorics.md) [`排序`](/tag/sorting.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/maximum-and-minimum-sums-of-at-most-size-k-subsequences) [`LeetCode`](https://leetcode.com/problems/maximum-and-minimum-sums-of-at-most-size-k-subsequences)

## 题目

You are given an integer array `nums` and a positive integer `k`. Return the
sum of the **maximum** and **minimum** elements of all **subsequences** of
`nums` with **at most** `k` elements.

Since the answer may be very large, return it **modulo** `109 + 7`.



**Example 1:**

**Input:** nums = [1,2,3], k = 2

**Output:** 24

**Explanation:**

The subsequences of `nums` with at most 2 elements are:

**Subsequence** | Minimum | Maximum | Sum  
---|---|---|---  
`[1]` | 1 | 1 | 2  
`[2]` | 2 | 2 | 4  
`[3]` | 3 | 3 | 6  
`[1, 2]` | 1 | 2 | 3  
`[1, 3]` | 1 | 3 | 4  
`[2, 3]` | 2 | 3 | 5  
**Final Total** |   |   | 24  
  
The output would be 24.

**Example 2:**

**Input:** nums = [5,0,6], k = 1

**Output:** 22

**Explanation:**

For subsequences with exactly 1 element, the minimum and maximum values are
the element itself. Therefore, the total is `5 + 5 + 0 + 0 + 6 + 6 = 22`.

**Example 3:**

**Input:** nums = [1,1,1], k = 2

**Output:** 12

**Explanation:**

The subsequences `[1, 1]` and `[1]` each appear 3 times. For all of them, the
minimum and maximum are both 1. Thus, the total is 12.



**Constraints:**

  * `1 <= nums.length <= 10^5`
  * `0 <= nums[i] <= 10^9`
  * `1 <= k <= min(70, nums.length)`


## 题目大意

给你一个整数数组 `nums` 和一个正整数 `k`，返回所有长度最多为 `k` 的 **子序列** 中 **最大值  **与 **最小值
**之和的总和。

**非空子序列**  是指从另一个数组中删除一些或不删除任何元素（且不改变剩余元素的顺序）得到的数组。

由于答案可能非常大，请返回对 `109 + 7` 取余数的结果。



**示例 1：**

**输入：** nums = [1,2,3], k = 2

**输出：** 24

**解释：**

数组 `nums` 中所有长度最多为 2 的子序列如下：

子序列 | 最小值 | 最大值 | 和  
---|---|---|---  
`[1]` | 1 | 1 | 2  
`[2]` | 2 | 2 | 4  
`[3]` | 3 | 3 | 6  
`[1, 2]` | 1 | 2 | 3  
`[1, 3]` | 1 | 3 | 4  
`[2, 3]` | 2 | 3 | 5  
**总和** |   |   | 24  
  
因此，输出为 24。

**示例 2：**

**输入：** nums = [5,0,6], k = 1

**输出：** 22

**解释：**

对于长度恰好为 1 的子序列，最小值和最大值均为元素本身。因此，总和为 `5 + 5 + 0 + 0 + 6 + 6 = 22`。

**示例 3：**

**输入：** nums = [1,1,1], k = 2

**输出：** 12

**解释：**

子序列 `[1, 1]` 和 `[1]` 各出现 3 次。对于所有这些子序列，最小值和最大值均为 1。因此，总和为 12。



**提示：**

  * `1 <= nums.length <= 10^5`
  * `0 <= nums[i] <= 10^9`
  * `1 <= k <= min(100, nums.length)`


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```