---
title: 699. æ‰è½çš„æ–¹å—
description: LeetCode,699. æ‰è½çš„æ–¹å—,æ‰è½çš„æ–¹å—,Falling Squares,è§£é¢˜æ€è·¯,çº¿æ®µæ ‘,æ•°ç»„,æœ‰åºé›†åˆ
keywords:
  - LeetCode
  - 699. æ‰è½çš„æ–¹å—
  - æ‰è½çš„æ–¹å—
  - Falling Squares
  - è§£é¢˜æ€è·¯
  - çº¿æ®µæ ‘
  - æ•°ç»„
  - æœ‰åºé›†åˆ
---

# 699. æ‰è½çš„æ–¹å—

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`çº¿æ®µæ ‘`](/tag/segment-tree.md) [`æ•°ç»„`](/tag/array.md) [`æœ‰åºé›†åˆ`](/tag/ordered-set.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/falling-squares) [`LeetCode`](https://leetcode.com/problems/falling-squares)

## é¢˜ç›®

There are several squares being dropped onto the X-axis of a 2D plane.

You are given a 2D integer array `positions` where `positions[i] = [lefti,
sideLengthi]` represents the `ith` square with a side length of `sideLengthi`
that is dropped with its left edge aligned with X-coordinate `lefti`.

Each square is dropped one at a time from a height above any landed squares.
It then falls downward (negative Y direction) until it either lands **on the
top side of another square** or **on the X-axis**. A square brushing the
left/right side of another square does not count as landing on it. Once it
lands, it freezes in place and cannot be moved.

After each square is dropped, you must record the **height of the current
tallest stack of squares**.

Return _an integer array_`ans` _where_`ans[i]`_represents the height described
above after dropping the_`ith` _square_.



**Example 1:**

![](https://assets.leetcode.com/uploads/2021/04/28/fallingsq1-plane.jpg)

> Input: positions = [[1,2],[2,3],[6,1]]
> 
> Output: [2,5,5]
> 
> Explanation:
> 
> After the first drop, the tallest stack is square 1 with a height of 2.
> 
> After the second drop, the tallest stack is squares 1 and 2 with a height of 5.
> 
> After the third drop, the tallest stack is still squares 1 and 2 with a height of 5.
> 
> Thus, we return an answer of [2, 5, 5].

**Example 2:**

> Input: positions = [[100,100],[200,100]]
> 
> Output: [100,100]
> 
> Explanation:
> 
> After the first drop, the tallest stack is square 1 with a height of 100.
> 
> After the second drop, the tallest stack is either square 1 or square 2, both with heights of 100.
> 
> Thus, we return an answer of [100, 100].
> 
> Note that square 2 only brushes the right side of square 1, which does not count as landing on it.

**Constraints:**

  * `1 <= positions.length <= 1000`
  * `1 <= lefti <= 10^8`
  * `1 <= sideLengthi <= 10^6`


## é¢˜ç›®å¤§æ„

åœ¨äºŒç»´å¹³é¢ä¸Šçš„ x è½´ä¸Šï¼Œæ”¾ç½®ç€ä¸€äº›æ–¹å—ã€‚

ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ `positions` ï¼Œå…¶ä¸­ `positions[i] = [lefti, sideLengthi]` è¡¨ç¤ºï¼šç¬¬ `i`
ä¸ªæ–¹å—è¾¹é•¿ä¸º `sideLengthi` ï¼Œå…¶å·¦ä¾§è¾¹ä¸ x è½´ä¸Šåæ ‡ç‚¹ `lefti` å¯¹é½ã€‚

æ¯ä¸ªæ–¹å—éƒ½ä»ä¸€ä¸ªæ¯”ç›®å‰æ‰€æœ‰çš„è½åœ°æ–¹å—æ›´é«˜çš„é«˜åº¦æ‰è½è€Œä¸‹ã€‚æ–¹å—æ²¿ y è½´è´Ÿæ–¹å‘ä¸‹è½ï¼Œç›´åˆ°ç€é™†åˆ° **å¦ä¸€ä¸ªæ­£æ–¹å½¢çš„é¡¶è¾¹** æˆ–è€…æ˜¯ **x è½´ä¸Š**
ã€‚ä¸€ä¸ªæ–¹å—ä»…ä»…æ˜¯æ“¦è¿‡å¦ä¸€ä¸ªæ–¹å—çš„å·¦ä¾§è¾¹æˆ–å³ä¾§è¾¹ä¸ç®—ç€é™†ã€‚ä¸€æ—¦ç€é™†ï¼Œå®ƒå°±ä¼šå›ºå®šåœ¨åŸåœ°ï¼Œæ— æ³•ç§»åŠ¨ã€‚

åœ¨æ¯ä¸ªæ–¹å—æ‰è½åï¼Œä½ å¿…é¡»è®°å½•ç›®å‰æ‰€æœ‰å·²ç»è½ç¨³çš„ **æ–¹å—å †å çš„æœ€é«˜é«˜åº¦** ã€‚

è¿”å›ä¸€ä¸ªæ•´æ•°æ•°ç»„ `ans` ï¼Œå…¶ä¸­ `ans[i]` è¡¨ç¤ºåœ¨ç¬¬ `i` å—æ–¹å—æ‰è½åå †å çš„æœ€é«˜é«˜åº¦ã€‚



**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/04/28/fallingsq1-plane.jpg)

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** positions = [[1,2],[2,3],[6,1]]
> 
> **è¾“å‡ºï¼š**[2,5,5]
> 
> **è§£é‡Šï¼š**
> 
> ç¬¬ 1 ä¸ªæ–¹å—æ‰è½åï¼Œæœ€é«˜çš„å †å ç”±æ–¹å— 1 ç»„æˆï¼Œå †å çš„æœ€é«˜é«˜åº¦ä¸º 2 ã€‚
> 
> ç¬¬ 2 ä¸ªæ–¹å—æ‰è½åï¼Œæœ€é«˜çš„å †å ç”±æ–¹å— 1 å’Œ 2 ç»„æˆï¼Œå †å çš„æœ€é«˜é«˜åº¦ä¸º 5 ã€‚
> 
> ç¬¬ 3 ä¸ªæ–¹å—æ‰è½åï¼Œæœ€é«˜çš„å †å ä»ç„¶ç”±æ–¹å— 1 å’Œ 2 ç»„æˆï¼Œå †å çš„æœ€é«˜é«˜åº¦ä¸º 5 ã€‚
> 
> å› æ­¤ï¼Œè¿”å› [2, 5, 5] ä½œä¸ºç­”æ¡ˆã€‚
> 
> 

**ç¤ºä¾‹ 2ï¼š**

> 
> 
> 
> 
> 
> **è¾“å…¥ï¼š** positions = [[100,100],[200,100]]
> 
> **è¾“å‡ºï¼š**[100,100]
> 
> **è§£é‡Šï¼š**
> 
> ç¬¬ 1 ä¸ªæ–¹å—æ‰è½åï¼Œæœ€é«˜çš„å †å ç”±æ–¹å— 1 ç»„æˆï¼Œå †å çš„æœ€é«˜é«˜åº¦ä¸º 100 ã€‚
> 
> ç¬¬ 2 ä¸ªæ–¹å—æ‰è½åï¼Œæœ€é«˜çš„å †å å¯ä»¥ç”±æ–¹å— 1 ç»„æˆä¹Ÿå¯ä»¥ç”±æ–¹å— 2 ç»„æˆï¼Œå †å çš„æœ€é«˜é«˜åº¦ä¸º 100 ã€‚
> 
> å› æ­¤ï¼Œè¿”å› [100, 100] ä½œä¸ºç­”æ¡ˆã€‚
> 
> æ³¨æ„ï¼Œæ–¹å— 2 æ“¦è¿‡æ–¹å— 1 çš„å³ä¾§è¾¹ï¼Œä½†ä¸ä¼šç®—ä½œåœ¨æ–¹å— 1 ä¸Šç€é™†ã€‚
> 
> 



**æç¤ºï¼š**

  * `1 <= positions.length <= 1000`
  * `1 <= lefti <= 10^8`
  * `1 <= sideLengthi <= 10^6`


## è§£é¢˜æ€è·¯

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O()`ï¼Œ

## ä»£ç 

```javascript

```

## ç›¸å…³é¢˜ç›®

<!-- prettier-ignore -->
| é¢˜å· | æ ‡é¢˜ | é¢˜è§£ | æ ‡ç­¾ | éš¾åº¦ | åŠ›æ‰£ |
| :------: | :------ | :------: | :------ | :------ | :------: |
| 218 | å¤©é™…çº¿é—®é¢˜ |  |  [`æ ‘çŠ¶æ•°ç»„`](/tag/binary-indexed-tree.md) [`çº¿æ®µæ ‘`](/tag/segment-tree.md) [`æ•°ç»„`](/tag/array.md) `4+` | <font color=#ff334b>Hard</font> | [ğŸ€„ï¸](https://leetcode.cn/problems/the-skyline-problem) [ğŸ”—](https://leetcode.com/problems/the-skyline-problem) |