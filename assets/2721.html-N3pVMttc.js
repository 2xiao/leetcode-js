import{_ as l,r as t,o as p,c as i,a as n,b as s,d as e,w as r,e as o}from"./app-aQeLbVW9.js";const u={},d=n("h1",{id:"_2721-å¹¶è¡Œæ‰§è¡Œå¼‚æ­¥å‡½æ•°",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2721-å¹¶è¡Œæ‰§è¡Œå¼‚æ­¥å‡½æ•°","aria-hidden":"true"},"#"),s(" 2721. å¹¶è¡Œæ‰§è¡Œå¼‚æ­¥å‡½æ•°")],-1),m={href:"https://leetcode.cn/problems/execute-asynchronous-functions-in-parallel",target:"_blank",rel:"noopener noreferrer"},k=n("code",null,"åŠ›æ‰£",-1),h={href:"https://leetcode.com/problems/execute-asynchronous-functions-in-parallel",target:"_blank",rel:"noopener noreferrer"},v=n("code",null,"LeetCode",-1),f=o('<h2 id="é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®" aria-hidden="true">#</a> é¢˜ç›®</h2><p>Given an array of asynchronous functions <code>functions</code>, return a new promise <code>promise</code>. Each function in the array accepts no arguments and returns a promise. All the promises should be executed in parallel.</p><p><code>promise</code> resolves:</p><ul><li>When all the promises returned from <code>functions</code> were resolved successfully in parallel. The resolved value of <code>promise</code> should be an array of all the resolved values of promises in the same order as they were in the <code>functions</code>. The <code>promise</code> should resolve when all the asynchronous functions in the array have completed execution in parallel.</li></ul><p><code>promise</code> rejects:</p><ul><li>When any of the promises returned from <code>functions</code> were rejected. <code>promise</code> should also reject with the reason of the first rejection.</li></ul><p>Please solve it without using the built-in <code>Promise.all</code> function.</p><p><strong>Example 1:</strong></p>',8),b=n("blockquote",null,[n("p",null,"Input: functions = ["),n("p",null,"() => new Promise(resolve => setTimeout(() => resolve(5), 200))"),n("p",null,"]"),n("p",{"t:200,resolved:[5]":""},"Output:"),n("p",null,"Explanation:"),n("p",null,"promiseAll(functions).then(console.log); // [5]"),n("p",null,"The single function was resolved at 200ms with a value of 5.")],-1),_=n("p",null,[n("strong",null,"Example 2:")],-1),g=n("blockquote",null,[n("p",null,"Input: functions = ["),n("blockquote",null,[n("p",null,"() => new Promise(resolve => setTimeout(() => resolve(1), 200)),")]),n("blockquote",null,[n("p",null,'() => new Promise((resolve, reject) => setTimeout(() => reject("Error"), 100))')]),n("p",null,"]"),n("p",{"t:100,rejected:Error":""},"Output:"),n("p",null,"Explanation: Since one of the promises rejected, the returned promise also rejected with the same error at the same time.")],-1),w=n("p",null,[n("strong",null,"Example 3:")],-1),x=n("blockquote",null,[n("p",null,"Input: functions = ["),n("blockquote",null,[n("p",null,"() => new Promise(resolve => setTimeout(() => resolve(4), 50)),")]),n("blockquote",null,[n("p",null,"() => new Promise(resolve => setTimeout(() => resolve(10), 150)),")]),n("blockquote",null,[n("p",null,"() => new Promise(resolve => setTimeout(() => resolve(16), 100))")]),n("p",null,"]"),n("p",{"t:150,resolved:[4,10,16]":""},"Output:"),n("p",null,"Explanation: All the promises resolved with a value. The returned promise resolved when the last promise resolved.")],-1),P=o(`<p><strong>Constraints:</strong></p><ul><li><code>functions</code> is an array of functions that returns promises</li><li><code>1 &lt;= functions.length &lt;= 10</code></li></ul><h2 id="é¢˜ç›®å¤§æ„" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®å¤§æ„" aria-hidden="true">#</a> é¢˜ç›®å¤§æ„</h2><p>ç»™å®šä¸€ä¸ªå¼‚æ­¥å‡½æ•°æ•°ç»„ <code>functions</code>ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ promise å¯¹è±¡ <code>promise</code>ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå‡½æ•°éƒ½ä¸æ¥å—å‚æ•°å¹¶è¿”å›ä¸€ä¸ª promiseã€‚æ‰€æœ‰çš„ promise éƒ½åº”è¯¥å¹¶è¡Œæ‰§è¡Œã€‚</p><p><code>promise</code> resolve æ¡ä»¶ï¼š</p><ul><li>å½“æ‰€æœ‰ä» <code>functions</code> è¿”å›çš„ promise éƒ½æˆåŠŸçš„å¹¶è¡Œè§£ææ—¶ã€‚<code>promise</code> çš„è§£æå€¼åº”è¯¥æ˜¯ä¸€ä¸ªæŒ‰ç…§å®ƒä»¬åœ¨ <code>functions</code> ä¸­çš„é¡ºåºæ’åˆ—çš„ promise çš„è§£æå€¼æ•°ç»„ã€‚<code>promise</code> åº”è¯¥åœ¨æ•°ç»„ä¸­çš„æ‰€æœ‰å¼‚æ­¥å‡½æ•°å¹¶è¡Œæ‰§è¡Œå®Œæˆæ—¶è§£æã€‚</li></ul><p><code>promise</code> reject æ¡ä»¶ï¼š</p><ul><li>å½“ä»»ä½•ä» <code>functions</code> è¿”å›çš„ promise è¢«æ‹’ç»æ—¶ã€‚<code>promise</code> ä¹Ÿä¼šè¢«æ‹’ç»ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªæ‹’ç»çš„åŸå› ã€‚</li></ul><p>è¯·åœ¨ä¸ä½¿ç”¨å†…ç½®çš„ <code>Promise.all</code> å‡½æ•°çš„æƒ…å†µä¸‹è§£å†³ã€‚</p><p><strong>æç¤ºï¼š</strong></p><ul><li>å‡½æ•° <code>functions</code> æ˜¯ä¸€ä¸ªè¿”å› promise çš„å‡½æ•°æ•°ç»„</li><li><code>1 &lt;= functions.length &lt;= 10</code></li></ul><h2 id="è§£é¢˜æ€è·¯" tabindex="-1"><a class="header-anchor" href="#è§£é¢˜æ€è·¯" aria-hidden="true">#</a> è§£é¢˜æ€è·¯</h2><p>ä¸ºäº†å¹¶è¡Œæ‰§è¡Œæ•°ç»„ä¸­çš„å¼‚æ­¥å‡½æ•°å¹¶è¿”å›ä¸€ä¸ª <code>Promise</code>ï¼Œéœ€è¦æ‰‹åŠ¨å®ç° <code>Promise.all</code> çš„åŠŸèƒ½ã€‚<code>Promise.all</code> çš„è¡Œä¸ºæ˜¯å½“æ•°ç»„ä¸­çš„æ‰€æœ‰ <code>Promise</code> éƒ½æˆåŠŸæ—¶ï¼Œè¿”å›æ‰€æœ‰çš„ç»“æœï¼›å¦‚æœæœ‰ä»»ä½• <code>Promise</code> å¤±è´¥ï¼Œåˆ™ç«‹å³æ‹’ç»ã€‚</p><ol><li><p><strong>åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Promise</code></strong>ï¼šè¯¥ Promise å°†åœ¨æ‰€æœ‰å¼‚æ­¥å‡½æ•°éƒ½æˆåŠŸæ—¶è§£æï¼Œæˆ–åœ¨å…¶ä¸­ä»»ä½•ä¸€ä¸ªè¢«æ‹’ç»æ—¶æ‹’ç»ã€‚</p></li><li><p><strong>åˆ›å»ºä¸€ä¸ªç»“æœæ•°ç»„</strong>ï¼Œç”¨äºä¿å­˜æ¯ä¸ªå‡½æ•°çš„ç»“æœï¼Œä»¥ç¡®ä¿æœ€ç»ˆçš„ç»“æœé¡ºåºä¸è¾“å…¥é¡ºåºä¸€è‡´ã€‚</p></li><li><p><strong>æ‰‹åŠ¨ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨</strong>ï¼Œç”¨äºè·Ÿè¸ªå·²å®Œæˆçš„ Promise æ•°é‡ã€‚</p></li><li><p><strong>éå† <code>functions</code> æ•°ç»„</strong>ï¼šå¯¹äºæ¯ä¸ªå‡½æ•°ï¼Œæ‰‹åŠ¨æ‰§è¡Œå®ƒå¹¶å¯¹å…¶è¿”å›çš„ Promise è¿›è¡Œå¤„ç†ã€‚</p><ul><li>è‹¥æˆåŠŸï¼Œå°†å‡½æ•°çš„æˆåŠŸç»“æœå­˜å‚¨åœ¨ <code>results</code> æ•°ç»„ä¸­ï¼Œè®¡æ•°å™¨ <code>count</code> é€’å¢ï¼Œå½“æ‰€æœ‰å‡½æ•°éƒ½æˆåŠŸæ‰§è¡Œæ—¶ï¼Œè§£æ <code>results</code> æ•°ç»„ã€‚</li><li>è‹¥ä»»ä½•ä¸€ä¸ªå‡½æ•°è¿”å›çš„ Promise è¢«æ‹’ç»ï¼Œåˆ™ç«‹å³æ‹’ç»æ•´ä¸ª <code>Promise</code>ï¼Œå¹¶ä¸”æŠ›å‡ºç¬¬ä¸€ä¸ªé”™è¯¯åŸå› ã€‚</li></ul></li></ol><h4 id="å¤æ‚åº¦åˆ†æ" tabindex="-1"><a class="header-anchor" href="#å¤æ‚åº¦åˆ†æ" aria-hidden="true">#</a> å¤æ‚åº¦åˆ†æ</h4><ul><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š<code>O(n)</code>ï¼Œå…¶ä¸­ <code>n</code> æ˜¯ <code>functions</code> çš„æ•°é‡ï¼Œéœ€è¦éå†æ‰€æœ‰å‡½æ•°å¹¶è§¦å‘å®ƒä»¬çš„æ‰§è¡Œã€‚</li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š<code>O(n)</code>ï¼Œç”¨äºå­˜å‚¨å‡½æ•°çš„ç»“æœã€‚</li></ul><h2 id="ä»£ç " tabindex="-1"><a class="header-anchor" href="#ä»£ç " aria-hidden="true">#</a> ä»£ç </h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Array<span class="token punctuation">&lt;</span>Function<span class="token punctuation">&gt;</span><span class="token punctuation">}</span></span> <span class="token parameter">functions</span>
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span>Promise<span class="token punctuation">&lt;</span>any<span class="token punctuation">&gt;</span><span class="token punctuation">}</span></span>
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">promiseAll</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">functions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		functions<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">;</span>
					count<span class="token operator">++</span><span class="token punctuation">;</span>

					<span class="token comment">// å½“æ‰€æœ‰å‡½æ•°éƒ½æˆåŠŸè§£ææ—¶ï¼Œè§£ææ•´ä¸ªç»“æœ</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> functions<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸€æ—¦æœ‰ä»»ä½•å‡½æ•°è¢«æ‹’ç»ï¼Œç«‹å³æ‹’ç»æ•´ä¸ª promise</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * const promise = promiseAll([() =&gt; new Promise(res =&gt; res(42))])
 * promise.then(console.log); // [42]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,18);function y(j,E){const c=t("font"),a=t("ExternalLinkIcon");return p(),i("div",null,[d,n("p",null,[s("ğŸŸ  "),e(c,{color:"#ffb800"},{default:r(()=>[s("Medium")]),_:1}),s("â€ƒ ğŸ”—â€‚"),n("a",m,[k,e(a)]),s(),n("a",h,[v,e(a)])]),f,b,_,g,w,x,P])}const q=l(u,[["render",y],["__file","2721.html.vue"]]);export{q as default};
