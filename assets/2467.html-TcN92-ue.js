import{_ as l,r as p,o as i,c as u,a as n,b as s,d as a,w as t,f as d,e as r}from"./app-fBVbqwGY.js";const k={},h=n("h1",{id:"_2467-æ ‘ä¸Šæœ€å¤§å¾—åˆ†å’Œè·¯å¾„",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2467-æ ‘ä¸Šæœ€å¤§å¾—åˆ†å’Œè·¯å¾„","aria-hidden":"true"},"#"),s(" 2467. æ ‘ä¸Šæœ€å¤§å¾—åˆ†å’Œè·¯å¾„")],-1),m=n("code",null,"æ ‘",-1),g=n("code",null,"æ·±åº¦ä¼˜å…ˆæœç´¢",-1),b=n("code",null,"å¹¿åº¦ä¼˜å…ˆæœç´¢",-1),v=n("code",null,"å›¾",-1),f=n("code",null,"æ•°ç»„",-1),_={href:"https://leetcode.cn/problems/most-profitable-path-in-a-tree",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"åŠ›æ‰£",-1),w={href:"https://leetcode.com/problems/most-profitable-path-in-a-tree",target:"_blank",rel:"noopener noreferrer"},x=n("code",null,"LeetCode",-1),A=r(`<h2 id="é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®" aria-hidden="true">#</a> é¢˜ç›®</h2><p>There is an undirected tree with <code>n</code> nodes labeled from <code>0</code> to <code>n - 1</code>, rooted at node <code>0</code>. You are given a 2D integer array <code>edges</code> of length <code>n - 1</code> where <code>edges[i] = [ai, bi]</code> indicates that there is an edge between nodes <code>ai</code> and <code>bi</code> in the tree.</p><p>At every node <code>i</code>, there is a gate. You are also given an array of even integers <code>amount</code>, where <code>amount[i]</code> represents:</p><ul><li>the price needed to open the gate at node <code>i</code>, if <code>amount[i]</code> is negative, or,</li><li>the cash reward obtained on opening the gate at node <code>i</code>, otherwise.</li></ul><p>The game goes on as follows:</p><ul><li><p>Initially, Alice is at node <code>0</code> and Bob is at node <code>bob</code>.</p></li><li><p>At every second, Alice and Bob <strong>each</strong> move to an adjacent node. Alice moves towards some <strong>leaf node</strong> , while Bob moves towards node <code>0</code>.</p></li><li><p>For <strong>every</strong> node along their path, Alice and Bob either spend money to open the gate at that node, or accept the reward. Note that:</p><ul><li><p>If the gate is <strong>already open</strong> , no price will be required, nor will there be any cash reward.</p></li><li><p>If Alice and Bob reach the node <strong>simultaneously</strong> , they share the price/reward for opening the gate there. In other words, if the price to open the gate is <code>c</code>, then both Alice and Bob pay <code>c / 2</code> each. Similarly, if the reward at the gate is <code>c</code>, both of them receive <code>c / 2</code> each.</p></li></ul></li><li><p>If Alice reaches a leaf node, she stops moving. Similarly, if Bob reaches node <code>0</code>, he stops moving. Note that these events are <strong>independent</strong> of each other.</p></li></ul><p>Return <em>the <strong>maximum</strong> net income Alice can have if she travels towards the optimal leaf node.</em></p><p><strong>Example 1:</strong></p><figure><img src="https://assets.leetcode.com/uploads/2022/10/29/eg1.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><blockquote><p>Input: edges = [[0,1],[1,2],[1,3],[3,4]], bob = 3, amount = [-2,4,2,-4,6]</p><p>Output: 6</p><p>Explanation:</p><p>The above diagram represents the given tree. The game goes as follows:</p><ul><li><p>Alice is initially on node 0, Bob on node 3. They open the gates of their respective nodes.</p><p>Alice&#39;s net income is now -2.</p></li><li><p>Both Alice and Bob move to node 1.</p><p>Since they reach here simultaneously, they open the gate together and share the reward.</p><p>Alice&#39;s net income becomes -2 + (4 / 2) = 0.</p></li><li><p>Alice moves on to node 3. Since Bob already opened its gate, Alice&#39;s income remains unchanged.</p><p>Bob moves on to node 0, and stops moving.</p></li><li><p>Alice moves on to node 4 and opens the gate there. Her net income becomes 0 + 6 = 6.</p></li></ul><p>Now, neither Alice nor Bob can make any further moves, and the game ends.</p><p>It is not possible for Alice to get a higher net income.</p></blockquote><p><strong>Example 2:</strong></p><figure><img src="https://assets.leetcode.com/uploads/2022/10/29/eg2.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><blockquote><p>Input: edges = [[0,1]], bob = 1, amount = [-7280,2350]</p><p>Output: -7280</p><p>Explanation:</p><p>Alice follows the path 0-&gt;1 whereas Bob follows the path 1-&gt;0.</p><p>Thus, Alice opens the gate at node 0 only. Hence, her net income is -7280.</p></blockquote><p><strong>Constraints:</strong></p><ul><li><code>2 &lt;= n &lt;= 10^5</code></li><li><code>edges.length == n - 1</code></li><li><code>edges[i].length == 2</code></li><li><code>0 &lt;= ai, bi &lt; n</code></li><li><code>ai != bi</code></li><li><code>edges</code> represents a valid tree.</li><li><code>1 &lt;= bob &lt; n</code></li><li><code>amount.length == n</code></li><li><code>amount[i]</code> is an <strong>even</strong> integer in the range <code>[-10^4, 10^4]</code>.</li></ul><h2 id="é¢˜ç›®å¤§æ„" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®å¤§æ„" aria-hidden="true">#</a> é¢˜ç›®å¤§æ„</h2><p>ä¸€ä¸ª <code>n</code> ä¸ªèŠ‚ç‚¹çš„æ— å‘æ ‘ï¼ŒèŠ‚ç‚¹ç¼–å·ä¸º <code>0</code> åˆ° <code>n - 1</code> ï¼Œæ ‘çš„æ ¹ç»“ç‚¹æ˜¯ <code>0</code> å·èŠ‚ç‚¹ã€‚ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º <code>n - 1</code> çš„äºŒç»´æ•´æ•°æ•°ç»„ <code>edges</code> ï¼Œå…¶ä¸­ <code>edges[i] = [ai, bi]</code> ï¼Œè¡¨ç¤ºèŠ‚ç‚¹ <code>ai</code> å’Œ <code>bi</code> åœ¨æ ‘ä¸­æœ‰ä¸€æ¡è¾¹ã€‚</p><p>åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹ <code>i</code> å¤„æœ‰ä¸€æ‰‡é—¨ã€‚åŒæ—¶ç»™ä½ ä¸€ä¸ªéƒ½æ˜¯å¶æ•°çš„æ•°ç»„ <code>amount</code> ï¼Œå…¶ä¸­ <code>amount[i]</code> è¡¨ç¤ºï¼š</p><ul><li>å¦‚æœ <code>amount[i]</code> çš„å€¼æ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆå®ƒè¡¨ç¤ºæ‰“å¼€èŠ‚ç‚¹ <code>i</code> å¤„é—¨æ‰£é™¤çš„åˆ†æ•°ã€‚</li><li>å¦‚æœ <code>amount[i]</code> çš„å€¼æ˜¯æ­£æ•°ï¼Œé‚£ä¹ˆå®ƒè¡¨ç¤ºæ‰“å¼€èŠ‚ç‚¹ <code>i</code> å¤„é—¨åŠ ä¸Šçš„åˆ†æ•°ã€‚</li></ul><p>æ¸¸æˆæŒ‰ç…§å¦‚ä¸‹è§„åˆ™è¿›è¡Œï¼š</p><ul><li><p>ä¸€å¼€å§‹ï¼ŒAlice åœ¨èŠ‚ç‚¹ <code>0</code> å¤„ï¼ŒBob åœ¨èŠ‚ç‚¹ <code>bob</code> å¤„ã€‚</p></li><li><p>æ¯ä¸€ç§’é’Ÿï¼ŒAlice å’Œ Bob <strong>åˆ†åˆ«</strong> ç§»åŠ¨åˆ°ç›¸é‚»çš„èŠ‚ç‚¹ã€‚Alice æœç€æŸä¸ª <strong>å¶å­ç»“ç‚¹</strong> ç§»åŠ¨ï¼ŒBob æœç€èŠ‚ç‚¹ <code>0</code> ç§»åŠ¨ã€‚</p></li><li><p>å¯¹äºä»–ä»¬ä¹‹é—´è·¯å¾„ä¸Šçš„ <strong>æ¯ä¸€ä¸ª</strong> èŠ‚ç‚¹ï¼ŒAlice å’Œ Bob è¦ä¹ˆæ‰“å¼€é—¨å¹¶æ‰£åˆ†ï¼Œè¦ä¹ˆæ‰“å¼€é—¨å¹¶åŠ åˆ†ã€‚æ³¨æ„ï¼š</p><ul><li><p>å¦‚æœé—¨ <strong>å·²ç»æ‰“å¼€</strong> ï¼ˆè¢«å¦ä¸€ä¸ªäººæ‰“å¼€ï¼‰ï¼Œä¸ä¼šæœ‰é¢å¤–åŠ åˆ†ä¹Ÿä¸ä¼šæ‰£åˆ†ã€‚</p></li><li><p>å¦‚æœ Alice å’Œ Bob <strong>åŒæ—¶</strong> åˆ°è¾¾ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»–ä»¬ä¼šå…±äº«è¿™ä¸ªèŠ‚ç‚¹çš„åŠ åˆ†æˆ–è€…æ‰£åˆ†ã€‚æ¢è¨€ä¹‹ï¼Œå¦‚æœæ‰“å¼€è¿™æ‰‡é—¨æ‰£ <code>c</code> åˆ†ï¼Œé‚£ä¹ˆ Alice å’Œ Bob åˆ†åˆ«æ‰£ <code>c / 2</code> åˆ†ã€‚å¦‚æœè¿™æ‰‡é—¨çš„åŠ åˆ†ä¸º <code>c</code> ï¼Œé‚£ä¹ˆä»–ä»¬åˆ†åˆ«åŠ  <code>c / 2</code> åˆ†ã€‚</p></li></ul></li><li><p>å¦‚æœ Alice åˆ°è¾¾äº†ä¸€ä¸ªå¶å­ç»“ç‚¹ï¼Œå¥¹ä¼šåœæ­¢ç§»åŠ¨ã€‚ç±»ä¼¼çš„ï¼Œå¦‚æœ Bob åˆ°è¾¾äº†èŠ‚ç‚¹ <code>0</code> ï¼Œä»–ä¹Ÿä¼šåœæ­¢ç§»åŠ¨ã€‚æ³¨æ„è¿™äº›äº‹ä»¶äº’ç›¸ <strong>ç‹¬ç«‹</strong> ï¼Œä¸ä¼šå½±å“å¦ä¸€æ–¹ç§»åŠ¨ã€‚</p></li></ul><p>è¯·ä½ è¿”å› Alice æœæœ€ä¼˜å¶å­ç»“ç‚¹ç§»åŠ¨çš„ <strong>æœ€å¤§</strong> å‡€å¾—åˆ†ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure><img src="https://assets.leetcode.com/uploads/2022/10/29/eg1.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><blockquote><p><strong>è¾“å…¥ï¼š</strong> edges = [[0,1],[1,2],[1,3],[3,4]], bob = 3, amount = [-2,4,2,-4,6]</p><p><strong>è¾“å‡ºï¼š</strong> 6</p><p><strong>è§£é‡Šï¼š</strong></p><p>ä¸Šå›¾å±•ç¤ºäº†è¾“å…¥ç»™å‡ºçš„ä¸€æ£µæ ‘ã€‚æ¸¸æˆè¿›è¡Œå¦‚ä¸‹ï¼š</p><ul><li><p>Alice ä¸€å¼€å§‹åœ¨èŠ‚ç‚¹ 0 å¤„ï¼ŒBob åœ¨èŠ‚ç‚¹ 3 å¤„ã€‚ä»–ä»¬åˆ†åˆ«æ‰“å¼€æ‰€åœ¨èŠ‚ç‚¹çš„é—¨ã€‚</p><p>Alice å¾—åˆ†ä¸º -2 ã€‚</p></li><li><p>Alice å’Œ Bob éƒ½ç§»åŠ¨åˆ°èŠ‚ç‚¹ 1 ã€‚</p><p>å› ä¸ºä»–ä»¬åŒæ—¶åˆ°è¾¾è¿™ä¸ªèŠ‚ç‚¹ï¼Œä»–ä»¬ä¸€èµ·æ‰“å¼€é—¨å¹¶å¹³åˆ†å¾—åˆ†ã€‚</p><p>Alice çš„å¾—åˆ†å˜ä¸º -2 + (4 / 2) = 0 ã€‚</p></li><li><p>Alice ç§»åŠ¨åˆ°èŠ‚ç‚¹ 3 ã€‚å› ä¸º Bob å·²ç»æ‰“å¼€äº†è¿™æ‰‡é—¨ï¼ŒAlice å¾—åˆ†ä¸å˜ã€‚</p><p>Bob ç§»åŠ¨åˆ°èŠ‚ç‚¹ 0 ï¼Œå¹¶åœæ­¢ç§»åŠ¨ã€‚</p></li><li><p>Alice ç§»åŠ¨åˆ°èŠ‚ç‚¹ 4 å¹¶æ‰“å¼€è¿™ä¸ªèŠ‚ç‚¹çš„é—¨ï¼Œå¥¹å¾—åˆ†å˜ä¸º 0 + 6 = 6 ã€‚</p></li></ul><p>ç°åœ¨ï¼ŒAlice å’Œ Bob éƒ½ä¸èƒ½è¿›è¡Œä»»ä½•ç§»åŠ¨äº†ï¼Œæ‰€ä»¥æ¸¸æˆç»“æŸã€‚</p><p>Alice æ— æ³•å¾—åˆ°æ›´é«˜åˆ†æ•°ã€‚</p></blockquote><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure><img src="https://assets.leetcode.com/uploads/2022/10/29/eg2.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><blockquote><p><strong>è¾“å…¥ï¼š</strong> edges = [[0,1]], bob = 1, amount = [-7280,2350]</p><p><strong>è¾“å‡ºï¼š</strong> -7280</p><p><strong>è§£é‡Šï¼š</strong></p><p>Alice æŒ‰ç…§è·¯å¾„ 0-&gt;1 ç§»åŠ¨ï¼ŒåŒæ—¶ Bob æŒ‰ç…§è·¯å¾„ 1-&gt;0 ç§»åŠ¨ã€‚</p><p>æ‰€ä»¥ Alice åªæ‰“å¼€èŠ‚ç‚¹ 0 å¤„çš„é—¨ï¼Œå¥¹çš„å¾—åˆ†ä¸º -7280 ã€‚</p></blockquote><p><strong>æç¤ºï¼š</strong></p><ul><li><code>2 &lt;= n &lt;= 10^5</code></li><li><code>edges.length == n - 1</code></li><li><code>edges[i].length == 2</code></li><li><code>0 &lt;= ai, bi &lt; n</code></li><li><code>ai != bi</code></li><li><code>edges</code> è¡¨ç¤ºä¸€æ£µæœ‰æ•ˆçš„æ ‘ã€‚</li><li><code>1 &lt;= bob &lt; n</code></li><li><code>amount.length == n</code></li><li><code>amount[i]</code> æ˜¯èŒƒå›´ <code>[-10^4, 10^4]</code> ä¹‹é—´çš„ä¸€ä¸ª <strong>å¶æ•°</strong> ã€‚</li></ul><h2 id="è§£é¢˜æ€è·¯" tabindex="-1"><a class="header-anchor" href="#è§£é¢˜æ€è·¯" aria-hidden="true">#</a> è§£é¢˜æ€è·¯</h2><ol><li><strong>å»ºå›¾</strong>ï¼šç”±äºè¾“å…¥æ˜¯ä¸€æ£µæ ‘ï¼Œæˆ‘ä»¬ä½¿ç”¨ <strong>é‚»æ¥è¡¨</strong> å­˜å‚¨æ— å‘å›¾ç»“æ„ã€‚</li><li><strong>æ‰¾åˆ° Bob çš„è·¯å¾„</strong>ï¼š <ul><li>Bob åªèƒ½æ²¿ <strong>å”¯ä¸€çš„ä¸€æ¡è·¯å¾„</strong> ä» <code>bob</code> èµ°åˆ° <code>0</code>ï¼Œæˆ‘ä»¬ä½¿ç”¨ <strong>DFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰</strong> æ‰¾åˆ° Bob çš„è·¯å¾„ï¼Œå¹¶è®°å½• Bob ç»è¿‡æ¯ä¸ªèŠ‚ç‚¹çš„æ—¶é—´æ­¥ <code>bobPath[node]</code>ã€‚</li></ul></li><li><strong>DFS è®¡ç®— Alice çš„æœ€å¤§æ”¶ç›Š</strong>ï¼š <ul><li>Alice é€‰æ‹©ä¸€æ¡è·¯å¾„ï¼Œä½¿å¾—å¥¹çš„æ”¶ç›Šæœ€å¤§ã€‚Alice çš„æ”¶ç›Šè®¡ç®—å¦‚ä¸‹ï¼š <ul><li>å¦‚æœ Alice <strong>å…ˆåˆ°è¾¾</strong> <code>node</code>ï¼Œå¥¹å¯ä»¥è·å¾— <strong>å…¨éƒ¨ <code>amount[node]</code></strong>ã€‚</li><li>å¦‚æœ Bob <strong>å…ˆåˆ°è¾¾</strong> <code>node</code>ï¼ŒAlice <strong>æ— æ³•è·å¾—</strong> <code>amount[node]</code>ã€‚</li><li>å¦‚æœ Alice å’Œ Bob <strong>åŒæ—¶åˆ°è¾¾</strong>ï¼ŒAlice <strong>åªèƒ½è·å¾— <code>amount[node] / 2</code></strong>ã€‚</li></ul></li><li>ç”±äº Alice éœ€è¦æ‰¾åˆ° <strong>ä» <code>0</code> å·èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„æœ€å¤§æ”¶ç›Šè·¯å¾„</strong>ï¼Œæˆ‘ä»¬é‡‡ç”¨ <strong>DFS è¿›è¡Œæ”¶ç›Šè®¡ç®—</strong>ã€‚</li></ul></li></ol><h4 id="å¤æ‚åº¦åˆ†æ" tabindex="-1"><a class="header-anchor" href="#å¤æ‚åº¦åˆ†æ" aria-hidden="true">#</a> å¤æ‚åº¦åˆ†æ</h4><ul><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š<code>O(n)</code>ï¼Œéå†æ•´æ£µæ ‘ï¼Œæ‰§è¡Œä¸¤æ¬¡ DFSï¼ˆä¸€æ¬¡æ‰¾åˆ° Bob è·¯å¾„ï¼Œä¸€æ¬¡ Alice è®¡ç®—æ”¶ç›Šï¼‰ã€‚</li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š<code>O(n)</code>ï¼Œå­˜å‚¨é‚»æ¥è¡¨ <code>graph</code>ã€Bob è®¿é—®è·¯å¾„ <code>bobPath</code>ã€DFS é€’å½’æ ˆã€‚</li></ul><h2 id="ä»£ç " tabindex="-1"><a class="header-anchor" href="#ä»£ç " aria-hidden="true">#</a> ä»£ç </h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span> <span class="token parameter">edges</span>
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token parameter">bob</span>
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span> <span class="token parameter">amount</span>
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span>
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">mostProfitablePath</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">edges<span class="token punctuation">,</span> bob<span class="token punctuation">,</span> amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> graph <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span> <span class="token keyword">of</span> edges<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>graph<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span> graph<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>graph<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">)</span> graph<span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		graph<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
		graph<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// è®°å½• Bob ç»è¿‡çš„è·¯å¾„</span>
	<span class="token keyword">const</span> <span class="token function-variable function">findBobPath</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
		visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			bobPath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>node<span class="token punctuation">,</span> i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®°å½• Bob ç»è¿‡çš„èŠ‚ç‚¹åŠæ­¥æ•°</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// æ‰¾åˆ°è·¯å¾„åç»ˆæ­¢æœç´¢</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> child <span class="token keyword">of</span> graph<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">findBobPath</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">const</span> <span class="token function-variable function">findMaxIncome</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> score<span class="token punctuation">,</span> step</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>bobPath<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">let</span> bobStep <span class="token operator">=</span> bobPath<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">&lt;</span> bobStep<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				score <span class="token operator">+=</span> amount<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">===</span> bobStep<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				score <span class="token operator">+=</span> amount<span class="token punctuation">[</span>node<span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			score <span class="token operator">+=</span> amount<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>graph<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> node <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			maxIncome <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxIncome<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> child <span class="token keyword">of</span> graph<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">findMaxIncome</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> score<span class="token punctuation">,</span> step <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		visited<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">let</span> visited <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> bobPath<span class="token punctuation">;</span>
	<span class="token function">findBobPath</span><span class="token punctuation">(</span>bob<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">let</span> maxIncome <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">Infinity</span><span class="token punctuation">;</span>
	visited<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">findMaxIncome</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> maxIncome<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç›¸å…³é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#ç›¸å…³é¢˜ç›®" aria-hidden="true">#</a> ç›¸å…³é¢˜ç›®</h2>`,37),B=n("thead",null,[n("tr",null,[n("th",{style:{"text-align":"center"}},"é¢˜å·"),n("th",{style:{"text-align":"left"}},"æ ‡é¢˜"),n("th",{style:{"text-align":"center"}},"é¢˜è§£"),n("th",{style:{"text-align":"left"}},"æ ‡ç­¾"),n("th",{style:{"text-align":"center"}},"éš¾åº¦"),n("th",{style:{"text-align":"center"}},"åŠ›æ‰£")])],-1),I=n("td",{style:{"text-align":"center"}},"909",-1),S=n("td",{style:{"text-align":"left"}},"è›‡æ¢¯æ£‹",-1),P={style:{"text-align":"center"}},q={style:{"text-align":"left"}},N=n("code",null,"å¹¿åº¦ä¼˜å…ˆæœç´¢",-1),E=n("code",null,"æ•°ç»„",-1),T=n("code",null,"çŸ©é˜µ",-1),D=n("td",{style:{"text-align":"center"}},"ğŸŸ ",-1),F={style:{"text-align":"center"}},M={href:"https://leetcode.cn/problems/snakes-and-ladders",target:"_blank",rel:"noopener noreferrer"},C={href:"https://leetcode.com/problems/snakes-and-ladders",target:"_blank",rel:"noopener noreferrer"},L=n("td",{style:{"text-align":"center"}},"3241",-1),V=n("td",{style:{"text-align":"left"}},"æ ‡è®°æ‰€æœ‰èŠ‚ç‚¹éœ€è¦çš„æ—¶é—´",-1),j=n("td",{style:{"text-align":"center"}},null,-1),z={style:{"text-align":"left"}},O=n("code",null,"æ ‘",-1),R=n("code",null,"æ·±åº¦ä¼˜å…ˆæœç´¢",-1),H=n("code",null,"å›¾",-1),Y=n("code",null,"1+",-1),G=n("td",{style:{"text-align":"center"}},"ğŸ”´",-1),J={style:{"text-align":"center"}},K={href:"https://leetcode.cn/problems/time-taken-to-mark-all-nodes",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://leetcode.com/problems/time-taken-to-mark-all-nodes",target:"_blank",rel:"noopener noreferrer"};function U(W,X){const c=p("font"),e=p("RouterLink"),o=p("ExternalLinkIcon");return i(),u("div",null,[h,n("p",null,[s("ğŸŸ  "),a(c,{color:"#ffb800"},{default:t(()=>[s("Medium")]),_:1}),s("â€ƒ ğŸ”–â€‚ "),a(e,{to:"/tag/tree.html"},{default:t(()=>[m]),_:1}),s(),a(e,{to:"/tag/depth-first-search.html"},{default:t(()=>[g]),_:1}),s(),a(e,{to:"/tag/breadth-first-search.html"},{default:t(()=>[b]),_:1}),s(),a(e,{to:"/tag/graph.html"},{default:t(()=>[v]),_:1}),s(),a(e,{to:"/tag/array.html"},{default:t(()=>[f]),_:1}),s("â€ƒ ğŸ”—â€‚"),n("a",_,[y,a(o)]),s(),n("a",w,[x,a(o)])]),A,d(" prettier-ignore "),n("table",null,[B,n("tbody",null,[n("tr",null,[I,S,n("td",P,[a(e,{to:"/problem/0909.html"},{default:t(()=>[s("[âœ“]")]),_:1})]),n("td",q,[a(e,{to:"/tag/breadth-first-search.html"},{default:t(()=>[N]),_:1}),s(),a(e,{to:"/tag/array.html"},{default:t(()=>[E]),_:1}),s(),a(e,{to:"/tag/matrix.html"},{default:t(()=>[T]),_:1})]),D,n("td",F,[n("a",M,[s("ğŸ€„ï¸"),a(o)]),s(),n("a",C,[s("ğŸ”—"),a(o)])])]),n("tr",null,[L,V,j,n("td",z,[a(e,{to:"/tag/tree.html"},{default:t(()=>[O]),_:1}),s(),a(e,{to:"/tag/depth-first-search.html"},{default:t(()=>[R]),_:1}),s(),a(e,{to:"/tag/graph.html"},{default:t(()=>[H]),_:1}),s(),Y]),G,n("td",J,[n("a",K,[s("ğŸ€„ï¸"),a(o)]),s(),n("a",Q,[s("ğŸ”—"),a(o)])])])])])])}const $=l(k,[["render",U],["__file","2467.html.vue"]]);export{$ as default};
