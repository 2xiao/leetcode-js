# [59-I. æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼](https://leetcode.cn/problems/hua-dong-chuang-kou-de-zui-da-zhi-lcof)

ğŸ”´ <font color=#ff334b>Hard</font>&emsp; ğŸ”–&ensp; [`é˜Ÿåˆ—`](/tag/queue.md) [`æ•°ç»„`](/tag/array.md) [`æ»‘åŠ¨çª—å£`](/tag/sliding-window.md) [`å•è°ƒé˜Ÿåˆ—`](/tag/monotonic-queue.md) [`å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰`](/tag/heap-priority-queue.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.cn/problems/hua-dong-chuang-kou-de-zui-da-zhi-lcof)

## é¢˜ç›®

ç§‘æŠ€é¦†å†…æœ‰ä¸€å°è™šæ‹Ÿè§‚æ™¯æœ›è¿œé•œï¼Œå®ƒå¯ä»¥ç”¨æ¥è§‚æµ‹ç‰¹å®šçº¬åº¦åœ°åŒºçš„åœ°å½¢æƒ…å†µã€‚è¯¥çº¬åº¦çš„æµ·æ‹”æ•°æ®è®°äºæ•°ç»„ `heights` ï¼Œå…¶ä¸­ `heights[i]`
è¡¨ç¤ºå¯¹åº”ä½ç½®çš„æµ·æ‹”é«˜åº¦ã€‚è¯·æ‰¾å‡ºå¹¶è¿”å›æœ›è¿œé•œè§†é‡èŒƒå›´ `limit` å†…ï¼Œå¯ä»¥è§‚æµ‹åˆ°çš„æœ€é«˜æµ·æ‹”å€¼ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** heights = [14,2,27,-5,28,13,39], limit = 3
>
> **è¾“å‡ºï¼š**[27,27,28,28,39]
>
> **è§£é‡Šï¼š**
>
> ```
>   æ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼
> ---------------               -----
> [14 2 27] -5 28 13 39           27
>
> 14 [2 27 -5] 28 13 39           27
>
> 14 2 [27 -5 28] 13 39           28
>
> 14 2 27 [-5 28 13] 39           28
>
> 14 2 27 -5 [28 13 39]           39
> ```

**æç¤ºï¼š**

ä½ å¯ä»¥å‡è®¾è¾“å…¥æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œåœ¨è¾“å…¥æ•°ç»„ä¸ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼š

- `1 <= limit <= heights.length`
- `-10000 <= heights[i] <= 10000`

::: warning
æœ¬é¢˜ä¸ LeetCode [ç¬¬ 239 é¢˜](../problem/0239.md) ç›¸åŒã€‚
:::

## è§£é¢˜æ€è·¯

åŒç«¯é˜Ÿåˆ—ï¼ˆDequeï¼Œå…¨ç§° Double Ended Queueï¼‰æ˜¯ä¸€ç§å¯ä»¥åœ¨ä¸¤ç«¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ•°æ®ç»“æ„ã€‚ç›¸æ¯”äºæ™®é€šçš„é˜Ÿåˆ—ï¼ˆåªèƒ½åœ¨ä¸€ç«¯æ’å…¥ï¼Œåœ¨å¦ä¸€ç«¯åˆ é™¤ï¼‰ï¼ŒåŒç«¯é˜Ÿåˆ—æ›´åŠ çµæ´»ï¼Œé€‚ç”¨äºä¸€äº›ç‰¹æ®Šçš„åœºæ™¯ã€‚åœ¨ JavaScript ä¸­ï¼ŒåŒç«¯é˜Ÿåˆ—å¯ä»¥ä½¿ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿã€‚

1. éå†æ•°ç»„ï¼šæ¯æ¬¡ç§»åŠ¨æ»‘åŠ¨çª—å£æ—¶ï¼Œå¯¹åŒç«¯é˜Ÿåˆ—è¿›è¡Œæ›´æ–°ï¼š

- å¦‚æœé˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ å·²ç»ä¸åœ¨å½“å‰çª—å£ä¸­ï¼ˆå³ç´¢å¼•å°äº `i - limit + 1`ï¼‰ï¼Œå°†å…¶ç§»é™¤ã€‚
- åœ¨é˜Ÿåˆ—å°¾éƒ¨ï¼Œç§»é™¤æ‰€æœ‰å°äºå½“å‰å…ƒç´ çš„å€¼ï¼Œå› ä¸ºå®ƒä»¬ä¸å¯èƒ½æˆä¸ºå½“å‰æˆ–ä¹‹åçª—å£çš„æœ€å¤§å€¼ã€‚
- å°†å½“å‰å…ƒç´ çš„ç´¢å¼•åŠ å…¥é˜Ÿåˆ—ã€‚

2. è·å–æœ€å¤§å€¼ï¼šå¯¹äºæ¯ä¸€ä¸ªçª—å£ï¼Œé˜Ÿåˆ—çš„å‰ç«¯å§‹ç»ˆä¿å­˜å½“å‰çª—å£çš„æœ€å¤§å€¼çš„ç´¢å¼•ã€‚

æ³¨æ„ï¼š

- å­˜å‚¨æ•°ç»„å…ƒç´ çš„ç´¢å¼•ï¼šä¸ä¼šç›´æ¥å­˜å‚¨æ•°ç»„çš„å€¼ï¼Œè€Œæ˜¯å­˜å‚¨å…ƒç´ çš„ç´¢å¼•ï¼Œä»¥ä¾¿é€šè¿‡ç´¢å¼•è®¿é—®å…·ä½“çš„å€¼ï¼Œå¹¶é€šè¿‡ç´¢å¼•åˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦è¿˜åœ¨å½“å‰æ»‘åŠ¨çª—å£ä¸­ã€‚
- ä¿æŒé˜Ÿåˆ—ä¸­çš„å…ƒç´ å•è°ƒé€’å‡ï¼šä¸ºäº†ä¿è¯é˜Ÿåˆ—çš„å‰ç«¯å§‹ç»ˆæ˜¯çª—å£çš„æœ€å¤§å€¼ï¼Œä¼šä»é˜Ÿåˆ—çš„åç«¯ç§»é™¤æ‰€æœ‰å°äºå½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚æ¯ä¸ªå…ƒç´ è¢«åŠ å…¥å’Œç§»é™¤é˜Ÿåˆ—è‡³å¤šå„ä¸€æ¬¡ï¼Œå› æ­¤æ€»çš„æ“ä½œæ¬¡æ•°ä¸º `O(n)`ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(limit)`ï¼Œé˜Ÿåˆ—çš„å¤§å°åœ¨æœ€åæƒ…å†µä¸‹ä¸º `limit`ã€‚

## ä»£ç 

```javascript
/**
 * @param {number[]} heights
 * @param {number} limit
 * @return {number[]}
 */
var maxAltitude = function (heights, limit) {
	let deque = [],
		res = [];
	for (let i = 0; i < heights.length; i++) {
		if (deque.length && deque[0] < i - limit + 1) {
			deque.shift();
		}
		while (deque.length && heights[deque[deque.length - 1]] < heights[i]) {
			deque.pop();
		}
		deque.push(i);
		if (i >= limit - 1) {
			res.push(heights[deque[0]]);
		}
	}
	return res;
};
```
