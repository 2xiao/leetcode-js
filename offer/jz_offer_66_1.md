# [66. æ„å»ºä¹˜ç§¯æ•°ç»„](https://leetcode.cn/problems/gou-jian-cheng-ji-shu-zu-lcof)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`æ•°ç»„`](/tag/array.md) [`å‰ç¼€å’Œ`](/tag/prefix-sum.md)&emsp; ğŸ”—&ensp;[`LeetCode`](https://leetcode.cn/problems/gou-jian-cheng-ji-shu-zu-lcof)

## é¢˜ç›®

<p>ä¸ºäº†æ·±å…¥äº†è§£è¿™äº›ç”Ÿç‰©ç¾¤ä½“çš„ç”Ÿæ€ç‰¹å¾ï¼Œä½ ä»¬è¿›è¡Œäº†å¤§é‡çš„å®åœ°è§‚å¯Ÿå’Œæ•°æ®é‡‡é›†ã€‚æ•°ç»„ <code>arrayA</code> è®°å½•äº†å„ä¸ªç”Ÿç‰©ç¾¤ä½“æ•°é‡æ•°æ®ï¼Œå…¶ä¸­ <code>arrayA[i]</code> è¡¨ç¤ºç¬¬ <code>i</code> ä¸ªç”Ÿç‰©ç¾¤ä½“çš„æ•°é‡ã€‚è¯·è¿”å›ä¸€ä¸ªæ•°ç»„ <code>arrayB</code>ï¼Œè¯¥æ•°ç»„ä¸ºåŸºäºæ•°ç»„ <code>arrayA</code> ä¸­çš„æ•°æ®è®¡ç®—å¾—å‡ºçš„ç»“æœï¼Œå…¶ä¸­ <code>arrayB[i]</code> è¡¨ç¤ºå°†ç¬¬ <code>i</code> ä¸ªç”Ÿç‰©ç¾¤ä½“çš„æ•°é‡ä»æ€»ä½“ä¸­æ’é™¤åçš„å…¶ä»–æ•°é‡çš„ä¹˜ç§¯ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>arrayA = [2, 4, 6, 8, 10]
<strong>è¾“å‡ºï¼š</strong>[1920, 960, 640, 480, 384]
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li>æ‰€æœ‰å…ƒç´ ä¹˜ç§¯ä¹‹å’Œä¸ä¼šæº¢å‡º 32 ä½æ•´æ•°</li>
	<li><code>arrayA.length &lt;= 100000</code></li>
</ul>

<p>&nbsp;</p>


## è§£é¢˜æ€è·¯

### æ€è·¯ä¸€ï¼šå‰ç¼€ç§¯

è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡ **å‰ç¼€ç§¯** å’Œ **åç¼€ç§¯** æ¥è§£å†³ï¼Œé¿å…ç›´æ¥è®¡ç®—æ¯ä¸ªä½ç½®çš„ä¹˜ç§¯ï¼Œä»è€Œé™ä½æ—¶é—´å¤æ‚åº¦ã€‚

1. å¯ä»¥å°†è¿™ä¸ªé—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š
   - è®¡ç®—æ¯ä¸ªå…ƒç´ ä¹‹å‰æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ï¼ˆ**å‰ç¼€ç§¯**ï¼‰ï¼›
   - è®¡ç®—æ¯ä¸ªå…ƒç´ ä¹‹åæ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ï¼ˆ**åç¼€ç§¯**ï¼‰ï¼›
2. è®¡ç®—å‰ç¼€ç§¯ï¼š
   - ä»å·¦åˆ°å³éå† `arrayA`ï¼Œç”¨å˜é‡ `prefix` è®°å½•å½“å‰å…ƒç´ ä¹‹å‰çš„æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ï¼Œå¹¶å°† `prefix` å­˜å…¥ `arrayB[i]` ä¸­ï¼›
3. è®¡ç®—åç¼€ç§¯ï¼š
   - ä»å³åˆ°å·¦éå† `arrayA`ï¼Œç”¨å˜é‡ `suffix` è®°å½•å½“å‰å…ƒç´ ä¹‹åçš„æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ï¼Œå¹¶å°† `suffix` ä¸ä¹‹å‰è®¡ç®—å¾—åˆ°çš„å‰ç¼€ç§¯ `arrayB[i]` ç›¸ä¹˜ï¼Œå­˜å…¥ `arrayB` ä¸­ï¼›
4. æœ€ç»ˆè¿”å›ç»“æœæ•°ç»„ `arrayB`ï¼›

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œå‰ç¼€ç§¯å’Œåç¼€ç§¯çš„è®¡ç®—å„éœ€è¦ä¸€æ¬¡çº¿æ€§æ‰«æã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªç”¨äº†ä¸€ä¸ª `arrayB` æ•°ç»„æ¥å­˜å‚¨ç»“æœï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º `O(1)`ï¼ˆä¸è®¡å…¥è¾“å‡ºæ•°ç»„çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨äº†å¸¸æ•°ç©ºé—´ï¼‰ã€‚

---

### æ€è·¯äºŒï¼šé™¤æ³•

1. **ç»Ÿè®¡é›¶çš„ä¸ªæ•°**ï¼š

   - éå†æ•°ç»„ `arrayA`ï¼Œç»Ÿè®¡å…¶ä¸­é›¶çš„æ•°é‡ `zeroCount`ï¼Œå¹¶åŒæ—¶è®¡ç®—éé›¶å…ƒç´ çš„ä¹˜ç§¯ `totalProduct`ã€‚

2. **å¤„ç†ä¸åŒçš„æƒ…å†µ**ï¼š

   - **æ— é›¶çš„æƒ…å†µ (`zeroCount == 0`)**ï¼šç›´æ¥è¿”å› `totalProduct` é™¤ä»¥æ¯ä¸ªå…ƒç´ ï¼Œå¾—åˆ° `arrayB[i] = totalProduct / arrayA[i]`ã€‚
   - **æœ‰ä¸€ä¸ªé›¶çš„æƒ…å†µ (`zeroCount == 1`)**ï¼šè¿”å›çš„ç»“æœæ•°ç»„ä¸­ï¼Œåªæœ‰å¯¹åº”äºé›¶çš„ä½ç½®çš„å…ƒç´ æ˜¯ `totalProduct`ï¼Œå…¶ä½™å…ƒç´ ä¸ºé›¶ã€‚
   - **å¤šä¸ªé›¶çš„æƒ…å†µ (`zeroCount > 1`)**ï¼šæ‰€æœ‰çš„å…ƒç´ éƒ½ä¸ºé›¶ï¼Œè¿”å›ä¸€ä¸ªå…¨ä¸ºé›¶çš„æ•°ç»„ã€‚

3. **è¿”å›ç»“æœ**ï¼šæ ¹æ®ä¸åŒæƒ…å†µæ„å»ºå¹¶è¿”å›ç»“æœæ•°ç»„ `arrayB`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œç»Ÿè®¡é›¶çš„ä¸ªæ•°åŠæ„é€ ç»“æœæ•°ç»„ï¼Œéƒ½éœ€è¦ä¸€æ¬¡çº¿æ€§æ‰«æã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œé™¤äº†å­˜å‚¨ç»“æœçš„è¾“å‡ºæ•°ç»„å¤–ï¼Œæœªä½¿ç”¨é¢å¤–çš„æ•°ç»„ï¼ˆä¸è®¡å…¥è¾“å‡ºæ•°ç»„çš„æƒ…å†µä¸‹ï¼‰ã€‚

## ä»£ç 

::: code-tabs
@tab å‰ç¼€ç§¯

```javascript
/**
 * @param {number[]} arrayA
 * @return {number[]}
 */
var statisticalResult = function (arrayA) {
	const n = arrayA.length;
	let arrayB = new Array(n).fill(1);

	// å‰ç¼€ç§¯
	let prefix = 1;
	for (let i = 0; i < n; i++) {
		arrayB[i] = prefix; // å­˜å‚¨å½“å‰å…ƒç´ ä¹‹å‰çš„ä¹˜ç§¯
		prefix *= arrayA[i]; // æ›´æ–°å‰ç¼€ç§¯
	}

	// åç¼€ç§¯
	let suffix = 1;
	for (let i = n - 1; i >= 0; i--) {
		arrayB[i] *= suffix; // å°†åç¼€ç§¯ä¹˜å…¥ç»“æœæ•°ç»„
		suffix *= arrayA[i]; // æ›´æ–°åç¼€ç§¯
	}

	return arrayB;
};
```

@tab é™¤æ³•

```javascript
/**
 * @param {number[]} arrayA
 * @return {number[]}
 */
var statisticalResult = function (arrayA) {
	let zoreCount = 0;
	const totalProduct = arrayA.reduce((acc, cur) => {
		if (cur == 0) {
			zoreCount++;
		} else {
			acc *= cur;
		}
		return acc;
	}, 1);
	if (zoreCount == 0) {
		return arrayA.map((num) => totalProduct / num);
	} else if (zoreCount == 1) {
		return arrayA.map((num) => (num == 0 ? totalProduct : 0));
	} else {
		return arrayA.map(() => 0);
	}
};
```

:::
