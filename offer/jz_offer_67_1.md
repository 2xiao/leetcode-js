# [67. æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°](https://2xiao.github.io/leetcode-js/offer/jz_offer_67_1.html)

ğŸŸ  <font color=#ffb800>Medium</font>&emsp; ğŸ”–&ensp; [`å­—ç¬¦ä¸²`](/tag/string.md)&emsp; ğŸ”—&ensp;[`åŠ›æ‰£`](https://leetcode.cn/problems/ba-zi-fu-chuan-zhuan-huan-cheng-zheng-shu-lcof)

## é¢˜ç›®

è¯·ä½ æ¥å®ç°ä¸€ä¸ª `myAtoi(string s)` å‡½æ•°ï¼Œä½¿å…¶èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼ˆç±»ä¼¼ C/C++ ä¸­çš„ `atoi` å‡½æ•°ï¼‰ã€‚

å‡½æ•° `myAtoi(string s)` çš„ç®—æ³•å¦‚ä¸‹ï¼š

1. è¯»å…¥å­—ç¬¦ä¸²å¹¶ä¸¢å¼ƒæ— ç”¨çš„å‰å¯¼ç©ºæ ¼
2. æ£€æŸ¥ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼ˆå‡è®¾è¿˜æœªåˆ°å­—ç¬¦æœ«å°¾ï¼‰ä¸ºæ­£è¿˜æ˜¯è´Ÿå·ï¼Œè¯»å–è¯¥å­—ç¬¦ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚ ç¡®å®šæœ€ç»ˆç»“æœæ˜¯è´Ÿæ•°è¿˜æ˜¯æ­£æ•°ã€‚ å¦‚æœä¸¤è€…éƒ½ä¸å­˜åœ¨ï¼Œåˆ™å‡å®šç»“æœä¸ºæ­£ã€‚
3. è¯»å…¥ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œç›´åˆ°åˆ°è¾¾ä¸‹ä¸€ä¸ªéæ•°å­—å­—ç¬¦æˆ–åˆ°è¾¾è¾“å…¥çš„ç»“å°¾ã€‚å­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†å°†è¢«å¿½ç•¥ã€‚
4. å°†å‰é¢æ­¥éª¤è¯»å…¥çš„è¿™äº›æ•°å­—è½¬æ¢ä¸ºæ•´æ•°ï¼ˆå³ï¼Œ"123" -> 123ï¼Œ "0032" -> 32ï¼‰ã€‚å¦‚æœæ²¡æœ‰è¯»å…¥æ•°å­—ï¼Œåˆ™æ•´æ•°ä¸º `0` ã€‚å¿…è¦æ—¶æ›´æ”¹ç¬¦å·ï¼ˆä»æ­¥éª¤ 2 å¼€å§‹ï¼‰ã€‚
5. å¦‚æœæ•´æ•°æ•°è¶…è¿‡ 32 ä½æœ‰ç¬¦å·æ•´æ•°èŒƒå›´ `[âˆ’231,  2^31 âˆ’ 1]` ï¼Œéœ€è¦æˆªæ–­è¿™ä¸ªæ•´æ•°ï¼Œä½¿å…¶ä¿æŒåœ¨è¿™ä¸ªèŒƒå›´å†…ã€‚å…·ä½“æ¥è¯´ï¼Œå°äº `âˆ’ 2^31` çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º `âˆ’ 2^31` ï¼Œå¤§äº `2^31 âˆ’ 1` çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º `2^31 âˆ’ 1` ã€‚
6. è¿”å›æ•´æ•°ä½œä¸ºæœ€ç»ˆç»“æœã€‚

**æ³¨æ„ï¼š**

- æœ¬é¢˜ä¸­çš„ç©ºç™½å­—ç¬¦åªåŒ…æ‹¬ç©ºæ ¼å­—ç¬¦ `' '` ã€‚
- é™¤å‰å¯¼ç©ºæ ¼æˆ–æ•°å­—åçš„å…¶ä½™å­—ç¬¦ä¸²å¤–ï¼Œ**è¯·å‹¿å¿½ç•¥** ä»»ä½•å…¶ä»–å­—ç¬¦ã€‚

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** s = "42"
>
> **è¾“å‡ºï¼š** 42
>
> **è§£é‡Šï¼š** åŠ ç²—çš„å­—ç¬¦ä¸²ä¸ºå·²ç»è¯»å…¥çš„å­—ç¬¦ï¼Œæ’å…¥ç¬¦å·æ˜¯å½“å‰è¯»å–çš„å­—ç¬¦ã€‚
>
> ç¬¬ 1 æ­¥ï¼š"42"ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰
>
> ç¬¬ 2 æ­¥ï¼š"42"ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºè¿™é‡Œä¸å­˜åœ¨ '-' æˆ–è€… '+'ï¼‰
>
> ç¬¬ 3 æ­¥ï¼š"_42_ "ï¼ˆè¯»å…¥ "42"ï¼‰
>
> è§£æå¾—åˆ°æ•´æ•° 42 ã€‚
>
> ç”±äº "42" åœ¨èŒƒå›´ [-2^31, 2^31 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 42 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** s = " -42"
>
> **è¾“å‡ºï¼š** -42
>
> **è§£é‡Šï¼š**
>
> ç¬¬ 1 æ­¥ï¼š" -42"ï¼ˆè¯»å…¥å‰å¯¼ç©ºæ ¼ï¼Œä½†å¿½è§†æ‰ï¼‰
>
> ç¬¬ 2 æ­¥ï¼š" **-** 42"ï¼ˆè¯»å…¥ '-' å­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœåº”è¯¥æ˜¯è´Ÿæ•°ï¼‰
>
> ç¬¬ 3 æ­¥ï¼š" -**42**"ï¼ˆè¯»å…¥ "42"ï¼‰
>
> è§£æå¾—åˆ°æ•´æ•° -42 ã€‚
>
> ç”±äº "-42" åœ¨èŒƒå›´ [-2^31, 2^31 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º -42 ã€‚

**ç¤ºä¾‹ 3ï¼š**

> **è¾“å…¥ï¼š** s = "4193 with words"
>
> **è¾“å‡ºï¼š** 4193
>
> **è§£é‡Šï¼š**
>
> ç¬¬ 1 æ­¥ï¼š"4193 with words"ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰
>
> ç¬¬ 2 æ­¥ï¼š"4193 with words"ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºè¿™é‡Œä¸å­˜åœ¨ '-' æˆ–è€… '+'ï¼‰
>
> ç¬¬ 3 æ­¥ï¼š"_4193_ with words"ï¼ˆè¯»å…¥ "4193"ï¼›ç”±äºä¸‹ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥è¯»å…¥åœæ­¢ï¼‰
>
> è§£æå¾—åˆ°æ•´æ•° 4193 ã€‚
>
> ç”±äº "4193" åœ¨èŒƒå›´ [-2^31, 2^31 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 4193 ã€‚

**æç¤ºï¼š**

- `0 <= s.length <= 200`
- `s` ç”±è‹±æ–‡å­—æ¯ï¼ˆå¤§å†™å’Œå°å†™ï¼‰ã€æ•°å­—ï¼ˆ`0-9`ï¼‰ã€`' '`ã€`'+'`ã€`'-'` å’Œ `'.'` ç»„æˆ

::: warning
æœ¬é¢˜ä¸ LeetCode [ç¬¬ 8 é¢˜](../problem/0008.md) ç›¸åŒã€‚
:::

## è§£é¢˜æ€è·¯

é¢˜ç›®è¦æ±‚å®ç°ç±»ä¼¼ `C++` ä¸­ `atoi` å‡½æ•°çš„åŠŸèƒ½ï¼Œè¿™ä¸ªå‡½æ•°åŠŸèƒ½æ˜¯å°†å­—ç¬¦ä¸²ç±»å‹çš„æ•°å­—è½¬æˆ `int` ç±»å‹æ•°å­—ã€‚

1. å…ˆå»é™¤å­—ç¬¦ä¸²ä¸­çš„å‰å¯¼ç©ºæ ¼ï¼Œå¹¶åˆ¤æ–­è®°å½•æ•°å­—çš„ç¬¦å· `sign`ï¼›
2. éå†å­—ç¬¦ä¸²ï¼Œå¦‚æœ `s[i]` æ˜¯æ•´å‹ï¼Œåˆ™å°†å…¶è½¬æ¢æˆæ•°å­—ç±»å‹å­˜å…¥ `res`ï¼›
3. å¦‚æœé‡åˆ°éæ•´å‹ï¼Œåˆ™ç«‹åˆ»ç»“æŸéå†ï¼›
4. å°†æ•°å­—ä¹˜ä»¥ `sign`ï¼›
5. åˆ¤æ–­æ˜¯å¦è¶…è¿‡ `int` ç±»å‹çš„ä¸Šé™ `[-2^31, 2^31 - 1]`ï¼Œå¦‚æœè¶…è¿‡ä¸Šé™ï¼Œéœ€è¦è¾“å‡ºè¾¹ç•Œï¼Œå³ `-2^31`ï¼Œæˆ–è€… `2^31 - 1`ã€‚

#### å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ï¼›
  - å¯¹è¾“å…¥å­—ç¬¦ä¸²è¿›è¡Œ `trim()` æ“ä½œï¼Œå»é™¤å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾çš„ç©ºæ ¼ï¼Œæ­¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ï¼›
  - éå†å­—ç¬¦ä¸²ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦éå†æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º `O(n)`ï¼›
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œåªä½¿ç”¨äº†å‡ ä¸ªå˜é‡ï¼ˆå¦‚ `i`, `res`, å’Œ `sign`ï¼‰ï¼Œæ²¡æœ‰ä½¿ç”¨é¢å¤–çš„æ•°æ®ç»“æ„ã€‚

## ä»£ç 

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var myAtoi = function (s) {
	s = s.trim();
	if (s.length == 0) return 0;

	let i = 0;
	let res = 0;
	let sign = 1;

	if (s[i] === '-') {
		i++;
		sign = -1;
	} else if (s[i] === '+') {
		i++;
	}

	while (i < s.length && !isNaN(parseInt(s[i]))) {
		res = 10 * res + parseInt(s[i]);
		i++;
	}

	res *= sign;
	res = Math.max(Math.min(2 ** 31 - 1, res), -(2 ** 31));
	return res;
};
```
